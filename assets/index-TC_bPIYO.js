(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var gm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ft(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hk={exports:{}},Zy={},dk={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lp=Symbol.for("react.element"),Sz=Symbol.for("react.portal"),Ez=Symbol.for("react.fragment"),Tz=Symbol.for("react.strict_mode"),Az=Symbol.for("react.profiler"),Mz=Symbol.for("react.provider"),Pz=Symbol.for("react.context"),Cz=Symbol.for("react.forward_ref"),Rz=Symbol.for("react.suspense"),Oz=Symbol.for("react.memo"),Iz=Symbol.for("react.lazy"),oP=Symbol.iterator;function Nz(t){return t===null||typeof t!="object"?null:(t=oP&&t[oP]||t["@@iterator"],typeof t=="function"?t:null)}var pk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mk=Object.assign,gk={};function Ef(t,e,n){this.props=t,this.context=e,this.refs=gk,this.updater=n||pk}Ef.prototype.isReactComponent={};Ef.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ef.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vk(){}vk.prototype=Ef.prototype;function iE(t,e,n){this.props=t,this.context=e,this.refs=gk,this.updater=n||pk}var oE=iE.prototype=new vk;oE.constructor=iE;mk(oE,Ef.prototype);oE.isPureReactComponent=!0;var aP=Array.isArray,yk=Object.prototype.hasOwnProperty,aE={current:null},_k={key:!0,ref:!0,__self:!0,__source:!0};function xk(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)yk.call(e,r)&&!_k.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Lp,type:t,key:o,ref:a,props:i,_owner:aE.current}}function Dz(t,e){return{$$typeof:Lp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sE(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lp}function Lz(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sP=/\/+/g;function j_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Lz(""+t.key):e.toString(36)}function Cg(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Lp:case Sz:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+j_(a,0):r,aP(i)?(n="",t!=null&&(n=t.replace(sP,"$&/")+"/"),Cg(i,e,n,"",function(c){return c})):i!=null&&(sE(i)&&(i=Dz(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(sP,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",aP(t))for(var s=0;s<t.length;s++){o=t[s];var l=r+j_(o,s);a+=Cg(o,e,n,l,i)}else if(l=Nz(t),typeof l=="function")for(t=l.call(t),s=0;!(o=t.next()).done;)o=o.value,l=r+j_(o,s++),a+=Cg(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function vm(t,e,n){if(t==null)return t;var r=[],i=0;return Cg(t,r,"","",function(o){return e.call(n,o,i++)}),r}function kz(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Br={current:null},Rg={transition:null},jz={ReactCurrentDispatcher:Br,ReactCurrentBatchConfig:Rg,ReactCurrentOwner:aE};function bk(){throw Error("act(...) is not supported in production builds of React.")}Et.Children={map:vm,forEach:function(t,e,n){vm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vm(t,function(){e++}),e},toArray:function(t){return vm(t,function(e){return e})||[]},only:function(t){if(!sE(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Et.Component=Ef;Et.Fragment=Ez;Et.Profiler=Az;Et.PureComponent=iE;Et.StrictMode=Tz;Et.Suspense=Rz;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jz;Et.act=bk;Et.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=mk({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=aE.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)yk.call(e,l)&&!_k.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:Lp,type:t.type,key:i,ref:o,props:r,_owner:a}};Et.createContext=function(t){return t={$$typeof:Pz,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Mz,_context:t},t.Consumer=t};Et.createElement=xk;Et.createFactory=function(t){var e=xk.bind(null,t);return e.type=t,e};Et.createRef=function(){return{current:null}};Et.forwardRef=function(t){return{$$typeof:Cz,render:t}};Et.isValidElement=sE;Et.lazy=function(t){return{$$typeof:Iz,_payload:{_status:-1,_result:t},_init:kz}};Et.memo=function(t,e){return{$$typeof:Oz,type:t,compare:e===void 0?null:e}};Et.startTransition=function(t){var e=Rg.transition;Rg.transition={};try{t()}finally{Rg.transition=e}};Et.unstable_act=bk;Et.useCallback=function(t,e){return Br.current.useCallback(t,e)};Et.useContext=function(t){return Br.current.useContext(t)};Et.useDebugValue=function(){};Et.useDeferredValue=function(t){return Br.current.useDeferredValue(t)};Et.useEffect=function(t,e){return Br.current.useEffect(t,e)};Et.useId=function(){return Br.current.useId()};Et.useImperativeHandle=function(t,e,n){return Br.current.useImperativeHandle(t,e,n)};Et.useInsertionEffect=function(t,e){return Br.current.useInsertionEffect(t,e)};Et.useLayoutEffect=function(t,e){return Br.current.useLayoutEffect(t,e)};Et.useMemo=function(t,e){return Br.current.useMemo(t,e)};Et.useReducer=function(t,e,n){return Br.current.useReducer(t,e,n)};Et.useRef=function(t){return Br.current.useRef(t)};Et.useState=function(t){return Br.current.useState(t)};Et.useSyncExternalStore=function(t,e,n){return Br.current.useSyncExternalStore(t,e,n)};Et.useTransition=function(){return Br.current.useTransition()};Et.version="18.3.1";dk.exports=Et;var B=dk.exports;const G=Ft(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uz=B,Fz=Symbol.for("react.element"),Vz=Symbol.for("react.fragment"),Bz=Object.prototype.hasOwnProperty,$z=Uz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zz={key:!0,ref:!0,__self:!0,__source:!0};function wk(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Bz.call(e,r)&&!zz.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Fz,type:t,key:o,ref:a,props:i,_owner:$z.current}}Zy.Fragment=Vz;Zy.jsx=wk;Zy.jsxs=wk;hk.exports=Zy;var w=hk.exports,Fb={},Sk={exports:{}},mi={},Ek={exports:{}},Tk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,X){var K=V.length;V.push(X);e:for(;0<K;){var z=K-1>>>1,W=V[z];if(0<i(W,X))V[z]=X,V[K]=W,K=z;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var X=V[0],K=V.pop();if(K!==X){V[0]=K;e:for(var z=0,W=V.length,ee=W>>>1;z<ee;){var me=2*(z+1)-1,_e=V[me],Ne=me+1,We=V[Ne];if(0>i(_e,K))Ne<W&&0>i(We,_e)?(V[z]=We,V[Ne]=K,z=Ne):(V[z]=_e,V[me]=K,z=me);else if(Ne<W&&0>i(We,K))V[z]=We,V[Ne]=K,z=Ne;else break e}}return X}function i(V,X){var K=V.sortIndex-X.sortIndex;return K!==0?K:V.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var l=[],c=[],u=1,f=null,h=3,d=!1,v=!1,y=!1,g=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(V){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=V)r(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(c)}}function E(V){if(y=!1,_(V),!v)if(n(l)!==null)v=!0,q(b);else{var X=n(c);X!==null&&$(E,X.startTime-V)}}function b(V,X){v=!1,y&&(y=!1,p(A),A=-1),d=!0;var K=h;try{for(_(X),f=n(l);f!==null&&(!(f.expirationTime>X)||V&&!R());){var z=f.callback;if(typeof z=="function"){f.callback=null,h=f.priorityLevel;var W=z(f.expirationTime<=X);X=t.unstable_now(),typeof W=="function"?f.callback=W:f===n(l)&&r(l),_(X)}else r(l);f=n(l)}if(f!==null)var ee=!0;else{var me=n(c);me!==null&&$(E,me.startTime-X),ee=!1}return ee}finally{f=null,h=K,d=!1}}var M=!1,S=null,A=-1,T=5,P=-1;function R(){return!(t.unstable_now()-P<T)}function N(){if(S!==null){var V=t.unstable_now();P=V;var X=!0;try{X=S(!0,V)}finally{X?I():(M=!1,S=null)}}else M=!1}var I;if(typeof x=="function")I=function(){x(N)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,L=D.port2;D.port1.onmessage=N,I=function(){L.postMessage(null)}}else I=function(){g(N,0)};function q(V){S=V,M||(M=!0,I())}function $(V,X){A=g(function(){V(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){v||d||(v=!0,q(b))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(h){case 1:case 2:case 3:var X=3;break;default:X=h}var K=h;h=X;try{return V()}finally{h=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,X){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var K=h;h=V;try{return X()}finally{h=K}},t.unstable_scheduleCallback=function(V,X,K){var z=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?z+K:z):K=z,V){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=K+W,V={id:u++,callback:X,priorityLevel:V,startTime:K,expirationTime:W,sortIndex:-1},K>z?(V.sortIndex=K,e(c,V),n(l)===null&&V===n(c)&&(y?(p(A),A=-1):y=!0,$(E,K-z))):(V.sortIndex=W,e(l,V),v||d||(v=!0,q(b))),V},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(V){var X=h;return function(){var K=h;h=X;try{return V.apply(this,arguments)}finally{h=K}}}})(Tk);Ek.exports=Tk;var Hz=Ek.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gz=B,di=Hz;function we(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ak=new Set,yd={};function ql(t,e){Mu(t,e),Mu(t+"Capture",e)}function Mu(t,e){for(yd[t]=e,t=0;t<e.length;t++)Ak.add(e[t])}var pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vb=Object.prototype.hasOwnProperty,Wz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lP={},cP={};function qz(t){return Vb.call(cP,t)?!0:Vb.call(lP,t)?!1:Wz.test(t)?cP[t]=!0:(lP[t]=!0,!1)}function Xz(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Kz(t,e,n,r){if(e===null||typeof e>"u"||Xz(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $r(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var ur={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ur[t]=new $r(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ur[e]=new $r(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ur[t]=new $r(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ur[t]=new $r(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ur[t]=new $r(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ur[t]=new $r(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ur[t]=new $r(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ur[t]=new $r(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ur[t]=new $r(t,5,!1,t.toLowerCase(),null,!1,!1)});var lE=/[\-:]([a-z])/g;function cE(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lE,cE);ur[e]=new $r(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lE,cE);ur[e]=new $r(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lE,cE);ur[e]=new $r(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ur[t]=new $r(t,1,!1,t.toLowerCase(),null,!1,!1)});ur.xlinkHref=new $r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ur[t]=new $r(t,1,!1,t.toLowerCase(),null,!0,!0)});function uE(t,e,n,r){var i=ur.hasOwnProperty(e)?ur[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Kz(e,n,i,r)&&(n=null),r||i===null?qz(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Aa=Gz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ym=Symbol.for("react.element"),$c=Symbol.for("react.portal"),zc=Symbol.for("react.fragment"),fE=Symbol.for("react.strict_mode"),Bb=Symbol.for("react.profiler"),Mk=Symbol.for("react.provider"),Pk=Symbol.for("react.context"),hE=Symbol.for("react.forward_ref"),$b=Symbol.for("react.suspense"),zb=Symbol.for("react.suspense_list"),dE=Symbol.for("react.memo"),$a=Symbol.for("react.lazy"),Ck=Symbol.for("react.offscreen"),uP=Symbol.iterator;function ch(t){return t===null||typeof t!="object"?null:(t=uP&&t[uP]||t["@@iterator"],typeof t=="function"?t:null)}var dn=Object.assign,U_;function Ih(t){if(U_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);U_=e&&e[1]||""}return`
`+U_+t}var F_=!1;function V_(t,e){if(!t||F_)return"";F_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=s);break}}}finally{F_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ih(t):""}function Yz(t){switch(t.tag){case 5:return Ih(t.type);case 16:return Ih("Lazy");case 13:return Ih("Suspense");case 19:return Ih("SuspenseList");case 0:case 2:case 15:return t=V_(t.type,!1),t;case 11:return t=V_(t.type.render,!1),t;case 1:return t=V_(t.type,!0),t;default:return""}}function Hb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zc:return"Fragment";case $c:return"Portal";case Bb:return"Profiler";case fE:return"StrictMode";case $b:return"Suspense";case zb:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pk:return(t.displayName||"Context")+".Consumer";case Mk:return(t._context.displayName||"Context")+".Provider";case hE:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dE:return e=t.displayName||null,e!==null?e:Hb(t.type)||"Memo";case $a:e=t._payload,t=t._init;try{return Hb(t(e))}catch{}}return null}function Qz(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hb(e);case 8:return e===fE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _s(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Zz(t){var e=Rk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _m(t){t._valueTracker||(t._valueTracker=Zz(t))}function Ok(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Rk(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gb(t,e){var n=e.checked;return dn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function fP(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=_s(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ik(t,e){e=e.checked,e!=null&&uE(t,"checked",e,!1)}function Wb(t,e){Ik(t,e);var n=_s(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?qb(t,e.type,n):e.hasOwnProperty("defaultValue")&&qb(t,e.type,_s(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function qb(t,e,n){(e!=="number"||Zg(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Nh=Array.isArray;function du(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+_s(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Xb(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(we(91));return dn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(we(92));if(Nh(n)){if(1<n.length)throw Error(we(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_s(n)}}function Nk(t,e){var n=_s(e.value),r=_s(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Dk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kb(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Dk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xm,Lk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xm=xm||document.createElement("div"),xm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _d(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jz=["Webkit","ms","Moz","O"];Object.keys(Gh).forEach(function(t){Jz.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gh[e]=Gh[t]})});function kk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gh.hasOwnProperty(t)&&Gh[t]?(""+e).trim():e+"px"}function jk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=kk(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var e6=dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yb(t,e){if(e){if(e6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(we(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(we(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(we(61))}if(e.style!=null&&typeof e.style!="object")throw Error(we(62))}}function Qb(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zb=null;function pE(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jb=null,pu=null,mu=null;function mP(t){if(t=Up(t)){if(typeof Jb!="function")throw Error(we(280));var e=t.stateNode;e&&(e=r0(e),Jb(t.stateNode,t.type,e))}}function Uk(t){pu?mu?mu.push(t):mu=[t]:pu=t}function Fk(){if(pu){var t=pu,e=mu;if(mu=pu=null,mP(t),e)for(t=0;t<e.length;t++)mP(e[t])}}function Vk(t,e){return t(e)}function Bk(){}var B_=!1;function $k(t,e,n){if(B_)return t(e,n);B_=!0;try{return Vk(t,e,n)}finally{B_=!1,(pu!==null||mu!==null)&&(Bk(),Fk())}}function xd(t,e){var n=t.stateNode;if(n===null)return null;var r=r0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(we(231,e,typeof n));return n}var e1=!1;if(pa)try{var uh={};Object.defineProperty(uh,"passive",{get:function(){e1=!0}}),window.addEventListener("test",uh,uh),window.removeEventListener("test",uh,uh)}catch{e1=!1}function t6(t,e,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Wh=!1,Jg=null,ev=!1,t1=null,n6={onError:function(t){Wh=!0,Jg=t}};function r6(t,e,n,r,i,o,a,s,l){Wh=!1,Jg=null,t6.apply(n6,arguments)}function i6(t,e,n,r,i,o,a,s,l){if(r6.apply(this,arguments),Wh){if(Wh){var c=Jg;Wh=!1,Jg=null}else throw Error(we(198));ev||(ev=!0,t1=c)}}function Xl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gP(t){if(Xl(t)!==t)throw Error(we(188))}function o6(t){var e=t.alternate;if(!e){if(e=Xl(t),e===null)throw Error(we(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return gP(i),t;if(o===r)return gP(i),e;o=o.sibling}throw Error(we(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(we(189))}}if(n.alternate!==r)throw Error(we(190))}if(n.tag!==3)throw Error(we(188));return n.stateNode.current===n?t:e}function Hk(t){return t=o6(t),t!==null?Gk(t):null}function Gk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gk(t);if(e!==null)return e;t=t.sibling}return null}var Wk=di.unstable_scheduleCallback,vP=di.unstable_cancelCallback,a6=di.unstable_shouldYield,s6=di.unstable_requestPaint,wn=di.unstable_now,l6=di.unstable_getCurrentPriorityLevel,mE=di.unstable_ImmediatePriority,qk=di.unstable_UserBlockingPriority,tv=di.unstable_NormalPriority,c6=di.unstable_LowPriority,Xk=di.unstable_IdlePriority,Jy=null,bo=null;function u6(t){if(bo&&typeof bo.onCommitFiberRoot=="function")try{bo.onCommitFiberRoot(Jy,t,void 0,(t.current.flags&128)===128)}catch{}}var ro=Math.clz32?Math.clz32:d6,f6=Math.log,h6=Math.LN2;function d6(t){return t>>>=0,t===0?32:31-(f6(t)/h6|0)|0}var bm=64,wm=4194304;function Dh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nv(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=Dh(s):(o&=a,o!==0&&(r=Dh(o)))}else a=n&~i,a!==0?r=Dh(a):o!==0&&(r=Dh(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ro(e),i=1<<n,r|=t[n],e&=~i;return r}function p6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m6(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ro(o),s=1<<a,l=i[a];l===-1?(!(s&n)||s&r)&&(i[a]=p6(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}function n1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Kk(){var t=bm;return bm<<=1,!(bm&4194240)&&(bm=64),t}function $_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function kp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ro(e),t[e]=n}function g6(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ro(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function gE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ro(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Bt=0;function Yk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Qk,vE,Zk,Jk,e3,r1=!1,Sm=[],rs=null,is=null,os=null,bd=new Map,wd=new Map,qa=[],v6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yP(t,e){switch(t){case"focusin":case"focusout":rs=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":bd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wd.delete(e.pointerId)}}function fh(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Up(e),e!==null&&vE(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function y6(t,e,n,r,i){switch(e){case"focusin":return rs=fh(rs,t,e,n,r,i),!0;case"dragenter":return is=fh(is,t,e,n,r,i),!0;case"mouseover":return os=fh(os,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return bd.set(o,fh(bd.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,wd.set(o,fh(wd.get(o)||null,t,e,n,r,i)),!0}return!1}function t3(t){var e=fl(t.target);if(e!==null){var n=Xl(e);if(n!==null){if(e=n.tag,e===13){if(e=zk(n),e!==null){t.blockedOn=e,e3(t.priority,function(){Zk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Og(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=i1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Zb=r,n.target.dispatchEvent(r),Zb=null}else return e=Up(n),e!==null&&vE(e),t.blockedOn=n,!1;e.shift()}return!0}function _P(t,e,n){Og(t)&&n.delete(e)}function _6(){r1=!1,rs!==null&&Og(rs)&&(rs=null),is!==null&&Og(is)&&(is=null),os!==null&&Og(os)&&(os=null),bd.forEach(_P),wd.forEach(_P)}function hh(t,e){t.blockedOn===e&&(t.blockedOn=null,r1||(r1=!0,di.unstable_scheduleCallback(di.unstable_NormalPriority,_6)))}function Sd(t){function e(i){return hh(i,t)}if(0<Sm.length){hh(Sm[0],t);for(var n=1;n<Sm.length;n++){var r=Sm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(rs!==null&&hh(rs,t),is!==null&&hh(is,t),os!==null&&hh(os,t),bd.forEach(e),wd.forEach(e),n=0;n<qa.length;n++)r=qa[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qa.length&&(n=qa[0],n.blockedOn===null);)t3(n),n.blockedOn===null&&qa.shift()}var gu=Aa.ReactCurrentBatchConfig,rv=!0;function x6(t,e,n,r){var i=Bt,o=gu.transition;gu.transition=null;try{Bt=1,yE(t,e,n,r)}finally{Bt=i,gu.transition=o}}function b6(t,e,n,r){var i=Bt,o=gu.transition;gu.transition=null;try{Bt=4,yE(t,e,n,r)}finally{Bt=i,gu.transition=o}}function yE(t,e,n,r){if(rv){var i=i1(t,e,n,r);if(i===null)Z_(t,e,r,iv,n),yP(t,r);else if(y6(i,t,e,n,r))r.stopPropagation();else if(yP(t,r),e&4&&-1<v6.indexOf(t)){for(;i!==null;){var o=Up(i);if(o!==null&&Qk(o),o=i1(t,e,n,r),o===null&&Z_(t,e,r,iv,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Z_(t,e,r,null,n)}}var iv=null;function i1(t,e,n,r){if(iv=null,t=pE(r),t=fl(t),t!==null)if(e=Xl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return iv=t,null}function n3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(l6()){case mE:return 1;case qk:return 4;case tv:case c6:return 16;case Xk:return 536870912;default:return 16}default:return 16}}var Ya=null,_E=null,Ig=null;function r3(){if(Ig)return Ig;var t,e=_E,n=e.length,r,i="value"in Ya?Ya.value:Ya.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return Ig=i.slice(t,1<r?1-r:void 0)}function Ng(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Em(){return!0}function xP(){return!1}function gi(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Em:xP,this.isPropagationStopped=xP,this}return dn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Em)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Em)},persist:function(){},isPersistent:Em}),e}var Tf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xE=gi(Tf),jp=dn({},Tf,{view:0,detail:0}),w6=gi(jp),z_,H_,dh,e0=dn({},jp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bE,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==dh&&(dh&&t.type==="mousemove"?(z_=t.screenX-dh.screenX,H_=t.screenY-dh.screenY):H_=z_=0,dh=t),z_)},movementY:function(t){return"movementY"in t?t.movementY:H_}}),bP=gi(e0),S6=dn({},e0,{dataTransfer:0}),E6=gi(S6),T6=dn({},jp,{relatedTarget:0}),G_=gi(T6),A6=dn({},Tf,{animationName:0,elapsedTime:0,pseudoElement:0}),M6=gi(A6),P6=dn({},Tf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),C6=gi(P6),R6=dn({},Tf,{data:0}),wP=gi(R6),O6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=N6[t])?!!e[t]:!1}function bE(){return D6}var L6=dn({},jp,{key:function(t){if(t.key){var e=O6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ng(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?I6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bE,charCode:function(t){return t.type==="keypress"?Ng(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ng(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),k6=gi(L6),j6=dn({},e0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),SP=gi(j6),U6=dn({},jp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bE}),F6=gi(U6),V6=dn({},Tf,{propertyName:0,elapsedTime:0,pseudoElement:0}),B6=gi(V6),$6=dn({},e0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),z6=gi($6),H6=[9,13,27,32],wE=pa&&"CompositionEvent"in window,qh=null;pa&&"documentMode"in document&&(qh=document.documentMode);var G6=pa&&"TextEvent"in window&&!qh,i3=pa&&(!wE||qh&&8<qh&&11>=qh),EP=" ",TP=!1;function o3(t,e){switch(t){case"keyup":return H6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hc=!1;function W6(t,e){switch(t){case"compositionend":return a3(e);case"keypress":return e.which!==32?null:(TP=!0,EP);case"textInput":return t=e.data,t===EP&&TP?null:t;default:return null}}function q6(t,e){if(Hc)return t==="compositionend"||!wE&&o3(t,e)?(t=r3(),Ig=_E=Ya=null,Hc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return i3&&e.locale!=="ko"?null:e.data;default:return null}}var X6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function AP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!X6[t.type]:e==="textarea"}function s3(t,e,n,r){Uk(r),e=ov(e,"onChange"),0<e.length&&(n=new xE("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xh=null,Ed=null;function K6(t){y3(t,0)}function t0(t){var e=qc(t);if(Ok(e))return t}function Y6(t,e){if(t==="change")return e}var l3=!1;if(pa){var W_;if(pa){var q_="oninput"in document;if(!q_){var MP=document.createElement("div");MP.setAttribute("oninput","return;"),q_=typeof MP.oninput=="function"}W_=q_}else W_=!1;l3=W_&&(!document.documentMode||9<document.documentMode)}function PP(){Xh&&(Xh.detachEvent("onpropertychange",c3),Ed=Xh=null)}function c3(t){if(t.propertyName==="value"&&t0(Ed)){var e=[];s3(e,Ed,t,pE(t)),$k(K6,e)}}function Q6(t,e,n){t==="focusin"?(PP(),Xh=e,Ed=n,Xh.attachEvent("onpropertychange",c3)):t==="focusout"&&PP()}function Z6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return t0(Ed)}function J6(t,e){if(t==="click")return t0(e)}function eH(t,e){if(t==="input"||t==="change")return t0(e)}function tH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var so=typeof Object.is=="function"?Object.is:tH;function Td(t,e){if(so(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Vb.call(e,i)||!so(t[i],e[i]))return!1}return!0}function CP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function RP(t,e){var n=CP(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=CP(n)}}function u3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?u3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function f3(){for(var t=window,e=Zg();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zg(t.document)}return e}function SE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nH(t){var e=f3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&u3(n.ownerDocument.documentElement,n)){if(r!==null&&SE(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=RP(n,o);var a=RP(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rH=pa&&"documentMode"in document&&11>=document.documentMode,Gc=null,o1=null,Kh=null,a1=!1;function OP(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;a1||Gc==null||Gc!==Zg(r)||(r=Gc,"selectionStart"in r&&SE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Kh&&Td(Kh,r)||(Kh=r,r=ov(o1,"onSelect"),0<r.length&&(e=new xE("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Gc)))}function Tm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wc={animationend:Tm("Animation","AnimationEnd"),animationiteration:Tm("Animation","AnimationIteration"),animationstart:Tm("Animation","AnimationStart"),transitionend:Tm("Transition","TransitionEnd")},X_={},h3={};pa&&(h3=document.createElement("div").style,"AnimationEvent"in window||(delete Wc.animationend.animation,delete Wc.animationiteration.animation,delete Wc.animationstart.animation),"TransitionEvent"in window||delete Wc.transitionend.transition);function n0(t){if(X_[t])return X_[t];if(!Wc[t])return t;var e=Wc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in h3)return X_[t]=e[n];return t}var d3=n0("animationend"),p3=n0("animationiteration"),m3=n0("animationstart"),g3=n0("transitionend"),v3=new Map,IP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(t,e){v3.set(t,e),ql(e,[t])}for(var K_=0;K_<IP.length;K_++){var Y_=IP[K_],iH=Y_.toLowerCase(),oH=Y_[0].toUpperCase()+Y_.slice(1);Os(iH,"on"+oH)}Os(d3,"onAnimationEnd");Os(p3,"onAnimationIteration");Os(m3,"onAnimationStart");Os("dblclick","onDoubleClick");Os("focusin","onFocus");Os("focusout","onBlur");Os(g3,"onTransitionEnd");Mu("onMouseEnter",["mouseout","mouseover"]);Mu("onMouseLeave",["mouseout","mouseover"]);Mu("onPointerEnter",["pointerout","pointerover"]);Mu("onPointerLeave",["pointerout","pointerover"]);ql("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ql("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ql("onBeforeInput",["compositionend","keypress","textInput","paste"]);ql("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ql("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ql("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lh));function NP(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,i6(r,e,void 0,t),t.currentTarget=null}function y3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;NP(i,s,c),o=l}else for(a=0;a<r.length;a++){if(s=r[a],l=s.instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;NP(i,s,c),o=l}}}if(ev)throw t=t1,ev=!1,t1=null,t}function en(t,e){var n=e[f1];n===void 0&&(n=e[f1]=new Set);var r=t+"__bubble";n.has(r)||(_3(e,t,2,!1),n.add(r))}function Q_(t,e,n){var r=0;e&&(r|=4),_3(n,t,r,e)}var Am="_reactListening"+Math.random().toString(36).slice(2);function Ad(t){if(!t[Am]){t[Am]=!0,Ak.forEach(function(n){n!=="selectionchange"&&(aH.has(n)||Q_(n,!1,t),Q_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Am]||(e[Am]=!0,Q_("selectionchange",!1,e))}}function _3(t,e,n,r){switch(n3(e)){case 1:var i=x6;break;case 4:i=b6;break;default:i=yE}n=i.bind(null,e,n,t),i=void 0,!e1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Z_(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=fl(s),a===null)return;if(l=a.tag,l===5||l===6){r=o=a;continue e}s=s.parentNode}}r=r.return}$k(function(){var c=o,u=pE(n),f=[];e:{var h=v3.get(t);if(h!==void 0){var d=xE,v=t;switch(t){case"keypress":if(Ng(n)===0)break e;case"keydown":case"keyup":d=k6;break;case"focusin":v="focus",d=G_;break;case"focusout":v="blur",d=G_;break;case"beforeblur":case"afterblur":d=G_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=bP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=E6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=F6;break;case d3:case p3:case m3:d=M6;break;case g3:d=B6;break;case"scroll":d=w6;break;case"wheel":d=z6;break;case"copy":case"cut":case"paste":d=C6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=SP}var y=(e&4)!==0,g=!y&&t==="scroll",p=y?h!==null?h+"Capture":null:h;y=[];for(var x=c,_;x!==null;){_=x;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,p!==null&&(E=xd(x,p),E!=null&&y.push(Md(x,E,_)))),g)break;x=x.return}0<y.length&&(h=new d(h,v,null,n,u),f.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==Zb&&(v=n.relatedTarget||n.fromElement)&&(fl(v)||v[ma]))break e;if((d||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,d?(v=n.relatedTarget||n.toElement,d=c,v=v?fl(v):null,v!==null&&(g=Xl(v),v!==g||v.tag!==5&&v.tag!==6)&&(v=null)):(d=null,v=c),d!==v)){if(y=bP,E="onMouseLeave",p="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=SP,E="onPointerLeave",p="onPointerEnter",x="pointer"),g=d==null?h:qc(d),_=v==null?h:qc(v),h=new y(E,x+"leave",d,n,u),h.target=g,h.relatedTarget=_,E=null,fl(u)===c&&(y=new y(p,x+"enter",v,n,u),y.target=_,y.relatedTarget=g,E=y),g=E,d&&v)t:{for(y=d,p=v,x=0,_=y;_;_=dc(_))x++;for(_=0,E=p;E;E=dc(E))_++;for(;0<x-_;)y=dc(y),x--;for(;0<_-x;)p=dc(p),_--;for(;x--;){if(y===p||p!==null&&y===p.alternate)break t;y=dc(y),p=dc(p)}y=null}else y=null;d!==null&&DP(f,h,d,y,!1),v!==null&&g!==null&&DP(f,g,v,y,!0)}}e:{if(h=c?qc(c):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var b=Y6;else if(AP(h))if(l3)b=eH;else{b=Z6;var M=Q6}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=J6);if(b&&(b=b(t,c))){s3(f,b,n,u);break e}M&&M(t,h,c),t==="focusout"&&(M=h._wrapperState)&&M.controlled&&h.type==="number"&&qb(h,"number",h.value)}switch(M=c?qc(c):window,t){case"focusin":(AP(M)||M.contentEditable==="true")&&(Gc=M,o1=c,Kh=null);break;case"focusout":Kh=o1=Gc=null;break;case"mousedown":a1=!0;break;case"contextmenu":case"mouseup":case"dragend":a1=!1,OP(f,n,u);break;case"selectionchange":if(rH)break;case"keydown":case"keyup":OP(f,n,u)}var S;if(wE)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Hc?o3(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(i3&&n.locale!=="ko"&&(Hc||A!=="onCompositionStart"?A==="onCompositionEnd"&&Hc&&(S=r3()):(Ya=u,_E="value"in Ya?Ya.value:Ya.textContent,Hc=!0)),M=ov(c,A),0<M.length&&(A=new wP(A,t,null,n,u),f.push({event:A,listeners:M}),S?A.data=S:(S=a3(n),S!==null&&(A.data=S)))),(S=G6?W6(t,n):q6(t,n))&&(c=ov(c,"onBeforeInput"),0<c.length&&(u=new wP("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=S))}y3(f,e)})}function Md(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ov(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=xd(t,n),o!=null&&r.unshift(Md(t,o,i)),o=xd(t,e),o!=null&&r.push(Md(t,o,i))),t=t.return}return r}function dc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function DP(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&c!==null&&(s=c,i?(l=xd(n,o),l!=null&&a.unshift(Md(n,l,s))):i||(l=xd(n,o),l!=null&&a.push(Md(n,l,s)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var sH=/\r\n?/g,lH=/\u0000|\uFFFD/g;function LP(t){return(typeof t=="string"?t:""+t).replace(sH,`
`).replace(lH,"")}function Mm(t,e,n){if(e=LP(e),LP(t)!==e&&n)throw Error(we(425))}function av(){}var s1=null,l1=null;function c1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var u1=typeof setTimeout=="function"?setTimeout:void 0,cH=typeof clearTimeout=="function"?clearTimeout:void 0,kP=typeof Promise=="function"?Promise:void 0,uH=typeof queueMicrotask=="function"?queueMicrotask:typeof kP<"u"?function(t){return kP.resolve(null).then(t).catch(fH)}:u1;function fH(t){setTimeout(function(){throw t})}function J_(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Sd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Sd(e)}function as(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Af=Math.random().toString(36).slice(2),yo="__reactFiber$"+Af,Pd="__reactProps$"+Af,ma="__reactContainer$"+Af,f1="__reactEvents$"+Af,hH="__reactListeners$"+Af,dH="__reactHandles$"+Af;function fl(t){var e=t[yo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ma]||n[yo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jP(t);t!==null;){if(n=t[yo])return n;t=jP(t)}return e}t=n,n=t.parentNode}return null}function Up(t){return t=t[yo]||t[ma],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(we(33))}function r0(t){return t[Pd]||null}var h1=[],Xc=-1;function Is(t){return{current:t}}function an(t){0>Xc||(t.current=h1[Xc],h1[Xc]=null,Xc--)}function Yt(t,e){Xc++,h1[Xc]=t.current,t.current=e}var xs={},Pr=Is(xs),Xr=Is(!1),Nl=xs;function Pu(t,e){var n=t.type.contextTypes;if(!n)return xs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Kr(t){return t=t.childContextTypes,t!=null}function sv(){an(Xr),an(Pr)}function UP(t,e,n){if(Pr.current!==xs)throw Error(we(168));Yt(Pr,e),Yt(Xr,n)}function x3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(we(108,Qz(t)||"Unknown",i));return dn({},n,r)}function lv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xs,Nl=Pr.current,Yt(Pr,t),Yt(Xr,Xr.current),!0}function FP(t,e,n){var r=t.stateNode;if(!r)throw Error(we(169));n?(t=x3(t,e,Nl),r.__reactInternalMemoizedMergedChildContext=t,an(Xr),an(Pr),Yt(Pr,t)):an(Xr),Yt(Xr,n)}var Yo=null,i0=!1,ex=!1;function b3(t){Yo===null?Yo=[t]:Yo.push(t)}function pH(t){i0=!0,b3(t)}function Ns(){if(!ex&&Yo!==null){ex=!0;var t=0,e=Bt;try{var n=Yo;for(Bt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Yo=null,i0=!1}catch(i){throw Yo!==null&&(Yo=Yo.slice(t+1)),Wk(mE,Ns),i}finally{Bt=e,ex=!1}}return null}var Kc=[],Yc=0,cv=null,uv=0,Ti=[],Ai=0,Dl=null,Zo=1,Jo="";function Js(t,e){Kc[Yc++]=uv,Kc[Yc++]=cv,cv=t,uv=e}function w3(t,e,n){Ti[Ai++]=Zo,Ti[Ai++]=Jo,Ti[Ai++]=Dl,Dl=t;var r=Zo;t=Jo;var i=32-ro(r)-1;r&=~(1<<i),n+=1;var o=32-ro(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Zo=1<<32-ro(e)+i|n<<i|r,Jo=o+t}else Zo=1<<o|n<<i|r,Jo=t}function EE(t){t.return!==null&&(Js(t,1),w3(t,1,0))}function TE(t){for(;t===cv;)cv=Kc[--Yc],Kc[Yc]=null,uv=Kc[--Yc],Kc[Yc]=null;for(;t===Dl;)Dl=Ti[--Ai],Ti[Ai]=null,Jo=Ti[--Ai],Ti[Ai]=null,Zo=Ti[--Ai],Ti[Ai]=null}var ui=null,ci=null,ln=!1,Qi=null;function S3(t,e){var n=Oi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function VP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ui=t,ci=as(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ui=t,ci=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Dl!==null?{id:Zo,overflow:Jo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Oi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ui=t,ci=null,!0):!1;default:return!1}}function d1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function p1(t){if(ln){var e=ci;if(e){var n=e;if(!VP(t,e)){if(d1(t))throw Error(we(418));e=as(n.nextSibling);var r=ui;e&&VP(t,e)?S3(r,n):(t.flags=t.flags&-4097|2,ln=!1,ui=t)}}else{if(d1(t))throw Error(we(418));t.flags=t.flags&-4097|2,ln=!1,ui=t}}}function BP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ui=t}function Pm(t){if(t!==ui)return!1;if(!ln)return BP(t),ln=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!c1(t.type,t.memoizedProps)),e&&(e=ci)){if(d1(t))throw E3(),Error(we(418));for(;e;)S3(t,e),e=as(e.nextSibling)}if(BP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(we(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ci=as(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ci=null}}else ci=ui?as(t.stateNode.nextSibling):null;return!0}function E3(){for(var t=ci;t;)t=as(t.nextSibling)}function Cu(){ci=ui=null,ln=!1}function AE(t){Qi===null?Qi=[t]:Qi.push(t)}var mH=Aa.ReactCurrentBatchConfig;function ph(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(we(309));var r=n.stateNode}if(!r)throw Error(we(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(we(284));if(!n._owner)throw Error(we(290,t))}return t}function Cm(t,e){throw t=Object.prototype.toString.call(e),Error(we(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $P(t){var e=t._init;return e(t._payload)}function T3(t){function e(p,x){if(t){var _=p.deletions;_===null?(p.deletions=[x],p.flags|=16):_.push(x)}}function n(p,x){if(!t)return null;for(;x!==null;)e(p,x),x=x.sibling;return null}function r(p,x){for(p=new Map;x!==null;)x.key!==null?p.set(x.key,x):p.set(x.index,x),x=x.sibling;return p}function i(p,x){return p=us(p,x),p.index=0,p.sibling=null,p}function o(p,x,_){return p.index=_,t?(_=p.alternate,_!==null?(_=_.index,_<x?(p.flags|=2,x):_):(p.flags|=2,x)):(p.flags|=1048576,x)}function a(p){return t&&p.alternate===null&&(p.flags|=2),p}function s(p,x,_,E){return x===null||x.tag!==6?(x=sx(_,p.mode,E),x.return=p,x):(x=i(x,_),x.return=p,x)}function l(p,x,_,E){var b=_.type;return b===zc?u(p,x,_.props.children,E,_.key):x!==null&&(x.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===$a&&$P(b)===x.type)?(E=i(x,_.props),E.ref=ph(p,x,_),E.return=p,E):(E=Vg(_.type,_.key,_.props,null,p.mode,E),E.ref=ph(p,x,_),E.return=p,E)}function c(p,x,_,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=lx(_,p.mode,E),x.return=p,x):(x=i(x,_.children||[]),x.return=p,x)}function u(p,x,_,E,b){return x===null||x.tag!==7?(x=El(_,p.mode,E,b),x.return=p,x):(x=i(x,_),x.return=p,x)}function f(p,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=sx(""+x,p.mode,_),x.return=p,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ym:return _=Vg(x.type,x.key,x.props,null,p.mode,_),_.ref=ph(p,null,x),_.return=p,_;case $c:return x=lx(x,p.mode,_),x.return=p,x;case $a:var E=x._init;return f(p,E(x._payload),_)}if(Nh(x)||ch(x))return x=El(x,p.mode,_,null),x.return=p,x;Cm(p,x)}return null}function h(p,x,_,E){var b=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return b!==null?null:s(p,x,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ym:return _.key===b?l(p,x,_,E):null;case $c:return _.key===b?c(p,x,_,E):null;case $a:return b=_._init,h(p,x,b(_._payload),E)}if(Nh(_)||ch(_))return b!==null?null:u(p,x,_,E,null);Cm(p,_)}return null}function d(p,x,_,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return p=p.get(_)||null,s(x,p,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ym:return p=p.get(E.key===null?_:E.key)||null,l(x,p,E,b);case $c:return p=p.get(E.key===null?_:E.key)||null,c(x,p,E,b);case $a:var M=E._init;return d(p,x,_,M(E._payload),b)}if(Nh(E)||ch(E))return p=p.get(_)||null,u(x,p,E,b,null);Cm(x,E)}return null}function v(p,x,_,E){for(var b=null,M=null,S=x,A=x=0,T=null;S!==null&&A<_.length;A++){S.index>A?(T=S,S=null):T=S.sibling;var P=h(p,S,_[A],E);if(P===null){S===null&&(S=T);break}t&&S&&P.alternate===null&&e(p,S),x=o(P,x,A),M===null?b=P:M.sibling=P,M=P,S=T}if(A===_.length)return n(p,S),ln&&Js(p,A),b;if(S===null){for(;A<_.length;A++)S=f(p,_[A],E),S!==null&&(x=o(S,x,A),M===null?b=S:M.sibling=S,M=S);return ln&&Js(p,A),b}for(S=r(p,S);A<_.length;A++)T=d(S,p,A,_[A],E),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?A:T.key),x=o(T,x,A),M===null?b=T:M.sibling=T,M=T);return t&&S.forEach(function(R){return e(p,R)}),ln&&Js(p,A),b}function y(p,x,_,E){var b=ch(_);if(typeof b!="function")throw Error(we(150));if(_=b.call(_),_==null)throw Error(we(151));for(var M=b=null,S=x,A=x=0,T=null,P=_.next();S!==null&&!P.done;A++,P=_.next()){S.index>A?(T=S,S=null):T=S.sibling;var R=h(p,S,P.value,E);if(R===null){S===null&&(S=T);break}t&&S&&R.alternate===null&&e(p,S),x=o(R,x,A),M===null?b=R:M.sibling=R,M=R,S=T}if(P.done)return n(p,S),ln&&Js(p,A),b;if(S===null){for(;!P.done;A++,P=_.next())P=f(p,P.value,E),P!==null&&(x=o(P,x,A),M===null?b=P:M.sibling=P,M=P);return ln&&Js(p,A),b}for(S=r(p,S);!P.done;A++,P=_.next())P=d(S,p,A,P.value,E),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?A:P.key),x=o(P,x,A),M===null?b=P:M.sibling=P,M=P);return t&&S.forEach(function(N){return e(p,N)}),ln&&Js(p,A),b}function g(p,x,_,E){if(typeof _=="object"&&_!==null&&_.type===zc&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ym:e:{for(var b=_.key,M=x;M!==null;){if(M.key===b){if(b=_.type,b===zc){if(M.tag===7){n(p,M.sibling),x=i(M,_.props.children),x.return=p,p=x;break e}}else if(M.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===$a&&$P(b)===M.type){n(p,M.sibling),x=i(M,_.props),x.ref=ph(p,M,_),x.return=p,p=x;break e}n(p,M);break}else e(p,M);M=M.sibling}_.type===zc?(x=El(_.props.children,p.mode,E,_.key),x.return=p,p=x):(E=Vg(_.type,_.key,_.props,null,p.mode,E),E.ref=ph(p,x,_),E.return=p,p=E)}return a(p);case $c:e:{for(M=_.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){n(p,x.sibling),x=i(x,_.children||[]),x.return=p,p=x;break e}else{n(p,x);break}else e(p,x);x=x.sibling}x=lx(_,p.mode,E),x.return=p,p=x}return a(p);case $a:return M=_._init,g(p,x,M(_._payload),E)}if(Nh(_))return v(p,x,_,E);if(ch(_))return y(p,x,_,E);Cm(p,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(n(p,x.sibling),x=i(x,_),x.return=p,p=x):(n(p,x),x=sx(_,p.mode,E),x.return=p,p=x),a(p)):n(p,x)}return g}var Ru=T3(!0),A3=T3(!1),fv=Is(null),hv=null,Qc=null,ME=null;function PE(){ME=Qc=hv=null}function CE(t){var e=fv.current;an(fv),t._currentValue=e}function m1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vu(t,e){hv=t,ME=Qc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wr=!0),t.firstContext=null)}function ki(t){var e=t._currentValue;if(ME!==t)if(t={context:t,memoizedValue:e,next:null},Qc===null){if(hv===null)throw Error(we(308));Qc=t,hv.dependencies={lanes:0,firstContext:t}}else Qc=Qc.next=t;return e}var hl=null;function RE(t){hl===null?hl=[t]:hl.push(t)}function M3(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,RE(e)):(n.next=i.next,i.next=n),e.interleaved=n,ga(t,r)}function ga(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var za=!1;function OE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function oa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ss(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Nt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ga(t,n)}return i=r.interleaved,i===null?(e.next=e,RE(r)):(e.next=i.next,i.next=e),r.interleaved=e,ga(t,n)}function Dg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gE(t,n)}}function zP(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function dv(t,e,n,r){var i=t.updateQueue;za=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,a===null?o=c:a.next=c,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==a&&(s===null?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;a=0,u=c=l=null,s=o;do{var h=s.lane,d=s.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=t,y=s;switch(h=e,d=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){f=v.call(d,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,h=typeof v=="function"?v.call(d,f,h):v,h==null)break e;f=dn({},f,h);break e;case 2:za=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=d,l=f):u=u.next=d,a|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);kl|=a,t.lanes=a,t.memoizedState=f}}function HP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(we(191,i));i.call(r)}}}var Fp={},wo=Is(Fp),Cd=Is(Fp),Rd=Is(Fp);function dl(t){if(t===Fp)throw Error(we(174));return t}function IE(t,e){switch(Yt(Rd,e),Yt(Cd,t),Yt(wo,Fp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Kb(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Kb(e,t)}an(wo),Yt(wo,e)}function Ou(){an(wo),an(Cd),an(Rd)}function C3(t){dl(Rd.current);var e=dl(wo.current),n=Kb(e,t.type);e!==n&&(Yt(Cd,t),Yt(wo,n))}function NE(t){Cd.current===t&&(an(wo),an(Cd))}var un=Is(0);function pv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tx=[];function DE(){for(var t=0;t<tx.length;t++)tx[t]._workInProgressVersionPrimary=null;tx.length=0}var Lg=Aa.ReactCurrentDispatcher,nx=Aa.ReactCurrentBatchConfig,Ll=0,hn=null,kn=null,Yn=null,mv=!1,Yh=!1,Od=0,gH=0;function pr(){throw Error(we(321))}function LE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!so(t[n],e[n]))return!1;return!0}function kE(t,e,n,r,i,o){if(Ll=o,hn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Lg.current=t===null||t.memoizedState===null?xH:bH,t=n(r,i),Yh){o=0;do{if(Yh=!1,Od=0,25<=o)throw Error(we(301));o+=1,Yn=kn=null,e.updateQueue=null,Lg.current=wH,t=n(r,i)}while(Yh)}if(Lg.current=gv,e=kn!==null&&kn.next!==null,Ll=0,Yn=kn=hn=null,mv=!1,e)throw Error(we(300));return t}function jE(){var t=Od!==0;return Od=0,t}function go(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yn===null?hn.memoizedState=Yn=t:Yn=Yn.next=t,Yn}function ji(){if(kn===null){var t=hn.alternate;t=t!==null?t.memoizedState:null}else t=kn.next;var e=Yn===null?hn.memoizedState:Yn.next;if(e!==null)Yn=e,kn=t;else{if(t===null)throw Error(we(310));kn=t,t={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},Yn===null?hn.memoizedState=Yn=t:Yn=Yn.next=t}return Yn}function Id(t,e){return typeof e=="function"?e(t):e}function rx(t){var e=ji(),n=e.queue;if(n===null)throw Error(we(311));n.lastRenderedReducer=t;var r=kn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,l=null,c=o;do{var u=c.lane;if((Ll&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=f,a=r):l=l.next=f,hn.lanes|=u,kl|=u}c=c.next}while(c!==null&&c!==o);l===null?a=r:l.next=s,so(r,e.memoizedState)||(Wr=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,hn.lanes|=o,kl|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ix(t){var e=ji(),n=e.queue;if(n===null)throw Error(we(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);so(o,e.memoizedState)||(Wr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function R3(){}function O3(t,e){var n=hn,r=ji(),i=e(),o=!so(r.memoizedState,i);if(o&&(r.memoizedState=i,Wr=!0),r=r.queue,UE(D3.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Yn!==null&&Yn.memoizedState.tag&1){if(n.flags|=2048,Nd(9,N3.bind(null,n,r,i,e),void 0,null),Jn===null)throw Error(we(349));Ll&30||I3(n,e,i)}return i}function I3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=hn.updateQueue,e===null?(e={lastEffect:null,stores:null},hn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function N3(t,e,n,r){e.value=n,e.getSnapshot=r,L3(e)&&k3(t)}function D3(t,e,n){return n(function(){L3(e)&&k3(t)})}function L3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!so(t,n)}catch{return!0}}function k3(t){var e=ga(t,1);e!==null&&io(e,t,1,-1)}function GP(t){var e=go();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Id,lastRenderedState:t},e.queue=t,t=t.dispatch=_H.bind(null,hn,t),[e.memoizedState,t]}function Nd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=hn.updateQueue,e===null?(e={lastEffect:null,stores:null},hn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function j3(){return ji().memoizedState}function kg(t,e,n,r){var i=go();hn.flags|=t,i.memoizedState=Nd(1|e,n,void 0,r===void 0?null:r)}function o0(t,e,n,r){var i=ji();r=r===void 0?null:r;var o=void 0;if(kn!==null){var a=kn.memoizedState;if(o=a.destroy,r!==null&&LE(r,a.deps)){i.memoizedState=Nd(e,n,o,r);return}}hn.flags|=t,i.memoizedState=Nd(1|e,n,o,r)}function WP(t,e){return kg(8390656,8,t,e)}function UE(t,e){return o0(2048,8,t,e)}function U3(t,e){return o0(4,2,t,e)}function F3(t,e){return o0(4,4,t,e)}function V3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function B3(t,e,n){return n=n!=null?n.concat([t]):null,o0(4,4,V3.bind(null,e,t),n)}function FE(){}function $3(t,e){var n=ji();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&LE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function z3(t,e){var n=ji();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&LE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function H3(t,e,n){return Ll&21?(so(n,e)||(n=Kk(),hn.lanes|=n,kl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wr=!0),t.memoizedState=n)}function vH(t,e){var n=Bt;Bt=n!==0&&4>n?n:4,t(!0);var r=nx.transition;nx.transition={};try{t(!1),e()}finally{Bt=n,nx.transition=r}}function G3(){return ji().memoizedState}function yH(t,e,n){var r=cs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},W3(t))q3(e,n);else if(n=M3(t,e,n,r),n!==null){var i=Fr();io(n,t,r,i),X3(n,e,r)}}function _H(t,e,n){var r=cs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(W3(t))q3(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,so(s,a)){var l=e.interleaved;l===null?(i.next=i,RE(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=M3(t,e,i,r),n!==null&&(i=Fr(),io(n,t,r,i),X3(n,e,r))}}function W3(t){var e=t.alternate;return t===hn||e!==null&&e===hn}function q3(t,e){Yh=mv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function X3(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gE(t,n)}}var gv={readContext:ki,useCallback:pr,useContext:pr,useEffect:pr,useImperativeHandle:pr,useInsertionEffect:pr,useLayoutEffect:pr,useMemo:pr,useReducer:pr,useRef:pr,useState:pr,useDebugValue:pr,useDeferredValue:pr,useTransition:pr,useMutableSource:pr,useSyncExternalStore:pr,useId:pr,unstable_isNewReconciler:!1},xH={readContext:ki,useCallback:function(t,e){return go().memoizedState=[t,e===void 0?null:e],t},useContext:ki,useEffect:WP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,kg(4194308,4,V3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return kg(4194308,4,t,e)},useInsertionEffect:function(t,e){return kg(4,2,t,e)},useMemo:function(t,e){var n=go();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=go();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=yH.bind(null,hn,t),[r.memoizedState,t]},useRef:function(t){var e=go();return t={current:t},e.memoizedState=t},useState:GP,useDebugValue:FE,useDeferredValue:function(t){return go().memoizedState=t},useTransition:function(){var t=GP(!1),e=t[0];return t=vH.bind(null,t[1]),go().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=hn,i=go();if(ln){if(n===void 0)throw Error(we(407));n=n()}else{if(n=e(),Jn===null)throw Error(we(349));Ll&30||I3(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,WP(D3.bind(null,r,o,t),[t]),r.flags|=2048,Nd(9,N3.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=go(),e=Jn.identifierPrefix;if(ln){var n=Jo,r=Zo;n=(r&~(1<<32-ro(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Od++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gH++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bH={readContext:ki,useCallback:$3,useContext:ki,useEffect:UE,useImperativeHandle:B3,useInsertionEffect:U3,useLayoutEffect:F3,useMemo:z3,useReducer:rx,useRef:j3,useState:function(){return rx(Id)},useDebugValue:FE,useDeferredValue:function(t){var e=ji();return H3(e,kn.memoizedState,t)},useTransition:function(){var t=rx(Id)[0],e=ji().memoizedState;return[t,e]},useMutableSource:R3,useSyncExternalStore:O3,useId:G3,unstable_isNewReconciler:!1},wH={readContext:ki,useCallback:$3,useContext:ki,useEffect:UE,useImperativeHandle:B3,useInsertionEffect:U3,useLayoutEffect:F3,useMemo:z3,useReducer:ix,useRef:j3,useState:function(){return ix(Id)},useDebugValue:FE,useDeferredValue:function(t){var e=ji();return kn===null?e.memoizedState=t:H3(e,kn.memoizedState,t)},useTransition:function(){var t=ix(Id)[0],e=ji().memoizedState;return[t,e]},useMutableSource:R3,useSyncExternalStore:O3,useId:G3,unstable_isNewReconciler:!1};function qi(t,e){if(t&&t.defaultProps){e=dn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function g1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:dn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var a0={isMounted:function(t){return(t=t._reactInternals)?Xl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Fr(),i=cs(t),o=oa(r,i);o.payload=e,n!=null&&(o.callback=n),e=ss(t,o,i),e!==null&&(io(e,t,i,r),Dg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Fr(),i=cs(t),o=oa(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ss(t,o,i),e!==null&&(io(e,t,i,r),Dg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Fr(),r=cs(t),i=oa(n,r);i.tag=2,e!=null&&(i.callback=e),e=ss(t,i,r),e!==null&&(io(e,t,r,n),Dg(e,t,r))}};function qP(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!Td(n,r)||!Td(i,o):!0}function K3(t,e,n){var r=!1,i=xs,o=e.contextType;return typeof o=="object"&&o!==null?o=ki(o):(i=Kr(e)?Nl:Pr.current,r=e.contextTypes,o=(r=r!=null)?Pu(t,i):xs),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=a0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function XP(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&a0.enqueueReplaceState(e,e.state,null)}function v1(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},OE(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ki(o):(o=Kr(e)?Nl:Pr.current,i.context=Pu(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(g1(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&a0.enqueueReplaceState(i,i.state,null),dv(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Iu(t,e){try{var n="",r=e;do n+=Yz(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function ox(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function y1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var SH=typeof WeakMap=="function"?WeakMap:Map;function Y3(t,e,n){n=oa(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){yv||(yv=!0,P1=r),y1(t,e)},n}function Q3(t,e,n){n=oa(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){y1(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){y1(t,e),typeof r!="function"&&(ls===null?ls=new Set([this]):ls.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function KP(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new SH;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=jH.bind(null,t,e,n),e.then(t,t))}function YP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function QP(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=oa(-1,1),e.tag=2,ss(n,e,1))),n.lanes|=1),t)}var EH=Aa.ReactCurrentOwner,Wr=!1;function Nr(t,e,n,r){e.child=t===null?A3(e,null,n,r):Ru(e,t.child,n,r)}function ZP(t,e,n,r,i){n=n.render;var o=e.ref;return vu(e,i),r=kE(t,e,n,r,o,i),n=jE(),t!==null&&!Wr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,va(t,e,i)):(ln&&n&&EE(e),e.flags|=1,Nr(t,e,r,i),e.child)}function JP(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!qE(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Z3(t,e,o,r,i)):(t=Vg(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Td,n(a,r)&&t.ref===e.ref)return va(t,e,i)}return e.flags|=1,t=us(o,r),t.ref=e.ref,t.return=e,e.child=t}function Z3(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Td(o,r)&&t.ref===e.ref)if(Wr=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Wr=!0);else return e.lanes=t.lanes,va(t,e,i)}return _1(t,e,n,r,i)}function J3(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yt(Jc,oi),oi|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Yt(Jc,oi),oi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Yt(Jc,oi),oi|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Yt(Jc,oi),oi|=r;return Nr(t,e,i,n),e.child}function ej(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _1(t,e,n,r,i){var o=Kr(n)?Nl:Pr.current;return o=Pu(e,o),vu(e,i),n=kE(t,e,n,r,o,i),r=jE(),t!==null&&!Wr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,va(t,e,i)):(ln&&r&&EE(e),e.flags|=1,Nr(t,e,n,i),e.child)}function eC(t,e,n,r,i){if(Kr(n)){var o=!0;lv(e)}else o=!1;if(vu(e,i),e.stateNode===null)jg(t,e),K3(e,n,r),v1(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=ki(c):(c=Kr(n)?Nl:Pr.current,c=Pu(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||l!==c)&&XP(e,a,r,c),za=!1;var h=e.memoizedState;a.state=h,dv(e,r,a,i),l=e.memoizedState,s!==r||h!==l||Xr.current||za?(typeof u=="function"&&(g1(e,n,u,r),l=e.memoizedState),(s=za||qP(e,n,s,r,h,l,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,P3(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:qi(e.type,s),a.props=c,f=e.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=ki(l):(l=Kr(n)?Nl:Pr.current,l=Pu(e,l));var d=n.getDerivedStateFromProps;(u=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==f||h!==l)&&XP(e,a,r,l),za=!1,h=e.memoizedState,a.state=h,dv(e,r,a,i);var v=e.memoizedState;s!==f||h!==v||Xr.current||za?(typeof d=="function"&&(g1(e,n,d,r),v=e.memoizedState),(c=za||qP(e,n,c,r,h,v,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),a.props=r,a.state=v,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return x1(t,e,n,r,o,i)}function x1(t,e,n,r,i,o){ej(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&FP(e,n,!1),va(t,e,o);r=e.stateNode,EH.current=e;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ru(e,t.child,null,o),e.child=Ru(e,null,s,o)):Nr(t,e,s,o),e.memoizedState=r.state,i&&FP(e,n,!0),e.child}function tj(t){var e=t.stateNode;e.pendingContext?UP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&UP(t,e.context,!1),IE(t,e.containerInfo)}function tC(t,e,n,r,i){return Cu(),AE(i),e.flags|=256,Nr(t,e,n,r),e.child}var b1={dehydrated:null,treeContext:null,retryLane:0};function w1(t){return{baseLanes:t,cachePool:null,transitions:null}}function nj(t,e,n){var r=e.pendingProps,i=un.current,o=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Yt(un,i&1),t===null)return p1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=c0(a,r,0,null),t=El(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=w1(n),e.memoizedState=b1,t):VE(e,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return TH(t,e,a,r,s,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=us(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=us(s,o):(o=El(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?w1(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=b1,r}return o=t.child,t=o.sibling,r=us(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function VE(t,e){return e=c0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Rm(t,e,n,r){return r!==null&&AE(r),Ru(e,t.child,null,n),t=VE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function TH(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=ox(Error(we(422))),Rm(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=c0({mode:"visible",children:r.children},i,0,null),o=El(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ru(e,t.child,null,a),e.child.memoizedState=w1(a),e.memoizedState=b1,o);if(!(e.mode&1))return Rm(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(we(419)),r=ox(o,r,void 0),Rm(t,e,a,r)}if(s=(a&t.childLanes)!==0,Wr||s){if(r=Jn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ga(t,i),io(r,t,i,-1))}return WE(),r=ox(Error(we(421))),Rm(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=UH.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,ci=as(i.nextSibling),ui=e,ln=!0,Qi=null,t!==null&&(Ti[Ai++]=Zo,Ti[Ai++]=Jo,Ti[Ai++]=Dl,Zo=t.id,Jo=t.overflow,Dl=e),e=VE(e,r.children),e.flags|=4096,e)}function nC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),m1(t.return,e,n)}function ax(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function rj(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Nr(t,e,r.children,n),r=un.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nC(t,n,e);else if(t.tag===19)nC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Yt(un,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&pv(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ax(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&pv(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ax(e,!0,n,null,o);break;case"together":ax(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function va(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),kl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(we(153));if(e.child!==null){for(t=e.child,n=us(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=us(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function AH(t,e,n){switch(e.tag){case 3:tj(e),Cu();break;case 5:C3(e);break;case 1:Kr(e.type)&&lv(e);break;case 4:IE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Yt(fv,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Yt(un,un.current&1),e.flags|=128,null):n&e.child.childLanes?nj(t,e,n):(Yt(un,un.current&1),t=va(t,e,n),t!==null?t.sibling:null);Yt(un,un.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return rj(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Yt(un,un.current),r)break;return null;case 22:case 23:return e.lanes=0,J3(t,e,n)}return va(t,e,n)}var ij,S1,oj,aj;ij=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};S1=function(){};oj=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,dl(wo.current);var o=null;switch(n){case"input":i=Gb(t,i),r=Gb(t,r),o=[];break;case"select":i=dn({},i,{value:void 0}),r=dn({},r,{value:void 0}),o=[];break;case"textarea":i=Xb(t,i),r=Xb(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=av)}Yb(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(yd.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(s=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(yd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&en("scroll",t),o||s===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};aj=function(t,e,n,r){n!==r&&(e.flags|=4)};function mh(t,e){if(!ln)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function MH(t,e,n){var r=e.pendingProps;switch(TE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mr(e),null;case 1:return Kr(e.type)&&sv(),mr(e),null;case 3:return r=e.stateNode,Ou(),an(Xr),an(Pr),DE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qi!==null&&(O1(Qi),Qi=null))),S1(t,e),mr(e),null;case 5:NE(e);var i=dl(Rd.current);if(n=e.type,t!==null&&e.stateNode!=null)oj(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(we(166));return mr(e),null}if(t=dl(wo.current),Pm(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[yo]=e,r[Pd]=o,t=(e.mode&1)!==0,n){case"dialog":en("cancel",r),en("close",r);break;case"iframe":case"object":case"embed":en("load",r);break;case"video":case"audio":for(i=0;i<Lh.length;i++)en(Lh[i],r);break;case"source":en("error",r);break;case"img":case"image":case"link":en("error",r),en("load",r);break;case"details":en("toggle",r);break;case"input":fP(r,o),en("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},en("invalid",r);break;case"textarea":dP(r,o),en("invalid",r)}Yb(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&Mm(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Mm(r.textContent,s,t),i=["children",""+s]):yd.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&en("scroll",r)}switch(n){case"input":_m(r),hP(r,o,!0);break;case"textarea":_m(r),pP(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=av)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Dk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[yo]=e,t[Pd]=r,ij(t,e,!1,!1),e.stateNode=t;e:{switch(a=Qb(n,r),n){case"dialog":en("cancel",t),en("close",t),i=r;break;case"iframe":case"object":case"embed":en("load",t),i=r;break;case"video":case"audio":for(i=0;i<Lh.length;i++)en(Lh[i],t);i=r;break;case"source":en("error",t),i=r;break;case"img":case"image":case"link":en("error",t),en("load",t),i=r;break;case"details":en("toggle",t),i=r;break;case"input":fP(t,r),i=Gb(t,r),en("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=dn({},r,{value:void 0}),en("invalid",t);break;case"textarea":dP(t,r),i=Xb(t,r),en("invalid",t);break;default:i=r}Yb(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?jk(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Lk(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&_d(t,l):typeof l=="number"&&_d(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(yd.hasOwnProperty(o)?l!=null&&o==="onScroll"&&en("scroll",t):l!=null&&uE(t,o,l,a))}switch(n){case"input":_m(t),hP(t,r,!1);break;case"textarea":_m(t),pP(t);break;case"option":r.value!=null&&t.setAttribute("value",""+_s(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?du(t,!!r.multiple,o,!1):r.defaultValue!=null&&du(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=av)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mr(e),null;case 6:if(t&&e.stateNode!=null)aj(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(we(166));if(n=dl(Rd.current),dl(wo.current),Pm(e)){if(r=e.stateNode,n=e.memoizedProps,r[yo]=e,(o=r.nodeValue!==n)&&(t=ui,t!==null))switch(t.tag){case 3:Mm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Mm(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yo]=e,e.stateNode=r}return mr(e),null;case 13:if(an(un),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ln&&ci!==null&&e.mode&1&&!(e.flags&128))E3(),Cu(),e.flags|=98560,o=!1;else if(o=Pm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(we(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(we(317));o[yo]=e}else Cu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mr(e),o=!1}else Qi!==null&&(O1(Qi),Qi=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||un.current&1?Fn===0&&(Fn=3):WE())),e.updateQueue!==null&&(e.flags|=4),mr(e),null);case 4:return Ou(),S1(t,e),t===null&&Ad(e.stateNode.containerInfo),mr(e),null;case 10:return CE(e.type._context),mr(e),null;case 17:return Kr(e.type)&&sv(),mr(e),null;case 19:if(an(un),o=e.memoizedState,o===null)return mr(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)mh(o,!1);else{if(Fn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=pv(t),a!==null){for(e.flags|=128,mh(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Yt(un,un.current&1|2),e.child}t=t.sibling}o.tail!==null&&wn()>Nu&&(e.flags|=128,r=!0,mh(o,!1),e.lanes=4194304)}else{if(!r)if(t=pv(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),mh(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ln)return mr(e),null}else 2*wn()-o.renderingStartTime>Nu&&n!==1073741824&&(e.flags|=128,r=!0,mh(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=wn(),e.sibling=null,n=un.current,Yt(un,r?n&1|2:n&1),e):(mr(e),null);case 22:case 23:return GE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?oi&1073741824&&(mr(e),e.subtreeFlags&6&&(e.flags|=8192)):mr(e),null;case 24:return null;case 25:return null}throw Error(we(156,e.tag))}function PH(t,e){switch(TE(e),e.tag){case 1:return Kr(e.type)&&sv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ou(),an(Xr),an(Pr),DE(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return NE(e),null;case 13:if(an(un),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(we(340));Cu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return an(un),null;case 4:return Ou(),null;case 10:return CE(e.type._context),null;case 22:case 23:return GE(),null;case 24:return null;default:return null}}var Om=!1,wr=!1,CH=typeof WeakSet=="function"?WeakSet:Set,$e=null;function Zc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){vn(t,e,r)}else n.current=null}function E1(t,e,n){try{n()}catch(r){vn(t,e,r)}}var rC=!1;function RH(t,e){if(s1=rv,t=f3(),SE(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,c=0,u=0,f=t,h=null;t:for(;;){for(var d;f!==n||i!==0&&f.nodeType!==3||(s=a+i),f!==o||r!==0&&f.nodeType!==3||(l=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===n&&++c===i&&(s=a),h===o&&++u===r&&(l=a),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(l1={focusedElem:t,selectionRange:n},rv=!1,$e=e;$e!==null;)if(e=$e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$e=t;else for(;$e!==null;){e=$e;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,g=v.memoizedState,p=e.stateNode,x=p.getSnapshotBeforeUpdate(e.elementType===e.type?y:qi(e.type,y),g);p.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(E){vn(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,$e=t;break}$e=e.return}return v=rC,rC=!1,v}function Qh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&E1(e,n,o)}i=i.next}while(i!==r)}}function s0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function T1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function sj(t){var e=t.alternate;e!==null&&(t.alternate=null,sj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yo],delete e[Pd],delete e[f1],delete e[hH],delete e[dH])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lj(t){return t.tag===5||t.tag===3||t.tag===4}function iC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function A1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=av));else if(r!==4&&(t=t.child,t!==null))for(A1(t,e,n),t=t.sibling;t!==null;)A1(t,e,n),t=t.sibling}function M1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(M1(t,e,n),t=t.sibling;t!==null;)M1(t,e,n),t=t.sibling}var ir=null,Xi=!1;function Da(t,e,n){for(n=n.child;n!==null;)cj(t,e,n),n=n.sibling}function cj(t,e,n){if(bo&&typeof bo.onCommitFiberUnmount=="function")try{bo.onCommitFiberUnmount(Jy,n)}catch{}switch(n.tag){case 5:wr||Zc(n,e);case 6:var r=ir,i=Xi;ir=null,Da(t,e,n),ir=r,Xi=i,ir!==null&&(Xi?(t=ir,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ir.removeChild(n.stateNode));break;case 18:ir!==null&&(Xi?(t=ir,n=n.stateNode,t.nodeType===8?J_(t.parentNode,n):t.nodeType===1&&J_(t,n),Sd(t)):J_(ir,n.stateNode));break;case 4:r=ir,i=Xi,ir=n.stateNode.containerInfo,Xi=!0,Da(t,e,n),ir=r,Xi=i;break;case 0:case 11:case 14:case 15:if(!wr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&E1(n,e,a),i=i.next}while(i!==r)}Da(t,e,n);break;case 1:if(!wr&&(Zc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){vn(n,e,s)}Da(t,e,n);break;case 21:Da(t,e,n);break;case 22:n.mode&1?(wr=(r=wr)||n.memoizedState!==null,Da(t,e,n),wr=r):Da(t,e,n);break;default:Da(t,e,n)}}function oC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new CH),e.forEach(function(r){var i=FH.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function $i(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:ir=s.stateNode,Xi=!1;break e;case 3:ir=s.stateNode.containerInfo,Xi=!0;break e;case 4:ir=s.stateNode.containerInfo,Xi=!0;break e}s=s.return}if(ir===null)throw Error(we(160));cj(o,a,i),ir=null,Xi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){vn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uj(e,t),e=e.sibling}function uj(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($i(e,t),mo(t),r&4){try{Qh(3,t,t.return),s0(3,t)}catch(y){vn(t,t.return,y)}try{Qh(5,t,t.return)}catch(y){vn(t,t.return,y)}}break;case 1:$i(e,t),mo(t),r&512&&n!==null&&Zc(n,n.return);break;case 5:if($i(e,t),mo(t),r&512&&n!==null&&Zc(n,n.return),t.flags&32){var i=t.stateNode;try{_d(i,"")}catch(y){vn(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&Ik(i,o),Qb(s,a);var c=Qb(s,o);for(a=0;a<l.length;a+=2){var u=l[a],f=l[a+1];u==="style"?jk(i,f):u==="dangerouslySetInnerHTML"?Lk(i,f):u==="children"?_d(i,f):uE(i,u,f,c)}switch(s){case"input":Wb(i,o);break;case"textarea":Nk(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var d=o.value;d!=null?du(i,!!o.multiple,d,!1):h!==!!o.multiple&&(o.defaultValue!=null?du(i,!!o.multiple,o.defaultValue,!0):du(i,!!o.multiple,o.multiple?[]:"",!1))}i[Pd]=o}catch(y){vn(t,t.return,y)}}break;case 6:if($i(e,t),mo(t),r&4){if(t.stateNode===null)throw Error(we(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(y){vn(t,t.return,y)}}break;case 3:if($i(e,t),mo(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Sd(e.containerInfo)}catch(y){vn(t,t.return,y)}break;case 4:$i(e,t),mo(t);break;case 13:$i(e,t),mo(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(zE=wn())),r&4&&oC(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(wr=(c=wr)||u,$i(e,t),wr=c):$i(e,t),mo(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for($e=t,u=t.child;u!==null;){for(f=$e=u;$e!==null;){switch(h=$e,d=h.child,h.tag){case 0:case 11:case 14:case 15:Qh(4,h,h.return);break;case 1:Zc(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){vn(r,n,y)}}break;case 5:Zc(h,h.return);break;case 22:if(h.memoizedState!==null){sC(f);continue}}d!==null?(d.return=h,$e=d):sC(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=f.stateNode,l=f.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=kk("display",a))}catch(y){vn(t,t.return,y)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(y){vn(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:$i(e,t),mo(t),r&4&&oC(t);break;case 21:break;default:$i(e,t),mo(t)}}function mo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(lj(n)){var r=n;break e}n=n.return}throw Error(we(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_d(i,""),r.flags&=-33);var o=iC(t);M1(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=iC(t);A1(t,s,a);break;default:throw Error(we(161))}}catch(l){vn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function OH(t,e,n){$e=t,fj(t)}function fj(t,e,n){for(var r=(t.mode&1)!==0;$e!==null;){var i=$e,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Om;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||wr;s=Om;var c=wr;if(Om=a,(wr=l)&&!c)for($e=i;$e!==null;)a=$e,l=a.child,a.tag===22&&a.memoizedState!==null?lC(i):l!==null?(l.return=a,$e=l):lC(i);for(;o!==null;)$e=o,fj(o),o=o.sibling;$e=i,Om=s,wr=c}aC(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,$e=o):aC(t)}}function aC(t){for(;$e!==null;){var e=$e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wr||s0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!wr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:qi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&HP(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}HP(e,a,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Sd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(we(163))}wr||e.flags&512&&T1(e)}catch(h){vn(e,e.return,h)}}if(e===t){$e=null;break}if(n=e.sibling,n!==null){n.return=e.return,$e=n;break}$e=e.return}}function sC(t){for(;$e!==null;){var e=$e;if(e===t){$e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$e=n;break}$e=e.return}}function lC(t){for(;$e!==null;){var e=$e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{s0(4,e)}catch(l){vn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){vn(e,i,l)}}var o=e.return;try{T1(e)}catch(l){vn(e,o,l)}break;case 5:var a=e.return;try{T1(e)}catch(l){vn(e,a,l)}}}catch(l){vn(e,e.return,l)}if(e===t){$e=null;break}var s=e.sibling;if(s!==null){s.return=e.return,$e=s;break}$e=e.return}}var IH=Math.ceil,vv=Aa.ReactCurrentDispatcher,BE=Aa.ReactCurrentOwner,Ni=Aa.ReactCurrentBatchConfig,Nt=0,Jn=null,Rn=null,lr=0,oi=0,Jc=Is(0),Fn=0,Dd=null,kl=0,l0=0,$E=0,Zh=null,Hr=null,zE=0,Nu=1/0,Xo=null,yv=!1,P1=null,ls=null,Im=!1,Qa=null,_v=0,Jh=0,C1=null,Ug=-1,Fg=0;function Fr(){return Nt&6?wn():Ug!==-1?Ug:Ug=wn()}function cs(t){return t.mode&1?Nt&2&&lr!==0?lr&-lr:mH.transition!==null?(Fg===0&&(Fg=Kk()),Fg):(t=Bt,t!==0||(t=window.event,t=t===void 0?16:n3(t.type)),t):1}function io(t,e,n,r){if(50<Jh)throw Jh=0,C1=null,Error(we(185));kp(t,n,r),(!(Nt&2)||t!==Jn)&&(t===Jn&&(!(Nt&2)&&(l0|=n),Fn===4&&Xa(t,lr)),Yr(t,r),n===1&&Nt===0&&!(e.mode&1)&&(Nu=wn()+500,i0&&Ns()))}function Yr(t,e){var n=t.callbackNode;m6(t,e);var r=nv(t,t===Jn?lr:0);if(r===0)n!==null&&vP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vP(n),e===1)t.tag===0?pH(cC.bind(null,t)):b3(cC.bind(null,t)),uH(function(){!(Nt&6)&&Ns()}),n=null;else{switch(Yk(r)){case 1:n=mE;break;case 4:n=qk;break;case 16:n=tv;break;case 536870912:n=Xk;break;default:n=tv}n=_j(n,hj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function hj(t,e){if(Ug=-1,Fg=0,Nt&6)throw Error(we(327));var n=t.callbackNode;if(yu()&&t.callbackNode!==n)return null;var r=nv(t,t===Jn?lr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xv(t,r);else{e=r;var i=Nt;Nt|=2;var o=pj();(Jn!==t||lr!==e)&&(Xo=null,Nu=wn()+500,Sl(t,e));do try{LH();break}catch(s){dj(t,s)}while(!0);PE(),vv.current=o,Nt=i,Rn!==null?e=0:(Jn=null,lr=0,e=Fn)}if(e!==0){if(e===2&&(i=n1(t),i!==0&&(r=i,e=R1(t,i))),e===1)throw n=Dd,Sl(t,0),Xa(t,r),Yr(t,wn()),n;if(e===6)Xa(t,r);else{if(i=t.current.alternate,!(r&30)&&!NH(i)&&(e=xv(t,r),e===2&&(o=n1(t),o!==0&&(r=o,e=R1(t,o))),e===1))throw n=Dd,Sl(t,0),Xa(t,r),Yr(t,wn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(we(345));case 2:el(t,Hr,Xo);break;case 3:if(Xa(t,r),(r&130023424)===r&&(e=zE+500-wn(),10<e)){if(nv(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Fr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=u1(el.bind(null,t,Hr,Xo),e);break}el(t,Hr,Xo);break;case 4:if(Xa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-ro(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=wn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*IH(r/1960))-r,10<r){t.timeoutHandle=u1(el.bind(null,t,Hr,Xo),r);break}el(t,Hr,Xo);break;case 5:el(t,Hr,Xo);break;default:throw Error(we(329))}}}return Yr(t,wn()),t.callbackNode===n?hj.bind(null,t):null}function R1(t,e){var n=Zh;return t.current.memoizedState.isDehydrated&&(Sl(t,e).flags|=256),t=xv(t,e),t!==2&&(e=Hr,Hr=n,e!==null&&O1(e)),t}function O1(t){Hr===null?Hr=t:Hr.push.apply(Hr,t)}function NH(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!so(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xa(t,e){for(e&=~$E,e&=~l0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ro(e),r=1<<n;t[n]=-1,e&=~r}}function cC(t){if(Nt&6)throw Error(we(327));yu();var e=nv(t,0);if(!(e&1))return Yr(t,wn()),null;var n=xv(t,e);if(t.tag!==0&&n===2){var r=n1(t);r!==0&&(e=r,n=R1(t,r))}if(n===1)throw n=Dd,Sl(t,0),Xa(t,e),Yr(t,wn()),n;if(n===6)throw Error(we(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,el(t,Hr,Xo),Yr(t,wn()),null}function HE(t,e){var n=Nt;Nt|=1;try{return t(e)}finally{Nt=n,Nt===0&&(Nu=wn()+500,i0&&Ns())}}function jl(t){Qa!==null&&Qa.tag===0&&!(Nt&6)&&yu();var e=Nt;Nt|=1;var n=Ni.transition,r=Bt;try{if(Ni.transition=null,Bt=1,t)return t()}finally{Bt=r,Ni.transition=n,Nt=e,!(Nt&6)&&Ns()}}function GE(){oi=Jc.current,an(Jc)}function Sl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cH(n)),Rn!==null)for(n=Rn.return;n!==null;){var r=n;switch(TE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sv();break;case 3:Ou(),an(Xr),an(Pr),DE();break;case 5:NE(r);break;case 4:Ou();break;case 13:an(un);break;case 19:an(un);break;case 10:CE(r.type._context);break;case 22:case 23:GE()}n=n.return}if(Jn=t,Rn=t=us(t.current,null),lr=oi=e,Fn=0,Dd=null,$E=l0=kl=0,Hr=Zh=null,hl!==null){for(e=0;e<hl.length;e++)if(n=hl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}hl=null}return t}function dj(t,e){do{var n=Rn;try{if(PE(),Lg.current=gv,mv){for(var r=hn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}mv=!1}if(Ll=0,Yn=kn=hn=null,Yh=!1,Od=0,BE.current=null,n===null||n.return===null){Fn=1,Dd=e,Rn=null;break}e:{var o=t,a=n.return,s=n,l=e;if(e=lr,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=s,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var d=YP(a);if(d!==null){d.flags&=-257,QP(d,a,s,o,e),d.mode&1&&KP(o,c,e),e=d,l=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){KP(o,c,e),WE();break e}l=Error(we(426))}}else if(ln&&s.mode&1){var g=YP(a);if(g!==null){!(g.flags&65536)&&(g.flags|=256),QP(g,a,s,o,e),AE(Iu(l,s));break e}}o=l=Iu(l,s),Fn!==4&&(Fn=2),Zh===null?Zh=[o]:Zh.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var p=Y3(o,l,e);zP(o,p);break e;case 1:s=l;var x=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ls===null||!ls.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=Q3(o,s,e);zP(o,E);break e}}o=o.return}while(o!==null)}gj(n)}catch(b){e=b,Rn===n&&n!==null&&(Rn=n=n.return);continue}break}while(!0)}function pj(){var t=vv.current;return vv.current=gv,t===null?gv:t}function WE(){(Fn===0||Fn===3||Fn===2)&&(Fn=4),Jn===null||!(kl&268435455)&&!(l0&268435455)||Xa(Jn,lr)}function xv(t,e){var n=Nt;Nt|=2;var r=pj();(Jn!==t||lr!==e)&&(Xo=null,Sl(t,e));do try{DH();break}catch(i){dj(t,i)}while(!0);if(PE(),Nt=n,vv.current=r,Rn!==null)throw Error(we(261));return Jn=null,lr=0,Fn}function DH(){for(;Rn!==null;)mj(Rn)}function LH(){for(;Rn!==null&&!a6();)mj(Rn)}function mj(t){var e=yj(t.alternate,t,oi);t.memoizedProps=t.pendingProps,e===null?gj(t):Rn=e,BE.current=null}function gj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=PH(n,e),n!==null){n.flags&=32767,Rn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fn=6,Rn=null;return}}else if(n=MH(n,e,oi),n!==null){Rn=n;return}if(e=e.sibling,e!==null){Rn=e;return}Rn=e=t}while(e!==null);Fn===0&&(Fn=5)}function el(t,e,n){var r=Bt,i=Ni.transition;try{Ni.transition=null,Bt=1,kH(t,e,n,r)}finally{Ni.transition=i,Bt=r}return null}function kH(t,e,n,r){do yu();while(Qa!==null);if(Nt&6)throw Error(we(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(we(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(g6(t,o),t===Jn&&(Rn=Jn=null,lr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Im||(Im=!0,_j(tv,function(){return yu(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ni.transition,Ni.transition=null;var a=Bt;Bt=1;var s=Nt;Nt|=4,BE.current=null,RH(t,n),uj(n,t),nH(l1),rv=!!s1,l1=s1=null,t.current=n,OH(n),s6(),Nt=s,Bt=a,Ni.transition=o}else t.current=n;if(Im&&(Im=!1,Qa=t,_v=i),o=t.pendingLanes,o===0&&(ls=null),u6(n.stateNode),Yr(t,wn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(yv)throw yv=!1,t=P1,P1=null,t;return _v&1&&t.tag!==0&&yu(),o=t.pendingLanes,o&1?t===C1?Jh++:(Jh=0,C1=t):Jh=0,Ns(),null}function yu(){if(Qa!==null){var t=Yk(_v),e=Ni.transition,n=Bt;try{if(Ni.transition=null,Bt=16>t?16:t,Qa===null)var r=!1;else{if(t=Qa,Qa=null,_v=0,Nt&6)throw Error(we(331));var i=Nt;for(Nt|=4,$e=t.current;$e!==null;){var o=$e,a=o.child;if($e.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for($e=c;$e!==null;){var u=$e;switch(u.tag){case 0:case 11:case 15:Qh(8,u,o)}var f=u.child;if(f!==null)f.return=u,$e=f;else for(;$e!==null;){u=$e;var h=u.sibling,d=u.return;if(sj(u),u===c){$e=null;break}if(h!==null){h.return=d,$e=h;break}$e=d}}}var v=o.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var g=y.sibling;y.sibling=null,y=g}while(y!==null)}}$e=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,$e=a;else e:for(;$e!==null;){if(o=$e,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Qh(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,$e=p;break e}$e=o.return}}var x=t.current;for($e=x;$e!==null;){a=$e;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,$e=_;else e:for(a=x;$e!==null;){if(s=$e,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:s0(9,s)}}catch(b){vn(s,s.return,b)}if(s===a){$e=null;break e}var E=s.sibling;if(E!==null){E.return=s.return,$e=E;break e}$e=s.return}}if(Nt=i,Ns(),bo&&typeof bo.onPostCommitFiberRoot=="function")try{bo.onPostCommitFiberRoot(Jy,t)}catch{}r=!0}return r}finally{Bt=n,Ni.transition=e}}return!1}function uC(t,e,n){e=Iu(n,e),e=Y3(t,e,1),t=ss(t,e,1),e=Fr(),t!==null&&(kp(t,1,e),Yr(t,e))}function vn(t,e,n){if(t.tag===3)uC(t,t,n);else for(;e!==null;){if(e.tag===3){uC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ls===null||!ls.has(r))){t=Iu(n,t),t=Q3(e,t,1),e=ss(e,t,1),t=Fr(),e!==null&&(kp(e,1,t),Yr(e,t));break}}e=e.return}}function jH(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Fr(),t.pingedLanes|=t.suspendedLanes&n,Jn===t&&(lr&n)===n&&(Fn===4||Fn===3&&(lr&130023424)===lr&&500>wn()-zE?Sl(t,0):$E|=n),Yr(t,e)}function vj(t,e){e===0&&(t.mode&1?(e=wm,wm<<=1,!(wm&130023424)&&(wm=4194304)):e=1);var n=Fr();t=ga(t,e),t!==null&&(kp(t,e,n),Yr(t,n))}function UH(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vj(t,n)}function FH(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(we(314))}r!==null&&r.delete(e),vj(t,n)}var yj;yj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xr.current)Wr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Wr=!1,AH(t,e,n);Wr=!!(t.flags&131072)}else Wr=!1,ln&&e.flags&1048576&&w3(e,uv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;jg(t,e),t=e.pendingProps;var i=Pu(e,Pr.current);vu(e,n),i=kE(null,e,r,t,i,n);var o=jE();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Kr(r)?(o=!0,lv(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,OE(e),i.updater=a0,e.stateNode=i,i._reactInternals=e,v1(e,r,t,n),e=x1(null,e,r,!0,o,n)):(e.tag=0,ln&&o&&EE(e),Nr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(jg(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=BH(r),t=qi(r,t),i){case 0:e=_1(null,e,r,t,n);break e;case 1:e=eC(null,e,r,t,n);break e;case 11:e=ZP(null,e,r,t,n);break e;case 14:e=JP(null,e,r,qi(r.type,t),n);break e}throw Error(we(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qi(r,i),_1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qi(r,i),eC(t,e,r,i,n);case 3:e:{if(tj(e),t===null)throw Error(we(387));r=e.pendingProps,o=e.memoizedState,i=o.element,P3(t,e),dv(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Iu(Error(we(423)),e),e=tC(t,e,r,n,i);break e}else if(r!==i){i=Iu(Error(we(424)),e),e=tC(t,e,r,n,i);break e}else for(ci=as(e.stateNode.containerInfo.firstChild),ui=e,ln=!0,Qi=null,n=A3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cu(),r===i){e=va(t,e,n);break e}Nr(t,e,r,n)}e=e.child}return e;case 5:return C3(e),t===null&&p1(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,c1(r,i)?a=null:o!==null&&c1(r,o)&&(e.flags|=32),ej(t,e),Nr(t,e,a,n),e.child;case 6:return t===null&&p1(e),null;case 13:return nj(t,e,n);case 4:return IE(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ru(e,null,r,n):Nr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qi(r,i),ZP(t,e,r,i,n);case 7:return Nr(t,e,e.pendingProps,n),e.child;case 8:return Nr(t,e,e.pendingProps.children,n),e.child;case 12:return Nr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,Yt(fv,r._currentValue),r._currentValue=a,o!==null)if(so(o.value,a)){if(o.children===i.children&&!Xr.current){e=va(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=oa(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),m1(o.return,n,e),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(we(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),m1(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Nr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,vu(e,n),i=ki(i),r=r(i),e.flags|=1,Nr(t,e,r,n),e.child;case 14:return r=e.type,i=qi(r,e.pendingProps),i=qi(r.type,i),JP(t,e,r,i,n);case 15:return Z3(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qi(r,i),jg(t,e),e.tag=1,Kr(r)?(t=!0,lv(e)):t=!1,vu(e,n),K3(e,r,i),v1(e,r,i,n),x1(null,e,r,!0,t,n);case 19:return rj(t,e,n);case 22:return J3(t,e,n)}throw Error(we(156,e.tag))};function _j(t,e){return Wk(t,e)}function VH(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oi(t,e,n,r){return new VH(t,e,n,r)}function qE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function BH(t){if(typeof t=="function")return qE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hE)return 11;if(t===dE)return 14}return 2}function us(t,e){var n=t.alternate;return n===null?(n=Oi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vg(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")qE(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case zc:return El(n.children,i,o,e);case fE:a=8,i|=8;break;case Bb:return t=Oi(12,n,e,i|2),t.elementType=Bb,t.lanes=o,t;case $b:return t=Oi(13,n,e,i),t.elementType=$b,t.lanes=o,t;case zb:return t=Oi(19,n,e,i),t.elementType=zb,t.lanes=o,t;case Ck:return c0(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Mk:a=10;break e;case Pk:a=9;break e;case hE:a=11;break e;case dE:a=14;break e;case $a:a=16,r=null;break e}throw Error(we(130,t==null?t:typeof t,""))}return e=Oi(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function El(t,e,n,r){return t=Oi(7,t,r,e),t.lanes=n,t}function c0(t,e,n,r){return t=Oi(22,t,r,e),t.elementType=Ck,t.lanes=n,t.stateNode={isHidden:!1},t}function sx(t,e,n){return t=Oi(6,t,null,e),t.lanes=n,t}function lx(t,e,n){return e=Oi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $H(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$_(0),this.expirationTimes=$_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function XE(t,e,n,r,i,o,a,s,l){return t=new $H(t,e,n,s,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Oi(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},OE(o),t}function zH(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$c,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function xj(t){if(!t)return xs;t=t._reactInternals;e:{if(Xl(t)!==t||t.tag!==1)throw Error(we(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Kr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(we(171))}if(t.tag===1){var n=t.type;if(Kr(n))return x3(t,n,e)}return e}function bj(t,e,n,r,i,o,a,s,l){return t=XE(n,r,!0,t,i,o,a,s,l),t.context=xj(null),n=t.current,r=Fr(),i=cs(n),o=oa(r,i),o.callback=e??null,ss(n,o,i),t.current.lanes=i,kp(t,i,r),Yr(t,r),t}function u0(t,e,n,r){var i=e.current,o=Fr(),a=cs(i);return n=xj(n),e.context===null?e.context=n:e.pendingContext=n,e=oa(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ss(i,e,a),t!==null&&(io(t,i,a,o),Dg(t,i,a)),a}function bv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function KE(t,e){fC(t,e),(t=t.alternate)&&fC(t,e)}function HH(){return null}var wj=typeof reportError=="function"?reportError:function(t){console.error(t)};function YE(t){this._internalRoot=t}f0.prototype.render=YE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(we(409));u0(t,e,null,null)};f0.prototype.unmount=YE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;jl(function(){u0(null,t,null,null)}),e[ma]=null}};function f0(t){this._internalRoot=t}f0.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qa.length&&e!==0&&e<qa[n].priority;n++);qa.splice(n,0,t),n===0&&t3(t)}};function QE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hC(){}function GH(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=bv(a);o.call(c)}}var a=bj(e,r,t,0,null,!1,!1,"",hC);return t._reactRootContainer=a,t[ma]=a.current,Ad(t.nodeType===8?t.parentNode:t),jl(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var c=bv(l);s.call(c)}}var l=XE(t,0,!1,null,null,!1,!1,"",hC);return t._reactRootContainer=l,t[ma]=l.current,Ad(t.nodeType===8?t.parentNode:t),jl(function(){u0(e,l,n,r)}),l}function d0(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=bv(a);s.call(l)}}u0(e,a,t,i)}else a=GH(n,e,t,i,r);return bv(a)}Qk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Dh(e.pendingLanes);n!==0&&(gE(e,n|1),Yr(e,wn()),!(Nt&6)&&(Nu=wn()+500,Ns()))}break;case 13:jl(function(){var r=ga(t,1);if(r!==null){var i=Fr();io(r,t,1,i)}}),KE(t,1)}};vE=function(t){if(t.tag===13){var e=ga(t,134217728);if(e!==null){var n=Fr();io(e,t,134217728,n)}KE(t,134217728)}};Zk=function(t){if(t.tag===13){var e=cs(t),n=ga(t,e);if(n!==null){var r=Fr();io(n,t,e,r)}KE(t,e)}};Jk=function(){return Bt};e3=function(t,e){var n=Bt;try{return Bt=t,e()}finally{Bt=n}};Jb=function(t,e,n){switch(e){case"input":if(Wb(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=r0(r);if(!i)throw Error(we(90));Ok(r),Wb(r,i)}}}break;case"textarea":Nk(t,n);break;case"select":e=n.value,e!=null&&du(t,!!n.multiple,e,!1)}};Vk=HE;Bk=jl;var WH={usingClientEntryPoint:!1,Events:[Up,qc,r0,Uk,Fk,HE]},gh={findFiberByHostInstance:fl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qH={bundleType:gh.bundleType,version:gh.version,rendererPackageName:gh.rendererPackageName,rendererConfig:gh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Aa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hk(t),t===null?null:t.stateNode},findFiberByHostInstance:gh.findFiberByHostInstance||HH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nm.isDisabled&&Nm.supportsFiber)try{Jy=Nm.inject(qH),bo=Nm}catch{}}mi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WH;mi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!QE(e))throw Error(we(200));return zH(t,e,null,n)};mi.createRoot=function(t,e){if(!QE(t))throw Error(we(299));var n=!1,r="",i=wj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=XE(t,1,!1,null,null,n,!1,r,i),t[ma]=e.current,Ad(t.nodeType===8?t.parentNode:t),new YE(e)};mi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(we(188)):(t=Object.keys(t).join(","),Error(we(268,t)));return t=Hk(e),t=t===null?null:t.stateNode,t};mi.flushSync=function(t){return jl(t)};mi.hydrate=function(t,e,n){if(!h0(e))throw Error(we(200));return d0(null,t,e,!0,n)};mi.hydrateRoot=function(t,e,n){if(!QE(t))throw Error(we(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=wj;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=bj(e,null,t,1,n??null,i,!1,o,a),t[ma]=e.current,Ad(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new f0(e)};mi.render=function(t,e,n){if(!h0(e))throw Error(we(200));return d0(null,t,e,!1,n)};mi.unmountComponentAtNode=function(t){if(!h0(t))throw Error(we(40));return t._reactRootContainer?(jl(function(){d0(null,null,t,!1,function(){t._reactRootContainer=null,t[ma]=null})}),!0):!1};mi.unstable_batchedUpdates=HE;mi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!h0(n))throw Error(we(200));if(t==null||t._reactInternals===void 0)throw Error(we(38));return d0(t,e,n,!1,r)};mi.version="18.3.1-next-f1338f8080-20240426";function Sj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sj)}catch(t){console.error(t)}}Sj(),Sk.exports=mi;var XH=Sk.exports,dC=XH;Fb.createRoot=dC.createRoot,Fb.hydrateRoot=dC.hydrateRoot;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ZE="158",pc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ha={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},KH=0,pC=1,YH=2,Ej=1,QH=2,qo=3,bs=0,Vr=1,Qo=2,fs=0,_u=1,I1=2,mC=3,gC=4,ZH=5,ll=100,JH=101,e9=102,vC=103,yC=104,t9=200,n9=201,r9=202,i9=203,N1=204,D1=205,o9=206,a9=207,s9=208,l9=209,c9=210,u9=211,f9=212,h9=213,d9=214,p9=0,m9=1,g9=2,wv=3,v9=4,y9=5,_9=6,x9=7,JE=0,b9=1,w9=2,hs=0,S9=1,E9=2,T9=3,A9=4,M9=5,Tj=300,Du=301,Lu=302,L1=303,k1=304,p0=306,j1=1e3,Ji=1001,U1=1002,Dr=1003,_C=1004,cx=1005,Mi=1006,P9=1007,Ld=1008,ds=1009,C9=1010,R9=1011,eT=1012,Aj=1013,Za=1014,Ja=1015,kd=1016,Mj=1017,Pj=1018,Tl=1020,O9=1021,eo=1023,I9=1024,N9=1025,Al=1026,ku=1027,D9=1028,Cj=1029,L9=1030,Rj=1031,Oj=1033,ux=33776,fx=33777,hx=33778,dx=33779,xC=35840,bC=35841,wC=35842,SC=35843,k9=36196,EC=37492,TC=37496,AC=37808,MC=37809,PC=37810,CC=37811,RC=37812,OC=37813,IC=37814,NC=37815,DC=37816,LC=37817,kC=37818,jC=37819,UC=37820,FC=37821,px=36492,VC=36494,BC=36495,j9=36283,$C=36284,zC=36285,HC=36286,Ij=3e3,Ml=3001,U9=3200,F9=3201,Nj=0,V9=1,Pi="",jn="srgb",ya="srgb-linear",tT="display-p3",m0="display-p3-linear",Sv="linear",tn="srgb",Ev="rec709",Tv="p3",mc=7680,GC=519,B9=512,$9=513,z9=514,H9=515,G9=516,W9=517,q9=518,X9=519,WC=35044,qC="300 es",F1=1035,ea=2e3,Av=2001;class Kl{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,a=i.length;o<a;o++)i[o].call(this,e);e.target=null}}}const gr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let XC=1234567;const ed=Math.PI/180,jd=180/Math.PI;function Mf(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(gr[t&255]+gr[t>>8&255]+gr[t>>16&255]+gr[t>>24&255]+"-"+gr[e&255]+gr[e>>8&255]+"-"+gr[e>>16&15|64]+gr[e>>24&255]+"-"+gr[n&63|128]+gr[n>>8&255]+"-"+gr[n>>16&255]+gr[n>>24&255]+gr[r&255]+gr[r>>8&255]+gr[r>>16&255]+gr[r>>24&255]).toLowerCase()}function Sr(t,e,n){return Math.max(e,Math.min(n,t))}function nT(t,e){return(t%e+e)%e}function K9(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function Y9(t,e,n){return t!==e?(n-t)/(e-t):0}function td(t,e,n){return(1-n)*t+n*e}function Q9(t,e,n,r){return td(t,e,1-Math.exp(-n*r))}function Z9(t,e=1){return e-Math.abs(nT(t,e*2)-e)}function J9(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function eG(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function tG(t,e){return t+Math.floor(Math.random()*(e-t+1))}function nG(t,e){return t+Math.random()*(e-t)}function rG(t){return t*(.5-Math.random())}function iG(t){t!==void 0&&(XC=t);let e=XC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function oG(t){return t*ed}function aG(t){return t*jd}function V1(t){return(t&t-1)===0&&t!==0}function sG(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Mv(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function lG(t,e,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((e+r)/2),u=a((e+r)/2),f=o((e-r)/2),h=a((e-r)/2),d=o((r-e)/2),v=a((r-e)/2);switch(i){case"XYX":t.set(s*u,l*f,l*h,s*c);break;case"YZY":t.set(l*h,s*u,l*f,s*c);break;case"ZXZ":t.set(l*f,l*h,s*u,s*c);break;case"XZX":t.set(s*u,l*v,l*d,s*c);break;case"YXY":t.set(l*d,s*u,l*v,s*c);break;case"ZYZ":t.set(l*v,l*d,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function jc(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Rr(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Dj={DEG2RAD:ed,RAD2DEG:jd,generateUUID:Mf,clamp:Sr,euclideanModulo:nT,mapLinear:K9,inverseLerp:Y9,lerp:td,damp:Q9,pingpong:Z9,smoothstep:J9,smootherstep:eG,randInt:tG,randFloat:nG,randFloatSpread:rG,seededRandom:iG,degToRad:oG,radToDeg:aG,isPowerOfTwo:V1,ceilPowerOfTwo:sG,floorPowerOfTwo:Mv,setQuaternionFromProperEuler:lG,normalize:Rr,denormalize:jc};class gt{constructor(e=0,n=0){gt.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Sr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),o=this.x-e.x,a=this.y-e.y;return this.x=o*r-a*i+e.x,this.y=o*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class wt{constructor(e,n,r,i,o,a,s,l,c){wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,a,s,l,c)}set(e,n,r,i,o,a,s,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=s,u[3]=n,u[4]=o,u[5]=l,u[6]=r,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,a=r[0],s=r[3],l=r[6],c=r[1],u=r[4],f=r[7],h=r[2],d=r[5],v=r[8],y=i[0],g=i[3],p=i[6],x=i[1],_=i[4],E=i[7],b=i[2],M=i[5],S=i[8];return o[0]=a*y+s*x+l*b,o[3]=a*g+s*_+l*M,o[6]=a*p+s*E+l*S,o[1]=c*y+u*x+f*b,o[4]=c*g+u*_+f*M,o[7]=c*p+u*E+f*S,o[2]=h*y+d*x+v*b,o[5]=h*g+d*_+v*M,o[8]=h*p+d*E+v*S,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8];return n*a*u-n*s*c-r*o*u+r*s*l+i*o*c-i*a*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=u*a-s*c,h=s*l-u*o,d=c*o-a*l,v=n*f+r*h+i*d;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/v;return e[0]=f*y,e[1]=(i*c-u*r)*y,e[2]=(s*r-i*a)*y,e[3]=h*y,e[4]=(u*n-i*l)*y,e[5]=(i*o-s*n)*y,e[6]=d*y,e[7]=(r*l-c*n)*y,e[8]=(a*n-r*o)*y,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,o,a,s){const l=Math.cos(o),c=Math.sin(o);return this.set(r*l,r*c,-r*(l*a+c*s)+a+e,-i*c,i*l,-i*(-c*a+l*s)+s+n,0,0,1),this}scale(e,n){return this.premultiply(mx.makeScale(e,n)),this}rotate(e){return this.premultiply(mx.makeRotation(-e)),this}translate(e,n){return this.premultiply(mx.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const mx=new wt;function Lj(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function Ud(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function cG(){const t=Ud("canvas");return t.style.display="block",t}const KC={};function nd(t){t in KC||(KC[t]=!0,console.warn(t))}const YC=new wt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),QC=new wt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Dm={[ya]:{transfer:Sv,primaries:Ev,toReference:t=>t,fromReference:t=>t},[jn]:{transfer:tn,primaries:Ev,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[m0]:{transfer:Sv,primaries:Tv,toReference:t=>t.applyMatrix3(QC),fromReference:t=>t.applyMatrix3(YC)},[tT]:{transfer:tn,primaries:Tv,toReference:t=>t.convertSRGBToLinear().applyMatrix3(QC),fromReference:t=>t.applyMatrix3(YC).convertLinearToSRGB()}},uG=new Set([ya,m0]),zt={enabled:!0,_workingColorSpace:ya,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!uG.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=Dm[e].toReference,i=Dm[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return Dm[t].primaries},getTransfer:function(t){return t===Pi?Sv:Dm[t].transfer}};function xu(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function gx(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let gc;class kj{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{gc===void 0&&(gc=Ud("canvas")),gc.width=e.width,gc.height=e.height;const r=gc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=gc}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Ud("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let a=0;a<o.length;a++)o[a]=xu(o[a]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(xu(n[r]/255)*255):n[r]=xu(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let fG=0;class jj{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:fG++}),this.uuid=Mf(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let a=0,s=i.length;a<s;a++)i[a].isDataTexture?o.push(vx(i[a].image)):o.push(vx(i[a]))}else o=vx(i);r.url=o}return n||(e.images[this.uuid]=r),r}}function vx(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?kj.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let hG=0;class Qr extends Kl{constructor(e=Qr.DEFAULT_IMAGE,n=Qr.DEFAULT_MAPPING,r=Ji,i=Ji,o=Mi,a=Ld,s=eo,l=ds,c=Qr.DEFAULT_ANISOTROPY,u=Pi){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:hG++}),this.uuid=Mf(),this.name="",this.source=new jj(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=a,this.anisotropy=c,this.format=s,this.internalFormat=null,this.type=l,this.offset=new gt(0,0),this.repeat=new gt(1,1),this.center=new gt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(nd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===Ml?jn:Pi),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Tj)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case j1:e.x=e.x-Math.floor(e.x);break;case Ji:e.x=e.x<0?0:1;break;case U1:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case j1:e.y=e.y-Math.floor(e.y);break;case Ji:e.y=e.y<0?0:1;break;case U1:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return nd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===jn?Ml:Ij}set encoding(e){nd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Ml?jn:Pi}}Qr.DEFAULT_IMAGE=null;Qr.DEFAULT_MAPPING=Tj;Qr.DEFAULT_ANISOTROPY=1;class Zn{constructor(e=0,n=0,r=0,i=1){Zn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=this.w,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i+a[12]*o,this.y=a[1]*n+a[5]*r+a[9]*i+a[13]*o,this.z=a[2]*n+a[6]*r+a[10]*i+a[14]*o,this.w=a[3]*n+a[7]*r+a[11]*i+a[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,o;const l=e.elements,c=l[0],u=l[4],f=l[8],h=l[1],d=l[5],v=l[9],y=l[2],g=l[6],p=l[10];if(Math.abs(u-h)<.01&&Math.abs(f-y)<.01&&Math.abs(v-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(f+y)<.1&&Math.abs(v+g)<.1&&Math.abs(c+d+p-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const _=(c+1)/2,E=(d+1)/2,b=(p+1)/2,M=(u+h)/4,S=(f+y)/4,A=(v+g)/4;return _>E&&_>b?_<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(_),i=M/r,o=S/r):E>b?E<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(E),r=M/i,o=A/i):b<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(b),r=S/o,i=A/o),this.set(r,i,o,n),this}let x=Math.sqrt((g-v)*(g-v)+(f-y)*(f-y)+(h-u)*(h-u));return Math.abs(x)<.001&&(x=1),this.x=(g-v)/x,this.y=(f-y)/x,this.z=(h-u)/x,this.w=Math.acos((c+d+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class dG extends Kl{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Zn(0,0,e,n),this.scissorTest=!1,this.viewport=new Zn(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&(nd("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Ml?jn:Pi),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Mi,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new Qr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new jj(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ul extends dG{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class Uj extends Qr{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Dr,this.minFilter=Dr,this.wrapR=Ji,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class pG extends Qr{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Dr,this.minFilter=Dr,this.wrapR=Ji,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Fl{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,o,a,s){let l=r[i+0],c=r[i+1],u=r[i+2],f=r[i+3];const h=o[a+0],d=o[a+1],v=o[a+2],y=o[a+3];if(s===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f;return}if(s===1){e[n+0]=h,e[n+1]=d,e[n+2]=v,e[n+3]=y;return}if(f!==y||l!==h||c!==d||u!==v){let g=1-s;const p=l*h+c*d+u*v+f*y,x=p>=0?1:-1,_=1-p*p;if(_>Number.EPSILON){const b=Math.sqrt(_),M=Math.atan2(b,p*x);g=Math.sin(g*M)/b,s=Math.sin(s*M)/b}const E=s*x;if(l=l*g+h*E,c=c*g+d*E,u=u*g+v*E,f=f*g+y*E,g===1-s){const b=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=b,c*=b,u*=b,f*=b}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f}static multiplyQuaternionsFlat(e,n,r,i,o,a){const s=r[i],l=r[i+1],c=r[i+2],u=r[i+3],f=o[a],h=o[a+1],d=o[a+2],v=o[a+3];return e[n]=s*v+u*f+l*d-c*h,e[n+1]=l*v+u*h+c*f-s*d,e[n+2]=c*v+u*d+s*h-l*f,e[n+3]=u*v-s*f-l*h-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const r=e._x,i=e._y,o=e._z,a=e._order,s=Math.cos,l=Math.sin,c=s(r/2),u=s(i/2),f=s(o/2),h=l(r/2),d=l(i/2),v=l(o/2);switch(a){case"XYZ":this._x=h*u*f+c*d*v,this._y=c*d*f-h*u*v,this._z=c*u*v+h*d*f,this._w=c*u*f-h*d*v;break;case"YXZ":this._x=h*u*f+c*d*v,this._y=c*d*f-h*u*v,this._z=c*u*v-h*d*f,this._w=c*u*f+h*d*v;break;case"ZXY":this._x=h*u*f-c*d*v,this._y=c*d*f+h*u*v,this._z=c*u*v+h*d*f,this._w=c*u*f-h*d*v;break;case"ZYX":this._x=h*u*f-c*d*v,this._y=c*d*f+h*u*v,this._z=c*u*v-h*d*f,this._w=c*u*f+h*d*v;break;case"YZX":this._x=h*u*f+c*d*v,this._y=c*d*f+h*u*v,this._z=c*u*v-h*d*f,this._w=c*u*f-h*d*v;break;case"XZY":this._x=h*u*f-c*d*v,this._y=c*d*f-h*u*v,this._z=c*u*v+h*d*f,this._w=c*u*f+h*d*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],l=n[9],c=n[2],u=n[6],f=n[10],h=r+s+f;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(u-l)*d,this._y=(o-c)*d,this._z=(a-i)*d}else if(r>s&&r>f){const d=2*Math.sqrt(1+r-s-f);this._w=(u-l)/d,this._x=.25*d,this._y=(i+a)/d,this._z=(o+c)/d}else if(s>f){const d=2*Math.sqrt(1+s-r-f);this._w=(o-c)/d,this._x=(i+a)/d,this._y=.25*d,this._z=(l+u)/d}else{const d=2*Math.sqrt(1+f-r-s);this._w=(a-i)/d,this._x=(o+c)/d,this._y=(l+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Sr(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,o=e._z,a=e._w,s=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+a*s+i*c-o*l,this._y=i*u+a*l+o*s-r*c,this._z=o*u+a*c+r*l-i*s,this._w=a*u-r*s-i*l-o*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,a=this._w;let s=a*e._w+r*e._x+i*e._y+o*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=r,this._y=i,this._z=o,this;const l=1-s*s;if(l<=Number.EPSILON){const d=1-n;return this._w=d*a+n*this._w,this._x=d*r+n*this._x,this._y=d*i+n*this._y,this._z=d*o+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,s),f=Math.sin((1-n)*u)/c,h=Math.sin(n*u)/c;return this._w=a*f+this._w*h,this._x=r*f+this._x*h,this._y=i*f+this._y*h,this._z=o*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(o),r*Math.cos(o),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class te{constructor(e=0,n=0,r=0){te.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(ZC.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(ZC.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=e.elements,a=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*a,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*a,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*a,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,o=e.x,a=e.y,s=e.z,l=e.w,c=2*(a*i-s*r),u=2*(s*n-o*i),f=2*(o*r-a*n);return this.x=n+l*c+a*f-s*u,this.y=r+l*u+s*c-o*f,this.z=i+l*f+o*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,o=e.z,a=n.x,s=n.y,l=n.z;return this.x=i*l-o*s,this.y=o*a-r*l,this.z=r*s-i*a,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return yx.copy(this).projectOnVector(e),this.sub(yx)}reflect(e){return this.sub(yx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Sr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const yx=new te,ZC=new Fl;class Vp{constructor(e=new te(1/0,1/0,1/0),n=new te(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(zi.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(zi.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=zi.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let a=0,s=o.count;a<s;a++)e.isMesh===!0?e.getVertexPosition(a,zi):zi.fromBufferAttribute(o,a),zi.applyMatrix4(e.matrixWorld),this.expandByPoint(zi);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Lm.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Lm.copy(r.boundingBox)),Lm.applyMatrix4(e.matrixWorld),this.union(Lm)}const i=e.children;for(let o=0,a=i.length;o<a;o++)this.expandByObject(i[o],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,zi),zi.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(vh),km.subVectors(this.max,vh),vc.subVectors(e.a,vh),yc.subVectors(e.b,vh),_c.subVectors(e.c,vh),La.subVectors(yc,vc),ka.subVectors(_c,yc),Gs.subVectors(vc,_c);let n=[0,-La.z,La.y,0,-ka.z,ka.y,0,-Gs.z,Gs.y,La.z,0,-La.x,ka.z,0,-ka.x,Gs.z,0,-Gs.x,-La.y,La.x,0,-ka.y,ka.x,0,-Gs.y,Gs.x,0];return!_x(n,vc,yc,_c,km)||(n=[1,0,0,0,1,0,0,0,1],!_x(n,vc,yc,_c,km))?!1:(jm.crossVectors(La,ka),n=[jm.x,jm.y,jm.z],_x(n,vc,yc,_c,km))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,zi).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(zi).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Bo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Bo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Bo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Bo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Bo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Bo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Bo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Bo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Bo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Bo=[new te,new te,new te,new te,new te,new te,new te,new te],zi=new te,Lm=new Vp,vc=new te,yc=new te,_c=new te,La=new te,ka=new te,Gs=new te,vh=new te,km=new te,jm=new te,Ws=new te;function _x(t,e,n,r,i){for(let o=0,a=t.length-3;o<=a;o+=3){Ws.fromArray(t,o);const s=i.x*Math.abs(Ws.x)+i.y*Math.abs(Ws.y)+i.z*Math.abs(Ws.z),l=e.dot(Ws),c=n.dot(Ws),u=r.dot(Ws);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>s)return!1}return!0}const mG=new Vp,yh=new te,xx=new te;class g0{constructor(e=new te,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):mG.setFromPoints(e).getCenter(r);let i=0;for(let o=0,a=e.length;o<a;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;yh.subVectors(e,this.center);const n=yh.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(yh,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(xx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(yh.copy(e.center).add(xx)),this.expandByPoint(yh.copy(e.center).sub(xx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const $o=new te,bx=new te,Um=new te,ja=new te,wx=new te,Fm=new te,Sx=new te;class v0{constructor(e=new te,n=new te(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$o)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=$o.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):($o.copy(this.origin).addScaledVector(this.direction,n),$o.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){bx.copy(e).add(n).multiplyScalar(.5),Um.copy(n).sub(e).normalize(),ja.copy(this.origin).sub(bx);const o=e.distanceTo(n)*.5,a=-this.direction.dot(Um),s=ja.dot(this.direction),l=-ja.dot(Um),c=ja.lengthSq(),u=Math.abs(1-a*a);let f,h,d,v;if(u>0)if(f=a*l-s,h=a*s-l,v=o*u,f>=0)if(h>=-v)if(h<=v){const y=1/u;f*=y,h*=y,d=f*(f+a*h+2*s)+h*(a*f+h+2*l)+c}else h=o,f=Math.max(0,-(a*h+s)),d=-f*f+h*(h+2*l)+c;else h=-o,f=Math.max(0,-(a*h+s)),d=-f*f+h*(h+2*l)+c;else h<=-v?(f=Math.max(0,-(-a*o+s)),h=f>0?-o:Math.min(Math.max(-o,-l),o),d=-f*f+h*(h+2*l)+c):h<=v?(f=0,h=Math.min(Math.max(-o,-l),o),d=h*(h+2*l)+c):(f=Math.max(0,-(a*o+s)),h=f>0?o:Math.min(Math.max(-o,-l),o),d=-f*f+h*(h+2*l)+c);else h=a>0?-o:o,f=Math.max(0,-(a*h+s)),d=-f*f+h*(h+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(bx).addScaledVector(Um,h),d}intersectSphere(e,n){$o.subVectors(e.center,this.origin);const r=$o.dot(this.direction),i=$o.dot($o)-r*r,o=e.radius*e.radius;if(i>o)return null;const a=Math.sqrt(o-i),s=r-a,l=r+a;return l<0?null:s<0?this.at(l,n):this.at(s,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,o,a,s,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),u>=0?(o=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(o=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),r>a||o>i||((o>r||isNaN(r))&&(r=o),(a<i||isNaN(i))&&(i=a),f>=0?(s=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(s=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),r>l||s>i)||((s>r||r!==r)&&(r=s),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,$o)!==null}intersectTriangle(e,n,r,i,o){wx.subVectors(n,e),Fm.subVectors(r,e),Sx.crossVectors(wx,Fm);let a=this.direction.dot(Sx),s;if(a>0){if(i)return null;s=1}else if(a<0)s=-1,a=-a;else return null;ja.subVectors(this.origin,e);const l=s*this.direction.dot(Fm.crossVectors(ja,Fm));if(l<0)return null;const c=s*this.direction.dot(wx.cross(ja));if(c<0||l+c>a)return null;const u=-s*ja.dot(Sx);return u<0?null:this.at(u/a,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class In{constructor(e,n,r,i,o,a,s,l,c,u,f,h,d,v,y,g){In.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,a,s,l,c,u,f,h,d,v,y,g)}set(e,n,r,i,o,a,s,l,c,u,f,h,d,v,y,g){const p=this.elements;return p[0]=e,p[4]=n,p[8]=r,p[12]=i,p[1]=o,p[5]=a,p[9]=s,p[13]=l,p[2]=c,p[6]=u,p[10]=f,p[14]=h,p[3]=d,p[7]=v,p[11]=y,p[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new In().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/xc.setFromMatrixColumn(e,0).length(),o=1/xc.setFromMatrixColumn(e,1).length(),a=1/xc.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,o=e.z,a=Math.cos(r),s=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(o),f=Math.sin(o);if(e.order==="XYZ"){const h=a*u,d=a*f,v=s*u,y=s*f;n[0]=l*u,n[4]=-l*f,n[8]=c,n[1]=d+v*c,n[5]=h-y*c,n[9]=-s*l,n[2]=y-h*c,n[6]=v+d*c,n[10]=a*l}else if(e.order==="YXZ"){const h=l*u,d=l*f,v=c*u,y=c*f;n[0]=h+y*s,n[4]=v*s-d,n[8]=a*c,n[1]=a*f,n[5]=a*u,n[9]=-s,n[2]=d*s-v,n[6]=y+h*s,n[10]=a*l}else if(e.order==="ZXY"){const h=l*u,d=l*f,v=c*u,y=c*f;n[0]=h-y*s,n[4]=-a*f,n[8]=v+d*s,n[1]=d+v*s,n[5]=a*u,n[9]=y-h*s,n[2]=-a*c,n[6]=s,n[10]=a*l}else if(e.order==="ZYX"){const h=a*u,d=a*f,v=s*u,y=s*f;n[0]=l*u,n[4]=v*c-d,n[8]=h*c+y,n[1]=l*f,n[5]=y*c+h,n[9]=d*c-v,n[2]=-c,n[6]=s*l,n[10]=a*l}else if(e.order==="YZX"){const h=a*l,d=a*c,v=s*l,y=s*c;n[0]=l*u,n[4]=y-h*f,n[8]=v*f+d,n[1]=f,n[5]=a*u,n[9]=-s*u,n[2]=-c*u,n[6]=d*f+v,n[10]=h-y*f}else if(e.order==="XZY"){const h=a*l,d=a*c,v=s*l,y=s*c;n[0]=l*u,n[4]=-f,n[8]=c*u,n[1]=h*f+y,n[5]=a*u,n[9]=d*f-v,n[2]=v*f-d,n[6]=s*u,n[10]=y*f+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(gG,e,vG)}lookAt(e,n,r){const i=this.elements;return ti.subVectors(e,n),ti.lengthSq()===0&&(ti.z=1),ti.normalize(),Ua.crossVectors(r,ti),Ua.lengthSq()===0&&(Math.abs(r.z)===1?ti.x+=1e-4:ti.z+=1e-4,ti.normalize(),Ua.crossVectors(r,ti)),Ua.normalize(),Vm.crossVectors(ti,Ua),i[0]=Ua.x,i[4]=Vm.x,i[8]=ti.x,i[1]=Ua.y,i[5]=Vm.y,i[9]=ti.y,i[2]=Ua.z,i[6]=Vm.z,i[10]=ti.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,a=r[0],s=r[4],l=r[8],c=r[12],u=r[1],f=r[5],h=r[9],d=r[13],v=r[2],y=r[6],g=r[10],p=r[14],x=r[3],_=r[7],E=r[11],b=r[15],M=i[0],S=i[4],A=i[8],T=i[12],P=i[1],R=i[5],N=i[9],I=i[13],D=i[2],L=i[6],q=i[10],$=i[14],V=i[3],X=i[7],K=i[11],z=i[15];return o[0]=a*M+s*P+l*D+c*V,o[4]=a*S+s*R+l*L+c*X,o[8]=a*A+s*N+l*q+c*K,o[12]=a*T+s*I+l*$+c*z,o[1]=u*M+f*P+h*D+d*V,o[5]=u*S+f*R+h*L+d*X,o[9]=u*A+f*N+h*q+d*K,o[13]=u*T+f*I+h*$+d*z,o[2]=v*M+y*P+g*D+p*V,o[6]=v*S+y*R+g*L+p*X,o[10]=v*A+y*N+g*q+p*K,o[14]=v*T+y*I+g*$+p*z,o[3]=x*M+_*P+E*D+b*V,o[7]=x*S+_*R+E*L+b*X,o[11]=x*A+_*N+E*q+b*K,o[15]=x*T+_*I+E*$+b*z,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],o=e[12],a=e[1],s=e[5],l=e[9],c=e[13],u=e[2],f=e[6],h=e[10],d=e[14],v=e[3],y=e[7],g=e[11],p=e[15];return v*(+o*l*f-i*c*f-o*s*h+r*c*h+i*s*d-r*l*d)+y*(+n*l*d-n*c*h+o*a*h-i*a*d+i*c*u-o*l*u)+g*(+n*c*f-n*s*d-o*a*f+r*a*d+o*s*u-r*c*u)+p*(-i*s*u-n*l*f+n*s*h+i*a*f-r*a*h+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],d=e[11],v=e[12],y=e[13],g=e[14],p=e[15],x=f*g*c-y*h*c+y*l*d-s*g*d-f*l*p+s*h*p,_=v*h*c-u*g*c-v*l*d+a*g*d+u*l*p-a*h*p,E=u*y*c-v*f*c+v*s*d-a*y*d-u*s*p+a*f*p,b=v*f*l-u*y*l-v*s*h+a*y*h+u*s*g-a*f*g,M=n*x+r*_+i*E+o*b;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/M;return e[0]=x*S,e[1]=(y*h*o-f*g*o-y*i*d+r*g*d+f*i*p-r*h*p)*S,e[2]=(s*g*o-y*l*o+y*i*c-r*g*c-s*i*p+r*l*p)*S,e[3]=(f*l*o-s*h*o-f*i*c+r*h*c+s*i*d-r*l*d)*S,e[4]=_*S,e[5]=(u*g*o-v*h*o+v*i*d-n*g*d-u*i*p+n*h*p)*S,e[6]=(v*l*o-a*g*o-v*i*c+n*g*c+a*i*p-n*l*p)*S,e[7]=(a*h*o-u*l*o+u*i*c-n*h*c-a*i*d+n*l*d)*S,e[8]=E*S,e[9]=(v*f*o-u*y*o-v*r*d+n*y*d+u*r*p-n*f*p)*S,e[10]=(a*y*o-v*s*o+v*r*c-n*y*c-a*r*p+n*s*p)*S,e[11]=(u*s*o-a*f*o-u*r*c+n*f*c+a*r*d-n*s*d)*S,e[12]=b*S,e[13]=(u*y*i-v*f*i+v*r*h-n*y*h-u*r*g+n*f*g)*S,e[14]=(v*s*i-a*y*i-v*r*l+n*y*l+a*r*g-n*s*g)*S,e[15]=(a*f*i-u*s*i+u*r*l-n*f*l-a*r*h+n*s*h)*S,this}scale(e){const n=this.elements,r=e.x,i=e.y,o=e.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),o=1-r,a=e.x,s=e.y,l=e.z,c=o*a,u=o*s;return this.set(c*a+r,c*s-i*l,c*l+i*s,0,c*s+i*l,u*s+r,u*l-i*a,0,c*l-i*s,u*l+i*a,o*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,o,a){return this.set(1,r,o,0,e,1,a,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,o=n._x,a=n._y,s=n._z,l=n._w,c=o+o,u=a+a,f=s+s,h=o*c,d=o*u,v=o*f,y=a*u,g=a*f,p=s*f,x=l*c,_=l*u,E=l*f,b=r.x,M=r.y,S=r.z;return i[0]=(1-(y+p))*b,i[1]=(d+E)*b,i[2]=(v-_)*b,i[3]=0,i[4]=(d-E)*M,i[5]=(1-(h+p))*M,i[6]=(g+x)*M,i[7]=0,i[8]=(v+_)*S,i[9]=(g-x)*S,i[10]=(1-(h+y))*S,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let o=xc.set(i[0],i[1],i[2]).length();const a=xc.set(i[4],i[5],i[6]).length(),s=xc.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],Hi.copy(this);const c=1/o,u=1/a,f=1/s;return Hi.elements[0]*=c,Hi.elements[1]*=c,Hi.elements[2]*=c,Hi.elements[4]*=u,Hi.elements[5]*=u,Hi.elements[6]*=u,Hi.elements[8]*=f,Hi.elements[9]*=f,Hi.elements[10]*=f,n.setFromRotationMatrix(Hi),r.x=o,r.y=a,r.z=s,this}makePerspective(e,n,r,i,o,a,s=ea){const l=this.elements,c=2*o/(n-e),u=2*o/(r-i),f=(n+e)/(n-e),h=(r+i)/(r-i);let d,v;if(s===ea)d=-(a+o)/(a-o),v=-2*a*o/(a-o);else if(s===Av)d=-a/(a-o),v=-a*o/(a-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,o,a,s=ea){const l=this.elements,c=1/(n-e),u=1/(r-i),f=1/(a-o),h=(n+e)*c,d=(r+i)*u;let v,y;if(s===ea)v=(a+o)*f,y=-2*f;else if(s===Av)v=o*f,y=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=y,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const xc=new te,Hi=new In,gG=new te(0,0,0),vG=new te(1,1,1),Ua=new te,Vm=new te,ti=new te,JC=new In,e2=new Fl;class y0{constructor(e=0,n=0,r=0,i=y0.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,o=i[0],a=i[4],s=i[8],l=i[1],c=i[5],u=i[9],f=i[2],h=i[6],d=i[10];switch(n){case"XYZ":this._y=Math.asin(Sr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Sr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(Sr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-Sr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Sr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-Sr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return JC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(JC,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return e2.setFromEuler(this),this.setFromQuaternion(e2,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}y0.DEFAULT_ORDER="XYZ";class rT{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let yG=0;const t2=new te,bc=new Fl,zo=new In,Bm=new te,_h=new te,_G=new te,xG=new Fl,n2=new te(1,0,0),r2=new te(0,1,0),i2=new te(0,0,1),bG={type:"added"},wG={type:"removed"};class cr extends Kl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:yG++}),this.uuid=Mf(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=cr.DEFAULT_UP.clone();const e=new te,n=new y0,r=new Fl,i=new te(1,1,1);function o(){r.setFromEuler(n,!1)}function a(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new In},normalMatrix:{value:new wt}}),this.matrix=new In,this.matrixWorld=new In,this.matrixAutoUpdate=cr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new rT,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return bc.setFromAxisAngle(e,n),this.quaternion.multiply(bc),this}rotateOnWorldAxis(e,n){return bc.setFromAxisAngle(e,n),this.quaternion.premultiply(bc),this}rotateX(e){return this.rotateOnAxis(n2,e)}rotateY(e){return this.rotateOnAxis(r2,e)}rotateZ(e){return this.rotateOnAxis(i2,e)}translateOnAxis(e,n){return t2.copy(e).applyQuaternion(this.quaternion),this.position.add(t2.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(n2,e)}translateY(e){return this.translateOnAxis(r2,e)}translateZ(e){return this.translateOnAxis(i2,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(zo.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?Bm.copy(e):Bm.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),_h.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?zo.lookAt(_h,Bm,this.up):zo.lookAt(Bm,_h,this.up),this.quaternion.setFromRotationMatrix(zo),i&&(zo.extractRotation(i.matrixWorld),bc.setFromRotationMatrix(zo),this.quaternion.premultiply(bc.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(bG)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(wG)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),zo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),zo.multiply(e.parent.matrixWorld)),e.applyMatrix4(zo),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,n);if(a!==void 0)return a}}getObjectsByProperty(e,n){let r=[];this[e]===n&&r.push(this);for(let i=0,o=this.children.length;i<o;i++){const a=this.children[i].getObjectsByProperty(e,n);a.length>0&&(r=r.concat(a))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_h,e,_G),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_h,xG,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const o=n[r];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let o=0,a=i.length;o<a;o++){const s=i[o];s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function o(s,l){return s[l.uuid]===void 0&&(s[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const l=s.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];o(e.shapes,f)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let l=0,c=this.material.length;l<c;l++)s.push(o(e.materials,this.material[l]));i.material=s}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++){const l=this.animations[s];i.animations.push(o(e.animations,l))}}if(n){const s=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),f=a(e.shapes),h=a(e.skeletons),d=a(e.animations),v=a(e.nodes);s.length>0&&(r.geometries=s),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),f.length>0&&(r.shapes=f),h.length>0&&(r.skeletons=h),d.length>0&&(r.animations=d),v.length>0&&(r.nodes=v)}return r.object=i,r;function a(s){const l=[];for(const c in s){const u=s[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}cr.DEFAULT_UP=new te(0,1,0);cr.DEFAULT_MATRIX_AUTO_UPDATE=!0;cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Gi=new te,Ho=new te,Ex=new te,Go=new te,wc=new te,Sc=new te,o2=new te,Tx=new te,Ax=new te,Mx=new te;let $m=!1;class Zi{constructor(e=new te,n=new te,r=new te){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Gi.subVectors(e,n),i.cross(Gi);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,n,r,i,o){Gi.subVectors(i,n),Ho.subVectors(r,n),Ex.subVectors(e,n);const a=Gi.dot(Gi),s=Gi.dot(Ho),l=Gi.dot(Ex),c=Ho.dot(Ho),u=Ho.dot(Ex),f=a*c-s*s;if(f===0)return o.set(-2,-1,-1);const h=1/f,d=(c*l-s*u)*h,v=(a*u-s*l)*h;return o.set(1-d-v,v,d)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Go),Go.x>=0&&Go.y>=0&&Go.x+Go.y<=1}static getUV(e,n,r,i,o,a,s,l){return $m===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),$m=!0),this.getInterpolation(e,n,r,i,o,a,s,l)}static getInterpolation(e,n,r,i,o,a,s,l){return this.getBarycoord(e,n,r,i,Go),l.setScalar(0),l.addScaledVector(o,Go.x),l.addScaledVector(a,Go.y),l.addScaledVector(s,Go.z),l}static isFrontFacing(e,n,r,i){return Gi.subVectors(r,n),Ho.subVectors(e,n),Gi.cross(Ho).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Gi.subVectors(this.c,this.b),Ho.subVectors(this.a,this.b),Gi.cross(Ho).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Zi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Zi.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,o){return $m===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),$m=!0),Zi.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}getInterpolation(e,n,r,i,o){return Zi.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}containsPoint(e){return Zi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Zi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,o=this.c;let a,s;wc.subVectors(i,r),Sc.subVectors(o,r),Tx.subVectors(e,r);const l=wc.dot(Tx),c=Sc.dot(Tx);if(l<=0&&c<=0)return n.copy(r);Ax.subVectors(e,i);const u=wc.dot(Ax),f=Sc.dot(Ax);if(u>=0&&f<=u)return n.copy(i);const h=l*f-u*c;if(h<=0&&l>=0&&u<=0)return a=l/(l-u),n.copy(r).addScaledVector(wc,a);Mx.subVectors(e,o);const d=wc.dot(Mx),v=Sc.dot(Mx);if(v>=0&&d<=v)return n.copy(o);const y=d*c-l*v;if(y<=0&&c>=0&&v<=0)return s=c/(c-v),n.copy(r).addScaledVector(Sc,s);const g=u*v-d*f;if(g<=0&&f-u>=0&&d-v>=0)return o2.subVectors(o,i),s=(f-u)/(f-u+(d-v)),n.copy(i).addScaledVector(o2,s);const p=1/(g+y+h);return a=y*p,s=h*p,n.copy(r).addScaledVector(wc,a).addScaledVector(Sc,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Fj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fa={h:0,s:0,l:0},zm={h:0,s:0,l:0};function Px(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}let Rt=class{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=jn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,zt.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=zt.workingColorSpace){return this.r=e,this.g=n,this.b=r,zt.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=zt.workingColorSpace){if(e=nT(e,1),n=Sr(n,0,1),r=Sr(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,a=2*r-o;this.r=Px(a,o,e+1/3),this.g=Px(a,o,e),this.b=Px(a,o,e-1/3)}return zt.toWorkingColorSpace(this,i),this}setStyle(e,n=jn){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const a=i[1],s=i[2];switch(a){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],a=o.length;if(a===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(a===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=jn){const r=Fj[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=xu(e.r),this.g=xu(e.g),this.b=xu(e.b),this}copyLinearToSRGB(e){return this.r=gx(e.r),this.g=gx(e.g),this.b=gx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=jn){return zt.fromWorkingColorSpace(vr.copy(this),e),Math.round(Sr(vr.r*255,0,255))*65536+Math.round(Sr(vr.g*255,0,255))*256+Math.round(Sr(vr.b*255,0,255))}getHexString(e=jn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=zt.workingColorSpace){zt.fromWorkingColorSpace(vr.copy(this),n);const r=vr.r,i=vr.g,o=vr.b,a=Math.max(r,i,o),s=Math.min(r,i,o);let l,c;const u=(s+a)/2;if(s===a)l=0,c=0;else{const f=a-s;switch(c=u<=.5?f/(a+s):f/(2-a-s),a){case r:l=(i-o)/f+(i<o?6:0);break;case i:l=(o-r)/f+2;break;case o:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=zt.workingColorSpace){return zt.fromWorkingColorSpace(vr.copy(this),n),e.r=vr.r,e.g=vr.g,e.b=vr.b,e}getStyle(e=jn){zt.fromWorkingColorSpace(vr.copy(this),e);const n=vr.r,r=vr.g,i=vr.b;return e!==jn?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Fa),this.setHSL(Fa.h+e,Fa.s+n,Fa.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Fa),e.getHSL(zm);const r=td(Fa.h,zm.h,n),i=td(Fa.s,zm.s,n),o=td(Fa.l,zm.l,n);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*n+o[3]*r+o[6]*i,this.g=o[1]*n+o[4]*r+o[7]*i,this.b=o[2]*n+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const vr=new Rt;Rt.NAMES=Fj;let SG=0;class Pf extends Kl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:SG++}),this.uuid=Mf(),this.name="",this.type="Material",this.blending=_u,this.side=bs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=N1,this.blendDst=D1,this.blendEquation=ll,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Rt(0,0,0),this.blendAlpha=0,this.depthFunc=wv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=GC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=mc,this.stencilZFail=mc,this.stencilZPass=mc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==_u&&(r.blending=this.blending),this.side!==bs&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==N1&&(r.blendSrc=this.blendSrc),this.blendDst!==D1&&(r.blendDst=this.blendDst),this.blendEquation!==ll&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==wv&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==GC&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==mc&&(r.stencilFail=this.stencilFail),this.stencilZFail!==mc&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==mc&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const a=[];for(const s in o){const l=o[s];delete l.metadata,a.push(l)}return a}if(n){const o=i(e.textures),a=i(e.images);o.length>0&&(r.textures=o),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class iT extends Pf{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=JE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Mn=new te,Hm=new gt;class So{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=WC,this.updateRange={offset:0,count:-1},this.gpuType=Ja,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)Hm.fromBufferAttribute(this,n),Hm.applyMatrix3(e),this.setXY(n,Hm.x,Hm.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Mn.fromBufferAttribute(this,n),Mn.applyMatrix3(e),this.setXYZ(n,Mn.x,Mn.y,Mn.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Mn.fromBufferAttribute(this,n),Mn.applyMatrix4(e),this.setXYZ(n,Mn.x,Mn.y,Mn.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Mn.fromBufferAttribute(this,n),Mn.applyNormalMatrix(e),this.setXYZ(n,Mn.x,Mn.y,Mn.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Mn.fromBufferAttribute(this,n),Mn.transformDirection(e),this.setXYZ(n,Mn.x,Mn.y,Mn.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=jc(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Rr(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=jc(n,this.array)),n}setX(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=jc(n,this.array)),n}setY(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=jc(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=jc(n,this.array)),n}setW(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array),o=Rr(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==WC&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class Vj extends So{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class Bj extends So{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Di extends So{constructor(e,n,r){super(new Float32Array(e),n,r)}}let EG=0;const _i=new In,Cx=new cr,Ec=new te,ni=new Vp,xh=new Vp,qn=new te;class Lo extends Kl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:EG++}),this.uuid=Mf(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Lj(e)?Bj:Vj)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new wt().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return _i.makeRotationFromQuaternion(e),this.applyMatrix4(_i),this}rotateX(e){return _i.makeRotationX(e),this.applyMatrix4(_i),this}rotateY(e){return _i.makeRotationY(e),this.applyMatrix4(_i),this}rotateZ(e){return _i.makeRotationZ(e),this.applyMatrix4(_i),this}translate(e,n,r){return _i.makeTranslation(e,n,r),this.applyMatrix4(_i),this}scale(e,n,r){return _i.makeScale(e,n,r),this.applyMatrix4(_i),this}lookAt(e){return Cx.lookAt(e),Cx.updateMatrix(),this.applyMatrix4(Cx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ec).negate(),this.translate(Ec.x,Ec.y,Ec.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Di(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vp);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new te(-1/0,-1/0,-1/0),new te(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const o=n[r];ni.setFromBufferAttribute(o),this.morphTargetsRelative?(qn.addVectors(this.boundingBox.min,ni.min),this.boundingBox.expandByPoint(qn),qn.addVectors(this.boundingBox.max,ni.max),this.boundingBox.expandByPoint(qn)):(this.boundingBox.expandByPoint(ni.min),this.boundingBox.expandByPoint(ni.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new g0);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new te,1/0);return}if(e){const r=this.boundingSphere.center;if(ni.setFromBufferAttribute(e),n)for(let o=0,a=n.length;o<a;o++){const s=n[o];xh.setFromBufferAttribute(s),this.morphTargetsRelative?(qn.addVectors(ni.min,xh.min),ni.expandByPoint(qn),qn.addVectors(ni.max,xh.max),ni.expandByPoint(qn)):(ni.expandByPoint(xh.min),ni.expandByPoint(xh.max))}ni.getCenter(r);let i=0;for(let o=0,a=e.count;o<a;o++)qn.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(qn));if(n)for(let o=0,a=n.length;o<a;o++){const s=n[o],l=this.morphTargetsRelative;for(let c=0,u=s.count;c<u;c++)qn.fromBufferAttribute(s,c),l&&(Ec.fromBufferAttribute(e,c),qn.add(Ec)),i=Math.max(i,r.distanceToSquared(qn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,o=n.normal.array,a=n.uv.array,s=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new So(new Float32Array(4*s),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let P=0;P<s;P++)c[P]=new te,u[P]=new te;const f=new te,h=new te,d=new te,v=new gt,y=new gt,g=new gt,p=new te,x=new te;function _(P,R,N){f.fromArray(i,P*3),h.fromArray(i,R*3),d.fromArray(i,N*3),v.fromArray(a,P*2),y.fromArray(a,R*2),g.fromArray(a,N*2),h.sub(f),d.sub(f),y.sub(v),g.sub(v);const I=1/(y.x*g.y-g.x*y.y);isFinite(I)&&(p.copy(h).multiplyScalar(g.y).addScaledVector(d,-y.y).multiplyScalar(I),x.copy(d).multiplyScalar(y.x).addScaledVector(h,-g.x).multiplyScalar(I),c[P].add(p),c[R].add(p),c[N].add(p),u[P].add(x),u[R].add(x),u[N].add(x))}let E=this.groups;E.length===0&&(E=[{start:0,count:r.length}]);for(let P=0,R=E.length;P<R;++P){const N=E[P],I=N.start,D=N.count;for(let L=I,q=I+D;L<q;L+=3)_(r[L+0],r[L+1],r[L+2])}const b=new te,M=new te,S=new te,A=new te;function T(P){S.fromArray(o,P*3),A.copy(S);const R=c[P];b.copy(R),b.sub(S.multiplyScalar(S.dot(R))).normalize(),M.crossVectors(A,R);const I=M.dot(u[P])<0?-1:1;l[P*4]=b.x,l[P*4+1]=b.y,l[P*4+2]=b.z,l[P*4+3]=I}for(let P=0,R=E.length;P<R;++P){const N=E[P],I=N.start,D=N.count;for(let L=I,q=I+D;L<q;L+=3)T(r[L+0]),T(r[L+1]),T(r[L+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new So(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let h=0,d=r.count;h<d;h++)r.setXYZ(h,0,0,0);const i=new te,o=new te,a=new te,s=new te,l=new te,c=new te,u=new te,f=new te;if(e)for(let h=0,d=e.count;h<d;h+=3){const v=e.getX(h+0),y=e.getX(h+1),g=e.getX(h+2);i.fromBufferAttribute(n,v),o.fromBufferAttribute(n,y),a.fromBufferAttribute(n,g),u.subVectors(a,o),f.subVectors(i,o),u.cross(f),s.fromBufferAttribute(r,v),l.fromBufferAttribute(r,y),c.fromBufferAttribute(r,g),s.add(u),l.add(u),c.add(u),r.setXYZ(v,s.x,s.y,s.z),r.setXYZ(y,l.x,l.y,l.z),r.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,d=n.count;h<d;h+=3)i.fromBufferAttribute(n,h+0),o.fromBufferAttribute(n,h+1),a.fromBufferAttribute(n,h+2),u.subVectors(a,o),f.subVectors(i,o),u.cross(f),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)qn.fromBufferAttribute(e,n),qn.normalize(),e.setXYZ(n,qn.x,qn.y,qn.z)}toNonIndexed(){function e(s,l){const c=s.array,u=s.itemSize,f=s.normalized,h=new c.constructor(l.length*u);let d=0,v=0;for(let y=0,g=l.length;y<g;y++){s.isInterleavedBufferAttribute?d=l[y]*s.data.stride+s.offset:d=l[y]*u;for(let p=0;p<u;p++)h[v++]=c[d++]}return new So(h,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Lo,r=this.index.array,i=this.attributes;for(const s in i){const l=i[s],c=e(l,r);n.setAttribute(s,c)}const o=this.morphAttributes;for(const s in o){const l=[],c=o[s];for(let u=0,f=c.length;u<f;u++){const h=c[u],d=e(h,r);l.push(d)}n.morphAttributes[s]=l}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let s=0,l=a.length;s<l;s++){const c=a[s];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let o=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,h=c.length;f<h;f++){const d=c[f];u.push(d.toJSON(e.data))}u.length>0&&(i[l]=u,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return s!==null&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const o=e.morphAttributes;for(const c in o){const u=[],f=o[c];for(let h=0,d=f.length;h<d;h++)u.push(f[h].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const f=a[c];this.addGroup(f.start,f.count,f.materialIndex)}const s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const a2=new In,qs=new v0,Gm=new g0,s2=new te,Tc=new te,Ac=new te,Mc=new te,Rx=new te,Wm=new te,qm=new gt,Xm=new gt,Km=new gt,l2=new te,c2=new te,u2=new te,Ym=new te,Qm=new te;class Gr extends cr{constructor(e=new Lo,n=new iT){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,a=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const s=this.morphTargetInfluences;if(o&&s){Wm.set(0,0,0);for(let l=0,c=o.length;l<c;l++){const u=s[l],f=o[l];u!==0&&(Rx.fromBufferAttribute(f,e),a?Wm.addScaledVector(Rx,u):Wm.addScaledVector(Rx.sub(n),u))}n.add(Wm)}return n}raycast(e,n){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Gm.copy(r.boundingSphere),Gm.applyMatrix4(o),qs.copy(e.ray).recast(e.near),!(Gm.containsPoint(qs.origin)===!1&&(qs.intersectSphere(Gm,s2)===null||qs.origin.distanceToSquared(s2)>(e.far-e.near)**2))&&(a2.copy(o).invert(),qs.copy(e.ray).applyMatrix4(a2),!(r.boundingBox!==null&&qs.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,qs)))}_computeIntersections(e,n,r){let i;const o=this.geometry,a=this.material,s=o.index,l=o.attributes.position,c=o.attributes.uv,u=o.attributes.uv1,f=o.attributes.normal,h=o.groups,d=o.drawRange;if(s!==null)if(Array.isArray(a))for(let v=0,y=h.length;v<y;v++){const g=h[v],p=a[g.materialIndex],x=Math.max(g.start,d.start),_=Math.min(s.count,Math.min(g.start+g.count,d.start+d.count));for(let E=x,b=_;E<b;E+=3){const M=s.getX(E),S=s.getX(E+1),A=s.getX(E+2);i=Zm(this,p,e,r,c,u,f,M,S,A),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const v=Math.max(0,d.start),y=Math.min(s.count,d.start+d.count);for(let g=v,p=y;g<p;g+=3){const x=s.getX(g),_=s.getX(g+1),E=s.getX(g+2);i=Zm(this,a,e,r,c,u,f,x,_,E),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let v=0,y=h.length;v<y;v++){const g=h[v],p=a[g.materialIndex],x=Math.max(g.start,d.start),_=Math.min(l.count,Math.min(g.start+g.count,d.start+d.count));for(let E=x,b=_;E<b;E+=3){const M=E,S=E+1,A=E+2;i=Zm(this,p,e,r,c,u,f,M,S,A),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const v=Math.max(0,d.start),y=Math.min(l.count,d.start+d.count);for(let g=v,p=y;g<p;g+=3){const x=g,_=g+1,E=g+2;i=Zm(this,a,e,r,c,u,f,x,_,E),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}}}function TG(t,e,n,r,i,o,a,s){let l;if(e.side===Vr?l=r.intersectTriangle(a,o,i,!0,s):l=r.intersectTriangle(i,o,a,e.side===bs,s),l===null)return null;Qm.copy(s),Qm.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Qm);return c<n.near||c>n.far?null:{distance:c,point:Qm.clone(),object:t}}function Zm(t,e,n,r,i,o,a,s,l,c){t.getVertexPosition(s,Tc),t.getVertexPosition(l,Ac),t.getVertexPosition(c,Mc);const u=TG(t,e,n,r,Tc,Ac,Mc,Ym);if(u){i&&(qm.fromBufferAttribute(i,s),Xm.fromBufferAttribute(i,l),Km.fromBufferAttribute(i,c),u.uv=Zi.getInterpolation(Ym,Tc,Ac,Mc,qm,Xm,Km,new gt)),o&&(qm.fromBufferAttribute(o,s),Xm.fromBufferAttribute(o,l),Km.fromBufferAttribute(o,c),u.uv1=Zi.getInterpolation(Ym,Tc,Ac,Mc,qm,Xm,Km,new gt),u.uv2=u.uv1),a&&(l2.fromBufferAttribute(a,s),c2.fromBufferAttribute(a,l),u2.fromBufferAttribute(a,c),u.normal=Zi.getInterpolation(Ym,Tc,Ac,Mc,l2,c2,u2,new te),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const f={a:s,b:l,c,normal:new te,materialIndex:0};Zi.getNormal(Tc,Ac,Mc,f.normal),u.face=f}return u}class Bp extends Lo{constructor(e=1,n=1,r=1,i=1,o=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:a};const s=this;i=Math.floor(i),o=Math.floor(o),a=Math.floor(a);const l=[],c=[],u=[],f=[];let h=0,d=0;v("z","y","x",-1,-1,r,n,e,a,o,0),v("z","y","x",1,-1,r,n,-e,a,o,1),v("x","z","y",1,1,e,r,n,i,a,2),v("x","z","y",1,-1,e,r,-n,i,a,3),v("x","y","z",1,-1,e,n,r,i,o,4),v("x","y","z",-1,-1,e,n,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new Di(c,3)),this.setAttribute("normal",new Di(u,3)),this.setAttribute("uv",new Di(f,2));function v(y,g,p,x,_,E,b,M,S,A,T){const P=E/S,R=b/A,N=E/2,I=b/2,D=M/2,L=S+1,q=A+1;let $=0,V=0;const X=new te;for(let K=0;K<q;K++){const z=K*R-I;for(let W=0;W<L;W++){const ee=W*P-N;X[y]=ee*x,X[g]=z*_,X[p]=D,c.push(X.x,X.y,X.z),X[y]=0,X[g]=0,X[p]=M>0?1:-1,u.push(X.x,X.y,X.z),f.push(W/S),f.push(1-K/A),$+=1}}for(let K=0;K<A;K++)for(let z=0;z<S;z++){const W=h+z+L*K,ee=h+z+L*(K+1),me=h+(z+1)+L*(K+1),_e=h+(z+1)+L*K;l.push(W,ee,_e),l.push(ee,me,_e),V+=6}s.addGroup(d,V,T),d+=V,h+=$}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ju(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Or(t){const e={};for(let n=0;n<t.length;n++){const r=ju(t[n]);for(const i in r)e[i]=r[i]}return e}function AG(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function $j(t){return t.getRenderTarget()===null?t.outputColorSpace:zt.workingColorSpace}const MG={clone:ju,merge:Or};var PG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,CG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class _a extends Pf{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=PG,this.fragmentShader=CG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ju(e.uniforms),this.uniformsGroups=AG(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?n.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?n.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[i]={type:"m4",value:a.toArray()}:n.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class zj extends cr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new In,this.projectionMatrix=new In,this.projectionMatrixInverse=new In,this.coordinateSystem=ea}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class si extends zj{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=jd*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ed*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return jd*2*Math.atan(Math.tan(ed*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,o,a){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(ed*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;o+=a.offsetX*i/l,n-=a.offsetY*r/c,i*=a.width/l,r*=a.height/c}const s=this.filmOffset;s!==0&&(o+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Pc=-90,Cc=1;class RG extends cr{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new si(Pc,Cc,e,n);i.layers=this.layers,this.add(i);const o=new si(Pc,Cc,e,n);o.layers=this.layers,this.add(o);const a=new si(Pc,Cc,e,n);a.layers=this.layers,this.add(a);const s=new si(Pc,Cc,e,n);s.layers=this.layers,this.add(s);const l=new si(Pc,Cc,e,n);l.layers=this.layers,this.add(l);const c=new si(Pc,Cc,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,o,a,s,l]=n;for(const c of n)this.remove(c);if(e===ea)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Av)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,a,s,l,c,u]=this.children,f=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const y=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,o),e.setRenderTarget(r,1,i),e.render(n,a),e.setRenderTarget(r,2,i),e.render(n,s),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=y,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(f,h,d),e.xr.enabled=v,r.texture.needsPMREMUpdate=!0}}class Hj extends Qr{constructor(e,n,r,i,o,a,s,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:Du,super(e,n,r,i,o,a,s,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class OG extends Ul{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&(nd("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Ml?jn:Pi),this.texture=new Hj(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Mi}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Bp(5,5,5),o=new _a({name:"CubemapFromEquirect",uniforms:ju(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Vr,blending:fs});o.uniforms.tEquirect.value=n;const a=new Gr(i,o),s=n.minFilter;return n.minFilter===Ld&&(n.minFilter=Mi),new RG(1,10,this).update(e,a),n.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,n,r,i){const o=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(n,r,i);e.setRenderTarget(o)}}const Ox=new te,IG=new te,NG=new wt;class Ga{constructor(e=new te(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=Ox.subVectors(r,n).cross(IG.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(Ox),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:n.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||NG.getNormalMatrix(e),i=this.coplanarPoint(Ox).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Xs=new g0,Jm=new te;class oT{constructor(e=new Ga,n=new Ga,r=new Ga,i=new Ga,o=new Ga,a=new Ga){this.planes=[e,n,r,i,o,a]}set(e,n,r,i,o,a){const s=this.planes;return s[0].copy(e),s[1].copy(n),s[2].copy(r),s[3].copy(i),s[4].copy(o),s[5].copy(a),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=ea){const r=this.planes,i=e.elements,o=i[0],a=i[1],s=i[2],l=i[3],c=i[4],u=i[5],f=i[6],h=i[7],d=i[8],v=i[9],y=i[10],g=i[11],p=i[12],x=i[13],_=i[14],E=i[15];if(r[0].setComponents(l-o,h-c,g-d,E-p).normalize(),r[1].setComponents(l+o,h+c,g+d,E+p).normalize(),r[2].setComponents(l+a,h+u,g+v,E+x).normalize(),r[3].setComponents(l-a,h-u,g-v,E-x).normalize(),r[4].setComponents(l-s,h-f,g-y,E-_).normalize(),n===ea)r[5].setComponents(l+s,h+f,g+y,E+_).normalize();else if(n===Av)r[5].setComponents(s,f,y,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Xs.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Xs.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Xs)}intersectsSprite(e){return Xs.center.set(0,0,0),Xs.radius=.7071067811865476,Xs.applyMatrix4(e.matrixWorld),this.intersectsSphere(Xs)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(Jm.x=i.normal.x>0?e.max.x:e.min.x,Jm.y=i.normal.y>0?e.max.y:e.min.y,Jm.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Jm)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Gj(){let t=null,e=!1,n=null,r=null;function i(o,a){n(o,a),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function DG(t,e){const n=e.isWebGL2,r=new WeakMap;function i(c,u){const f=c.array,h=c.usage,d=t.createBuffer();t.bindBuffer(u,d),t.bufferData(u,f,h),c.onUploadCallback();let v;if(f instanceof Float32Array)v=t.FLOAT;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)v=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=t.UNSIGNED_SHORT;else if(f instanceof Int16Array)v=t.SHORT;else if(f instanceof Uint32Array)v=t.UNSIGNED_INT;else if(f instanceof Int32Array)v=t.INT;else if(f instanceof Int8Array)v=t.BYTE;else if(f instanceof Uint8Array)v=t.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)v=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:d,type:v,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}function o(c,u,f){const h=u.array,d=u.updateRange;t.bindBuffer(f,c),d.count===-1?t.bufferSubData(f,0,h):(n?t.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count):t.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h.subarray(d.offset,d.offset+d.count)),d.count=-1),u.onUploadCallback()}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function s(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(t.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const h=r.get(c);(!h||h.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=r.get(c);f===void 0?r.set(c,i(c,u)):f.version<c.version&&(o(f.buffer,c,u),f.version=c.version)}return{get:a,remove:s,update:l}}class aT extends Lo{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const o=e/2,a=n/2,s=Math.floor(r),l=Math.floor(i),c=s+1,u=l+1,f=e/s,h=n/l,d=[],v=[],y=[],g=[];for(let p=0;p<u;p++){const x=p*h-a;for(let _=0;_<c;_++){const E=_*f-o;v.push(E,-x,0),y.push(0,0,1),g.push(_/s),g.push(1-p/l)}}for(let p=0;p<l;p++)for(let x=0;x<s;x++){const _=x+c*p,E=x+c*(p+1),b=x+1+c*(p+1),M=x+1+c*p;d.push(_,E,M),d.push(E,b,M)}this.setIndex(d),this.setAttribute("position",new Di(v,3)),this.setAttribute("normal",new Di(y,3)),this.setAttribute("uv",new Di(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new aT(e.width,e.height,e.widthSegments,e.heightSegments)}}var LG=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,kG=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,jG=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,UG=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,FG=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,VG=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,BG=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,$G=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,zG=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,HG=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,GG=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,WG=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,qG=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,XG=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,KG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,YG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,QG=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,ZG=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,JG=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,e8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,t8=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,n8=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,r8=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,i8=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,o8=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,a8=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,s8=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,l8=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,c8="gl_FragColor = linearToOutputTexel( gl_FragColor );",u8=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,f8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,h8=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,d8=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,p8=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,m8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,g8=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,v8=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,y8=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,_8=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,x8=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,b8=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,w8=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,S8=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,E8=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,T8=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,A8=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,M8=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,P8=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,C8=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,R8=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,O8=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,I8=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,N8=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,D8=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,L8=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,k8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,j8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,U8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,F8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,V8=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,B8=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,$8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,z8=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,H8=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,G8=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,W8=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,q8=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,X8=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,K8=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Y8=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Q8=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Z8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,J8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,eW=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,tW=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,nW=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,rW=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,iW=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,oW=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,aW=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,sW=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,lW=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,cW=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,uW=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,fW=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,hW=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,dW=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,pW=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,mW=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,gW=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,vW=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,yW=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,_W=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,xW=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,bW=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,wW=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,SW=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,EW=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,TW=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,AW=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,MW=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,PW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,CW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,RW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,OW=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const IW=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,NW=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,DW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,LW=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,kW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,jW=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,UW=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,FW=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,VW=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,BW=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,$W=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,zW=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,HW=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,GW=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,WW=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,qW=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XW=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KW=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YW=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,QW=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZW=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,JW=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,e7=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,t7=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,n7=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,r7=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,i7=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,o7=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,a7=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,s7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,l7=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,c7=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,u7=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,f7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,xt={alphahash_fragment:LG,alphahash_pars_fragment:kG,alphamap_fragment:jG,alphamap_pars_fragment:UG,alphatest_fragment:FG,alphatest_pars_fragment:VG,aomap_fragment:BG,aomap_pars_fragment:$G,begin_vertex:zG,beginnormal_vertex:HG,bsdfs:GG,iridescence_fragment:WG,bumpmap_pars_fragment:qG,clipping_planes_fragment:XG,clipping_planes_pars_fragment:KG,clipping_planes_pars_vertex:YG,clipping_planes_vertex:QG,color_fragment:ZG,color_pars_fragment:JG,color_pars_vertex:e8,color_vertex:t8,common:n8,cube_uv_reflection_fragment:r8,defaultnormal_vertex:i8,displacementmap_pars_vertex:o8,displacementmap_vertex:a8,emissivemap_fragment:s8,emissivemap_pars_fragment:l8,colorspace_fragment:c8,colorspace_pars_fragment:u8,envmap_fragment:f8,envmap_common_pars_fragment:h8,envmap_pars_fragment:d8,envmap_pars_vertex:p8,envmap_physical_pars_fragment:A8,envmap_vertex:m8,fog_vertex:g8,fog_pars_vertex:v8,fog_fragment:y8,fog_pars_fragment:_8,gradientmap_pars_fragment:x8,lightmap_fragment:b8,lightmap_pars_fragment:w8,lights_lambert_fragment:S8,lights_lambert_pars_fragment:E8,lights_pars_begin:T8,lights_toon_fragment:M8,lights_toon_pars_fragment:P8,lights_phong_fragment:C8,lights_phong_pars_fragment:R8,lights_physical_fragment:O8,lights_physical_pars_fragment:I8,lights_fragment_begin:N8,lights_fragment_maps:D8,lights_fragment_end:L8,logdepthbuf_fragment:k8,logdepthbuf_pars_fragment:j8,logdepthbuf_pars_vertex:U8,logdepthbuf_vertex:F8,map_fragment:V8,map_pars_fragment:B8,map_particle_fragment:$8,map_particle_pars_fragment:z8,metalnessmap_fragment:H8,metalnessmap_pars_fragment:G8,morphcolor_vertex:W8,morphnormal_vertex:q8,morphtarget_pars_vertex:X8,morphtarget_vertex:K8,normal_fragment_begin:Y8,normal_fragment_maps:Q8,normal_pars_fragment:Z8,normal_pars_vertex:J8,normal_vertex:eW,normalmap_pars_fragment:tW,clearcoat_normal_fragment_begin:nW,clearcoat_normal_fragment_maps:rW,clearcoat_pars_fragment:iW,iridescence_pars_fragment:oW,opaque_fragment:aW,packing:sW,premultiplied_alpha_fragment:lW,project_vertex:cW,dithering_fragment:uW,dithering_pars_fragment:fW,roughnessmap_fragment:hW,roughnessmap_pars_fragment:dW,shadowmap_pars_fragment:pW,shadowmap_pars_vertex:mW,shadowmap_vertex:gW,shadowmask_pars_fragment:vW,skinbase_vertex:yW,skinning_pars_vertex:_W,skinning_vertex:xW,skinnormal_vertex:bW,specularmap_fragment:wW,specularmap_pars_fragment:SW,tonemapping_fragment:EW,tonemapping_pars_fragment:TW,transmission_fragment:AW,transmission_pars_fragment:MW,uv_pars_fragment:PW,uv_pars_vertex:CW,uv_vertex:RW,worldpos_vertex:OW,background_vert:IW,background_frag:NW,backgroundCube_vert:DW,backgroundCube_frag:LW,cube_vert:kW,cube_frag:jW,depth_vert:UW,depth_frag:FW,distanceRGBA_vert:VW,distanceRGBA_frag:BW,equirect_vert:$W,equirect_frag:zW,linedashed_vert:HW,linedashed_frag:GW,meshbasic_vert:WW,meshbasic_frag:qW,meshlambert_vert:XW,meshlambert_frag:KW,meshmatcap_vert:YW,meshmatcap_frag:QW,meshnormal_vert:ZW,meshnormal_frag:JW,meshphong_vert:e7,meshphong_frag:t7,meshphysical_vert:n7,meshphysical_frag:r7,meshtoon_vert:i7,meshtoon_frag:o7,points_vert:a7,points_frag:s7,shadow_vert:l7,shadow_frag:c7,sprite_vert:u7,sprite_frag:f7},Oe={common:{diffuse:{value:new Rt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new wt},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new wt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new wt},normalScale:{value:new gt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Rt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Rt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0},uvTransform:{value:new wt}},sprite:{diffuse:{value:new Rt(16777215)},opacity:{value:1},center:{value:new gt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new wt},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0}}},vo={basic:{uniforms:Or([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.fog]),vertexShader:xt.meshbasic_vert,fragmentShader:xt.meshbasic_frag},lambert:{uniforms:Or([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,Oe.lights,{emissive:{value:new Rt(0)}}]),vertexShader:xt.meshlambert_vert,fragmentShader:xt.meshlambert_frag},phong:{uniforms:Or([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,Oe.lights,{emissive:{value:new Rt(0)},specular:{value:new Rt(1118481)},shininess:{value:30}}]),vertexShader:xt.meshphong_vert,fragmentShader:xt.meshphong_frag},standard:{uniforms:Or([Oe.common,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.roughnessmap,Oe.metalnessmap,Oe.fog,Oe.lights,{emissive:{value:new Rt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xt.meshphysical_vert,fragmentShader:xt.meshphysical_frag},toon:{uniforms:Or([Oe.common,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.gradientmap,Oe.fog,Oe.lights,{emissive:{value:new Rt(0)}}]),vertexShader:xt.meshtoon_vert,fragmentShader:xt.meshtoon_frag},matcap:{uniforms:Or([Oe.common,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,{matcap:{value:null}}]),vertexShader:xt.meshmatcap_vert,fragmentShader:xt.meshmatcap_frag},points:{uniforms:Or([Oe.points,Oe.fog]),vertexShader:xt.points_vert,fragmentShader:xt.points_frag},dashed:{uniforms:Or([Oe.common,Oe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xt.linedashed_vert,fragmentShader:xt.linedashed_frag},depth:{uniforms:Or([Oe.common,Oe.displacementmap]),vertexShader:xt.depth_vert,fragmentShader:xt.depth_frag},normal:{uniforms:Or([Oe.common,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,{opacity:{value:1}}]),vertexShader:xt.meshnormal_vert,fragmentShader:xt.meshnormal_frag},sprite:{uniforms:Or([Oe.sprite,Oe.fog]),vertexShader:xt.sprite_vert,fragmentShader:xt.sprite_frag},background:{uniforms:{uvTransform:{value:new wt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:xt.background_vert,fragmentShader:xt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:xt.backgroundCube_vert,fragmentShader:xt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xt.cube_vert,fragmentShader:xt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xt.equirect_vert,fragmentShader:xt.equirect_frag},distanceRGBA:{uniforms:Or([Oe.common,Oe.displacementmap,{referencePosition:{value:new te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xt.distanceRGBA_vert,fragmentShader:xt.distanceRGBA_frag},shadow:{uniforms:Or([Oe.lights,Oe.fog,{color:{value:new Rt(0)},opacity:{value:1}}]),vertexShader:xt.shadow_vert,fragmentShader:xt.shadow_frag}};vo.physical={uniforms:Or([vo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new wt},clearcoatNormalScale:{value:new gt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new wt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new wt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new wt},sheen:{value:0},sheenColor:{value:new Rt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new wt},transmissionSamplerSize:{value:new gt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new wt},attenuationDistance:{value:0},attenuationColor:{value:new Rt(0)},specularColor:{value:new Rt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new wt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new wt},anisotropyVector:{value:new gt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new wt}}]),vertexShader:xt.meshphysical_vert,fragmentShader:xt.meshphysical_frag};const eg={r:0,b:0,g:0};function h7(t,e,n,r,i,o,a){const s=new Rt(0);let l=o===!0?0:1,c,u,f=null,h=0,d=null;function v(g,p){let x=!1,_=p.isScene===!0?p.background:null;_&&_.isTexture&&(_=(p.backgroundBlurriness>0?n:e).get(_)),_===null?y(s,l):_&&_.isColor&&(y(_,1),x=!0);const E=t.xr.getEnvironmentBlendMode();E==="additive"?r.buffers.color.setClear(0,0,0,1,a):E==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(t.autoClear||x)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),_&&(_.isCubeTexture||_.mapping===p0)?(u===void 0&&(u=new Gr(new Bp(1,1,1),new _a({name:"BackgroundCubeMaterial",uniforms:ju(vo.backgroundCube.uniforms),vertexShader:vo.backgroundCube.vertexShader,fragmentShader:vo.backgroundCube.fragmentShader,side:Vr,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(b,M,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=_,u.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=p.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,u.material.toneMapped=zt.getTransfer(_.colorSpace)!==tn,(f!==_||h!==_.version||d!==t.toneMapping)&&(u.material.needsUpdate=!0,f=_,h=_.version,d=t.toneMapping),u.layers.enableAll(),g.unshift(u,u.geometry,u.material,0,0,null)):_&&_.isTexture&&(c===void 0&&(c=new Gr(new aT(2,2),new _a({name:"BackgroundMaterial",uniforms:ju(vo.background.uniforms),vertexShader:vo.background.vertexShader,fragmentShader:vo.background.fragmentShader,side:bs,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=_,c.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,c.material.toneMapped=zt.getTransfer(_.colorSpace)!==tn,_.matrixAutoUpdate===!0&&_.updateMatrix(),c.material.uniforms.uvTransform.value.copy(_.matrix),(f!==_||h!==_.version||d!==t.toneMapping)&&(c.material.needsUpdate=!0,f=_,h=_.version,d=t.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null))}function y(g,p){g.getRGB(eg,$j(t)),r.buffers.color.setClear(eg.r,eg.g,eg.b,p,a)}return{getClearColor:function(){return s},setClearColor:function(g,p=1){s.set(g),l=p,y(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,y(s,l)},render:v}}function d7(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||o!==null,s={},l=g(null);let c=l,u=!1;function f(D,L,q,$,V){let X=!1;if(a){const K=y($,q,L);c!==K&&(c=K,d(c.object)),X=p(D,$,q,V),X&&x(D,$,q,V)}else{const K=L.wireframe===!0;(c.geometry!==$.id||c.program!==q.id||c.wireframe!==K)&&(c.geometry=$.id,c.program=q.id,c.wireframe=K,X=!0)}V!==null&&n.update(V,t.ELEMENT_ARRAY_BUFFER),(X||u)&&(u=!1,A(D,L,q,$),V!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(V).buffer))}function h(){return r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}function d(D){return r.isWebGL2?t.bindVertexArray(D):o.bindVertexArrayOES(D)}function v(D){return r.isWebGL2?t.deleteVertexArray(D):o.deleteVertexArrayOES(D)}function y(D,L,q){const $=q.wireframe===!0;let V=s[D.id];V===void 0&&(V={},s[D.id]=V);let X=V[L.id];X===void 0&&(X={},V[L.id]=X);let K=X[$];return K===void 0&&(K=g(h()),X[$]=K),K}function g(D){const L=[],q=[],$=[];for(let V=0;V<i;V++)L[V]=0,q[V]=0,$[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:q,attributeDivisors:$,object:D,attributes:{},index:null}}function p(D,L,q,$){const V=c.attributes,X=L.attributes;let K=0;const z=q.getAttributes();for(const W in z)if(z[W].location>=0){const me=V[W];let _e=X[W];if(_e===void 0&&(W==="instanceMatrix"&&D.instanceMatrix&&(_e=D.instanceMatrix),W==="instanceColor"&&D.instanceColor&&(_e=D.instanceColor)),me===void 0||me.attribute!==_e||_e&&me.data!==_e.data)return!0;K++}return c.attributesNum!==K||c.index!==$}function x(D,L,q,$){const V={},X=L.attributes;let K=0;const z=q.getAttributes();for(const W in z)if(z[W].location>=0){let me=X[W];me===void 0&&(W==="instanceMatrix"&&D.instanceMatrix&&(me=D.instanceMatrix),W==="instanceColor"&&D.instanceColor&&(me=D.instanceColor));const _e={};_e.attribute=me,me&&me.data&&(_e.data=me.data),V[W]=_e,K++}c.attributes=V,c.attributesNum=K,c.index=$}function _(){const D=c.newAttributes;for(let L=0,q=D.length;L<q;L++)D[L]=0}function E(D){b(D,0)}function b(D,L){const q=c.newAttributes,$=c.enabledAttributes,V=c.attributeDivisors;q[D]=1,$[D]===0&&(t.enableVertexAttribArray(D),$[D]=1),V[D]!==L&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](D,L),V[D]=L)}function M(){const D=c.newAttributes,L=c.enabledAttributes;for(let q=0,$=L.length;q<$;q++)L[q]!==D[q]&&(t.disableVertexAttribArray(q),L[q]=0)}function S(D,L,q,$,V,X,K){K===!0?t.vertexAttribIPointer(D,L,q,V,X):t.vertexAttribPointer(D,L,q,$,V,X)}function A(D,L,q,$){if(r.isWebGL2===!1&&(D.isInstancedMesh||$.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const V=$.attributes,X=q.getAttributes(),K=L.defaultAttributeValues;for(const z in X){const W=X[z];if(W.location>=0){let ee=V[z];if(ee===void 0&&(z==="instanceMatrix"&&D.instanceMatrix&&(ee=D.instanceMatrix),z==="instanceColor"&&D.instanceColor&&(ee=D.instanceColor)),ee!==void 0){const me=ee.normalized,_e=ee.itemSize,Ne=n.get(ee);if(Ne===void 0)continue;const We=Ne.buffer,Ue=Ne.type,fe=Ne.bytesPerElement,Re=r.isWebGL2===!0&&(Ue===t.INT||Ue===t.UNSIGNED_INT||ee.gpuType===Aj);if(ee.isInterleavedBufferAttribute){const Ee=ee.data,H=Ee.stride,lt=ee.offset;if(Ee.isInstancedInterleavedBuffer){for(let be=0;be<W.locationSize;be++)b(W.location+be,Ee.meshPerAttribute);D.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=Ee.meshPerAttribute*Ee.count)}else for(let be=0;be<W.locationSize;be++)E(W.location+be);t.bindBuffer(t.ARRAY_BUFFER,We);for(let be=0;be<W.locationSize;be++)S(W.location+be,_e/W.locationSize,Ue,me,H*fe,(lt+_e/W.locationSize*be)*fe,Re)}else{if(ee.isInstancedBufferAttribute){for(let Ee=0;Ee<W.locationSize;Ee++)b(W.location+Ee,ee.meshPerAttribute);D.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let Ee=0;Ee<W.locationSize;Ee++)E(W.location+Ee);t.bindBuffer(t.ARRAY_BUFFER,We);for(let Ee=0;Ee<W.locationSize;Ee++)S(W.location+Ee,_e/W.locationSize,Ue,me,_e*fe,_e/W.locationSize*Ee*fe,Re)}}else if(K!==void 0){const me=K[z];if(me!==void 0)switch(me.length){case 2:t.vertexAttrib2fv(W.location,me);break;case 3:t.vertexAttrib3fv(W.location,me);break;case 4:t.vertexAttrib4fv(W.location,me);break;default:t.vertexAttrib1fv(W.location,me)}}}}M()}function T(){N();for(const D in s){const L=s[D];for(const q in L){const $=L[q];for(const V in $)v($[V].object),delete $[V];delete L[q]}delete s[D]}}function P(D){if(s[D.id]===void 0)return;const L=s[D.id];for(const q in L){const $=L[q];for(const V in $)v($[V].object),delete $[V];delete L[q]}delete s[D.id]}function R(D){for(const L in s){const q=s[L];if(q[D.id]===void 0)continue;const $=q[D.id];for(const V in $)v($[V].object),delete $[V];delete q[D.id]}}function N(){I(),u=!0,c!==l&&(c=l,d(c.object))}function I(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:N,resetDefaultState:I,dispose:T,releaseStatesOfGeometry:P,releaseStatesOfProgram:R,initAttributes:_,enableAttribute:E,disableUnusedAttributes:M}}function p7(t,e,n,r){const i=r.isWebGL2;let o;function a(c){o=c}function s(c,u){t.drawArrays(o,c,u),n.update(u,o,1)}function l(c,u,f){if(f===0)return;let h,d;if(i)h=t,d="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[d](o,c,u,f),n.update(u,o,f)}this.setMode=a,this.render=s,this.renderInstances=l}function m7(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const S=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(S){if(S==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";S="mediump"}return S==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let s=n.precision!==void 0?n.precision:"highp";const l=o(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);const c=a||e.has("WEBGL_draw_buffers"),u=n.logarithmicDepthBuffer===!0,f=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=t.getParameter(t.MAX_TEXTURE_SIZE),v=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),y=t.getParameter(t.MAX_VERTEX_ATTRIBS),g=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),p=t.getParameter(t.MAX_VARYING_VECTORS),x=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),_=h>0,E=a||e.has("OES_texture_float"),b=_&&E,M=a?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:v,maxAttributes:y,maxVertexUniforms:g,maxVaryings:p,maxFragmentUniforms:x,vertexTextures:_,floatFragmentTextures:E,floatVertexTextures:b,maxSamples:M}}function g7(t){const e=this;let n=null,r=0,i=!1,o=!1;const a=new Ga,s=new wt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const d=f.length!==0||h||r!==0||i;return i=h,r=f.length,d},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(f,h){n=u(f,h,0)},this.setState=function(f,h,d){const v=f.clippingPlanes,y=f.clipIntersection,g=f.clipShadows,p=t.get(f);if(!i||v===null||v.length===0||o&&!g)o?u(null):c();else{const x=o?0:r,_=x*4;let E=p.clippingState||null;l.value=E,E=u(v,h,_,d);for(let b=0;b!==_;++b)E[b]=n[b];p.clippingState=E,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=x}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(f,h,d,v){const y=f!==null?f.length:0;let g=null;if(y!==0){if(g=l.value,v!==!0||g===null){const p=d+y*4,x=h.matrixWorldInverse;s.getNormalMatrix(x),(g===null||g.length<p)&&(g=new Float32Array(p));for(let _=0,E=d;_!==y;++_,E+=4)a.copy(f[_]).applyMatrix4(x,s),a.normal.toArray(g,E),g[E+3]=a.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,g}}function v7(t){let e=new WeakMap;function n(a,s){return s===L1?a.mapping=Du:s===k1&&(a.mapping=Lu),a}function r(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const s=a.mapping;if(s===L1||s===k1)if(e.has(a)){const l=e.get(a).texture;return n(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new OG(l.height/2);return c.fromEquirectangularTexture(t,a),e.set(a,c),a.addEventListener("dispose",i),n(c.texture,a.mapping)}else return null}}return a}function i(a){const s=a.target;s.removeEventListener("dispose",i);const l=e.get(s);l!==void 0&&(e.delete(s),l.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class Wj extends zj{constructor(e=-1,n=1,r=1,i=-1,o=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=o,this.far=a,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,o,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,a=r+e,s=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,a=o+c*this.view.width,s-=u*this.view.offsetY,l=s-u*this.view.height}this.projectionMatrix.makeOrthographic(o,a,s,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const eu=4,f2=[.125,.215,.35,.446,.526,.582],cl=20,Ix=new Wj,h2=new Rt;let Nx=null,Dx=0,Lx=0;const tl=(1+Math.sqrt(5))/2,Rc=1/tl,d2=[new te(1,1,1),new te(-1,1,1),new te(1,1,-1),new te(-1,1,-1),new te(0,tl,Rc),new te(0,tl,-Rc),new te(Rc,0,tl),new te(-Rc,0,tl),new te(tl,Rc,0),new te(-tl,Rc,0)];class p2{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){Nx=this._renderer.getRenderTarget(),Dx=this._renderer.getActiveCubeFace(),Lx=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=v2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=g2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Nx,Dx,Lx),e.scissorTest=!1,tg(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Du||e.mapping===Lu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Nx=this._renderer.getRenderTarget(),Dx=this._renderer.getActiveCubeFace(),Lx=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Mi,minFilter:Mi,generateMipmaps:!1,type:kd,format:eo,colorSpace:ya,depthBuffer:!1},i=m2(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=m2(e,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=y7(o)),this._blurMaterial=_7(o,e,n)}return i}_compileMaterial(e){const n=new Gr(this._lodPlanes[0],e);this._renderer.compile(n,Ix)}_sceneToCubeUV(e,n,r,i){const s=new si(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,h=u.toneMapping;u.getClearColor(h2),u.toneMapping=hs,u.autoClear=!1;const d=new iT({name:"PMREM.Background",side:Vr,depthWrite:!1,depthTest:!1}),v=new Gr(new Bp,d);let y=!1;const g=e.background;g?g.isColor&&(d.color.copy(g),e.background=null,y=!0):(d.color.copy(h2),y=!0);for(let p=0;p<6;p++){const x=p%3;x===0?(s.up.set(0,l[p],0),s.lookAt(c[p],0,0)):x===1?(s.up.set(0,0,l[p]),s.lookAt(0,c[p],0)):(s.up.set(0,l[p],0),s.lookAt(0,0,c[p]));const _=this._cubeSize;tg(i,x*_,p>2?_:0,_,_),u.setRenderTarget(i),y&&u.render(v,s),u.render(e,s)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=h,u.autoClear=f,e.background=g}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Du||e.mapping===Lu;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=v2()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=g2());const o=i?this._cubemapMaterial:this._equirectMaterial,a=new Gr(this._lodPlanes[0],o),s=o.uniforms;s.envMap.value=e;const l=this._cubeSize;tg(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(a,Ix)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=d2[(i-1)%d2.length];this._blur(e,i-1,i,o,a)}n.autoClear=r}_blur(e,n,r,i,o){const a=this._pingPongRenderTarget;this._halfBlur(e,a,n,r,i,"latitudinal",o),this._halfBlur(a,e,r,r,i,"longitudinal",o)}_halfBlur(e,n,r,i,o,a,s){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new Gr(this._lodPlanes[i],c),h=c.uniforms,d=this._sizeLods[r]-1,v=isFinite(o)?Math.PI/(2*d):2*Math.PI/(2*cl-1),y=o/v,g=isFinite(o)?1+Math.floor(u*y):cl;g>cl&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${cl}`);const p=[];let x=0;for(let S=0;S<cl;++S){const A=S/y,T=Math.exp(-A*A/2);p.push(T),S===0?x+=T:S<g&&(x+=2*T)}for(let S=0;S<p.length;S++)p[S]=p[S]/x;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=p,h.latitudinal.value=a==="latitudinal",s&&(h.poleAxis.value=s);const{_lodMax:_}=this;h.dTheta.value=v,h.mipInt.value=_-r;const E=this._sizeLods[i],b=3*E*(i>_-eu?i-_+eu:0),M=4*(this._cubeSize-E);tg(n,b,M,3*E,2*E),l.setRenderTarget(n),l.render(f,Ix)}}function y7(t){const e=[],n=[],r=[];let i=t;const o=t-eu+1+f2.length;for(let a=0;a<o;a++){const s=Math.pow(2,i);n.push(s);let l=1/s;a>t-eu?l=f2[a-t+eu-1]:a===0&&(l=0),r.push(l);const c=1/(s-2),u=-c,f=1+c,h=[u,u,f,u,f,f,u,u,f,f,u,f],d=6,v=6,y=3,g=2,p=1,x=new Float32Array(y*v*d),_=new Float32Array(g*v*d),E=new Float32Array(p*v*d);for(let M=0;M<d;M++){const S=M%3*2/3-1,A=M>2?0:-1,T=[S,A,0,S+2/3,A,0,S+2/3,A+1,0,S,A,0,S+2/3,A+1,0,S,A+1,0];x.set(T,y*v*M),_.set(h,g*v*M);const P=[M,M,M,M,M,M];E.set(P,p*v*M)}const b=new Lo;b.setAttribute("position",new So(x,y)),b.setAttribute("uv",new So(_,g)),b.setAttribute("faceIndex",new So(E,p)),e.push(b),i>eu&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function m2(t,e,n){const r=new Ul(t,e,n);return r.texture.mapping=p0,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function tg(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function _7(t,e,n){const r=new Float32Array(cl),i=new te(0,1,0);return new _a({name:"SphericalGaussianBlur",defines:{n:cl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:sT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:fs,depthTest:!1,depthWrite:!1})}function g2(){return new _a({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:sT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:fs,depthTest:!1,depthWrite:!1})}function v2(){return new _a({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:sT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:fs,depthTest:!1,depthWrite:!1})}function sT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function x7(t){let e=new WeakMap,n=null;function r(s){if(s&&s.isTexture){const l=s.mapping,c=l===L1||l===k1,u=l===Du||l===Lu;if(c||u)if(s.isRenderTargetTexture&&s.needsPMREMUpdate===!0){s.needsPMREMUpdate=!1;let f=e.get(s);return n===null&&(n=new p2(t)),f=c?n.fromEquirectangular(s,f):n.fromCubemap(s,f),e.set(s,f),f.texture}else{if(e.has(s))return e.get(s).texture;{const f=s.image;if(c&&f&&f.height>0||u&&f&&i(f)){n===null&&(n=new p2(t));const h=c?n.fromEquirectangular(s):n.fromCubemap(s);return e.set(s,h),s.addEventListener("dispose",o),h.texture}else return null}}}return s}function i(s){let l=0;const c=6;for(let u=0;u<c;u++)s[u]!==void 0&&l++;return l===c}function o(s){const l=s.target;l.removeEventListener("dispose",o);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:a}}function b7(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function w7(t,e,n,r){const i={},o=new WeakMap;function a(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const v in h.attributes)e.remove(h.attributes[v]);for(const v in h.morphAttributes){const y=h.morphAttributes[v];for(let g=0,p=y.length;g<p;g++)e.remove(y[g])}h.removeEventListener("dispose",a),delete i[h.id];const d=o.get(h);d&&(e.remove(d),o.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function s(f,h){return i[h.id]===!0||(h.addEventListener("dispose",a),i[h.id]=!0,n.memory.geometries++),h}function l(f){const h=f.attributes;for(const v in h)e.update(h[v],t.ARRAY_BUFFER);const d=f.morphAttributes;for(const v in d){const y=d[v];for(let g=0,p=y.length;g<p;g++)e.update(y[g],t.ARRAY_BUFFER)}}function c(f){const h=[],d=f.index,v=f.attributes.position;let y=0;if(d!==null){const x=d.array;y=d.version;for(let _=0,E=x.length;_<E;_+=3){const b=x[_+0],M=x[_+1],S=x[_+2];h.push(b,M,M,S,S,b)}}else if(v!==void 0){const x=v.array;y=v.version;for(let _=0,E=x.length/3-1;_<E;_+=3){const b=_+0,M=_+1,S=_+2;h.push(b,M,M,S,S,b)}}else return;const g=new(Lj(h)?Bj:Vj)(h,1);g.version=y;const p=o.get(f);p&&e.remove(p),o.set(f,g)}function u(f){const h=o.get(f);if(h){const d=f.index;d!==null&&h.version<d.version&&c(f)}else c(f);return o.get(f)}return{get:s,update:l,getWireframeAttribute:u}}function S7(t,e,n,r){const i=r.isWebGL2;let o;function a(h){o=h}let s,l;function c(h){s=h.type,l=h.bytesPerElement}function u(h,d){t.drawElements(o,d,s,h*l),n.update(d,o,1)}function f(h,d,v){if(v===0)return;let y,g;if(i)y=t,g="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[g](o,d,s,h*l,v),n.update(d,o,v)}this.setMode=a,this.setIndex=c,this.render=u,this.renderInstances=f}function E7(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,a,s){switch(n.calls++,a){case t.TRIANGLES:n.triangles+=s*(o/3);break;case t.LINES:n.lines+=s*(o/2);break;case t.LINE_STRIP:n.lines+=s*(o-1);break;case t.LINE_LOOP:n.lines+=s*o;break;case t.POINTS:n.points+=s*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function T7(t,e){return t[0]-e[0]}function A7(t,e){return Math.abs(e[1])-Math.abs(t[1])}function M7(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,a=new Zn,s=[];for(let c=0;c<8;c++)s[c]=[c,0];function l(c,u,f){const h=c.morphTargetInfluences;if(e.isWebGL2===!0){const v=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,y=v!==void 0?v.length:0;let g=o.get(u);if(g===void 0||g.count!==y){let L=function(){I.dispose(),o.delete(u),u.removeEventListener("dispose",L)};var d=L;g!==void 0&&g.texture.dispose();const _=u.morphAttributes.position!==void 0,E=u.morphAttributes.normal!==void 0,b=u.morphAttributes.color!==void 0,M=u.morphAttributes.position||[],S=u.morphAttributes.normal||[],A=u.morphAttributes.color||[];let T=0;_===!0&&(T=1),E===!0&&(T=2),b===!0&&(T=3);let P=u.attributes.position.count*T,R=1;P>e.maxTextureSize&&(R=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const N=new Float32Array(P*R*4*y),I=new Uj(N,P,R,y);I.type=Ja,I.needsUpdate=!0;const D=T*4;for(let q=0;q<y;q++){const $=M[q],V=S[q],X=A[q],K=P*R*4*q;for(let z=0;z<$.count;z++){const W=z*D;_===!0&&(a.fromBufferAttribute($,z),N[K+W+0]=a.x,N[K+W+1]=a.y,N[K+W+2]=a.z,N[K+W+3]=0),E===!0&&(a.fromBufferAttribute(V,z),N[K+W+4]=a.x,N[K+W+5]=a.y,N[K+W+6]=a.z,N[K+W+7]=0),b===!0&&(a.fromBufferAttribute(X,z),N[K+W+8]=a.x,N[K+W+9]=a.y,N[K+W+10]=a.z,N[K+W+11]=X.itemSize===4?a.w:1)}}g={count:y,texture:I,size:new gt(P,R)},o.set(u,g),u.addEventListener("dispose",L)}let p=0;for(let _=0;_<h.length;_++)p+=h[_];const x=u.morphTargetsRelative?1:1-p;f.getUniforms().setValue(t,"morphTargetBaseInfluence",x),f.getUniforms().setValue(t,"morphTargetInfluences",h),f.getUniforms().setValue(t,"morphTargetsTexture",g.texture,n),f.getUniforms().setValue(t,"morphTargetsTextureSize",g.size)}else{const v=h===void 0?0:h.length;let y=r[u.id];if(y===void 0||y.length!==v){y=[];for(let E=0;E<v;E++)y[E]=[E,0];r[u.id]=y}for(let E=0;E<v;E++){const b=y[E];b[0]=E,b[1]=h[E]}y.sort(A7);for(let E=0;E<8;E++)E<v&&y[E][1]?(s[E][0]=y[E][0],s[E][1]=y[E][1]):(s[E][0]=Number.MAX_SAFE_INTEGER,s[E][1]=0);s.sort(T7);const g=u.morphAttributes.position,p=u.morphAttributes.normal;let x=0;for(let E=0;E<8;E++){const b=s[E],M=b[0],S=b[1];M!==Number.MAX_SAFE_INTEGER&&S?(g&&u.getAttribute("morphTarget"+E)!==g[M]&&u.setAttribute("morphTarget"+E,g[M]),p&&u.getAttribute("morphNormal"+E)!==p[M]&&u.setAttribute("morphNormal"+E,p[M]),i[E]=S,x+=S):(g&&u.hasAttribute("morphTarget"+E)===!0&&u.deleteAttribute("morphTarget"+E),p&&u.hasAttribute("morphNormal"+E)===!0&&u.deleteAttribute("morphNormal"+E),i[E]=0)}const _=u.morphTargetsRelative?1:1-x;f.getUniforms().setValue(t,"morphTargetBaseInfluence",_),f.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function P7(t,e,n,r){let i=new WeakMap;function o(l){const c=r.render.frame,u=l.geometry,f=e.get(l,u);if(i.get(f)!==c&&(e.update(f),i.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;i.get(h)!==c&&(h.update(),i.set(h,c))}return f}function a(){i=new WeakMap}function s(l){const c=l.target;c.removeEventListener("dispose",s),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:o,dispose:a}}const qj=new Qr,Xj=new Uj,Kj=new pG,Yj=new Hj,y2=[],_2=[],x2=new Float32Array(16),b2=new Float32Array(9),w2=new Float32Array(4);function Cf(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=y2[i];if(o===void 0&&(o=new Float32Array(i),y2[i]=o),e!==0){r.toArray(o,0);for(let a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function zn(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Hn(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function _0(t,e){let n=_2[e];n===void 0&&(n=new Int32Array(e),_2[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function C7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function R7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(zn(n,e))return;t.uniform2fv(this.addr,e),Hn(n,e)}}function O7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(zn(n,e))return;t.uniform3fv(this.addr,e),Hn(n,e)}}function I7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(zn(n,e))return;t.uniform4fv(this.addr,e),Hn(n,e)}}function N7(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(zn(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Hn(n,e)}else{if(zn(n,r))return;w2.set(r),t.uniformMatrix2fv(this.addr,!1,w2),Hn(n,r)}}function D7(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(zn(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Hn(n,e)}else{if(zn(n,r))return;b2.set(r),t.uniformMatrix3fv(this.addr,!1,b2),Hn(n,r)}}function L7(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(zn(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Hn(n,e)}else{if(zn(n,r))return;x2.set(r),t.uniformMatrix4fv(this.addr,!1,x2),Hn(n,r)}}function k7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function j7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(zn(n,e))return;t.uniform2iv(this.addr,e),Hn(n,e)}}function U7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(zn(n,e))return;t.uniform3iv(this.addr,e),Hn(n,e)}}function F7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(zn(n,e))return;t.uniform4iv(this.addr,e),Hn(n,e)}}function V7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function B7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(zn(n,e))return;t.uniform2uiv(this.addr,e),Hn(n,e)}}function $7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(zn(n,e))return;t.uniform3uiv(this.addr,e),Hn(n,e)}}function z7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(zn(n,e))return;t.uniform4uiv(this.addr,e),Hn(n,e)}}function H7(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||qj,i)}function G7(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Kj,i)}function W7(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Yj,i)}function q7(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Xj,i)}function X7(t){switch(t){case 5126:return C7;case 35664:return R7;case 35665:return O7;case 35666:return I7;case 35674:return N7;case 35675:return D7;case 35676:return L7;case 5124:case 35670:return k7;case 35667:case 35671:return j7;case 35668:case 35672:return U7;case 35669:case 35673:return F7;case 5125:return V7;case 36294:return B7;case 36295:return $7;case 36296:return z7;case 35678:case 36198:case 36298:case 36306:case 35682:return H7;case 35679:case 36299:case 36307:return G7;case 35680:case 36300:case 36308:case 36293:return W7;case 36289:case 36303:case 36311:case 36292:return q7}}function K7(t,e){t.uniform1fv(this.addr,e)}function Y7(t,e){const n=Cf(e,this.size,2);t.uniform2fv(this.addr,n)}function Q7(t,e){const n=Cf(e,this.size,3);t.uniform3fv(this.addr,n)}function Z7(t,e){const n=Cf(e,this.size,4);t.uniform4fv(this.addr,n)}function J7(t,e){const n=Cf(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function eq(t,e){const n=Cf(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function tq(t,e){const n=Cf(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function nq(t,e){t.uniform1iv(this.addr,e)}function rq(t,e){t.uniform2iv(this.addr,e)}function iq(t,e){t.uniform3iv(this.addr,e)}function oq(t,e){t.uniform4iv(this.addr,e)}function aq(t,e){t.uniform1uiv(this.addr,e)}function sq(t,e){t.uniform2uiv(this.addr,e)}function lq(t,e){t.uniform3uiv(this.addr,e)}function cq(t,e){t.uniform4uiv(this.addr,e)}function uq(t,e,n){const r=this.cache,i=e.length,o=_0(n,i);zn(r,o)||(t.uniform1iv(this.addr,o),Hn(r,o));for(let a=0;a!==i;++a)n.setTexture2D(e[a]||qj,o[a])}function fq(t,e,n){const r=this.cache,i=e.length,o=_0(n,i);zn(r,o)||(t.uniform1iv(this.addr,o),Hn(r,o));for(let a=0;a!==i;++a)n.setTexture3D(e[a]||Kj,o[a])}function hq(t,e,n){const r=this.cache,i=e.length,o=_0(n,i);zn(r,o)||(t.uniform1iv(this.addr,o),Hn(r,o));for(let a=0;a!==i;++a)n.setTextureCube(e[a]||Yj,o[a])}function dq(t,e,n){const r=this.cache,i=e.length,o=_0(n,i);zn(r,o)||(t.uniform1iv(this.addr,o),Hn(r,o));for(let a=0;a!==i;++a)n.setTexture2DArray(e[a]||Xj,o[a])}function pq(t){switch(t){case 5126:return K7;case 35664:return Y7;case 35665:return Q7;case 35666:return Z7;case 35674:return J7;case 35675:return eq;case 35676:return tq;case 5124:case 35670:return nq;case 35667:case 35671:return rq;case 35668:case 35672:return iq;case 35669:case 35673:return oq;case 5125:return aq;case 36294:return sq;case 36295:return lq;case 36296:return cq;case 35678:case 36198:case 36298:case 36306:case 35682:return uq;case 35679:case 36299:case 36307:return fq;case 35680:case 36300:case 36308:case 36293:return hq;case 36289:case 36303:case 36311:case 36292:return dq}}class mq{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.setValue=X7(n.type)}}class gq{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.size=n.size,this.setValue=pq(n.type)}}class vq{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let o=0,a=i.length;o!==a;++o){const s=i[o];s.setValue(e,n[s.id],r)}}}const kx=/(\w+)(\])?(\[|\.)?/g;function S2(t,e){t.seq.push(e),t.map[e.id]=e}function yq(t,e,n){const r=t.name,i=r.length;for(kx.lastIndex=0;;){const o=kx.exec(r),a=kx.lastIndex;let s=o[1];const l=o[2]==="]",c=o[3];if(l&&(s=s|0),c===void 0||c==="["&&a+2===i){S2(n,c===void 0?new mq(s,t,e):new gq(s,t,e));break}else{let f=n.map[s];f===void 0&&(f=new vq(s),S2(n,f)),n=f}}}class Bg{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(n,i),a=e.getUniformLocation(n,o.name);yq(o,a,this)}}setValue(e,n,r,i){const o=this.map[n];o!==void 0&&o.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let o=0,a=n.length;o!==a;++o){const s=n[o],l=r[s.id];l.needsUpdate!==!1&&s.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,o=e.length;i!==o;++i){const a=e[i];a.id in n&&r.push(a)}return r}}function E2(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const _q=37297;let xq=0;function bq(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let a=i;a<o;a++){const s=a+1;r.push(`${s===e?">":" "} ${s}: ${n[a]}`)}return r.join(`
`)}function wq(t){const e=zt.getPrimaries(zt.workingColorSpace),n=zt.getPrimaries(t);let r;switch(e===n?r="":e===Tv&&n===Ev?r="LinearDisplayP3ToLinearSRGB":e===Ev&&n===Tv&&(r="LinearSRGBToLinearDisplayP3"),t){case ya:case m0:return[r,"LinearTransferOETF"];case jn:case tT:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function T2(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const a=parseInt(o[1]);return n.toUpperCase()+`

`+i+`

`+bq(t.getShaderSource(e),a)}else return i}function Sq(t,e){const n=wq(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function Eq(t,e){let n;switch(e){case S9:n="Linear";break;case E9:n="Reinhard";break;case T9:n="OptimizedCineon";break;case A9:n="ACESFilmic";break;case M9:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Tq(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(kh).join(`
`)}function Aq(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function Mq(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=t.getActiveAttrib(e,i),a=o.name;let s=1;o.type===t.FLOAT_MAT2&&(s=2),o.type===t.FLOAT_MAT3&&(s=3),o.type===t.FLOAT_MAT4&&(s=4),n[a]={type:o.type,location:t.getAttribLocation(e,a),locationSize:s}}return n}function kh(t){return t!==""}function A2(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function M2(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Pq=/^[ \t]*#include +<([\w\d./]+)>/gm;function B1(t){return t.replace(Pq,Rq)}const Cq=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Rq(t,e){let n=xt[e];if(n===void 0){const r=Cq.get(e);if(r!==void 0)n=xt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return B1(n)}const Oq=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function P2(t){return t.replace(Oq,Iq)}function Iq(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function C2(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Nq(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Ej?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===QH?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===qo&&(e="SHADOWMAP_TYPE_VSM"),e}function Dq(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Du:case Lu:e="ENVMAP_TYPE_CUBE";break;case p0:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Lq(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Lu:e="ENVMAP_MODE_REFRACTION";break}return e}function kq(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case JE:e="ENVMAP_BLENDING_MULTIPLY";break;case b9:e="ENVMAP_BLENDING_MIX";break;case w9:e="ENVMAP_BLENDING_ADD";break}return e}function jq(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function Uq(t,e,n,r){const i=t.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=Nq(n),c=Dq(n),u=Lq(n),f=kq(n),h=jq(n),d=n.isWebGL2?"":Tq(n),v=Aq(o),y=i.createProgram();let g,p,x=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(kh).join(`
`),g.length>0&&(g+=`
`),p=[d,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(kh).join(`
`),p.length>0&&(p+=`
`)):(g=[C2(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(kh).join(`
`),p=[d,C2(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==hs?"#define TONE_MAPPING":"",n.toneMapping!==hs?xt.tonemapping_pars_fragment:"",n.toneMapping!==hs?Eq("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",xt.colorspace_pars_fragment,Sq("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(kh).join(`
`)),a=B1(a),a=A2(a,n),a=M2(a,n),s=B1(s),s=A2(s,n),s=M2(s,n),a=P2(a),s=P2(s),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,p=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===qC?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===qC?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);const _=x+g+a,E=x+p+s,b=E2(i,i.VERTEX_SHADER,_),M=E2(i,i.FRAGMENT_SHADER,E);i.attachShader(y,b),i.attachShader(y,M),n.index0AttributeName!==void 0?i.bindAttribLocation(y,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);function S(R){if(t.debug.checkShaderErrors){const N=i.getProgramInfoLog(y).trim(),I=i.getShaderInfoLog(b).trim(),D=i.getShaderInfoLog(M).trim();let L=!0,q=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(L=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,y,b,M);else{const $=T2(i,b,"vertex"),V=T2(i,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Program Info Log: `+N+`
`+$+`
`+V)}else N!==""?console.warn("THREE.WebGLProgram: Program Info Log:",N):(I===""||D==="")&&(q=!1);q&&(R.diagnostics={runnable:L,programLog:N,vertexShader:{log:I,prefix:g},fragmentShader:{log:D,prefix:p}})}i.deleteShader(b),i.deleteShader(M),A=new Bg(i,y),T=Mq(i,y)}let A;this.getUniforms=function(){return A===void 0&&S(this),A};let T;this.getAttributes=function(){return T===void 0&&S(this),T};let P=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=i.getProgramParameter(y,_q)),P},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=xq++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=b,this.fragmentShader=M,this}let Fq=0;class Vq{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),o=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(o)===!1&&(a.add(o),o.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new Bq(e),n.set(e,r)),r}}class Bq{constructor(e){this.id=Fq++,this.code=e,this.usedTimes=0}}function $q(t,e,n,r,i,o,a){const s=new rT,l=new Vq,c=[],u=i.isWebGL2,f=i.logarithmicDepthBuffer,h=i.vertexTextures;let d=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(T){return T===0?"uv":`uv${T}`}function g(T,P,R,N,I){const D=N.fog,L=I.geometry,q=T.isMeshStandardMaterial?N.environment:null,$=(T.isMeshStandardMaterial?n:e).get(T.envMap||q),V=$&&$.mapping===p0?$.image.height:null,X=v[T.type];T.precision!==null&&(d=i.getMaxPrecision(T.precision),d!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",d,"instead."));const K=L.morphAttributes.position||L.morphAttributes.normal||L.morphAttributes.color,z=K!==void 0?K.length:0;let W=0;L.morphAttributes.position!==void 0&&(W=1),L.morphAttributes.normal!==void 0&&(W=2),L.morphAttributes.color!==void 0&&(W=3);let ee,me,_e,Ne;if(X){const Ot=vo[X];ee=Ot.vertexShader,me=Ot.fragmentShader}else ee=T.vertexShader,me=T.fragmentShader,l.update(T),_e=l.getVertexShaderID(T),Ne=l.getFragmentShaderID(T);const We=t.getRenderTarget(),Ue=I.isInstancedMesh===!0,fe=!!T.map,Re=!!T.matcap,Ee=!!$,H=!!T.aoMap,lt=!!T.lightMap,be=!!T.bumpMap,Le=!!T.normalMap,ke=!!T.displacementMap,mt=!!T.emissiveMap,Ye=!!T.metalnessMap,Ze=!!T.roughnessMap,ht=T.anisotropy>0,Mt=T.clearcoat>0,jt=T.iridescence>0,F=T.sheen>0,k=T.transmission>0,re=ht&&!!T.anisotropyMap,ye=Mt&&!!T.clearcoatMap,he=Mt&&!!T.clearcoatNormalMap,xe=Mt&&!!T.clearcoatRoughnessMap,Ce=jt&&!!T.iridescenceMap,Te=jt&&!!T.iridescenceThicknessMap,Pe=F&&!!T.sheenColorMap,Y=F&&!!T.sheenRoughnessMap,Se=!!T.specularMap,de=!!T.specularColorMap,Qe=!!T.specularIntensityMap,Ge=k&&!!T.transmissionMap,qe=k&&!!T.thicknessMap,Ve=!!T.gradientMap,De=!!T.alphaMap,vt=T.alphaTest>0,Q=!!T.alphaHash,le=!!T.extensions,ue=!!L.attributes.uv1,ne=!!L.attributes.uv2,ge=!!L.attributes.uv3;let Ie=hs;return T.toneMapped&&(We===null||We.isXRRenderTarget===!0)&&(Ie=t.toneMapping),{isWebGL2:u,shaderID:X,shaderType:T.type,shaderName:T.name,vertexShader:ee,fragmentShader:me,defines:T.defines,customVertexShaderID:_e,customFragmentShaderID:Ne,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:d,instancing:Ue,instancingColor:Ue&&I.instanceColor!==null,supportsVertexTextures:h,outputColorSpace:We===null?t.outputColorSpace:We.isXRRenderTarget===!0?We.texture.colorSpace:ya,map:fe,matcap:Re,envMap:Ee,envMapMode:Ee&&$.mapping,envMapCubeUVHeight:V,aoMap:H,lightMap:lt,bumpMap:be,normalMap:Le,displacementMap:h&&ke,emissiveMap:mt,normalMapObjectSpace:Le&&T.normalMapType===V9,normalMapTangentSpace:Le&&T.normalMapType===Nj,metalnessMap:Ye,roughnessMap:Ze,anisotropy:ht,anisotropyMap:re,clearcoat:Mt,clearcoatMap:ye,clearcoatNormalMap:he,clearcoatRoughnessMap:xe,iridescence:jt,iridescenceMap:Ce,iridescenceThicknessMap:Te,sheen:F,sheenColorMap:Pe,sheenRoughnessMap:Y,specularMap:Se,specularColorMap:de,specularIntensityMap:Qe,transmission:k,transmissionMap:Ge,thicknessMap:qe,gradientMap:Ve,opaque:T.transparent===!1&&T.blending===_u,alphaMap:De,alphaTest:vt,alphaHash:Q,combine:T.combine,mapUv:fe&&y(T.map.channel),aoMapUv:H&&y(T.aoMap.channel),lightMapUv:lt&&y(T.lightMap.channel),bumpMapUv:be&&y(T.bumpMap.channel),normalMapUv:Le&&y(T.normalMap.channel),displacementMapUv:ke&&y(T.displacementMap.channel),emissiveMapUv:mt&&y(T.emissiveMap.channel),metalnessMapUv:Ye&&y(T.metalnessMap.channel),roughnessMapUv:Ze&&y(T.roughnessMap.channel),anisotropyMapUv:re&&y(T.anisotropyMap.channel),clearcoatMapUv:ye&&y(T.clearcoatMap.channel),clearcoatNormalMapUv:he&&y(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:xe&&y(T.clearcoatRoughnessMap.channel),iridescenceMapUv:Ce&&y(T.iridescenceMap.channel),iridescenceThicknessMapUv:Te&&y(T.iridescenceThicknessMap.channel),sheenColorMapUv:Pe&&y(T.sheenColorMap.channel),sheenRoughnessMapUv:Y&&y(T.sheenRoughnessMap.channel),specularMapUv:Se&&y(T.specularMap.channel),specularColorMapUv:de&&y(T.specularColorMap.channel),specularIntensityMapUv:Qe&&y(T.specularIntensityMap.channel),transmissionMapUv:Ge&&y(T.transmissionMap.channel),thicknessMapUv:qe&&y(T.thicknessMap.channel),alphaMapUv:De&&y(T.alphaMap.channel),vertexTangents:!!L.attributes.tangent&&(Le||ht),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!L.attributes.color&&L.attributes.color.itemSize===4,vertexUv1s:ue,vertexUv2s:ne,vertexUv3s:ge,pointsUvs:I.isPoints===!0&&!!L.attributes.uv&&(fe||De),fog:!!D,useFog:T.fog===!0,fogExp2:D&&D.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:I.isSkinnedMesh===!0,morphTargets:L.morphAttributes.position!==void 0,morphNormals:L.morphAttributes.normal!==void 0,morphColors:L.morphAttributes.color!==void 0,morphTargetsCount:z,morphTextureStride:W,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:T.dithering,shadowMapEnabled:t.shadowMap.enabled&&R.length>0,shadowMapType:t.shadowMap.type,toneMapping:Ie,useLegacyLights:t._useLegacyLights,decodeVideoTexture:fe&&T.map.isVideoTexture===!0&&zt.getTransfer(T.map.colorSpace)===tn,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===Qo,flipSided:T.side===Vr,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:le&&T.extensions.derivatives===!0,extensionFragDepth:le&&T.extensions.fragDepth===!0,extensionDrawBuffers:le&&T.extensions.drawBuffers===!0,extensionShaderTextureLOD:le&&T.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:T.customProgramCacheKey()}}function p(T){const P=[];if(T.shaderID?P.push(T.shaderID):(P.push(T.customVertexShaderID),P.push(T.customFragmentShaderID)),T.defines!==void 0)for(const R in T.defines)P.push(R),P.push(T.defines[R]);return T.isRawShaderMaterial===!1&&(x(P,T),_(P,T),P.push(t.outputColorSpace)),P.push(T.customProgramCacheKey),P.join()}function x(T,P){T.push(P.precision),T.push(P.outputColorSpace),T.push(P.envMapMode),T.push(P.envMapCubeUVHeight),T.push(P.mapUv),T.push(P.alphaMapUv),T.push(P.lightMapUv),T.push(P.aoMapUv),T.push(P.bumpMapUv),T.push(P.normalMapUv),T.push(P.displacementMapUv),T.push(P.emissiveMapUv),T.push(P.metalnessMapUv),T.push(P.roughnessMapUv),T.push(P.anisotropyMapUv),T.push(P.clearcoatMapUv),T.push(P.clearcoatNormalMapUv),T.push(P.clearcoatRoughnessMapUv),T.push(P.iridescenceMapUv),T.push(P.iridescenceThicknessMapUv),T.push(P.sheenColorMapUv),T.push(P.sheenRoughnessMapUv),T.push(P.specularMapUv),T.push(P.specularColorMapUv),T.push(P.specularIntensityMapUv),T.push(P.transmissionMapUv),T.push(P.thicknessMapUv),T.push(P.combine),T.push(P.fogExp2),T.push(P.sizeAttenuation),T.push(P.morphTargetsCount),T.push(P.morphAttributeCount),T.push(P.numDirLights),T.push(P.numPointLights),T.push(P.numSpotLights),T.push(P.numSpotLightMaps),T.push(P.numHemiLights),T.push(P.numRectAreaLights),T.push(P.numDirLightShadows),T.push(P.numPointLightShadows),T.push(P.numSpotLightShadows),T.push(P.numSpotLightShadowsWithMaps),T.push(P.numLightProbes),T.push(P.shadowMapType),T.push(P.toneMapping),T.push(P.numClippingPlanes),T.push(P.numClipIntersection),T.push(P.depthPacking)}function _(T,P){s.disableAll(),P.isWebGL2&&s.enable(0),P.supportsVertexTextures&&s.enable(1),P.instancing&&s.enable(2),P.instancingColor&&s.enable(3),P.matcap&&s.enable(4),P.envMap&&s.enable(5),P.normalMapObjectSpace&&s.enable(6),P.normalMapTangentSpace&&s.enable(7),P.clearcoat&&s.enable(8),P.iridescence&&s.enable(9),P.alphaTest&&s.enable(10),P.vertexColors&&s.enable(11),P.vertexAlphas&&s.enable(12),P.vertexUv1s&&s.enable(13),P.vertexUv2s&&s.enable(14),P.vertexUv3s&&s.enable(15),P.vertexTangents&&s.enable(16),P.anisotropy&&s.enable(17),P.alphaHash&&s.enable(18),T.push(s.mask),s.disableAll(),P.fog&&s.enable(0),P.useFog&&s.enable(1),P.flatShading&&s.enable(2),P.logarithmicDepthBuffer&&s.enable(3),P.skinning&&s.enable(4),P.morphTargets&&s.enable(5),P.morphNormals&&s.enable(6),P.morphColors&&s.enable(7),P.premultipliedAlpha&&s.enable(8),P.shadowMapEnabled&&s.enable(9),P.useLegacyLights&&s.enable(10),P.doubleSided&&s.enable(11),P.flipSided&&s.enable(12),P.useDepthPacking&&s.enable(13),P.dithering&&s.enable(14),P.transmission&&s.enable(15),P.sheen&&s.enable(16),P.opaque&&s.enable(17),P.pointsUvs&&s.enable(18),P.decodeVideoTexture&&s.enable(19),T.push(s.mask)}function E(T){const P=v[T.type];let R;if(P){const N=vo[P];R=MG.clone(N.uniforms)}else R=T.uniforms;return R}function b(T,P){let R;for(let N=0,I=c.length;N<I;N++){const D=c[N];if(D.cacheKey===P){R=D,++R.usedTimes;break}}return R===void 0&&(R=new Uq(t,P,T,o),c.push(R)),R}function M(T){if(--T.usedTimes===0){const P=c.indexOf(T);c[P]=c[c.length-1],c.pop(),T.destroy()}}function S(T){l.remove(T)}function A(){l.dispose()}return{getParameters:g,getProgramCacheKey:p,getUniforms:E,acquireProgram:b,releaseProgram:M,releaseShaderCache:S,programs:c,dispose:A}}function zq(){let t=new WeakMap;function e(o){let a=t.get(o);return a===void 0&&(a={},t.set(o,a)),a}function n(o){t.delete(o)}function r(o,a,s){t.get(o)[a]=s}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function Hq(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function R2(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function O2(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function a(f,h,d,v,y,g){let p=t[e];return p===void 0?(p={id:f.id,object:f,geometry:h,material:d,groupOrder:v,renderOrder:f.renderOrder,z:y,group:g},t[e]=p):(p.id=f.id,p.object=f,p.geometry=h,p.material=d,p.groupOrder=v,p.renderOrder=f.renderOrder,p.z=y,p.group=g),e++,p}function s(f,h,d,v,y,g){const p=a(f,h,d,v,y,g);d.transmission>0?r.push(p):d.transparent===!0?i.push(p):n.push(p)}function l(f,h,d,v,y,g){const p=a(f,h,d,v,y,g);d.transmission>0?r.unshift(p):d.transparent===!0?i.unshift(p):n.unshift(p)}function c(f,h){n.length>1&&n.sort(f||Hq),r.length>1&&r.sort(h||R2),i.length>1&&i.sort(h||R2)}function u(){for(let f=e,h=t.length;f<h;f++){const d=t[f];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:s,unshift:l,finish:u,sort:c}}function Gq(){let t=new WeakMap;function e(r,i){const o=t.get(r);let a;return o===void 0?(a=new O2,t.set(r,[a])):i>=o.length?(a=new O2,o.push(a)):a=o[i],a}function n(){t=new WeakMap}return{get:e,dispose:n}}function Wq(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new te,color:new Rt};break;case"SpotLight":n={position:new te,direction:new te,color:new Rt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new te,color:new Rt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new te,skyColor:new Rt,groundColor:new Rt};break;case"RectAreaLight":n={color:new Rt,position:new te,halfWidth:new te,halfHeight:new te};break}return t[e.id]=n,n}}}function qq(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Xq=0;function Kq(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Yq(t,e){const n=new Wq,r=qq(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new te);const o=new te,a=new In,s=new In;function l(u,f){let h=0,d=0,v=0;for(let N=0;N<9;N++)i.probe[N].set(0,0,0);let y=0,g=0,p=0,x=0,_=0,E=0,b=0,M=0,S=0,A=0,T=0;u.sort(Kq);const P=f===!0?Math.PI:1;for(let N=0,I=u.length;N<I;N++){const D=u[N],L=D.color,q=D.intensity,$=D.distance,V=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)h+=L.r*q*P,d+=L.g*q*P,v+=L.b*q*P;else if(D.isLightProbe){for(let X=0;X<9;X++)i.probe[X].addScaledVector(D.sh.coefficients[X],q);T++}else if(D.isDirectionalLight){const X=n.get(D);if(X.color.copy(D.color).multiplyScalar(D.intensity*P),D.castShadow){const K=D.shadow,z=r.get(D);z.shadowBias=K.bias,z.shadowNormalBias=K.normalBias,z.shadowRadius=K.radius,z.shadowMapSize=K.mapSize,i.directionalShadow[y]=z,i.directionalShadowMap[y]=V,i.directionalShadowMatrix[y]=D.shadow.matrix,E++}i.directional[y]=X,y++}else if(D.isSpotLight){const X=n.get(D);X.position.setFromMatrixPosition(D.matrixWorld),X.color.copy(L).multiplyScalar(q*P),X.distance=$,X.coneCos=Math.cos(D.angle),X.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),X.decay=D.decay,i.spot[p]=X;const K=D.shadow;if(D.map&&(i.spotLightMap[S]=D.map,S++,K.updateMatrices(D),D.castShadow&&A++),i.spotLightMatrix[p]=K.matrix,D.castShadow){const z=r.get(D);z.shadowBias=K.bias,z.shadowNormalBias=K.normalBias,z.shadowRadius=K.radius,z.shadowMapSize=K.mapSize,i.spotShadow[p]=z,i.spotShadowMap[p]=V,M++}p++}else if(D.isRectAreaLight){const X=n.get(D);X.color.copy(L).multiplyScalar(q),X.halfWidth.set(D.width*.5,0,0),X.halfHeight.set(0,D.height*.5,0),i.rectArea[x]=X,x++}else if(D.isPointLight){const X=n.get(D);if(X.color.copy(D.color).multiplyScalar(D.intensity*P),X.distance=D.distance,X.decay=D.decay,D.castShadow){const K=D.shadow,z=r.get(D);z.shadowBias=K.bias,z.shadowNormalBias=K.normalBias,z.shadowRadius=K.radius,z.shadowMapSize=K.mapSize,z.shadowCameraNear=K.camera.near,z.shadowCameraFar=K.camera.far,i.pointShadow[g]=z,i.pointShadowMap[g]=V,i.pointShadowMatrix[g]=D.shadow.matrix,b++}i.point[g]=X,g++}else if(D.isHemisphereLight){const X=n.get(D);X.skyColor.copy(D.color).multiplyScalar(q*P),X.groundColor.copy(D.groundColor).multiplyScalar(q*P),i.hemi[_]=X,_++}}x>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Oe.LTC_FLOAT_1,i.rectAreaLTC2=Oe.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Oe.LTC_HALF_1,i.rectAreaLTC2=Oe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=d,i.ambient[2]=v;const R=i.hash;(R.directionalLength!==y||R.pointLength!==g||R.spotLength!==p||R.rectAreaLength!==x||R.hemiLength!==_||R.numDirectionalShadows!==E||R.numPointShadows!==b||R.numSpotShadows!==M||R.numSpotMaps!==S||R.numLightProbes!==T)&&(i.directional.length=y,i.spot.length=p,i.rectArea.length=x,i.point.length=g,i.hemi.length=_,i.directionalShadow.length=E,i.directionalShadowMap.length=E,i.pointShadow.length=b,i.pointShadowMap.length=b,i.spotShadow.length=M,i.spotShadowMap.length=M,i.directionalShadowMatrix.length=E,i.pointShadowMatrix.length=b,i.spotLightMatrix.length=M+S-A,i.spotLightMap.length=S,i.numSpotLightShadowsWithMaps=A,i.numLightProbes=T,R.directionalLength=y,R.pointLength=g,R.spotLength=p,R.rectAreaLength=x,R.hemiLength=_,R.numDirectionalShadows=E,R.numPointShadows=b,R.numSpotShadows=M,R.numSpotMaps=S,R.numLightProbes=T,i.version=Xq++)}function c(u,f){let h=0,d=0,v=0,y=0,g=0;const p=f.matrixWorldInverse;for(let x=0,_=u.length;x<_;x++){const E=u[x];if(E.isDirectionalLight){const b=i.directional[h];b.direction.setFromMatrixPosition(E.matrixWorld),o.setFromMatrixPosition(E.target.matrixWorld),b.direction.sub(o),b.direction.transformDirection(p),h++}else if(E.isSpotLight){const b=i.spot[v];b.position.setFromMatrixPosition(E.matrixWorld),b.position.applyMatrix4(p),b.direction.setFromMatrixPosition(E.matrixWorld),o.setFromMatrixPosition(E.target.matrixWorld),b.direction.sub(o),b.direction.transformDirection(p),v++}else if(E.isRectAreaLight){const b=i.rectArea[y];b.position.setFromMatrixPosition(E.matrixWorld),b.position.applyMatrix4(p),s.identity(),a.copy(E.matrixWorld),a.premultiply(p),s.extractRotation(a),b.halfWidth.set(E.width*.5,0,0),b.halfHeight.set(0,E.height*.5,0),b.halfWidth.applyMatrix4(s),b.halfHeight.applyMatrix4(s),y++}else if(E.isPointLight){const b=i.point[d];b.position.setFromMatrixPosition(E.matrixWorld),b.position.applyMatrix4(p),d++}else if(E.isHemisphereLight){const b=i.hemi[g];b.direction.setFromMatrixPosition(E.matrixWorld),b.direction.transformDirection(p),g++}}}return{setup:l,setupView:c,state:i}}function I2(t,e){const n=new Yq(t,e),r=[],i=[];function o(){r.length=0,i.length=0}function a(f){r.push(f)}function s(f){i.push(f)}function l(f){n.setup(r,f)}function c(f){n.setupView(r,f)}return{init:o,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:c,pushLight:a,pushShadow:s}}function Qq(t,e){let n=new WeakMap;function r(o,a=0){const s=n.get(o);let l;return s===void 0?(l=new I2(t,e),n.set(o,[l])):a>=s.length?(l=new I2(t,e),s.push(l)):l=s[a],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class Zq extends Pf{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=U9,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Jq extends Pf{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const eX=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,tX=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function nX(t,e,n){let r=new oT;const i=new gt,o=new gt,a=new Zn,s=new Zq({depthPacking:F9}),l=new Jq,c={},u=n.maxTextureSize,f={[bs]:Vr,[Vr]:bs,[Qo]:Qo},h=new _a({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new gt},radius:{value:4}},vertexShader:eX,fragmentShader:tX}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const v=new Lo;v.setAttribute("position",new So(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Gr(v,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ej;let p=this.type;this.render=function(b,M,S){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||b.length===0)return;const A=t.getRenderTarget(),T=t.getActiveCubeFace(),P=t.getActiveMipmapLevel(),R=t.state;R.setBlending(fs),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);const N=p!==qo&&this.type===qo,I=p===qo&&this.type!==qo;for(let D=0,L=b.length;D<L;D++){const q=b[D],$=q.shadow;if($===void 0){console.warn("THREE.WebGLShadowMap:",q,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;i.copy($.mapSize);const V=$.getFrameExtents();if(i.multiply(V),o.copy($.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/V.x),i.x=o.x*V.x,$.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/V.y),i.y=o.y*V.y,$.mapSize.y=o.y)),$.map===null||N===!0||I===!0){const K=this.type!==qo?{minFilter:Dr,magFilter:Dr}:{};$.map!==null&&$.map.dispose(),$.map=new Ul(i.x,i.y,K),$.map.texture.name=q.name+".shadowMap",$.camera.updateProjectionMatrix()}t.setRenderTarget($.map),t.clear();const X=$.getViewportCount();for(let K=0;K<X;K++){const z=$.getViewport(K);a.set(o.x*z.x,o.y*z.y,o.x*z.z,o.y*z.w),R.viewport(a),$.updateMatrices(q,K),r=$.getFrustum(),E(M,S,$.camera,q,this.type)}$.isPointLightShadow!==!0&&this.type===qo&&x($,S),$.needsUpdate=!1}p=this.type,g.needsUpdate=!1,t.setRenderTarget(A,T,P)};function x(b,M){const S=e.update(y);h.defines.VSM_SAMPLES!==b.blurSamples&&(h.defines.VSM_SAMPLES=b.blurSamples,d.defines.VSM_SAMPLES=b.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new Ul(i.x,i.y)),h.uniforms.shadow_pass.value=b.map.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,t.setRenderTarget(b.mapPass),t.clear(),t.renderBufferDirect(M,null,S,h,y,null),d.uniforms.shadow_pass.value=b.mapPass.texture,d.uniforms.resolution.value=b.mapSize,d.uniforms.radius.value=b.radius,t.setRenderTarget(b.map),t.clear(),t.renderBufferDirect(M,null,S,d,y,null)}function _(b,M,S,A){let T=null;const P=S.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(P!==void 0)T=P;else if(T=S.isPointLight===!0?l:s,t.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const R=T.uuid,N=M.uuid;let I=c[R];I===void 0&&(I={},c[R]=I);let D=I[N];D===void 0&&(D=T.clone(),I[N]=D),T=D}if(T.visible=M.visible,T.wireframe=M.wireframe,A===qo?T.side=M.shadowSide!==null?M.shadowSide:M.side:T.side=M.shadowSide!==null?M.shadowSide:f[M.side],T.alphaMap=M.alphaMap,T.alphaTest=M.alphaTest,T.map=M.map,T.clipShadows=M.clipShadows,T.clippingPlanes=M.clippingPlanes,T.clipIntersection=M.clipIntersection,T.displacementMap=M.displacementMap,T.displacementScale=M.displacementScale,T.displacementBias=M.displacementBias,T.wireframeLinewidth=M.wireframeLinewidth,T.linewidth=M.linewidth,S.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const R=t.properties.get(T);R.light=S}return T}function E(b,M,S,A,T){if(b.visible===!1)return;if(b.layers.test(M.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&T===qo)&&(!b.frustumCulled||r.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,b.matrixWorld);const N=e.update(b),I=b.material;if(Array.isArray(I)){const D=N.groups;for(let L=0,q=D.length;L<q;L++){const $=D[L],V=I[$.materialIndex];if(V&&V.visible){const X=_(b,V,A,T);t.renderBufferDirect(S,null,N,X,b,$)}}}else if(I.visible){const D=_(b,I,A,T);t.renderBufferDirect(S,null,N,D,b,null)}}const R=b.children;for(let N=0,I=R.length;N<I;N++)E(R[N],M,S,A,T)}}function rX(t,e,n){const r=n.isWebGL2;function i(){let Q=!1;const le=new Zn;let ue=null;const ne=new Zn(0,0,0,0);return{setMask:function(ge){ue!==ge&&!Q&&(t.colorMask(ge,ge,ge,ge),ue=ge)},setLocked:function(ge){Q=ge},setClear:function(ge,Ie,rt,Ot,En){En===!0&&(ge*=Ot,Ie*=Ot,rt*=Ot),le.set(ge,Ie,rt,Ot),ne.equals(le)===!1&&(t.clearColor(ge,Ie,rt,Ot),ne.copy(le))},reset:function(){Q=!1,ue=null,ne.set(-1,0,0,0)}}}function o(){let Q=!1,le=null,ue=null,ne=null;return{setTest:function(ge){ge?fe(t.DEPTH_TEST):Re(t.DEPTH_TEST)},setMask:function(ge){le!==ge&&!Q&&(t.depthMask(ge),le=ge)},setFunc:function(ge){if(ue!==ge){switch(ge){case p9:t.depthFunc(t.NEVER);break;case m9:t.depthFunc(t.ALWAYS);break;case g9:t.depthFunc(t.LESS);break;case wv:t.depthFunc(t.LEQUAL);break;case v9:t.depthFunc(t.EQUAL);break;case y9:t.depthFunc(t.GEQUAL);break;case _9:t.depthFunc(t.GREATER);break;case x9:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}ue=ge}},setLocked:function(ge){Q=ge},setClear:function(ge){ne!==ge&&(t.clearDepth(ge),ne=ge)},reset:function(){Q=!1,le=null,ue=null,ne=null}}}function a(){let Q=!1,le=null,ue=null,ne=null,ge=null,Ie=null,rt=null,Ot=null,En=null;return{setTest:function(dt){Q||(dt?fe(t.STENCIL_TEST):Re(t.STENCIL_TEST))},setMask:function(dt){le!==dt&&!Q&&(t.stencilMask(dt),le=dt)},setFunc:function(dt,Tn,Dn){(ue!==dt||ne!==Tn||ge!==Dn)&&(t.stencilFunc(dt,Tn,Dn),ue=dt,ne=Tn,ge=Dn)},setOp:function(dt,Tn,Dn){(Ie!==dt||rt!==Tn||Ot!==Dn)&&(t.stencilOp(dt,Tn,Dn),Ie=dt,rt=Tn,Ot=Dn)},setLocked:function(dt){Q=dt},setClear:function(dt){En!==dt&&(t.clearStencil(dt),En=dt)},reset:function(){Q=!1,le=null,ue=null,ne=null,ge=null,Ie=null,rt=null,Ot=null,En=null}}}const s=new i,l=new o,c=new a,u=new WeakMap,f=new WeakMap;let h={},d={},v=new WeakMap,y=[],g=null,p=!1,x=null,_=null,E=null,b=null,M=null,S=null,A=null,T=new Rt(0,0,0),P=0,R=!1,N=null,I=null,D=null,L=null,q=null;const $=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let V=!1,X=0;const K=t.getParameter(t.VERSION);K.indexOf("WebGL")!==-1?(X=parseFloat(/^WebGL (\d)/.exec(K)[1]),V=X>=1):K.indexOf("OpenGL ES")!==-1&&(X=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),V=X>=2);let z=null,W={};const ee=t.getParameter(t.SCISSOR_BOX),me=t.getParameter(t.VIEWPORT),_e=new Zn().fromArray(ee),Ne=new Zn().fromArray(me);function We(Q,le,ue,ne){const ge=new Uint8Array(4),Ie=t.createTexture();t.bindTexture(Q,Ie),t.texParameteri(Q,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Q,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let rt=0;rt<ue;rt++)r&&(Q===t.TEXTURE_3D||Q===t.TEXTURE_2D_ARRAY)?t.texImage3D(le,0,t.RGBA,1,1,ne,0,t.RGBA,t.UNSIGNED_BYTE,ge):t.texImage2D(le+rt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,ge);return Ie}const Ue={};Ue[t.TEXTURE_2D]=We(t.TEXTURE_2D,t.TEXTURE_2D,1),Ue[t.TEXTURE_CUBE_MAP]=We(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Ue[t.TEXTURE_2D_ARRAY]=We(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Ue[t.TEXTURE_3D]=We(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),s.setClear(0,0,0,1),l.setClear(1),c.setClear(0),fe(t.DEPTH_TEST),l.setFunc(wv),Ye(!1),Ze(pC),fe(t.CULL_FACE),ke(fs);function fe(Q){h[Q]!==!0&&(t.enable(Q),h[Q]=!0)}function Re(Q){h[Q]!==!1&&(t.disable(Q),h[Q]=!1)}function Ee(Q,le){return d[Q]!==le?(t.bindFramebuffer(Q,le),d[Q]=le,r&&(Q===t.DRAW_FRAMEBUFFER&&(d[t.FRAMEBUFFER]=le),Q===t.FRAMEBUFFER&&(d[t.DRAW_FRAMEBUFFER]=le)),!0):!1}function H(Q,le){let ue=y,ne=!1;if(Q)if(ue=v.get(le),ue===void 0&&(ue=[],v.set(le,ue)),Q.isWebGLMultipleRenderTargets){const ge=Q.texture;if(ue.length!==ge.length||ue[0]!==t.COLOR_ATTACHMENT0){for(let Ie=0,rt=ge.length;Ie<rt;Ie++)ue[Ie]=t.COLOR_ATTACHMENT0+Ie;ue.length=ge.length,ne=!0}}else ue[0]!==t.COLOR_ATTACHMENT0&&(ue[0]=t.COLOR_ATTACHMENT0,ne=!0);else ue[0]!==t.BACK&&(ue[0]=t.BACK,ne=!0);ne&&(n.isWebGL2?t.drawBuffers(ue):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ue))}function lt(Q){return g!==Q?(t.useProgram(Q),g=Q,!0):!1}const be={[ll]:t.FUNC_ADD,[JH]:t.FUNC_SUBTRACT,[e9]:t.FUNC_REVERSE_SUBTRACT};if(r)be[vC]=t.MIN,be[yC]=t.MAX;else{const Q=e.get("EXT_blend_minmax");Q!==null&&(be[vC]=Q.MIN_EXT,be[yC]=Q.MAX_EXT)}const Le={[t9]:t.ZERO,[n9]:t.ONE,[r9]:t.SRC_COLOR,[N1]:t.SRC_ALPHA,[c9]:t.SRC_ALPHA_SATURATE,[s9]:t.DST_COLOR,[o9]:t.DST_ALPHA,[i9]:t.ONE_MINUS_SRC_COLOR,[D1]:t.ONE_MINUS_SRC_ALPHA,[l9]:t.ONE_MINUS_DST_COLOR,[a9]:t.ONE_MINUS_DST_ALPHA,[u9]:t.CONSTANT_COLOR,[f9]:t.ONE_MINUS_CONSTANT_COLOR,[h9]:t.CONSTANT_ALPHA,[d9]:t.ONE_MINUS_CONSTANT_ALPHA};function ke(Q,le,ue,ne,ge,Ie,rt,Ot,En,dt){if(Q===fs){p===!0&&(Re(t.BLEND),p=!1);return}if(p===!1&&(fe(t.BLEND),p=!0),Q!==ZH){if(Q!==x||dt!==R){if((_!==ll||M!==ll)&&(t.blendEquation(t.FUNC_ADD),_=ll,M=ll),dt)switch(Q){case _u:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case I1:t.blendFunc(t.ONE,t.ONE);break;case mC:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case gC:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}else switch(Q){case _u:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case I1:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case mC:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case gC:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}E=null,b=null,S=null,A=null,T.set(0,0,0),P=0,x=Q,R=dt}return}ge=ge||le,Ie=Ie||ue,rt=rt||ne,(le!==_||ge!==M)&&(t.blendEquationSeparate(be[le],be[ge]),_=le,M=ge),(ue!==E||ne!==b||Ie!==S||rt!==A)&&(t.blendFuncSeparate(Le[ue],Le[ne],Le[Ie],Le[rt]),E=ue,b=ne,S=Ie,A=rt),(Ot.equals(T)===!1||En!==P)&&(t.blendColor(Ot.r,Ot.g,Ot.b,En),T.copy(Ot),P=En),x=Q,R=!1}function mt(Q,le){Q.side===Qo?Re(t.CULL_FACE):fe(t.CULL_FACE);let ue=Q.side===Vr;le&&(ue=!ue),Ye(ue),Q.blending===_u&&Q.transparent===!1?ke(fs):ke(Q.blending,Q.blendEquation,Q.blendSrc,Q.blendDst,Q.blendEquationAlpha,Q.blendSrcAlpha,Q.blendDstAlpha,Q.blendColor,Q.blendAlpha,Q.premultipliedAlpha),l.setFunc(Q.depthFunc),l.setTest(Q.depthTest),l.setMask(Q.depthWrite),s.setMask(Q.colorWrite);const ne=Q.stencilWrite;c.setTest(ne),ne&&(c.setMask(Q.stencilWriteMask),c.setFunc(Q.stencilFunc,Q.stencilRef,Q.stencilFuncMask),c.setOp(Q.stencilFail,Q.stencilZFail,Q.stencilZPass)),Mt(Q.polygonOffset,Q.polygonOffsetFactor,Q.polygonOffsetUnits),Q.alphaToCoverage===!0?fe(t.SAMPLE_ALPHA_TO_COVERAGE):Re(t.SAMPLE_ALPHA_TO_COVERAGE)}function Ye(Q){N!==Q&&(Q?t.frontFace(t.CW):t.frontFace(t.CCW),N=Q)}function Ze(Q){Q!==KH?(fe(t.CULL_FACE),Q!==I&&(Q===pC?t.cullFace(t.BACK):Q===YH?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Re(t.CULL_FACE),I=Q}function ht(Q){Q!==D&&(V&&t.lineWidth(Q),D=Q)}function Mt(Q,le,ue){Q?(fe(t.POLYGON_OFFSET_FILL),(L!==le||q!==ue)&&(t.polygonOffset(le,ue),L=le,q=ue)):Re(t.POLYGON_OFFSET_FILL)}function jt(Q){Q?fe(t.SCISSOR_TEST):Re(t.SCISSOR_TEST)}function F(Q){Q===void 0&&(Q=t.TEXTURE0+$-1),z!==Q&&(t.activeTexture(Q),z=Q)}function k(Q,le,ue){ue===void 0&&(z===null?ue=t.TEXTURE0+$-1:ue=z);let ne=W[ue];ne===void 0&&(ne={type:void 0,texture:void 0},W[ue]=ne),(ne.type!==Q||ne.texture!==le)&&(z!==ue&&(t.activeTexture(ue),z=ue),t.bindTexture(Q,le||Ue[Q]),ne.type=Q,ne.texture=le)}function re(){const Q=W[z];Q!==void 0&&Q.type!==void 0&&(t.bindTexture(Q.type,null),Q.type=void 0,Q.texture=void 0)}function ye(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function he(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function xe(){try{t.texSubImage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Ce(){try{t.texSubImage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Te(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Pe(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Y(){try{t.texStorage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Se(){try{t.texStorage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function de(){try{t.texImage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Qe(){try{t.texImage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Ge(Q){_e.equals(Q)===!1&&(t.scissor(Q.x,Q.y,Q.z,Q.w),_e.copy(Q))}function qe(Q){Ne.equals(Q)===!1&&(t.viewport(Q.x,Q.y,Q.z,Q.w),Ne.copy(Q))}function Ve(Q,le){let ue=f.get(le);ue===void 0&&(ue=new WeakMap,f.set(le,ue));let ne=ue.get(Q);ne===void 0&&(ne=t.getUniformBlockIndex(le,Q.name),ue.set(Q,ne))}function De(Q,le){const ne=f.get(le).get(Q);u.get(le)!==ne&&(t.uniformBlockBinding(le,ne,Q.__bindingPointIndex),u.set(le,ne))}function vt(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),h={},z=null,W={},d={},v=new WeakMap,y=[],g=null,p=!1,x=null,_=null,E=null,b=null,M=null,S=null,A=null,T=new Rt(0,0,0),P=0,R=!1,N=null,I=null,D=null,L=null,q=null,_e.set(0,0,t.canvas.width,t.canvas.height),Ne.set(0,0,t.canvas.width,t.canvas.height),s.reset(),l.reset(),c.reset()}return{buffers:{color:s,depth:l,stencil:c},enable:fe,disable:Re,bindFramebuffer:Ee,drawBuffers:H,useProgram:lt,setBlending:ke,setMaterial:mt,setFlipSided:Ye,setCullFace:Ze,setLineWidth:ht,setPolygonOffset:Mt,setScissorTest:jt,activeTexture:F,bindTexture:k,unbindTexture:re,compressedTexImage2D:ye,compressedTexImage3D:he,texImage2D:de,texImage3D:Qe,updateUBOMapping:Ve,uniformBlockBinding:De,texStorage2D:Y,texStorage3D:Se,texSubImage2D:xe,texSubImage3D:Ce,compressedTexSubImage2D:Te,compressedTexSubImage3D:Pe,scissor:Ge,viewport:qe,reset:vt}}function iX(t,e,n,r,i,o,a){const s=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,f=i.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let y;const g=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(F,k){return p?new OffscreenCanvas(F,k):Ud("canvas")}function _(F,k,re,ye){let he=1;if((F.width>ye||F.height>ye)&&(he=ye/Math.max(F.width,F.height)),he<1||k===!0)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap){const xe=k?Mv:Math.floor,Ce=xe(he*F.width),Te=xe(he*F.height);y===void 0&&(y=x(Ce,Te));const Pe=re?x(Ce,Te):y;return Pe.width=Ce,Pe.height=Te,Pe.getContext("2d").drawImage(F,0,0,Ce,Te),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+Ce+"x"+Te+")."),Pe}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F;return F}function E(F){return V1(F.width)&&V1(F.height)}function b(F){return s?!1:F.wrapS!==Ji||F.wrapT!==Ji||F.minFilter!==Dr&&F.minFilter!==Mi}function M(F,k){return F.generateMipmaps&&k&&F.minFilter!==Dr&&F.minFilter!==Mi}function S(F){t.generateMipmap(F)}function A(F,k,re,ye,he=!1){if(s===!1)return k;if(F!==null){if(t[F]!==void 0)return t[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let xe=k;if(k===t.RED&&(re===t.FLOAT&&(xe=t.R32F),re===t.HALF_FLOAT&&(xe=t.R16F),re===t.UNSIGNED_BYTE&&(xe=t.R8)),k===t.RED_INTEGER&&(re===t.UNSIGNED_BYTE&&(xe=t.R8UI),re===t.UNSIGNED_SHORT&&(xe=t.R16UI),re===t.UNSIGNED_INT&&(xe=t.R32UI),re===t.BYTE&&(xe=t.R8I),re===t.SHORT&&(xe=t.R16I),re===t.INT&&(xe=t.R32I)),k===t.RG&&(re===t.FLOAT&&(xe=t.RG32F),re===t.HALF_FLOAT&&(xe=t.RG16F),re===t.UNSIGNED_BYTE&&(xe=t.RG8)),k===t.RGBA){const Ce=he?Sv:zt.getTransfer(ye);re===t.FLOAT&&(xe=t.RGBA32F),re===t.HALF_FLOAT&&(xe=t.RGBA16F),re===t.UNSIGNED_BYTE&&(xe=Ce===tn?t.SRGB8_ALPHA8:t.RGBA8),re===t.UNSIGNED_SHORT_4_4_4_4&&(xe=t.RGBA4),re===t.UNSIGNED_SHORT_5_5_5_1&&(xe=t.RGB5_A1)}return(xe===t.R16F||xe===t.R32F||xe===t.RG16F||xe===t.RG32F||xe===t.RGBA16F||xe===t.RGBA32F)&&e.get("EXT_color_buffer_float"),xe}function T(F,k,re){return M(F,re)===!0||F.isFramebufferTexture&&F.minFilter!==Dr&&F.minFilter!==Mi?Math.log2(Math.max(k.width,k.height))+1:F.mipmaps!==void 0&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?k.mipmaps.length:1}function P(F){return F===Dr||F===_C||F===cx?t.NEAREST:t.LINEAR}function R(F){const k=F.target;k.removeEventListener("dispose",R),I(k),k.isVideoTexture&&v.delete(k)}function N(F){const k=F.target;k.removeEventListener("dispose",N),L(k)}function I(F){const k=r.get(F);if(k.__webglInit===void 0)return;const re=F.source,ye=g.get(re);if(ye){const he=ye[k.__cacheKey];he.usedTimes--,he.usedTimes===0&&D(F),Object.keys(ye).length===0&&g.delete(re)}r.remove(F)}function D(F){const k=r.get(F);t.deleteTexture(k.__webglTexture);const re=F.source,ye=g.get(re);delete ye[k.__cacheKey],a.memory.textures--}function L(F){const k=F.texture,re=r.get(F),ye=r.get(k);if(ye.__webglTexture!==void 0&&(t.deleteTexture(ye.__webglTexture),a.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let he=0;he<6;he++){if(Array.isArray(re.__webglFramebuffer[he]))for(let xe=0;xe<re.__webglFramebuffer[he].length;xe++)t.deleteFramebuffer(re.__webglFramebuffer[he][xe]);else t.deleteFramebuffer(re.__webglFramebuffer[he]);re.__webglDepthbuffer&&t.deleteRenderbuffer(re.__webglDepthbuffer[he])}else{if(Array.isArray(re.__webglFramebuffer))for(let he=0;he<re.__webglFramebuffer.length;he++)t.deleteFramebuffer(re.__webglFramebuffer[he]);else t.deleteFramebuffer(re.__webglFramebuffer);if(re.__webglDepthbuffer&&t.deleteRenderbuffer(re.__webglDepthbuffer),re.__webglMultisampledFramebuffer&&t.deleteFramebuffer(re.__webglMultisampledFramebuffer),re.__webglColorRenderbuffer)for(let he=0;he<re.__webglColorRenderbuffer.length;he++)re.__webglColorRenderbuffer[he]&&t.deleteRenderbuffer(re.__webglColorRenderbuffer[he]);re.__webglDepthRenderbuffer&&t.deleteRenderbuffer(re.__webglDepthRenderbuffer)}if(F.isWebGLMultipleRenderTargets)for(let he=0,xe=k.length;he<xe;he++){const Ce=r.get(k[he]);Ce.__webglTexture&&(t.deleteTexture(Ce.__webglTexture),a.memory.textures--),r.remove(k[he])}r.remove(k),r.remove(F)}let q=0;function $(){q=0}function V(){const F=q;return F>=l&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+l),q+=1,F}function X(F){const k=[];return k.push(F.wrapS),k.push(F.wrapT),k.push(F.wrapR||0),k.push(F.magFilter),k.push(F.minFilter),k.push(F.anisotropy),k.push(F.internalFormat),k.push(F.format),k.push(F.type),k.push(F.generateMipmaps),k.push(F.premultiplyAlpha),k.push(F.flipY),k.push(F.unpackAlignment),k.push(F.colorSpace),k.join()}function K(F,k){const re=r.get(F);if(F.isVideoTexture&&Mt(F),F.isRenderTargetTexture===!1&&F.version>0&&re.__version!==F.version){const ye=F.image;if(ye===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ye.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{fe(re,F,k);return}}n.bindTexture(t.TEXTURE_2D,re.__webglTexture,t.TEXTURE0+k)}function z(F,k){const re=r.get(F);if(F.version>0&&re.__version!==F.version){fe(re,F,k);return}n.bindTexture(t.TEXTURE_2D_ARRAY,re.__webglTexture,t.TEXTURE0+k)}function W(F,k){const re=r.get(F);if(F.version>0&&re.__version!==F.version){fe(re,F,k);return}n.bindTexture(t.TEXTURE_3D,re.__webglTexture,t.TEXTURE0+k)}function ee(F,k){const re=r.get(F);if(F.version>0&&re.__version!==F.version){Re(re,F,k);return}n.bindTexture(t.TEXTURE_CUBE_MAP,re.__webglTexture,t.TEXTURE0+k)}const me={[j1]:t.REPEAT,[Ji]:t.CLAMP_TO_EDGE,[U1]:t.MIRRORED_REPEAT},_e={[Dr]:t.NEAREST,[_C]:t.NEAREST_MIPMAP_NEAREST,[cx]:t.NEAREST_MIPMAP_LINEAR,[Mi]:t.LINEAR,[P9]:t.LINEAR_MIPMAP_NEAREST,[Ld]:t.LINEAR_MIPMAP_LINEAR},Ne={[B9]:t.NEVER,[X9]:t.ALWAYS,[$9]:t.LESS,[H9]:t.LEQUAL,[z9]:t.EQUAL,[q9]:t.GEQUAL,[G9]:t.GREATER,[W9]:t.NOTEQUAL};function We(F,k,re){if(re?(t.texParameteri(F,t.TEXTURE_WRAP_S,me[k.wrapS]),t.texParameteri(F,t.TEXTURE_WRAP_T,me[k.wrapT]),(F===t.TEXTURE_3D||F===t.TEXTURE_2D_ARRAY)&&t.texParameteri(F,t.TEXTURE_WRAP_R,me[k.wrapR]),t.texParameteri(F,t.TEXTURE_MAG_FILTER,_e[k.magFilter]),t.texParameteri(F,t.TEXTURE_MIN_FILTER,_e[k.minFilter])):(t.texParameteri(F,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(F,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(F===t.TEXTURE_3D||F===t.TEXTURE_2D_ARRAY)&&t.texParameteri(F,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(k.wrapS!==Ji||k.wrapT!==Ji)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(F,t.TEXTURE_MAG_FILTER,P(k.magFilter)),t.texParameteri(F,t.TEXTURE_MIN_FILTER,P(k.minFilter)),k.minFilter!==Dr&&k.minFilter!==Mi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),k.compareFunction&&(t.texParameteri(F,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(F,t.TEXTURE_COMPARE_FUNC,Ne[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const ye=e.get("EXT_texture_filter_anisotropic");if(k.magFilter===Dr||k.minFilter!==cx&&k.minFilter!==Ld||k.type===Ja&&e.has("OES_texture_float_linear")===!1||s===!1&&k.type===kd&&e.has("OES_texture_half_float_linear")===!1)return;(k.anisotropy>1||r.get(k).__currentAnisotropy)&&(t.texParameterf(F,ye.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,i.getMaxAnisotropy())),r.get(k).__currentAnisotropy=k.anisotropy)}}function Ue(F,k){let re=!1;F.__webglInit===void 0&&(F.__webglInit=!0,k.addEventListener("dispose",R));const ye=k.source;let he=g.get(ye);he===void 0&&(he={},g.set(ye,he));const xe=X(k);if(xe!==F.__cacheKey){he[xe]===void 0&&(he[xe]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,re=!0),he[xe].usedTimes++;const Ce=he[F.__cacheKey];Ce!==void 0&&(he[F.__cacheKey].usedTimes--,Ce.usedTimes===0&&D(k)),F.__cacheKey=xe,F.__webglTexture=he[xe].texture}return re}function fe(F,k,re){let ye=t.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(ye=t.TEXTURE_2D_ARRAY),k.isData3DTexture&&(ye=t.TEXTURE_3D);const he=Ue(F,k),xe=k.source;n.bindTexture(ye,F.__webglTexture,t.TEXTURE0+re);const Ce=r.get(xe);if(xe.version!==Ce.__version||he===!0){n.activeTexture(t.TEXTURE0+re);const Te=zt.getPrimaries(zt.workingColorSpace),Pe=k.colorSpace===Pi?null:zt.getPrimaries(k.colorSpace),Y=k.colorSpace===Pi||Te===Pe?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,k.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,k.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Y);const Se=b(k)&&E(k.image)===!1;let de=_(k.image,Se,!1,u);de=jt(k,de);const Qe=E(de)||s,Ge=o.convert(k.format,k.colorSpace);let qe=o.convert(k.type),Ve=A(k.internalFormat,Ge,qe,k.colorSpace,k.isVideoTexture);We(ye,k,Qe);let De;const vt=k.mipmaps,Q=s&&k.isVideoTexture!==!0,le=Ce.__version===void 0||he===!0,ue=T(k,de,Qe);if(k.isDepthTexture)Ve=t.DEPTH_COMPONENT,s?k.type===Ja?Ve=t.DEPTH_COMPONENT32F:k.type===Za?Ve=t.DEPTH_COMPONENT24:k.type===Tl?Ve=t.DEPTH24_STENCIL8:Ve=t.DEPTH_COMPONENT16:k.type===Ja&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),k.format===Al&&Ve===t.DEPTH_COMPONENT&&k.type!==eT&&k.type!==Za&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),k.type=Za,qe=o.convert(k.type)),k.format===ku&&Ve===t.DEPTH_COMPONENT&&(Ve=t.DEPTH_STENCIL,k.type!==Tl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),k.type=Tl,qe=o.convert(k.type))),le&&(Q?n.texStorage2D(t.TEXTURE_2D,1,Ve,de.width,de.height):n.texImage2D(t.TEXTURE_2D,0,Ve,de.width,de.height,0,Ge,qe,null));else if(k.isDataTexture)if(vt.length>0&&Qe){Q&&le&&n.texStorage2D(t.TEXTURE_2D,ue,Ve,vt[0].width,vt[0].height);for(let ne=0,ge=vt.length;ne<ge;ne++)De=vt[ne],Q?n.texSubImage2D(t.TEXTURE_2D,ne,0,0,De.width,De.height,Ge,qe,De.data):n.texImage2D(t.TEXTURE_2D,ne,Ve,De.width,De.height,0,Ge,qe,De.data);k.generateMipmaps=!1}else Q?(le&&n.texStorage2D(t.TEXTURE_2D,ue,Ve,de.width,de.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,de.width,de.height,Ge,qe,de.data)):n.texImage2D(t.TEXTURE_2D,0,Ve,de.width,de.height,0,Ge,qe,de.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){Q&&le&&n.texStorage3D(t.TEXTURE_2D_ARRAY,ue,Ve,vt[0].width,vt[0].height,de.depth);for(let ne=0,ge=vt.length;ne<ge;ne++)De=vt[ne],k.format!==eo?Ge!==null?Q?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,ne,0,0,0,De.width,De.height,de.depth,Ge,De.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,ne,Ve,De.width,De.height,de.depth,0,De.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Q?n.texSubImage3D(t.TEXTURE_2D_ARRAY,ne,0,0,0,De.width,De.height,de.depth,Ge,qe,De.data):n.texImage3D(t.TEXTURE_2D_ARRAY,ne,Ve,De.width,De.height,de.depth,0,Ge,qe,De.data)}else{Q&&le&&n.texStorage2D(t.TEXTURE_2D,ue,Ve,vt[0].width,vt[0].height);for(let ne=0,ge=vt.length;ne<ge;ne++)De=vt[ne],k.format!==eo?Ge!==null?Q?n.compressedTexSubImage2D(t.TEXTURE_2D,ne,0,0,De.width,De.height,Ge,De.data):n.compressedTexImage2D(t.TEXTURE_2D,ne,Ve,De.width,De.height,0,De.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Q?n.texSubImage2D(t.TEXTURE_2D,ne,0,0,De.width,De.height,Ge,qe,De.data):n.texImage2D(t.TEXTURE_2D,ne,Ve,De.width,De.height,0,Ge,qe,De.data)}else if(k.isDataArrayTexture)Q?(le&&n.texStorage3D(t.TEXTURE_2D_ARRAY,ue,Ve,de.width,de.height,de.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,de.width,de.height,de.depth,Ge,qe,de.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Ve,de.width,de.height,de.depth,0,Ge,qe,de.data);else if(k.isData3DTexture)Q?(le&&n.texStorage3D(t.TEXTURE_3D,ue,Ve,de.width,de.height,de.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,de.width,de.height,de.depth,Ge,qe,de.data)):n.texImage3D(t.TEXTURE_3D,0,Ve,de.width,de.height,de.depth,0,Ge,qe,de.data);else if(k.isFramebufferTexture){if(le)if(Q)n.texStorage2D(t.TEXTURE_2D,ue,Ve,de.width,de.height);else{let ne=de.width,ge=de.height;for(let Ie=0;Ie<ue;Ie++)n.texImage2D(t.TEXTURE_2D,Ie,Ve,ne,ge,0,Ge,qe,null),ne>>=1,ge>>=1}}else if(vt.length>0&&Qe){Q&&le&&n.texStorage2D(t.TEXTURE_2D,ue,Ve,vt[0].width,vt[0].height);for(let ne=0,ge=vt.length;ne<ge;ne++)De=vt[ne],Q?n.texSubImage2D(t.TEXTURE_2D,ne,0,0,Ge,qe,De):n.texImage2D(t.TEXTURE_2D,ne,Ve,Ge,qe,De);k.generateMipmaps=!1}else Q?(le&&n.texStorage2D(t.TEXTURE_2D,ue,Ve,de.width,de.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ge,qe,de)):n.texImage2D(t.TEXTURE_2D,0,Ve,Ge,qe,de);M(k,Qe)&&S(ye),Ce.__version=xe.version,k.onUpdate&&k.onUpdate(k)}F.__version=k.version}function Re(F,k,re){if(k.image.length!==6)return;const ye=Ue(F,k),he=k.source;n.bindTexture(t.TEXTURE_CUBE_MAP,F.__webglTexture,t.TEXTURE0+re);const xe=r.get(he);if(he.version!==xe.__version||ye===!0){n.activeTexture(t.TEXTURE0+re);const Ce=zt.getPrimaries(zt.workingColorSpace),Te=k.colorSpace===Pi?null:zt.getPrimaries(k.colorSpace),Pe=k.colorSpace===Pi||Ce===Te?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,k.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,k.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Pe);const Y=k.isCompressedTexture||k.image[0].isCompressedTexture,Se=k.image[0]&&k.image[0].isDataTexture,de=[];for(let ne=0;ne<6;ne++)!Y&&!Se?de[ne]=_(k.image[ne],!1,!0,c):de[ne]=Se?k.image[ne].image:k.image[ne],de[ne]=jt(k,de[ne]);const Qe=de[0],Ge=E(Qe)||s,qe=o.convert(k.format,k.colorSpace),Ve=o.convert(k.type),De=A(k.internalFormat,qe,Ve,k.colorSpace),vt=s&&k.isVideoTexture!==!0,Q=xe.__version===void 0||ye===!0;let le=T(k,Qe,Ge);We(t.TEXTURE_CUBE_MAP,k,Ge);let ue;if(Y){vt&&Q&&n.texStorage2D(t.TEXTURE_CUBE_MAP,le,De,Qe.width,Qe.height);for(let ne=0;ne<6;ne++){ue=de[ne].mipmaps;for(let ge=0;ge<ue.length;ge++){const Ie=ue[ge];k.format!==eo?qe!==null?vt?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge,0,0,Ie.width,Ie.height,qe,Ie.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge,De,Ie.width,Ie.height,0,Ie.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):vt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge,0,0,Ie.width,Ie.height,qe,Ve,Ie.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge,De,Ie.width,Ie.height,0,qe,Ve,Ie.data)}}}else{ue=k.mipmaps,vt&&Q&&(ue.length>0&&le++,n.texStorage2D(t.TEXTURE_CUBE_MAP,le,De,de[0].width,de[0].height));for(let ne=0;ne<6;ne++)if(Se){vt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,0,0,de[ne].width,de[ne].height,qe,Ve,de[ne].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,De,de[ne].width,de[ne].height,0,qe,Ve,de[ne].data);for(let ge=0;ge<ue.length;ge++){const rt=ue[ge].image[ne].image;vt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge+1,0,0,rt.width,rt.height,qe,Ve,rt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge+1,De,rt.width,rt.height,0,qe,Ve,rt.data)}}else{vt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,0,0,qe,Ve,de[ne]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,De,qe,Ve,de[ne]);for(let ge=0;ge<ue.length;ge++){const Ie=ue[ge];vt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge+1,0,0,qe,Ve,Ie.image[ne]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge+1,De,qe,Ve,Ie.image[ne])}}}M(k,Ge)&&S(t.TEXTURE_CUBE_MAP),xe.__version=he.version,k.onUpdate&&k.onUpdate(k)}F.__version=k.version}function Ee(F,k,re,ye,he,xe){const Ce=o.convert(re.format,re.colorSpace),Te=o.convert(re.type),Pe=A(re.internalFormat,Ce,Te,re.colorSpace);if(!r.get(k).__hasExternalTextures){const Se=Math.max(1,k.width>>xe),de=Math.max(1,k.height>>xe);he===t.TEXTURE_3D||he===t.TEXTURE_2D_ARRAY?n.texImage3D(he,xe,Pe,Se,de,k.depth,0,Ce,Te,null):n.texImage2D(he,xe,Pe,Se,de,0,Ce,Te,null)}n.bindFramebuffer(t.FRAMEBUFFER,F),ht(k)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,ye,he,r.get(re).__webglTexture,0,Ze(k)):(he===t.TEXTURE_2D||he>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&he<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,ye,he,r.get(re).__webglTexture,xe),n.bindFramebuffer(t.FRAMEBUFFER,null)}function H(F,k,re){if(t.bindRenderbuffer(t.RENDERBUFFER,F),k.depthBuffer&&!k.stencilBuffer){let ye=s===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(re||ht(k)){const he=k.depthTexture;he&&he.isDepthTexture&&(he.type===Ja?ye=t.DEPTH_COMPONENT32F:he.type===Za&&(ye=t.DEPTH_COMPONENT24));const xe=Ze(k);ht(k)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,xe,ye,k.width,k.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,xe,ye,k.width,k.height)}else t.renderbufferStorage(t.RENDERBUFFER,ye,k.width,k.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,F)}else if(k.depthBuffer&&k.stencilBuffer){const ye=Ze(k);re&&ht(k)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,ye,t.DEPTH24_STENCIL8,k.width,k.height):ht(k)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ye,t.DEPTH24_STENCIL8,k.width,k.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,k.width,k.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,F)}else{const ye=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let he=0;he<ye.length;he++){const xe=ye[he],Ce=o.convert(xe.format,xe.colorSpace),Te=o.convert(xe.type),Pe=A(xe.internalFormat,Ce,Te,xe.colorSpace),Y=Ze(k);re&&ht(k)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Y,Pe,k.width,k.height):ht(k)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Y,Pe,k.width,k.height):t.renderbufferStorage(t.RENDERBUFFER,Pe,k.width,k.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function lt(F,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,F),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(k.depthTexture).__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),K(k.depthTexture,0);const ye=r.get(k.depthTexture).__webglTexture,he=Ze(k);if(k.depthTexture.format===Al)ht(k)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ye,0,he):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ye,0);else if(k.depthTexture.format===ku)ht(k)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ye,0,he):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ye,0);else throw new Error("Unknown depthTexture format")}function be(F){const k=r.get(F),re=F.isWebGLCubeRenderTarget===!0;if(F.depthTexture&&!k.__autoAllocateDepthBuffer){if(re)throw new Error("target.depthTexture not supported in Cube render targets");lt(k.__webglFramebuffer,F)}else if(re){k.__webglDepthbuffer=[];for(let ye=0;ye<6;ye++)n.bindFramebuffer(t.FRAMEBUFFER,k.__webglFramebuffer[ye]),k.__webglDepthbuffer[ye]=t.createRenderbuffer(),H(k.__webglDepthbuffer[ye],F,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer=t.createRenderbuffer(),H(k.__webglDepthbuffer,F,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function Le(F,k,re){const ye=r.get(F);k!==void 0&&Ee(ye.__webglFramebuffer,F,F.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),re!==void 0&&be(F)}function ke(F){const k=F.texture,re=r.get(F),ye=r.get(k);F.addEventListener("dispose",N),F.isWebGLMultipleRenderTargets!==!0&&(ye.__webglTexture===void 0&&(ye.__webglTexture=t.createTexture()),ye.__version=k.version,a.memory.textures++);const he=F.isWebGLCubeRenderTarget===!0,xe=F.isWebGLMultipleRenderTargets===!0,Ce=E(F)||s;if(he){re.__webglFramebuffer=[];for(let Te=0;Te<6;Te++)if(s&&k.mipmaps&&k.mipmaps.length>0){re.__webglFramebuffer[Te]=[];for(let Pe=0;Pe<k.mipmaps.length;Pe++)re.__webglFramebuffer[Te][Pe]=t.createFramebuffer()}else re.__webglFramebuffer[Te]=t.createFramebuffer()}else{if(s&&k.mipmaps&&k.mipmaps.length>0){re.__webglFramebuffer=[];for(let Te=0;Te<k.mipmaps.length;Te++)re.__webglFramebuffer[Te]=t.createFramebuffer()}else re.__webglFramebuffer=t.createFramebuffer();if(xe)if(i.drawBuffers){const Te=F.texture;for(let Pe=0,Y=Te.length;Pe<Y;Pe++){const Se=r.get(Te[Pe]);Se.__webglTexture===void 0&&(Se.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&F.samples>0&&ht(F)===!1){const Te=xe?k:[k];re.__webglMultisampledFramebuffer=t.createFramebuffer(),re.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,re.__webglMultisampledFramebuffer);for(let Pe=0;Pe<Te.length;Pe++){const Y=Te[Pe];re.__webglColorRenderbuffer[Pe]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,re.__webglColorRenderbuffer[Pe]);const Se=o.convert(Y.format,Y.colorSpace),de=o.convert(Y.type),Qe=A(Y.internalFormat,Se,de,Y.colorSpace,F.isXRRenderTarget===!0),Ge=Ze(F);t.renderbufferStorageMultisample(t.RENDERBUFFER,Ge,Qe,F.width,F.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Pe,t.RENDERBUFFER,re.__webglColorRenderbuffer[Pe])}t.bindRenderbuffer(t.RENDERBUFFER,null),F.depthBuffer&&(re.__webglDepthRenderbuffer=t.createRenderbuffer(),H(re.__webglDepthRenderbuffer,F,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(he){n.bindTexture(t.TEXTURE_CUBE_MAP,ye.__webglTexture),We(t.TEXTURE_CUBE_MAP,k,Ce);for(let Te=0;Te<6;Te++)if(s&&k.mipmaps&&k.mipmaps.length>0)for(let Pe=0;Pe<k.mipmaps.length;Pe++)Ee(re.__webglFramebuffer[Te][Pe],F,k,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Pe);else Ee(re.__webglFramebuffer[Te],F,k,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0);M(k,Ce)&&S(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(xe){const Te=F.texture;for(let Pe=0,Y=Te.length;Pe<Y;Pe++){const Se=Te[Pe],de=r.get(Se);n.bindTexture(t.TEXTURE_2D,de.__webglTexture),We(t.TEXTURE_2D,Se,Ce),Ee(re.__webglFramebuffer,F,Se,t.COLOR_ATTACHMENT0+Pe,t.TEXTURE_2D,0),M(Se,Ce)&&S(t.TEXTURE_2D)}n.unbindTexture()}else{let Te=t.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(s?Te=F.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Te,ye.__webglTexture),We(Te,k,Ce),s&&k.mipmaps&&k.mipmaps.length>0)for(let Pe=0;Pe<k.mipmaps.length;Pe++)Ee(re.__webglFramebuffer[Pe],F,k,t.COLOR_ATTACHMENT0,Te,Pe);else Ee(re.__webglFramebuffer,F,k,t.COLOR_ATTACHMENT0,Te,0);M(k,Ce)&&S(Te),n.unbindTexture()}F.depthBuffer&&be(F)}function mt(F){const k=E(F)||s,re=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let ye=0,he=re.length;ye<he;ye++){const xe=re[ye];if(M(xe,k)){const Ce=F.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Te=r.get(xe).__webglTexture;n.bindTexture(Ce,Te),S(Ce),n.unbindTexture()}}}function Ye(F){if(s&&F.samples>0&&ht(F)===!1){const k=F.isWebGLMultipleRenderTargets?F.texture:[F.texture],re=F.width,ye=F.height;let he=t.COLOR_BUFFER_BIT;const xe=[],Ce=F.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Te=r.get(F),Pe=F.isWebGLMultipleRenderTargets===!0;if(Pe)for(let Y=0;Y<k.length;Y++)n.bindFramebuffer(t.FRAMEBUFFER,Te.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Y,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Te.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Y,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Te.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Te.__webglFramebuffer);for(let Y=0;Y<k.length;Y++){xe.push(t.COLOR_ATTACHMENT0+Y),F.depthBuffer&&xe.push(Ce);const Se=Te.__ignoreDepthValues!==void 0?Te.__ignoreDepthValues:!1;if(Se===!1&&(F.depthBuffer&&(he|=t.DEPTH_BUFFER_BIT),F.stencilBuffer&&(he|=t.STENCIL_BUFFER_BIT)),Pe&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Te.__webglColorRenderbuffer[Y]),Se===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[Ce]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Ce])),Pe){const de=r.get(k[Y]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,de,0)}t.blitFramebuffer(0,0,re,ye,0,0,re,ye,he,t.NEAREST),d&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,xe)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Pe)for(let Y=0;Y<k.length;Y++){n.bindFramebuffer(t.FRAMEBUFFER,Te.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Y,t.RENDERBUFFER,Te.__webglColorRenderbuffer[Y]);const Se=r.get(k[Y]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Te.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Y,t.TEXTURE_2D,Se,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Te.__webglMultisampledFramebuffer)}}function Ze(F){return Math.min(f,F.samples)}function ht(F){const k=r.get(F);return s&&F.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function Mt(F){const k=a.render.frame;v.get(F)!==k&&(v.set(F,k),F.update())}function jt(F,k){const re=F.colorSpace,ye=F.format,he=F.type;return F.isCompressedTexture===!0||F.isVideoTexture===!0||F.format===F1||re!==ya&&re!==Pi&&(zt.getTransfer(re)===tn?s===!1?e.has("EXT_sRGB")===!0&&ye===eo?(F.format=F1,F.minFilter=Mi,F.generateMipmaps=!1):k=kj.sRGBToLinear(k):(ye!==eo||he!==ds)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",re)),k}this.allocateTextureUnit=V,this.resetTextureUnits=$,this.setTexture2D=K,this.setTexture2DArray=z,this.setTexture3D=W,this.setTextureCube=ee,this.rebindTextures=Le,this.setupRenderTarget=ke,this.updateRenderTargetMipmap=mt,this.updateMultisampleRenderTarget=Ye,this.setupDepthRenderbuffer=be,this.setupFrameBufferTexture=Ee,this.useMultisampledRTT=ht}function oX(t,e,n){const r=n.isWebGL2;function i(o,a=Pi){let s;const l=zt.getTransfer(a);if(o===ds)return t.UNSIGNED_BYTE;if(o===Mj)return t.UNSIGNED_SHORT_4_4_4_4;if(o===Pj)return t.UNSIGNED_SHORT_5_5_5_1;if(o===C9)return t.BYTE;if(o===R9)return t.SHORT;if(o===eT)return t.UNSIGNED_SHORT;if(o===Aj)return t.INT;if(o===Za)return t.UNSIGNED_INT;if(o===Ja)return t.FLOAT;if(o===kd)return r?t.HALF_FLOAT:(s=e.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(o===O9)return t.ALPHA;if(o===eo)return t.RGBA;if(o===I9)return t.LUMINANCE;if(o===N9)return t.LUMINANCE_ALPHA;if(o===Al)return t.DEPTH_COMPONENT;if(o===ku)return t.DEPTH_STENCIL;if(o===F1)return s=e.get("EXT_sRGB"),s!==null?s.SRGB_ALPHA_EXT:null;if(o===D9)return t.RED;if(o===Cj)return t.RED_INTEGER;if(o===L9)return t.RG;if(o===Rj)return t.RG_INTEGER;if(o===Oj)return t.RGBA_INTEGER;if(o===ux||o===fx||o===hx||o===dx)if(l===tn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(o===ux)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===fx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===hx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===dx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(o===ux)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===fx)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===hx)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===dx)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===xC||o===bC||o===wC||o===SC)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(o===xC)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===bC)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===wC)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===SC)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===k9)return s=e.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===EC||o===TC)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(o===EC)return l===tn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(o===TC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===AC||o===MC||o===PC||o===CC||o===RC||o===OC||o===IC||o===NC||o===DC||o===LC||o===kC||o===jC||o===UC||o===FC)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(o===AC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===MC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===PC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===CC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===RC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===OC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===IC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===NC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===DC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===LC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===kC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===jC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===UC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===FC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===px||o===VC||o===BC)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(o===px)return l===tn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===VC)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===BC)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===j9||o===$C||o===zC||o===HC)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(o===px)return s.COMPRESSED_RED_RGTC1_EXT;if(o===$C)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===zC)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===HC)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===Tl?r?t.UNSIGNED_INT_24_8:(s=e.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null):t[o]!==void 0?t[o]:null}return{convert:i}}class aX extends si{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let jh=class extends cr{constructor(){super(),this.isGroup=!0,this.type="Group"}};const sX={type:"move"};class jx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new jh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new jh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new te),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new jh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new te),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,o=null,a=null;const s=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const y of e.hand.values()){const g=n.getJointPose(y,r),p=this._getHandJoint(c,y);g!==null&&(p.matrix.fromArray(g.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,p.jointRadius=g.radius),p.visible=g!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],h=u.position.distanceTo(f.position),d=.02,v=.005;c.inputState.pinching&&h>d+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=d-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,r),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));s!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(sX)))}return s!==null&&(s.visible=i!==null),l!==null&&(l.visible=o!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new jh;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class lX extends Qr{constructor(e,n,r,i,o,a,s,l,c,u){if(u=u!==void 0?u:Al,u!==Al&&u!==ku)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Al&&(r=Za),r===void 0&&u===ku&&(r=Tl),super(null,i,o,a,s,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=s!==void 0?s:Dr,this.minFilter=l!==void 0?l:Dr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class cX extends Kl{constructor(e,n){super();const r=this;let i=null,o=1,a=null,s="local-floor",l=1,c=null,u=null,f=null,h=null,d=null,v=null;const y=n.getContextAttributes();let g=null,p=null;const x=[],_=[],E=new si;E.layers.enable(1),E.viewport=new Zn;const b=new si;b.layers.enable(2),b.viewport=new Zn;const M=[E,b],S=new aX;S.layers.enable(1),S.layers.enable(2);let A=null,T=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(z){let W=x[z];return W===void 0&&(W=new jx,x[z]=W),W.getTargetRaySpace()},this.getControllerGrip=function(z){let W=x[z];return W===void 0&&(W=new jx,x[z]=W),W.getGripSpace()},this.getHand=function(z){let W=x[z];return W===void 0&&(W=new jx,x[z]=W),W.getHandSpace()};function P(z){const W=_.indexOf(z.inputSource);if(W===-1)return;const ee=x[W];ee!==void 0&&(ee.update(z.inputSource,z.frame,c||a),ee.dispatchEvent({type:z.type,data:z.inputSource}))}function R(){i.removeEventListener("select",P),i.removeEventListener("selectstart",P),i.removeEventListener("selectend",P),i.removeEventListener("squeeze",P),i.removeEventListener("squeezestart",P),i.removeEventListener("squeezeend",P),i.removeEventListener("end",R),i.removeEventListener("inputsourceschange",N);for(let z=0;z<x.length;z++){const W=_[z];W!==null&&(_[z]=null,x[z].disconnect(W))}A=null,T=null,e.setRenderTarget(g),d=null,h=null,f=null,i=null,p=null,K.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(z){o=z,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(z){s=z,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(z){c=z},this.getBaseLayer=function(){return h!==null?h:d},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(z){if(i=z,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",P),i.addEventListener("selectstart",P),i.addEventListener("selectend",P),i.addEventListener("squeeze",P),i.addEventListener("squeezestart",P),i.addEventListener("squeezeend",P),i.addEventListener("end",R),i.addEventListener("inputsourceschange",N),y.xrCompatible!==!0&&await n.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const W={antialias:i.renderState.layers===void 0?y.antialias:!0,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(i,n,W),i.updateRenderState({baseLayer:d}),p=new Ul(d.framebufferWidth,d.framebufferHeight,{format:eo,type:ds,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let W=null,ee=null,me=null;y.depth&&(me=y.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,W=y.stencil?ku:Al,ee=y.stencil?Tl:Za);const _e={colorFormat:n.RGBA8,depthFormat:me,scaleFactor:o};f=new XRWebGLBinding(i,n),h=f.createProjectionLayer(_e),i.updateRenderState({layers:[h]}),p=new Ul(h.textureWidth,h.textureHeight,{format:eo,type:ds,depthTexture:new lX(h.textureWidth,h.textureHeight,ee,void 0,void 0,void 0,void 0,void 0,void 0,W),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0});const Ne=e.properties.get(p);Ne.__ignoreDepthValues=h.ignoreDepthValues}p.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await i.requestReferenceSpace(s),K.setContext(i),K.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function N(z){for(let W=0;W<z.removed.length;W++){const ee=z.removed[W],me=_.indexOf(ee);me>=0&&(_[me]=null,x[me].disconnect(ee))}for(let W=0;W<z.added.length;W++){const ee=z.added[W];let me=_.indexOf(ee);if(me===-1){for(let Ne=0;Ne<x.length;Ne++)if(Ne>=_.length){_.push(ee),me=Ne;break}else if(_[Ne]===null){_[Ne]=ee,me=Ne;break}if(me===-1)break}const _e=x[me];_e&&_e.connect(ee)}}const I=new te,D=new te;function L(z,W,ee){I.setFromMatrixPosition(W.matrixWorld),D.setFromMatrixPosition(ee.matrixWorld);const me=I.distanceTo(D),_e=W.projectionMatrix.elements,Ne=ee.projectionMatrix.elements,We=_e[14]/(_e[10]-1),Ue=_e[14]/(_e[10]+1),fe=(_e[9]+1)/_e[5],Re=(_e[9]-1)/_e[5],Ee=(_e[8]-1)/_e[0],H=(Ne[8]+1)/Ne[0],lt=We*Ee,be=We*H,Le=me/(-Ee+H),ke=Le*-Ee;W.matrixWorld.decompose(z.position,z.quaternion,z.scale),z.translateX(ke),z.translateZ(Le),z.matrixWorld.compose(z.position,z.quaternion,z.scale),z.matrixWorldInverse.copy(z.matrixWorld).invert();const mt=We+Le,Ye=Ue+Le,Ze=lt-ke,ht=be+(me-ke),Mt=fe*Ue/Ye*mt,jt=Re*Ue/Ye*mt;z.projectionMatrix.makePerspective(Ze,ht,Mt,jt,mt,Ye),z.projectionMatrixInverse.copy(z.projectionMatrix).invert()}function q(z,W){W===null?z.matrixWorld.copy(z.matrix):z.matrixWorld.multiplyMatrices(W.matrixWorld,z.matrix),z.matrixWorldInverse.copy(z.matrixWorld).invert()}this.updateCamera=function(z){if(i===null)return;S.near=b.near=E.near=z.near,S.far=b.far=E.far=z.far,(A!==S.near||T!==S.far)&&(i.updateRenderState({depthNear:S.near,depthFar:S.far}),A=S.near,T=S.far);const W=z.parent,ee=S.cameras;q(S,W);for(let me=0;me<ee.length;me++)q(ee[me],W);ee.length===2?L(S,E,b):S.projectionMatrix.copy(E.projectionMatrix),$(z,S,W)};function $(z,W,ee){ee===null?z.matrix.copy(W.matrixWorld):(z.matrix.copy(ee.matrixWorld),z.matrix.invert(),z.matrix.multiply(W.matrixWorld)),z.matrix.decompose(z.position,z.quaternion,z.scale),z.updateMatrixWorld(!0),z.projectionMatrix.copy(W.projectionMatrix),z.projectionMatrixInverse.copy(W.projectionMatrixInverse),z.isPerspectiveCamera&&(z.fov=jd*2*Math.atan(1/z.projectionMatrix.elements[5]),z.zoom=1)}this.getCamera=function(){return S},this.getFoveation=function(){if(!(h===null&&d===null))return l},this.setFoveation=function(z){l=z,h!==null&&(h.fixedFoveation=z),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=z)};let V=null;function X(z,W){if(u=W.getViewerPose(c||a),v=W,u!==null){const ee=u.views;d!==null&&(e.setRenderTargetFramebuffer(p,d.framebuffer),e.setRenderTarget(p));let me=!1;ee.length!==S.cameras.length&&(S.cameras.length=0,me=!0);for(let _e=0;_e<ee.length;_e++){const Ne=ee[_e];let We=null;if(d!==null)We=d.getViewport(Ne);else{const fe=f.getViewSubImage(h,Ne);We=fe.viewport,_e===0&&(e.setRenderTargetTextures(p,fe.colorTexture,h.ignoreDepthValues?void 0:fe.depthStencilTexture),e.setRenderTarget(p))}let Ue=M[_e];Ue===void 0&&(Ue=new si,Ue.layers.enable(_e),Ue.viewport=new Zn,M[_e]=Ue),Ue.matrix.fromArray(Ne.transform.matrix),Ue.matrix.decompose(Ue.position,Ue.quaternion,Ue.scale),Ue.projectionMatrix.fromArray(Ne.projectionMatrix),Ue.projectionMatrixInverse.copy(Ue.projectionMatrix).invert(),Ue.viewport.set(We.x,We.y,We.width,We.height),_e===0&&(S.matrix.copy(Ue.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),me===!0&&S.cameras.push(Ue)}}for(let ee=0;ee<x.length;ee++){const me=_[ee],_e=x[ee];me!==null&&_e!==void 0&&_e.update(me,W,c||a)}V&&V(z,W),W.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:W}),v=null}const K=new Gj;K.setAnimationLoop(X),this.setAnimationLoop=function(z){V=z},this.dispose=function(){}}}function uX(t,e){function n(g,p){g.matrixAutoUpdate===!0&&g.updateMatrix(),p.value.copy(g.matrix)}function r(g,p){p.color.getRGB(g.fogColor.value,$j(t)),p.isFog?(g.fogNear.value=p.near,g.fogFar.value=p.far):p.isFogExp2&&(g.fogDensity.value=p.density)}function i(g,p,x,_,E){p.isMeshBasicMaterial||p.isMeshLambertMaterial?o(g,p):p.isMeshToonMaterial?(o(g,p),f(g,p)):p.isMeshPhongMaterial?(o(g,p),u(g,p)):p.isMeshStandardMaterial?(o(g,p),h(g,p),p.isMeshPhysicalMaterial&&d(g,p,E)):p.isMeshMatcapMaterial?(o(g,p),v(g,p)):p.isMeshDepthMaterial?o(g,p):p.isMeshDistanceMaterial?(o(g,p),y(g,p)):p.isMeshNormalMaterial?o(g,p):p.isLineBasicMaterial?(a(g,p),p.isLineDashedMaterial&&s(g,p)):p.isPointsMaterial?l(g,p,x,_):p.isSpriteMaterial?c(g,p):p.isShadowMaterial?(g.color.value.copy(p.color),g.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function o(g,p){g.opacity.value=p.opacity,p.color&&g.diffuse.value.copy(p.color),p.emissive&&g.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(g.map.value=p.map,n(p.map,g.mapTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,n(p.alphaMap,g.alphaMapTransform)),p.bumpMap&&(g.bumpMap.value=p.bumpMap,n(p.bumpMap,g.bumpMapTransform),g.bumpScale.value=p.bumpScale,p.side===Vr&&(g.bumpScale.value*=-1)),p.normalMap&&(g.normalMap.value=p.normalMap,n(p.normalMap,g.normalMapTransform),g.normalScale.value.copy(p.normalScale),p.side===Vr&&g.normalScale.value.negate()),p.displacementMap&&(g.displacementMap.value=p.displacementMap,n(p.displacementMap,g.displacementMapTransform),g.displacementScale.value=p.displacementScale,g.displacementBias.value=p.displacementBias),p.emissiveMap&&(g.emissiveMap.value=p.emissiveMap,n(p.emissiveMap,g.emissiveMapTransform)),p.specularMap&&(g.specularMap.value=p.specularMap,n(p.specularMap,g.specularMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest);const x=e.get(p).envMap;if(x&&(g.envMap.value=x,g.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=p.reflectivity,g.ior.value=p.ior,g.refractionRatio.value=p.refractionRatio),p.lightMap){g.lightMap.value=p.lightMap;const _=t._useLegacyLights===!0?Math.PI:1;g.lightMapIntensity.value=p.lightMapIntensity*_,n(p.lightMap,g.lightMapTransform)}p.aoMap&&(g.aoMap.value=p.aoMap,g.aoMapIntensity.value=p.aoMapIntensity,n(p.aoMap,g.aoMapTransform))}function a(g,p){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,p.map&&(g.map.value=p.map,n(p.map,g.mapTransform))}function s(g,p){g.dashSize.value=p.dashSize,g.totalSize.value=p.dashSize+p.gapSize,g.scale.value=p.scale}function l(g,p,x,_){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,g.size.value=p.size*x,g.scale.value=_*.5,p.map&&(g.map.value=p.map,n(p.map,g.uvTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,n(p.alphaMap,g.alphaMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest)}function c(g,p){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,g.rotation.value=p.rotation,p.map&&(g.map.value=p.map,n(p.map,g.mapTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,n(p.alphaMap,g.alphaMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest)}function u(g,p){g.specular.value.copy(p.specular),g.shininess.value=Math.max(p.shininess,1e-4)}function f(g,p){p.gradientMap&&(g.gradientMap.value=p.gradientMap)}function h(g,p){g.metalness.value=p.metalness,p.metalnessMap&&(g.metalnessMap.value=p.metalnessMap,n(p.metalnessMap,g.metalnessMapTransform)),g.roughness.value=p.roughness,p.roughnessMap&&(g.roughnessMap.value=p.roughnessMap,n(p.roughnessMap,g.roughnessMapTransform)),e.get(p).envMap&&(g.envMapIntensity.value=p.envMapIntensity)}function d(g,p,x){g.ior.value=p.ior,p.sheen>0&&(g.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),g.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(g.sheenColorMap.value=p.sheenColorMap,n(p.sheenColorMap,g.sheenColorMapTransform)),p.sheenRoughnessMap&&(g.sheenRoughnessMap.value=p.sheenRoughnessMap,n(p.sheenRoughnessMap,g.sheenRoughnessMapTransform))),p.clearcoat>0&&(g.clearcoat.value=p.clearcoat,g.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(g.clearcoatMap.value=p.clearcoatMap,n(p.clearcoatMap,g.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,n(p.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(g.clearcoatNormalMap.value=p.clearcoatNormalMap,n(p.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===Vr&&g.clearcoatNormalScale.value.negate())),p.iridescence>0&&(g.iridescence.value=p.iridescence,g.iridescenceIOR.value=p.iridescenceIOR,g.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(g.iridescenceMap.value=p.iridescenceMap,n(p.iridescenceMap,g.iridescenceMapTransform)),p.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=p.iridescenceThicknessMap,n(p.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),p.transmission>0&&(g.transmission.value=p.transmission,g.transmissionSamplerMap.value=x.texture,g.transmissionSamplerSize.value.set(x.width,x.height),p.transmissionMap&&(g.transmissionMap.value=p.transmissionMap,n(p.transmissionMap,g.transmissionMapTransform)),g.thickness.value=p.thickness,p.thicknessMap&&(g.thicknessMap.value=p.thicknessMap,n(p.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=p.attenuationDistance,g.attenuationColor.value.copy(p.attenuationColor)),p.anisotropy>0&&(g.anisotropyVector.value.set(p.anisotropy*Math.cos(p.anisotropyRotation),p.anisotropy*Math.sin(p.anisotropyRotation)),p.anisotropyMap&&(g.anisotropyMap.value=p.anisotropyMap,n(p.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=p.specularIntensity,g.specularColor.value.copy(p.specularColor),p.specularColorMap&&(g.specularColorMap.value=p.specularColorMap,n(p.specularColorMap,g.specularColorMapTransform)),p.specularIntensityMap&&(g.specularIntensityMap.value=p.specularIntensityMap,n(p.specularIntensityMap,g.specularIntensityMapTransform))}function v(g,p){p.matcap&&(g.matcap.value=p.matcap)}function y(g,p){const x=e.get(p).light;g.referencePosition.value.setFromMatrixPosition(x.matrixWorld),g.nearDistance.value=x.shadow.camera.near,g.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function fX(t,e,n,r){let i={},o={},a=[];const s=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(x,_){const E=_.program;r.uniformBlockBinding(x,E)}function c(x,_){let E=i[x.id];E===void 0&&(v(x),E=u(x),i[x.id]=E,x.addEventListener("dispose",g));const b=_.program;r.updateUBOMapping(x,b);const M=e.render.frame;o[x.id]!==M&&(h(x),o[x.id]=M)}function u(x){const _=f();x.__bindingPointIndex=_;const E=t.createBuffer(),b=x.__size,M=x.usage;return t.bindBuffer(t.UNIFORM_BUFFER,E),t.bufferData(t.UNIFORM_BUFFER,b,M),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,_,E),E}function f(){for(let x=0;x<s;x++)if(a.indexOf(x)===-1)return a.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(x){const _=i[x.id],E=x.uniforms,b=x.__cache;t.bindBuffer(t.UNIFORM_BUFFER,_);for(let M=0,S=E.length;M<S;M++){const A=E[M];if(d(A,M,b)===!0){const T=A.__offset,P=Array.isArray(A.value)?A.value:[A.value];let R=0;for(let N=0;N<P.length;N++){const I=P[N],D=y(I);typeof I=="number"?(A.__data[0]=I,t.bufferSubData(t.UNIFORM_BUFFER,T+R,A.__data)):I.isMatrix3?(A.__data[0]=I.elements[0],A.__data[1]=I.elements[1],A.__data[2]=I.elements[2],A.__data[3]=I.elements[0],A.__data[4]=I.elements[3],A.__data[5]=I.elements[4],A.__data[6]=I.elements[5],A.__data[7]=I.elements[0],A.__data[8]=I.elements[6],A.__data[9]=I.elements[7],A.__data[10]=I.elements[8],A.__data[11]=I.elements[0]):(I.toArray(A.__data,R),R+=D.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,T,A.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function d(x,_,E){const b=x.value;if(E[_]===void 0){if(typeof b=="number")E[_]=b;else{const M=Array.isArray(b)?b:[b],S=[];for(let A=0;A<M.length;A++)S.push(M[A].clone());E[_]=S}return!0}else if(typeof b=="number"){if(E[_]!==b)return E[_]=b,!0}else{const M=Array.isArray(E[_])?E[_]:[E[_]],S=Array.isArray(b)?b:[b];for(let A=0;A<M.length;A++){const T=M[A];if(T.equals(S[A])===!1)return T.copy(S[A]),!0}}return!1}function v(x){const _=x.uniforms;let E=0;const b=16;let M=0;for(let S=0,A=_.length;S<A;S++){const T=_[S],P={boundary:0,storage:0},R=Array.isArray(T.value)?T.value:[T.value];for(let N=0,I=R.length;N<I;N++){const D=R[N],L=y(D);P.boundary+=L.boundary,P.storage+=L.storage}if(T.__data=new Float32Array(P.storage/Float32Array.BYTES_PER_ELEMENT),T.__offset=E,S>0){M=E%b;const N=b-M;M!==0&&N-P.boundary<0&&(E+=b-M,T.__offset=E)}E+=P.storage}return M=E%b,M>0&&(E+=b-M),x.__size=E,x.__cache={},this}function y(x){const _={boundary:0,storage:0};return typeof x=="number"?(_.boundary=4,_.storage=4):x.isVector2?(_.boundary=8,_.storage=8):x.isVector3||x.isColor?(_.boundary=16,_.storage=12):x.isVector4?(_.boundary=16,_.storage=16):x.isMatrix3?(_.boundary=48,_.storage=48):x.isMatrix4?(_.boundary=64,_.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),_}function g(x){const _=x.target;_.removeEventListener("dispose",g);const E=a.indexOf(_.__bindingPointIndex);a.splice(E,1),t.deleteBuffer(i[_.id]),delete i[_.id],delete o[_.id]}function p(){for(const x in i)t.deleteBuffer(i[x]);a=[],i={},o={}}return{bind:l,update:c,dispose:p}}class lT{constructor(e={}){const{canvas:n=cG(),context:r=null,depth:i=!0,stencil:o=!0,alpha:a=!1,antialias:s=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let h;r!==null?h=r.getContextAttributes().alpha:h=a;const d=new Uint32Array(4),v=new Int32Array(4);let y=null,g=null;const p=[],x=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=jn,this._useLegacyLights=!1,this.toneMapping=hs,this.toneMappingExposure=1;const _=this;let E=!1,b=0,M=0,S=null,A=-1,T=null;const P=new Zn,R=new Zn;let N=null;const I=new Rt(0);let D=0,L=n.width,q=n.height,$=1,V=null,X=null;const K=new Zn(0,0,L,q),z=new Zn(0,0,L,q);let W=!1;const ee=new oT;let me=!1,_e=!1,Ne=null;const We=new In,Ue=new gt,fe=new te,Re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ee(){return S===null?$:1}let H=r;function lt(U,J){for(let ie=0;ie<U.length;ie++){const oe=U[ie],ae=n.getContext(oe,J);if(ae!==null)return ae}return null}try{const U={alpha:!0,depth:i,stencil:o,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${ZE}`),n.addEventListener("webglcontextlost",vt,!1),n.addEventListener("webglcontextrestored",Q,!1),n.addEventListener("webglcontextcreationerror",le,!1),H===null){const J=["webgl2","webgl","experimental-webgl"];if(_.isWebGL1Renderer===!0&&J.shift(),H=lt(J,U),H===null)throw lt(J)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&H instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),H.getShaderPrecisionFormat===void 0&&(H.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let be,Le,ke,mt,Ye,Ze,ht,Mt,jt,F,k,re,ye,he,xe,Ce,Te,Pe,Y,Se,de,Qe,Ge,qe;function Ve(){be=new b7(H),Le=new m7(H,be,e),be.init(Le),Qe=new oX(H,be,Le),ke=new rX(H,be,Le),mt=new E7(H),Ye=new zq,Ze=new iX(H,be,ke,Ye,Le,Qe,mt),ht=new v7(_),Mt=new x7(_),jt=new DG(H,Le),Ge=new d7(H,be,jt,Le),F=new w7(H,jt,mt,Ge),k=new P7(H,F,jt,mt),Y=new M7(H,Le,Ze),Ce=new g7(Ye),re=new $q(_,ht,Mt,be,Le,Ge,Ce),ye=new uX(_,Ye),he=new Gq,xe=new Qq(be,Le),Pe=new h7(_,ht,Mt,ke,k,h,l),Te=new nX(_,k,Le),qe=new fX(H,mt,Le,ke),Se=new p7(H,be,mt,Le),de=new S7(H,be,mt,Le),mt.programs=re.programs,_.capabilities=Le,_.extensions=be,_.properties=Ye,_.renderLists=he,_.shadowMap=Te,_.state=ke,_.info=mt}Ve();const De=new cX(_,H);this.xr=De,this.getContext=function(){return H},this.getContextAttributes=function(){return H.getContextAttributes()},this.forceContextLoss=function(){const U=be.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=be.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return $},this.setPixelRatio=function(U){U!==void 0&&($=U,this.setSize(L,q,!1))},this.getSize=function(U){return U.set(L,q)},this.setSize=function(U,J,ie=!0){if(De.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}L=U,q=J,n.width=Math.floor(U*$),n.height=Math.floor(J*$),ie===!0&&(n.style.width=U+"px",n.style.height=J+"px"),this.setViewport(0,0,U,J)},this.getDrawingBufferSize=function(U){return U.set(L*$,q*$).floor()},this.setDrawingBufferSize=function(U,J,ie){L=U,q=J,$=ie,n.width=Math.floor(U*ie),n.height=Math.floor(J*ie),this.setViewport(0,0,U,J)},this.getCurrentViewport=function(U){return U.copy(P)},this.getViewport=function(U){return U.copy(K)},this.setViewport=function(U,J,ie,oe){U.isVector4?K.set(U.x,U.y,U.z,U.w):K.set(U,J,ie,oe),ke.viewport(P.copy(K).multiplyScalar($).floor())},this.getScissor=function(U){return U.copy(z)},this.setScissor=function(U,J,ie,oe){U.isVector4?z.set(U.x,U.y,U.z,U.w):z.set(U,J,ie,oe),ke.scissor(R.copy(z).multiplyScalar($).floor())},this.getScissorTest=function(){return W},this.setScissorTest=function(U){ke.setScissorTest(W=U)},this.setOpaqueSort=function(U){V=U},this.setTransparentSort=function(U){X=U},this.getClearColor=function(U){return U.copy(Pe.getClearColor())},this.setClearColor=function(){Pe.setClearColor.apply(Pe,arguments)},this.getClearAlpha=function(){return Pe.getClearAlpha()},this.setClearAlpha=function(){Pe.setClearAlpha.apply(Pe,arguments)},this.clear=function(U=!0,J=!0,ie=!0){let oe=0;if(U){let ae=!1;if(S!==null){const Fe=S.texture.format;ae=Fe===Oj||Fe===Rj||Fe===Cj}if(ae){const Fe=S.texture.type,Xe=Fe===ds||Fe===Za||Fe===eT||Fe===Tl||Fe===Mj||Fe===Pj,et=Pe.getClearColor(),tt=Pe.getClearAlpha(),yt=et.r,ct=et.g,at=et.b;Xe?(d[0]=yt,d[1]=ct,d[2]=at,d[3]=tt,H.clearBufferuiv(H.COLOR,0,d)):(v[0]=yt,v[1]=ct,v[2]=at,v[3]=tt,H.clearBufferiv(H.COLOR,0,v))}else oe|=H.COLOR_BUFFER_BIT}J&&(oe|=H.DEPTH_BUFFER_BIT),ie&&(oe|=H.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),H.clear(oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",vt,!1),n.removeEventListener("webglcontextrestored",Q,!1),n.removeEventListener("webglcontextcreationerror",le,!1),he.dispose(),xe.dispose(),Ye.dispose(),ht.dispose(),Mt.dispose(),k.dispose(),Ge.dispose(),qe.dispose(),re.dispose(),De.dispose(),De.removeEventListener("sessionstart",En),De.removeEventListener("sessionend",dt),Ne&&(Ne.dispose(),Ne=null),Tn.stop()};function vt(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function Q(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const U=mt.autoReset,J=Te.enabled,ie=Te.autoUpdate,oe=Te.needsUpdate,ae=Te.type;Ve(),mt.autoReset=U,Te.enabled=J,Te.autoUpdate=ie,Te.needsUpdate=oe,Te.type=ae}function le(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function ue(U){const J=U.target;J.removeEventListener("dispose",ue),ne(J)}function ne(U){ge(U),Ye.remove(U)}function ge(U){const J=Ye.get(U).programs;J!==void 0&&(J.forEach(function(ie){re.releaseProgram(ie)}),U.isShaderMaterial&&re.releaseShaderCache(U))}this.renderBufferDirect=function(U,J,ie,oe,ae,Fe){J===null&&(J=Re);const Xe=ae.isMesh&&ae.matrixWorld.determinant()<0,et=am(U,J,ie,oe,ae);ke.setMaterial(oe,Xe);let tt=ie.index,yt=1;if(oe.wireframe===!0){if(tt=F.getWireframeAttribute(ie),tt===void 0)return;yt=2}const ct=ie.drawRange,at=ie.attributes.position;let Vt=ct.start*yt,tr=(ct.start+ct.count)*yt;Fe!==null&&(Vt=Math.max(Vt,Fe.start*yt),tr=Math.min(tr,(Fe.start+Fe.count)*yt)),tt!==null?(Vt=Math.max(Vt,0),tr=Math.min(tr,tt.count)):at!=null&&(Vt=Math.max(Vt,0),tr=Math.min(tr,at.count));const An=tr-Vt;if(An<0||An===1/0)return;Ge.setup(ae,oe,et,ie,tt);let yi,Zt=Se;if(tt!==null&&(yi=jt.get(tt),Zt=de,Zt.setIndex(yi)),ae.isMesh)oe.wireframe===!0?(ke.setLineWidth(oe.wireframeLinewidth*Ee()),Zt.setMode(H.LINES)):Zt.setMode(H.TRIANGLES);else if(ae.isLine){let bt=oe.linewidth;bt===void 0&&(bt=1),ke.setLineWidth(bt*Ee()),ae.isLineSegments?Zt.setMode(H.LINES):ae.isLineLoop?Zt.setMode(H.LINE_LOOP):Zt.setMode(H.LINE_STRIP)}else ae.isPoints?Zt.setMode(H.POINTS):ae.isSprite&&Zt.setMode(H.TRIANGLES);if(ae.isInstancedMesh)Zt.renderInstances(Vt,An,ae.count);else if(ie.isInstancedBufferGeometry){const bt=ie._maxInstanceCount!==void 0?ie._maxInstanceCount:1/0,Bs=Math.min(ie.instanceCount,bt);Zt.renderInstances(Vt,An,Bs)}else Zt.render(Vt,An)};function Ie(U,J,ie){U.transparent===!0&&U.side===Qo&&U.forceSinglePass===!1?(U.side=Vr,U.needsUpdate=!0,sc(U,J,ie),U.side=bs,U.needsUpdate=!0,sc(U,J,ie),U.side=Qo):sc(U,J,ie)}this.compile=function(U,J,ie=null){ie===null&&(ie=U),g=xe.get(ie),g.init(),x.push(g),ie.traverseVisible(function(ae){ae.isLight&&ae.layers.test(J.layers)&&(g.pushLight(ae),ae.castShadow&&g.pushShadow(ae))}),U!==ie&&U.traverseVisible(function(ae){ae.isLight&&ae.layers.test(J.layers)&&(g.pushLight(ae),ae.castShadow&&g.pushShadow(ae))}),g.setupLights(_._useLegacyLights);const oe=new Set;return U.traverse(function(ae){const Fe=ae.material;if(Fe)if(Array.isArray(Fe))for(let Xe=0;Xe<Fe.length;Xe++){const et=Fe[Xe];Ie(et,ie,ae),oe.add(et)}else Ie(Fe,ie,ae),oe.add(Fe)}),x.pop(),g=null,oe},this.compileAsync=function(U,J,ie=null){const oe=this.compile(U,J,ie);return new Promise(ae=>{function Fe(){if(oe.forEach(function(Xe){Ye.get(Xe).currentProgram.isReady()&&oe.delete(Xe)}),oe.size===0){ae(U);return}setTimeout(Fe,10)}be.get("KHR_parallel_shader_compile")!==null?Fe():setTimeout(Fe,10)})};let rt=null;function Ot(U){rt&&rt(U)}function En(){Tn.stop()}function dt(){Tn.start()}const Tn=new Gj;Tn.setAnimationLoop(Ot),typeof self<"u"&&Tn.setContext(self),this.setAnimationLoop=function(U){rt=U,De.setAnimationLoop(U),U===null?Tn.stop():Tn.start()},De.addEventListener("sessionstart",En),De.addEventListener("sessionend",dt),this.render=function(U,J){if(J!==void 0&&J.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),J.parent===null&&J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),De.enabled===!0&&De.isPresenting===!0&&(De.cameraAutoUpdate===!0&&De.updateCamera(J),J=De.getCamera()),U.isScene===!0&&U.onBeforeRender(_,U,J,S),g=xe.get(U,x.length),g.init(),x.push(g),We.multiplyMatrices(J.projectionMatrix,J.matrixWorldInverse),ee.setFromProjectionMatrix(We),_e=this.localClippingEnabled,me=Ce.init(this.clippingPlanes,_e),y=he.get(U,p.length),y.init(),p.push(y),Dn(U,J,0,_.sortObjects),y.finish(),_.sortObjects===!0&&y.sort(V,X),this.info.render.frame++,me===!0&&Ce.beginShadows();const ie=g.state.shadowsArray;if(Te.render(ie,U,J),me===!0&&Ce.endShadows(),this.info.autoReset===!0&&this.info.reset(),Pe.render(y,U),g.setupLights(_._useLegacyLights),J.isArrayCamera){const oe=J.cameras;for(let ae=0,Fe=oe.length;ae<Fe;ae++){const Xe=oe[ae];vi(y,U,Xe,Xe.viewport)}}else vi(y,U,J);S!==null&&(Ze.updateMultisampleRenderTarget(S),Ze.updateRenderTargetMipmap(S)),U.isScene===!0&&U.onAfterRender(_,U,J),Ge.resetDefaultState(),A=-1,T=null,x.pop(),x.length>0?g=x[x.length-1]:g=null,p.pop(),p.length>0?y=p[p.length-1]:y=null};function Dn(U,J,ie,oe){if(U.visible===!1)return;if(U.layers.test(J.layers)){if(U.isGroup)ie=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(J);else if(U.isLight)g.pushLight(U),U.castShadow&&g.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||ee.intersectsSprite(U)){oe&&fe.setFromMatrixPosition(U.matrixWorld).applyMatrix4(We);const Xe=k.update(U),et=U.material;et.visible&&y.push(U,Xe,et,ie,fe.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(!U.frustumCulled||ee.intersectsObject(U))){const Xe=k.update(U),et=U.material;if(oe&&(U.boundingSphere!==void 0?(U.boundingSphere===null&&U.computeBoundingSphere(),fe.copy(U.boundingSphere.center)):(Xe.boundingSphere===null&&Xe.computeBoundingSphere(),fe.copy(Xe.boundingSphere.center)),fe.applyMatrix4(U.matrixWorld).applyMatrix4(We)),Array.isArray(et)){const tt=Xe.groups;for(let yt=0,ct=tt.length;yt<ct;yt++){const at=tt[yt],Vt=et[at.materialIndex];Vt&&Vt.visible&&y.push(U,Xe,Vt,ie,fe.z,at)}}else et.visible&&y.push(U,Xe,et,ie,fe.z,null)}}const Fe=U.children;for(let Xe=0,et=Fe.length;Xe<et;Xe++)Dn(Fe[Xe],J,ie,oe)}function vi(U,J,ie,oe){const ae=U.opaque,Fe=U.transmissive,Xe=U.transparent;g.setupLightsView(ie),me===!0&&Ce.setGlobalState(_.clippingPlanes,ie),Fe.length>0&&O_(ae,Fe,J,ie),oe&&ke.viewport(P.copy(oe)),ae.length>0&&ac(ae,J,ie),Fe.length>0&&ac(Fe,J,ie),Xe.length>0&&ac(Xe,J,ie),ke.buffers.depth.setTest(!0),ke.buffers.depth.setMask(!0),ke.buffers.color.setMask(!0),ke.setPolygonOffset(!1)}function O_(U,J,ie,oe){if((ie.isScene===!0?ie.overrideMaterial:null)!==null)return;const Fe=Le.isWebGL2;Ne===null&&(Ne=new Ul(1,1,{generateMipmaps:!0,type:be.has("EXT_color_buffer_half_float")?kd:ds,minFilter:Ld,samples:Fe?4:0})),_.getDrawingBufferSize(Ue),Fe?Ne.setSize(Ue.x,Ue.y):Ne.setSize(Mv(Ue.x),Mv(Ue.y));const Xe=_.getRenderTarget();_.setRenderTarget(Ne),_.getClearColor(I),D=_.getClearAlpha(),D<1&&_.setClearColor(16777215,.5),_.clear();const et=_.toneMapping;_.toneMapping=hs,ac(U,ie,oe),Ze.updateMultisampleRenderTarget(Ne),Ze.updateRenderTargetMipmap(Ne);let tt=!1;for(let yt=0,ct=J.length;yt<ct;yt++){const at=J[yt],Vt=at.object,tr=at.geometry,An=at.material,yi=at.group;if(An.side===Qo&&Vt.layers.test(oe.layers)){const Zt=An.side;An.side=Vr,An.needsUpdate=!0,Fo(Vt,ie,oe,tr,An,yi),An.side=Zt,An.needsUpdate=!0,tt=!0}}tt===!0&&(Ze.updateMultisampleRenderTarget(Ne),Ze.updateRenderTargetMipmap(Ne)),_.setRenderTarget(Xe),_.setClearColor(I,D),_.toneMapping=et}function ac(U,J,ie){const oe=J.isScene===!0?J.overrideMaterial:null;for(let ae=0,Fe=U.length;ae<Fe;ae++){const Xe=U[ae],et=Xe.object,tt=Xe.geometry,yt=oe===null?Xe.material:oe,ct=Xe.group;et.layers.test(ie.layers)&&Fo(et,J,ie,tt,yt,ct)}}function Fo(U,J,ie,oe,ae,Fe){U.onBeforeRender(_,J,ie,oe,ae,Fe),U.modelViewMatrix.multiplyMatrices(ie.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),ae.onBeforeRender(_,J,ie,oe,U,Fe),ae.transparent===!0&&ae.side===Qo&&ae.forceSinglePass===!1?(ae.side=Vr,ae.needsUpdate=!0,_.renderBufferDirect(ie,J,oe,ae,U,Fe),ae.side=bs,ae.needsUpdate=!0,_.renderBufferDirect(ie,J,oe,ae,U,Fe),ae.side=Qo):_.renderBufferDirect(ie,J,oe,ae,U,Fe),U.onAfterRender(_,J,ie,oe,ae,Fe)}function sc(U,J,ie){J.isScene!==!0&&(J=Re);const oe=Ye.get(U),ae=g.state.lights,Fe=g.state.shadowsArray,Xe=ae.state.version,et=re.getParameters(U,ae.state,Fe,J,ie),tt=re.getProgramCacheKey(et);let yt=oe.programs;oe.environment=U.isMeshStandardMaterial?J.environment:null,oe.fog=J.fog,oe.envMap=(U.isMeshStandardMaterial?Mt:ht).get(U.envMap||oe.environment),yt===void 0&&(U.addEventListener("dispose",ue),yt=new Map,oe.programs=yt);let ct=yt.get(tt);if(ct!==void 0){if(oe.currentProgram===ct&&oe.lightsStateVersion===Xe)return Vs(U,et),ct}else et.uniforms=re.getUniforms(U),U.onBuild(ie,et,_),U.onBeforeCompile(et,_),ct=re.acquireProgram(et,tt),yt.set(tt,ct),oe.uniforms=et.uniforms;const at=oe.uniforms;return(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(at.clippingPlanes=Ce.uniform),Vs(U,et),oe.needsLights=lc(U),oe.lightsStateVersion=Xe,oe.needsLights&&(at.ambientLightColor.value=ae.state.ambient,at.lightProbe.value=ae.state.probe,at.directionalLights.value=ae.state.directional,at.directionalLightShadows.value=ae.state.directionalShadow,at.spotLights.value=ae.state.spot,at.spotLightShadows.value=ae.state.spotShadow,at.rectAreaLights.value=ae.state.rectArea,at.ltc_1.value=ae.state.rectAreaLTC1,at.ltc_2.value=ae.state.rectAreaLTC2,at.pointLights.value=ae.state.point,at.pointLightShadows.value=ae.state.pointShadow,at.hemisphereLights.value=ae.state.hemi,at.directionalShadowMap.value=ae.state.directionalShadowMap,at.directionalShadowMatrix.value=ae.state.directionalShadowMatrix,at.spotShadowMap.value=ae.state.spotShadowMap,at.spotLightMatrix.value=ae.state.spotLightMatrix,at.spotLightMap.value=ae.state.spotLightMap,at.pointShadowMap.value=ae.state.pointShadowMap,at.pointShadowMatrix.value=ae.state.pointShadowMatrix),oe.currentProgram=ct,oe.uniformsList=null,ct}function om(U){if(U.uniformsList===null){const J=U.currentProgram.getUniforms();U.uniformsList=Bg.seqWithValue(J.seq,U.uniforms)}return U.uniformsList}function Vs(U,J){const ie=Ye.get(U);ie.outputColorSpace=J.outputColorSpace,ie.instancing=J.instancing,ie.instancingColor=J.instancingColor,ie.skinning=J.skinning,ie.morphTargets=J.morphTargets,ie.morphNormals=J.morphNormals,ie.morphColors=J.morphColors,ie.morphTargetsCount=J.morphTargetsCount,ie.numClippingPlanes=J.numClippingPlanes,ie.numIntersection=J.numClipIntersection,ie.vertexAlphas=J.vertexAlphas,ie.vertexTangents=J.vertexTangents,ie.toneMapping=J.toneMapping}function am(U,J,ie,oe,ae){J.isScene!==!0&&(J=Re),Ze.resetTextureUnits();const Fe=J.fog,Xe=oe.isMeshStandardMaterial?J.environment:null,et=S===null?_.outputColorSpace:S.isXRRenderTarget===!0?S.texture.colorSpace:ya,tt=(oe.isMeshStandardMaterial?Mt:ht).get(oe.envMap||Xe),yt=oe.vertexColors===!0&&!!ie.attributes.color&&ie.attributes.color.itemSize===4,ct=!!ie.attributes.tangent&&(!!oe.normalMap||oe.anisotropy>0),at=!!ie.morphAttributes.position,Vt=!!ie.morphAttributes.normal,tr=!!ie.morphAttributes.color;let An=hs;oe.toneMapped&&(S===null||S.isXRRenderTarget===!0)&&(An=_.toneMapping);const yi=ie.morphAttributes.position||ie.morphAttributes.normal||ie.morphAttributes.color,Zt=yi!==void 0?yi.length:0,bt=Ye.get(oe),Bs=g.state.lights;if(me===!0&&(_e===!0||U!==T)){const _n=U===T&&oe.id===A;Ce.setState(oe,U,_n)}let sn=!1;oe.version===bt.__version?(bt.needsLights&&bt.lightsStateVersion!==Bs.state.version||bt.outputColorSpace!==et||ae.isInstancedMesh&&bt.instancing===!1||!ae.isInstancedMesh&&bt.instancing===!0||ae.isSkinnedMesh&&bt.skinning===!1||!ae.isSkinnedMesh&&bt.skinning===!0||ae.isInstancedMesh&&bt.instancingColor===!0&&ae.instanceColor===null||ae.isInstancedMesh&&bt.instancingColor===!1&&ae.instanceColor!==null||bt.envMap!==tt||oe.fog===!0&&bt.fog!==Fe||bt.numClippingPlanes!==void 0&&(bt.numClippingPlanes!==Ce.numPlanes||bt.numIntersection!==Ce.numIntersection)||bt.vertexAlphas!==yt||bt.vertexTangents!==ct||bt.morphTargets!==at||bt.morphNormals!==Vt||bt.morphColors!==tr||bt.toneMapping!==An||Le.isWebGL2===!0&&bt.morphTargetsCount!==Zt)&&(sn=!0):(sn=!0,bt.__version=oe.version);let ho=bt.currentProgram;sn===!0&&(ho=sc(oe,J,ae));let Jf=!1,$s=!1,eh=!1;const Wn=ho.getUniforms(),po=bt.uniforms;if(ke.useProgram(ho.program)&&(Jf=!0,$s=!0,eh=!0),oe.id!==A&&(A=oe.id,$s=!0),Jf||T!==U){Wn.setValue(H,"projectionMatrix",U.projectionMatrix),Wn.setValue(H,"viewMatrix",U.matrixWorldInverse);const _n=Wn.map.cameraPosition;_n!==void 0&&_n.setValue(H,fe.setFromMatrixPosition(U.matrixWorld)),Le.logarithmicDepthBuffer&&Wn.setValue(H,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial)&&Wn.setValue(H,"isOrthographic",U.isOrthographicCamera===!0),T!==U&&(T=U,$s=!0,eh=!0)}if(ae.isSkinnedMesh){Wn.setOptional(H,ae,"bindMatrix"),Wn.setOptional(H,ae,"bindMatrixInverse");const _n=ae.skeleton;_n&&(Le.floatVertexTextures?(_n.boneTexture===null&&_n.computeBoneTexture(),Wn.setValue(H,"boneTexture",_n.boneTexture,Ze),Wn.setValue(H,"boneTextureSize",_n.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const th=ie.morphAttributes;if((th.position!==void 0||th.normal!==void 0||th.color!==void 0&&Le.isWebGL2===!0)&&Y.update(ae,ie,ho),($s||bt.receiveShadow!==ae.receiveShadow)&&(bt.receiveShadow=ae.receiveShadow,Wn.setValue(H,"receiveShadow",ae.receiveShadow)),oe.isMeshGouraudMaterial&&oe.envMap!==null&&(po.envMap.value=tt,po.flipEnvMap.value=tt.isCubeTexture&&tt.isRenderTargetTexture===!1?-1:1),$s&&(Wn.setValue(H,"toneMappingExposure",_.toneMappingExposure),bt.needsLights&&Zf(po,eh),Fe&&oe.fog===!0&&ye.refreshFogUniforms(po,Fe),ye.refreshMaterialUniforms(po,oe,$,q,Ne),Bg.upload(H,om(bt),po,Ze)),oe.isShaderMaterial&&oe.uniformsNeedUpdate===!0&&(Bg.upload(H,om(bt),po,Ze),oe.uniformsNeedUpdate=!1),oe.isSpriteMaterial&&Wn.setValue(H,"center",ae.center),Wn.setValue(H,"modelViewMatrix",ae.modelViewMatrix),Wn.setValue(H,"normalMatrix",ae.normalMatrix),Wn.setValue(H,"modelMatrix",ae.matrixWorld),oe.isShaderMaterial||oe.isRawShaderMaterial){const _n=oe.uniformsGroups;for(let Jr=0,cc=_n.length;Jr<cc;Jr++)if(Le.isWebGL2){const zs=_n[Jr];qe.update(zs,ho),qe.bind(zs,ho)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ho}function Zf(U,J){U.ambientLightColor.needsUpdate=J,U.lightProbe.needsUpdate=J,U.directionalLights.needsUpdate=J,U.directionalLightShadows.needsUpdate=J,U.pointLights.needsUpdate=J,U.pointLightShadows.needsUpdate=J,U.spotLights.needsUpdate=J,U.spotLightShadows.needsUpdate=J,U.rectAreaLights.needsUpdate=J,U.hemisphereLights.needsUpdate=J}function lc(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(U,J,ie){Ye.get(U.texture).__webglTexture=J,Ye.get(U.depthTexture).__webglTexture=ie;const oe=Ye.get(U);oe.__hasExternalTextures=!0,oe.__hasExternalTextures&&(oe.__autoAllocateDepthBuffer=ie===void 0,oe.__autoAllocateDepthBuffer||be.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),oe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(U,J){const ie=Ye.get(U);ie.__webglFramebuffer=J,ie.__useDefaultFramebuffer=J===void 0},this.setRenderTarget=function(U,J=0,ie=0){S=U,b=J,M=ie;let oe=!0,ae=null,Fe=!1,Xe=!1;if(U){const tt=Ye.get(U);tt.__useDefaultFramebuffer!==void 0?(ke.bindFramebuffer(H.FRAMEBUFFER,null),oe=!1):tt.__webglFramebuffer===void 0?Ze.setupRenderTarget(U):tt.__hasExternalTextures&&Ze.rebindTextures(U,Ye.get(U.texture).__webglTexture,Ye.get(U.depthTexture).__webglTexture);const yt=U.texture;(yt.isData3DTexture||yt.isDataArrayTexture||yt.isCompressedArrayTexture)&&(Xe=!0);const ct=Ye.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(Array.isArray(ct[J])?ae=ct[J][ie]:ae=ct[J],Fe=!0):Le.isWebGL2&&U.samples>0&&Ze.useMultisampledRTT(U)===!1?ae=Ye.get(U).__webglMultisampledFramebuffer:Array.isArray(ct)?ae=ct[ie]:ae=ct,P.copy(U.viewport),R.copy(U.scissor),N=U.scissorTest}else P.copy(K).multiplyScalar($).floor(),R.copy(z).multiplyScalar($).floor(),N=W;if(ke.bindFramebuffer(H.FRAMEBUFFER,ae)&&Le.drawBuffers&&oe&&ke.drawBuffers(U,ae),ke.viewport(P),ke.scissor(R),ke.setScissorTest(N),Fe){const tt=Ye.get(U.texture);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_CUBE_MAP_POSITIVE_X+J,tt.__webglTexture,ie)}else if(Xe){const tt=Ye.get(U.texture),yt=J||0;H.framebufferTextureLayer(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,tt.__webglTexture,ie||0,yt)}A=-1},this.readRenderTargetPixels=function(U,J,ie,oe,ae,Fe,Xe){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let et=Ye.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&Xe!==void 0&&(et=et[Xe]),et){ke.bindFramebuffer(H.FRAMEBUFFER,et);try{const tt=U.texture,yt=tt.format,ct=tt.type;if(yt!==eo&&Qe.convert(yt)!==H.getParameter(H.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const at=ct===kd&&(be.has("EXT_color_buffer_half_float")||Le.isWebGL2&&be.has("EXT_color_buffer_float"));if(ct!==ds&&Qe.convert(ct)!==H.getParameter(H.IMPLEMENTATION_COLOR_READ_TYPE)&&!(ct===Ja&&(Le.isWebGL2||be.has("OES_texture_float")||be.has("WEBGL_color_buffer_float")))&&!at){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}J>=0&&J<=U.width-oe&&ie>=0&&ie<=U.height-ae&&H.readPixels(J,ie,oe,ae,Qe.convert(yt),Qe.convert(ct),Fe)}finally{const tt=S!==null?Ye.get(S).__webglFramebuffer:null;ke.bindFramebuffer(H.FRAMEBUFFER,tt)}}},this.copyFramebufferToTexture=function(U,J,ie=0){const oe=Math.pow(2,-ie),ae=Math.floor(J.image.width*oe),Fe=Math.floor(J.image.height*oe);Ze.setTexture2D(J,0),H.copyTexSubImage2D(H.TEXTURE_2D,ie,0,0,U.x,U.y,ae,Fe),ke.unbindTexture()},this.copyTextureToTexture=function(U,J,ie,oe=0){const ae=J.image.width,Fe=J.image.height,Xe=Qe.convert(ie.format),et=Qe.convert(ie.type);Ze.setTexture2D(ie,0),H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,ie.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,ie.unpackAlignment),J.isDataTexture?H.texSubImage2D(H.TEXTURE_2D,oe,U.x,U.y,ae,Fe,Xe,et,J.image.data):J.isCompressedTexture?H.compressedTexSubImage2D(H.TEXTURE_2D,oe,U.x,U.y,J.mipmaps[0].width,J.mipmaps[0].height,Xe,J.mipmaps[0].data):H.texSubImage2D(H.TEXTURE_2D,oe,U.x,U.y,Xe,et,J.image),oe===0&&ie.generateMipmaps&&H.generateMipmap(H.TEXTURE_2D),ke.unbindTexture()},this.copyTextureToTexture3D=function(U,J,ie,oe,ae=0){if(_.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Fe=U.max.x-U.min.x+1,Xe=U.max.y-U.min.y+1,et=U.max.z-U.min.z+1,tt=Qe.convert(oe.format),yt=Qe.convert(oe.type);let ct;if(oe.isData3DTexture)Ze.setTexture3D(oe,0),ct=H.TEXTURE_3D;else if(oe.isDataArrayTexture)Ze.setTexture2DArray(oe,0),ct=H.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,oe.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,oe.unpackAlignment);const at=H.getParameter(H.UNPACK_ROW_LENGTH),Vt=H.getParameter(H.UNPACK_IMAGE_HEIGHT),tr=H.getParameter(H.UNPACK_SKIP_PIXELS),An=H.getParameter(H.UNPACK_SKIP_ROWS),yi=H.getParameter(H.UNPACK_SKIP_IMAGES),Zt=ie.isCompressedTexture?ie.mipmaps[0]:ie.image;H.pixelStorei(H.UNPACK_ROW_LENGTH,Zt.width),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,Zt.height),H.pixelStorei(H.UNPACK_SKIP_PIXELS,U.min.x),H.pixelStorei(H.UNPACK_SKIP_ROWS,U.min.y),H.pixelStorei(H.UNPACK_SKIP_IMAGES,U.min.z),ie.isDataTexture||ie.isData3DTexture?H.texSubImage3D(ct,ae,J.x,J.y,J.z,Fe,Xe,et,tt,yt,Zt.data):ie.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),H.compressedTexSubImage3D(ct,ae,J.x,J.y,J.z,Fe,Xe,et,tt,Zt.data)):H.texSubImage3D(ct,ae,J.x,J.y,J.z,Fe,Xe,et,tt,yt,Zt),H.pixelStorei(H.UNPACK_ROW_LENGTH,at),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,Vt),H.pixelStorei(H.UNPACK_SKIP_PIXELS,tr),H.pixelStorei(H.UNPACK_SKIP_ROWS,An),H.pixelStorei(H.UNPACK_SKIP_IMAGES,yi),ae===0&&oe.generateMipmaps&&H.generateMipmap(ct),ke.unbindTexture()},this.initTexture=function(U){U.isCubeTexture?Ze.setTextureCube(U,0):U.isData3DTexture?Ze.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?Ze.setTexture2DArray(U,0):Ze.setTexture2D(U,0),ke.unbindTexture()},this.resetState=function(){b=0,M=0,S=null,ke.reset(),Ge.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ea}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===tT?"display-p3":"srgb",n.unpackColorSpace=zt.workingColorSpace===m0?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===jn?Ml:Ij}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ml?jn:ya}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class hX extends lT{}hX.prototype.isWebGL1Renderer=!0;class Qj extends cr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class Zj extends Pf{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Rt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const N2=new In,$1=new v0,ng=new g0,rg=new te;class dX extends cr{constructor(e=new Lo,n=new Zj){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),ng.copy(r.boundingSphere),ng.applyMatrix4(i),ng.radius+=o,e.ray.intersectsSphere(ng)===!1)return;N2.copy(i).invert(),$1.copy(e.ray).applyMatrix4(N2);const s=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,c=r.index,f=r.attributes.position;if(c!==null){const h=Math.max(0,a.start),d=Math.min(c.count,a.start+a.count);for(let v=h,y=d;v<y;v++){const g=c.getX(v);rg.fromBufferAttribute(f,g),D2(rg,g,l,i,e,n,this)}}else{const h=Math.max(0,a.start),d=Math.min(f.count,a.start+a.count);for(let v=h,y=d;v<y;v++)rg.fromBufferAttribute(f,v),D2(rg,v,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}}function D2(t,e,n,r,i,o,a){const s=$1.distanceSqToPoint(t);if(s<n){const l=new te;$1.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,object:a})}}class pl extends Lo{constructor(e=1,n=32,r=16,i=0,o=Math.PI*2,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:o,thetaStart:a,thetaLength:s},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(a+s,Math.PI);let c=0;const u=[],f=new te,h=new te,d=[],v=[],y=[],g=[];for(let p=0;p<=r;p++){const x=[],_=p/r;let E=0;p===0&&a===0?E=.5/n:p===r&&l===Math.PI&&(E=-.5/n);for(let b=0;b<=n;b++){const M=b/n;f.x=-e*Math.cos(i+M*o)*Math.sin(a+_*s),f.y=e*Math.cos(a+_*s),f.z=e*Math.sin(i+M*o)*Math.sin(a+_*s),v.push(f.x,f.y,f.z),h.copy(f).normalize(),y.push(h.x,h.y,h.z),g.push(M+E,1-_),x.push(c++)}u.push(x)}for(let p=0;p<r;p++)for(let x=0;x<n;x++){const _=u[p][x+1],E=u[p][x],b=u[p+1][x],M=u[p+1][x+1];(p!==0||a>0)&&d.push(_,E,M),(p!==r-1||l<Math.PI)&&d.push(E,b,M)}this.setIndex(d),this.setAttribute("position",new Di(v,3)),this.setAttribute("normal",new Di(y,3)),this.setAttribute("uv",new Di(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pl(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class L2 extends Pf{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Rt(16777215),this.specular=new Rt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nj,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=JE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}const k2={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Jj{constructor(e,n,r){const i=this;let o=!1,a=0,s=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(u){s++,o===!1&&i.onStart!==void 0&&i.onStart(u,a,s),o=!0},this.itemEnd=function(u){a++,i.onProgress!==void 0&&i.onProgress(u,a,s),a===s&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,h=c.length;f<h;f+=2){const d=c[f],v=c[f+1];if(d.global&&(d.lastIndex=0),d.test(u))return v}return null}}}const pX=new Jj;class cT{constructor(e){this.manager=e!==void 0?e:pX,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,o){r.load(e,i,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}cT.DEFAULT_MATERIAL_NAME="__DEFAULT";class mX extends cT{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,a=k2.get(e);if(a!==void 0)return o.manager.itemStart(e),setTimeout(function(){n&&n(a),o.manager.itemEnd(e)},0),a;const s=Ud("img");function l(){u(),k2.add(e,this),n&&n(this),o.manager.itemEnd(e)}function c(f){u(),i&&i(f),o.manager.itemError(e),o.manager.itemEnd(e)}function u(){s.removeEventListener("load",l,!1),s.removeEventListener("error",c,!1)}return s.addEventListener("load",l,!1),s.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),o.manager.itemStart(e),s.src=e,s}}class gX extends cT{constructor(e){super(e)}load(e,n,r,i){const o=new Qr,a=new mX(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(s){o.image=s,o.needsUpdate=!0,n!==void 0&&n(o)},r,i),o}}class eU extends cr{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Rt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}const Ux=new In,j2=new te,U2=new te;class vX{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new gt(512,512),this.map=null,this.mapPass=null,this.matrix=new In,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new oT,this._frameExtents=new gt(1,1),this._viewportCount=1,this._viewports=[new Zn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;j2.setFromMatrixPosition(e.matrixWorld),n.position.copy(j2),U2.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(U2),n.updateMatrixWorld(),Ux.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ux),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Ux)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class yX extends vX{constructor(){super(new Wj(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class _X extends eU{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(cr.DEFAULT_UP),this.updateMatrix(),this.target=new cr,this.shadow=new yX}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class xX extends eU{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class bX{constructor(e,n,r=0,i=1/0){this.ray=new v0(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new rT,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return z1(e,this,r,n),r.sort(F2),r}intersectObjects(e,n=!0,r=[]){for(let i=0,o=e.length;i<o;i++)z1(e[i],this,r,n);return r.sort(F2),r}}function F2(t,e){return t.distance-e.distance}function z1(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let o=0,a=i.length;o<a;o++)z1(i[o],e,n,!0)}}class V2{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Sr(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ZE}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ZE);const B2={type:"change"},Fx={type:"start"},$2={type:"end"},ig=new v0,z2=new Ga,wX=Math.cos(70*Dj.DEG2RAD);class tU extends Kl{constructor(e,n){super(),this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new te,this.cursor=new te,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:pc.ROTATE,MIDDLE:pc.DOLLY,RIGHT:pc.PAN},this.touches={ONE:Ha.ROTATE,TWO:Ha.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return s.phi},this.getAzimuthalAngle=function(){return s.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Y){Y.addEventListener("keydown",k),this._domElementKeyEvents=Y},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",k),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(B2),r.update(),o=i.NONE},this.update=function(){const Y=new te,Se=new Fl().setFromUnitVectors(e.up,new te(0,1,0)),de=Se.clone().invert(),Qe=new te,Ge=new Fl,qe=new te,Ve=2*Math.PI;return function(vt=null){const Q=r.object.position;Y.copy(Q).sub(r.target),Y.applyQuaternion(Se),s.setFromVector3(Y),r.autoRotate&&o===i.NONE&&R(T(vt)),r.enableDamping?(s.theta+=l.theta*r.dampingFactor,s.phi+=l.phi*r.dampingFactor):(s.theta+=l.theta,s.phi+=l.phi);let le=r.minAzimuthAngle,ue=r.maxAzimuthAngle;isFinite(le)&&isFinite(ue)&&(le<-Math.PI?le+=Ve:le>Math.PI&&(le-=Ve),ue<-Math.PI?ue+=Ve:ue>Math.PI&&(ue-=Ve),le<=ue?s.theta=Math.max(le,Math.min(ue,s.theta)):s.theta=s.theta>(le+ue)/2?Math.max(le,s.theta):Math.min(ue,s.theta)),s.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,s.phi)),s.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(u,r.dampingFactor):r.target.add(u),r.target.sub(r.cursor),r.target.clampLength(r.minTargetRadius,r.maxTargetRadius),r.target.add(r.cursor),r.zoomToCursor&&M||r.object.isOrthographicCamera?s.radius=X(s.radius):s.radius=X(s.radius*c),Y.setFromSpherical(s),Y.applyQuaternion(de),Q.copy(r.target).add(Y),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,u.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),u.set(0,0,0));let ne=!1;if(r.zoomToCursor&&M){let ge=null;if(r.object.isPerspectiveCamera){const Ie=Y.length();ge=X(Ie*c);const rt=Ie-ge;r.object.position.addScaledVector(E,rt),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Ie=new te(b.x,b.y,0);Ie.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/c)),r.object.updateProjectionMatrix(),ne=!0;const rt=new te(b.x,b.y,0);rt.unproject(r.object),r.object.position.sub(rt).add(Ie),r.object.updateMatrixWorld(),ge=Y.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;ge!==null&&(this.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(ge).add(r.object.position):(ig.origin.copy(r.object.position),ig.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(ig.direction))<wX?e.lookAt(r.target):(z2.setFromNormalAndCoplanarPoint(r.object.up,r.target),ig.intersectPlane(z2,r.target))))}else r.object.isOrthographicCamera&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/c)),r.object.updateProjectionMatrix(),ne=!0);return c=1,M=!1,ne||Qe.distanceToSquared(r.object.position)>a||8*(1-Ge.dot(r.object.quaternion))>a||qe.distanceToSquared(r.target)>0?(r.dispatchEvent(B2),Qe.copy(r.object.position),Ge.copy(r.object.quaternion),qe.copy(r.target),ne=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",he),r.domElement.removeEventListener("pointerdown",Ye),r.domElement.removeEventListener("pointercancel",ht),r.domElement.removeEventListener("wheel",F),r.domElement.removeEventListener("pointermove",Ze),r.domElement.removeEventListener("pointerup",ht),r._domElementKeyEvents!==null&&(r._domElementKeyEvents.removeEventListener("keydown",k),r._domElementKeyEvents=null)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=i.NONE;const a=1e-6,s=new V2,l=new V2;let c=1;const u=new te,f=new gt,h=new gt,d=new gt,v=new gt,y=new gt,g=new gt,p=new gt,x=new gt,_=new gt,E=new te,b=new gt;let M=!1;const S=[],A={};function T(Y){return Y!==null?2*Math.PI/60*r.autoRotateSpeed*Y:2*Math.PI/60/60*r.autoRotateSpeed}function P(){return Math.pow(.95,r.zoomSpeed)}function R(Y){l.theta-=Y}function N(Y){l.phi-=Y}const I=function(){const Y=new te;return function(de,Qe){Y.setFromMatrixColumn(Qe,0),Y.multiplyScalar(-de),u.add(Y)}}(),D=function(){const Y=new te;return function(de,Qe){r.screenSpacePanning===!0?Y.setFromMatrixColumn(Qe,1):(Y.setFromMatrixColumn(Qe,0),Y.crossVectors(r.object.up,Y)),Y.multiplyScalar(de),u.add(Y)}}(),L=function(){const Y=new te;return function(de,Qe){const Ge=r.domElement;if(r.object.isPerspectiveCamera){const qe=r.object.position;Y.copy(qe).sub(r.target);let Ve=Y.length();Ve*=Math.tan(r.object.fov/2*Math.PI/180),I(2*de*Ve/Ge.clientHeight,r.object.matrix),D(2*Qe*Ve/Ge.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(I(de*(r.object.right-r.object.left)/r.object.zoom/Ge.clientWidth,r.object.matrix),D(Qe*(r.object.top-r.object.bottom)/r.object.zoom/Ge.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function q(Y){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?c/=Y:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function $(Y){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?c*=Y:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function V(Y){if(!r.zoomToCursor)return;M=!0;const Se=r.domElement.getBoundingClientRect(),de=Y.clientX-Se.left,Qe=Y.clientY-Se.top,Ge=Se.width,qe=Se.height;b.x=de/Ge*2-1,b.y=-(Qe/qe)*2+1,E.set(b.x,b.y,1).unproject(r.object).sub(r.object.position).normalize()}function X(Y){return Math.max(r.minDistance,Math.min(r.maxDistance,Y))}function K(Y){f.set(Y.clientX,Y.clientY)}function z(Y){V(Y),p.set(Y.clientX,Y.clientY)}function W(Y){v.set(Y.clientX,Y.clientY)}function ee(Y){h.set(Y.clientX,Y.clientY),d.subVectors(h,f).multiplyScalar(r.rotateSpeed);const Se=r.domElement;R(2*Math.PI*d.x/Se.clientHeight),N(2*Math.PI*d.y/Se.clientHeight),f.copy(h),r.update()}function me(Y){x.set(Y.clientX,Y.clientY),_.subVectors(x,p),_.y>0?q(P()):_.y<0&&$(P()),p.copy(x),r.update()}function _e(Y){y.set(Y.clientX,Y.clientY),g.subVectors(y,v).multiplyScalar(r.panSpeed),L(g.x,g.y),v.copy(y),r.update()}function Ne(Y){V(Y),Y.deltaY<0?$(P()):Y.deltaY>0&&q(P()),r.update()}function We(Y){let Se=!1;switch(Y.code){case r.keys.UP:Y.ctrlKey||Y.metaKey||Y.shiftKey?N(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):L(0,r.keyPanSpeed),Se=!0;break;case r.keys.BOTTOM:Y.ctrlKey||Y.metaKey||Y.shiftKey?N(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):L(0,-r.keyPanSpeed),Se=!0;break;case r.keys.LEFT:Y.ctrlKey||Y.metaKey||Y.shiftKey?R(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):L(r.keyPanSpeed,0),Se=!0;break;case r.keys.RIGHT:Y.ctrlKey||Y.metaKey||Y.shiftKey?R(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):L(-r.keyPanSpeed,0),Se=!0;break}Se&&(Y.preventDefault(),r.update())}function Ue(){if(S.length===1)f.set(S[0].pageX,S[0].pageY);else{const Y=.5*(S[0].pageX+S[1].pageX),Se=.5*(S[0].pageY+S[1].pageY);f.set(Y,Se)}}function fe(){if(S.length===1)v.set(S[0].pageX,S[0].pageY);else{const Y=.5*(S[0].pageX+S[1].pageX),Se=.5*(S[0].pageY+S[1].pageY);v.set(Y,Se)}}function Re(){const Y=S[0].pageX-S[1].pageX,Se=S[0].pageY-S[1].pageY,de=Math.sqrt(Y*Y+Se*Se);p.set(0,de)}function Ee(){r.enableZoom&&Re(),r.enablePan&&fe()}function H(){r.enableZoom&&Re(),r.enableRotate&&Ue()}function lt(Y){if(S.length==1)h.set(Y.pageX,Y.pageY);else{const de=Pe(Y),Qe=.5*(Y.pageX+de.x),Ge=.5*(Y.pageY+de.y);h.set(Qe,Ge)}d.subVectors(h,f).multiplyScalar(r.rotateSpeed);const Se=r.domElement;R(2*Math.PI*d.x/Se.clientHeight),N(2*Math.PI*d.y/Se.clientHeight),f.copy(h)}function be(Y){if(S.length===1)y.set(Y.pageX,Y.pageY);else{const Se=Pe(Y),de=.5*(Y.pageX+Se.x),Qe=.5*(Y.pageY+Se.y);y.set(de,Qe)}g.subVectors(y,v).multiplyScalar(r.panSpeed),L(g.x,g.y),v.copy(y)}function Le(Y){const Se=Pe(Y),de=Y.pageX-Se.x,Qe=Y.pageY-Se.y,Ge=Math.sqrt(de*de+Qe*Qe);x.set(0,Ge),_.set(0,Math.pow(x.y/p.y,r.zoomSpeed)),q(_.y),p.copy(x)}function ke(Y){r.enableZoom&&Le(Y),r.enablePan&&be(Y)}function mt(Y){r.enableZoom&&Le(Y),r.enableRotate&&lt(Y)}function Ye(Y){r.enabled!==!1&&(S.length===0&&(r.domElement.setPointerCapture(Y.pointerId),r.domElement.addEventListener("pointermove",Ze),r.domElement.addEventListener("pointerup",ht)),xe(Y),Y.pointerType==="touch"?re(Y):Mt(Y))}function Ze(Y){r.enabled!==!1&&(Y.pointerType==="touch"?ye(Y):jt(Y))}function ht(Y){Ce(Y),S.length===0&&(r.domElement.releasePointerCapture(Y.pointerId),r.domElement.removeEventListener("pointermove",Ze),r.domElement.removeEventListener("pointerup",ht)),r.dispatchEvent($2),o=i.NONE}function Mt(Y){let Se;switch(Y.button){case 0:Se=r.mouseButtons.LEFT;break;case 1:Se=r.mouseButtons.MIDDLE;break;case 2:Se=r.mouseButtons.RIGHT;break;default:Se=-1}switch(Se){case pc.DOLLY:if(r.enableZoom===!1)return;z(Y),o=i.DOLLY;break;case pc.ROTATE:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(r.enablePan===!1)return;W(Y),o=i.PAN}else{if(r.enableRotate===!1)return;K(Y),o=i.ROTATE}break;case pc.PAN:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(r.enableRotate===!1)return;K(Y),o=i.ROTATE}else{if(r.enablePan===!1)return;W(Y),o=i.PAN}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(Fx)}function jt(Y){switch(o){case i.ROTATE:if(r.enableRotate===!1)return;ee(Y);break;case i.DOLLY:if(r.enableZoom===!1)return;me(Y);break;case i.PAN:if(r.enablePan===!1)return;_e(Y);break}}function F(Y){r.enabled===!1||r.enableZoom===!1||o!==i.NONE||(Y.preventDefault(),r.dispatchEvent(Fx),Ne(Y),r.dispatchEvent($2))}function k(Y){r.enabled===!1||r.enablePan===!1||We(Y)}function re(Y){switch(Te(Y),S.length){case 1:switch(r.touches.ONE){case Ha.ROTATE:if(r.enableRotate===!1)return;Ue(),o=i.TOUCH_ROTATE;break;case Ha.PAN:if(r.enablePan===!1)return;fe(),o=i.TOUCH_PAN;break;default:o=i.NONE}break;case 2:switch(r.touches.TWO){case Ha.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ee(),o=i.TOUCH_DOLLY_PAN;break;case Ha.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;H(),o=i.TOUCH_DOLLY_ROTATE;break;default:o=i.NONE}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(Fx)}function ye(Y){switch(Te(Y),o){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;lt(Y),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;be(Y),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ke(Y),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;mt(Y),r.update();break;default:o=i.NONE}}function he(Y){r.enabled!==!1&&Y.preventDefault()}function xe(Y){S.push(Y)}function Ce(Y){delete A[Y.pointerId];for(let Se=0;Se<S.length;Se++)if(S[Se].pointerId==Y.pointerId){S.splice(Se,1);return}}function Te(Y){let Se=A[Y.pointerId];Se===void 0&&(Se=new gt,A[Y.pointerId]=Se),Se.set(Y.pageX,Y.pageY)}function Pe(Y){const Se=Y.pointerId===S[0].pointerId?S[1]:S[0];return A[Se.pointerId]}r.domElement.addEventListener("contextmenu",he),r.domElement.addEventListener("pointerdown",Ye),r.domElement.addEventListener("pointercancel",ht),r.domElement.addEventListener("wheel",F,{passive:!1}),this.update()}}var bu=Object.freeze({Linear:Object.freeze({None:function(t){return t},In:function(t){return t},Out:function(t){return t},InOut:function(t){return t}}),Quadratic:Object.freeze({In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}}),Cubic:Object.freeze({In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}}),Quartic:Object.freeze({In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}}),Quintic:Object.freeze({In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}}),Sinusoidal:Object.freeze({In:function(t){return 1-Math.sin((1-t)*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return .5*(1-Math.sin(Math.PI*(.5-t)))}}),Exponential:Object.freeze({In:function(t){return t===0?0:Math.pow(1024,t-1)},Out:function(t){return t===1?1:1-Math.pow(2,-10*t)},InOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}}),Circular:Object.freeze({In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}}),Elastic:Object.freeze({In:function(t){return t===0?0:t===1?1:-Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI)},Out:function(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t-.1)*5*Math.PI)+1},InOut:function(t){return t===0?0:t===1?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin((t-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(t){var e=1.70158;return t===1?1:t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return t===0?0:--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}}),Bounce:Object.freeze({In:function(t){return 1-bu.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?bu.Bounce.In(t*2)*.5:bu.Bounce.Out(t*2-1)*.5+.5}}),generatePow:function(t){return t===void 0&&(t=4),t=t<Number.EPSILON?Number.EPSILON:t,t=t>1e4?1e4:t,{In:function(e){return Math.pow(e,t)},Out:function(e){return 1-Math.pow(1-e,t)},InOut:function(e){return e<.5?Math.pow(e*2,t)/2:(1-Math.pow(2-e*2,t))/2+.5}}}}),Uh=function(){return performance.now()},SX=function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return t.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(n){return e._tweens[n]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},t.prototype.remove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},t.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},t.prototype.update=function(e,n){e===void 0&&(e=Uh()),n===void 0&&(n=!0);var r=Object.keys(this._tweens);if(r.length!==0)for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<r.length;i++){var o=this._tweens[r[i]],a=!n;o&&o.update(e,a)===!1&&!n&&this.remove(o)}r=Object.keys(this._tweensAddedDuringUpdate)}},t}(),tu={Linear:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=tu.Utils.Linear;return e<0?o(t[0],t[1],r):e>1?o(t[n],t[n-1],n-r):o(t[i],t[i+1>n?n:i+1],r-i)},Bezier:function(t,e){for(var n=0,r=t.length-1,i=Math.pow,o=tu.Utils.Bernstein,a=0;a<=r;a++)n+=i(1-e,r-a)*i(e,a)*t[a]*o(r,a);return n},CatmullRom:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=tu.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(i=Math.floor(r=n*(1+e))),o(t[(i-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],r-i)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[n]-(o(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):o(t[i?i-1:0],t[i],t[n<i+1?n:i+1],t[n<i+2?n:i+2],r-i)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=tu.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var r=e;r>1;r--)n*=r;return t[e]=n,n}}(),CatmullRom:function(t,e,n,r,i){var o=(n-t)*.5,a=(r-e)*.5,s=i*i,l=i*s;return(2*e-2*n+o+a)*l+(-3*e+3*n-2*o-a)*s+o*i+e}}},EX=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),H1=new SX,TX=function(){function t(e,n){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=bu.Linear.None,this._interpolationFunction=tu.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=EX.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof n=="object"?(this._group=n,n.add(this)):n===!0&&(this._group=H1,H1.add(this))}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.getDuration=function(){return this._duration},t.prototype.to=function(e,n){if(n===void 0&&(n=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=n<0?0:n,this},t.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},t.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},t.prototype.start=function(e,n){if(e===void 0&&(e=Uh()),n===void 0&&(n=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var r in this._valuesStartRepeat)this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||n){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var o in this._valuesEnd)i[o]=this._valuesEnd[o];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n)}return this},t.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},t.prototype._setupProperties=function(e,n,r,i,o){for(var a in r){var s=e[a],l=Array.isArray(s),c=l?"array":typeof s,u=!l&&Array.isArray(r[a]);if(!(c==="undefined"||c==="function")){if(u){var f=r[a];if(f.length===0)continue;for(var h=[s],d=0,v=f.length;d<v;d+=1){var y=this._handleRelativeValue(s,f[d]);if(isNaN(y)){u=!1,console.warn("Found invalid interpolation list. Skipping.");break}h.push(y)}u&&(r[a]=h)}if((c==="object"||l)&&s&&!u){n[a]=l?[]:{};var g=s;for(var p in g)n[a][p]=g[p];i[a]=l?[]:{};var f=r[a];if(!this._isDynamic){var x={};for(var p in f)x[p]=f[p];r[a]=f=x}this._setupProperties(g,n[a],f,i[a],o)}else(typeof n[a]>"u"||o)&&(n[a]=s),l||(n[a]*=1),u?i[a]=r[a].slice().reverse():i[a]=n[a]||0}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},t.prototype.pause=function(e){return e===void 0&&(e=Uh()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},t.prototype.resume=function(e){return e===void 0&&(e=Uh()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},t.prototype.stopChainedTweens=function(){for(var e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this},t.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},t.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},t.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},t.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},t.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},t.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},t.prototype.easing=function(e){return e===void 0&&(e=bu.Linear.None),this._easingFunction=e,this},t.prototype.interpolation=function(e){return e===void 0&&(e=tu.Linear),this._interpolationFunction=e,this},t.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._chainedTweens=e,this},t.prototype.onStart=function(e){return this._onStartCallback=e,this},t.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},t.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},t.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},t.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},t.prototype.onStop=function(e){return this._onStopCallback=e,this},t.prototype.update=function(e,n){var r=this,i;if(e===void 0&&(e=Uh()),n===void 0&&(n=t.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(n)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,s=this._duration+((i=this._repeatDelayTime)!==null&&i!==void 0?i:this._delayTime),l=this._duration+this._repeat*s,c=function(){if(r._duration===0||a>l)return 1;var y=Math.trunc(a/s),g=a-y*s,p=Math.min(g/r._duration,1);return p===0&&a===r._duration?1:p},u=c(),f=this._easingFunction(u);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,f),this._onUpdateCallback&&this._onUpdateCallback(this._object,u),this._duration===0||a>=this._duration)if(this._repeat>0){var h=Math.min(Math.trunc((a-this._duration)/s)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=h);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=s*h,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var d=0,v=this._chainedTweens.length;d<v;d++)this._chainedTweens[d].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(e,n,r,i){for(var o in r)if(n[o]!==void 0){var a=n[o]||0,s=r[o],l=Array.isArray(e[o]),c=Array.isArray(s),u=!l&&c;u?e[o]=this._interpolationFunction(s,i):typeof s=="object"&&s?this._updateProperties(e[o],a,s,i):(s=this._handleRelativeValue(a,s),typeof s=="number"&&(e[o]=a+(s-a)*i))}},t.prototype._handleRelativeValue=function(e,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?e+parseFloat(n):parseFloat(n)},t.prototype._swapEndStartRepeatValues=function(e){var n=this._valuesStartRepeat[e],r=this._valuesEnd[e];typeof r=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(r):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n},t.autoStartOnUpdate=!1,t}(),Oo=H1;Oo.getAll.bind(Oo);Oo.removeAll.bind(Oo);Oo.add.bind(Oo);Oo.remove.bind(Oo);var AX=Oo.update.bind(Oo),uT={};uT.match=IX;uT.parse=nU;var MX=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,PX=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,CX=/^(?:(min|max)-)?(.+)/,RX=/(em|rem|px|cm|mm|in|pt|pc)?$/,OX=/(dpi|dpcm|dppx)?$/;function IX(t,e){return nU(t).some(function(n){var r=n.inverse,i=n.type==="all"||e.type===n.type;if(i&&r||!(i||r))return!1;var o=n.expressions.every(function(a){var s=a.feature,l=a.modifier,c=a.value,u=e[s];if(!u)return!1;switch(s){case"orientation":case"scan":return u.toLowerCase()===c.toLowerCase();case"width":case"height":case"device-width":case"device-height":c=W2(c),u=W2(u);break;case"resolution":c=G2(c),u=G2(u);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":c=H2(c),u=H2(u);break;case"grid":case"color":case"color-index":case"monochrome":c=parseInt(c,10)||1,u=parseInt(u,10)||0;break}switch(l){case"min":return u>=c;case"max":return u<=c;default:return u===c}});return o&&!r||!o&&r})}function nU(t){return t.split(",").map(function(e){e=e.trim();var n=e.match(MX),r=n[1],i=n[2],o=n[3]||"",a={};return a.inverse=!!r&&r.toLowerCase()==="not",a.type=i?i.toLowerCase():"all",o=o.match(/\([^\)]+\)/g)||[],a.expressions=o.map(function(s){var l=s.match(PX),c=l[1].toLowerCase().match(CX);return{modifier:c[1],feature:c[2],value:l[2]}}),a})}function H2(t){var e=Number(t),n;return e||(n=t.match(/^(\d+)\s*\/\s*(\d+)$/),e=n[1]/n[2]),e}function G2(t){var e=parseFloat(t),n=String(t).match(OX)[1];switch(n){case"dpcm":return e/2.54;case"dppx":return e*96;default:return e}}function W2(t){var e=parseFloat(t),n=String(t).match(RX)[1];switch(n){case"em":return e*16;case"rem":return e*16;case"cm":return e*96/2.54;case"mm":return e*96/2.54/10;case"in":return e*96;case"pt":return e*72;case"pc":return e*72/12;default:return e}}var NX=uT.match,q2=typeof window<"u"?window.matchMedia:null;function DX(t,e,n){var r=this,i;q2&&!n&&(i=q2.call(window,t)),i?(this.matches=i.matches,this.media=i.media,i.addListener(s)):(this.matches=NX(t,e),this.media=t),this.addListener=o,this.removeListener=a,this.dispose=l;function o(c){i&&i.addListener(c)}function a(c){i&&i.removeListener(c)}function s(c){r.matches=c.matches,r.media=c.media}function l(){i&&i.removeListener(s)}}function LX(t,e,n){return new DX(t,e,n)}var kX=LX;const jX=Ft(kX);var UX=/[A-Z]/g,FX=/^ms-/,Vx={};function VX(t){return"-"+t.toLowerCase()}function rU(t){if(Vx.hasOwnProperty(t))return Vx[t];var e=t.replace(UX,VX);return Vx[t]=FX.test(e)?"-"+e:e}function BX(t,e){if(t===e)return!0;if(!t||!e)return!1;const n=Object.keys(t),r=Object.keys(e),i=n.length;if(r.length!==i)return!1;for(let o=0;o<i;o++){const a=n[o];if(t[a]!==e[a]||!Object.prototype.hasOwnProperty.call(e,a))return!1}return!0}var iU={exports:{}},$X="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",zX=$X,HX=zX;function oU(){}function aU(){}aU.resetWarningCache=oU;var GX=function(){function t(r,i,o,a,s,l){if(l!==HX){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:aU,resetWarningCache:oU};return n.PropTypes=n,n};iU.exports=GX();var WX=iU.exports;const je=Ft(WX),Ir=je.oneOfType([je.string,je.number]),fT={all:je.bool,grid:je.bool,aural:je.bool,braille:je.bool,handheld:je.bool,print:je.bool,projection:je.bool,screen:je.bool,tty:je.bool,tv:je.bool,embossed:je.bool},sU={orientation:je.oneOf(["portrait","landscape"]),scan:je.oneOf(["progressive","interlace"]),aspectRatio:je.string,deviceAspectRatio:je.string,height:Ir,deviceHeight:Ir,width:Ir,deviceWidth:Ir,color:je.bool,colorIndex:je.bool,monochrome:je.bool,resolution:Ir,type:Object.keys(fT)},{type:qRe,...qX}=sU,lU={minAspectRatio:je.string,maxAspectRatio:je.string,minDeviceAspectRatio:je.string,maxDeviceAspectRatio:je.string,minHeight:Ir,maxHeight:Ir,minDeviceHeight:Ir,maxDeviceHeight:Ir,minWidth:Ir,maxWidth:Ir,minDeviceWidth:Ir,maxDeviceWidth:Ir,minColor:je.number,maxColor:je.number,minColorIndex:je.number,maxColorIndex:je.number,minMonochrome:je.number,maxMonochrome:je.number,minResolution:Ir,maxResolution:Ir,...qX},XX={...fT,...lU};var KX={all:XX,types:fT,matchers:sU,features:lU};const YX=t=>`not ${t}`,QX=(t,e)=>{const n=rU(t);return typeof e=="number"&&(e=`${e}px`),e===!0?n:e===!1?YX(n):`(${n}: ${e})`},ZX=t=>t.join(" and "),JX=t=>{const e=[];return Object.keys(KX.all).forEach(n=>{const r=t[n];r!=null&&e.push(QX(n,r))}),ZX(e)},eK=B.createContext(void 0),tK=t=>t.query||JX(t),X2=t=>t?Object.keys(t).reduce((n,r)=>(n[rU(r)]=t[r],n),{}):void 0,cU=()=>{const t=B.useRef(!1);return B.useEffect(()=>{t.current=!0},[]),t.current},nK=t=>{const e=B.useContext(eK),n=()=>X2(t)||X2(e),[r,i]=B.useState(n);return B.useEffect(()=>{const o=n();BX(r,o)||i(o)},[t,e]),r},rK=t=>{const e=()=>tK(t),[n,r]=B.useState(e);return B.useEffect(()=>{const i=e();n!==i&&r(i)},[t]),n},iK=(t,e)=>{const n=()=>jX(t,e||{},!!e),[r,i]=B.useState(n),o=cU();return B.useEffect(()=>{if(o){const a=n();return i(a),()=>{a&&a.dispose()}}},[t,e]),r},oK=t=>{const[e,n]=B.useState(t.matches);return B.useEffect(()=>{const r=i=>{n(i.matches)};return t.addListener(r),n(t.matches),()=>{t.removeListener(r)}},[t]),e},K2=(t,e,n)=>{const r=nK(e),i=rK(t);if(!i)throw new Error("Invalid or missing MediaQuery!");const o=iK(i,r),a=oK(o),s=cU();return B.useEffect(()=>{s&&n&&n(a)},[a]),B.useEffect(()=>()=>{o&&o.dispose()},[]),a},aK=[{name:"UAE",lat:23.4241,lng:53.8478,code:"AE"},{name:"India",lat:20.5937,lng:78.9629,code:"IN"},{name:"Indonesia",lat:-.7893,lng:113.9213,code:"ID"},{name:"USA",lat:37.0902,lng:-95.7129,code:"US"},{name:"UK",lat:55.3781,lng:-3.436,code:"GB"},{name:"Thailand",lat:15.87,lng:100.9925,code:"TH"},{name:"Bahrain",lat:26.0667,lng:50.5577,code:"BH"},{name:"Germany",lat:51.1657,lng:10.4515,code:"DE"},{name:"Australia",lat:-25.2744,lng:133.7751,code:"AU"},{name:"Canada",lat:56.1304,lng:-106.3468,code:"CA"},{name:"Mexico",lat:23.6345,lng:-102.5528,code:"MX"},{name:"China",lat:35.8617,lng:104.1954,code:"CN"},{name:"Ireland",lat:53.1424,lng:-7.6921,code:"IE"},{name:"Cyprus",lat:35.1264,lng:33.4299,code:"CY"},{name:"Czechia",lat:49.8175,lng:15.473,code:"CZ"},{name:"Russia",lat:61.524,lng:105.3188,code:"RU"},{name:"Colombia",lat:4.5709,lng:-74.2973,code:"CO"},{name:"Egypt",lat:26.8206,lng:30.8025,code:"EG"},{name:"Italy",lat:41.8719,lng:12.5674,code:"IT"},{name:"Norway",lat:60.472,lng:8.4689,code:"NO"},{name:"South Africa",lat:-30.5595,lng:22.9375,code:"ZA"},{name:"Switzerland",lat:46.8182,lng:8.2275,code:"CH"},{name:"Japan",lat:36.2048,lng:138.2529,code:"JP"},{name:"Iraq",lat:33.2232,lng:43.6793,code:"IQ"},{name:"Kazakhstan",lat:48.0196,lng:66.9237,code:"KZ"},{name:"Kuwait",lat:29.3759,lng:47.9774,code:"KW"},{name:"Libya",lat:26.3351,lng:17.2283,code:"LY"},{name:"Ukraine",lat:48.3794,lng:31.1656,code:"UA"},{name:"Iran",lat:32.4279,lng:53.688,code:"IR"},{name:"Nigeria",lat:9.082,lng:8.6753,code:"NG"},{name:"Korea",lat:35.9078,lng:127.7669,code:"KR"},{name:"Austria",lat:47.5162,lng:14.5501,code:"AT"},{name:"Poland",lat:51.9194,lng:19.1451,code:"PL"},{name:"Brazil",lat:-14.235,lng:-51.9253,code:"BR"},{name:"Ecuador",lat:-1.8312,lng:-78.1834,code:"EC"},{name:"Venezuela",lat:6.4238,lng:-66.5897,code:"VE"},{name:"Oman",lat:21.4735,lng:55.9754,code:"OM"},{name:"Malaysia",lat:4.2105,lng:101.9758,code:"MY"},{name:"Qatar",lat:25.3548,lng:51.1839,code:"QA"},{name:"Spain",lat:40.4637,lng:-3.7492,code:"ES"},{name:"Saudi Arabia",lat:23.8859,lng:45.0792,code:"SA"},{name:"Slovakia",lat:48.669,lng:19.699,code:"SK"},{name:"Angola",lat:-11.2027,lng:17.8739,code:"AO"},{name:"Algeria",lat:28.0339,lng:1.6596,code:"DZ"},{name:"Syria",lat:34.8021,lng:38.9968,code:"SY"},{name:"France",lat:46.2276,lng:2.2137,code:"FR"},{name:"Turkmenistan",lat:38.9697,lng:59.5563,code:"TM"},{name:"Argentina",lat:-38.4161,lng:-63.6167,code:"AR"},{name:"Netherlands",lat:52.1326,lng:5.2913,code:"NL"}],sK={countries:aK};function lK(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function x0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const G1=t=>Array.isArray(t);function uU(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Fd(t){return typeof t=="string"||Array.isArray(t)}function Y2(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function hT(t,e,n,r){if(typeof e=="function"){const[i,o]=Y2(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=Y2(r);e=e(n!==void 0?n:t.custom,i,o)}return e}function b0(t,e,n){const r=t.getProps();return hT(r,e,n!==void 0?n:r.custom,t)}const dT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pT=["initial",...dT],$p=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Yl=new Set($p),aa=t=>t*1e3,sa=t=>t/1e3,cK={type:"spring",stiffness:500,damping:25,restSpeed:10},uK=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),fK={type:"keyframes",duration:.8},hK={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},dK=(t,{keyframes:e})=>e.length>2?fK:Yl.has(t)?t.startsWith("scale")?uK(e[1]):cK:hK;function mT(t,e){return t?t[e]||t.default||t:void 0}const pK={skipAnimations:!1,useManualTiming:!1},mK=t=>t!==null;function w0(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(mK),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const Mr=t=>t;function gK(t){let e=new Set,n=new Set,r=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function s(c){o.has(c)&&(l.schedule(c),t()),c(a)}const l={schedule:(c,u=!1,f=!1)=>{const d=f&&r?e:n;return u&&o.add(c),d.has(c)||d.add(c),c},cancel:c=>{n.delete(c),o.delete(c)},process:c=>{if(a=c,r){i=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(s),r=!1,i&&(i=!1,l.process(c))}};return l}const og=["read","resolveKeyframes","update","preRender","render","postRender"],vK=40;function fU(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=og.reduce((p,x)=>(p[x]=gK(o),p),{}),{read:s,resolveKeyframes:l,update:c,preRender:u,render:f,postRender:h}=a,d=()=>{const p=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(p-i.timestamp,vK),1),i.timestamp=p,i.isProcessing=!0,s.process(i),l.process(i),c.process(i),u.process(i),f.process(i),h.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(d))},v=()=>{n=!0,r=!0,i.isProcessing||t(d)};return{schedule:og.reduce((p,x)=>{const _=a[x];return p[x]=(E,b=!1,M=!1)=>(n||v(),_.schedule(E,b,M)),p},{}),cancel:p=>{for(let x=0;x<og.length;x++)a[og[x]].cancel(p)},state:i,steps:a}}const{schedule:Gt,cancel:ws,state:or,steps:Bx}=fU(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mr,!0),hU=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,yK=1e-7,_K=12;function xK(t,e,n,r,i){let o,a,s=0;do a=e+(n-e)/2,o=hU(a,r,i)-t,o>0?n=a:e=a;while(Math.abs(o)>yK&&++s<_K);return a}function zp(t,e,n,r){if(t===e&&n===r)return Mr;const i=o=>xK(o,0,1,t,n);return o=>o===0||o===1?o:hU(i(o),e,r)}const dU=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,pU=t=>e=>1-t(1-e),mU=zp(.33,1.53,.69,.99),gT=pU(mU),gU=dU(gT),vU=t=>(t*=2)<1?.5*gT(t):.5*(2-Math.pow(2,-10*(t-1))),vT=t=>1-Math.sin(Math.acos(t)),yU=pU(vT),_U=dU(vT),xU=t=>/^0[^.\s]+$/u.test(t);function bK(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||xU(t):!0}let W1=Mr;const bU=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),wU=t=>e=>typeof e=="string"&&e.startsWith(t),SU=wU("--"),wK=wU("var(--"),yT=t=>wK(t)?SK.test(t.split("/*")[0].trim()):!1,SK=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,EK=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function TK(t){const e=EK.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function EU(t,e,n=1){const[r,i]=TK(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const a=o.trim();return bU(a)?parseFloat(a):a}return yT(i)?EU(i,e,n+1):i}const Ss=(t,e,n)=>n>e?e:n<t?t:n,Rf={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Vd={...Rf,transform:t=>Ss(0,1,t)},ag={...Rf,default:1},Hp=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Va=Hp("deg"),Eo=Hp("%"),nt=Hp("px"),AK=Hp("vh"),MK=Hp("vw"),Q2={...Eo,parse:t=>Eo.parse(t)/100,transform:t=>Eo.transform(t*100)},PK=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Z2=t=>t===Rf||t===nt,J2=(t,e)=>parseFloat(t.split(", ")[e]),eR=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return J2(i[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?J2(o[1],t):0}},CK=new Set(["x","y","z"]),RK=$p.filter(t=>!CK.has(t));function OK(t){const e=[];return RK.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Uu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:eR(4,13),y:eR(5,14)};Uu.translateX=Uu.x;Uu.translateY=Uu.y;const TU=t=>e=>e.test(t),IK={test:t=>t==="auto",parse:t=>t},AU=[Rf,nt,Eo,Va,MK,AK,IK],tR=t=>AU.find(TU(t)),Pl=new Set;let q1=!1,X1=!1;function MU(){if(X1){const t=Array.from(Pl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=OK(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,a])=>{var s;(s=r.getValue(o))===null||s===void 0||s.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}X1=!1,q1=!1,Pl.forEach(t=>t.complete()),Pl.clear()}function PU(){Pl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(X1=!0)})}function NK(){PU(),MU()}class _T{constructor(e,n,r,i,o,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Pl.add(this),q1||(q1=!0,Gt.read(PU),Gt.resolveKeyframes(MU))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const a=i==null?void 0:i.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const l=r.readValue(n,s);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Pl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Pl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const rd=t=>Math.round(t*1e5)/1e5,xT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function DK(t){return t==null}const LK=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,bT=(t,e)=>n=>!!(typeof n=="string"&&LK.test(n)&&n.startsWith(t)||e&&!DK(n)&&Object.prototype.hasOwnProperty.call(n,e)),CU=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,a,s]=r.match(xT);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(a),alpha:s!==void 0?parseFloat(s):1}},kK=t=>Ss(0,255,t),$x={...Rf,transform:t=>Math.round(kK(t))},ml={test:bT("rgb","red"),parse:CU("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+$x.transform(t)+", "+$x.transform(e)+", "+$x.transform(n)+", "+rd(Vd.transform(r))+")"};function jK(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const K1={test:bT("#"),parse:jK,transform:ml.transform},nu={test:bT("hsl","hue"),parse:CU("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Eo.transform(rd(e))+", "+Eo.transform(rd(n))+", "+rd(Vd.transform(r))+")"},_r={test:t=>ml.test(t)||K1.test(t)||nu.test(t),parse:t=>ml.test(t)?ml.parse(t):nu.test(t)?nu.parse(t):K1.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ml.transform(t):nu.transform(t)},UK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function FK(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(xT))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(UK))===null||n===void 0?void 0:n.length)||0)>0}const RU="number",OU="color",VK="var",BK="var(",nR="${}",$K=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Bd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const s=e.replace($K,l=>(_r.test(l)?(r.color.push(o),i.push(OU),n.push(_r.parse(l))):l.startsWith(BK)?(r.var.push(o),i.push(VK),n.push(l)):(r.number.push(o),i.push(RU),n.push(parseFloat(l))),++o,nR)).split(nR);return{values:n,split:s,indexes:r,types:i}}function IU(t){return Bd(t).values}function NU(t){const{split:e,types:n}=Bd(t),r=e.length;return i=>{let o="";for(let a=0;a<r;a++)if(o+=e[a],i[a]!==void 0){const s=n[a];s===RU?o+=rd(i[a]):s===OU?o+=_r.transform(i[a]):o+=i[a]}return o}}const zK=t=>typeof t=="number"?0:t;function HK(t){const e=IU(t);return NU(t)(e.map(zK))}const Es={test:FK,parse:IU,createTransformer:NU,getAnimatableNone:HK},GK=new Set(["brightness","contrast","saturate","opacity"]);function WK(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(xT)||[];if(!r)return t;const i=n.replace(r,"");let o=GK.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const qK=/\b([a-z-]*)\(.*?\)/gu,Y1={...Es,getAnimatableNone:t=>{const e=t.match(qK);return e?e.map(WK).join(" "):t}},XK={borderWidth:nt,borderTopWidth:nt,borderRightWidth:nt,borderBottomWidth:nt,borderLeftWidth:nt,borderRadius:nt,radius:nt,borderTopLeftRadius:nt,borderTopRightRadius:nt,borderBottomRightRadius:nt,borderBottomLeftRadius:nt,width:nt,maxWidth:nt,height:nt,maxHeight:nt,top:nt,right:nt,bottom:nt,left:nt,padding:nt,paddingTop:nt,paddingRight:nt,paddingBottom:nt,paddingLeft:nt,margin:nt,marginTop:nt,marginRight:nt,marginBottom:nt,marginLeft:nt,backgroundPositionX:nt,backgroundPositionY:nt},KK={rotate:Va,rotateX:Va,rotateY:Va,rotateZ:Va,scale:ag,scaleX:ag,scaleY:ag,scaleZ:ag,skew:Va,skewX:Va,skewY:Va,distance:nt,translateX:nt,translateY:nt,translateZ:nt,x:nt,y:nt,z:nt,perspective:nt,transformPerspective:nt,opacity:Vd,originX:Q2,originY:Q2,originZ:nt},rR={...Rf,transform:Math.round},wT={...XK,...KK,zIndex:rR,size:nt,fillOpacity:Vd,strokeOpacity:Vd,numOctaves:rR},YK={...wT,color:_r,backgroundColor:_r,outlineColor:_r,fill:_r,stroke:_r,borderColor:_r,borderTopColor:_r,borderRightColor:_r,borderBottomColor:_r,borderLeftColor:_r,filter:Y1,WebkitFilter:Y1},ST=t=>YK[t];function DU(t,e){let n=ST(t);return n!==Y1&&(n=Es),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const QK=new Set(["auto","none","0"]);function ZK(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!QK.has(o)&&Bd(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=DU(n,i)}class LU extends _T{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),yT(c))){const u=EU(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!PK.has(r)||e.length!==2)return;const[i,o]=e,a=tR(i),s=tR(o);if(a!==s)if(Z2(a)&&Z2(s))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)bK(e[i])&&r.push(i);r.length&&ZK(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Uu[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const o=n.getValue(r);o&&o.jump(this.measuredOrigin,!1);const a=i.length-1,s=i[a];i[a]=Uu[r](n.measureViewportBox(),window.getComputedStyle(n.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function ET(t){return typeof t=="function"}let $g;function JK(){$g=void 0}const To={now:()=>($g===void 0&&To.set(or.isProcessing||pK.useManualTiming?or.timestamp:performance.now()),$g),set:t=>{$g=t,queueMicrotask(JK)}},iR=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Es.test(t)||t==="0")&&!t.startsWith("url("));function eY(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function tY(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=iR(i,e),s=iR(o,e);return!a||!s?!1:eY(t)||(n==="spring"||ET(n))&&r}const nY=40;class kU{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",...s}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=To.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:a,...s},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>nY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&NK(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=To.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:o,delay:a,onComplete:s,onUpdate:l,isGenerator:c}=this.options;if(!c&&!tY(e,r,i,o))if(a)this.options.duration=0;else{l==null||l(w0(e,this.options,n)),s==null||s(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function jU(t,e){return e?t*(1e3/e):0}const rY=5;function UU(t,e,n){const r=Math.max(e-rY,0);return jU(n-t(r),e-r)}const zx=.001,iY=.01,oY=10,aY=.05,sY=1;function lY({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,o,a=1-e;a=Ss(aY,sY,a),t=Ss(iY,oY,sa(t)),a<1?(i=c=>{const u=c*a,f=u*t,h=u-n,d=Q1(c,a),v=Math.exp(-f);return zx-h/d*v},o=c=>{const f=c*a*t,h=f*n+n,d=Math.pow(a,2)*Math.pow(c,2)*t,v=Math.exp(-f),y=Q1(Math.pow(c,2),a);return(-i(c)+zx>0?-1:1)*((h-d)*v)/y}):(i=c=>{const u=Math.exp(-c*t),f=(c-n)*t+1;return-zx+u*f},o=c=>{const u=Math.exp(-c*t),f=(n-c)*(t*t);return u*f});const s=5/t,l=uY(i,o,s);if(t=aa(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:t}}}const cY=12;function uY(t,e,n){let r=n;for(let i=1;i<cY;i++)r=r-t(r)/e(r);return r}function Q1(t,e){return t*Math.sqrt(1-e*e)}const fY=["duration","bounce"],hY=["stiffness","damping","mass"];function oR(t,e){return e.some(n=>t[n]!==void 0)}function dY(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!oR(t,hY)&&oR(t,fY)){const n=lY(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function FU({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],o=t[t.length-1],a={done:!1,value:i},{stiffness:s,damping:l,mass:c,duration:u,velocity:f,isResolvedFromDuration:h}=dY({...r,velocity:-sa(r.velocity||0)}),d=f||0,v=l/(2*Math.sqrt(s*c)),y=o-i,g=sa(Math.sqrt(s/c)),p=Math.abs(y)<5;n||(n=p?.01:2),e||(e=p?.005:.5);let x;if(v<1){const _=Q1(g,v);x=E=>{const b=Math.exp(-v*g*E);return o-b*((d+v*g*y)/_*Math.sin(_*E)+y*Math.cos(_*E))}}else if(v===1)x=_=>o-Math.exp(-g*_)*(y+(d+g*y)*_);else{const _=g*Math.sqrt(v*v-1);x=E=>{const b=Math.exp(-v*g*E),M=Math.min(_*E,300);return o-b*((d+v*g*y)*Math.sinh(M)+_*y*Math.cosh(M))/_}}return{calculatedDuration:h&&u||null,next:_=>{const E=x(_);if(h)a.done=_>=u;else{let b=0;v<1&&(b=_===0?aa(d):UU(x,_,E));const M=Math.abs(b)<=n,S=Math.abs(o-E)<=e;a.done=M&&S}return a.value=a.done?o:E,a}}}function aR({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:s,max:l,restDelta:c=.5,restSpeed:u}){const f=t[0],h={done:!1,value:f},d=A=>s!==void 0&&A<s||l!==void 0&&A>l,v=A=>s===void 0?l:l===void 0||Math.abs(s-A)<Math.abs(l-A)?s:l;let y=n*e;const g=f+y,p=a===void 0?g:a(g);p!==g&&(y=p-f);const x=A=>-y*Math.exp(-A/r),_=A=>p+x(A),E=A=>{const T=x(A),P=_(A);h.done=Math.abs(T)<=c,h.value=h.done?p:P};let b,M;const S=A=>{d(h.value)&&(b=A,M=FU({keyframes:[h.value,v(h.value)],velocity:UU(_,A,h.value),damping:i,stiffness:o,restDelta:c,restSpeed:u}))};return S(0),{calculatedDuration:null,next:A=>{let T=!1;return!M&&b===void 0&&(T=!0,E(A),S(A)),b!==void 0&&A>=b?M.next(A-b):(!T&&E(A),h)}}}const pY=zp(.42,0,1,1),mY=zp(0,0,.58,1),VU=zp(.42,0,.58,1),gY=t=>Array.isArray(t)&&typeof t[0]!="number",TT=t=>Array.isArray(t)&&typeof t[0]=="number",sR={linear:Mr,easeIn:pY,easeInOut:VU,easeOut:mY,circIn:vT,circInOut:_U,circOut:yU,backIn:gT,backInOut:gU,backOut:mU,anticipate:vU},lR=t=>{if(TT(t)){W1(t.length===4);const[e,n,r,i]=t;return zp(e,n,r,i)}else if(typeof t=="string")return W1(sR[t]!==void 0),sR[t];return t},vY=(t,e)=>n=>e(t(n)),la=(...t)=>t.reduce(vY),Fu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},fn=(t,e,n)=>t+(e-t)*n;function Hx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function yY({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,a=0;if(!e)i=o=a=n;else{const s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;i=Hx(l,s,t+1/3),o=Hx(l,s,t),a=Hx(l,s,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}function Pv(t,e){return n=>n>0?e:t}const Gx=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},_Y=[K1,ml,nu],xY=t=>_Y.find(e=>e.test(t));function cR(t){const e=xY(t);if(!e)return!1;let n=e.parse(t);return e===nu&&(n=yY(n)),n}const uR=(t,e)=>{const n=cR(t),r=cR(e);if(!n||!r)return Pv(t,e);const i={...n};return o=>(i.red=Gx(n.red,r.red,o),i.green=Gx(n.green,r.green,o),i.blue=Gx(n.blue,r.blue,o),i.alpha=fn(n.alpha,r.alpha,o),ml.transform(i))},Z1=new Set(["none","hidden"]);function bY(t,e){return Z1.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function wY(t,e){return n=>fn(t,e,n)}function AT(t){return typeof t=="number"?wY:typeof t=="string"?yT(t)?Pv:_r.test(t)?uR:TY:Array.isArray(t)?BU:typeof t=="object"?_r.test(t)?uR:SY:Pv}function BU(t,e){const n=[...t],r=n.length,i=t.map((o,a)=>AT(o)(o,e[a]));return o=>{for(let a=0;a<r;a++)n[a]=i[a](o);return n}}function SY(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=AT(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function EY(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const a=e.types[o],s=t.indexes[a][i[a]],l=(n=t.values[s])!==null&&n!==void 0?n:0;r[o]=l,i[a]++}return r}const TY=(t,e)=>{const n=Es.createTransformer(e),r=Bd(t),i=Bd(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Z1.has(t)&&!i.values.length||Z1.has(e)&&!r.values.length?bY(t,e):la(BU(EY(r,i),i.values),n):Pv(t,e)};function $U(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?fn(t,e,n):AT(t)(t,e)}function AY(t,e,n){const r=[],i=n||$U,o=t.length-1;for(let a=0;a<o;a++){let s=i(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Mr:e;s=la(l,s)}r.push(s)}return r}function MY(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(W1(o===e.length),o===1)return()=>e[0];if(o===2&&t[0]===t[1])return()=>e[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=AY(e,r,i),s=a.length,l=c=>{let u=0;if(s>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const f=Fu(t[u],t[u+1],c);return a[u](f)};return n?c=>l(Ss(t[0],t[o-1],c)):l}function PY(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Fu(0,e,r);t.push(fn(n,1,i))}}function CY(t){const e=[0];return PY(e,t.length-1),e}function RY(t,e){return t.map(n=>n*e)}function OY(t,e){return t.map(()=>e||VU).splice(0,t.length-1)}function Cv({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=gY(r)?r.map(lR):lR(r),o={done:!1,value:e[0]},a=RY(n&&n.length===e.length?n:CY(e),t),s=MY(a,e,{ease:Array.isArray(i)?i:OY(e,i)});return{calculatedDuration:t,next:l=>(o.value=s(l),o.done=l>=t,o)}}const fR=2e4;function IY(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<fR;)e+=n,r=t.next(e);return e>=fR?1/0:e}const NY=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Gt.update(e,!0),stop:()=>ws(e),now:()=>or.isProcessing?or.timestamp:To.now()}},DY={decay:aR,inertia:aR,tween:Cv,keyframes:Cv,spring:FU},LY=t=>t/100;class MT extends kU{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:o}=this.options,a=(i==null?void 0:i.KeyframeResolver)||_T,s=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new a(o,s,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:a=0}=this.options,s=ET(n)?n:DY[n]||Cv;let l,c;s!==Cv&&typeof e[0]!="number"&&(l=la(LY,$U(e[0],e[1])),e=[0,100]);const u=s({...this.options,keyframes:e});o==="mirror"&&(c=s({...this.options,keyframes:[...e].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=IY(u));const{calculatedDuration:f}=u,h=f+i,d=h*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:h,totalDuration:d}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:A}=this.options;return{done:!0,value:A[A.length-1]}}const{finalKeyframe:i,generator:o,mirroredGenerator:a,mapPercentToKeyframes:s,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:f}=r;if(this.startTime===null)return o.next(0);const{delay:h,repeat:d,repeatType:v,repeatDelay:y,onUpdate:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const p=this.currentTime-h*(this.speed>=0?1:-1),x=this.speed>=0?p<0:p>u;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let _=this.currentTime,E=o;if(d){const A=Math.min(this.currentTime,u)/f;let T=Math.floor(A),P=A%1;!P&&A>=1&&(P=1),P===1&&T--,T=Math.min(T,d+1),!!(T%2)&&(v==="reverse"?(P=1-P,y&&(P-=y/f)):v==="mirror"&&(E=a)),_=Ss(0,1,P)*f}const b=x?{done:!1,value:l[0]}:E.next(_);s&&(b.value=s(b.value));let{done:M}=b;!x&&c!==null&&(M=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return S&&i!==void 0&&(b.value=w0(l,this.options,i)),g&&g(b.value),S&&this.finish(),b}get duration(){const{resolved:e}=this;return e?sa(e.calculatedDuration):0}get time(){return sa(this.currentTime)}set time(e){e=aa(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=sa(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=NY,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const kY=new Set(["opacity","clipPath","filter","transform"]),jY=10,UY=(t,e)=>{let n="";const r=Math.max(Math.round(e/jY),2);for(let i=0;i<r;i++)n+=t(Fu(0,r-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function PT(t){let e;return()=>(e===void 0&&(e=t()),e)}const FY={linearEasing:void 0};function VY(t,e){const n=PT(t);return()=>{var r;return(r=FY[e])!==null&&r!==void 0?r:n()}}const Rv=VY(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function zU(t){return!!(typeof t=="function"&&Rv()||!t||typeof t=="string"&&(t in J1||Rv())||TT(t)||Array.isArray(t)&&t.every(zU))}const Fh=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,J1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fh([0,.65,.55,1]),circOut:Fh([.55,0,1,.45]),backIn:Fh([.31,.01,.66,-.59]),backOut:Fh([.33,1.53,.69,.99])};function HU(t,e){if(t)return typeof t=="function"&&Rv()?UY(t,e):TT(t)?Fh(t):Array.isArray(t)?t.map(n=>HU(n,e)||J1.easeOut):J1[t]}function BY(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:a="loop",ease:s="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=HU(s,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function hR(t,e){t.timeline=e,t.onfinish=null}const $Y=PT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ov=10,zY=2e4;function HY(t){return ET(t.type)||t.type==="spring"||!zU(t.ease)}function GY(t,e){const n=new MT({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let o=0;for(;!r.done&&o<zY;)r=n.sample(o),i.push(r.value),o+=Ov;return{times:void 0,keyframes:i,duration:o-Ov,ease:"linear"}}const GU={anticipate:vU,backInOut:gU,circInOut:_U};function WY(t){return t in GU}class dR extends kU{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:o}=this.options;this.resolver=new LU(o,(a,s)=>this.onKeyframesResolved(a,s),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:o,ease:a,type:s,motionValue:l,name:c,startTime:u}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof a=="string"&&Rv()&&WY(a)&&(a=GU[a]),HY(this.options)){const{onComplete:h,onUpdate:d,motionValue:v,element:y,...g}=this.options,p=GY(e,g);e=p.keyframes,e.length===1&&(e[1]=e[0]),i=p.duration,o=p.times,a=p.ease,s="keyframes"}const f=BY(l.owner.current,c,e,{...this.options,duration:i,times:o,ease:a});return f.startTime=u??this.calcStartTime(),this.pendingTimeline?(hR(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:h}=this.options;l.set(w0(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:i,times:o,type:s,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return sa(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return sa(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=aa(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Mr;const{animation:r}=n;hR(r,e)}return Mr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:o,ease:a,times:s}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:f,element:h,...d}=this.options,v=new MT({...d,keyframes:r,duration:i,type:o,ease:a,times:s,isGenerator:!0}),y=aa(this.time);c.setWithVelocity(v.sample(y-Ov).value,v.sample(y).value,Ov)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:o,damping:a,type:s}=e;return $Y()&&r&&kY.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&o!=="mirror"&&a!==0&&s!=="inertia"}}const qY=PT(()=>window.ScrollTimeline!==void 0);class XY{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>qY()&&i.attachTimeline?i.attachTimeline(e):n(i));return()=>{r.forEach((i,o)=>{i&&i(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function KY({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:s,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const CT=(t,e,n,r={},i,o)=>a=>{const s=mT(r,t)||{},l=s.delay||r.delay||0;let{elapsed:c=0}=r;c=c-aa(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...s,delay:-c,onUpdate:h=>{e.set(h),s.onUpdate&&s.onUpdate(h)},onComplete:()=>{a(),s.onComplete&&s.onComplete()},name:t,motionValue:e,element:o?void 0:i};KY(s)||(u={...u,...dK(t,u)}),u.duration&&(u.duration=aa(u.duration)),u.repeatDelay&&(u.repeatDelay=aa(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(f=!0)),f&&!o&&e.get()!==void 0){const h=w0(u.keyframes,s);if(h!==void 0)return Gt.update(()=>{u.onUpdate(h),u.onComplete()}),new XY([])}return!o&&dR.supports(u)?new dR(u):new MT(u)},YY=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),QY=t=>G1(t)?t[t.length-1]||0:t;function RT(t,e){t.indexOf(e)===-1&&t.push(e)}function OT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class IT{constructor(){this.subscriptions=[]}add(e){return RT(this.subscriptions,e),()=>OT(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const a=this.subscriptions[o];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pR=30,ZY=t=>!isNaN(parseFloat(t));class JY{constructor(e,n={}){this.version="11.11.17",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const o=To.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=To.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ZY(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new IT);const r=this.events[e].add(n);return e==="change"?()=>{r(),Gt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=To.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>pR)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,pR);return jU(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $d(t,e){return new JY(t,e)}function eQ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,$d(n))}function tQ(t,e){const n=b0(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const a in o){const s=QY(o[a]);eQ(t,a,s)}}const NT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nQ="framerAppearId",WU="data-"+NT(nQ);function qU(t){return t.props[WU]}const Ar=t=>!!(t&&t.getVelocity);function rQ(t){return!!(Ar(t)&&t.add)}function ew(t,e){const n=t.getValue("willChange");if(rQ(n))return n.add(e)}function iQ({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function XU(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var o;let{transition:a=t.getDefaultTransition(),transitionEnd:s,...l}=e;r&&(a=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const h=t.getValue(f,(o=t.latestValues[f])!==null&&o!==void 0?o:null),d=l[f];if(d===void 0||u&&iQ(u,f))continue;const v={delay:n,...mT(a||{},f)};let y=!1;if(window.MotionHandoffAnimation){const p=qU(t);if(p){const x=window.MotionHandoffAnimation(p,f,Gt);x!==null&&(v.startTime=x,y=!0)}}ew(t,f),h.start(CT(f,h,d,t.shouldReduceMotion&&Yl.has(f)?{type:!1}:v,t,y));const g=h.animation;g&&c.push(g)}return s&&Promise.all(c).then(()=>{Gt.update(()=>{s&&tQ(t,s)})}),c}function tw(t,e,n={}){var r;const i=b0(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const a=i?()=>Promise.all(XU(t,i,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=o;return oQ(t,e,u+c,f,h,n)}:()=>Promise.resolve(),{when:l}=o;if(l){const[c,u]=l==="beforeChildren"?[a,s]:[s,a];return c().then(()=>u())}else return Promise.all([a(),s(n.delay)])}function oQ(t,e,n=0,r=0,i=1,o){const a=[],s=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>s-c*r;return Array.from(t.variantChildren).sort(aQ).forEach((c,u)=>{c.notify("AnimationStart",e),a.push(tw(c,e,{...o,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(a)}function aQ(t,e){return t.sortNodePosition(e)}function sQ(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>tw(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=tw(t,e,n);else{const i=typeof e=="function"?b0(t,e,n.custom):e;r=Promise.all(XU(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const lQ=pT.length;function KU(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?KU(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<lQ;n++){const r=pT[n],i=t.props[r];(Fd(i)||i===!1)&&(e[r]=i)}return e}const cQ=[...dT].reverse(),uQ=dT.length;function fQ(t){return e=>Promise.all(e.map(({animation:n,options:r})=>sQ(t,n,r)))}function hQ(t){let e=fQ(t),n=mR(),r=!0;const i=l=>(c,u)=>{var f;const h=b0(t,u,l==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(h){const{transition:d,transitionEnd:v,...y}=h;c={...c,...y,...v}}return c};function o(l){e=l(t)}function a(l){const{props:c}=t,u=KU(t.parent)||{},f=[],h=new Set;let d={},v=1/0;for(let g=0;g<uQ;g++){const p=cQ[g],x=n[p],_=c[p]!==void 0?c[p]:u[p],E=Fd(_),b=p===l?x.isActive:null;b===!1&&(v=g);let M=_===u[p]&&_!==c[p]&&E;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),x.protectedKeys={...d},!x.isActive&&b===null||!_&&!x.prevProp||x0(_)||typeof _=="boolean")continue;const S=dQ(x.prevProp,_);let A=S||p===l&&x.isActive&&!M&&E||g>v&&E,T=!1;const P=Array.isArray(_)?_:[_];let R=P.reduce(i(p),{});b===!1&&(R={});const{prevResolvedValues:N={}}=x,I={...N,...R},D=$=>{A=!0,h.has($)&&(T=!0,h.delete($)),x.needsAnimating[$]=!0;const V=t.getValue($);V&&(V.liveStyle=!1)};for(const $ in I){const V=R[$],X=N[$];if(d.hasOwnProperty($))continue;let K=!1;G1(V)&&G1(X)?K=!uU(V,X):K=V!==X,K?V!=null?D($):h.add($):V!==void 0&&h.has($)?D($):x.protectedKeys[$]=!0}x.prevProp=_,x.prevResolvedValues=R,x.isActive&&(d={...d,...R}),r&&t.blockInitialAnimation&&(A=!1),A&&(!(M&&S)||T)&&f.push(...P.map($=>({animation:$,options:{type:p}})))}if(h.size){const g={};h.forEach(p=>{const x=t.getBaseTarget(p),_=t.getValue(p);_&&(_.liveStyle=!0),g[p]=x??null}),f.push({animation:g})}let y=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(f):Promise.resolve()}function s(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(h=>{var d;return(d=h.animationState)===null||d===void 0?void 0:d.setActive(l,c)}),n[l].isActive=c;const f=a(l);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:a,setActive:s,setAnimateFunction:o,getState:()=>n,reset:()=>{n=mR(),r=!0}}}function dQ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!uU(e,t):!1}function Ks(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function mR(){return{animate:Ks(!0),whileInView:Ks(),whileHover:Ks(),whileTap:Ks(),whileDrag:Ks(),whileFocus:Ks(),exit:Ks()}}class Ds{constructor(e){this.isMounted=!1,this.node=e}update(){}}class pQ extends Ds{constructor(e){super(e),e.animationState||(e.animationState=hQ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();x0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let mQ=0;class gQ extends Ds{constructor(){super(...arguments),this.id=mQ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const vQ={animation:{Feature:pQ},exit:{Feature:gQ}},YU=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function S0(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const yQ=t=>e=>YU(e)&&t(e,S0(e));function ta(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ca(t,e,n,r){return ta(t,e,yQ(n),r)}const gR=(t,e)=>Math.abs(t-e);function _Q(t,e){const n=gR(t.x,e.x),r=gR(t.y,e.y);return Math.sqrt(n**2+r**2)}class QU{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=qx(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,d=_Q(f.offset,{x:0,y:0})>=3;if(!h&&!d)return;const{point:v}=f,{timestamp:y}=or;this.history.push({...v,timestamp:y});const{onStart:g,onMove:p}=this.handlers;h||(g&&g(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Wx(h,this.transformPagePoint),Gt.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:d,onSessionEnd:v,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=qx(f.type==="pointercancel"?this.lastMoveEventInfo:Wx(h,this.transformPagePoint),this.history);this.startEvent&&d&&d(f,g),v&&v(f,g)},!YU(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=S0(e),s=Wx(a,this.transformPagePoint),{point:l}=s,{timestamp:c}=or;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,qx(s,this.history)),this.removeListeners=la(ca(this.contextWindow,"pointermove",this.handlePointerMove),ca(this.contextWindow,"pointerup",this.handlePointerUp),ca(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ws(this.updatePoint)}}function Wx(t,e){return e?{point:e(t.point)}:t}function vR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function qx({point:t},e){return{point:t,delta:vR(t,ZU(e)),offset:vR(t,xQ(e)),velocity:bQ(e,.1)}}function xQ(t){return t[0]}function ZU(t){return t[t.length-1]}function bQ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=ZU(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>aa(e)));)n--;if(!r)return{x:0,y:0};const o=sa(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function JU(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const yR=JU("dragHorizontal"),_R=JU("dragVertical");function eF(t){let e=!1;if(t==="y")e=_R();else if(t==="x")e=yR();else{const n=yR(),r=_R();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function tF(){const t=eF(!0);return t?(t(),!1):!0}function ru(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const nF=1e-4,wQ=1-nF,SQ=1+nF,rF=.01,EQ=0-rF,TQ=0+rF;function pi(t){return t.max-t.min}function AQ(t,e,n){return Math.abs(t-e)<=n}function xR(t,e,n,r=.5){t.origin=r,t.originPoint=fn(e.min,e.max,t.origin),t.scale=pi(n)/pi(e),t.translate=fn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=wQ&&t.scale<=SQ||isNaN(t.scale))&&(t.scale=1),(t.translate>=EQ&&t.translate<=TQ||isNaN(t.translate))&&(t.translate=0)}function id(t,e,n,r){xR(t.x,e.x,n.x,r?r.originX:void 0),xR(t.y,e.y,n.y,r?r.originY:void 0)}function bR(t,e,n){t.min=n.min+e.min,t.max=t.min+pi(e)}function MQ(t,e,n){bR(t.x,e.x,n.x),bR(t.y,e.y,n.y)}function wR(t,e,n){t.min=e.min-n.min,t.max=t.min+pi(e)}function od(t,e,n){wR(t.x,e.x,n.x),wR(t.y,e.y,n.y)}function PQ(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?fn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?fn(n,t,r.max):Math.min(t,n)),t}function SR(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function CQ(t,{top:e,left:n,bottom:r,right:i}){return{x:SR(t.x,n,i),y:SR(t.y,e,r)}}function ER(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function RQ(t,e){return{x:ER(t.x,e.x),y:ER(t.y,e.y)}}function OQ(t,e){let n=.5;const r=pi(t),i=pi(e);return i>r?n=Fu(e.min,e.max-r,t.min):r>i&&(n=Fu(t.min,t.max-i,e.min)),Ss(0,1,n)}function IQ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const nw=.35;function NQ(t=nw){return t===!1?t=0:t===!0&&(t=nw),{x:TR(t,"left","right"),y:TR(t,"top","bottom")}}function TR(t,e,n){return{min:AR(t,e),max:AR(t,n)}}function AR(t,e){return typeof t=="number"?t:t[e]||0}const MR=()=>({translate:0,scale:1,origin:0,originPoint:0}),iu=()=>({x:MR(),y:MR()}),PR=()=>({min:0,max:0}),xn=()=>({x:PR(),y:PR()});function Ei(t){return[t("x"),t("y")]}function iF({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function DQ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function LQ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Xx(t){return t===void 0||t===1}function rw({scale:t,scaleX:e,scaleY:n}){return!Xx(t)||!Xx(e)||!Xx(n)}function nl(t){return rw(t)||oF(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function oF(t){return CR(t.x)||CR(t.y)}function CR(t){return t&&t!=="0%"}function Iv(t,e,n){const r=t-n,i=e*r;return n+i}function RR(t,e,n,r,i){return i!==void 0&&(t=Iv(t,i,r)),Iv(t,n,r)+e}function iw(t,e=0,n=1,r,i){t.min=RR(t.min,e,n,r,i),t.max=RR(t.max,e,n,r,i)}function aF(t,{x:e,y:n}){iw(t.x,e.translate,e.scale,e.originPoint),iw(t.y,n.translate,n.scale,n.originPoint)}const OR=.999999999999,IR=1.0000000000001;function kQ(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,a;for(let s=0;s<i;s++){o=n[s],a=o.projectionDelta;const{visualElement:l}=o.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&au(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,aF(t,a)),r&&nl(o.latestValues)&&au(t,o.latestValues))}e.x<IR&&e.x>OR&&(e.x=1),e.y<IR&&e.y>OR&&(e.y=1)}function ou(t,e){t.min=t.min+e,t.max=t.max+e}function NR(t,e,n,r,i=.5){const o=fn(t.min,t.max,i);iw(t,e,n,o,r)}function au(t,e){NR(t.x,e.x,e.scaleX,e.scale,e.originX),NR(t.y,e.y,e.scaleY,e.scale,e.originY)}function sF(t,e){return iF(LQ(t.getBoundingClientRect(),e))}function jQ(t,e,n){const r=sF(t,n),{scroll:i}=e;return i&&(ou(r.x,i.offset.x),ou(r.y,i.offset.y)),r}const lF=({current:t})=>t?t.ownerDocument.defaultView:null,UQ=new WeakMap;class FQ{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(S0(u,"page").point)},o=(u,f)=>{const{drag:h,dragPropagation:d,onDragStart:v}=this.getProps();if(h&&!d&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=eF(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ei(g=>{let p=this.getAxisMotionValue(g).get()||0;if(Eo.test(p)){const{projection:x}=this.visualElement;if(x&&x.layout){const _=x.layout.layoutBox[g];_&&(p=pi(_)*(parseFloat(p)/100))}}this.originPoint[g]=p}),v&&Gt.postRender(()=>v(u,f)),ew(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},a=(u,f)=>{const{dragPropagation:h,dragDirectionLock:d,onDirectionLock:v,onDrag:y}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:g}=f;if(d&&this.currentDirection===null){this.currentDirection=VQ(g),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,g),this.updateAxis("y",f.point,g),this.visualElement.render(),y&&y(u,f)},s=(u,f)=>this.stop(u,f),l=()=>Ei(u=>{var f;return this.getAnimationState(u)==="paused"&&((f=this.getAxisMotionValue(u).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new QU(e,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:s,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:lF(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Gt.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!sg(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=PQ(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&ru(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=CQ(i.layoutBox,n):this.constraints=!1,this.elastic=NQ(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ei(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=IQ(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ru(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=jQ(r,i.root,this.visualElement.getTransformPagePoint());let a=RQ(i.layout.layoutBox,o);if(n){const s=n(DQ(a));this.hasMutatedConstraints=!!s,s&&(a=iF(s))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:s}=this.getProps(),l=this.constraints||{},c=Ei(u=>{if(!sg(u,n,this.currentDirection))return;let f=l&&l[u]||{};a&&(f={min:0,max:0});const h=i?200:1e6,d=i?40:1e7,v={type:"inertia",velocity:r?e[u]:0,bounceStiffness:h,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(u,v)});return Promise.all(c).then(s)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return ew(this.visualElement,e),r.start(CT(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ei(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ei(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ei(n=>{const{drag:r}=this.getProps();if(!sg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:s}=i.layout.layoutBox[n];o.set(e[n]-fn(a,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ru(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ei(a=>{const s=this.getAxisMotionValue(a);if(s&&this.constraints!==!1){const l=s.get();i[a]=OQ({min:l,max:l},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ei(a=>{if(!sg(a,e,null))return;const s=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];s.set(fn(l,c,i[a]))})}addListeners(){if(!this.visualElement.current)return;UQ.set(this.visualElement,this);const e=this.visualElement.current,n=ca(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ru(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Gt.read(r);const a=ta(window,"resize",()=>this.scalePositionWithinConstraints()),s=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ei(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:a=nw,dragMomentum:s=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:a,dragMomentum:s}}}function sg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function VQ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class BQ extends Ds{constructor(e){super(e),this.removeGroupControls=Mr,this.removeListeners=Mr,this.controls=new FQ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mr}unmount(){this.removeGroupControls(),this.removeListeners()}}const DR=t=>(e,n)=>{t&&Gt.postRender(()=>t(e,n))};class $Q extends Ds{constructor(){super(...arguments),this.removePointerDownListener=Mr}onPointerDown(e){this.session=new QU(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:lF(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:DR(e),onStart:DR(n),onMove:r,onEnd:(o,a)=>{delete this.session,i&&Gt.postRender(()=>i(o,a))}}}mount(){this.removePointerDownListener=ca(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const E0=B.createContext(null);function zQ(){const t=B.useContext(E0);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=B.useId();B.useEffect(()=>r(i),[]);const o=B.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,o]:[!0]}const DT=B.createContext({}),cF=B.createContext({}),zg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function LR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const bh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(nt.test(t))t=parseFloat(t);else return t;const n=LR(t,e.target.x),r=LR(t,e.target.y);return`${n}% ${r}%`}},HQ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Es.parse(t);if(i.length>5)return r;const o=Es.createTransformer(t),a=typeof i[0]!="number"?1:0,s=n.x.scale*e.x,l=n.y.scale*e.y;i[0+a]/=s,i[1+a]/=l;const c=fn(s,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),o(i)}},Nv={};function GQ(t){Object.assign(Nv,t)}const{schedule:LT,cancel:XRe}=fU(queueMicrotask,!1);class WQ extends B.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;GQ(qQ),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),zg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,a=r.projection;return a&&(a.isPresent=o,i||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Gt.postRender(()=>{const s=a.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),LT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function uF(t){const[e,n]=zQ(),r=B.useContext(DT);return w.jsx(WQ,{...t,layoutGroup:r,switchLayoutGroup:B.useContext(cF),isPresent:e,safeToRemove:n})}const qQ={borderRadius:{...bh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:bh,borderTopRightRadius:bh,borderBottomLeftRadius:bh,borderBottomRightRadius:bh,boxShadow:HQ},fF=["TopLeft","TopRight","BottomLeft","BottomRight"],XQ=fF.length,kR=t=>typeof t=="string"?parseFloat(t):t,jR=t=>typeof t=="number"||nt.test(t);function KQ(t,e,n,r,i,o){i?(t.opacity=fn(0,n.opacity!==void 0?n.opacity:1,YQ(r)),t.opacityExit=fn(e.opacity!==void 0?e.opacity:1,0,QQ(r))):o&&(t.opacity=fn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<XQ;a++){const s=`border${fF[a]}Radius`;let l=UR(e,s),c=UR(n,s);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||jR(l)===jR(c)?(t[s]=Math.max(fn(kR(l),kR(c),r),0),(Eo.test(c)||Eo.test(l))&&(t[s]+="%")):t[s]=c}(e.rotate||n.rotate)&&(t.rotate=fn(e.rotate||0,n.rotate||0,r))}function UR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const YQ=hF(0,.5,yU),QQ=hF(.5,.95,Mr);function hF(t,e,n){return r=>r<t?0:r>e?1:n(Fu(t,e,r))}function FR(t,e){t.min=e.min,t.max=e.max}function xi(t,e){FR(t.x,e.x),FR(t.y,e.y)}function VR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function BR(t,e,n,r,i){return t-=e,t=Iv(t,1/n,r),i!==void 0&&(t=Iv(t,1/i,r)),t}function ZQ(t,e=0,n=1,r=.5,i,o=t,a=t){if(Eo.test(e)&&(e=parseFloat(e),e=fn(a.min,a.max,e/100)-a.min),typeof e!="number")return;let s=fn(o.min,o.max,r);t===o&&(s-=e),t.min=BR(t.min,e,n,s,i),t.max=BR(t.max,e,n,s,i)}function $R(t,e,[n,r,i],o,a){ZQ(t,e[n],e[r],e[i],e.scale,o,a)}const JQ=["x","scaleX","originX"],eZ=["y","scaleY","originY"];function zR(t,e,n,r){$R(t.x,e,JQ,n?n.x:void 0,r?r.x:void 0),$R(t.y,e,eZ,n?n.y:void 0,r?r.y:void 0)}function HR(t){return t.translate===0&&t.scale===1}function dF(t){return HR(t.x)&&HR(t.y)}function GR(t,e){return t.min===e.min&&t.max===e.max}function tZ(t,e){return GR(t.x,e.x)&&GR(t.y,e.y)}function WR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function pF(t,e){return WR(t.x,e.x)&&WR(t.y,e.y)}function qR(t){return pi(t.x)/pi(t.y)}function XR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class nZ{constructor(){this.members=[]}add(e){RT(this.members,e),e.scheduleRender()}remove(e){if(OT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function rZ(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||o||a)&&(r=`translate3d(${i}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:h,skewX:d,skewY:v}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),d&&(r+=`skewX(${d}deg) `),v&&(r+=`skewY(${v}deg) `)}const s=t.x.scale*e.x,l=t.y.scale*e.y;return(s!==1||l!==1)&&(r+=`scale(${s}, ${l})`),r||"none"}const iZ=(t,e)=>t.depth-e.depth;class oZ{constructor(){this.children=[],this.isDirty=!1}add(e){RT(this.children,e),this.isDirty=!0}remove(e){OT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(iZ),this.isDirty=!1,this.children.forEach(e)}}function Hg(t){const e=Ar(t)?t.get():t;return YY(e)?e.toValue():e}function aZ(t,e){const n=To.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(ws(r),t(o-e))};return Gt.read(r,!0),()=>ws(r)}function sZ(t){return t instanceof SVGElement&&t.tagName!=="svg"}function lZ(t,e,n){const r=Ar(t)?t:$d(t);return r.start(CT("",r,e,n)),r.animation}const rl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Vh=typeof window<"u"&&window.MotionDebug!==void 0,Kx=["","X","Y","Z"],cZ={visibility:"hidden"},KR=1e3;let uZ=0;function Yx(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function mF(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=qU(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Gt,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&mF(r)}function gF({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},s=e==null?void 0:e()){this.id=uZ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Vh&&(rl.totalNodes=rl.resolvedTargetDeltas=rl.recalculatedProjection=0),this.nodes.forEach(dZ),this.nodes.forEach(yZ),this.nodes.forEach(_Z),this.nodes.forEach(pZ),Vh&&window.MotionDebug.record(rl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new oZ)}addEventListener(a,s){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new IT),this.eventHandlers.get(a).add(s)}notifyListeners(a,...s){const l=this.eventHandlers.get(a);l&&l.notify(...s)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,s=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=sZ(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),s&&(c||l)&&(this.isLayoutDirty=!0),t){let f;const h=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=aZ(h,250),zg.hasAnimatedSinceResize&&(zg.hasAnimatedSinceResize=!1,this.nodes.forEach(QR))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:d,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||EZ,{onLayoutAnimationStart:g,onLayoutAnimationComplete:p}=u.getProps(),x=!this.targetLayout||!pF(this.targetLayout,v)||d,_=!h&&d;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,_);const E={...mT(y,"layout"),onPlay:g,onComplete:p};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else h||QR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ws(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xZ),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&mF(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:s,layout:l}=this.options;if(s===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(YR);return}this.isUpdating||this.nodes.forEach(gZ),this.isUpdating=!1,this.nodes.forEach(vZ),this.nodes.forEach(fZ),this.nodes.forEach(hZ),this.clearAllSnapshots();const s=To.now();or.delta=Ss(0,1e3/60,s-or.timestamp),or.timestamp=s,or.isProcessing=!0,Bx.update.process(or),Bx.preRender.process(or),Bx.render.process(or),or.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,LT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(mZ),this.sharedNodes.forEach(bZ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let s=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(s=!1),s){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,s=this.projectionDelta&&!dF(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;a&&(s||nl(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const s=this.measurePageBox();let l=this.removeElementScroll(s);return a&&(l=this.removeTransform(l)),TZ(l),{animationId:this.root.animationId,measuredBox:s,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:s}=this.options;if(!s)return xn();const l=s.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(AZ))){const{scroll:u}=this.root;u&&(ou(l.x,u.offset.x),ou(l.y,u.offset.y))}return l}removeElementScroll(a){var s;const l=xn();if(xi(l,a),!((s=this.scroll)===null||s===void 0)&&s.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:h}=u;u!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&xi(l,a),ou(l.x,f.offset.x),ou(l.y,f.offset.y))}return l}applyTransform(a,s=!1){const l=xn();xi(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];!s&&u.options.layoutScroll&&u.scroll&&u!==u.root&&au(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),nl(u.latestValues)&&au(l,u.latestValues)}return nl(this.latestValues)&&au(l,this.latestValues),l}removeTransform(a){const s=xn();xi(s,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!nl(c.latestValues))continue;rw(c.latestValues)&&c.updateSnapshot();const u=xn(),f=c.measurePageBox();xi(u,f),zR(s,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return nl(this.latestValues)&&zR(s,this.latestValues),s}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==or.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var s;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=or.timestamp,!this.targetDelta&&!this.relativeTarget){const d=this.getClosestProjectingParent();d&&d.layout&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xn(),this.relativeTargetOrigin=xn(),od(this.relativeTargetOrigin,this.layout.layoutBox,d.layout.layoutBox),xi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=xn(),this.targetWithTransforms=xn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),MQ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xi(this.target,this.layout.layoutBox),aF(this.target,this.targetDelta)):xi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const d=this.getClosestProjectingParent();d&&!!d.resumingFrom==!!this.resumingFrom&&!d.options.layoutScroll&&d.target&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xn(),this.relativeTargetOrigin=xn(),od(this.relativeTargetOrigin,this.target,d.target),xi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Vh&&rl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||rw(this.parent.latestValues)||oF(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const s=this.getLead(),l=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===or.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;xi(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,d=this.treeScale.y;kQ(this.layoutCorrected,this.treeScale,this.path,l),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=xn());const{target:v}=s;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(VR(this.prevProjectionDelta.x,this.projectionDelta.x),VR(this.prevProjectionDelta.y,this.projectionDelta.y)),id(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==d||!XR(this.projectionDelta.x,this.prevProjectionDelta.x)||!XR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Vh&&rl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var s;if((s=this.options.visualElement)===null||s===void 0||s.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=iu(),this.projectionDelta=iu(),this.projectionDeltaWithTransform=iu()}setAnimationOrigin(a,s=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=iu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const h=xn(),d=l?l.source:void 0,v=this.layout?this.layout.source:void 0,y=d!==v,g=this.getStack(),p=!g||g.members.length<=1,x=!!(y&&!p&&this.options.crossfade===!0&&!this.path.some(SZ));this.animationProgress=0;let _;this.mixTargetDelta=E=>{const b=E/1e3;ZR(f.x,a.x,b),ZR(f.y,a.y,b),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(od(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wZ(this.relativeTarget,this.relativeTargetOrigin,h,b),_&&tZ(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=xn()),xi(_,this.relativeTarget)),y&&(this.animationValues=u,KQ(u,c,this.latestValues,b,x,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=b},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ws(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gt.update(()=>{zg.hasAnimatedSinceResize=!0,this.currentAnimation=lZ(0,KR,{...a,onUpdate:s=>{this.mixTargetDelta(s),a.onUpdate&&a.onUpdate(s)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(KR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:s,target:l,layout:c,latestValues:u}=a;if(!(!s||!l||!c)){if(this!==a&&this.layout&&c&&vF(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||xn();const f=pi(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+f;const h=pi(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+h}xi(s,l),au(s,u),id(this.projectionDeltaWithTransform,this.layoutCorrected,s,u)}}registerSharedNode(a,s){this.sharedNodes.has(a)||this.sharedNodes.set(a,new nZ),this.sharedNodes.get(a).add(s);const c=s.options.initialPromotionConfig;s.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(s):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:s}=this.options;return s?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:s}=this.options;return s?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:s,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let s=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(s=!0),!s)return;const c={};l.z&&Yx("z",a,c,this.animationValues);for(let u=0;u<Kx.length;u++)Yx(`rotate${Kx[u]}`,a,c,this.animationValues),Yx(`skew${Kx[u]}`,a,c,this.animationValues);a.render();for(const u in c)a.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);a.scheduleRender()}getProjectionStyles(a){var s,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return cZ;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Hg(a==null?void 0:a.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Hg(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!nl(this.latestValues)&&(y.transform=u?u({},""):"none",this.hasProjected=!1),y}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=rZ(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x:d,y:v}=this.projectionDelta;c.transformOrigin=`${d.origin*100}% ${v.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(s=h.opacity)!==null&&s!==void 0?s:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const y in Nv){if(h[y]===void 0)continue;const{correct:g,applyTo:p}=Nv[y],x=c.transform==="none"?h[y]:g(h[y],f);if(p){const _=p.length;for(let E=0;E<_;E++)c[p[E]]=x}else c[y]=x}return this.options.layoutId&&(c.pointerEvents=f===this?Hg(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var s;return(s=a.currentAnimation)===null||s===void 0?void 0:s.stop()}),this.root.nodes.forEach(YR),this.root.sharedNodes.clear()}}}function fZ(t){t.updateLayout()}function hZ(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?Ei(f=>{const h=a?n.measuredBox[f]:n.layoutBox[f],d=pi(h);h.min=r[f].min,h.max=h.min+d}):vF(o,n.layoutBox,r)&&Ei(f=>{const h=a?n.measuredBox[f]:n.layoutBox[f],d=pi(r[f]);h.max=h.min+d,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+d)});const s=iu();id(s,r,n.layoutBox);const l=iu();a?id(l,t.applyTransform(i,!0),n.measuredBox):id(l,r,n.layoutBox);const c=!dF(s);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:d}=f;if(h&&d){const v=xn();od(v,n.layoutBox,h.layoutBox);const y=xn();od(y,r,d.layoutBox),pF(v,y)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=v,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:s,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function dZ(t){Vh&&rl.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function pZ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function mZ(t){t.clearSnapshot()}function YR(t){t.clearMeasurements()}function gZ(t){t.isLayoutDirty=!1}function vZ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function QR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function yZ(t){t.resolveTargetDelta()}function _Z(t){t.calcProjection()}function xZ(t){t.resetSkewAndRotation()}function bZ(t){t.removeLeadSnapshot()}function ZR(t,e,n){t.translate=fn(e.translate,0,n),t.scale=fn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function JR(t,e,n,r){t.min=fn(e.min,n.min,r),t.max=fn(e.max,n.max,r)}function wZ(t,e,n,r){JR(t.x,e.x,n.x,r),JR(t.y,e.y,n.y,r)}function SZ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const EZ={duration:.45,ease:[.4,0,.1,1]},eO=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),tO=eO("applewebkit/")&&!eO("chrome/")?Math.round:Mr;function nO(t){t.min=tO(t.min),t.max=tO(t.max)}function TZ(t){nO(t.x),nO(t.y)}function vF(t,e,n){return t==="position"||t==="preserve-aspect"&&!AQ(qR(e),qR(n),.2)}function AZ(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const MZ=gF({attachResizeListener:(t,e)=>ta(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Qx={current:void 0},yF=gF({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Qx.current){const t=new MZ({});t.mount(window),t.setOptions({layoutScroll:!0}),Qx.current=t}return Qx.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),PZ={pan:{Feature:$Q},drag:{Feature:BQ,ProjectionNode:yF,MeasureLayout:uF}};function rO(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(o,a)=>{if(o.pointerType==="touch"||tF())return;const s=t.getProps();t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",e);const l=s[r];l&&Gt.postRender(()=>l(o,a))};return ca(t.current,n,i,{passive:!t.getProps()[r]})}class CZ extends Ds{mount(){this.unmount=la(rO(this.node,!0),rO(this.node,!1))}unmount(){}}class RZ extends Ds{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=la(ta(this.node.current,"focus",()=>this.onFocus()),ta(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const _F=(t,e)=>e?t===e?!0:_F(t,e.parentElement):!1;function Zx(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,S0(n))}class OZ extends Ds{constructor(){super(...arguments),this.removeStartListeners=Mr,this.removeEndListeners=Mr,this.removeAccessibleListeners=Mr,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),o=ca(window,"pointerup",(s,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:f}=this.node.getProps(),h=!f&&!_F(this.node.current,s.target)?u:c;h&&Gt.update(()=>h(s,l))},{passive:!(r.onTap||r.onPointerUp)}),a=ca(window,"pointercancel",(s,l)=>this.cancelPress(s,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=la(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=s=>{s.key!=="Enter"||!this.checkPressEnd()||Zx("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&Gt.postRender(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=ta(this.node.current,"keyup",a),Zx("down",(s,l)=>{this.startPress(s,l)})},n=ta(this.node.current,"keydown",e),r=()=>{this.isPressing&&Zx("cancel",(o,a)=>this.cancelPress(o,a))},i=ta(this.node.current,"blur",r);this.removeAccessibleListeners=la(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Gt.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!tF()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Gt.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=ca(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=ta(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=la(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const ow=new WeakMap,Jx=new WeakMap,IZ=t=>{const e=ow.get(t.target);e&&e(t)},NZ=t=>{t.forEach(IZ)};function DZ({root:t,...e}){const n=t||document;Jx.has(n)||Jx.set(n,{});const r=Jx.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(NZ,{root:t,...e})),r[i]}function LZ(t,e,n){const r=DZ(e);return ow.set(t,n),r.observe(t),()=>{ow.delete(t),r.unobserve(t)}}const kZ={some:0,all:1};class jZ extends Ds{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:kZ[i]},s=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,o&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),h=c?u:f;h&&h(l)};return LZ(this.node.current,a,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(UZ(e,n))&&this.startObserver()}unmount(){}}function UZ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const FZ={inView:{Feature:jZ},tap:{Feature:OZ},focus:{Feature:RZ},hover:{Feature:CZ}},VZ={layout:{ProjectionNode:yF,MeasureLayout:uF}},kT=B.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),T0=B.createContext({}),jT=typeof window<"u",xF=jT?B.useLayoutEffect:B.useEffect,bF=B.createContext({strict:!1});function BZ(t,e,n,r,i){var o,a;const{visualElement:s}=B.useContext(T0),l=B.useContext(bF),c=B.useContext(E0),u=B.useContext(kT).reducedMotion,f=B.useRef();r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:s,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=f.current,d=B.useContext(cF);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&$Z(f.current,n,i,d);const v=B.useRef(!1);B.useInsertionEffect(()=>{h&&v.current&&h.update(n,c)});const y=n[WU],g=B.useRef(!!y&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,y))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,y)));return xF(()=>{h&&(v.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),LT.render(h.render),g.current&&h.animationState&&h.animationState.animateChanges())}),B.useEffect(()=>{h&&(!g.current&&h.animationState&&h.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var p;(p=window.MotionHandoffMarkAsComplete)===null||p===void 0||p.call(window,y)}),g.current=!1))}),h}function $Z(t,e,n,r){const{layoutId:i,layout:o,drag:a,dragConstraints:s,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:wF(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!a||s&&ru(s),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function wF(t){if(t)return t.options.allowProjection!==!1?t.projection:wF(t.parent)}function zZ(t,e,n){return B.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ru(n)&&(n.current=r))},[e])}function A0(t){return x0(t.animate)||pT.some(e=>Fd(t[e]))}function SF(t){return!!(A0(t)||t.variants)}function HZ(t,e){if(A0(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Fd(n)?n:void 0,animate:Fd(r)?r:void 0}}return t.inherit!==!1?e:{}}function GZ(t){const{initial:e,animate:n}=HZ(t,B.useContext(T0));return B.useMemo(()=>({initial:e,animate:n}),[iO(e),iO(n)])}function iO(t){return Array.isArray(t)?t.join(" "):t}const oO={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Vu={};for(const t in oO)Vu[t]={isEnabled:e=>oO[t].some(n=>!!e[n])};function WZ(t){for(const e in t)Vu[e]={...Vu[e],...t[e]}}const qZ=Symbol.for("motionComponentSymbol");function XZ({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&WZ(t);function o(s,l){let c;const u={...B.useContext(kT),...s,layoutId:KZ(s)},{isStatic:f}=u,h=GZ(s),d=r(s,f);if(!f&&jT){YZ();const v=QZ(u);c=v.MeasureLayout,h.visualElement=BZ(i,d,u,e,v.ProjectionNode)}return w.jsxs(T0.Provider,{value:h,children:[c&&h.visualElement?w.jsx(c,{visualElement:h.visualElement,...u}):null,n(i,s,zZ(d,h.visualElement,l),d,f,h.visualElement)]})}const a=B.forwardRef(o);return a[qZ]=i,a}function KZ({layoutId:t}){const e=B.useContext(DT).id;return e&&t!==void 0?e+"-"+t:t}function YZ(t,e){B.useContext(bF).strict}function QZ(t){const{drag:e,layout:n}=Vu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const ZZ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function UT(t){return typeof t!="string"||t.includes("-")?!1:!!(ZZ.indexOf(t)>-1||/[A-Z]/u.test(t))}function EF(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const TF=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function AF(t,e,n,r){EF(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(TF.has(i)?i:NT(i),e.attrs[i])}function MF(t,{layout:e,layoutId:n}){return Yl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Nv[t]||t==="opacity")}function FT(t,e,n){var r;const{style:i}=t,o={};for(const a in i)(Ar(i[a])||e.style&&Ar(e.style[a])||MF(a,t)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[a]=i[a]);return o}function PF(t,e,n){const r=FT(t,e,n);for(const i in t)if(Ar(t[i])||Ar(e[i])){const o=$p.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}function VT(t){const e=B.useRef(null);return e.current===null&&(e.current=t()),e.current}function JZ({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,o){const a={latestValues:eJ(r,i,o,t),renderState:e()};return n&&(a.mount=s=>n(r,s,a)),a}const CF=t=>(e,n)=>{const r=B.useContext(T0),i=B.useContext(E0),o=()=>JZ(t,e,r,i);return n?o():VT(o)};function eJ(t,e,n,r){const i={},o=r(t,{});for(const h in o)i[h]=Hg(o[h]);let{initial:a,animate:s}=t;const l=A0(t),c=SF(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),s===void 0&&(s=e.animate));let u=n?n.initial===!1:!1;u=u||a===!1;const f=u?s:a;if(f&&typeof f!="boolean"&&!x0(f)){const h=Array.isArray(f)?f:[f];for(let d=0;d<h.length;d++){const v=hT(t,h[d]);if(v){const{transitionEnd:y,transition:g,...p}=v;for(const x in p){let _=p[x];if(Array.isArray(_)){const E=u?_.length-1:0;_=_[E]}_!==null&&(i[x]=_)}for(const x in y)i[x]=y[x]}}}return i}const BT=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),RF=()=>({...BT(),attrs:{}}),OF=(t,e)=>e&&typeof t=="number"?e.transform(t):t,tJ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},nJ=$p.length;function rJ(t,e,n){let r="",i=!0;for(let o=0;o<nJ;o++){const a=$p[o],s=t[a];if(s===void 0)continue;let l=!0;if(typeof s=="number"?l=s===(a.startsWith("scale")?1:0):l=parseFloat(s)===0,!l||n){const c=OF(s,wT[a]);if(!l){i=!1;const u=tJ[a]||a;r+=`${u}(${c}) `}n&&(e[a]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function $T(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let a=!1,s=!1;for(const l in e){const c=e[l];if(Yl.has(l)){a=!0;continue}else if(SU(l)){i[l]=c;continue}else{const u=OF(c,wT[l]);l.startsWith("origin")?(s=!0,o[l]=u):r[l]=u}}if(e.transform||(a||n?r.transform=rJ(e,t.transform,n):r.transform&&(r.transform="none")),s){const{originX:l="50%",originY:c="50%",originZ:u=0}=o;r.transformOrigin=`${l} ${c} ${u}`}}function aO(t,e,n){return typeof t=="string"?t:nt.transform(e+n*t)}function iJ(t,e,n){const r=aO(e,t.x,t.width),i=aO(n,t.y,t.height);return`${r} ${i}`}const oJ={offset:"stroke-dashoffset",array:"stroke-dasharray"},aJ={offset:"strokeDashoffset",array:"strokeDasharray"};function sJ(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?oJ:aJ;t[o.offset]=nt.transform(-r);const a=nt.transform(e),s=nt.transform(n);t[o.array]=`${a} ${s}`}function zT(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:o,pathLength:a,pathSpacing:s=1,pathOffset:l=0,...c},u,f){if($T(t,c,f),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:d,dimensions:v}=t;h.transform&&(v&&(d.transform=h.transform),delete h.transform),v&&(i!==void 0||o!==void 0||d.transform)&&(d.transformOrigin=iJ(v,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),a!==void 0&&sJ(h,a,s,l,!1)}const HT=t=>typeof t=="string"&&t.toLowerCase()==="svg",lJ={useVisualState:CF({scrapeMotionValuesFromProps:PF,createRenderState:RF,onMount:(t,e,{renderState:n,latestValues:r})=>{Gt.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Gt.render(()=>{zT(n,r,HT(e.tagName),t.transformTemplate),AF(e,n)})}})},cJ={useVisualState:CF({scrapeMotionValuesFromProps:FT,createRenderState:BT})};function IF(t,e,n){for(const r in e)!Ar(e[r])&&!MF(r,n)&&(t[r]=e[r])}function uJ({transformTemplate:t},e){return B.useMemo(()=>{const n=BT();return $T(n,e,t),Object.assign({},n.vars,n.style)},[e])}function fJ(t,e){const n=t.style||{},r={};return IF(r,n,t),Object.assign(r,uJ(t,e)),r}function hJ(t,e){const n={},r=fJ(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const dJ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Dv(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||dJ.has(t)}let NF=t=>!Dv(t);function pJ(t){t&&(NF=e=>e.startsWith("on")?!Dv(e):t(e))}try{pJ(require("@emotion/is-prop-valid").default)}catch{}function mJ(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(NF(i)||n===!0&&Dv(i)||!e&&!Dv(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function gJ(t,e,n,r){const i=B.useMemo(()=>{const o=RF();return zT(o,e,HT(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};IF(o,t.style,t),i.style={...o,...i.style}}return i}function vJ(t=!1){return(n,r,i,{latestValues:o},a)=>{const l=(UT(n)?gJ:hJ)(r,o,a,n),c=mJ(r,typeof n=="string",t),u=n!==B.Fragment?{...c,...l,ref:i}:{},{children:f}=r,h=B.useMemo(()=>Ar(f)?f.get():f,[f]);return B.createElement(n,{...u,children:h})}}function yJ(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...UT(r)?lJ:cJ,preloadedFeatures:t,useRender:vJ(i),createVisualElement:e,Component:r};return XZ(a)}}const aw={current:null},DF={current:!1};function _J(){if(DF.current=!0,!!jT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>aw.current=t.matches;t.addListener(e),e()}else aw.current=!1}function xJ(t,e,n){for(const r in e){const i=e[r],o=n[r];if(Ar(i))t.addValue(r,i);else if(Ar(o))t.addValue(r,$d(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,$d(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const sO=new WeakMap,bJ=[...AU,_r,Es],wJ=t=>bJ.find(TU(t)),lO=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class SJ{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:a},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_T,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=To.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Gt.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.blockInitialAnimation=!!o,this.isControllingVariants=A0(n),this.isVariantNode=SF(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const d=f[h];l[h]!==void 0&&Ar(d)&&d.set(l[h],!1)}}mount(e){this.current=e,sO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),DF.current||_J(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:aw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){sO.delete(this.current),this.projection&&this.projection.unmount(),ws(this.notifyUpdate),ws(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Yl.has(e),i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&Gt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Vu){const n=Vu[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<lO.length;r++){const i=lO[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,a=e[o];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=xJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=$d(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(bU(i)||xU(i))?i=parseFloat(i):!wJ(i)&&Es.test(n)&&(i=DU(e,n)),this.setBaseTarget(e,Ar(i)?i.get():i)),Ar(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=hT(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Ar(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new IT),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class LF extends SJ{constructor(){super(...arguments),this.KeyframeResolver=LU}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function EJ(t){return window.getComputedStyle(t)}class TJ extends LF{constructor(){super(...arguments),this.type="html",this.renderInstance=EF}readValueFromInstance(e,n){if(Yl.has(n)){const r=ST(n);return r&&r.default||0}else{const r=EJ(e),i=(SU(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return sF(e,n)}build(e,n,r){$T(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return FT(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ar(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class AJ extends LF{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Yl.has(n)){const r=ST(n);return r&&r.default||0}return n=TF.has(n)?n:NT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return PF(e,n,r)}build(e,n,r){zT(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){AF(e,n,r,i)}mount(e){this.isSVGTag=HT(e.tagName),super.mount(e)}}const MJ=(t,e)=>UT(t)?new AJ(e):new TJ(e,{allowProjection:t!==B.Fragment}),PJ=yJ({...vQ,...FZ,...PZ,...VZ},MJ),It=lK(PJ);class CJ extends B.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function RJ({children:t,isPresent:e}){const n=B.useId(),r=B.useRef(null),i=B.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=B.useContext(kT);return B.useInsertionEffect(()=>{const{width:a,height:s,top:l,left:c}=i.current;if(e||!r.current||!a||!s)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return o&&(u.nonce=o),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${s}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),w.jsx(CJ,{isPresent:e,childRef:r,sizeRef:i,children:B.cloneElement(t,{ref:r})})}const OJ=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:a})=>{const s=VT(IJ),l=B.useId(),c=B.useCallback(f=>{s.set(f,!0);for(const h of s.values())if(!h)return;r&&r()},[s,r]),u=B.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:f=>(s.set(f,!1),()=>s.delete(f))}),o?[Math.random(),c]:[n,c]);return B.useMemo(()=>{s.forEach((f,h)=>s.set(h,!1))},[n]),B.useEffect(()=>{!n&&!s.size&&r&&r()},[n]),a==="popLayout"&&(t=w.jsx(RJ,{isPresent:n,children:t})),w.jsx(E0.Provider,{value:u,children:t})};function IJ(){return new Map}const lg=t=>t.key||"";function cO(t){const e=[];return B.Children.forEach(t,n=>{B.isValidElement(n)&&e.push(n)}),e}const Lv=({children:t,exitBeforeEnter:e,custom:n,initial:r=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const s=B.useMemo(()=>cO(t),[t]),l=s.map(lg),c=B.useRef(!0),u=B.useRef(s),f=VT(()=>new Map),[h,d]=B.useState(s),[v,y]=B.useState(s);xF(()=>{c.current=!1,u.current=s;for(let x=0;x<v.length;x++){const _=lg(v[x]);l.includes(_)?f.delete(_):f.get(_)!==!0&&f.set(_,!1)}},[v,l.length,l.join("-")]);const g=[];if(s!==h){let x=[...s];for(let _=0;_<v.length;_++){const E=v[_],b=lg(E);l.includes(b)||(x.splice(_,0,E),g.push(E))}a==="wait"&&g.length&&(x=g),y(cO(x)),d(s);return}const{forceRender:p}=B.useContext(DT);return w.jsx(w.Fragment,{children:v.map(x=>{const _=lg(x),E=s===v||l.includes(_),b=()=>{if(f.has(_))f.set(_,!0);else return;let M=!0;f.forEach(S=>{S||(M=!1)}),M&&(p==null||p(),y(u.current),i&&i())};return w.jsx(OJ,{isPresent:E,initial:!c.current||r?void 0:!1,custom:E?void 0:n,presenceAffectsLayout:o,mode:a,onExitComplete:E?void 0:b,children:x},_)})})};var NJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const DJ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LJ=(t,e)=>{const n=B.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,children:s,...l},c)=>B.createElement("svg",{ref:c,...NJ,width:i,height:i,stroke:r,strokeWidth:a?Number(o)*24/Number(i):o,className:`lucide lucide-${DJ(t)}`,...l},[...e.map(([u,f])=>B.createElement(u,f)),...(Array.isArray(s)?s:[s])||[]]));return n.displayName=`${t}`,n};var kt=LJ;const Bu=kt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Gp=kt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),kJ=kt("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),jJ=kt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),UJ=kt("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),FJ=kt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),ad=kt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),gl=kt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),eb=kt("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]),uO=kt("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),zd=kt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),VJ=kt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),BJ=kt("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]),$J=kt("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),zJ=kt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),HJ=kt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),GJ=kt("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),WJ=kt("Mouse",[["rect",{x:"5",y:"2",width:"14",height:"20",rx:"7",key:"11ol66"}],["path",{d:"M12 6v4",key:"16clxf"}]]),qJ=kt("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),kF=kt("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),XJ=kt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),KJ=kt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),sw=kt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),su=kt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),YJ=kt("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),QJ=kt("Touchpad",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"M2 14h20",key:"myj16y"}],["path",{d:"M12 20v-6",key:"1rm09r"}]]),jF=kt("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]),ZJ=kt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),lw=kt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),UF=kt("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]),Ma=kt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),JJ=({onPause:t,isPlaying:e})=>{const n=[{icon:WJ,text:"Arrastrar",color:"from-blue-500/30 to-cyan-500/30"},{icon:QJ,text:"Seleccionar",color:"from-purple-500/30 to-pink-500/30"},{icon:zJ,text:"Acercar",color:"from-green-500/30 to-emerald-500/30"},{icon:GJ,text:"Alejar",color:"from-orange-500/30 to-red-500/30"}];return w.jsx("div",{className:"fixed inset-x-0 bottom-22 flex justify-center items-center",children:w.jsx(It.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:260,damping:20},className:"w-auto",children:w.jsxs(It.div,{className:"bg-gradient-to-t from-black/95 via-black/90 to-black/80 backdrop-blur-lg rounded-2xl p-3 shadow-lg border border-white/10 relative overflow-hidden min-w-[240px]",whileHover:{scale:1.02},transition:{type:"spring",stiffness:400,damping:30},children:[w.jsx("div",{className:"absolute -top-4 -left-4 w-24 h-24 bg-blue-500/10 rounded-full blur-2xl"}),w.jsx("div",{className:"absolute -bottom-4 -right-4 w-24 h-24 bg-purple-500/10 rounded-full blur-2xl"}),w.jsx("div",{className:"flex justify-center mb-3",children:w.jsxs(It.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(),className:"p-2 rounded-full bg-gradient-to-br from-white to-gray-200 hover:from-gray-100 hover:to-gray-300 transition-all text-black shadow-lg relative group",title:e?"Pausar":"Reproducir",children:[w.jsx("div",{className:"absolute inset-0 rounded-full bg-white/30 blur-md group-hover:blur-lg transition-all"}),w.jsx(It.div,{className:"relative",animate:{rotate:e?0:360},transition:{duration:.5},children:e?w.jsx(qJ,{size:15}):w.jsx(XJ,{size:15})})]})}),w.jsx("div",{className:"grid grid-cols-4 gap-2 px-2",children:w.jsx(Lv,{children:n.map((r,i)=>w.jsxs(It.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{delay:i*.1,type:"spring",stiffness:200,damping:20},className:"flex flex-col items-center gap-1 group bg-black/20 rounded-lg p-1.5 hover:bg-black/30 transition-colors",whileHover:{scale:1.02},children:[w.jsx(It.div,{className:`p-1.5 rounded-md bg-gradient-to-br ${r.color} group-hover:shadow-sm transition-all duration-300 flex-shrink-0`,whileHover:{rotate:[0,-10,10,0]},transition:{duration:.5},children:w.jsx(r.icon,{size:10,className:"text-white"})}),w.jsx("span",{className:"text-xs text-white/90 font-medium text-center",children:r.text})]},r.text))})})]})})})},eee="/EmissionsPage/assets/logo-uni-C7alZO-b.png",tee=({isMobile:t})=>w.jsxs("div",{className:`
      fixed top-0 w-full z-50 
      ${t?"px-4 py-2":"px-8 py-4"}
      bg-gradient-to-b from-black/80 to-transparent
      backdrop-blur-sm
    `,children:[w.jsxs("div",{className:`
        max-w-7xl mx-auto
        flex ${t?"flex-col":"flex-row"} 
        items-center gap-4
      `,children:[w.jsxs("div",{className:`
          flex-grow text-center
          flex flex-col gap-2
          ${t?"order-2":"order-1"}
        `,children:[w.jsx("h1",{className:`
            font-['Exo_2'] font-thin tracking-widest text-white
            ${t?"text-lg":"text-2xl md:text-3xl"}
            transition-all duration-300
            relative
          `,children:w.jsxs("span",{className:"relative",children:[w.jsx("span",{className:"absolute -inset-1 blur-sm bg-blue-500/20 rounded-lg"}),w.jsx("span",{className:"relative",children:"EMISIONES DE CARBONO GLOBALES"})]})}),w.jsxs("p",{className:`
            font-['Exo_2'] tracking-wider text-zinc-400
            ${t?"text-xs px-4":"text-sm md:text-base"}
            line-clamp-2 sm:line-clamp-none
          `,children:["Modelado Predictivo de Emisiones de Carbono:",w.jsxs("span",{className:"hidden sm:inline",children:[" ","Enfoque Comparativo entre Sectores Empresariales y Pblicos"]})]})]}),w.jsx("div",{className:`
          flex-shrink-0
          ${t?"order-1 -mb-2":"order-2 ml-4"}
        `,children:w.jsx("img",{src:eee,alt:"Logo Universidad",className:`
              object-contain brightness-150
              transition-all duration-300
              ${t?"h-16":"h-20 md:h-24"}
              hover:scale-105 hover:brightness-200
            `})})]}),w.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-blue-500/50 to-transparent"})]}),nee=({isMobile:t})=>{const[e,n]=B.useState(!1),r=["Luis Angel Cordova Gil","Jose Lopez Mercado","Raul Romo Alonso"];return w.jsxs(w.Fragment,{children:[w.jsxs(It.button,{onClick:()=>n(!e),className:`
          fixed z-50 bottom-4 right-4 md:bottom-8 md:right-8
          flex items-center gap-2 px-4 py-3
          bg-gradient-to-r from-indigo-500/90 to-purple-600/90
          hover:from-indigo-500 hover:to-purple-600
          rounded-xl shadow-lg backdrop-blur-sm
          border border-white/10 transition-all duration-300
          text-white group
        `,whileHover:{scale:1.05},whileTap:{scale:.95},children:[w.jsx(lw,{className:"w-6 h-6"}),w.jsx("span",{className:"text-sm font-medium",children:"Equipo 25-1"}),w.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),w.jsxs("div",{className:"absolute -top-1 -right-1 w-3 h-3",children:[w.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-purple-400 opacity-75 animate-ping"}),w.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-purple-500"})]})]}),w.jsx(Lv,{children:e&&w.jsxs(It.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:`
              fixed z-40 
              ${t?"bottom-20 right-4 left-4":"bottom-24 right-8 max-w-sm"}
              bg-gradient-to-br from-zinc-900/95 to-black/95 
              backdrop-blur-md rounded-2xl p-4 sm:p-6
              shadow-2xl border border-zinc-800/50
              transition-all duration-300 ease-in-out
            `,children:[w.jsx("div",{className:"absolute -top-3 -left-3 w-16 h-16 bg-blue-500 rounded-2xl -z-10 blur-2xl opacity-20"}),w.jsx("div",{className:"absolute -bottom-3 -right-3 w-16 h-16 bg-purple-500 rounded-2xl -z-10 blur-2xl opacity-20"}),w.jsxs("div",{className:"flex items-center justify-between mb-4",children:[w.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[w.jsx(lw,{className:`${t?"w-5 h-5":"w-6 h-6"} text-blue-400`}),w.jsx("h2",{className:`
                  font-['Exo'] font-thin tracking-widest text-white
                  ${t?"text-xl":"text-2xl sm:text-3xl"}
                `,children:"Equipo 25-1-0015"})]}),w.jsx("button",{onClick:()=>n(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors duration-200",children:w.jsx(Ma,{className:"w-5 h-5 text-zinc-400"})})]}),w.jsx("ul",{className:`space-y-2 ${t?"text-sm":"text-base"}`,children:r.map((i,o)=>w.jsxs(It.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.1},className:`
                    p-2 sm:p-3 
                    hover:bg-white/5 rounded-xl 
                    transition-all duration-300 
                    font-['Exo'] text-zinc-300 tracking-wider 
                    cursor-pointer group relative overflow-hidden
                  `,children:[w.jsx("div",{className:`\r
                    absolute inset-0 \r
                    bg-gradient-to-r from-blue-500/10 to-purple-500/10 \r
                    translate-x-[-100%] group-hover:translate-x-0 \r
                    transition-transform duration-300\r
                  `}),w.jsx("span",{className:"relative",children:i})]},i))})]})})]})};function FF(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=FF(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function _t(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=FF(t))&&(r&&(r+=" "),r+=e);return r}var ree=Array.isArray,Zr=ree,iee=typeof gm=="object"&&gm&&gm.Object===Object&&gm,VF=iee,oee=VF,aee=typeof self=="object"&&self&&self.Object===Object&&self,see=oee||aee||Function("return this")(),ko=see,lee=ko,cee=lee.Symbol,Wp=cee,fO=Wp,BF=Object.prototype,uee=BF.hasOwnProperty,fee=BF.toString,wh=fO?fO.toStringTag:void 0;function hee(t){var e=uee.call(t,wh),n=t[wh];try{t[wh]=void 0;var r=!0}catch{}var i=fee.call(t);return r&&(e?t[wh]=n:delete t[wh]),i}var dee=hee,pee=Object.prototype,mee=pee.toString;function gee(t){return mee.call(t)}var vee=gee,hO=Wp,yee=dee,_ee=vee,xee="[object Null]",bee="[object Undefined]",dO=hO?hO.toStringTag:void 0;function wee(t){return t==null?t===void 0?bee:xee:dO&&dO in Object(t)?yee(t):_ee(t)}var Pa=wee;function See(t){return t!=null&&typeof t=="object"}var Ca=See,Eee=Pa,Tee=Ca,Aee="[object Symbol]";function Mee(t){return typeof t=="symbol"||Tee(t)&&Eee(t)==Aee}var Of=Mee,Pee=Zr,Cee=Of,Ree=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oee=/^\w*$/;function Iee(t,e){if(Pee(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Cee(t)?!0:Oee.test(t)||!Ree.test(t)||e!=null&&t in Object(e)}var GT=Iee;function Nee(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ls=Nee;const If=Ft(Ls);var Dee=Pa,Lee=Ls,kee="[object AsyncFunction]",jee="[object Function]",Uee="[object GeneratorFunction]",Fee="[object Proxy]";function Vee(t){if(!Lee(t))return!1;var e=Dee(t);return e==jee||e==Uee||e==kee||e==Fee}var WT=Vee;const ot=Ft(WT);var Bee=ko,$ee=Bee["__core-js_shared__"],zee=$ee,tb=zee,pO=function(){var t=/[^.]+$/.exec(tb&&tb.keys&&tb.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Hee(t){return!!pO&&pO in t}var Gee=Hee,Wee=Function.prototype,qee=Wee.toString;function Xee(t){if(t!=null){try{return qee.call(t)}catch{}try{return t+""}catch{}}return""}var $F=Xee,Kee=WT,Yee=Gee,Qee=Ls,Zee=$F,Jee=/[\\^$.*+?()[\]{}|]/g,ete=/^\[object .+?Constructor\]$/,tte=Function.prototype,nte=Object.prototype,rte=tte.toString,ite=nte.hasOwnProperty,ote=RegExp("^"+rte.call(ite).replace(Jee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ate(t){if(!Qee(t)||Yee(t))return!1;var e=Kee(t)?ote:ete;return e.test(Zee(t))}var ste=ate;function lte(t,e){return t==null?void 0:t[e]}var cte=lte,ute=ste,fte=cte;function hte(t,e){var n=fte(t,e);return ute(n)?n:void 0}var Ql=hte,dte=Ql,pte=dte(Object,"create"),M0=pte,mO=M0;function mte(){this.__data__=mO?mO(null):{},this.size=0}var gte=mte;function vte(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var yte=vte,_te=M0,xte="__lodash_hash_undefined__",bte=Object.prototype,wte=bte.hasOwnProperty;function Ste(t){var e=this.__data__;if(_te){var n=e[t];return n===xte?void 0:n}return wte.call(e,t)?e[t]:void 0}var Ete=Ste,Tte=M0,Ate=Object.prototype,Mte=Ate.hasOwnProperty;function Pte(t){var e=this.__data__;return Tte?e[t]!==void 0:Mte.call(e,t)}var Cte=Pte,Rte=M0,Ote="__lodash_hash_undefined__";function Ite(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Rte&&e===void 0?Ote:e,this}var Nte=Ite,Dte=gte,Lte=yte,kte=Ete,jte=Cte,Ute=Nte;function Nf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Nf.prototype.clear=Dte;Nf.prototype.delete=Lte;Nf.prototype.get=kte;Nf.prototype.has=jte;Nf.prototype.set=Ute;var Fte=Nf;function Vte(){this.__data__=[],this.size=0}var Bte=Vte;function $te(t,e){return t===e||t!==t&&e!==e}var qT=$te,zte=qT;function Hte(t,e){for(var n=t.length;n--;)if(zte(t[n][0],e))return n;return-1}var P0=Hte,Gte=P0,Wte=Array.prototype,qte=Wte.splice;function Xte(t){var e=this.__data__,n=Gte(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():qte.call(e,n,1),--this.size,!0}var Kte=Xte,Yte=P0;function Qte(t){var e=this.__data__,n=Yte(e,t);return n<0?void 0:e[n][1]}var Zte=Qte,Jte=P0;function ene(t){return Jte(this.__data__,t)>-1}var tne=ene,nne=P0;function rne(t,e){var n=this.__data__,r=nne(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var ine=rne,one=Bte,ane=Kte,sne=Zte,lne=tne,cne=ine;function Df(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Df.prototype.clear=one;Df.prototype.delete=ane;Df.prototype.get=sne;Df.prototype.has=lne;Df.prototype.set=cne;var C0=Df,une=Ql,fne=ko,hne=une(fne,"Map"),XT=hne,gO=Fte,dne=C0,pne=XT;function mne(){this.size=0,this.__data__={hash:new gO,map:new(pne||dne),string:new gO}}var gne=mne;function vne(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var yne=vne,_ne=yne;function xne(t,e){var n=t.__data__;return _ne(e)?n[typeof e=="string"?"string":"hash"]:n.map}var R0=xne,bne=R0;function wne(t){var e=bne(this,t).delete(t);return this.size-=e?1:0,e}var Sne=wne,Ene=R0;function Tne(t){return Ene(this,t).get(t)}var Ane=Tne,Mne=R0;function Pne(t){return Mne(this,t).has(t)}var Cne=Pne,Rne=R0;function One(t,e){var n=Rne(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Ine=One,Nne=gne,Dne=Sne,Lne=Ane,kne=Cne,jne=Ine;function Lf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Lf.prototype.clear=Nne;Lf.prototype.delete=Dne;Lf.prototype.get=Lne;Lf.prototype.has=kne;Lf.prototype.set=jne;var KT=Lf,zF=KT,Une="Expected a function";function YT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Une);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(YT.Cache||zF),n}YT.Cache=zF;var HF=YT;const Fne=Ft(HF);var Vne=HF,Bne=500;function $ne(t){var e=Vne(t,function(r){return n.size===Bne&&n.clear(),r}),n=e.cache;return e}var zne=$ne,Hne=zne,Gne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wne=/\\(\\)?/g,qne=Hne(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Gne,function(n,r,i,o){e.push(i?o.replace(Wne,"$1"):r||n)}),e}),Xne=qne;function Kne(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var QT=Kne,vO=Wp,Yne=QT,Qne=Zr,Zne=Of,Jne=1/0,yO=vO?vO.prototype:void 0,_O=yO?yO.toString:void 0;function GF(t){if(typeof t=="string")return t;if(Qne(t))return Yne(t,GF)+"";if(Zne(t))return _O?_O.call(t):"";var e=t+"";return e=="0"&&1/t==-Jne?"-0":e}var ere=GF,tre=ere;function nre(t){return t==null?"":tre(t)}var WF=nre,rre=Zr,ire=GT,ore=Xne,are=WF;function sre(t,e){return rre(t)?t:ire(t,e)?[t]:ore(are(t))}var qF=sre,lre=Of,cre=1/0;function ure(t){if(typeof t=="string"||lre(t))return t;var e=t+"";return e=="0"&&1/t==-cre?"-0":e}var O0=ure,fre=qF,hre=O0;function dre(t,e){e=fre(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[hre(e[n++])];return n&&n==r?t:void 0}var ZT=dre,pre=ZT;function mre(t,e,n){var r=t==null?void 0:pre(t,e);return r===void 0?n:r}var XF=mre;const fi=Ft(XF);function gre(t){return t==null}var vre=gre;const ft=Ft(vre);var yre=Pa,_re=Zr,xre=Ca,bre="[object String]";function wre(t){return typeof t=="string"||!_re(t)&&xre(t)&&yre(t)==bre}var Sre=wre;const qp=Ft(Sre);var KF={exports:{}},$t={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT=Symbol.for("react.element"),eA=Symbol.for("react.portal"),I0=Symbol.for("react.fragment"),N0=Symbol.for("react.strict_mode"),D0=Symbol.for("react.profiler"),L0=Symbol.for("react.provider"),k0=Symbol.for("react.context"),Ere=Symbol.for("react.server_context"),j0=Symbol.for("react.forward_ref"),U0=Symbol.for("react.suspense"),F0=Symbol.for("react.suspense_list"),V0=Symbol.for("react.memo"),B0=Symbol.for("react.lazy"),Tre=Symbol.for("react.offscreen"),YF;YF=Symbol.for("react.module.reference");function Fi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case JT:switch(t=t.type,t){case I0:case D0:case N0:case U0:case F0:return t;default:switch(t=t&&t.$$typeof,t){case Ere:case k0:case j0:case B0:case V0:case L0:return t;default:return e}}case eA:return e}}}$t.ContextConsumer=k0;$t.ContextProvider=L0;$t.Element=JT;$t.ForwardRef=j0;$t.Fragment=I0;$t.Lazy=B0;$t.Memo=V0;$t.Portal=eA;$t.Profiler=D0;$t.StrictMode=N0;$t.Suspense=U0;$t.SuspenseList=F0;$t.isAsyncMode=function(){return!1};$t.isConcurrentMode=function(){return!1};$t.isContextConsumer=function(t){return Fi(t)===k0};$t.isContextProvider=function(t){return Fi(t)===L0};$t.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===JT};$t.isForwardRef=function(t){return Fi(t)===j0};$t.isFragment=function(t){return Fi(t)===I0};$t.isLazy=function(t){return Fi(t)===B0};$t.isMemo=function(t){return Fi(t)===V0};$t.isPortal=function(t){return Fi(t)===eA};$t.isProfiler=function(t){return Fi(t)===D0};$t.isStrictMode=function(t){return Fi(t)===N0};$t.isSuspense=function(t){return Fi(t)===U0};$t.isSuspenseList=function(t){return Fi(t)===F0};$t.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===I0||t===D0||t===N0||t===U0||t===F0||t===Tre||typeof t=="object"&&t!==null&&(t.$$typeof===B0||t.$$typeof===V0||t.$$typeof===L0||t.$$typeof===k0||t.$$typeof===j0||t.$$typeof===YF||t.getModuleId!==void 0)};$t.typeOf=Fi;KF.exports=$t;var Are=KF.exports,Mre=Pa,Pre=Ca,Cre="[object Number]";function Rre(t){return typeof t=="number"||Pre(t)&&Mre(t)==Cre}var QF=Rre;const Ore=Ft(QF);var Ire=QF;function Nre(t){return Ire(t)&&t!=+t}var Dre=Nre;const kf=Ft(Dre);var kr=function(e){return e===0?0:e>0?1:-1},vl=function(e){return qp(e)&&e.indexOf("%")===e.length-1},Ae=function(e){return Ore(e)&&!kf(e)},Vn=function(e){return Ae(e)||qp(e)},Lre=0,Zl=function(e){var n=++Lre;return"".concat(e||"").concat(n)},jr=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ae(e)&&!qp(e))return r;var o;if(vl(e)){var a=e.indexOf("%");o=n*parseFloat(e.slice(0,a))/100}else o=+e;return kf(o)&&(o=r),i&&o>n&&(o=n),o},Ka=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},kre=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Un=function(e,n){return Ae(e)&&Ae(n)?function(r){return e+r*(n-e)}:function(){return n}};function kv(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):fi(r,e))===n})}function wu(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function cw(t){"@babel/helpers - typeof";return cw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cw(t)}var jre=["viewBox","children"],Ure=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],xO=["points","pathLength"],nb={svg:jre,polygon:xO,polyline:xO},tA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],jv=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(B.isValidElement(e)&&(r=e.props),!If(r))return null;var i={};return Object.keys(r).forEach(function(o){tA.includes(o)&&(i[o]=n||function(a){return r[o](r,a)})}),i},Fre=function(e,n,r){return function(i){return e(n,r,i),null}},Vl=function(e,n,r){if(!If(e)||cw(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var a=e[o];tA.includes(o)&&typeof a=="function"&&(i||(i={}),i[o]=Fre(a,n,r))}),i},Vre=["children"],Bre=["children"];function bO(t,e){if(t==null)return{};var n=$re(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $re(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function uw(t){"@babel/helpers - typeof";return uw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uw(t)}var wO={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},ua=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},SO=null,rb=null,nA=function t(e){if(e===SO&&Array.isArray(rb))return rb;var n=[];return B.Children.forEach(e,function(r){ft(r)||(Are.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),rb=n,SO=e,n};function hi(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return ua(i)}):r=[ua(e)],nA(t).forEach(function(i){var o=fi(i,"type.displayName")||fi(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}function ai(t,e){var n=hi(t,e);return n&&n[0]}var EO=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Ae(r)||r<=0||!Ae(i)||i<=0)},zre=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Hre=function(e){return e&&e.type&&qp(e.type)&&zre.indexOf(e.type)>=0},ZF=function(e){return e&&uw(e)==="object"&&"clipDot"in e},Gre=function(e,n,r,i){var o,a=(o=nb==null?void 0:nb[i])!==null&&o!==void 0?o:[];return!ot(e)&&(i&&a.includes(n)||Ure.includes(n))||r&&tA.includes(n)},Ke=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(B.isValidElement(e)&&(i=e.props),!If(i))return null;var o={};return Object.keys(i).forEach(function(a){var s;Gre((s=i)===null||s===void 0?void 0:s[a],a,n,r)&&(o[a]=i[a])}),o},fw=function t(e,n){if(e===n)return!0;var r=B.Children.count(e);if(r!==B.Children.count(n))return!1;if(r===0)return!0;if(r===1)return TO(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=e[i],a=n[i];if(Array.isArray(o)||Array.isArray(a)){if(!t(o,a))return!1}else if(!TO(o,a))return!1}return!0},TO=function(e,n){if(ft(e)&&ft(n))return!0;if(!ft(e)&&!ft(n)){var r=e.props||{},i=r.children,o=bO(r,Vre),a=n.props||{},s=a.children,l=bO(a,Bre);return i&&s?wu(o,l)&&fw(i,s):!i&&!s?wu(o,l):!1}return!1},AO=function(e,n){var r=[],i={};return nA(e).forEach(function(o,a){if(Hre(o))r.push(o);else if(o){var s=ua(o.type),l=n[s]||{},c=l.handler,u=l.once;if(c&&(!u||!i[s])){var f=c(o,s,a);r.push(f),i[s]=!0}}}),r},Wre=function(e){var n=e&&e.type;return n&&wO[n]?wO[n]:null},qre=function(e,n){return nA(n).indexOf(e)},Xre=["children","width","height","viewBox","className","style","title","desc"];function hw(){return hw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hw.apply(this,arguments)}function Kre(t,e){if(t==null)return{};var n=Yre(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Yre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function dw(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,o=t.className,a=t.style,s=t.title,l=t.desc,c=Kre(t,Xre),u=i||{width:n,height:r,x:0,y:0},f=_t("recharts-surface",o);return G.createElement("svg",hw({},Ke(c,!0,"svg"),{className:f,width:n,height:r,style:a,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),G.createElement("title",null,s),G.createElement("desc",null,l),e)}var Qre=["children","className"];function pw(){return pw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pw.apply(this,arguments)}function Zre(t,e){if(t==null)return{};var n=Jre(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var St=G.forwardRef(function(t,e){var n=t.children,r=t.className,i=Zre(t,Qre),o=_t("recharts-layer",r);return G.createElement("g",pw({className:o},Ke(i,!0),{ref:e}),n)}),oo=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function eie(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var tie=eie,nie=tie;function rie(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:nie(t,e,n)}var iie=rie,oie="\\ud800-\\udfff",aie="\\u0300-\\u036f",sie="\\ufe20-\\ufe2f",lie="\\u20d0-\\u20ff",cie=aie+sie+lie,uie="\\ufe0e\\ufe0f",fie="\\u200d",hie=RegExp("["+fie+oie+cie+uie+"]");function die(t){return hie.test(t)}var JF=die;function pie(t){return t.split("")}var mie=pie,e4="\\ud800-\\udfff",gie="\\u0300-\\u036f",vie="\\ufe20-\\ufe2f",yie="\\u20d0-\\u20ff",_ie=gie+vie+yie,xie="\\ufe0e\\ufe0f",bie="["+e4+"]",mw="["+_ie+"]",gw="\\ud83c[\\udffb-\\udfff]",wie="(?:"+mw+"|"+gw+")",t4="[^"+e4+"]",n4="(?:\\ud83c[\\udde6-\\uddff]){2}",r4="[\\ud800-\\udbff][\\udc00-\\udfff]",Sie="\\u200d",i4=wie+"?",o4="["+xie+"]?",Eie="(?:"+Sie+"(?:"+[t4,n4,r4].join("|")+")"+o4+i4+")*",Tie=o4+i4+Eie,Aie="(?:"+[t4+mw+"?",mw,n4,r4,bie].join("|")+")",Mie=RegExp(gw+"(?="+gw+")|"+Aie+Tie,"g");function Pie(t){return t.match(Mie)||[]}var Cie=Pie,Rie=mie,Oie=JF,Iie=Cie;function Nie(t){return Oie(t)?Iie(t):Rie(t)}var Die=Nie,Lie=iie,kie=JF,jie=Die,Uie=WF;function Fie(t){return function(e){e=Uie(e);var n=kie(e)?jie(e):void 0,r=n?n[0]:e.charAt(0),i=n?Lie(n,1).join(""):e.slice(1);return r[t]()+i}}var Vie=Fie,Bie=Vie,$ie=Bie("toUpperCase"),zie=$ie;const $0=Ft(zie);function Kt(t){return function(){return t}}const a4=Math.cos,Uv=Math.sin,fo=Math.sqrt,Fv=Math.PI,z0=2*Fv,vw=Math.PI,yw=2*vw,il=1e-6,Hie=yw-il;function s4(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Gie(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return s4;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Wie{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?s4:Gie(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=r-e,c=i-n,u=a-e,f=s-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>il)if(!(Math.abs(f*l-c*u)>il)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-a,v=i-s,y=l*l+c*c,g=d*d+v*v,p=Math.sqrt(y),x=Math.sqrt(h),_=o*Math.tan((vw-Math.acos((y+h-g)/(2*p*x)))/2),E=_/x,b=_/p;Math.abs(E-1)>il&&this._append`L${e+E*u},${n+E*f}`,this._append`A${o},${o},0,0,${+(f*d>u*v)},${this._x1=e+b*l},${this._y1=n+b*c}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),c=e+s,u=n+l,f=1^a,h=a?i-o:o-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>il||Math.abs(this._y1-u)>il)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%yw+yw),h>Hie?this._append`A${r},${r},0,1,${f},${e-s},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:h>il&&this._append`A${r},${r},0,${+(h>=vw)},${f},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function rA(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Wie(e)}function iA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function l4(t){this._context=t}l4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function H0(t){return new l4(t)}function c4(t){return t[0]}function u4(t){return t[1]}function f4(t,e){var n=Kt(!0),r=null,i=H0,o=null,a=rA(s);t=typeof t=="function"?t:t===void 0?c4:Kt(t),e=typeof e=="function"?e:e===void 0?u4:Kt(e);function s(l){var c,u=(l=iA(l)).length,f,h=!1,d;for(r==null&&(o=i(d=a())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(f,c,l),+e(f,c,l));if(d)return o=null,d+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:Kt(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:Kt(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Kt(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),s):r},s}function cg(t,e,n){var r=null,i=Kt(!0),o=null,a=H0,s=null,l=rA(c);t=typeof t=="function"?t:t===void 0?c4:Kt(+t),e=typeof e=="function"?e:Kt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?u4:Kt(+n);function c(f){var h,d,v,y=(f=iA(f)).length,g,p=!1,x,_=new Array(y),E=new Array(y);for(o==null&&(s=a(x=l())),h=0;h<=y;++h){if(!(h<y&&i(g=f[h],h,f))===p)if(p=!p)d=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),v=h-1;v>=d;--v)s.point(_[v],E[v]);s.lineEnd(),s.areaEnd()}p&&(_[h]=+t(g,h,f),E[h]=+e(g,h,f),s.point(r?+r(g,h,f):_[h],n?+n(g,h,f):E[h]))}if(x)return s=null,x+""||null}function u(){return f4().defined(i).curve(a).context(o)}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:Kt(+f),r=null,c):t},c.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Kt(+f),c):t},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Kt(+f),c):r},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:Kt(+f),n=null,c):e},c.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Kt(+f),c):e},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Kt(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Kt(!!f),c):i},c.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),c):a},c.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),c):o},c}class h4{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function qie(t){return new h4(t,!0)}function Xie(t){return new h4(t,!1)}const oA={draw(t,e){const n=fo(e/Fv);t.moveTo(n,0),t.arc(0,0,n,0,z0)}},Kie={draw(t,e){const n=fo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},d4=fo(1/3),Yie=d4*2,Qie={draw(t,e){const n=fo(e/Yie),r=n*d4;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Zie={draw(t,e){const n=fo(e),r=-n/2;t.rect(r,r,n,n)}},Jie=.8908130915292852,p4=Uv(Fv/10)/Uv(7*Fv/10),eoe=Uv(z0/10)*p4,toe=-a4(z0/10)*p4,noe={draw(t,e){const n=fo(e*Jie),r=eoe*n,i=toe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const a=z0*o/5,s=a4(a),l=Uv(a);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},ib=fo(3),roe={draw(t,e){const n=-fo(e/(ib*3));t.moveTo(0,n*2),t.lineTo(-ib*n,-n),t.lineTo(ib*n,-n),t.closePath()}},bi=-.5,wi=fo(3)/2,_w=1/fo(12),ioe=(_w/2+1)*3,ooe={draw(t,e){const n=fo(e/ioe),r=n/2,i=n*_w,o=r,a=n*_w+n,s=-o,l=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,l),t.lineTo(bi*r-wi*i,wi*r+bi*i),t.lineTo(bi*o-wi*a,wi*o+bi*a),t.lineTo(bi*s-wi*l,wi*s+bi*l),t.lineTo(bi*r+wi*i,bi*i-wi*r),t.lineTo(bi*o+wi*a,bi*a-wi*o),t.lineTo(bi*s+wi*l,bi*l-wi*s),t.closePath()}};function aoe(t,e){let n=null,r=rA(i);t=typeof t=="function"?t:Kt(t||oA),e=typeof e=="function"?e:Kt(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Kt(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Kt(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function Vv(){}function Bv(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function m4(t){this._context=t}m4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Bv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Bv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function soe(t){return new m4(t)}function g4(t){this._context=t}g4.prototype={areaStart:Vv,areaEnd:Vv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Bv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function loe(t){return new g4(t)}function v4(t){this._context=t}v4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Bv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function coe(t){return new v4(t)}function y4(t){this._context=t}y4.prototype={areaStart:Vv,areaEnd:Vv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function uoe(t){return new y4(t)}function MO(t){return t<0?-1:1}function PO(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(MO(o)+MO(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function CO(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ob(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function $v(t){this._context=t}$v.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ob(this,this._t0,CO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ob(this,CO(this,n=PO(this,t,e)),n);break;default:ob(this,this._t0,n=PO(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function _4(t){this._context=new x4(t)}(_4.prototype=Object.create($v.prototype)).point=function(t,e){$v.prototype.point.call(this,e,t)};function x4(t){this._context=t}x4.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function foe(t){return new $v(t)}function hoe(t){return new _4(t)}function b4(t){this._context=t}b4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=RO(t),i=RO(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function RO(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function doe(t){return new b4(t)}function G0(t,e){this._context=t,this._t=e}G0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function poe(t){return new G0(t,.5)}function moe(t){return new G0(t,0)}function goe(t){return new G0(t,1)}function $u(t,e){if((a=t.length)>1)for(var n=1,r,i,o=t[e[0]],a,s=o.length;n<a;++n)for(i=o,o=t[e[n]],r=0;r<s;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function xw(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function voe(t,e){return t[e]}function yoe(t){const e=[];return e.key=t,e}function _oe(){var t=Kt([]),e=xw,n=$u,r=voe;function i(o){var a=Array.from(t.apply(this,arguments),yoe),s,l=a.length,c=-1,u;for(const f of o)for(s=0,++c;s<l;++s)(a[s][c]=[0,+r(f,a[s].key,c,o)]).data=f;for(s=0,u=iA(e(a));s<l;++s)a[u[s]].index=s;return n(a,u),a}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Kt(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Kt(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?xw:typeof o=="function"?o:Kt(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??$u,i):n},i}function xoe(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,a;i<o;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}$u(t,e)}}function boe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var a=0,s=0;a<i;++a)s+=t[a][n][1]||0;r[n][1]+=r[n][0]=-s/2}$u(t,e)}}function woe(t,e){if(!(!((a=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,a;r<o;++r){for(var s=0,l=0,c=0;s<a;++s){for(var u=t[e[s]],f=u[r][1]||0,h=u[r-1][1]||0,d=(f-h)/2,v=0;v<s;++v){var y=t[e[v]],g=y[r][1]||0,p=y[r-1][1]||0;d+=g-p}l+=f,c+=d*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,$u(t,e)}}function Hd(t){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hd(t)}var Soe=["type","size","sizeType"];function bw(){return bw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bw.apply(this,arguments)}function OO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OO(Object(n),!0).forEach(function(r){Eoe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eoe(t,e,n){return e=Toe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Toe(t){var e=Aoe(t,"string");return Hd(e)=="symbol"?e:e+""}function Aoe(t,e){if(Hd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Moe(t,e){if(t==null)return{};var n=Poe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Poe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var w4={symbolCircle:oA,symbolCross:Kie,symbolDiamond:Qie,symbolSquare:Zie,symbolStar:noe,symbolTriangle:roe,symbolWye:ooe},Coe=Math.PI/180,Roe=function(e){var n="symbol".concat($0(e));return w4[n]||oA},Ooe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Coe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Ioe=function(e,n){w4["symbol".concat($0(e))]=n},aA=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,o=i===void 0?64:i,a=e.sizeType,s=a===void 0?"area":a,l=Moe(e,Soe),c=IO(IO({},l),{},{type:r,size:o,sizeType:s}),u=function(){var g=Roe(r),p=aoe().type(g).size(Ooe(o,s,r));return p()},f=c.className,h=c.cx,d=c.cy,v=Ke(c,!0);return h===+h&&d===+d&&o===+o?G.createElement("path",bw({},v,{className:_t("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(d,")"),d:u()})):null};aA.registerSymbol=Ioe;function zu(t){"@babel/helpers - typeof";return zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zu(t)}function ww(){return ww=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ww.apply(this,arguments)}function NO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Noe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NO(Object(n),!0).forEach(function(r){Gd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Doe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Loe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,E4(r.key),r)}}function koe(t,e,n){return e&&Loe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function joe(t,e,n){return e=zv(e),Uoe(t,S4()?Reflect.construct(e,n||[],zv(t).constructor):e.apply(t,n))}function Uoe(t,e){if(e&&(zu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Foe(t)}function Foe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S4=function(){return!!t})()}function zv(t){return zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zv(t)}function Voe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sw(t,e)}function Sw(t,e){return Sw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Sw(t,e)}function Gd(t,e,n){return e=E4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E4(t){var e=Boe(t,"string");return zu(e)=="symbol"?e:e+""}function Boe(t,e){if(zu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Si=32,sA=function(t){function e(){return Doe(this,e),joe(this,e,arguments)}return Voe(e,t),koe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,o=Si/2,a=Si/6,s=Si/3,l=r.inactive?i:r.color;if(r.type==="plainline")return G.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:o,x2:Si,y2:o,className:"recharts-legend-icon"});if(r.type==="line")return G.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(o,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(o,`
            H`).concat(Si,"M").concat(2*s,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(o),className:"recharts-legend-icon"});if(r.type==="rect")return G.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Si/8,"h").concat(Si,"v").concat(Si*3/4,"h").concat(-Si,"z"),className:"recharts-legend-icon"});if(G.isValidElement(r.legendIcon)){var c=Noe({},r);return delete c.legendIcon,G.cloneElement(r.legendIcon,c)}return G.createElement(aA,{fill:l,cx:o,cy:o,size:Si,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,o=i.payload,a=i.iconSize,s=i.layout,l=i.formatter,c=i.inactiveColor,u={x:0,y:0,width:Si,height:Si},f={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(d,v){var y=d.formatter||l,g=_t(Gd(Gd({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",d.inactive));if(d.type==="none")return null;var p=ot(d.value)?null:d.value;oo(!ot(d.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=d.inactive?c:d.color;return G.createElement("li",ww({className:g,style:f,key:"legend-item-".concat(v)},Vl(r.props,d,v)),G.createElement(dw,{width:a,height:a,viewBox:u,style:h},r.renderIcon(d)),G.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},y?y(p,d,v):p))})}},{key:"render",value:function(){var r=this.props,i=r.payload,o=r.layout,a=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return G.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(B.PureComponent);Gd(sA,"displayName","Legend");Gd(sA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var $oe=C0;function zoe(){this.__data__=new $oe,this.size=0}var Hoe=zoe;function Goe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var Woe=Goe;function qoe(t){return this.__data__.get(t)}var Xoe=qoe;function Koe(t){return this.__data__.has(t)}var Yoe=Koe,Qoe=C0,Zoe=XT,Joe=KT,eae=200;function tae(t,e){var n=this.__data__;if(n instanceof Qoe){var r=n.__data__;if(!Zoe||r.length<eae-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Joe(r)}return n.set(t,e),this.size=n.size,this}var nae=tae,rae=C0,iae=Hoe,oae=Woe,aae=Xoe,sae=Yoe,lae=nae;function jf(t){var e=this.__data__=new rae(t);this.size=e.size}jf.prototype.clear=iae;jf.prototype.delete=oae;jf.prototype.get=aae;jf.prototype.has=sae;jf.prototype.set=lae;var T4=jf,cae="__lodash_hash_undefined__";function uae(t){return this.__data__.set(t,cae),this}var fae=uae;function hae(t){return this.__data__.has(t)}var dae=hae,pae=KT,mae=fae,gae=dae;function Hv(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new pae;++e<n;)this.add(t[e])}Hv.prototype.add=Hv.prototype.push=mae;Hv.prototype.has=gae;var A4=Hv;function vae(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var M4=vae;function yae(t,e){return t.has(e)}var P4=yae,_ae=A4,xae=M4,bae=P4,wae=1,Sae=2;function Eae(t,e,n,r,i,o){var a=n&wae,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var f=-1,h=!0,d=n&Sae?new _ae:void 0;for(o.set(t,e),o.set(e,t);++f<s;){var v=t[f],y=e[f];if(r)var g=a?r(y,v,f,e,t,o):r(v,y,f,t,e,o);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!xae(e,function(p,x){if(!bae(d,x)&&(v===p||i(v,p,n,r,o)))return d.push(x)})){h=!1;break}}else if(!(v===y||i(v,y,n,r,o))){h=!1;break}}return o.delete(t),o.delete(e),h}var C4=Eae,Tae=ko,Aae=Tae.Uint8Array,Mae=Aae;function Pae(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var Cae=Pae;function Rae(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var lA=Rae,DO=Wp,LO=Mae,Oae=qT,Iae=C4,Nae=Cae,Dae=lA,Lae=1,kae=2,jae="[object Boolean]",Uae="[object Date]",Fae="[object Error]",Vae="[object Map]",Bae="[object Number]",$ae="[object RegExp]",zae="[object Set]",Hae="[object String]",Gae="[object Symbol]",Wae="[object ArrayBuffer]",qae="[object DataView]",kO=DO?DO.prototype:void 0,ab=kO?kO.valueOf:void 0;function Xae(t,e,n,r,i,o,a){switch(n){case qae:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Wae:return!(t.byteLength!=e.byteLength||!o(new LO(t),new LO(e)));case jae:case Uae:case Bae:return Oae(+t,+e);case Fae:return t.name==e.name&&t.message==e.message;case $ae:case Hae:return t==e+"";case Vae:var s=Nae;case zae:var l=r&Lae;if(s||(s=Dae),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=kae,a.set(t,e);var u=Iae(s(t),s(e),r,i,o,a);return a.delete(t),u;case Gae:if(ab)return ab.call(t)==ab.call(e)}return!1}var Kae=Xae;function Yae(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var R4=Yae,Qae=R4,Zae=Zr;function Jae(t,e,n){var r=e(t);return Zae(t)?r:Qae(r,n(t))}var ese=Jae;function tse(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}var nse=tse;function rse(){return[]}var ise=rse,ose=nse,ase=ise,sse=Object.prototype,lse=sse.propertyIsEnumerable,jO=Object.getOwnPropertySymbols,cse=jO?function(t){return t==null?[]:(t=Object(t),ose(jO(t),function(e){return lse.call(t,e)}))}:ase,use=cse;function fse(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var hse=fse,dse=Pa,pse=Ca,mse="[object Arguments]";function gse(t){return pse(t)&&dse(t)==mse}var vse=gse,UO=vse,yse=Ca,O4=Object.prototype,_se=O4.hasOwnProperty,xse=O4.propertyIsEnumerable,bse=UO(function(){return arguments}())?UO:function(t){return yse(t)&&_se.call(t,"callee")&&!xse.call(t,"callee")},cA=bse,Gv={exports:{}};function wse(){return!1}var Sse=wse;Gv.exports;(function(t,e){var n=ko,r=Sse,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a?n.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||r;t.exports=c})(Gv,Gv.exports);var I4=Gv.exports,Ese=9007199254740991,Tse=/^(?:0|[1-9]\d*)$/;function Ase(t,e){var n=typeof t;return e=e??Ese,!!e&&(n=="number"||n!="symbol"&&Tse.test(t))&&t>-1&&t%1==0&&t<e}var uA=Ase,Mse=9007199254740991;function Pse(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Mse}var fA=Pse,Cse=Pa,Rse=fA,Ose=Ca,Ise="[object Arguments]",Nse="[object Array]",Dse="[object Boolean]",Lse="[object Date]",kse="[object Error]",jse="[object Function]",Use="[object Map]",Fse="[object Number]",Vse="[object Object]",Bse="[object RegExp]",$se="[object Set]",zse="[object String]",Hse="[object WeakMap]",Gse="[object ArrayBuffer]",Wse="[object DataView]",qse="[object Float32Array]",Xse="[object Float64Array]",Kse="[object Int8Array]",Yse="[object Int16Array]",Qse="[object Int32Array]",Zse="[object Uint8Array]",Jse="[object Uint8ClampedArray]",ele="[object Uint16Array]",tle="[object Uint32Array]",nn={};nn[qse]=nn[Xse]=nn[Kse]=nn[Yse]=nn[Qse]=nn[Zse]=nn[Jse]=nn[ele]=nn[tle]=!0;nn[Ise]=nn[Nse]=nn[Gse]=nn[Dse]=nn[Wse]=nn[Lse]=nn[kse]=nn[jse]=nn[Use]=nn[Fse]=nn[Vse]=nn[Bse]=nn[$se]=nn[zse]=nn[Hse]=!1;function nle(t){return Ose(t)&&Rse(t.length)&&!!nn[Cse(t)]}var rle=nle;function ile(t){return function(e){return t(e)}}var N4=ile,Wv={exports:{}};Wv.exports;(function(t,e){var n=VF,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,a=o&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=s})(Wv,Wv.exports);var ole=Wv.exports,ale=rle,sle=N4,FO=ole,VO=FO&&FO.isTypedArray,lle=VO?sle(VO):ale,D4=lle,cle=hse,ule=cA,fle=Zr,hle=I4,dle=uA,ple=D4,mle=Object.prototype,gle=mle.hasOwnProperty;function vle(t,e){var n=fle(t),r=!n&&ule(t),i=!n&&!r&&hle(t),o=!n&&!r&&!i&&ple(t),a=n||r||i||o,s=a?cle(t.length,String):[],l=s.length;for(var c in t)(e||gle.call(t,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||dle(c,l)))&&s.push(c);return s}var yle=vle,_le=Object.prototype;function xle(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||_le;return t===n}var ble=xle;function wle(t,e){return function(n){return t(e(n))}}var L4=wle,Sle=L4,Ele=Sle(Object.keys,Object),Tle=Ele,Ale=ble,Mle=Tle,Ple=Object.prototype,Cle=Ple.hasOwnProperty;function Rle(t){if(!Ale(t))return Mle(t);var e=[];for(var n in Object(t))Cle.call(t,n)&&n!="constructor"&&e.push(n);return e}var Ole=Rle,Ile=WT,Nle=fA;function Dle(t){return t!=null&&Nle(t.length)&&!Ile(t)}var Xp=Dle,Lle=yle,kle=Ole,jle=Xp;function Ule(t){return jle(t)?Lle(t):kle(t)}var W0=Ule,Fle=ese,Vle=use,Ble=W0;function $le(t){return Fle(t,Ble,Vle)}var zle=$le,BO=zle,Hle=1,Gle=Object.prototype,Wle=Gle.hasOwnProperty;function qle(t,e,n,r,i,o){var a=n&Hle,s=BO(t),l=s.length,c=BO(e),u=c.length;if(l!=u&&!a)return!1;for(var f=l;f--;){var h=s[f];if(!(a?h in e:Wle.call(e,h)))return!1}var d=o.get(t),v=o.get(e);if(d&&v)return d==e&&v==t;var y=!0;o.set(t,e),o.set(e,t);for(var g=a;++f<l;){h=s[f];var p=t[h],x=e[h];if(r)var _=a?r(x,p,h,e,t,o):r(p,x,h,t,e,o);if(!(_===void 0?p===x||i(p,x,n,r,o):_)){y=!1;break}g||(g=h=="constructor")}if(y&&!g){var E=t.constructor,b=e.constructor;E!=b&&"constructor"in t&&"constructor"in e&&!(typeof E=="function"&&E instanceof E&&typeof b=="function"&&b instanceof b)&&(y=!1)}return o.delete(t),o.delete(e),y}var Xle=qle,Kle=Ql,Yle=ko,Qle=Kle(Yle,"DataView"),Zle=Qle,Jle=Ql,ece=ko,tce=Jle(ece,"Promise"),nce=tce,rce=Ql,ice=ko,oce=rce(ice,"Set"),k4=oce,ace=Ql,sce=ko,lce=ace(sce,"WeakMap"),cce=lce,Ew=Zle,Tw=XT,Aw=nce,Mw=k4,Pw=cce,j4=Pa,Uf=$F,$O="[object Map]",uce="[object Object]",zO="[object Promise]",HO="[object Set]",GO="[object WeakMap]",WO="[object DataView]",fce=Uf(Ew),hce=Uf(Tw),dce=Uf(Aw),pce=Uf(Mw),mce=Uf(Pw),ol=j4;(Ew&&ol(new Ew(new ArrayBuffer(1)))!=WO||Tw&&ol(new Tw)!=$O||Aw&&ol(Aw.resolve())!=zO||Mw&&ol(new Mw)!=HO||Pw&&ol(new Pw)!=GO)&&(ol=function(t){var e=j4(t),n=e==uce?t.constructor:void 0,r=n?Uf(n):"";if(r)switch(r){case fce:return WO;case hce:return $O;case dce:return zO;case pce:return HO;case mce:return GO}return e});var gce=ol,sb=T4,vce=C4,yce=Kae,_ce=Xle,qO=gce,XO=Zr,KO=I4,xce=D4,bce=1,YO="[object Arguments]",QO="[object Array]",ug="[object Object]",wce=Object.prototype,ZO=wce.hasOwnProperty;function Sce(t,e,n,r,i,o){var a=XO(t),s=XO(e),l=a?QO:qO(t),c=s?QO:qO(e);l=l==YO?ug:l,c=c==YO?ug:c;var u=l==ug,f=c==ug,h=l==c;if(h&&KO(t)){if(!KO(e))return!1;a=!0,u=!1}if(h&&!u)return o||(o=new sb),a||xce(t)?vce(t,e,n,r,i,o):yce(t,e,l,n,r,i,o);if(!(n&bce)){var d=u&&ZO.call(t,"__wrapped__"),v=f&&ZO.call(e,"__wrapped__");if(d||v){var y=d?t.value():t,g=v?e.value():e;return o||(o=new sb),i(y,g,n,r,o)}}return h?(o||(o=new sb),_ce(t,e,n,r,i,o)):!1}var Ece=Sce,Tce=Ece,JO=Ca;function U4(t,e,n,r,i){return t===e?!0:t==null||e==null||!JO(t)&&!JO(e)?t!==t&&e!==e:Tce(t,e,n,r,U4,i)}var hA=U4,Ace=T4,Mce=hA,Pce=1,Cce=2;function Rce(t,e,n,r){var i=n.length,o=i,a=!r;if(t==null)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var l=s[0],c=t[l],u=s[1];if(a&&s[2]){if(c===void 0&&!(l in t))return!1}else{var f=new Ace;if(r)var h=r(c,u,l,t,e,f);if(!(h===void 0?Mce(u,c,Pce|Cce,r,f):h))return!1}}return!0}var Oce=Rce,Ice=Ls;function Nce(t){return t===t&&!Ice(t)}var F4=Nce,Dce=F4,Lce=W0;function kce(t){for(var e=Lce(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Dce(i)]}return e}var jce=kce;function Uce(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var V4=Uce,Fce=Oce,Vce=jce,Bce=V4;function $ce(t){var e=Vce(t);return e.length==1&&e[0][2]?Bce(e[0][0],e[0][1]):function(n){return n===t||Fce(n,t,e)}}var zce=$ce;function Hce(t,e){return t!=null&&e in Object(t)}var Gce=Hce,Wce=qF,qce=cA,Xce=Zr,Kce=uA,Yce=fA,Qce=O0;function Zce(t,e,n){e=Wce(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=Qce(e[r]);if(!(o=t!=null&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&Yce(i)&&Kce(a,i)&&(Xce(t)||qce(t)))}var Jce=Zce,eue=Gce,tue=Jce;function nue(t,e){return t!=null&&tue(t,e,eue)}var rue=nue,iue=hA,oue=XF,aue=rue,sue=GT,lue=F4,cue=V4,uue=O0,fue=1,hue=2;function due(t,e){return sue(t)&&lue(e)?cue(uue(t),e):function(n){var r=oue(n,t);return r===void 0&&r===e?aue(n,t):iue(e,r,fue|hue)}}var pue=due;function mue(t){return t}var Ff=mue;function gue(t){return function(e){return e==null?void 0:e[t]}}var vue=gue,yue=ZT;function _ue(t){return function(e){return yue(e,t)}}var xue=_ue,bue=vue,wue=xue,Sue=GT,Eue=O0;function Tue(t){return Sue(t)?bue(Eue(t)):wue(t)}var Aue=Tue,Mue=zce,Pue=pue,Cue=Ff,Rue=Zr,Oue=Aue;function Iue(t){return typeof t=="function"?t:t==null?Cue:typeof t=="object"?Rue(t)?Pue(t[0],t[1]):Mue(t):Oue(t)}var jo=Iue;function Nue(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var B4=Nue;function Due(t){return t!==t}var Lue=Due;function kue(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var jue=kue,Uue=B4,Fue=Lue,Vue=jue;function Bue(t,e,n){return e===e?Vue(t,e,n):Uue(t,Fue,n)}var $ue=Bue,zue=$ue;function Hue(t,e){var n=t==null?0:t.length;return!!n&&zue(t,e,0)>-1}var Gue=Hue;function Wue(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var que=Wue;function Xue(){}var Kue=Xue,lb=k4,Yue=Kue,Que=lA,Zue=1/0,Jue=lb&&1/Que(new lb([,-0]))[1]==Zue?function(t){return new lb(t)}:Yue,efe=Jue,tfe=A4,nfe=Gue,rfe=que,ife=P4,ofe=efe,afe=lA,sfe=200;function lfe(t,e,n){var r=-1,i=nfe,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=rfe;else if(o>=sfe){var c=e?null:ofe(t);if(c)return afe(c);a=!1,i=ife,l=new tfe}else l=e?[]:s;e:for(;++r<o;){var u=t[r],f=e?e(u):u;if(u=n||u!==0?u:0,a&&f===f){for(var h=l.length;h--;)if(l[h]===f)continue e;e&&l.push(f),s.push(u)}else i(l,f,n)||(l!==s&&l.push(f),s.push(u))}return s}var cfe=lfe,ufe=jo,ffe=cfe;function hfe(t,e){return t&&t.length?ffe(t,ufe(e)):[]}var dfe=hfe;const eI=Ft(dfe);function $4(t,e,n){return e===!0?eI(t,n):ot(e)?eI(t,e):t}function Hu(t){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hu(t)}var pfe=["ref"];function tI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tI(Object(n),!0).forEach(function(r){q0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,H4(r.key),r)}}function gfe(t,e,n){return e&&nI(t.prototype,e),n&&nI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vfe(t,e,n){return e=qv(e),yfe(t,z4()?Reflect.construct(e,n||[],qv(t).constructor):e.apply(t,n))}function yfe(t,e){if(e&&(Hu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _fe(t)}function _fe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z4=function(){return!!t})()}function qv(t){return qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qv(t)}function xfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cw(t,e)}function Cw(t,e){return Cw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Cw(t,e)}function q0(t,e,n){return e=H4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H4(t){var e=bfe(t,"string");return Hu(e)=="symbol"?e:e+""}function bfe(t,e){if(Hu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wfe(t,e){if(t==null)return{};var n=Sfe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Sfe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Efe(t){return t.value}function Tfe(t,e){if(G.isValidElement(t))return G.cloneElement(t,e);if(typeof t=="function")return G.createElement(t,e);e.ref;var n=wfe(e,pfe);return G.createElement(sA,n)}var rI=1,fa=function(t){function e(){var n;mfe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=vfe(this,e,[].concat(i)),q0(n,"lastBoundingBox",{width:-1,height:-1}),n}return xfe(e,t),gfe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>rI||Math.abs(i.height-this.lastBoundingBox.height)>rI)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Wo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,o=i.layout,a=i.align,s=i.verticalAlign,l=i.margin,c=i.chartWidth,u=i.chartHeight,f,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&o==="vertical"){var d=this.getBBoxSnapshot();f={left:((c||0)-d.width)/2}}else f=a==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var v=this.getBBoxSnapshot();h={top:((u||0)-v.height)/2}}else h=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Wo(Wo({},f),h)}},{key:"render",value:function(){var r=this,i=this.props,o=i.content,a=i.width,s=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,u=i.payload,f=Wo(Wo({position:"absolute",width:a||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return G.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(d){r.wrapperNode=d}},Tfe(o,Wo(Wo({},this.props),{},{payload:$4(u,c,Efe)})))}}],[{key:"getWithHeight",value:function(r,i){var o=Wo(Wo({},this.defaultProps),r.props),a=o.layout;return a==="vertical"&&Ae(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(B.PureComponent);q0(fa,"displayName","Legend");q0(fa,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var iI=Wp,Afe=cA,Mfe=Zr,oI=iI?iI.isConcatSpreadable:void 0;function Pfe(t){return Mfe(t)||Afe(t)||!!(oI&&t&&t[oI])}var Cfe=Pfe,Rfe=R4,Ofe=Cfe;function G4(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Ofe),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?G4(s,e-1,n,r,i):Rfe(i,s):r||(i[i.length]=s)}return i}var W4=G4;function Ife(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(n(o[l],l,o)===!1)break}return e}}var Nfe=Ife,Dfe=Nfe,Lfe=Dfe(),kfe=Lfe,jfe=kfe,Ufe=W0;function Ffe(t,e){return t&&jfe(t,e,Ufe)}var q4=Ffe,Vfe=Xp;function Bfe(t,e){return function(n,r){if(n==null)return n;if(!Vfe(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}var $fe=Bfe,zfe=q4,Hfe=$fe,Gfe=Hfe(zfe),dA=Gfe,Wfe=dA,qfe=Xp;function Xfe(t,e){var n=-1,r=qfe(t)?Array(t.length):[];return Wfe(t,function(i,o,a){r[++n]=e(i,o,a)}),r}var X4=Xfe;function Kfe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var Yfe=Kfe,aI=Of;function Qfe(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,o=aI(t),a=e!==void 0,s=e===null,l=e===e,c=aI(e);if(!s&&!c&&!o&&t>e||o&&a&&l&&!s&&!c||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}var Zfe=Qfe,Jfe=Zfe;function ehe(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var l=Jfe(i[r],o[r]);if(l){if(r>=s)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var the=ehe,cb=QT,nhe=ZT,rhe=jo,ihe=X4,ohe=Yfe,ahe=N4,she=the,lhe=Ff,che=Zr;function uhe(t,e,n){e.length?e=cb(e,function(o){return che(o)?function(a){return nhe(a,o.length===1?o[0]:o)}:o}):e=[lhe];var r=-1;e=cb(e,ahe(rhe));var i=ihe(t,function(o,a,s){var l=cb(e,function(c){return c(o)});return{criteria:l,index:++r,value:o}});return ohe(i,function(o,a){return she(o,a,n)})}var fhe=uhe;function hhe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var dhe=hhe,phe=dhe,sI=Math.max;function mhe(t,e,n){return e=sI(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=sI(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),phe(t,this,s)}}var ghe=mhe;function vhe(t){return function(){return t}}var yhe=vhe,_he=Ql,xhe=function(){try{var t=_he(Object,"defineProperty");return t({},"",{}),t}catch{}}(),K4=xhe,bhe=yhe,lI=K4,whe=Ff,She=lI?function(t,e){return lI(t,"toString",{configurable:!0,enumerable:!1,value:bhe(e),writable:!0})}:whe,Ehe=She,The=800,Ahe=16,Mhe=Date.now;function Phe(t){var e=0,n=0;return function(){var r=Mhe(),i=Ahe-(r-n);if(n=r,i>0){if(++e>=The)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Che=Phe,Rhe=Ehe,Ohe=Che,Ihe=Ohe(Rhe),Nhe=Ihe,Dhe=Ff,Lhe=ghe,khe=Nhe;function jhe(t,e){return khe(Lhe(t,e,Dhe),t+"")}var Uhe=jhe,Fhe=qT,Vhe=Xp,Bhe=uA,$he=Ls;function zhe(t,e,n){if(!$he(n))return!1;var r=typeof e;return(r=="number"?Vhe(n)&&Bhe(e,n.length):r=="string"&&e in n)?Fhe(n[e],t):!1}var X0=zhe,Hhe=W4,Ghe=fhe,Whe=Uhe,cI=X0,qhe=Whe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&cI(t,e[0],e[1])?e=[]:n>2&&cI(e[0],e[1],e[2])&&(e=[e[0]]),Ghe(t,Hhe(e,1),[])}),Xhe=qhe;const pA=Ft(Xhe);function Wd(t){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wd(t)}function Rw(){return Rw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rw.apply(this,arguments)}function Khe(t,e){return Jhe(t)||Zhe(t,e)||Qhe(t,e)||Yhe()}function Yhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qhe(t,e){if(t){if(typeof t=="string")return uI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uI(t,e)}}function uI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zhe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Jhe(t){if(Array.isArray(t))return t}function fI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ub(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fI(Object(n),!0).forEach(function(r){ede(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ede(t,e,n){return e=tde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tde(t){var e=nde(t,"string");return Wd(e)=="symbol"?e:e+""}function nde(t,e){if(Wd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rde(t){return Array.isArray(t)&&Vn(t[0])&&Vn(t[1])?t.join(" ~ "):t}var ide=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,o=i===void 0?{}:i,a=e.itemStyle,s=a===void 0?{}:a,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,f=e.formatter,h=e.itemSorter,d=e.wrapperClassName,v=e.labelClassName,y=e.label,g=e.labelFormatter,p=e.accessibilityLayer,x=p===void 0?!1:p,_=function(){if(u&&u.length){var N={padding:0,margin:0},I=(h?pA(u,h):u).map(function(D,L){if(D.type==="none")return null;var q=ub({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},s),$=D.formatter||f||rde,V=D.value,X=D.name,K=V,z=X;if($&&K!=null&&z!=null){var W=$(V,X,D,L,u);if(Array.isArray(W)){var ee=Khe(W,2);K=ee[0],z=ee[1]}else K=W}return G.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:q},Vn(z)?G.createElement("span",{className:"recharts-tooltip-item-name"},z):null,Vn(z)?G.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,G.createElement("span",{className:"recharts-tooltip-item-value"},K),G.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return G.createElement("ul",{className:"recharts-tooltip-item-list",style:N},I)}return null},E=ub({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),b=ub({margin:0},c),M=!ft(y),S=M?y:"",A=_t("recharts-default-tooltip",d),T=_t("recharts-tooltip-label",v);M&&g&&u!==void 0&&u!==null&&(S=g(y,u));var P=x?{role:"status","aria-live":"assertive"}:{};return G.createElement("div",Rw({className:A,style:E},P),G.createElement("p",{className:T,style:b},G.isValidElement(S)?S:"".concat(S)),_())};function qd(t){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qd(t)}function fg(t,e,n){return e=ode(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ode(t){var e=ade(t,"string");return qd(e)=="symbol"?e:e+""}function ade(t,e){if(qd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sh="recharts-tooltip-wrapper",sde={visibility:"hidden"};function lde(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return _t(Sh,fg(fg(fg(fg({},"".concat(Sh,"-right"),Ae(n)&&e&&Ae(e.x)&&n>=e.x),"".concat(Sh,"-left"),Ae(n)&&e&&Ae(e.x)&&n<e.x),"".concat(Sh,"-bottom"),Ae(r)&&e&&Ae(e.y)&&r>=e.y),"".concat(Sh,"-top"),Ae(r)&&e&&Ae(e.y)&&r<e.y))}function hI(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,a=t.reverseDirection,s=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(o&&Ae(o[r]))return o[r];var u=n[r]-s-i,f=n[r]+i;if(e[r])return a[r]?u:f;if(a[r]){var h=u,d=l[r];return h<d?Math.max(f,l[r]):Math.max(u,l[r])}var v=f+s,y=l[r]+c;return v>y?Math.max(u,l[r]):Math.max(f,l[r])}function cde(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function ude(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,o=t.reverseDirection,a=t.tooltipBox,s=t.useTranslate3d,l=t.viewBox,c,u,f;return a.height>0&&a.width>0&&n?(u=hI({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),f=hI({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),c=cde({translateX:u,translateY:f,useTranslate3d:s})):c=sde,{cssProperties:c,cssClasses:lde({translateX:u,translateY:f,coordinate:n})}}function Gu(t){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gu(t)}function dI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dI(Object(n),!0).forEach(function(r){Iw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q4(r.key),r)}}function dde(t,e,n){return e&&hde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function pde(t,e,n){return e=Xv(e),mde(t,Y4()?Reflect.construct(e,n||[],Xv(t).constructor):e.apply(t,n))}function mde(t,e){if(e&&(Gu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gde(t)}function gde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y4=function(){return!!t})()}function Xv(t){return Xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xv(t)}function vde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ow(t,e)}function Ow(t,e){return Ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ow(t,e)}function Iw(t,e,n){return e=Q4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q4(t){var e=yde(t,"string");return Gu(e)=="symbol"?e:e+""}function yde(t,e){if(Gu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mI=1,_de=function(t){function e(){var n;fde(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=pde(this,e,[].concat(i)),Iw(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Iw(n,"handleKeyDown",function(a){if(a.key==="Escape"){var s,l,c,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(c=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),n}return vde(e,t),dde(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>mI||Math.abs(r.height-this.state.lastBoundingBox.height)>mI)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.children,u=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,d=i.offset,v=i.position,y=i.reverseDirection,g=i.useTranslate3d,p=i.viewBox,x=i.wrapperStyle,_=ude({allowEscapeViewBox:a,coordinate:u,offsetTopLeft:d,position:v,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:p}),E=_.cssClasses,b=_.cssProperties,M=pI(pI({transition:h&&o?"transform ".concat(s,"ms ").concat(l):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&f?"visible":"hidden",position:"absolute",top:0,left:0},x);return G.createElement("div",{tabIndex:-1,className:E,style:M,ref:function(A){r.wrapperNode=A}},c)}}])}(B.PureComponent),xde=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ao={isSsr:xde(),get:function(e){return ao[e]},set:function(e,n){if(typeof e=="string")ao[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(i){ao[i]=e[i]})}}};function Wu(t){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wu(t)}function gI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gI(Object(n),!0).forEach(function(r){mA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,J4(r.key),r)}}function Sde(t,e,n){return e&&wde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ede(t,e,n){return e=Kv(e),Tde(t,Z4()?Reflect.construct(e,n||[],Kv(t).constructor):e.apply(t,n))}function Tde(t,e){if(e&&(Wu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ade(t)}function Ade(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z4=function(){return!!t})()}function Kv(t){return Kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kv(t)}function Mde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nw(t,e)}function Nw(t,e){return Nw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Nw(t,e)}function mA(t,e,n){return e=J4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J4(t){var e=Pde(t,"string");return Wu(e)=="symbol"?e:e+""}function Pde(t,e){if(Wu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cde(t){return t.dataKey}function Rde(t,e){return G.isValidElement(t)?G.cloneElement(t,e):typeof t=="function"?G.createElement(t,e):G.createElement(ide,e)}var Lr=function(t){function e(){return bde(this,e),Ede(this,e,arguments)}return Mde(e,t),Sde(e,[{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.content,u=i.coordinate,f=i.filterNull,h=i.isAnimationActive,d=i.offset,v=i.payload,y=i.payloadUniqBy,g=i.position,p=i.reverseDirection,x=i.useTranslate3d,_=i.viewBox,E=i.wrapperStyle,b=v??[];f&&b.length&&(b=$4(v.filter(function(S){return S.value!=null&&(S.hide!==!0||r.props.includeHidden)}),y,Cde));var M=b.length>0;return G.createElement(_de,{allowEscapeViewBox:a,animationDuration:s,animationEasing:l,isAnimationActive:h,active:o,coordinate:u,hasPayload:M,offset:d,position:g,reverseDirection:p,useTranslate3d:x,viewBox:_,wrapperStyle:E},Rde(c,vI(vI({},this.props),{},{payload:b})))}}])}(B.PureComponent);mA(Lr,"displayName","Tooltip");mA(Lr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ao.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Ode=ko,Ide=function(){return Ode.Date.now()},Nde=Ide,Dde=/\s/;function Lde(t){for(var e=t.length;e--&&Dde.test(t.charAt(e)););return e}var kde=Lde,jde=kde,Ude=/^\s+/;function Fde(t){return t&&t.slice(0,jde(t)+1).replace(Ude,"")}var Vde=Fde,Bde=Vde,yI=Ls,$de=Of,_I=NaN,zde=/^[-+]0x[0-9a-f]+$/i,Hde=/^0b[01]+$/i,Gde=/^0o[0-7]+$/i,Wde=parseInt;function qde(t){if(typeof t=="number")return t;if($de(t))return _I;if(yI(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=yI(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Bde(t);var n=Hde.test(t);return n||Gde.test(t)?Wde(t.slice(2),n?2:8):zde.test(t)?_I:+t}var eV=qde,Xde=Ls,fb=Nde,xI=eV,Kde="Expected a function",Yde=Math.max,Qde=Math.min;function Zde(t,e,n){var r,i,o,a,s,l,c=0,u=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(Kde);e=xI(e)||0,Xde(n)&&(u=!!n.leading,f="maxWait"in n,o=f?Yde(xI(n.maxWait)||0,e):o,h="trailing"in n?!!n.trailing:h);function d(M){var S=r,A=i;return r=i=void 0,c=M,a=t.apply(A,S),a}function v(M){return c=M,s=setTimeout(p,e),u?d(M):a}function y(M){var S=M-l,A=M-c,T=e-S;return f?Qde(T,o-A):T}function g(M){var S=M-l,A=M-c;return l===void 0||S>=e||S<0||f&&A>=o}function p(){var M=fb();if(g(M))return x(M);s=setTimeout(p,y(M))}function x(M){return s=void 0,h&&r?d(M):(r=i=void 0,a)}function _(){s!==void 0&&clearTimeout(s),c=0,r=l=i=s=void 0}function E(){return s===void 0?a:x(fb())}function b(){var M=fb(),S=g(M);if(r=arguments,i=this,l=M,S){if(s===void 0)return v(l);if(f)return clearTimeout(s),s=setTimeout(p,e),d(l)}return s===void 0&&(s=setTimeout(p,e)),a}return b.cancel=_,b.flush=E,b}var Jde=Zde,epe=Jde,tpe=Ls,npe="Expected a function";function rpe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(npe);return tpe(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),epe(t,e,{leading:r,maxWait:e,trailing:i})}var ipe=rpe;const tV=Ft(ipe);function Xd(t){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xd(t)}function bI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bI(Object(n),!0).forEach(function(r){ope(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ope(t,e,n){return e=ape(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ape(t){var e=spe(t,"string");return Xd(e)=="symbol"?e:e+""}function spe(t,e){if(Xd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lpe(t,e){return hpe(t)||fpe(t,e)||upe(t,e)||cpe()}function cpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function upe(t,e){if(t){if(typeof t=="string")return wI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wI(t,e)}}function wI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fpe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function hpe(t){if(Array.isArray(t))return t}var qu=B.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=t.width,a=o===void 0?"100%":o,s=t.height,l=s===void 0?"100%":s,c=t.minWidth,u=c===void 0?0:c,f=t.minHeight,h=t.maxHeight,d=t.children,v=t.debounce,y=v===void 0?0:v,g=t.id,p=t.className,x=t.onResize,_=t.style,E=_===void 0?{}:_,b=B.useRef(null),M=B.useRef();M.current=x,B.useImperativeHandle(e,function(){return Object.defineProperty(b.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),b.current},configurable:!0})});var S=B.useState({containerWidth:i.width,containerHeight:i.height}),A=lpe(S,2),T=A[0],P=A[1],R=B.useCallback(function(I,D){P(function(L){var q=Math.round(I),$=Math.round(D);return L.containerWidth===q&&L.containerHeight===$?L:{containerWidth:q,containerHeight:$}})},[]);B.useEffect(function(){var I=function(X){var K,z=X[0].contentRect,W=z.width,ee=z.height;R(W,ee),(K=M.current)===null||K===void 0||K.call(M,W,ee)};y>0&&(I=tV(I,y,{trailing:!0,leading:!1}));var D=new ResizeObserver(I),L=b.current.getBoundingClientRect(),q=L.width,$=L.height;return R(q,$),D.observe(b.current),function(){D.disconnect()}},[R,y]);var N=B.useMemo(function(){var I=T.containerWidth,D=T.containerHeight;if(I<0||D<0)return null;oo(vl(a)||vl(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),oo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var L=vl(a)?I:a,q=vl(l)?D:l;n&&n>0&&(L?q=L/n:q&&(L=q*n),h&&q>h&&(q=h)),oo(L>0||q>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,L,q,a,l,u,f,n);var $=!Array.isArray(d)&&ua(d.type).endsWith("Chart");return G.Children.map(d,function(V){return G.isValidElement(V)?B.cloneElement(V,hg({width:L,height:q},$?{style:hg({height:"100%",width:"100%",maxHeight:q,maxWidth:L},V.props.style)}:{})):V})},[n,d,l,h,f,u,T,a]);return G.createElement("div",{id:g?"".concat(g):void 0,className:_t("recharts-responsive-container",p),style:hg(hg({},E),{},{width:a,height:l,minWidth:u,minHeight:f,maxHeight:h}),ref:b},N)}),Kd=function(e){return null};Kd.displayName="Cell";function Yd(t){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(t)}function SI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SI(Object(n),!0).forEach(function(r){dpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dpe(t,e,n){return e=ppe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ppe(t){var e=mpe(t,"string");return Yd(e)=="symbol"?e:e+""}function mpe(t,e){if(Yd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Yd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Oc={widthCache:{},cacheCount:0},gpe=2e3,vpe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},EI="recharts_measurement_span";function ype(t){var e=Dw({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var sd=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||ao.isSsr)return{width:0,height:0};var r=ype(n),i=JSON.stringify({text:e,copyStyle:r});if(Oc.widthCache[i])return Oc.widthCache[i];try{var o=document.getElementById(EI);o||(o=document.createElement("span"),o.setAttribute("id",EI),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=Dw(Dw({},vpe),r);Object.assign(o.style,a),o.textContent="".concat(e);var s=o.getBoundingClientRect(),l={width:s.width,height:s.height};return Oc.widthCache[i]=l,++Oc.cacheCount>gpe&&(Oc.cacheCount=0,Oc.widthCache={}),l}catch{return{width:0,height:0}}},_pe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Qd(t){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qd(t)}function Yv(t,e){return Spe(t)||wpe(t,e)||bpe(t,e)||xpe()}function xpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bpe(t,e){if(t){if(typeof t=="string")return TI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TI(t,e)}}function TI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wpe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Spe(t){if(Array.isArray(t))return t}function Epe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ape(r.key),r)}}function Tpe(t,e,n){return e&&AI(t.prototype,e),n&&AI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ape(t){var e=Mpe(t,"string");return Qd(e)=="symbol"?e:e+""}function Mpe(t,e){if(Qd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var MI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,PI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ppe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Cpe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,nV={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Rpe=Object.keys(nV),lu="NaN";function Ope(t,e){return t*nV[e]}var dg=function(){function t(e,n){Epe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!Ppe.test(n)&&(this.num=NaN,this.unit=""),Rpe.includes(n)&&(this.num=Ope(e,n),this.unit="px")}return Tpe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Cpe.exec(n))!==null&&r!==void 0?r:[],o=Yv(i,3),a=o[1],s=o[2];return new t(parseFloat(a),s??"")}}])}();function rV(t){if(t.includes(lu))return lu;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=MI.exec(e))!==null&&n!==void 0?n:[],i=Yv(r,4),o=i[1],a=i[2],s=i[3],l=dg.parse(o??""),c=dg.parse(s??""),u=a==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return lu;e=e.replace(MI,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=PI.exec(e))!==null&&f!==void 0?f:[],d=Yv(h,4),v=d[1],y=d[2],g=d[3],p=dg.parse(v??""),x=dg.parse(g??""),_=y==="+"?p.add(x):p.subtract(x);if(_.isNaN())return lu;e=e.replace(PI,_.toString())}return e}var CI=/\(([^()]*)\)/;function Ipe(t){for(var e=t;e.includes("(");){var n=CI.exec(e),r=Yv(n,2),i=r[1];e=e.replace(CI,rV(i))}return e}function Npe(t){var e=t.replace(/\s+/g,"");return e=Ipe(e),e=rV(e),e}function Dpe(t){try{return Npe(t)}catch{return lu}}function hb(t){var e=Dpe(t.slice(5,-1));return e===lu?"":e}var Lpe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],kpe=["dx","dy","angle","className","breakAll"];function Lw(){return Lw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lw.apply(this,arguments)}function RI(t,e){if(t==null)return{};var n=jpe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function OI(t,e){return Bpe(t)||Vpe(t,e)||Fpe(t,e)||Upe()}function Upe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fpe(t,e){if(t){if(typeof t=="string")return II(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return II(t,e)}}function II(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Vpe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Bpe(t){if(Array.isArray(t))return t}var iV=/[ \f\n\r\t\v\u2028\u2029]+/,oV=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var o=[];ft(n)||(r?o=n.toString().split(""):o=n.toString().split(iV));var a=o.map(function(l){return{word:l,width:sd(l,i).width}}),s=r?0:sd("",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}},$pe=function(e,n,r,i,o){var a=e.maxLines,s=e.children,l=e.style,c=e.breakAll,u=Ae(a),f=s,h=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce(function(q,$){var V=$.word,X=$.width,K=q[q.length-1];if(K&&(i==null||o||K.width+X+r<Number(i)))K.words.push(V),K.width+=X+r;else{var z={words:[V],width:X};q.push(z)}return q},[])},d=h(n),v=function(L){return L.reduce(function(q,$){return q.width>$.width?q:$})};if(!u)return d;for(var y="",g=function(L){var q=f.slice(0,L),$=oV({breakAll:c,style:l,children:q+y}).wordsWithComputedWidth,V=h($),X=V.length>a||v(V).width>Number(i);return[X,V]},p=0,x=f.length-1,_=0,E;p<=x&&_<=f.length-1;){var b=Math.floor((p+x)/2),M=b-1,S=g(M),A=OI(S,2),T=A[0],P=A[1],R=g(b),N=OI(R,1),I=N[0];if(!T&&!I&&(p=b+1),T&&I&&(x=b-1),!T&&I){E=P;break}_++}return E||d},NI=function(e){var n=ft(e)?[]:e.toString().split(iV);return[{words:n}]},zpe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,o=e.style,a=e.breakAll,s=e.maxLines;if((n||r)&&!ao.isSsr){var l,c,u=oV({breakAll:a,children:i,style:o});if(u){var f=u.wordsWithComputedWidth,h=u.spaceWidth;l=f,c=h}else return NI(i);return $pe({breakAll:a,children:i,maxLines:s,style:o},l,c,n,r)}return NI(i)},DI="#808080",Bl=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.lineHeight,s=a===void 0?"1em":a,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,f=u===void 0?!1:u,h=e.textAnchor,d=h===void 0?"start":h,v=e.verticalAnchor,y=v===void 0?"end":v,g=e.fill,p=g===void 0?DI:g,x=RI(e,Lpe),_=B.useMemo(function(){return zpe({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:f,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,f,x.style,x.width]),E=x.dx,b=x.dy,M=x.angle,S=x.className,A=x.breakAll,T=RI(x,kpe);if(!Vn(r)||!Vn(o))return null;var P=r+(Ae(E)?E:0),R=o+(Ae(b)?b:0),N;switch(y){case"start":N=hb("calc(".concat(c,")"));break;case"middle":N=hb("calc(".concat((_.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:N=hb("calc(".concat(_.length-1," * -").concat(s,")"));break}var I=[];if(f){var D=_[0].width,L=x.width;I.push("scale(".concat((Ae(L)?L/D:1)/D,")"))}return M&&I.push("rotate(".concat(M,", ").concat(P,", ").concat(R,")")),I.length&&(T.transform=I.join(" ")),G.createElement("text",Lw({},Ke(T,!0),{x:P,y:R,className:_t("recharts-text",S),textAnchor:d,fill:p.includes("url")?DI:p}),_.map(function(q,$){var V=q.words.join(A?"":" ");return G.createElement("tspan",{x:P,dy:$===0?N:s,key:"".concat(V,"-").concat($)},V)}))};function ps(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Hpe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gA(t){let e,n,r;t.length!==2?(e=ps,n=(s,l)=>ps(t(s),l),r=(s,l)=>t(s)-l):(e=t===ps||t===Hpe?t:Gpe,n=t,r=t);function i(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(s[f],l)<0?c=f+1:u=f}while(c<u)}return c}function o(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(s[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function a(s,l,c=0,u=s.length){const f=i(s,l,c,u-1);return f>c&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:a,right:o}}function Gpe(){return 0}function aV(t){return t===null?NaN:+t}function*Wpe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const qpe=gA(ps),Kp=qpe.right;gA(aV).center;class LI extends Map{constructor(e,n=Ype){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(kI(this,e))}has(e){return super.has(kI(this,e))}set(e,n){return super.set(Xpe(this,e),n)}delete(e){return super.delete(Kpe(this,e))}}function kI({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Xpe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Kpe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Ype(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Qpe(t=ps){if(t===ps)return sV;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function sV(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Zpe=Math.sqrt(50),Jpe=Math.sqrt(10),eme=Math.sqrt(2);function Qv(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Zpe?10:o>=Jpe?5:o>=eme?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/a,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?Qv(t,e,n*2):[s,l,c]}function kw(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?Qv(e,t,n):Qv(t,e,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let c=0;c<s;++c)l[c]=(o-c)/-a;else for(let c=0;c<s;++c)l[c]=(o-c)*a;else if(a<0)for(let c=0;c<s;++c)l[c]=(i+c)/-a;else for(let c=0;c<s;++c)l[c]=(i+c)*a;return l}function jw(t,e,n){return e=+e,t=+t,n=+n,Qv(t,e,n)[2]}function Uw(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?jw(e,t,n):jw(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function jI(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function UI(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function lV(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?sV:Qpe(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),d=Math.max(n,Math.floor(e-c*f/l+h)),v=Math.min(r,Math.floor(e+(l-c)*f/l+h));lV(t,e,d,v,i)}const o=t[e];let a=n,s=r;for(Eh(t,n,e),i(t[r],o)>0&&Eh(t,n,r);a<s;){for(Eh(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}i(t[n],o)===0?Eh(t,n,s):(++s,Eh(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Eh(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function tme(t,e,n){if(t=Float64Array.from(Wpe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return UI(t);if(e>=1)return jI(t);var r,i=(r-1)*e,o=Math.floor(i),a=jI(lV(t,o).subarray(0,o+1)),s=UI(t.subarray(o+1));return a+(s-a)*(i-o)}}function nme(t,e,n=aV){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}}function rme(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Vi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ra(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Fw=Symbol("implicit");function vA(){var t=new LI,e=[],n=[],r=Fw;function i(o){let a=t.get(o);if(a===void 0){if(r!==Fw)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new LI;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return vA(e,n).unknown(r)},Vi.apply(i,arguments),i}function Zd(){var t=vA().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,s=!1,l=0,c=0,u=.5;delete t.unknown;function f(){var h=e().length,d=i<r,v=d?i:r,y=d?r:i;o=(y-v)/Math.max(1,h-l+c*2),s&&(o=Math.floor(o)),v+=(y-v-o*(h-l))*u,a=o*(1-l),s&&(v=Math.round(v),a=Math.round(a));var g=rme(h).map(function(p){return v+o*p});return n(d?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,f()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(h){return arguments.length?(s=!!h,f()):s},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),f()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},t.copy=function(){return Zd(e(),[r,i]).round(s).paddingInner(l).paddingOuter(c).align(u)},Vi.apply(f(),arguments)}function cV(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return cV(e())},t}function ld(){return cV(Zd.apply(null,arguments).paddingInner(1))}function yA(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function uV(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Yp(){}var Jd=.7,Zv=1/Jd,Su="\\s*([+-]?\\d+)\\s*",ep="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ao="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ime=/^#([0-9a-f]{3,8})$/,ome=new RegExp(`^rgb\\(${Su},${Su},${Su}\\)$`),ame=new RegExp(`^rgb\\(${Ao},${Ao},${Ao}\\)$`),sme=new RegExp(`^rgba\\(${Su},${Su},${Su},${ep}\\)$`),lme=new RegExp(`^rgba\\(${Ao},${Ao},${Ao},${ep}\\)$`),cme=new RegExp(`^hsl\\(${ep},${Ao},${Ao}\\)$`),ume=new RegExp(`^hsla\\(${ep},${Ao},${Ao},${ep}\\)$`),FI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yA(Yp,tp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:VI,formatHex:VI,formatHex8:fme,formatHsl:hme,formatRgb:BI,toString:BI});function VI(){return this.rgb().formatHex()}function fme(){return this.rgb().formatHex8()}function hme(){return fV(this).formatHsl()}function BI(){return this.rgb().formatRgb()}function tp(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ime.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?$I(e):n===3?new qr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?pg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?pg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ome.exec(t))?new qr(e[1],e[2],e[3],1):(e=ame.exec(t))?new qr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=sme.exec(t))?pg(e[1],e[2],e[3],e[4]):(e=lme.exec(t))?pg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=cme.exec(t))?GI(e[1],e[2]/100,e[3]/100,1):(e=ume.exec(t))?GI(e[1],e[2]/100,e[3]/100,e[4]):FI.hasOwnProperty(t)?$I(FI[t]):t==="transparent"?new qr(NaN,NaN,NaN,0):null}function $I(t){return new qr(t>>16&255,t>>8&255,t&255,1)}function pg(t,e,n,r){return r<=0&&(t=e=n=NaN),new qr(t,e,n,r)}function dme(t){return t instanceof Yp||(t=tp(t)),t?(t=t.rgb(),new qr(t.r,t.g,t.b,t.opacity)):new qr}function Vw(t,e,n,r){return arguments.length===1?dme(t):new qr(t,e,n,r??1)}function qr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}yA(qr,Vw,uV(Yp,{brighter(t){return t=t==null?Zv:Math.pow(Zv,t),new qr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Jd:Math.pow(Jd,t),new qr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new qr(Cl(this.r),Cl(this.g),Cl(this.b),Jv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zI,formatHex:zI,formatHex8:pme,formatRgb:HI,toString:HI}));function zI(){return`#${yl(this.r)}${yl(this.g)}${yl(this.b)}`}function pme(){return`#${yl(this.r)}${yl(this.g)}${yl(this.b)}${yl((isNaN(this.opacity)?1:this.opacity)*255)}`}function HI(){const t=Jv(this.opacity);return`${t===1?"rgb(":"rgba("}${Cl(this.r)}, ${Cl(this.g)}, ${Cl(this.b)}${t===1?")":`, ${t})`}`}function Jv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Cl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function yl(t){return t=Cl(t),(t<16?"0":"")+t.toString(16)}function GI(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new to(t,e,n,r)}function fV(t){if(t instanceof to)return new to(t.h,t.s,t.l,t.opacity);if(t instanceof Yp||(t=tp(t)),!t)return new to;if(t instanceof to)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new to(a,s,l,t.opacity)}function mme(t,e,n,r){return arguments.length===1?fV(t):new to(t,e,n,r??1)}function to(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}yA(to,mme,uV(Yp,{brighter(t){return t=t==null?Zv:Math.pow(Zv,t),new to(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Jd:Math.pow(Jd,t),new to(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new qr(db(t>=240?t-240:t+120,i,r),db(t,i,r),db(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new to(WI(this.h),mg(this.s),mg(this.l),Jv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Jv(this.opacity);return`${t===1?"hsl(":"hsla("}${WI(this.h)}, ${mg(this.s)*100}%, ${mg(this.l)*100}%${t===1?")":`, ${t})`}`}}));function WI(t){return t=(t||0)%360,t<0?t+360:t}function mg(t){return Math.max(0,Math.min(1,t||0))}function db(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const _A=t=>()=>t;function gme(t,e){return function(n){return t+n*e}}function vme(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function yme(t){return(t=+t)==1?hV:function(e,n){return n-e?vme(e,n,t):_A(isNaN(e)?n:e)}}function hV(t,e){var n=e-t;return n?gme(t,n):_A(isNaN(t)?e:t)}const qI=function t(e){var n=yme(e);function r(i,o){var a=n((i=Vw(i)).r,(o=Vw(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),c=hV(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function _me(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function xme(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function bme(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Vf(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function wme(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ey(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Sme(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Vf(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Bw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pb=new RegExp(Bw.source,"g");function Eme(t){return function(){return t}}function Tme(t){return function(e){return t(e)+""}}function Ame(t,e){var n=Bw.lastIndex=pb.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(t=t+"",e=e+"";(r=Bw.exec(t))&&(i=pb.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:ey(r,i)})),n=pb.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?Tme(l[0].x):Eme(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)s[(f=l[u]).i]=f.x(c);return s.join("")})}function Vf(t,e){var n=typeof e,r;return e==null||n==="boolean"?_A(e):(n==="number"?ey:n==="string"?(r=tp(e))?(e=r,qI):Ame:e instanceof tp?qI:e instanceof Date?wme:xme(e)?_me:Array.isArray(e)?bme:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Sme:ey)(t,e)}function xA(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Mme(t,e){e===void 0&&(e=t,t=Vf);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function Pme(t){return function(){return t}}function ty(t){return+t}var XI=[0,1];function Ur(t){return t}function $w(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Pme(isNaN(e)?NaN:.5)}function Cme(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Rme(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=$w(i,r),o=n(a,o)):(r=$w(r,i),o=n(o,a)),function(s){return o(r(s))}}function Ome(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=$w(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var l=Kp(t,s,1,r)-1;return o[l](i[l](s))}}function Qp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function K0(){var t=XI,e=XI,n=Vf,r,i,o,a=Ur,s,l,c;function u(){var h=Math.min(t.length,e.length);return a!==Ur&&(a=Cme(t[0],t[h-1])),s=h>2?Ome:Rme,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?o:(l||(l=s(t.map(r),e,n)))(r(a(h)))}return f.invert=function(h){return a(i((c||(c=s(e,t.map(r),ey)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,ty),u()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=xA,u()},f.clamp=function(h){return arguments.length?(a=h?!0:Ur,u()):a!==Ur},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,d){return r=h,i=d,u()}}function bA(){return K0()(Ur,Ur)}function Ime(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ny(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Xu(t){return t=ny(Math.abs(t)),t?t[1]:NaN}function Nme(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function Dme(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Lme=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function np(t){if(!(e=Lme.exec(t)))throw new Error("invalid format: "+t);var e;return new wA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}np.prototype=wA.prototype;function wA(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}wA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kme(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var dV;function jme(t,e){var n=ny(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(dV=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ny(t,Math.max(0,e+o-1))[0]}function KI(t,e){var n=ny(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const YI={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ime,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>KI(t*100,e),r:KI,s:jme,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function QI(t){return t}var ZI=Array.prototype.map,JI=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ume(t){var e=t.grouping===void 0||t.thousands===void 0?QI:Nme(ZI.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?QI:Dme(ZI.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=np(f);var h=f.fill,d=f.align,v=f.sign,y=f.symbol,g=f.zero,p=f.width,x=f.comma,_=f.precision,E=f.trim,b=f.type;b==="n"?(x=!0,b="g"):YI[b]||(_===void 0&&(_=12),E=!0,b="g"),(g||h==="0"&&d==="=")&&(g=!0,h="0",d="=");var M=y==="$"?n:y==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",S=y==="$"?r:/[%p]/.test(b)?a:"",A=YI[b],T=/[defgprs%]/.test(b);_=_===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function P(R){var N=M,I=S,D,L,q;if(b==="c")I=A(R)+I,R="";else{R=+R;var $=R<0||1/R<0;if(R=isNaN(R)?l:A(Math.abs(R),_),E&&(R=kme(R)),$&&+R==0&&v!=="+"&&($=!1),N=($?v==="("?v:s:v==="-"||v==="("?"":v)+N,I=(b==="s"?JI[8+dV/3]:"")+I+($&&v==="("?")":""),T){for(D=-1,L=R.length;++D<L;)if(q=R.charCodeAt(D),48>q||q>57){I=(q===46?i+R.slice(D+1):R.slice(D))+I,R=R.slice(0,D);break}}}x&&!g&&(R=e(R,1/0));var V=N.length+R.length+I.length,X=V<p?new Array(p-V+1).join(h):"";switch(x&&g&&(R=e(X+R,X.length?p-I.length:1/0),X=""),d){case"<":R=N+R+I+X;break;case"=":R=N+X+R+I;break;case"^":R=X.slice(0,V=X.length>>1)+N+R+I+X.slice(V);break;default:R=X+N+R+I;break}return o(R)}return P.toString=function(){return f+""},P}function u(f,h){var d=c((f=np(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(Xu(h)/3)))*3,y=Math.pow(10,-v),g=JI[8+v/3];return function(p){return d(y*p)+g}}return{format:c,formatPrefix:u}}var gg,SA,pV;Fme({thousands:",",grouping:[3],currency:["$",""]});function Fme(t){return gg=Ume(t),SA=gg.format,pV=gg.formatPrefix,gg}function Vme(t){return Math.max(0,-Xu(Math.abs(t)))}function Bme(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Xu(e)/3)))*3-Xu(Math.abs(t)))}function $me(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Xu(e)-Xu(t))+1}function mV(t,e,n,r){var i=Uw(t,e,n),o;switch(r=np(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Bme(i,a))&&(r.precision=o),pV(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=$me(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Vme(i))&&(r.precision=o-(r.type==="%")*2);break}}return SA(r)}function ks(t){var e=t.domain;return t.ticks=function(n){var r=e();return kw(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return mV(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],l,c,u=10;for(s<a&&(c=a,a=s,s=c,c=i,i=o,o=c);u-- >0;){if(c=jw(a,s,n),c===l)return r[i]=a,r[o]=s,e(r);if(c>0)a=Math.floor(a/c)*c,s=Math.ceil(s/c)*c;else if(c<0)a=Math.ceil(a*c)/c,s=Math.floor(s*c)/c;else break;l=c}return t},t}function ry(){var t=bA();return t.copy=function(){return Qp(t,ry())},Vi.apply(t,arguments),ks(t)}function gV(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,ty),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return gV(t).unknown(e)},t=arguments.length?Array.from(t,ty):[0,1],ks(n)}function vV(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function eN(t){return Math.log(t)}function tN(t){return Math.exp(t)}function zme(t){return-Math.log(-t)}function Hme(t){return-Math.exp(-t)}function Gme(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Wme(t){return t===10?Gme:t===Math.E?Math.exp:e=>Math.pow(t,e)}function qme(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function nN(t){return(e,n)=>-t(-e,n)}function EA(t){const e=t(eN,tN),n=e.domain;let r=10,i,o;function a(){return i=qme(r),o=Wme(r),n()[0]<0?(i=nN(i),o=nN(o),t(zme,Hme)):t(eN,tN),e}return e.base=function(s){return arguments.length?(r=+s,a()):r},e.domain=function(s){return arguments.length?(n(s),a()):n()},e.ticks=s=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=i(c),d=i(u),v,y;const g=s==null?10:+s;let p=[];if(!(r%1)&&d-h<g){if(h=Math.floor(h),d=Math.ceil(d),c>0){for(;h<=d;++h)for(v=1;v<r;++v)if(y=h<0?v/o(-h):v*o(h),!(y<c)){if(y>u)break;p.push(y)}}else for(;h<=d;++h)for(v=r-1;v>=1;--v)if(y=h>0?v/o(-h):v*o(h),!(y<c)){if(y>u)break;p.push(y)}p.length*2<g&&(p=kw(c,u,g))}else p=kw(h,d,Math.min(d-h,g)).map(o);return f?p.reverse():p},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=np(l)).precision==null&&(l.trim=!0),l=SA(l)),s===1/0)return l;const c=Math.max(1,r*s/e.ticks().length);return u=>{let f=u/o(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},e.nice=()=>n(vV(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),e}function yV(){const t=EA(K0()).domain([1,10]);return t.copy=()=>Qp(t,yV()).base(t.base()),Vi.apply(t,arguments),t}function rN(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function iN(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function TA(t){var e=1,n=t(rN(e),iN(e));return n.constant=function(r){return arguments.length?t(rN(e=+r),iN(e)):e},ks(n)}function _V(){var t=TA(K0());return t.copy=function(){return Qp(t,_V()).constant(t.constant())},Vi.apply(t,arguments)}function oN(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Xme(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Kme(t){return t<0?-t*t:t*t}function AA(t){var e=t(Ur,Ur),n=1;function r(){return n===1?t(Ur,Ur):n===.5?t(Xme,Kme):t(oN(n),oN(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},ks(e)}function MA(){var t=AA(K0());return t.copy=function(){return Qp(t,MA()).exponent(t.exponent())},Vi.apply(t,arguments),t}function Yme(){return MA.apply(null,arguments).exponent(.5)}function aN(t){return Math.sign(t)*t*t}function Qme(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function xV(){var t=bA(),e=[0,1],n=!1,r;function i(o){var a=Qme(t(o));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(o){return t.invert(aN(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,ty)).map(aN)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return xV(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Vi.apply(i,arguments),ks(i)}function bV(){var t=[],e=[],n=[],r;function i(){var a=0,s=Math.max(1,e.length);for(n=new Array(s-1);++a<s;)n[a-1]=nme(t,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:e[Kp(n,a)]}return o.invertExtent=function(a){var s=e.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let s of a)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(ps),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return bV().domain(t).range(e).unknown(r)},Vi.apply(o,arguments)}function wV(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function a(l){return l!=null&&l<=l?i[Kp(r,l,0,n)]:o}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,s()):[t,e]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(o=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return wV().domain([t,e]).range(i).unknown(o)},Vi.apply(ks(a),arguments)}function SV(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[Kp(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return SV().domain(t).range(e).unknown(n)},Vi.apply(i,arguments)}const mb=new Date,gb=new Date;function Gn(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const l=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;let c;do l.push(c=new Date(+o)),e(o,s),t(o);while(c<o&&o<a);return l},i.filter=o=>Gn(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(mb.setTime(+o),gb.setTime(+a),t(mb),t(gb),Math.floor(n(mb,gb))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const iy=Gn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);iy.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Gn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):iy);iy.range;const na=1e3,Ii=na*60,ra=Ii*60,xa=ra*24,PA=xa*7,sN=xa*30,vb=xa*365,_l=Gn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*na)},(t,e)=>(e-t)/na,t=>t.getUTCSeconds());_l.range;const CA=Gn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*na)},(t,e)=>{t.setTime(+t+e*Ii)},(t,e)=>(e-t)/Ii,t=>t.getMinutes());CA.range;const RA=Gn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ii)},(t,e)=>(e-t)/Ii,t=>t.getUTCMinutes());RA.range;const OA=Gn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*na-t.getMinutes()*Ii)},(t,e)=>{t.setTime(+t+e*ra)},(t,e)=>(e-t)/ra,t=>t.getHours());OA.range;const IA=Gn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ra)},(t,e)=>(e-t)/ra,t=>t.getUTCHours());IA.range;const Zp=Gn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ii)/xa,t=>t.getDate()-1);Zp.range;const Y0=Gn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xa,t=>t.getUTCDate()-1);Y0.range;const EV=Gn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xa,t=>Math.floor(t/xa));EV.range;function Jl(t){return Gn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ii)/PA)}const Q0=Jl(0),oy=Jl(1),Zme=Jl(2),Jme=Jl(3),Ku=Jl(4),ege=Jl(5),tge=Jl(6);Q0.range;oy.range;Zme.range;Jme.range;Ku.range;ege.range;tge.range;function ec(t){return Gn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/PA)}const Z0=ec(0),ay=ec(1),nge=ec(2),rge=ec(3),Yu=ec(4),ige=ec(5),oge=ec(6);Z0.range;ay.range;nge.range;rge.range;Yu.range;ige.range;oge.range;const NA=Gn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());NA.range;const DA=Gn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());DA.range;const ba=Gn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ba.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Gn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ba.range;const wa=Gn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());wa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Gn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});wa.range;function TV(t,e,n,r,i,o){const a=[[_l,1,na],[_l,5,5*na],[_l,15,15*na],[_l,30,30*na],[o,1,Ii],[o,5,5*Ii],[o,15,15*Ii],[o,30,30*Ii],[i,1,ra],[i,3,3*ra],[i,6,6*ra],[i,12,12*ra],[r,1,xa],[r,2,2*xa],[n,1,PA],[e,1,sN],[e,3,3*sN],[t,1,vb]];function s(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const d=f&&typeof f.range=="function"?f:l(c,u,f),v=d?d.range(c,+u+1):[];return h?v.reverse():v}function l(c,u,f){const h=Math.abs(u-c)/f,d=gA(([,,g])=>g).right(a,h);if(d===a.length)return t.every(Uw(c/vb,u/vb,f));if(d===0)return iy.every(Math.max(Uw(c,u,f),1));const[v,y]=a[h/a[d-1][2]<a[d][2]/h?d-1:d];return v.every(y)}return[s,l]}const[age,sge]=TV(wa,DA,Z0,EV,IA,RA),[lge,cge]=TV(ba,NA,Q0,Zp,OA,CA);function yb(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function _b(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Th(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function uge(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,c=Ah(i),u=Mh(i),f=Ah(o),h=Mh(o),d=Ah(a),v=Mh(a),y=Ah(s),g=Mh(s),p=Ah(l),x=Mh(l),_={a:$,A:V,b:X,B:K,c:null,d:dN,e:dN,f:Nge,g:zge,G:Gge,H:Rge,I:Oge,j:Ige,L:AV,m:Dge,M:Lge,p:z,q:W,Q:gN,s:vN,S:kge,u:jge,U:Uge,V:Fge,w:Vge,W:Bge,x:null,X:null,y:$ge,Y:Hge,Z:Wge,"%":mN},E={a:ee,A:me,b:_e,B:Ne,c:null,d:pN,e:pN,f:Yge,g:ave,G:lve,H:qge,I:Xge,j:Kge,L:PV,m:Qge,M:Zge,p:We,q:Ue,Q:gN,s:vN,S:Jge,u:eve,U:tve,V:nve,w:rve,W:ive,x:null,X:null,y:ove,Y:sve,Z:cve,"%":mN},b={a:P,A:R,b:N,B:I,c:D,d:fN,e:fN,f:Age,g:uN,G:cN,H:hN,I:hN,j:wge,L:Tge,m:bge,M:Sge,p:T,q:xge,Q:Pge,s:Cge,S:Ege,u:mge,U:gge,V:vge,w:pge,W:yge,x:L,X:q,y:uN,Y:cN,Z:_ge,"%":Mge};_.x=M(n,_),_.X=M(r,_),_.c=M(e,_),E.x=M(n,E),E.X=M(r,E),E.c=M(e,E);function M(fe,Re){return function(Ee){var H=[],lt=-1,be=0,Le=fe.length,ke,mt,Ye;for(Ee instanceof Date||(Ee=new Date(+Ee));++lt<Le;)fe.charCodeAt(lt)===37&&(H.push(fe.slice(be,lt)),(mt=lN[ke=fe.charAt(++lt)])!=null?ke=fe.charAt(++lt):mt=ke==="e"?" ":"0",(Ye=Re[ke])&&(ke=Ye(Ee,mt)),H.push(ke),be=lt+1);return H.push(fe.slice(be,lt)),H.join("")}}function S(fe,Re){return function(Ee){var H=Th(1900,void 0,1),lt=A(H,fe,Ee+="",0),be,Le;if(lt!=Ee.length)return null;if("Q"in H)return new Date(H.Q);if("s"in H)return new Date(H.s*1e3+("L"in H?H.L:0));if(Re&&!("Z"in H)&&(H.Z=0),"p"in H&&(H.H=H.H%12+H.p*12),H.m===void 0&&(H.m="q"in H?H.q:0),"V"in H){if(H.V<1||H.V>53)return null;"w"in H||(H.w=1),"Z"in H?(be=_b(Th(H.y,0,1)),Le=be.getUTCDay(),be=Le>4||Le===0?ay.ceil(be):ay(be),be=Y0.offset(be,(H.V-1)*7),H.y=be.getUTCFullYear(),H.m=be.getUTCMonth(),H.d=be.getUTCDate()+(H.w+6)%7):(be=yb(Th(H.y,0,1)),Le=be.getDay(),be=Le>4||Le===0?oy.ceil(be):oy(be),be=Zp.offset(be,(H.V-1)*7),H.y=be.getFullYear(),H.m=be.getMonth(),H.d=be.getDate()+(H.w+6)%7)}else("W"in H||"U"in H)&&("w"in H||(H.w="u"in H?H.u%7:"W"in H?1:0),Le="Z"in H?_b(Th(H.y,0,1)).getUTCDay():yb(Th(H.y,0,1)).getDay(),H.m=0,H.d="W"in H?(H.w+6)%7+H.W*7-(Le+5)%7:H.w+H.U*7-(Le+6)%7);return"Z"in H?(H.H+=H.Z/100|0,H.M+=H.Z%100,_b(H)):yb(H)}}function A(fe,Re,Ee,H){for(var lt=0,be=Re.length,Le=Ee.length,ke,mt;lt<be;){if(H>=Le)return-1;if(ke=Re.charCodeAt(lt++),ke===37){if(ke=Re.charAt(lt++),mt=b[ke in lN?Re.charAt(lt++):ke],!mt||(H=mt(fe,Ee,H))<0)return-1}else if(ke!=Ee.charCodeAt(H++))return-1}return H}function T(fe,Re,Ee){var H=c.exec(Re.slice(Ee));return H?(fe.p=u.get(H[0].toLowerCase()),Ee+H[0].length):-1}function P(fe,Re,Ee){var H=d.exec(Re.slice(Ee));return H?(fe.w=v.get(H[0].toLowerCase()),Ee+H[0].length):-1}function R(fe,Re,Ee){var H=f.exec(Re.slice(Ee));return H?(fe.w=h.get(H[0].toLowerCase()),Ee+H[0].length):-1}function N(fe,Re,Ee){var H=p.exec(Re.slice(Ee));return H?(fe.m=x.get(H[0].toLowerCase()),Ee+H[0].length):-1}function I(fe,Re,Ee){var H=y.exec(Re.slice(Ee));return H?(fe.m=g.get(H[0].toLowerCase()),Ee+H[0].length):-1}function D(fe,Re,Ee){return A(fe,e,Re,Ee)}function L(fe,Re,Ee){return A(fe,n,Re,Ee)}function q(fe,Re,Ee){return A(fe,r,Re,Ee)}function $(fe){return a[fe.getDay()]}function V(fe){return o[fe.getDay()]}function X(fe){return l[fe.getMonth()]}function K(fe){return s[fe.getMonth()]}function z(fe){return i[+(fe.getHours()>=12)]}function W(fe){return 1+~~(fe.getMonth()/3)}function ee(fe){return a[fe.getUTCDay()]}function me(fe){return o[fe.getUTCDay()]}function _e(fe){return l[fe.getUTCMonth()]}function Ne(fe){return s[fe.getUTCMonth()]}function We(fe){return i[+(fe.getUTCHours()>=12)]}function Ue(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var Re=M(fe+="",_);return Re.toString=function(){return fe},Re},parse:function(fe){var Re=S(fe+="",!1);return Re.toString=function(){return fe},Re},utcFormat:function(fe){var Re=M(fe+="",E);return Re.toString=function(){return fe},Re},utcParse:function(fe){var Re=S(fe+="",!0);return Re.toString=function(){return fe},Re}}}var lN={"-":"",_:" ",0:"0"},er=/^\s*\d+/,fge=/^%/,hge=/[\\^$*+?|[\]().{}]/g;function Lt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function dge(t){return t.replace(hge,"\\$&")}function Ah(t){return new RegExp("^(?:"+t.map(dge).join("|")+")","i")}function Mh(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function pge(t,e,n){var r=er.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function mge(t,e,n){var r=er.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function gge(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function vge(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function yge(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function cN(t,e,n){var r=er.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function uN(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _ge(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function xge(t,e,n){var r=er.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function bge(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function fN(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function wge(t,e,n){var r=er.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function hN(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Sge(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ege(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Tge(t,e,n){var r=er.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Age(t,e,n){var r=er.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Mge(t,e,n){var r=fge.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Pge(t,e,n){var r=er.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Cge(t,e,n){var r=er.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function dN(t,e){return Lt(t.getDate(),e,2)}function Rge(t,e){return Lt(t.getHours(),e,2)}function Oge(t,e){return Lt(t.getHours()%12||12,e,2)}function Ige(t,e){return Lt(1+Zp.count(ba(t),t),e,3)}function AV(t,e){return Lt(t.getMilliseconds(),e,3)}function Nge(t,e){return AV(t,e)+"000"}function Dge(t,e){return Lt(t.getMonth()+1,e,2)}function Lge(t,e){return Lt(t.getMinutes(),e,2)}function kge(t,e){return Lt(t.getSeconds(),e,2)}function jge(t){var e=t.getDay();return e===0?7:e}function Uge(t,e){return Lt(Q0.count(ba(t)-1,t),e,2)}function MV(t){var e=t.getDay();return e>=4||e===0?Ku(t):Ku.ceil(t)}function Fge(t,e){return t=MV(t),Lt(Ku.count(ba(t),t)+(ba(t).getDay()===4),e,2)}function Vge(t){return t.getDay()}function Bge(t,e){return Lt(oy.count(ba(t)-1,t),e,2)}function $ge(t,e){return Lt(t.getFullYear()%100,e,2)}function zge(t,e){return t=MV(t),Lt(t.getFullYear()%100,e,2)}function Hge(t,e){return Lt(t.getFullYear()%1e4,e,4)}function Gge(t,e){var n=t.getDay();return t=n>=4||n===0?Ku(t):Ku.ceil(t),Lt(t.getFullYear()%1e4,e,4)}function Wge(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Lt(e/60|0,"0",2)+Lt(e%60,"0",2)}function pN(t,e){return Lt(t.getUTCDate(),e,2)}function qge(t,e){return Lt(t.getUTCHours(),e,2)}function Xge(t,e){return Lt(t.getUTCHours()%12||12,e,2)}function Kge(t,e){return Lt(1+Y0.count(wa(t),t),e,3)}function PV(t,e){return Lt(t.getUTCMilliseconds(),e,3)}function Yge(t,e){return PV(t,e)+"000"}function Qge(t,e){return Lt(t.getUTCMonth()+1,e,2)}function Zge(t,e){return Lt(t.getUTCMinutes(),e,2)}function Jge(t,e){return Lt(t.getUTCSeconds(),e,2)}function eve(t){var e=t.getUTCDay();return e===0?7:e}function tve(t,e){return Lt(Z0.count(wa(t)-1,t),e,2)}function CV(t){var e=t.getUTCDay();return e>=4||e===0?Yu(t):Yu.ceil(t)}function nve(t,e){return t=CV(t),Lt(Yu.count(wa(t),t)+(wa(t).getUTCDay()===4),e,2)}function rve(t){return t.getUTCDay()}function ive(t,e){return Lt(ay.count(wa(t)-1,t),e,2)}function ove(t,e){return Lt(t.getUTCFullYear()%100,e,2)}function ave(t,e){return t=CV(t),Lt(t.getUTCFullYear()%100,e,2)}function sve(t,e){return Lt(t.getUTCFullYear()%1e4,e,4)}function lve(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Yu(t):Yu.ceil(t),Lt(t.getUTCFullYear()%1e4,e,4)}function cve(){return"+0000"}function mN(){return"%"}function gN(t){return+t}function vN(t){return Math.floor(+t/1e3)}var Ic,RV,OV;uve({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function uve(t){return Ic=uge(t),RV=Ic.format,Ic.parse,OV=Ic.utcFormat,Ic.utcParse,Ic}function fve(t){return new Date(t)}function hve(t){return t instanceof Date?+t:+new Date(+t)}function LA(t,e,n,r,i,o,a,s,l,c){var u=bA(),f=u.invert,h=u.domain,d=c(".%L"),v=c(":%S"),y=c("%I:%M"),g=c("%I %p"),p=c("%a %d"),x=c("%b %d"),_=c("%B"),E=c("%Y");function b(M){return(l(M)<M?d:s(M)<M?v:a(M)<M?y:o(M)<M?g:r(M)<M?i(M)<M?p:x:n(M)<M?_:E)(M)}return u.invert=function(M){return new Date(f(M))},u.domain=function(M){return arguments.length?h(Array.from(M,hve)):h().map(fve)},u.ticks=function(M){var S=h();return t(S[0],S[S.length-1],M??10)},u.tickFormat=function(M,S){return S==null?b:c(S)},u.nice=function(M){var S=h();return(!M||typeof M.range!="function")&&(M=e(S[0],S[S.length-1],M??10)),M?h(vV(S,M)):u},u.copy=function(){return Qp(u,LA(t,e,n,r,i,o,a,s,l,c))},u}function dve(){return Vi.apply(LA(lge,cge,ba,NA,Q0,Zp,OA,CA,_l,RV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function pve(){return Vi.apply(LA(age,sge,wa,DA,Z0,Y0,IA,RA,_l,OV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function J0(){var t=0,e=1,n,r,i,o,a=Ur,s=!1,l;function c(f){return f==null||isNaN(f=+f)?l:a(i===0?.5:(f=(o(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([t,e]=f,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(f){return arguments.length?(s=!!f,c):s},c.interpolator=function(f){return arguments.length?(a=f,c):a};function u(f){return function(h){var d,v;return arguments.length?([d,v]=h,a=f(d,v),c):[a(0),a(1)]}}return c.range=u(Vf),c.rangeRound=u(xA),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return o=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),c}}function js(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function IV(){var t=ks(J0()(Ur));return t.copy=function(){return js(t,IV())},Ra.apply(t,arguments)}function NV(){var t=EA(J0()).domain([1,10]);return t.copy=function(){return js(t,NV()).base(t.base())},Ra.apply(t,arguments)}function DV(){var t=TA(J0());return t.copy=function(){return js(t,DV()).constant(t.constant())},Ra.apply(t,arguments)}function kA(){var t=AA(J0());return t.copy=function(){return js(t,kA()).exponent(t.exponent())},Ra.apply(t,arguments)}function mve(){return kA.apply(null,arguments).exponent(.5)}function LV(){var t=[],e=Ur;function n(r){if(r!=null&&!isNaN(r=+r))return e((Kp(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ps),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>tme(t,o/r))},n.copy=function(){return LV(e).domain(t)},Ra.apply(n,arguments)}function e_(){var t=0,e=.5,n=1,r=1,i,o,a,s,l,c=Ur,u,f=!1,h;function d(y){return isNaN(y=+y)?h:(y=.5+((y=+u(y))-o)*(r*y<r*o?s:l),c(f?Math.max(0,Math.min(1,y)):y))}d.domain=function(y){return arguments.length?([t,e,n]=y,i=u(t=+t),o=u(e=+e),a=u(n=+n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,d):[t,e,n]},d.clamp=function(y){return arguments.length?(f=!!y,d):f},d.interpolator=function(y){return arguments.length?(c=y,d):c};function v(y){return function(g){var p,x,_;return arguments.length?([p,x,_]=g,c=Mme(y,[p,x,_]),d):[c(0),c(.5),c(1)]}}return d.range=v(Vf),d.rangeRound=v(xA),d.unknown=function(y){return arguments.length?(h=y,d):h},function(y){return u=y,i=y(t),o=y(e),a=y(n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,d}}function kV(){var t=ks(e_()(Ur));return t.copy=function(){return js(t,kV())},Ra.apply(t,arguments)}function jV(){var t=EA(e_()).domain([.1,1,10]);return t.copy=function(){return js(t,jV()).base(t.base())},Ra.apply(t,arguments)}function UV(){var t=TA(e_());return t.copy=function(){return js(t,UV()).constant(t.constant())},Ra.apply(t,arguments)}function jA(){var t=AA(e_());return t.copy=function(){return js(t,jA()).exponent(t.exponent())},Ra.apply(t,arguments)}function gve(){return jA.apply(null,arguments).exponent(.5)}const yN=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Zd,scaleDiverging:kV,scaleDivergingLog:jV,scaleDivergingPow:jA,scaleDivergingSqrt:gve,scaleDivergingSymlog:UV,scaleIdentity:gV,scaleImplicit:Fw,scaleLinear:ry,scaleLog:yV,scaleOrdinal:vA,scalePoint:ld,scalePow:MA,scaleQuantile:bV,scaleQuantize:wV,scaleRadial:xV,scaleSequential:IV,scaleSequentialLog:NV,scaleSequentialPow:kA,scaleSequentialQuantile:LV,scaleSequentialSqrt:mve,scaleSequentialSymlog:DV,scaleSqrt:Yme,scaleSymlog:_V,scaleThreshold:SV,scaleTime:dve,scaleUtc:pve,tickFormat:mV},Symbol.toStringTag,{value:"Module"}));var vve=Of;function yve(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(a!=null&&(s===void 0?a===a&&!vve(a):n(a,s)))var s=a,l=o}return l}var t_=yve;function _ve(t,e){return t>e}var FV=_ve,xve=t_,bve=FV,wve=Ff;function Sve(t){return t&&t.length?xve(t,wve,bve):void 0}var Eve=Sve;const es=Ft(Eve);function Tve(t,e){return t<e}var VV=Tve,Ave=t_,Mve=VV,Pve=Ff;function Cve(t){return t&&t.length?Ave(t,Pve,Mve):void 0}var Rve=Cve;const n_=Ft(Rve);var Ove=QT,Ive=jo,Nve=X4,Dve=Zr;function Lve(t,e){var n=Dve(t)?Ove:Nve;return n(t,Ive(e))}var kve=Lve,jve=W4,Uve=kve;function Fve(t,e){return jve(Uve(t,e),1)}var Vve=Fve;const Bve=Ft(Vve);var $ve=hA;function zve(t,e){return $ve(t,e)}var Hve=zve;const $l=Ft(Hve);var Bf=1e9,Gve={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},FA,cn=!0,Ui="[DecimalError] ",Rl=Ui+"Invalid argument: ",UA=Ui+"Exponent out of range: ",$f=Math.floor,al=Math.pow,Wve=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,li,Xn=1e7,rn=7,BV=9007199254740991,sy=$f(BV/rn),ze={};ze.absoluteValue=ze.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ze.comparedTo=ze.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};ze.decimalPlaces=ze.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*rn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};ze.dividedBy=ze.div=function(t){return ha(this,new this.constructor(t))};ze.dividedToIntegerBy=ze.idiv=function(t){var e=this,n=e.constructor;return qt(ha(e,new n(t),0,1),n.precision)};ze.equals=ze.eq=function(t){return!this.cmp(t)};ze.exponent=function(){return Nn(this)};ze.greaterThan=ze.gt=function(t){return this.cmp(t)>0};ze.greaterThanOrEqualTo=ze.gte=function(t){return this.cmp(t)>=0};ze.isInteger=ze.isint=function(){return this.e>this.d.length-2};ze.isNegative=ze.isneg=function(){return this.s<0};ze.isPositive=ze.ispos=function(){return this.s>0};ze.isZero=function(){return this.s===0};ze.lessThan=ze.lt=function(t){return this.cmp(t)<0};ze.lessThanOrEqualTo=ze.lte=function(t){return this.cmp(t)<1};ze.logarithm=ze.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(li))throw Error(Ui+"NaN");if(n.s<1)throw Error(Ui+(n.s?"NaN":"-Infinity"));return n.eq(li)?new r(0):(cn=!1,e=ha(rp(n,o),rp(t,o),o),cn=!0,qt(e,i))};ze.minus=ze.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?HV(e,t):$V(e,(t.s=-t.s,t))};ze.modulo=ze.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Ui+"NaN");return n.s?(cn=!1,e=ha(n,t,0,1).times(t),cn=!0,n.minus(e)):qt(new r(n),i)};ze.naturalExponential=ze.exp=function(){return zV(this)};ze.naturalLogarithm=ze.ln=function(){return rp(this)};ze.negated=ze.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ze.plus=ze.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?$V(e,t):HV(e,(t.s=-t.s,t))};ze.precision=ze.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Rl+t);if(e=Nn(i)+1,r=i.d.length-1,n=r*rn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};ze.squareRoot=ze.sqrt=function(){var t,e,n,r,i,o,a,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(Ui+"NaN")}for(t=Nn(s),cn=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=_o(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=$f((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=a=n+3;;)if(o=r,r=o.plus(ha(s,o,a+2)).times(.5),_o(o.d).slice(0,a)===(e=_o(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(qt(o,n+1,0),o.times(o).eq(s)){r=o;break}}else if(e!="9999")break;a+=4}return cn=!0,qt(r,n)};ze.times=ze.mul=function(t){var e,n,r,i,o,a,s,l,c,u=this,f=u.constructor,h=u.d,d=(t=new f(t)).d;if(!u.s||!t.s)return new f(0);for(t.s*=u.s,n=u.e+t.e,l=h.length,c=d.length,l<c&&(o=h,h=d,d=o,a=l,l=c,c=a),o=[],a=l+c,r=a;r--;)o.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)s=o[i]+d[r]*h[i-r-1]+e,o[i--]=s%Xn|0,e=s/Xn|0;o[i]=(o[i]+e)%Xn|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,cn?qt(t,f.precision):t};ze.toDecimalPlaces=ze.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Io(t,0,Bf),e===void 0?e=r.rounding:Io(e,0,8),qt(n,t+Nn(n)+1,e))};ze.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=zl(r,!0):(Io(t,0,Bf),e===void 0?e=i.rounding:Io(e,0,8),r=qt(new i(r),t+1,e),n=zl(r,!0,t+1)),n};ze.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?zl(i):(Io(t,0,Bf),e===void 0?e=o.rounding:Io(e,0,8),r=qt(new o(i),t+Nn(i)+1,e),n=zl(r.abs(),!1,t+Nn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};ze.toInteger=ze.toint=function(){var t=this,e=t.constructor;return qt(new e(t),Nn(t)+1,e.rounding)};ze.toNumber=function(){return+this};ze.toPower=ze.pow=function(t){var e,n,r,i,o,a,s=this,l=s.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(li);if(s=new l(s),!s.s){if(t.s<1)throw Error(Ui+"Infinity");return s}if(s.eq(li))return s;if(r=l.precision,t.eq(li))return qt(s,r);if(e=t.e,n=t.d.length-1,a=e>=n,o=s.s,a){if((n=u<0?-u:u)<=BV){for(i=new l(li),e=Math.ceil(r/rn+4),cn=!1;n%2&&(i=i.times(s),xN(i.d,e)),n=$f(n/2),n!==0;)s=s.times(s),xN(s.d,e);return cn=!0,t.s<0?new l(li).div(i):qt(i,r)}}else if(o<0)throw Error(Ui+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,s.s=1,cn=!1,i=t.times(rp(s,r+c)),cn=!0,i=zV(i),i.s=o,i};ze.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Nn(i),r=zl(i,n<=o.toExpNeg||n>=o.toExpPos)):(Io(t,1,Bf),e===void 0?e=o.rounding:Io(e,0,8),i=qt(new o(i),t,e),n=Nn(i),r=zl(i,t<=n||n<=o.toExpNeg,t)),r};ze.toSignificantDigits=ze.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Io(t,1,Bf),e===void 0?e=r.rounding:Io(e,0,8)),qt(new r(n),t,e)};ze.toString=ze.valueOf=ze.val=ze.toJSON=ze[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Nn(t),n=t.constructor;return zl(t,e<=n.toExpNeg||e>=n.toExpPos)};function $V(t,e){var n,r,i,o,a,s,l,c,u=t.constructor,f=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),cn?qt(e,f):e;if(l=t.d,c=e.d,a=t.e,i=e.e,l=l.slice(),o=a-i,o){for(o<0?(r=l,o=-o,s=c.length):(r=c,i=a,s=l.length),a=Math.ceil(f/rn),s=a>s?a+1:s+1,o>s&&(o=s,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(s=l.length,o=c.length,s-o<0&&(o=s,r=c,c=l,l=r),n=0;o;)n=(l[--o]=l[o]+c[o]+n)/Xn|0,l[o]%=Xn;for(n&&(l.unshift(n),++i),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=i,cn?qt(e,f):e}function Io(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Rl+t)}function _o(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",n=rn-r.length,n&&(o+=Wa(n)),o+=r;a=t[e],r=a+"",n=rn-r.length,n&&(o+=Wa(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var ha=function(){function t(r,i){var o,a=0,s=r.length;for(r=r.slice();s--;)o=r[s]*i+a,r[s]=o%Xn|0,a=o/Xn|0;return a&&r.unshift(a),r}function e(r,i,o,a){var s,l;if(o!=a)l=o>a?1:-1;else for(s=l=0;s<o;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function n(r,i,o){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*Xn+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,a){var s,l,c,u,f,h,d,v,y,g,p,x,_,E,b,M,S,A,T=r.constructor,P=r.s==i.s?1:-1,R=r.d,N=i.d;if(!r.s)return new T(r);if(!i.s)throw Error(Ui+"Division by zero");for(l=r.e-i.e,S=N.length,b=R.length,d=new T(P),v=d.d=[],c=0;N[c]==(R[c]||0);)++c;if(N[c]>(R[c]||0)&&--l,o==null?x=o=T.precision:a?x=o+(Nn(r)-Nn(i))+1:x=o,x<0)return new T(0);if(x=x/rn+2|0,c=0,S==1)for(u=0,N=N[0],x++;(c<b||u)&&x--;c++)_=u*Xn+(R[c]||0),v[c]=_/N|0,u=_%N|0;else{for(u=Xn/(N[0]+1)|0,u>1&&(N=t(N,u),R=t(R,u),S=N.length,b=R.length),E=S,y=R.slice(0,S),g=y.length;g<S;)y[g++]=0;A=N.slice(),A.unshift(0),M=N[0],N[1]>=Xn/2&&++M;do u=0,s=e(N,y,S,g),s<0?(p=y[0],S!=g&&(p=p*Xn+(y[1]||0)),u=p/M|0,u>1?(u>=Xn&&(u=Xn-1),f=t(N,u),h=f.length,g=y.length,s=e(f,y,h,g),s==1&&(u--,n(f,S<h?A:N,h))):(u==0&&(s=u=1),f=N.slice()),h=f.length,h<g&&f.unshift(0),n(y,f,g),s==-1&&(g=y.length,s=e(N,y,S,g),s<1&&(u++,n(y,S<g?A:N,g))),g=y.length):s===0&&(u++,y=[0]),v[c++]=u,s&&y[0]?y[g++]=R[E]||0:(y=[R[E]],g=1);while((E++<b||y[0]!==void 0)&&x--)}return v[0]||v.shift(),d.e=l,qt(d,a?o+Nn(d)+1:o)}}();function zV(t,e){var n,r,i,o,a,s,l=0,c=0,u=t.constructor,f=u.precision;if(Nn(t)>16)throw Error(UA+Nn(t));if(!t.s)return new u(li);for(e==null?(cn=!1,s=f):s=e,a=new u(.03125);t.abs().gte(.1);)t=t.times(a),c+=5;for(r=Math.log(al(2,c))/Math.LN10*2+5|0,s+=r,n=i=o=new u(li),u.precision=s;;){if(i=qt(i.times(t),s),n=n.times(++l),a=o.plus(ha(i,n,s)),_o(a.d).slice(0,s)===_o(o.d).slice(0,s)){for(;c--;)o=qt(o.times(o),s);return u.precision=f,e==null?(cn=!0,qt(o,f)):o}o=a}}function Nn(t){for(var e=t.e*rn,n=t.d[0];n>=10;n/=10)e++;return e}function xb(t,e,n){if(e>t.LN10.sd())throw cn=!0,n&&(t.precision=n),Error(Ui+"LN10 precision limit exceeded");return qt(new t(t.LN10),e)}function Wa(t){for(var e="";t--;)e+="0";return e}function rp(t,e){var n,r,i,o,a,s,l,c,u,f=1,h=10,d=t,v=d.d,y=d.constructor,g=y.precision;if(d.s<1)throw Error(Ui+(d.s?"NaN":"-Infinity"));if(d.eq(li))return new y(0);if(e==null?(cn=!1,c=g):c=e,d.eq(10))return e==null&&(cn=!0),xb(y,c);if(c+=h,y.precision=c,n=_o(v),r=n.charAt(0),o=Nn(d),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)d=d.times(t),n=_o(d.d),r=n.charAt(0),f++;o=Nn(d),r>1?(d=new y("0."+n),o++):d=new y(r+"."+n.slice(1))}else return l=xb(y,c+2,g).times(o+""),d=rp(new y(r+"."+n.slice(1)),c-h).plus(l),y.precision=g,e==null?(cn=!0,qt(d,g)):d;for(s=a=d=ha(d.minus(li),d.plus(li),c),u=qt(d.times(d),c),i=3;;){if(a=qt(a.times(u),c),l=s.plus(ha(a,new y(i),c)),_o(l.d).slice(0,c)===_o(s.d).slice(0,c))return s=s.times(2),o!==0&&(s=s.plus(xb(y,c+2,g).times(o+""))),s=ha(s,new y(f),c),y.precision=g,e==null?(cn=!0,qt(s,g)):s;s=l,i+=2}}function _N(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=$f(n/rn),t.d=[],r=(n+1)%rn,n<0&&(r+=rn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=rn;r<i;)t.d.push(+e.slice(r,r+=rn));e=e.slice(r),r=rn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),cn&&(t.e>sy||t.e<-sy))throw Error(UA+n)}else t.s=0,t.e=0,t.d=[0];return t}function qt(t,e,n){var r,i,o,a,s,l,c,u,f=t.d;for(a=1,o=f[0];o>=10;o/=10)a++;if(r=e-a,r<0)r+=rn,i=e,c=f[u=0];else{if(u=Math.ceil((r+1)/rn),o=f.length,u>=o)return t;for(c=o=f[u],a=1;o>=10;o/=10)a++;r%=rn,i=r-rn+a}if(n!==void 0&&(o=al(10,a-i-1),s=c/o%10|0,l=e<0||f[u+1]!==void 0||c%o,l=n<4?(s||l)&&(n==0||n==(t.s<0?3:2)):s>5||s==5&&(n==4||l||n==6&&(r>0?i>0?c/al(10,a-i):0:f[u-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return l?(o=Nn(t),f.length=1,e=e-o-1,f[0]=al(10,(rn-e%rn)%rn),t.e=$f(-e/rn)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=u,o=1,u--):(f.length=u+1,o=al(10,rn-r),f[u]=i>0?(c/al(10,a-i)%al(10,i)|0)*o:0),l)for(;;)if(u==0){(f[0]+=o)==Xn&&(f[0]=1,++t.e);break}else{if(f[u]+=o,f[u]!=Xn)break;f[u--]=0,o=1}for(r=f.length;f[--r]===0;)f.pop();if(cn&&(t.e>sy||t.e<-sy))throw Error(UA+Nn(t));return t}function HV(t,e){var n,r,i,o,a,s,l,c,u,f,h=t.constructor,d=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),cn?qt(e,d):e;if(l=t.d,f=e.d,r=e.e,c=t.e,l=l.slice(),a=c-r,a){for(u=a<0,u?(n=l,a=-a,s=f.length):(n=f,r=c,s=l.length),i=Math.max(Math.ceil(d/rn),s)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=l.length,s=f.length,u=i<s,u&&(s=i),i=0;i<s;i++)if(l[i]!=f[i]){u=l[i]<f[i];break}a=0}for(u&&(n=l,l=f,f=n,e.s=-e.s),s=l.length,i=f.length-s;i>0;--i)l[s++]=0;for(i=f.length;i>a;){if(l[--i]<f[i]){for(o=i;o&&l[--o]===0;)l[o]=Xn-1;--l[o],l[i]+=Xn}l[i]-=f[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,cn?qt(e,d):e):new h(0)}function zl(t,e,n){var r,i=Nn(t),o=_o(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+Wa(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+Wa(-i-1)+o,n&&(r=n-a)>0&&(o+=Wa(r))):i>=a?(o+=Wa(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+Wa(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=Wa(r))),t.s<0?"-"+o:o}function xN(t,e){if(t.length>e)return t.length=e,!0}function GV(t){var e,n,r;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Rl+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return _N(a,o.toString())}else if(typeof o!="string")throw Error(Rl+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,Wve.test(o))_N(a,o);else throw Error(Rl+o)}if(i.prototype=ze,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=GV,i.config=i.set=qve,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function qve(t){if(!t||typeof t!="object")throw Error(Ui+"Object expected");var e,n,r,i=["precision",1,Bf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if($f(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Rl+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Rl+n+": "+r);return this}var FA=GV(Gve);li=new FA(1);const Ht=FA;function Xve(t){return Zve(t)||Qve(t)||Yve(t)||Kve()}function Kve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yve(t,e){if(t){if(typeof t=="string")return zw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zw(t,e)}}function Qve(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Zve(t){if(Array.isArray(t))return zw(t)}function zw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Jve=function(e){return e},WV={"@@functional/placeholder":!0},qV=function(e){return e===WV},bN=function(e){return function n(){return arguments.length===0||arguments.length===1&&qV(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},eye=function t(e,n){return e===1?n:bN(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter(function(s){return s!==WV}).length;return a>=e?n.apply(void 0,i):t(e-a,bN(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var u=i.map(function(f){return qV(f)?l.shift():f});return n.apply(void 0,Xve(u).concat(l))}))})},r_=function(e){return eye(e.length,e)},Hw=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},tye=r_(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),nye=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Jve;var i=n.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce(function(s,l){return l(s)},o.apply(void 0,arguments))}},Gw=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},XV=function(e){var n=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n&&o.every(function(s,l){return s===n[l]})||(n=o,r=e.apply(void 0,o)),r}};function rye(t){var e;return t===0?e=1:e=Math.floor(new Ht(t).abs().log(10).toNumber())+1,e}function iye(t,e,n){for(var r=new Ht(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var oye=r_(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),aye=r_(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),sye=r_(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const i_={rangeStep:iye,getDigitCount:rye,interpolateNumber:oye,uninterpolateNumber:aye,uninterpolateTruncation:sye};function Ww(t){return uye(t)||cye(t)||KV(t)||lye()}function lye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cye(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function uye(t){if(Array.isArray(t))return qw(t)}function ip(t,e){return dye(t)||hye(t,e)||KV(t,e)||fye()}function fye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KV(t,e){if(t){if(typeof t=="string")return qw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qw(t,e)}}function qw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hye(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw o}}return n}}function dye(t){if(Array.isArray(t))return t}function YV(t){var e=ip(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function QV(t,e,n){if(t.lte(0))return new Ht(0);var r=i_.getDigitCount(t.toNumber()),i=new Ht(10).pow(r),o=t.div(i),a=r!==1?.05:.1,s=new Ht(Math.ceil(o.div(a).toNumber())).add(n).mul(a),l=s.mul(i);return e?l:new Ht(Math.ceil(l))}function pye(t,e,n){var r=1,i=new Ht(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new Ht(10).pow(i_.getDigitCount(t)-1),i=new Ht(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Ht(Math.floor(t)))}else t===0?i=new Ht(Math.floor((e-1)/2)):n||(i=new Ht(Math.floor(t)));var a=Math.floor((e-1)/2),s=nye(tye(function(l){return i.add(new Ht(l-a).mul(r)).toNumber()}),Hw);return s(0,e)}function ZV(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Ht(0),tickMin:new Ht(0),tickMax:new Ht(0)};var o=QV(new Ht(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new Ht(0):(a=new Ht(t).add(e).div(2),a=a.sub(new Ht(a).mod(o)));var s=Math.ceil(a.sub(t).div(o).toNumber()),l=Math.ceil(new Ht(e).sub(a).div(o).toNumber()),c=s+l+1;return c>n?ZV(t,e,n,r,i+1):(c<n&&(l=e>0?l+(n-c):l,s=e>0?s:s+(n-c)),{step:o,tickMin:a.sub(new Ht(s).mul(o)),tickMax:a.add(new Ht(l).mul(o))})}function mye(t){var e=ip(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),s=YV([n,r]),l=ip(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var f=u===1/0?[c].concat(Ww(Hw(0,i-1).map(function(){return 1/0}))):[].concat(Ww(Hw(0,i-1).map(function(){return-1/0})),[u]);return n>r?Gw(f):f}if(c===u)return pye(c,i,o);var h=ZV(c,u,a,o),d=h.step,v=h.tickMin,y=h.tickMax,g=i_.rangeStep(v,y.add(new Ht(.1).mul(d)),d);return n>r?Gw(g):g}function gye(t,e){var n=ip(t,2),r=n[0],i=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=YV([r,i]),s=ip(a,2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var u=Math.max(e,2),f=QV(new Ht(c).sub(l).div(u-1),o,0),h=[].concat(Ww(i_.rangeStep(new Ht(l),new Ht(c).sub(new Ht(.99).mul(f)),f)),[c]);return r>i?Gw(h):h}var vye=XV(mye),yye=XV(gye),_ye="Invariant failed";function Hl(t,e){throw new Error(_ye)}var xye=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Qu(t){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qu(t)}function ly(){return ly=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ly.apply(this,arguments)}function bye(t,e){return Tye(t)||Eye(t,e)||Sye(t,e)||wye()}function wye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sye(t,e){if(t){if(typeof t=="string")return wN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wN(t,e)}}function wN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Eye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Tye(t){if(Array.isArray(t))return t}function Aye(t,e){if(t==null)return{};var n=Mye(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Mye(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Pye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tB(r.key),r)}}function Rye(t,e,n){return e&&Cye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Oye(t,e,n){return e=cy(e),Iye(t,JV()?Reflect.construct(e,n||[],cy(t).constructor):e.apply(t,n))}function Iye(t,e){if(e&&(Qu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nye(t)}function Nye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JV=function(){return!!t})()}function cy(t){return cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cy(t)}function Dye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xw(t,e)}function Xw(t,e){return Xw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Xw(t,e)}function eB(t,e,n){return e=tB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tB(t){var e=Lye(t,"string");return Qu(e)=="symbol"?e:e+""}function Lye(t,e){if(Qu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Qu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jp=function(t){function e(){return Pye(this,e),Oye(this,e,arguments)}return Dye(e,t),Rye(e,[{key:"render",value:function(){var r=this.props,i=r.offset,o=r.layout,a=r.width,s=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,f=r.yAxis,h=Aye(r,xye),d=Ke(h,!1);this.props.direction==="x"&&u.type!=="number"&&Hl();var v=l.map(function(y){var g=c(y,s),p=g.x,x=g.y,_=g.value,E=g.errorVal;if(!E)return null;var b=[],M,S;if(Array.isArray(E)){var A=bye(E,2);M=A[0],S=A[1]}else M=S=E;if(o==="vertical"){var T=u.scale,P=x+i,R=P+a,N=P-a,I=T(_-M),D=T(_+S);b.push({x1:D,y1:R,x2:D,y2:N}),b.push({x1:I,y1:P,x2:D,y2:P}),b.push({x1:I,y1:R,x2:I,y2:N})}else if(o==="horizontal"){var L=f.scale,q=p+i,$=q-a,V=q+a,X=L(_-M),K=L(_+S);b.push({x1:$,y1:K,x2:V,y2:K}),b.push({x1:q,y1:X,x2:q,y2:K}),b.push({x1:$,y1:X,x2:V,y2:X})}return G.createElement(St,ly({className:"recharts-errorBar",key:"bar-".concat(b.map(function(z){return"".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))},d),b.map(function(z){return G.createElement("line",ly({},z,{key:"line-".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))}))});return G.createElement(St,{className:"recharts-errorBars"},v)}}])}(G.Component);eB(Jp,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});eB(Jp,"displayName","ErrorBar");function op(t){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},op(t)}function SN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ys(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SN(Object(n),!0).forEach(function(r){kye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kye(t,e,n){return e=jye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jye(t){var e=Uye(t,"string");return op(e)=="symbol"?e:e+""}function Uye(t,e){if(op(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(op(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nB=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=ai(n,fa);if(!a)return null;var s=fa.defaultProps,l=s!==void 0?Ys(Ys({},s),a.props):{},c;return a.props&&a.props.payload?c=a.props&&a.props.payload:o==="children"?c=(r||[]).reduce(function(u,f){var h=f.item,d=f.props,v=d.sectors||d.data||[];return u.concat(v.map(function(y){return{type:a.props.iconType||h.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):c=(r||[]).map(function(u){var f=u.item,h=f.type.defaultProps,d=h!==void 0?Ys(Ys({},h),f.props):{},v=d.dataKey,y=d.name,g=d.legendType,p=d.hide;return{inactive:p,dataKey:v,type:l.iconType||g||"square",color:VA(f),value:y||v,payload:d}}),Ys(Ys(Ys({},l),fa.getWithHeight(a,i)),{},{payload:c,item:a})};function ap(t){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ap(t)}function EN(t){return $ye(t)||Bye(t)||Vye(t)||Fye()}function Fye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vye(t,e){if(t){if(typeof t=="string")return Kw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kw(t,e)}}function Bye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $ye(t){if(Array.isArray(t))return Kw(t)}function Kw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function TN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TN(Object(n),!0).forEach(function(r){Eu(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eu(t,e,n){return e=zye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zye(t){var e=Hye(t,"string");return ap(e)=="symbol"?e:e+""}function Hye(t,e){if(ap(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sn(t,e,n){return ft(t)||ft(e)?n:Vn(e)?fi(t,e,n):ot(e)?e(t):n}function cd(t,e,n,r){var i=Bve(t,function(s){return Sn(s,e)});if(n==="number"){var o=i.filter(function(s){return Ae(s)||parseFloat(s)});return o.length?[n_(o),es(o)]:[1/0,-1/0]}var a=r?i.filter(function(s){return!ft(s)}):i;return a.map(function(s){return Vn(s)||s instanceof Date?s:""})}var Gye=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,s=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(s<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,c=0;c<s;c++){var u=c>0?i[c-1].coordinate:i[s-1].coordinate,f=i[c].coordinate,h=c>=s-1?i[0].coordinate:i[c+1].coordinate,d=void 0;if(kr(f-u)!==kr(h-f)){var v=[];if(kr(h-f)===kr(l[1]-l[0])){d=h;var y=f+l[1]-l[0];v[0]=Math.min(y,(y+u)/2),v[1]=Math.max(y,(y+u)/2)}else{d=u;var g=h+l[1]-l[0];v[0]=Math.min(f,(g+f)/2),v[1]=Math.max(f,(g+f)/2)}var p=[Math.min(f,(d+f)/2),Math.max(f,(d+f)/2)];if(e>p[0]&&e<=p[1]||e>=v[0]&&e<=v[1]){a=i[c].index;break}}else{var x=Math.min(u,h),_=Math.max(u,h);if(e>(x+f)/2&&e<=(_+f)/2){a=i[c].index;break}}}else for(var E=0;E<s;E++)if(E===0&&e<=(r[E].coordinate+r[E+1].coordinate)/2||E>0&&E<s-1&&e>(r[E].coordinate+r[E-1].coordinate)/2&&e<=(r[E].coordinate+r[E+1].coordinate)/2||E===s-1&&e>(r[E].coordinate+r[E-1].coordinate)/2){a=r[E].index;break}return a},VA=function(e){var n,r=e,i=r.type.displayName,o=(n=e.type)!==null&&n!==void 0&&n.defaultProps?yn(yn({},e.type.defaultProps),e.props):e.props,a=o.stroke,s=o.fill,l;switch(i){case"Line":l=a;break;case"Area":case"Radar":l=a&&a!=="none"?a:s;break;default:l=s;break}return l},Wye=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var a={},s=Object.keys(o),l=0,c=s.length;l<c;l++)for(var u=o[s[l]].stackGroups,f=Object.keys(u),h=0,d=f.length;h<d;h++){var v=u[f[h]],y=v.items,g=v.cateAxisId,p=y.filter(function(S){return ua(S.type).indexOf("Bar")>=0});if(p&&p.length){var x=p[0].type.defaultProps,_=x!==void 0?yn(yn({},x),p[0].props):p[0].props,E=_.barSize,b=_[g];a[b]||(a[b]=[]);var M=ft(E)?n:E;a[b].push({item:p[0],stackList:p.slice(1),barSize:ft(M)?void 0:jr(M,r,0)})}}return a},qye=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,s=e.maxBarSize,l=a.length;if(l<1)return null;var c=jr(n,i,0,!0),u,f=[];if(a[0].barSize===+a[0].barSize){var h=!1,d=i/l,v=a.reduce(function(E,b){return E+b.barSize||0},0);v+=(l-1)*c,v>=i&&(v-=(l-1)*c,c=0),v>=i&&d>0&&(h=!0,d*=.9,v=l*d);var y=(i-v)/2>>0,g={offset:y-c,size:0};u=a.reduce(function(E,b){var M={item:b.item,position:{offset:g.offset+g.size+c,size:h?d:b.barSize}},S=[].concat(EN(E),[M]);return g=S[S.length-1].position,b.stackList&&b.stackList.length&&b.stackList.forEach(function(A){S.push({item:A,position:g})}),S},f)}else{var p=jr(r,i,0,!0);i-2*p-(l-1)*c<=0&&(c=0);var x=(i-2*p-(l-1)*c)/l;x>1&&(x>>=0);var _=s===+s?Math.min(x,s):x;u=a.reduce(function(E,b,M){var S=[].concat(EN(E),[{item:b.item,position:{offset:p+(x+c)*M+(x-_)/2,size:_}}]);return b.stackList&&b.stackList.length&&b.stackList.forEach(function(A){S.push({item:A,position:S[S.length-1].position})}),S},f)}return u},Xye=function(e,n,r,i){var o=r.children,a=r.width,s=r.margin,l=a-(s.left||0)-(s.right||0),c=nB({children:o,legendWidth:l});if(c){var u=i||{},f=u.width,h=u.height,d=c.align,v=c.verticalAlign,y=c.layout;if((y==="vertical"||y==="horizontal"&&v==="middle")&&d!=="center"&&Ae(e[d]))return yn(yn({},e),{},Eu({},d,e[d]+(f||0)));if((y==="horizontal"||y==="vertical"&&d==="center")&&v!=="middle"&&Ae(e[v]))return yn(yn({},e),{},Eu({},v,e[v]+(h||0)))}return e},Kye=function(e,n,r){return ft(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},rB=function(e,n,r,i,o){var a=n.props.children,s=hi(a,Jp).filter(function(c){return Kye(i,o,c.props.direction)});if(s&&s.length){var l=s.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var f=Sn(u,r);if(ft(f))return c;var h=Array.isArray(f)?[n_(f),es(f)]:[f,f],d=l.reduce(function(v,y){var g=Sn(u,y,0),p=h[0]-Math.abs(Array.isArray(g)?g[0]:g),x=h[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(p,v[0]),Math.max(x,v[1])]},[1/0,-1/0]);return[Math.min(d[0],c[0]),Math.max(d[1],c[1])]},[1/0,-1/0])}return null},Yye=function(e,n,r,i,o){var a=n.map(function(s){return rB(e,s,r,o,i)}).filter(function(s){return!ft(s)});return a&&a.length?a.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},iB=function(e,n,r,i,o){var a=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&rB(e,l,c,i)||cd(e,c,r,o)});if(r==="number")return a.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var s={};return a.reduce(function(l,c){for(var u=0,f=c.length;u<f;u++)s[c[u]]||(s[c[u]]=!0,l.push(c[u]));return l},[])},oB=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},aB=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var o,a,s=e.map(function(l){return l.coordinate===n&&(o=!0),l.coordinate===r&&(a=!0),l.coordinate});return o||s.push(n),a||s.push(r),s},ia=function(e,n,r){if(!e)return null;var i=e.scale,o=e.duplicateDomain,a=e.type,s=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?kr(s[0]-s[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(f){var h=o?o.indexOf(f):f;return{coordinate:i(h)+c,value:f,offset:c}});return u.filter(function(f){return!kf(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:i(f)+c,value:f,index:h,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+c,value:f,offset:c}}):i.domain().map(function(f,h){return{coordinate:i(f)+c,value:o?o[f]:f,index:h,offset:c}})},bb=new WeakMap,vg=function(e,n){if(typeof n!="function")return e;bb.has(e)||bb.set(e,new WeakMap);var r=bb.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},sB=function(e,n,r){var i=e.scale,o=e.type,a=e.layout,s=e.axisType;if(i==="auto")return a==="radial"&&s==="radiusAxis"?{scale:Zd(),realScaleType:"band"}:a==="radial"&&s==="angleAxis"?{scale:ry(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:ld(),realScaleType:"point"}:o==="category"?{scale:Zd(),realScaleType:"band"}:{scale:ry(),realScaleType:"linear"};if(qp(i)){var l="scale".concat($0(i));return{scale:(yN[l]||ld)(),realScaleType:yN[l]?l:"point"}}return ot(i)?{scale:i}:{scale:ld(),realScaleType:"point"}},AN=1e-4,lB=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),o=Math.min(i[0],i[1])-AN,a=Math.max(i[0],i[1])+AN,s=e(n[0]),l=e(n[r-1]);(s<o||s>a||l<o||l>a)&&e.domain([n[0],n[r-1]])}},Qye=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Zye=function(e,n){if(!n||n.length!==2||!Ae(n[0])||!Ae(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),o=[e[0],e[1]];return(!Ae(e[0])||e[0]<r)&&(o[0]=r),(!Ae(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},Jye=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0,s=0;s<n;++s){var l=kf(e[s][r][1])?e[s][r][0]:e[s][r][1];l>=0?(e[s][r][0]=o,e[s][r][1]=o+l,o=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+l,a=e[s][r][1])}},e0e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0;a<n;++a){var s=kf(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=o,e[a][r][1]=o+s,o=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},t0e={sign:Jye,expand:xoe,none:$u,silhouette:boe,wiggle:woe,positive:e0e},n0e=function(e,n,r){var i=n.map(function(s){return s.props.dataKey}),o=t0e[r],a=_oe().keys(i).value(function(s,l){return+Sn(s,l,0)}).order(xw).offset(o);return a(e)},r0e=function(e,n,r,i,o,a){if(!e)return null;var s=a?n.reverse():n,l={},c=s.reduce(function(f,h){var d,v=(d=h.type)!==null&&d!==void 0&&d.defaultProps?yn(yn({},h.type.defaultProps),h.props):h.props,y=v.stackId,g=v.hide;if(g)return f;var p=v[r],x=f[p]||{hasStack:!1,stackGroups:{}};if(Vn(y)){var _=x.stackGroups[y]||{numericAxisId:r,cateAxisId:i,items:[]};_.items.push(h),x.hasStack=!0,x.stackGroups[y]=_}else x.stackGroups[Zl("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return yn(yn({},f),{},Eu({},p,x))},l),u={};return Object.keys(c).reduce(function(f,h){var d=c[h];if(d.hasStack){var v={};d.stackGroups=Object.keys(d.stackGroups).reduce(function(y,g){var p=d.stackGroups[g];return yn(yn({},y),{},Eu({},g,{numericAxisId:r,cateAxisId:i,items:p.items,stackedData:n0e(e,p.items,o)}))},v)}return yn(yn({},f),{},Eu({},h,d))},u)},cB=function(e,n){var r=n.realScaleType,i=n.type,o=n.tickCount,a=n.originalDomain,s=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=vye(c,o,s);return e.domain([n_(u),es(u)]),{niceTicks:u}}if(o&&i==="number"){var f=e.domain(),h=yye(f,o,s);return{niceTicks:h}}return null};function uy(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,o=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!ft(i[e.dataKey])){var s=kv(n,"value",i[e.dataKey]);if(s)return s.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var l=Sn(i,ft(a)?e.dataKey:a);return ft(l)?null:e.scale(l)}var MN=function(e){var n=e.axis,r=e.ticks,i=e.offset,o=e.bandSize,a=e.entry,s=e.index;if(n.type==="category")return r[s]?r[s].coordinate+i:null;var l=Sn(a,n.dataKey,n.domain[s]);return ft(l)?null:n.scale(l)-o/2+i},i0e=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},o0e=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?yn(yn({},e.type.defaultProps),e.props):e.props,o=i.stackId;if(Vn(o)){var a=n[o];if(a){var s=a.items.indexOf(e);return s>=0?a.stackedData[s]:null}}return null},a0e=function(e){return e.reduce(function(n,r){return[n_(r.concat([n[0]]).filter(Ae)),es(r.concat([n[1]]).filter(Ae))]},[1/0,-1/0])},uB=function(e,n,r){return Object.keys(e).reduce(function(i,o){var a=e[o],s=a.stackedData,l=s.reduce(function(c,u){var f=a0e(u.slice(n,r+1));return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},PN=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CN=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Yw=function(e,n,r){if(ot(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Ae(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(PN.test(e[0])){var o=+PN.exec(e[0])[1];i[0]=n[0]-o}else ot(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Ae(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(CN.test(e[1])){var a=+CN.exec(e[1])[1];i[1]=n[1]+a}else ot(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},fy=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var o=pA(n,function(f){return f.coordinate}),a=1/0,s=1,l=o.length;s<l;s++){var c=o[s],u=o[s-1];a=Math.min((c.coordinate||0)-(u.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},RN=function(e,n,r){return!e||!e.length||$l(e,fi(r,"type.defaultProps.domain"))?n:e},fB=function(e,n){var r=e.type.defaultProps?yn(yn({},e.type.defaultProps),e.props):e.props,i=r.dataKey,o=r.name,a=r.unit,s=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return yn(yn({},Ke(e,!1)),{},{dataKey:i,unit:a,formatter:s,name:o||i,color:VA(e),value:Sn(n,i),type:l,payload:n,chartType:c,hide:u})};function sp(t){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sp(t)}function ON(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ko(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ON(Object(n),!0).forEach(function(r){hB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ON(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hB(t,e,n){return e=s0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s0e(t){var e=l0e(t,"string");return sp(e)=="symbol"?e:e+""}function l0e(t,e){if(sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c0e(t,e){return d0e(t)||h0e(t,e)||f0e(t,e)||u0e()}function u0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f0e(t,e){if(t){if(typeof t=="string")return IN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IN(t,e)}}function IN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function d0e(t){if(Array.isArray(t))return t}var hy=Math.PI/180,p0e=function(e){return e*180/Math.PI},Qt=function(e,n,r,i){return{x:e+Math.cos(-hy*i)*r,y:n+Math.sin(-hy*i)*r}},dB=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},m0e=function(e,n,r,i,o){var a=e.width,s=e.height,l=e.startAngle,c=e.endAngle,u=jr(e.cx,a,a/2),f=jr(e.cy,s,s/2),h=dB(a,s,r),d=jr(e.innerRadius,h,0),v=jr(e.outerRadius,h,h*.8),y=Object.keys(n);return y.reduce(function(g,p){var x=n[p],_=x.domain,E=x.reversed,b;if(ft(x.range))i==="angleAxis"?b=[l,c]:i==="radiusAxis"&&(b=[d,v]),E&&(b=[b[1],b[0]]);else{b=x.range;var M=b,S=c0e(M,2);l=S[0],c=S[1]}var A=sB(x,o),T=A.realScaleType,P=A.scale;P.domain(_).range(b),lB(P);var R=cB(P,Ko(Ko({},x),{},{realScaleType:T})),N=Ko(Ko(Ko({},x),R),{},{range:b,radius:v,realScaleType:T,scale:P,cx:u,cy:f,innerRadius:d,outerRadius:v,startAngle:l,endAngle:c});return Ko(Ko({},g),{},hB({},p,N))},{})},g0e=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-a,2))},v0e=function(e,n){var r=e.x,i=e.y,o=n.cx,a=n.cy,s=g0e({x:r,y:i},{x:o,y:a});if(s<=0)return{radius:s};var l=(r-o)/s,c=Math.acos(l);return i>a&&(c=2*Math.PI-c),{radius:s,angle:p0e(c),angleInRadian:c}},y0e=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360),a=Math.min(i,o);return{startAngle:n-a*360,endAngle:r-a*360}},_0e=function(e,n){var r=n.startAngle,i=n.endAngle,o=Math.floor(r/360),a=Math.floor(i/360),s=Math.min(o,a);return e+s*360},NN=function(e,n){var r=e.x,i=e.y,o=v0e({x:r,y:i},n),a=o.radius,s=o.angle,l=n.innerRadius,c=n.outerRadius;if(a<l||a>c)return!1;if(a===0)return!0;var u=y0e(n),f=u.startAngle,h=u.endAngle,d=s,v;if(f<=h){for(;d>h;)d-=360;for(;d<f;)d+=360;v=d>=f&&d<=h}else{for(;d>f;)d-=360;for(;d<h;)d+=360;v=d>=h&&d<=f}return v?Ko(Ko({},n),{},{radius:a,angle:_0e(d,n)}):null},pB=function(e){return!B.isValidElement(e)&&!ot(e)&&typeof e!="boolean"?e.className:""};function lp(t){"@babel/helpers - typeof";return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lp(t)}var x0e=["offset"];function b0e(t){return T0e(t)||E0e(t)||S0e(t)||w0e()}function w0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S0e(t,e){if(t){if(typeof t=="string")return Qw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qw(t,e)}}function E0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function T0e(t){if(Array.isArray(t))return Qw(t)}function Qw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A0e(t,e){if(t==null)return{};var n=M0e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function M0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function DN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ln(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DN(Object(n),!0).forEach(function(r){P0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P0e(t,e,n){return e=C0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C0e(t){var e=R0e(t,"string");return lp(e)=="symbol"?e:e+""}function R0e(t,e){if(lp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cp(){return cp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cp.apply(this,arguments)}var O0e=function(e){var n=e.value,r=e.formatter,i=ft(e.children)?n:e.children;return ot(r)?r(i):i},I0e=function(e,n){var r=kr(n-e),i=Math.min(Math.abs(n-e),360);return r*i},N0e=function(e,n,r){var i=e.position,o=e.viewBox,a=e.offset,s=e.className,l=o,c=l.cx,u=l.cy,f=l.innerRadius,h=l.outerRadius,d=l.startAngle,v=l.endAngle,y=l.clockWise,g=(f+h)/2,p=I0e(d,v),x=p>=0?1:-1,_,E;i==="insideStart"?(_=d+x*a,E=y):i==="insideEnd"?(_=v-x*a,E=!y):i==="end"&&(_=v+x*a,E=y),E=p<=0?E:!E;var b=Qt(c,u,g,_),M=Qt(c,u,g,_+(E?1:-1)*359),S="M".concat(b.x,",").concat(b.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(E?0:1,`,
    `).concat(M.x,",").concat(M.y),A=ft(e.id)?Zl("recharts-radial-line-"):e.id;return G.createElement("text",cp({},r,{dominantBaseline:"central",className:_t("recharts-radial-bar-label",s)}),G.createElement("defs",null,G.createElement("path",{id:A,d:S})),G.createElement("textPath",{xlinkHref:"#".concat(A)},n))},D0e=function(e){var n=e.viewBox,r=e.offset,i=e.position,o=n,a=o.cx,s=o.cy,l=o.innerRadius,c=o.outerRadius,u=o.startAngle,f=o.endAngle,h=(u+f)/2;if(i==="outside"){var d=Qt(a,s,c+r,h),v=d.x,y=d.y;return{x:v,y,textAnchor:v>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var g=(l+c)/2,p=Qt(a,s,g,h),x=p.x,_=p.y;return{x,y:_,textAnchor:"middle",verticalAnchor:"middle"}},L0e=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,o=e.position,a=n,s=a.x,l=a.y,c=a.width,u=a.height,f=u>=0?1:-1,h=f*i,d=f>0?"end":"start",v=f>0?"start":"end",y=c>=0?1:-1,g=y*i,p=y>0?"end":"start",x=y>0?"start":"end";if(o==="top"){var _={x:s+c/2,y:l-f*i,textAnchor:"middle",verticalAnchor:d};return Ln(Ln({},_),r?{height:Math.max(l-r.y,0),width:c}:{})}if(o==="bottom"){var E={x:s+c/2,y:l+u+h,textAnchor:"middle",verticalAnchor:v};return Ln(Ln({},E),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(o==="left"){var b={x:s-g,y:l+u/2,textAnchor:p,verticalAnchor:"middle"};return Ln(Ln({},b),r?{width:Math.max(b.x-r.x,0),height:u}:{})}if(o==="right"){var M={x:s+c+g,y:l+u/2,textAnchor:x,verticalAnchor:"middle"};return Ln(Ln({},M),r?{width:Math.max(r.x+r.width-M.x,0),height:u}:{})}var S=r?{width:c,height:u}:{};return o==="insideLeft"?Ln({x:s+g,y:l+u/2,textAnchor:x,verticalAnchor:"middle"},S):o==="insideRight"?Ln({x:s+c-g,y:l+u/2,textAnchor:p,verticalAnchor:"middle"},S):o==="insideTop"?Ln({x:s+c/2,y:l+h,textAnchor:"middle",verticalAnchor:v},S):o==="insideBottom"?Ln({x:s+c/2,y:l+u-h,textAnchor:"middle",verticalAnchor:d},S):o==="insideTopLeft"?Ln({x:s+g,y:l+h,textAnchor:x,verticalAnchor:v},S):o==="insideTopRight"?Ln({x:s+c-g,y:l+h,textAnchor:p,verticalAnchor:v},S):o==="insideBottomLeft"?Ln({x:s+g,y:l+u-h,textAnchor:x,verticalAnchor:d},S):o==="insideBottomRight"?Ln({x:s+c-g,y:l+u-h,textAnchor:p,verticalAnchor:d},S):If(o)&&(Ae(o.x)||vl(o.x))&&(Ae(o.y)||vl(o.y))?Ln({x:s+jr(o.x,c),y:l+jr(o.y,u),textAnchor:"end",verticalAnchor:"end"},S):Ln({x:s+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},S)},k0e=function(e){return"cx"in e&&Ae(e.cx)};function Qn(t){var e=t.offset,n=e===void 0?5:e,r=A0e(t,x0e),i=Ln({offset:n},r),o=i.viewBox,a=i.position,s=i.value,l=i.children,c=i.content,u=i.className,f=u===void 0?"":u,h=i.textBreakAll;if(!o||ft(s)&&ft(l)&&!B.isValidElement(c)&&!ot(c))return null;if(B.isValidElement(c))return B.cloneElement(c,i);var d;if(ot(c)){if(d=B.createElement(c,i),B.isValidElement(d))return d}else d=O0e(i);var v=k0e(o),y=Ke(i,!0);if(v&&(a==="insideStart"||a==="insideEnd"||a==="end"))return N0e(i,d,y);var g=v?D0e(i):L0e(i);return G.createElement(Bl,cp({className:_t("recharts-label",f)},y,g,{breakAll:h}),d)}Qn.displayName="Label";var mB=function(e){var n=e.cx,r=e.cy,i=e.angle,o=e.startAngle,a=e.endAngle,s=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,f=e.x,h=e.y,d=e.top,v=e.left,y=e.width,g=e.height,p=e.clockWise,x=e.labelViewBox;if(x)return x;if(Ae(y)&&Ae(g)){if(Ae(f)&&Ae(h))return{x:f,y:h,width:y,height:g};if(Ae(d)&&Ae(v))return{x:d,y:v,width:y,height:g}}return Ae(f)&&Ae(h)?{x:f,y:h,width:0,height:0}:Ae(n)&&Ae(r)?{cx:n,cy:r,startAngle:o||i||0,endAngle:a||i||0,innerRadius:c||0,outerRadius:u||l||s||0,clockWise:p}:e.viewBox?e.viewBox:{}},j0e=function(e,n){return e?e===!0?G.createElement(Qn,{key:"label-implicit",viewBox:n}):Vn(e)?G.createElement(Qn,{key:"label-implicit",viewBox:n,value:e}):B.isValidElement(e)?e.type===Qn?B.cloneElement(e,{key:"label-implicit",viewBox:n}):G.createElement(Qn,{key:"label-implicit",content:e,viewBox:n}):ot(e)?G.createElement(Qn,{key:"label-implicit",content:e,viewBox:n}):If(e)?G.createElement(Qn,cp({viewBox:n},e,{key:"label-implicit"})):null:null},U0e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=mB(e),a=hi(i,Qn).map(function(l,c){return B.cloneElement(l,{viewBox:n||o,key:"label-".concat(c)})});if(!r)return a;var s=j0e(e.label,n||o);return[s].concat(b0e(a))};Qn.parseViewBox=mB;Qn.renderCallByParent=U0e;function F0e(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var V0e=F0e;const B0e=Ft(V0e);function up(t){"@babel/helpers - typeof";return up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},up(t)}var $0e=["valueAccessor"],z0e=["data","dataKey","clockWise","id","textBreakAll"];function H0e(t){return X0e(t)||q0e(t)||W0e(t)||G0e()}function G0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W0e(t,e){if(t){if(typeof t=="string")return Zw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zw(t,e)}}function q0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function X0e(t){if(Array.isArray(t))return Zw(t)}function Zw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dy(){return dy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dy.apply(this,arguments)}function LN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LN(Object(n),!0).forEach(function(r){K0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function K0e(t,e,n){return e=Y0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y0e(t){var e=Q0e(t,"string");return up(e)=="symbol"?e:e+""}function Q0e(t,e){if(up(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(up(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jN(t,e){if(t==null)return{};var n=Z0e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Z0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var J0e=function(e){return Array.isArray(e.value)?B0e(e.value):e.value};function Mo(t){var e=t.valueAccessor,n=e===void 0?J0e:e,r=jN(t,$0e),i=r.data,o=r.dataKey,a=r.clockWise,s=r.id,l=r.textBreakAll,c=jN(r,z0e);return!i||!i.length?null:G.createElement(St,{className:"recharts-label-list"},i.map(function(u,f){var h=ft(o)?n(u,f):Sn(u&&u.payload,o),d=ft(s)?{}:{id:"".concat(s,"-").concat(f)};return G.createElement(Qn,dy({},Ke(u,!0),c,d,{parentViewBox:u.parentViewBox,value:h,textBreakAll:l,viewBox:Qn.parseViewBox(ft(a)?u:kN(kN({},u),{},{clockWise:a})),key:"label-".concat(f),index:f}))}))}Mo.displayName="LabelList";function e_e(t,e){return t?t===!0?G.createElement(Mo,{key:"labelList-implicit",data:e}):G.isValidElement(t)||ot(t)?G.createElement(Mo,{key:"labelList-implicit",data:e,content:t}):If(t)?G.createElement(Mo,dy({data:e},t,{key:"labelList-implicit"})):null:null}function t_e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=hi(r,Mo).map(function(a,s){return B.cloneElement(a,{data:e,key:"labelList-".concat(s)})});if(!n)return i;var o=e_e(t.label,e);return[o].concat(H0e(i))}Mo.renderCallByParent=t_e;function fp(t){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fp(t)}function Jw(){return Jw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jw.apply(this,arguments)}function UN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UN(Object(n),!0).forEach(function(r){n_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n_e(t,e,n){return e=r_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r_e(t){var e=i_e(t,"string");return fp(e)=="symbol"?e:e+""}function i_e(t,e){if(fp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var o_e=function(e,n){var r=kr(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},yg=function(e){var n=e.cx,r=e.cy,i=e.radius,o=e.angle,a=e.sign,s=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(s?1:-1)+i,f=Math.asin(l/u)/hy,h=c?o:o+a*f,d=Qt(n,r,u,h),v=Qt(n,r,i,h),y=c?o-a*f:o,g=Qt(n,r,u*Math.cos(f*hy),y);return{center:d,circleTangency:v,lineTangency:g,theta:f}},gB=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.startAngle,s=e.endAngle,l=o_e(a,s),c=a+l,u=Qt(n,r,o,a),f=Qt(n,r,o,c),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>c),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var d=Qt(n,r,i,a),v=Qt(n,r,i,c);h+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=c),`,
            `).concat(d.x,",").concat(d.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},a_e=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,s=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,f=kr(u-c),h=yg({cx:n,cy:r,radius:o,angle:c,sign:f,cornerRadius:a,cornerIsExternal:l}),d=h.circleTangency,v=h.lineTangency,y=h.theta,g=yg({cx:n,cy:r,radius:o,angle:u,sign:-f,cornerRadius:a,cornerIsExternal:l}),p=g.circleTangency,x=g.lineTangency,_=g.theta,E=l?Math.abs(c-u):Math.abs(c-u)-y-_;if(E<0)return s?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):gB({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:c,endAngle:u});var b="M ".concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(d.x,",").concat(d.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(E>180),",").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
  `);if(i>0){var M=yg({cx:n,cy:r,radius:i,angle:c,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),S=M.circleTangency,A=M.lineTangency,T=M.theta,P=yg({cx:n,cy:r,radius:i,angle:u,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),R=P.circleTangency,N=P.lineTangency,I=P.theta,D=l?Math.abs(c-u):Math.abs(c-u)-T-I;if(D<0&&a===0)return"".concat(b,"L").concat(n,",").concat(r,"Z");b+="L".concat(N.x,",").concat(N.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(R.x,",").concat(R.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(D>180),",").concat(+(f>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,"Z")}else b+="L".concat(n,",").concat(r,"Z");return b},s_e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},vB=function(e){var n=FN(FN({},s_e),e),r=n.cx,i=n.cy,o=n.innerRadius,a=n.outerRadius,s=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,u=n.startAngle,f=n.endAngle,h=n.className;if(a<o||u===f)return null;var d=_t("recharts-sector",h),v=a-o,y=jr(s,v,0,!0),g;return y>0&&Math.abs(u-f)<360?g=a_e({cx:r,cy:i,innerRadius:o,outerRadius:a,cornerRadius:Math.min(y,v/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:f}):g=gB({cx:r,cy:i,innerRadius:o,outerRadius:a,startAngle:u,endAngle:f}),G.createElement("path",Jw({},Ke(n,!0),{className:d,d:g,role:"img"}))};function hp(t){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hp(t)}function eS(){return eS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eS.apply(this,arguments)}function VN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VN(Object(n),!0).forEach(function(r){l_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l_e(t,e,n){return e=c_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c_e(t){var e=u_e(t,"string");return hp(e)=="symbol"?e:e+""}function u_e(t,e){if(hp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $N={curveBasisClosed:loe,curveBasisOpen:coe,curveBasis:soe,curveBumpX:qie,curveBumpY:Xie,curveLinearClosed:uoe,curveLinear:H0,curveMonotoneX:foe,curveMonotoneY:hoe,curveNatural:doe,curveStep:poe,curveStepAfter:goe,curveStepBefore:moe},_g=function(e){return e.x===+e.x&&e.y===+e.y},Ph=function(e){return e.x},Ch=function(e){return e.y},f_e=function(e,n){if(ot(e))return e;var r="curve".concat($0(e));return(r==="curveMonotone"||r==="curveBump")&&n?$N["".concat(r).concat(n==="vertical"?"Y":"X")]:$N[r]||H0},h_e=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,o=i===void 0?[]:i,a=e.baseLine,s=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=f_e(r,s),f=c?o.filter(function(y){return _g(y)}):o,h;if(Array.isArray(a)){var d=c?a.filter(function(y){return _g(y)}):a,v=f.map(function(y,g){return BN(BN({},y),{},{base:d[g]})});return s==="vertical"?h=cg().y(Ch).x1(Ph).x0(function(y){return y.base.x}):h=cg().x(Ph).y1(Ch).y0(function(y){return y.base.y}),h.defined(_g).curve(u),h(v)}return s==="vertical"&&Ae(a)?h=cg().y(Ch).x1(Ph).x0(a):Ae(a)?h=cg().x(Ph).y1(Ch).y0(a):h=f4().x(Ph).y(Ch),h.defined(_g).curve(u),h(f)},Ol=function(e){var n=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?h_e(e):i;return G.createElement("path",eS({},Ke(e,!1),jv(e),{className:_t("recharts-curve",n),d:a,ref:o}))},d_e=Object.getOwnPropertyNames,p_e=Object.getOwnPropertySymbols,m_e=Object.prototype.hasOwnProperty;function zN(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function xg(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var o=i.cache,a=o.get(n),s=o.get(r);if(a&&s)return a===r&&s===n;o.set(n,r),o.set(r,n);var l=t(n,r,i);return o.delete(n),o.delete(r),l}}function HN(t){return d_e(t).concat(p_e(t))}var yB=Object.hasOwn||function(t,e){return m_e.call(t,e)};function zf(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var _B="_owner",GN=Object.getOwnPropertyDescriptor,WN=Object.keys;function g_e(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function v_e(t,e){return zf(t.getTime(),e.getTime())}function qN(t,e,n){if(t.size!==e.size)return!1;for(var r={},i=t.entries(),o=0,a,s;(a=i.next())&&!a.done;){for(var l=e.entries(),c=!1,u=0;(s=l.next())&&!s.done;){var f=a.value,h=f[0],d=f[1],v=s.value,y=v[0],g=v[1];!c&&!r[u]&&(c=n.equals(h,y,o,u,t,e,n)&&n.equals(d,g,h,y,t,e,n))&&(r[u]=!0),u++}if(!c)return!1;o++}return!0}function y_e(t,e,n){var r=WN(t),i=r.length;if(WN(e).length!==i)return!1;for(var o;i-- >0;)if(o=r[i],o===_B&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!yB(e,o)||!n.equals(t[o],e[o],o,o,t,e,n))return!1;return!0}function Rh(t,e,n){var r=HN(t),i=r.length;if(HN(e).length!==i)return!1;for(var o,a,s;i-- >0;)if(o=r[i],o===_B&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!yB(e,o)||!n.equals(t[o],e[o],o,o,t,e,n)||(a=GN(t,o),s=GN(e,o),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable)))return!1;return!0}function __e(t,e){return zf(t.valueOf(),e.valueOf())}function x_e(t,e){return t.source===e.source&&t.flags===e.flags}function XN(t,e,n){if(t.size!==e.size)return!1;for(var r={},i=t.values(),o,a;(o=i.next())&&!o.done;){for(var s=e.values(),l=!1,c=0;(a=s.next())&&!a.done;)!l&&!r[c]&&(l=n.equals(o.value,a.value,o.value,a.value,t,e,n))&&(r[c]=!0),c++;if(!l)return!1}return!0}function b_e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}var w_e="[object Arguments]",S_e="[object Boolean]",E_e="[object Date]",T_e="[object Map]",A_e="[object Number]",M_e="[object Object]",P_e="[object RegExp]",C_e="[object Set]",R_e="[object String]",O_e=Array.isArray,KN=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,YN=Object.assign,I_e=Object.prototype.toString.call.bind(Object.prototype.toString);function N_e(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,a=t.areRegExpsEqual,s=t.areSetsEqual,l=t.areTypedArraysEqual;return function(u,f,h){if(u===f)return!0;if(u==null||f==null||typeof u!="object"||typeof f!="object")return u!==u&&f!==f;var d=u.constructor;if(d!==f.constructor)return!1;if(d===Object)return i(u,f,h);if(O_e(u))return e(u,f,h);if(KN!=null&&KN(u))return l(u,f,h);if(d===Date)return n(u,f,h);if(d===RegExp)return a(u,f,h);if(d===Map)return r(u,f,h);if(d===Set)return s(u,f,h);var v=I_e(u);return v===E_e?n(u,f,h):v===P_e?a(u,f,h):v===T_e?r(u,f,h):v===C_e?s(u,f,h):v===M_e?typeof u.then!="function"&&typeof f.then!="function"&&i(u,f,h):v===w_e?i(u,f,h):v===S_e||v===A_e||v===R_e?o(u,f,h):!1}}function D_e(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Rh:g_e,areDatesEqual:v_e,areMapsEqual:r?zN(qN,Rh):qN,areObjectsEqual:r?Rh:y_e,arePrimitiveWrappersEqual:__e,areRegExpsEqual:x_e,areSetsEqual:r?zN(XN,Rh):XN,areTypedArraysEqual:r?Rh:b_e};if(n&&(i=YN({},i,n(i))),e){var o=xg(i.areArraysEqual),a=xg(i.areMapsEqual),s=xg(i.areObjectsEqual),l=xg(i.areSetsEqual);i=YN({},i,{areArraysEqual:o,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:l})}return i}function L_e(t){return function(e,n,r,i,o,a,s){return t(e,n,s)}}function k_e(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,o=t.strict;if(r)return function(l,c){var u=r(),f=u.cache,h=f===void 0?e?new WeakMap:void 0:f,d=u.meta;return n(l,c,{cache:h,equals:i,meta:d,strict:o})};if(e)return function(l,c){return n(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var a={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,c){return n(l,c,a)}}var j_e=Us();Us({strict:!0});Us({circular:!0});Us({circular:!0,strict:!0});Us({createInternalComparator:function(){return zf}});Us({strict:!0,createInternalComparator:function(){return zf}});Us({circular:!0,createInternalComparator:function(){return zf}});Us({circular:!0,createInternalComparator:function(){return zf},strict:!0});function Us(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,o=t.strict,a=o===void 0?!1:o,s=D_e(t),l=N_e(s),c=r?r(l):L_e(l);return k_e({circular:n,comparator:l,createState:i,equals:c,strict:a})}function U_e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function QN(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(o){n<0&&(n=o),o-n>e?(t(o),n=-1):U_e(i)};requestAnimationFrame(r)}function tS(t){"@babel/helpers - typeof";return tS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tS(t)}function F_e(t){return z_e(t)||$_e(t)||B_e(t)||V_e()}function V_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B_e(t,e){if(t){if(typeof t=="string")return ZN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZN(t,e)}}function ZN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function z_e(t){if(Array.isArray(t))return t}function H_e(){var t={},e=function(){return null},n=!1,r=function i(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var a=o,s=F_e(a),l=s[0],c=s.slice(1);if(typeof l=="number"){QN(i.bind(null,c),l);return}i(l),QN(i.bind(null,c));return}tS(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function dp(t){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dp(t)}function JN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JN(Object(n),!0).forEach(function(r){xB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xB(t,e,n){return e=G_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G_e(t){var e=W_e(t,"string");return dp(e)==="symbol"?e:String(e)}function W_e(t,e){if(dp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var q_e=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},X_e=function(e){return e},K_e=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},ud=function(e,n){return Object.keys(n).reduce(function(r,i){return eD(eD({},r),{},xB({},i,e(i,n[i])))},{})},tD=function(e,n,r){return e.map(function(i){return"".concat(K_e(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Y_e(t,e){return J_e(t)||Z_e(t,e)||bB(t,e)||Q_e()}function Q_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z_e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function J_e(t){if(Array.isArray(t))return t}function exe(t){return rxe(t)||nxe(t)||bB(t)||txe()}function txe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bB(t,e){if(t){if(typeof t=="string")return nS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nS(t,e)}}function nxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rxe(t){if(Array.isArray(t))return nS(t)}function nS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var py=1e-4,wB=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},SB=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},nD=function(e,n){return function(r){var i=wB(e,n);return SB(i,r)}},ixe=function(e,n){return function(r){var i=wB(e,n),o=[].concat(exe(i.map(function(a,s){return a*s}).slice(1)),[0]);return SB(o,r)}},rD=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],a=n[2],s=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,o=0,a=1,s=1;break;case"ease":i=.25,o=.1,a=.25,s=1;break;case"ease-in":i=.42,o=0,a=1,s=1;break;case"ease-out":i=.42,o=0,a=.58,s=1;break;case"ease-in-out":i=0,o=0,a=.58,s=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=Y_e(c,4);i=u[0],o=u[1],a=u[2],s=u[3]}}}var f=nD(i,a),h=nD(o,s),d=ixe(i,a),v=function(p){return p>1?1:p<0?0:p},y=function(p){for(var x=p>1?1:p,_=x,E=0;E<8;++E){var b=f(_)-x,M=d(_);if(Math.abs(b-x)<py||M<py)return h(_);_=v(_-b/M)}return h(_)};return y.isStepper=!1,y},oxe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,o=i===void 0?8:i,a=e.dt,s=a===void 0?17:a,l=function(u,f,h){var d=-(u-f)*r,v=h*o,y=h+(d-v)*s/1e3,g=h*s/1e3+u;return Math.abs(g-f)<py&&Math.abs(y)<py?[f,0]:[g,y]};return l.isStepper=!0,l.dt=s,l},axe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return rD(i);case"spring":return oxe();default:if(i.split("(")[0]==="cubic-bezier")return rD(i)}return typeof i=="function"?i:null};function pp(t){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(t)}function iD(t){return cxe(t)||lxe(t)||EB(t)||sxe()}function sxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cxe(t){if(Array.isArray(t))return iS(t)}function oD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(n),!0).forEach(function(r){rS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rS(t,e,n){return e=uxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uxe(t){var e=fxe(t,"string");return pp(e)==="symbol"?e:String(e)}function fxe(t,e){if(pp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(pp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hxe(t,e){return mxe(t)||pxe(t,e)||EB(t,e)||dxe()}function dxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EB(t,e){if(t){if(typeof t=="string")return iS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iS(t,e)}}function iS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pxe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function mxe(t){if(Array.isArray(t))return t}var my=function(e,n,r){return e+(n-e)*r},oS=function(e){var n=e.from,r=e.to;return n!==r},gxe=function t(e,n,r){var i=ud(function(o,a){if(oS(a)){var s=e(a.from,a.to,a.velocity),l=hxe(s,2),c=l[0],u=l[1];return rr(rr({},a),{},{from:c,velocity:u})}return a},n);return r<1?ud(function(o,a){return oS(a)?rr(rr({},a),{},{velocity:my(a.velocity,i[o].velocity,r),from:my(a.from,i[o].from,r)}):a},n):t(e,i,r-1)};const vxe=function(t,e,n,r,i){var o=q_e(t,e),a=o.reduce(function(g,p){return rr(rr({},g),{},rS({},p,[t[p],e[p]]))},{}),s=o.reduce(function(g,p){return rr(rr({},g),{},rS({},p,{from:t[p],velocity:0,to:e[p]}))},{}),l=-1,c,u,f=function(){return null},h=function(){return ud(function(p,x){return x.from},s)},d=function(){return!Object.values(s).filter(oS).length},v=function(p){c||(c=p);var x=p-c,_=x/n.dt;s=gxe(n,s,_),i(rr(rr(rr({},t),e),h())),c=p,d()||(l=requestAnimationFrame(f))},y=function(p){u||(u=p);var x=(p-u)/r,_=ud(function(b,M){return my.apply(void 0,iD(M).concat([n(x)]))},a);if(i(rr(rr(rr({},t),e),_)),x<1)l=requestAnimationFrame(f);else{var E=ud(function(b,M){return my.apply(void 0,iD(M).concat([n(1)]))},a);i(rr(rr(rr({},t),e),E))}};return f=n.isStepper?v:y,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function Zu(t){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zu(t)}var yxe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function _xe(t,e){if(t==null)return{};var n=xxe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xxe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function wb(t){return Exe(t)||Sxe(t)||wxe(t)||bxe()}function bxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wxe(t,e){if(t){if(typeof t=="string")return aS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aS(t,e)}}function Sxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Exe(t){if(Array.isArray(t))return aS(t)}function aS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aD(Object(n),!0).forEach(function(r){Bh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bh(t,e,n){return e=TB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Txe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Axe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TB(r.key),r)}}function Mxe(t,e,n){return e&&Axe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function TB(t){var e=Pxe(t,"string");return Zu(e)==="symbol"?e:String(e)}function Pxe(t,e){if(Zu(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Zu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sS(t,e)}function sS(t,e){return sS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},sS(t,e)}function Rxe(t){var e=Oxe();return function(){var r=gy(t),i;if(e){var o=gy(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return lS(this,i)}}function lS(t,e){if(e&&(Zu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cS(t)}function cS(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oxe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gy(t){return gy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gy(t)}var lo=function(t){Cxe(n,t);var e=Rxe(n);function n(r,i){var o;Txe(this,n),o=e.call(this,r,i);var a=o.props,s=a.isActive,l=a.attributeName,c=a.from,u=a.to,f=a.steps,h=a.children,d=a.duration;if(o.handleStyleChange=o.handleStyleChange.bind(cS(o)),o.changeStyle=o.changeStyle.bind(cS(o)),!s||d<=0)return o.state={style:{}},typeof h=="function"&&(o.state={style:u}),lS(o);if(f&&f.length)o.state={style:f[0].style};else if(c){if(typeof h=="function")return o.state={style:c},lS(o);o.state={style:l?Bh({},l,c):c}}else o.state={style:{}};return o}return Mxe(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,a=i.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.isActive,s=o.canBegin,l=o.attributeName,c=o.shouldReAnimate,u=o.to,f=o.from,h=this.state.style;if(s){if(!a){var d={style:l?Bh({},l,u):u};this.state&&h&&(l&&h[l]!==u||!l&&h!==u)&&this.setState(d);return}if(!(j_e(i.to,u)&&i.canBegin&&i.isActive)){var v=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=v||c?f:i.to;if(this.state&&h){var g={style:l?Bh({},l,y):y};(l&&h[l]!==y||!l&&h!==y)&&this.setState(g)}this.runAnimation(Wi(Wi({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,a=i.from,s=i.to,l=i.duration,c=i.easing,u=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,d=vxe(a,s,axe(c),l,this.changeStyle),v=function(){o.stopJSAnimation=d()};this.manager.start([h,u,v,l,f])}},{key:"runStepAnimation",value:function(i){var o=this,a=i.steps,s=i.begin,l=i.onAnimationStart,c=a[0],u=c.style,f=c.duration,h=f===void 0?0:f,d=function(y,g,p){if(p===0)return y;var x=g.duration,_=g.easing,E=_===void 0?"ease":_,b=g.style,M=g.properties,S=g.onAnimationEnd,A=p>0?a[p-1]:g,T=M||Object.keys(b);if(typeof E=="function"||E==="spring")return[].concat(wb(y),[o.runJSAnimation.bind(o,{from:A.style,to:b,duration:x,easing:E}),x]);var P=tD(T,x,E),R=Wi(Wi(Wi({},A.style),b),{},{transition:P});return[].concat(wb(y),[R,x,S]).filter(X_e)};return this.manager.start([l].concat(wb(a.reduce(d,[u,Math.max(h,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=H_e());var o=i.begin,a=i.duration,s=i.attributeName,l=i.to,c=i.easing,u=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,d=i.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof c=="function"||typeof d=="function"||c==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var y=s?Bh({},s,l):l,g=tD(Object.keys(y),a,c);v.start([u,o,Wi(Wi({},y),{},{transition:g}),a,f])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=_xe(i,yxe),c=B.Children.count(o),u=this.state.style;if(typeof o=="function")return o(u);if(!s||c===0||a<=0)return o;var f=function(d){var v=d.props,y=v.style,g=y===void 0?{}:y,p=v.className,x=B.cloneElement(d,Wi(Wi({},l),{},{style:Wi(Wi({},g),u),className:p}));return x};return c===1?f(B.Children.only(o)):G.createElement("div",null,B.Children.map(o,function(h){return f(h)}))}}]),n}(B.PureComponent);lo.displayName="Animate";lo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};lo.propTypes={from:je.oneOfType([je.object,je.string]),to:je.oneOfType([je.object,je.string]),attributeName:je.string,duration:je.number,begin:je.number,easing:je.oneOfType([je.string,je.func]),steps:je.arrayOf(je.shape({duration:je.number.isRequired,style:je.object.isRequired,easing:je.oneOfType([je.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),je.func]),properties:je.arrayOf("string"),onAnimationEnd:je.func})),children:je.oneOfType([je.node,je.func]),isActive:je.bool,canBegin:je.bool,onAnimationEnd:je.func,shouldReAnimate:je.bool,onAnimationStart:je.func,onAnimationReStart:je.func};je.object,je.object,je.object,je.element;je.object,je.object,je.object,je.oneOfType([je.array,je.element]),je.any;function mp(t){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mp(t)}function vy(){return vy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vy.apply(this,arguments)}function Ixe(t,e){return kxe(t)||Lxe(t,e)||Dxe(t,e)||Nxe()}function Nxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dxe(t,e){if(t){if(typeof t=="string")return sD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sD(t,e)}}function sD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Lxe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function kxe(t){if(Array.isArray(t))return t}function lD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lD(Object(n),!0).forEach(function(r){jxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jxe(t,e,n){return e=Uxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uxe(t){var e=Fxe(t,"string");return mp(e)=="symbol"?e:e+""}function Fxe(t,e){if(mp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uD=function(e,n,r,i,o){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,u;if(a>0&&o instanceof Array){for(var f=[0,0,0,0],h=0,d=4;h<d;h++)f[h]=o[h]>a?a:o[h];u="M".concat(e,",").concat(n+s*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(c,",").concat(e+l*f[0],",").concat(n)),u+="L ".concat(e+r-l*f[1],",").concat(n),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+s*f[1])),u+="L ".concat(e+r,",").concat(n+i-s*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(c,`,
        `).concat(e+r-l*f[2],",").concat(n+i)),u+="L ".concat(e+l*f[3],",").concat(n+i),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+i-s*f[3])),u+="Z"}else if(a>0&&o===+o&&o>0){var v=Math.min(a,o);u="M ".concat(e,",").concat(n+s*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(e+l*v,",").concat(n,`
            L `).concat(e+r-l*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(e+r,",").concat(n+s*v,`
            L `).concat(e+r,",").concat(n+i-s*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(e+r-l*v,",").concat(n+i,`
            L `).concat(e+l*v,",").concat(n+i,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(e,",").concat(n+i-s*v," Z")}else u="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return u},Vxe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,o=n.x,a=n.y,s=n.width,l=n.height;if(Math.abs(s)>0&&Math.abs(l)>0){var c=Math.min(o,o+s),u=Math.max(o,o+s),f=Math.min(a,a+l),h=Math.max(a,a+l);return r>=c&&r<=u&&i>=f&&i<=h}return!1},Bxe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},BA=function(e){var n=cD(cD({},Bxe),e),r=B.useRef(),i=B.useState(-1),o=Ixe(i,2),a=o[0],s=o[1];B.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var E=r.current.getTotalLength();E&&s(E)}catch{}},[]);var l=n.x,c=n.y,u=n.width,f=n.height,h=n.radius,d=n.className,v=n.animationEasing,y=n.animationDuration,g=n.animationBegin,p=n.isAnimationActive,x=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||f!==+f||u===0||f===0)return null;var _=_t("recharts-rectangle",d);return x?G.createElement(lo,{canBegin:a>0,from:{width:u,height:f,x:l,y:c},to:{width:u,height:f,x:l,y:c},duration:y,animationEasing:v,isActive:x},function(E){var b=E.width,M=E.height,S=E.x,A=E.y;return G.createElement(lo,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:y,isActive:p,easing:v},G.createElement("path",vy({},Ke(n,!0),{className:_,d:uD(S,A,b,M,h),ref:r})))}):G.createElement("path",vy({},Ke(n,!0),{className:_,d:uD(l,c,u,f,h)}))},$xe=["points","className","baseLinePoints","connectNulls"];function cu(){return cu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cu.apply(this,arguments)}function zxe(t,e){if(t==null)return{};var n=Hxe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hxe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function fD(t){return Xxe(t)||qxe(t)||Wxe(t)||Gxe()}function Gxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wxe(t,e){if(t){if(typeof t=="string")return uS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uS(t,e)}}function qxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Xxe(t){if(Array.isArray(t))return uS(t)}function uS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var hD=function(e){return e&&e.x===+e.x&&e.y===+e.y},Kxe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){hD(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),hD(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},fd=function(e,n){var r=Kxe(e);n&&(r=[r.reduce(function(o,a){return[].concat(fD(o),fD(a))},[])]);var i=r.map(function(o){return o.reduce(function(a,s,l){return"".concat(a).concat(l===0?"M":"L").concat(s.x,",").concat(s.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},Yxe=function(e,n,r){var i=fd(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(fd(n.reverse(),r).slice(1))},Qxe=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,o=e.connectNulls,a=zxe(e,$xe);if(!n||!n.length)return null;var s=_t("recharts-polygon",r);if(i&&i.length){var l=a.stroke&&a.stroke!=="none",c=Yxe(n,i,o);return G.createElement("g",{className:s},G.createElement("path",cu({},Ke(a,!0),{fill:c.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:c})),l?G.createElement("path",cu({},Ke(a,!0),{fill:"none",d:fd(n,o)})):null,l?G.createElement("path",cu({},Ke(a,!0),{fill:"none",d:fd(i,o)})):null)}var u=fd(n,o);return G.createElement("path",cu({},Ke(a,!0),{fill:u.slice(-1)==="Z"?a.fill:"none",className:s,d:u}))};function fS(){return fS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fS.apply(this,arguments)}var em=function(e){var n=e.cx,r=e.cy,i=e.r,o=e.className,a=_t("recharts-dot",o);return n===+n&&r===+r&&i===+i?G.createElement("circle",fS({},Ke(e,!1),jv(e),{className:a,cx:n,cy:r,r:i})):null};function gp(t){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gp(t)}var Zxe=["x","y","top","left","width","height","className"];function hS(){return hS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hS.apply(this,arguments)}function dD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jxe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dD(Object(n),!0).forEach(function(r){ebe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ebe(t,e,n){return e=tbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tbe(t){var e=nbe(t,"string");return gp(e)=="symbol"?e:e+""}function nbe(t,e){if(gp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rbe(t,e){if(t==null)return{};var n=ibe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ibe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var obe=function(e,n,r,i,o,a){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},abe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.top,s=a===void 0?0:a,l=e.left,c=l===void 0?0:l,u=e.width,f=u===void 0?0:u,h=e.height,d=h===void 0?0:h,v=e.className,y=rbe(e,Zxe),g=Jxe({x:r,y:o,top:s,left:c,width:f,height:d},y);return!Ae(r)||!Ae(o)||!Ae(f)||!Ae(d)||!Ae(s)||!Ae(c)?null:G.createElement("path",hS({},Ke(g,!0),{className:_t("recharts-cross",v),d:obe(r,o,f,d,s,c)}))},sbe=t_,lbe=FV,cbe=jo;function ube(t,e){return t&&t.length?sbe(t,cbe(e),lbe):void 0}var fbe=ube;const hbe=Ft(fbe);var dbe=t_,pbe=jo,mbe=VV;function gbe(t,e){return t&&t.length?dbe(t,pbe(e),mbe):void 0}var vbe=gbe;const ybe=Ft(vbe);var _be=["cx","cy","angle","ticks","axisLine"],xbe=["ticks","tick","angle","tickFormatter","stroke"];function Ju(t){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ju(t)}function hd(){return hd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hd.apply(this,arguments)}function pD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pD(Object(n),!0).forEach(function(r){o_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mD(t,e){if(t==null)return{};var n=bbe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bbe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function wbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MB(r.key),r)}}function Sbe(t,e,n){return e&&gD(t.prototype,e),n&&gD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ebe(t,e,n){return e=yy(e),Tbe(t,AB()?Reflect.construct(e,n||[],yy(t).constructor):e.apply(t,n))}function Tbe(t,e){if(e&&(Ju(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Abe(t)}function Abe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AB=function(){return!!t})()}function yy(t){return yy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yy(t)}function Mbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dS(t,e)}function dS(t,e){return dS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dS(t,e)}function o_(t,e,n){return e=MB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MB(t){var e=Pbe(t,"string");return Ju(e)=="symbol"?e:e+""}function Pbe(t,e){if(Ju(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ju(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var a_=function(t){function e(){return wbe(this,e),Ebe(this,e,arguments)}return Mbe(e,t),Sbe(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,o=this.props,a=o.angle,s=o.cx,l=o.cy;return Qt(s,l,i,a)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,o=r.cy,a=r.angle,s=r.ticks,l=hbe(s,function(u){return u.coordinate||0}),c=ybe(s,function(u){return u.coordinate||0});return{cx:i,cy:o,startAngle:a,endAngle:a,innerRadius:c.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,a=r.angle,s=r.ticks,l=r.axisLine,c=mD(r,_be),u=s.reduce(function(v,y){return[Math.min(v[0],y.coordinate),Math.max(v[1],y.coordinate)]},[1/0,-1/0]),f=Qt(i,o,u[0],a),h=Qt(i,o,u[1],a),d=Qs(Qs(Qs({},Ke(c,!1)),{},{fill:"none"},Ke(l,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return G.createElement("line",hd({className:"recharts-polar-radius-axis-line"},d))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,a=i.tick,s=i.angle,l=i.tickFormatter,c=i.stroke,u=mD(i,xbe),f=this.getTickTextAnchor(),h=Ke(u,!1),d=Ke(a,!1),v=o.map(function(y,g){var p=r.getTickValueCoord(y),x=Qs(Qs(Qs(Qs({textAnchor:f,transform:"rotate(".concat(90-s,", ").concat(p.x,", ").concat(p.y,")")},h),{},{stroke:"none",fill:c},d),{},{index:g},p),{},{payload:y});return G.createElement(St,hd({className:_t("recharts-polar-radius-axis-tick",pB(a)),key:"tick-".concat(y.coordinate)},Vl(r.props,y,g)),e.renderTickItem(a,x,l?l(y.value,g):y.value))});return G.createElement(St,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.axisLine,a=r.tick;return!i||!i.length?null:G.createElement(St,{className:_t("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),a&&this.renderTicks(),Qn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,o){var a;return G.isValidElement(r)?a=G.cloneElement(r,i):ot(r)?a=r(i):a=G.createElement(Bl,hd({},i,{className:"recharts-polar-radius-axis-tick-value"}),o),a}}])}(B.PureComponent);o_(a_,"displayName","PolarRadiusAxis");o_(a_,"axisType","radiusAxis");o_(a_,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}function ul(){return ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ul.apply(this,arguments)}function vD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vD(Object(n),!0).forEach(function(r){s_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CB(r.key),r)}}function Rbe(t,e,n){return e&&yD(t.prototype,e),n&&yD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Obe(t,e,n){return e=_y(e),Ibe(t,PB()?Reflect.construct(e,n||[],_y(t).constructor):e.apply(t,n))}function Ibe(t,e){if(e&&(ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nbe(t)}function Nbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PB=function(){return!!t})()}function _y(t){return _y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_y(t)}function Dbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pS(t,e)}function pS(t,e){return pS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},pS(t,e)}function s_(t,e,n){return e=CB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CB(t){var e=Lbe(t,"string");return ef(e)=="symbol"?e:e+""}function Lbe(t,e){if(ef(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kbe=Math.PI/180,_D=1e-5,l_=function(t){function e(){return Cbe(this,e),Obe(this,e,arguments)}return Dbe(e,t),Rbe(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.cx,a=i.cy,s=i.radius,l=i.orientation,c=i.tickSize,u=c||8,f=Qt(o,a,s,r.coordinate),h=Qt(o,a,s+(l==="inner"?-1:1)*u,r.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,o=Math.cos(-r.coordinate*kbe),a;return o>_D?a=i==="outer"?"start":"end":o<-_D?a=i==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,a=r.radius,s=r.axisLine,l=r.axisLineType,c=Zs(Zs({},Ke(this.props,!1)),{},{fill:"none"},Ke(s,!1));if(l==="circle")return G.createElement(em,ul({className:"recharts-polar-angle-axis-line"},c,{cx:i,cy:o,r:a}));var u=this.props.ticks,f=u.map(function(h){return Qt(i,o,a,h.coordinate)});return G.createElement(Qxe,ul({className:"recharts-polar-angle-axis-line"},c,{points:f}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,a=i.tick,s=i.tickLine,l=i.tickFormatter,c=i.stroke,u=Ke(this.props,!1),f=Ke(a,!1),h=Zs(Zs({},u),{},{fill:"none"},Ke(s,!1)),d=o.map(function(v,y){var g=r.getTickLineCoord(v),p=r.getTickTextAnchor(v),x=Zs(Zs(Zs({textAnchor:p},u),{},{stroke:"none",fill:c},f),{},{index:y,payload:v,x:g.x2,y:g.y2});return G.createElement(St,ul({className:_t("recharts-polar-angle-axis-tick",pB(a)),key:"tick-".concat(v.coordinate)},Vl(r.props,v,y)),s&&G.createElement("line",ul({className:"recharts-polar-angle-axis-tick-line"},h,g)),a&&e.renderTickItem(a,x,l?l(v.value,y):v.value))});return G.createElement(St,{className:"recharts-polar-angle-axis-ticks"},d)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.radius,a=r.axisLine;return o<=0||!i||!i.length?null:G.createElement(St,{className:_t("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,o){var a;return G.isValidElement(r)?a=G.cloneElement(r,i):ot(r)?a=r(i):a=G.createElement(Bl,ul({},i,{className:"recharts-polar-angle-axis-tick-value"}),o),a}}])}(B.PureComponent);s_(l_,"displayName","PolarAngleAxis");s_(l_,"axisType","angleAxis");s_(l_,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var jbe=L4,Ube=jbe(Object.getPrototypeOf,Object),Fbe=Ube,Vbe=Pa,Bbe=Fbe,$be=Ca,zbe="[object Object]",Hbe=Function.prototype,Gbe=Object.prototype,RB=Hbe.toString,Wbe=Gbe.hasOwnProperty,qbe=RB.call(Object);function Xbe(t){if(!$be(t)||Vbe(t)!=zbe)return!1;var e=Bbe(t);if(e===null)return!0;var n=Wbe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&RB.call(n)==qbe}var Kbe=Xbe;const Ybe=Ft(Kbe);var Qbe=Pa,Zbe=Ca,Jbe="[object Boolean]";function e1e(t){return t===!0||t===!1||Zbe(t)&&Qbe(t)==Jbe}var t1e=e1e;const n1e=Ft(t1e);function vp(t){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(t)}function xy(){return xy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xy.apply(this,arguments)}function r1e(t,e){return s1e(t)||a1e(t,e)||o1e(t,e)||i1e()}function i1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o1e(t,e){if(t){if(typeof t=="string")return xD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xD(t,e)}}function xD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a1e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function s1e(t){if(Array.isArray(t))return t}function bD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bD(Object(n),!0).forEach(function(r){l1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l1e(t,e,n){return e=c1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c1e(t){var e=u1e(t,"string");return vp(e)=="symbol"?e:e+""}function u1e(t,e){if(vp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SD=function(e,n,r,i,o){var a=r-i,s;return s="M ".concat(e,",").concat(n),s+="L ".concat(e+r,",").concat(n),s+="L ".concat(e+r-a/2,",").concat(n+o),s+="L ".concat(e+r-a/2-i,",").concat(n+o),s+="L ".concat(e,",").concat(n," Z"),s},f1e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},h1e=function(e){var n=wD(wD({},f1e),e),r=B.useRef(),i=B.useState(-1),o=r1e(i,2),a=o[0],s=o[1];B.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&s(_)}catch{}},[]);var l=n.x,c=n.y,u=n.upperWidth,f=n.lowerWidth,h=n.height,d=n.className,v=n.animationEasing,y=n.animationDuration,g=n.animationBegin,p=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||f!==+f||h!==+h||u===0&&f===0||h===0)return null;var x=_t("recharts-trapezoid",d);return p?G.createElement(lo,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:c},to:{upperWidth:u,lowerWidth:f,height:h,x:l,y:c},duration:y,animationEasing:v,isActive:p},function(_){var E=_.upperWidth,b=_.lowerWidth,M=_.height,S=_.x,A=_.y;return G.createElement(lo,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:y,easing:v},G.createElement("path",xy({},Ke(n,!0),{className:x,d:SD(S,A,E,b,M),ref:r})))}):G.createElement("g",null,G.createElement("path",xy({},Ke(n,!0),{className:x,d:SD(l,c,u,f,h)})))},d1e=["option","shapeType","propTransformer","activeClassName","isActive"];function yp(t){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yp(t)}function p1e(t,e){if(t==null)return{};var n=m1e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function m1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ED(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function by(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ED(Object(n),!0).forEach(function(r){g1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ED(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g1e(t,e,n){return e=v1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v1e(t){var e=y1e(t,"string");return yp(e)=="symbol"?e:e+""}function y1e(t,e){if(yp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _1e(t,e){return by(by({},e),t)}function x1e(t,e){return t==="symbols"}function TD(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return G.createElement(BA,n);case"trapezoid":return G.createElement(h1e,n);case"sector":return G.createElement(vB,n);case"symbols":if(x1e(e))return G.createElement(aA,n);break;default:return null}}function b1e(t){return B.isValidElement(t)?t.props:t}function OB(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?_1e:r,o=t.activeClassName,a=o===void 0?"recharts-active-shape":o,s=t.isActive,l=p1e(t,d1e),c;if(B.isValidElement(e))c=B.cloneElement(e,by(by({},l),b1e(e)));else if(ot(e))c=e(l);else if(Ybe(e)&&!n1e(e)){var u=i(e,l);c=G.createElement(TD,{shapeType:n,elementProps:u})}else{var f=l;c=G.createElement(TD,{shapeType:n,elementProps:f})}return s?G.createElement(St,{className:a},c):c}function c_(t,e){return e!=null&&"trapezoids"in t.props}function u_(t,e){return e!=null&&"sectors"in t.props}function _p(t,e){return e!=null&&"points"in t.props}function w1e(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,o=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&o}function S1e(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function E1e(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function T1e(t,e){var n;return c_(t,e)?n=w1e:u_(t,e)?n=S1e:_p(t,e)&&(n=E1e),n}function A1e(t,e){var n;return c_(t,e)?n="trapezoids":u_(t,e)?n="sectors":_p(t,e)&&(n="points"),n}function M1e(t,e){if(c_(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(u_(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return _p(t,e)?e.payload:{}}function P1e(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=A1e(n,e),o=M1e(n,e),a=r.filter(function(l,c){var u=$l(o,l),f=n.props[i].filter(function(v){var y=T1e(n,e);return y(v,e)}),h=n.props[i].indexOf(f[f.length-1]),d=c===h;return u&&d}),s=r.indexOf(a[a.length-1]);return s}var Gg;function tf(t){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tf(t)}function uu(){return uu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uu.apply(this,arguments)}function AD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AD(Object(n),!0).forEach(function(r){Ci(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function C1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,NB(r.key),r)}}function R1e(t,e,n){return e&&MD(t.prototype,e),n&&MD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function O1e(t,e,n){return e=wy(e),I1e(t,IB()?Reflect.construct(e,n||[],wy(t).constructor):e.apply(t,n))}function I1e(t,e){if(e&&(tf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N1e(t)}function N1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IB=function(){return!!t})()}function wy(t){return wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wy(t)}function D1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mS(t,e)}function mS(t,e){return mS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mS(t,e)}function Ci(t,e,n){return e=NB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NB(t){var e=L1e(t,"string");return tf(e)=="symbol"?e:e+""}function L1e(t,e){if(tf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Oa=function(t){function e(n){var r;return C1e(this,e),r=O1e(this,e,[n]),Ci(r,"pieRef",null),Ci(r,"sectorRefs",[]),Ci(r,"id",Zl("recharts-pie-")),Ci(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),ot(i)&&i()}),Ci(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),ot(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return D1e(e,t),R1e(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.label,s=o.labelLine,l=o.dataKey,c=o.valueKey,u=Ke(this.props,!1),f=Ke(a,!1),h=Ke(s,!1),d=a&&a.offsetRadius||20,v=r.map(function(y,g){var p=(y.startAngle+y.endAngle)/2,x=Qt(y.cx,y.cy,y.outerRadius+d,p),_=Xt(Xt(Xt(Xt({},u),y),{},{stroke:"none"},f),{},{index:g,textAnchor:e.getTextAnchor(x.x,y.cx)},x),E=Xt(Xt(Xt(Xt({},u),y),{},{fill:"none",stroke:y.fill},h),{},{index:g,points:[Qt(y.cx,y.cy,y.outerRadius,p),x]}),b=l;return ft(l)&&ft(c)?b="value":ft(l)&&(b=c),G.createElement(St,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(g)},s&&e.renderLabelLineItem(s,E,"line"),e.renderLabelItem(a,_,Sn(y,b)))});return G.createElement(St,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(r){var i=this,o=this.props,a=o.activeShape,s=o.blendStroke,l=o.inactiveShape;return r.map(function(c,u){if((c==null?void 0:c.startAngle)===0&&(c==null?void 0:c.endAngle)===0&&r.length!==1)return null;var f=i.isActiveIndex(u),h=l&&i.hasActiveIndex()?l:null,d=f?a:h,v=Xt(Xt({},c),{},{stroke:s?c.fill:c.stroke,tabIndex:-1});return G.createElement(St,uu({ref:function(g){g&&!i.sectorRefs.includes(g)&&i.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},Vl(i.props,c,u),{key:"sector-".concat(c==null?void 0:c.startAngle,"-").concat(c==null?void 0:c.endAngle,"-").concat(c.midAngle,"-").concat(u)}),G.createElement(OB,uu({option:d,isActive:f,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,o=i.sectors,a=i.isAnimationActive,s=i.animationBegin,l=i.animationDuration,c=i.animationEasing,u=i.animationId,f=this.state,h=f.prevSectors,d=f.prevIsAnimationActive;return G.createElement(lo,{begin:s,duration:l,isActive:a,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(d),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var y=v.t,g=[],p=o&&o[0],x=p.startAngle;return o.forEach(function(_,E){var b=h&&h[E],M=E>0?fi(_,"paddingAngle",0):0;if(b){var S=Un(b.endAngle-b.startAngle,_.endAngle-_.startAngle),A=Xt(Xt({},_),{},{startAngle:x+M,endAngle:x+S(y)+M});g.push(A),x=A.endAngle}else{var T=_.endAngle,P=_.startAngle,R=Un(0,T-P),N=R(y),I=Xt(Xt({},_),{},{startAngle:x+M,endAngle:x+N+M});g.push(I),x=I.endAngle}}),G.createElement(St,null,r.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var a=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"ArrowRight":{var s=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,o=r.isAnimationActive,a=this.state.prevSectors;return o&&i&&i.length&&(!a||!$l(a,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,o=i.hide,a=i.sectors,s=i.className,l=i.label,c=i.cx,u=i.cy,f=i.innerRadius,h=i.outerRadius,d=i.isAnimationActive,v=this.state.isAnimationFinished;if(o||!a||!a.length||!Ae(c)||!Ae(u)||!Ae(f)||!Ae(h))return null;var y=_t("recharts-pie",s);return G.createElement(St,{tabIndex:this.props.rootTabIndex,className:y,ref:function(p){r.pieRef=p}},this.renderSectors(),l&&this.renderLabels(a),Qn.renderCallByParent(this.props,null,!1),(!d||v)&&Mo.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,o){if(G.isValidElement(r))return G.cloneElement(r,i);if(ot(r))return r(i);var a=_t("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return G.createElement(Ol,uu({},i,{key:o,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(r,i,o){if(G.isValidElement(r))return G.cloneElement(r,i);var a=o;if(ot(r)&&(a=r(i),G.isValidElement(a)))return a;var s=_t("recharts-pie-label-text",typeof r!="boolean"&&!ot(r)?r.className:"");return G.createElement(Bl,uu({},i,{alignmentBaseline:"middle",className:s}),a)}}])}(B.PureComponent);Gg=Oa;Ci(Oa,"displayName","Pie");Ci(Oa,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!ao.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ci(Oa,"parseDeltaAngle",function(t,e){var n=kr(e-t),r=Math.min(Math.abs(e-t),360);return n*r});Ci(Oa,"getRealPieData",function(t){var e=t.data,n=t.children,r=Ke(t,!1),i=hi(n,Kd);return e&&e.length?e.map(function(o,a){return Xt(Xt(Xt({payload:o},r),o),i&&i[a]&&i[a].props)}):i&&i.length?i.map(function(o){return Xt(Xt({},r),o.props)}):[]});Ci(Oa,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,o=e.height,a=dB(i,o),s=r+jr(t.cx,i,i/2),l=n+jr(t.cy,o,o/2),c=jr(t.innerRadius,a,0),u=jr(t.outerRadius,a,a*.8),f=t.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:s,cy:l,innerRadius:c,outerRadius:u,maxRadius:f}});Ci(Oa,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?Xt(Xt({},e.type.defaultProps),e.props):e.props,i=Gg.getRealPieData(r);if(!i||!i.length)return null;var o=r.cornerRadius,a=r.startAngle,s=r.endAngle,l=r.paddingAngle,c=r.dataKey,u=r.nameKey,f=r.valueKey,h=r.tooltipType,d=Math.abs(r.minAngle),v=Gg.parseCoordinateOfPie(r,n),y=Gg.parseDeltaAngle(a,s),g=Math.abs(y),p=c;ft(c)&&ft(f)?(oo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),p="value"):ft(c)&&(oo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),p=f);var x=i.filter(function(A){return Sn(A,p,0)!==0}).length,_=(g>=360?x:x-1)*l,E=g-x*d-_,b=i.reduce(function(A,T){var P=Sn(T,p,0);return A+(Ae(P)?P:0)},0),M;if(b>0){var S;M=i.map(function(A,T){var P=Sn(A,p,0),R=Sn(A,u,T),N=(Ae(P)?P:0)/b,I;T?I=S.endAngle+kr(y)*l*(P!==0?1:0):I=a;var D=I+kr(y)*((P!==0?d:0)+N*E),L=(I+D)/2,q=(v.innerRadius+v.outerRadius)/2,$=[{name:R,value:P,payload:A,dataKey:p,type:h}],V=Qt(v.cx,v.cy,q,L);return S=Xt(Xt(Xt({percent:N,cornerRadius:o,name:R,tooltipPayload:$,midAngle:L,middleRadius:q,tooltipPosition:V},A),v),{},{value:Sn(A,p),startAngle:I,endAngle:D,payload:A,paddingAngle:kr(y)*l}),S})}return Xt(Xt({},v),{},{sectors:M,data:i})});var k1e=Math.ceil,j1e=Math.max;function U1e(t,e,n,r){for(var i=-1,o=j1e(k1e((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}var F1e=U1e,V1e=eV,PD=1/0,B1e=17976931348623157e292;function $1e(t){if(!t)return t===0?t:0;if(t=V1e(t),t===PD||t===-PD){var e=t<0?-1:1;return e*B1e}return t===t?t:0}var DB=$1e,z1e=F1e,H1e=X0,Sb=DB;function G1e(t){return function(e,n,r){return r&&typeof r!="number"&&H1e(e,n,r)&&(n=r=void 0),e=Sb(e),n===void 0?(n=e,e=0):n=Sb(n),r=r===void 0?e<n?1:-1:Sb(r),z1e(e,n,r,t)}}var W1e=G1e,q1e=W1e,X1e=q1e(),K1e=X1e;const Sy=Ft(K1e);function xp(t){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xp(t)}function CD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CD(Object(n),!0).forEach(function(r){LB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LB(t,e,n){return e=Y1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y1e(t){var e=Q1e(t,"string");return xp(e)=="symbol"?e:e+""}function Q1e(t,e){if(xp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Z1e=["Webkit","Moz","O","ms"],J1e=function(e,n){var r=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=Z1e.reduce(function(o,a){return RD(RD({},o),{},LB({},a+r,n))},{});return i[e]=n,i};function nf(t){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nf(t)}function Ey(){return Ey=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ey.apply(this,arguments)}function OD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Eb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OD(Object(n),!0).forEach(function(r){ii(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ewe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ID(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jB(r.key),r)}}function twe(t,e,n){return e&&ID(t.prototype,e),n&&ID(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nwe(t,e,n){return e=Ty(e),rwe(t,kB()?Reflect.construct(e,n||[],Ty(t).constructor):e.apply(t,n))}function rwe(t,e){if(e&&(nf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iwe(t)}function iwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kB=function(){return!!t})()}function Ty(t){return Ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ty(t)}function owe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gS(t,e)}function gS(t,e){return gS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},gS(t,e)}function ii(t,e,n){return e=jB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jB(t){var e=awe(t,"string");return nf(e)=="symbol"?e:e+""}function awe(t,e){if(nf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var swe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,o=e.x,a=e.width,s=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=ld().domain(Sy(0,l)).range([o,o+a-s]),u=c.domain().map(function(f){return c(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:u}},ND=function(e){return e.changedTouches&&!!e.changedTouches.length},rf=function(t){function e(n){var r;return ewe(this,e),r=nwe(this,e,[n]),ii(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),ii(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),ii(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,o=i.endIndex,a=i.onDragEnd,s=i.startIndex;a==null||a({endIndex:o,startIndex:s})}),r.detachDragEndListener()}),ii(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),ii(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),ii(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),ii(r,"handleSlideDragStart",function(i){var o=ND(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return owe(e,t),twe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,o=r.endX,a=this.state.scaleValues,s=this.props,l=s.gap,c=s.data,u=c.length-1,f=Math.min(i,o),h=Math.max(i,o),d=e.getIndexInRange(a,f),v=e.getIndexInRange(a,h);return{startIndex:d-d%l,endIndex:v===u?u:v-v%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,o=i.data,a=i.tickFormatter,s=i.dataKey,l=Sn(o[r],s,r);return ot(a)?a(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,o=i.slideMoveStartX,a=i.startX,s=i.endX,l=this.props,c=l.x,u=l.width,f=l.travellerWidth,h=l.startIndex,d=l.endIndex,v=l.onChange,y=r.pageX-o;y>0?y=Math.min(y,c+u-f-s,c+u-f-a):y<0&&(y=Math.max(y,c-a,c-s));var g=this.getIndex({startX:a+y,endX:s+y});(g.startIndex!==h||g.endIndex!==d)&&v&&v(g),this.setState({startX:a+y,endX:s+y,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var o=ND(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,o=i.brushMoveStartX,a=i.movingTravellerId,s=i.endX,l=i.startX,c=this.state[a],u=this.props,f=u.x,h=u.width,d=u.travellerWidth,v=u.onChange,y=u.gap,g=u.data,p={startX:this.state.startX,endX:this.state.endX},x=r.pageX-o;x>0?x=Math.min(x,f+h-d-c):x<0&&(x=Math.max(x,f-c)),p[a]=c+x;var _=this.getIndex(p),E=_.startIndex,b=_.endIndex,M=function(){var A=g.length-1;return a==="startX"&&(s>l?E%y===0:b%y===0)||s<l&&b===A||a==="endX"&&(s>l?b%y===0:E%y===0)||s>l&&b===A};this.setState(ii(ii({},a,c+x),"brushMoveStartX",r.pageX),function(){v&&M()&&v(_)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var o=this,a=this.state,s=a.scaleValues,l=a.startX,c=a.endX,u=this.state[i],f=s.indexOf(u);if(f!==-1){var h=f+r;if(!(h===-1||h>=s.length)){var d=s[h];i==="startX"&&d>=c||i==="endX"&&d<=l||this.setState(ii({},i,d),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.fill,c=r.stroke;return G.createElement("rect",{stroke:c,fill:l,x:i,y:o,width:a,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.data,c=r.children,u=r.padding,f=B.Children.only(c);return f?G.cloneElement(f,{x:i,y:o,width:a,height:s,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var o,a,s=this,l=this.props,c=l.y,u=l.travellerWidth,f=l.height,h=l.traveller,d=l.ariaLabel,v=l.data,y=l.startIndex,g=l.endIndex,p=Math.max(r,this.props.x),x=Eb(Eb({},Ke(this.props,!1)),{},{x:p,y:c,width:u,height:f}),_=d||"Min value: ".concat((o=v[y])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=v[g])===null||a===void 0?void 0:a.name);return G.createElement(St,{tabIndex:0,role:"slider","aria-label":_,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(b){["ArrowLeft","ArrowRight"].includes(b.key)&&(b.preventDefault(),b.stopPropagation(),s.handleTravellerMoveKeyboard(b.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,x))}},{key:"renderSlide",value:function(r,i){var o=this.props,a=o.y,s=o.height,l=o.stroke,c=o.travellerWidth,u=Math.min(r,i)+c,f=Math.max(Math.abs(i-r)-c,0);return G.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:a,width:f,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,o=r.endIndex,a=r.y,s=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,f=u.startX,h=u.endX,d=5,v={pointerEvents:"none",fill:c};return G.createElement(St,{className:"recharts-brush-texts"},G.createElement(Bl,Ey({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-d,y:a+s/2},v),this.getTextOfTick(i)),G.createElement(Bl,Ey({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+l+d,y:a+s/2},v),this.getTextOfTick(o)))}},{key:"render",value:function(){var r=this.props,i=r.data,o=r.className,a=r.children,s=r.x,l=r.y,c=r.width,u=r.height,f=r.alwaysShowText,h=this.state,d=h.startX,v=h.endX,y=h.isTextActive,g=h.isSlideMoving,p=h.isTravellerMoving,x=h.isTravellerFocused;if(!i||!i.length||!Ae(s)||!Ae(l)||!Ae(c)||!Ae(u)||c<=0||u<=0)return null;var _=_t("recharts-brush",o),E=G.Children.count(a)===1,b=J1e("userSelect","none");return G.createElement(St,{className:_,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),E&&this.renderPanorama(),this.renderSlide(d,v),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(v,"endX"),(y||g||p||x||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,o=r.y,a=r.width,s=r.height,l=r.stroke,c=Math.floor(o+s/2)-1;return G.createElement(G.Fragment,null,G.createElement("rect",{x:i,y:o,width:a,height:s,fill:l,stroke:"none"}),G.createElement("line",{x1:i+1,y1:c,x2:i+a-1,y2:c,fill:"none",stroke:"#fff"}),G.createElement("line",{x1:i+1,y1:c+2,x2:i+a-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var o;return G.isValidElement(r)?o=G.cloneElement(r,i):ot(r)?o=r(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(r,i){var o=r.data,a=r.width,s=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,f=r.endIndex;if(o!==i.prevData||c!==i.prevUpdateId)return Eb({prevData:o,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:a},o&&o.length?swe({data:o,width:a,x:s,travellerWidth:l,startIndex:u,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||s!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([s,s+a-l]);var h=i.scale.domain().map(function(d){return i.scale(d)});return{prevData:o,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var o=r.length,a=0,s=o-1;s-a>1;){var l=Math.floor((a+s)/2);r[l]>i?s=l:a=l}return i>=r[s]?s:a}}])}(B.PureComponent);ii(rf,"displayName","Brush");ii(rf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var lwe=dA;function cwe(t,e){var n;return lwe(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}var uwe=cwe,fwe=M4,hwe=jo,dwe=uwe,pwe=Zr,mwe=X0;function gwe(t,e,n){var r=pwe(t)?fwe:dwe;return n&&mwe(t,e,n)&&(e=void 0),r(t,hwe(e))}var vwe=gwe;const ywe=Ft(vwe);var Po=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},DD=K4;function _we(t,e,n){e=="__proto__"&&DD?DD(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var xwe=_we,bwe=xwe,wwe=q4,Swe=jo;function Ewe(t,e){var n={};return e=Swe(e),wwe(t,function(r,i,o){bwe(n,i,e(r,i,o))}),n}var Twe=Ewe;const Awe=Ft(Twe);function Mwe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var Pwe=Mwe,Cwe=dA;function Rwe(t,e){var n=!0;return Cwe(t,function(r,i,o){return n=!!e(r,i,o),n}),n}var Owe=Rwe,Iwe=Pwe,Nwe=Owe,Dwe=jo,Lwe=Zr,kwe=X0;function jwe(t,e,n){var r=Lwe(t)?Iwe:Nwe;return n&&kwe(t,e,n)&&(e=void 0),r(t,Dwe(e))}var Uwe=jwe;const UB=Ft(Uwe);var Fwe=["x","y"];function bp(t){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp(t)}function vS(){return vS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vS.apply(this,arguments)}function LD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Oh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LD(Object(n),!0).forEach(function(r){Vwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vwe(t,e,n){return e=Bwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bwe(t){var e=$we(t,"string");return bp(e)=="symbol"?e:e+""}function $we(t,e){if(bp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zwe(t,e){if(t==null)return{};var n=Hwe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hwe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Gwe(t,e){var n=t.x,r=t.y,i=zwe(t,Fwe),o="".concat(n),a=parseInt(o,10),s="".concat(r),l=parseInt(s,10),c="".concat(e.height||i.height),u=parseInt(c,10),f="".concat(e.width||i.width),h=parseInt(f,10);return Oh(Oh(Oh(Oh(Oh({},e),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:u,width:h,name:e.name,radius:e.radius})}function kD(t){return G.createElement(OB,vS({shapeType:"rectangle",propTransformer:Gwe,activeClassName:"recharts-active-bar"},t))}var Wwe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var o=typeof r=="number";return o?e(r,i):(o||Hl(),n)}},qwe=["value","background"],FB;function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(t)}function Xwe(t,e){if(t==null)return{};var n=Kwe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Kwe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ay(){return Ay=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ay.apply(this,arguments)}function jD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jD(Object(n),!0).forEach(function(r){ts(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ywe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BB(r.key),r)}}function Qwe(t,e,n){return e&&UD(t.prototype,e),n&&UD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zwe(t,e,n){return e=My(e),Jwe(t,VB()?Reflect.construct(e,n||[],My(t).constructor):e.apply(t,n))}function Jwe(t,e){if(e&&(of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eSe(t)}function eSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VB=function(){return!!t})()}function My(t){return My=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},My(t)}function tSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yS(t,e)}function yS(t,e){return yS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yS(t,e)}function ts(t,e,n){return e=BB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BB(t){var e=nSe(t,"string");return of(e)=="symbol"?e:e+""}function nSe(t,e){if(of(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tc=function(t){function e(){var n;Ywe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Zwe(this,e,[].concat(i)),ts(n,"state",{isAnimationFinished:!1}),ts(n,"id",Zl("recharts-bar-")),ts(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),ts(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return tSe(e,t),Qwe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,o=this.props,a=o.shape,s=o.dataKey,l=o.activeIndex,c=o.activeBar,u=Ke(this.props,!1);return r&&r.map(function(f,h){var d=h===l,v=d?c:a,y=Cn(Cn(Cn({},u),f),{},{isActive:d,option:v,index:h,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return G.createElement(St,Ay({className:"recharts-bar-rectangle"},Vl(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value)}),G.createElement(kD,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,o=i.data,a=i.layout,s=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,f=i.animationId,h=this.state.prevData;return G.createElement(lo,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(d){var v=d.t,y=o.map(function(g,p){var x=h&&h[p];if(x){var _=Un(x.x,g.x),E=Un(x.y,g.y),b=Un(x.width,g.width),M=Un(x.height,g.height);return Cn(Cn({},g),{},{x:_(v),y:E(v),width:b(v),height:M(v)})}if(a==="horizontal"){var S=Un(0,g.height),A=S(v);return Cn(Cn({},g),{},{y:g.y+g.height-A,height:A})}var T=Un(0,g.width),P=T(v);return Cn(Cn({},g),{},{width:P})});return G.createElement(St,null,r.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,o=r.isAnimationActive,a=this.state.prevData;return o&&i&&i.length&&(!a||!$l(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,o=i.data,a=i.dataKey,s=i.activeIndex,l=Ke(this.props.background,!1);return o.map(function(c,u){c.value;var f=c.background,h=Xwe(c,qwe);if(!f)return null;var d=Cn(Cn(Cn(Cn(Cn({},h),{},{fill:"#eee"},f),l),Vl(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:u,className:"recharts-bar-background-rectangle"});return G.createElement(kD,Ay({key:"background-bar-".concat(u),option:r.props.background,isActive:u===s},d))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,s=o.xAxis,l=o.yAxis,c=o.layout,u=o.children,f=hi(u,Jp);if(!f)return null;var h=c==="vertical"?a[0].height/2:a[0].width/2,d=function(g,p){var x=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:x,errorVal:Sn(g,p)}},v={clipPath:r?"url(#clipPath-".concat(i,")"):null};return G.createElement(St,v,f.map(function(y){return G.cloneElement(y,{key:"error-bar-".concat(i,"-").concat(y.props.dataKey),data:a,xAxis:s,yAxis:l,layout:c,offset:h,dataPointFormatter:d})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.data,a=r.className,s=r.xAxis,l=r.yAxis,c=r.left,u=r.top,f=r.width,h=r.height,d=r.isAnimationActive,v=r.background,y=r.id;if(i||!o||!o.length)return null;var g=this.state.isAnimationFinished,p=_t("recharts-bar",a),x=s&&s.allowDataOverflow,_=l&&l.allowDataOverflow,E=x||_,b=ft(y)?this.id:y;return G.createElement(St,{className:p},x||_?G.createElement("defs",null,G.createElement("clipPath",{id:"clipPath-".concat(b)},G.createElement("rect",{x:x?c:c-f/2,y:_?u:u-h/2,width:x?f:f*2,height:_?h:h*2}))):null,G.createElement(St,{className:"recharts-bar-rectangles",clipPath:E?"url(#clipPath-".concat(b,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(E,b),(!d||g)&&Mo.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(B.PureComponent);FB=tc;ts(tc,"displayName","Bar");ts(tc,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ao.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ts(tc,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,a=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,f=t.displayedData,h=t.offset,d=Qye(r,n);if(!d)return null;var v=e.layout,y=n.type.defaultProps,g=y!==void 0?Cn(Cn({},y),n.props):n.props,p=g.dataKey,x=g.children,_=g.minPointSize,E=v==="horizontal"?a:o,b=c?E.scale.domain():null,M=i0e({numericAxis:E}),S=hi(x,Kd),A=f.map(function(T,P){var R,N,I,D,L,q;c?R=Zye(c[u+P],b):(R=Sn(T,p),Array.isArray(R)||(R=[M,R]));var $=Wwe(_,FB.defaultProps.minPointSize)(R[1],P);if(v==="horizontal"){var V,X=[a.scale(R[0]),a.scale(R[1])],K=X[0],z=X[1];N=MN({axis:o,ticks:s,bandSize:i,offset:d.offset,entry:T,index:P}),I=(V=z??K)!==null&&V!==void 0?V:void 0,D=d.size;var W=K-z;if(L=Number.isNaN(W)?0:W,q={x:N,y:a.y,width:D,height:a.height},Math.abs($)>0&&Math.abs(L)<Math.abs($)){var ee=kr(L||$)*(Math.abs($)-Math.abs(L));I-=ee,L+=ee}}else{var me=[o.scale(R[0]),o.scale(R[1])],_e=me[0],Ne=me[1];if(N=_e,I=MN({axis:a,ticks:l,bandSize:i,offset:d.offset,entry:T,index:P}),D=Ne-_e,L=d.size,q={x:o.x,y:I,width:o.width,height:L},Math.abs($)>0&&Math.abs(D)<Math.abs($)){var We=kr(D||$)*(Math.abs($)-Math.abs(D));D+=We}}return Cn(Cn(Cn({},T),{},{x:N,y:I,width:D,height:L,value:c?R:R[1],payload:T,background:q},S&&S[P]&&S[P].props),{},{tooltipPayload:[fB(n,T)],tooltipPosition:{x:N+D/2,y:I+L/2}})});return Cn({data:A,layout:v},h)});function wp(t){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wp(t)}function rSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$B(r.key),r)}}function iSe(t,e,n){return e&&FD(t.prototype,e),n&&FD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function VD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ki(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VD(Object(n),!0).forEach(function(r){f_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function f_(t,e,n){return e=$B(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $B(t){var e=oSe(t,"string");return wp(e)=="symbol"?e:e+""}function oSe(t,e){if(wp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $A=function(e,n,r,i,o){var a=e.width,s=e.height,l=e.layout,c=e.children,u=Object.keys(n),f={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},h=!!ai(c,tc);return u.reduce(function(d,v){var y=n[v],g=y.orientation,p=y.domain,x=y.padding,_=x===void 0?{}:x,E=y.mirror,b=y.reversed,M="".concat(g).concat(E?"Mirror":""),S,A,T,P,R;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var N=p[1]-p[0],I=1/0,D=y.categoricalDomain.sort();if(D.forEach(function(me,_e){_e>0&&(I=Math.min((me||0)-(D[_e-1]||0),I))}),Number.isFinite(I)){var L=I/N,q=y.layout==="vertical"?r.height:r.width;if(y.padding==="gap"&&(S=L*q/2),y.padding==="no-gap"){var $=jr(e.barCategoryGap,L*q),V=L*q/2;S=V-$-(V-$)/q*$}}}i==="xAxis"?A=[r.left+(_.left||0)+(S||0),r.left+r.width-(_.right||0)-(S||0)]:i==="yAxis"?A=l==="horizontal"?[r.top+r.height-(_.bottom||0),r.top+(_.top||0)]:[r.top+(_.top||0)+(S||0),r.top+r.height-(_.bottom||0)-(S||0)]:A=y.range,b&&(A=[A[1],A[0]]);var X=sB(y,o,h),K=X.scale,z=X.realScaleType;K.domain(p).range(A),lB(K);var W=cB(K,Ki(Ki({},y),{},{realScaleType:z}));i==="xAxis"?(R=g==="top"&&!E||g==="bottom"&&E,T=r.left,P=f[M]-R*y.height):i==="yAxis"&&(R=g==="left"&&!E||g==="right"&&E,T=f[M]-R*y.width,P=r.top);var ee=Ki(Ki(Ki({},y),W),{},{realScaleType:z,x:T,y:P,scale:K,width:i==="xAxis"?r.width:y.width,height:i==="yAxis"?r.height:y.height});return ee.bandSize=fy(ee,W),!y.hide&&i==="xAxis"?f[M]+=(R?-1:1)*ee.height:y.hide||(f[M]+=(R?-1:1)*ee.width),Ki(Ki({},d),{},f_({},v,ee))},{})},zB=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return{x:Math.min(r,o),y:Math.min(i,a),width:Math.abs(o-r),height:Math.abs(a-i)}},aSe=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2;return zB({x:n,y:r},{x:i,y:o})},HB=function(){function t(e){rSe(this,t),this.scale=e}return iSe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(n)+s}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?n>=i&&n<=o:n>=o&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();f_(HB,"EPS",1e-4);var zA=function(e){var n=Object.keys(e).reduce(function(r,i){return Ki(Ki({},r),{},f_({},i,HB.create(e[i])))},{});return Ki(Ki({},n),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.bandAware,s=o.position;return Awe(i,function(l,c){return n[c].apply(l,{bandAware:a,position:s})})},isInRange:function(i){return UB(i,function(o,a){return n[a].isInRange(o)})}})};function sSe(t){return(t%180+180)%180}var lSe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=sSe(i),a=o*Math.PI/180,s=Math.atan(r/n),l=a>s&&a<Math.PI-s?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)},cSe=jo,uSe=Xp,fSe=W0;function hSe(t){return function(e,n,r){var i=Object(e);if(!uSe(e)){var o=cSe(n);e=fSe(e),n=function(s){return o(i[s],s,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}var dSe=hSe,pSe=DB;function mSe(t){var e=pSe(t),n=e%1;return e===e?n?e-n:e:0}var gSe=mSe,vSe=B4,ySe=jo,_Se=gSe,xSe=Math.max;function bSe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:_Se(n);return i<0&&(i=xSe(r+i,0)),vSe(t,ySe(e),i)}var wSe=bSe,SSe=dSe,ESe=wSe,TSe=SSe(ESe),ASe=TSe;const MSe=Ft(ASe);var PSe=Fne(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),HA=B.createContext(void 0),GA=B.createContext(void 0),GB=B.createContext(void 0),WB=B.createContext({}),qB=B.createContext(void 0),XB=B.createContext(0),KB=B.createContext(0),BD=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,o=n.offset,a=e.clipPathId,s=e.children,l=e.width,c=e.height,u=PSe(o);return G.createElement(HA.Provider,{value:r},G.createElement(GA.Provider,{value:i},G.createElement(WB.Provider,{value:o},G.createElement(GB.Provider,{value:u},G.createElement(qB.Provider,{value:a},G.createElement(XB.Provider,{value:c},G.createElement(KB.Provider,{value:l},s)))))))},CSe=function(){return B.useContext(qB)},YB=function(e){var n=B.useContext(HA);n==null&&Hl();var r=n[e];return r==null&&Hl(),r},RSe=function(){var e=B.useContext(HA);return Ka(e)},OSe=function(){var e=B.useContext(GA),n=MSe(e,function(r){return UB(r.domain,Number.isFinite)});return n||Ka(e)},QB=function(e){var n=B.useContext(GA);n==null&&Hl();var r=n[e];return r==null&&Hl(),r},ISe=function(){var e=B.useContext(GB);return e},NSe=function(){return B.useContext(WB)},WA=function(){return B.useContext(KB)},qA=function(){return B.useContext(XB)};function af(t){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},af(t)}function DSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JB(r.key),r)}}function kSe(t,e,n){return e&&LSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jSe(t,e,n){return e=Py(e),USe(t,ZB()?Reflect.construct(e,n||[],Py(t).constructor):e.apply(t,n))}function USe(t,e){if(e&&(af(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FSe(t)}function FSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZB=function(){return!!t})()}function Py(t){return Py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Py(t)}function VSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_S(t,e)}function _S(t,e){return _S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_S(t,e)}function $D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$D(Object(n),!0).forEach(function(r){XA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$D(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XA(t,e,n){return e=JB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JB(t){var e=BSe(t,"string");return af(e)=="symbol"?e:e+""}function BSe(t,e){if(af(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Se(t,e){return WSe(t)||GSe(t,e)||HSe(t,e)||zSe()}function zSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HSe(t,e){if(t){if(typeof t=="string")return HD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HD(t,e)}}function HD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function GSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function WSe(t){if(Array.isArray(t))return t}function xS(){return xS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xS.apply(this,arguments)}var qSe=function(e,n){var r;return G.isValidElement(e)?r=G.cloneElement(e,n):ot(e)?r=e(n):r=G.createElement("line",xS({},n,{className:"recharts-reference-line-line"})),r},XSe=function(e,n,r,i,o,a,s,l,c){var u=o.x,f=o.y,h=o.width,d=o.height;if(r){var v=c.y,y=e.y.apply(v,{position:a});if(Po(c,"discard")&&!e.y.isInRange(y))return null;var g=[{x:u+h,y},{x:u,y}];return l==="left"?g.reverse():g}if(n){var p=c.x,x=e.x.apply(p,{position:a});if(Po(c,"discard")&&!e.x.isInRange(x))return null;var _=[{x,y:f+d},{x,y:f}];return s==="top"?_.reverse():_}if(i){var E=c.segment,b=E.map(function(M){return e.apply(M,{position:a})});return Po(c,"discard")&&ywe(b,function(M){return!e.isInRange(M)})?null:b}return null};function KSe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,o=t.yAxisId,a=t.shape,s=t.className,l=t.alwaysShow,c=CSe(),u=YB(i),f=QB(o),h=ISe();if(!c||!h)return null;oo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=zA({x:u.scale,y:f.scale}),v=Vn(e),y=Vn(n),g=r&&r.length===2,p=XSe(d,v,y,g,h,t.position,u.orientation,f.orientation,t);if(!p)return null;var x=$Se(p,2),_=x[0],E=_.x,b=_.y,M=x[1],S=M.x,A=M.y,T=Po(t,"hidden")?"url(#".concat(c,")"):void 0,P=zD(zD({clipPath:T},Ke(t,!0)),{},{x1:E,y1:b,x2:S,y2:A});return G.createElement(St,{className:_t("recharts-reference-line",s)},qSe(a,P),Qn.renderCallByParent(t,aSe({x1:E,y1:b,x2:S,y2:A})))}var KA=function(t){function e(){return DSe(this,e),jSe(this,e,arguments)}return VSe(e,t),kSe(e,[{key:"render",value:function(){return G.createElement(KSe,this.props)}}])}(G.Component);XA(KA,"displayName","ReferenceLine");XA(KA,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function bS(){return bS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bS.apply(this,arguments)}function sf(t){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sf(t)}function GD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GD(Object(n),!0).forEach(function(r){h_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,t5(r.key),r)}}function ZSe(t,e,n){return e&&QSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function JSe(t,e,n){return e=Cy(e),eEe(t,e5()?Reflect.construct(e,n||[],Cy(t).constructor):e.apply(t,n))}function eEe(t,e){if(e&&(sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tEe(t)}function tEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e5=function(){return!!t})()}function Cy(t){return Cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cy(t)}function nEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wS(t,e)}function wS(t,e){return wS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wS(t,e)}function h_(t,e,n){return e=t5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t5(t){var e=rEe(t,"string");return sf(e)=="symbol"?e:e+""}function rEe(t,e){if(sf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iEe=function(e){var n=e.x,r=e.y,i=e.xAxis,o=e.yAxis,a=zA({x:i.scale,y:o.scale}),s=a.apply({x:n,y:r},{bandAware:!0});return Po(e,"discard")&&!a.isInRange(s)?null:s},d_=function(t){function e(){return YSe(this,e),JSe(this,e,arguments)}return nEe(e,t),ZSe(e,[{key:"render",value:function(){var r=this.props,i=r.x,o=r.y,a=r.r,s=r.alwaysShow,l=r.clipPathId,c=Vn(i),u=Vn(o);if(oo(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var f=iEe(this.props);if(!f)return null;var h=f.x,d=f.y,v=this.props,y=v.shape,g=v.className,p=Po(this.props,"hidden")?"url(#".concat(l,")"):void 0,x=WD(WD({clipPath:p},Ke(this.props,!0)),{},{cx:h,cy:d});return G.createElement(St,{className:_t("recharts-reference-dot",g)},e.renderDot(y,x),Qn.renderCallByParent(this.props,{x:h-a,y:d-a,width:2*a,height:2*a}))}}])}(G.Component);h_(d_,"displayName","ReferenceDot");h_(d_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});h_(d_,"renderDot",function(t,e){var n;return G.isValidElement(t)?n=G.cloneElement(t,e):ot(t)?n=t(e):n=G.createElement(em,bS({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function SS(){return SS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SS.apply(this,arguments)}function lf(t){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(t)}function qD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qD(Object(n),!0).forEach(function(r){p_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aEe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r5(r.key),r)}}function sEe(t,e,n){return e&&aEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lEe(t,e,n){return e=Ry(e),cEe(t,n5()?Reflect.construct(e,n||[],Ry(t).constructor):e.apply(t,n))}function cEe(t,e){if(e&&(lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uEe(t)}function uEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n5=function(){return!!t})()}function Ry(t){return Ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ry(t)}function fEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ES(t,e)}function ES(t,e){return ES=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ES(t,e)}function p_(t,e,n){return e=r5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r5(t){var e=hEe(t,"string");return lf(e)=="symbol"?e:e+""}function hEe(t,e){if(lf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dEe=function(e,n,r,i,o){var a=o.x1,s=o.x2,l=o.y1,c=o.y2,u=o.xAxis,f=o.yAxis;if(!u||!f)return null;var h=zA({x:u.scale,y:f.scale}),d={x:e?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(l,{position:"start"}):h.y.rangeMin},v={x:n?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(c,{position:"end"}):h.y.rangeMax};return Po(o,"discard")&&(!h.isInRange(d)||!h.isInRange(v))?null:zB(d,v)},m_=function(t){function e(){return oEe(this,e),lEe(this,e,arguments)}return fEe(e,t),sEe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,o=r.x2,a=r.y1,s=r.y2,l=r.className,c=r.alwaysShow,u=r.clipPathId;oo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Vn(i),h=Vn(o),d=Vn(a),v=Vn(s),y=this.props.shape;if(!f&&!h&&!d&&!v&&!y)return null;var g=dEe(f,h,d,v,this.props);if(!g&&!y)return null;var p=Po(this.props,"hidden")?"url(#".concat(u,")"):void 0;return G.createElement(St,{className:_t("recharts-reference-area",l)},e.renderRect(y,XD(XD({clipPath:p},Ke(this.props,!0)),g)),Qn.renderCallByParent(this.props,g))}}])}(G.Component);p_(m_,"displayName","ReferenceArea");p_(m_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});p_(m_,"renderRect",function(t,e){var n;return G.isValidElement(t)?n=G.cloneElement(t,e):ot(t)?n=t(e):n=G.createElement(BA,SS({},e,{className:"recharts-reference-area-rect"})),n});function i5(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function pEe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return lSe(r,n)}function mEe(t,e,n){var r=n==="width",i=t.x,o=t.y,a=t.width,s=t.height;return e===1?{start:r?i:o,end:r?i+a:o+s}:{start:r?i+a:o+s,end:r?i:o}}function Oy(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function gEe(t,e){return i5(t,e+1)}function vEe(t,e,n,r,i){for(var o=(r||[]).slice(),a=e.start,s=e.end,l=0,c=1,u=a,f=function(){var v=r==null?void 0:r[l];if(v===void 0)return{v:i5(r,c)};var y=l,g,p=function(){return g===void 0&&(g=n(v,y)),g},x=v.coordinate,_=l===0||Oy(t,x,p,u,s);_||(l=0,u=a,c+=1),_&&(u=x+t*(p()/2+i),l+=c)},h;c<=o.length;)if(h=f(),h)return h.v;return[]}function Sp(t){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sp(t)}function KD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KD(Object(n),!0).forEach(function(r){yEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yEe(t,e,n){return e=_Ee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Ee(t){var e=xEe(t,"string");return Sp(e)=="symbol"?e:e+""}function xEe(t,e){if(Sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bEe(t,e,n,r,i){for(var o=(r||[]).slice(),a=o.length,s=e.start,l=e.end,c=function(h){var d=o[h],v,y=function(){return v===void 0&&(v=n(d,h)),v};if(h===a-1){var g=t*(d.coordinate+t*y()/2-l);o[h]=d=xr(xr({},d),{},{tickCoord:g>0?d.coordinate-g*t:d.coordinate})}else o[h]=d=xr(xr({},d),{},{tickCoord:d.coordinate});var p=Oy(t,d.tickCoord,y,s,l);p&&(l=d.tickCoord-t*(y()/2+i),o[h]=xr(xr({},d),{},{isShow:!0}))},u=a-1;u>=0;u--)c(u);return o}function wEe(t,e,n,r,i,o){var a=(r||[]).slice(),s=a.length,l=e.start,c=e.end;if(o){var u=r[s-1],f=n(u,s-1),h=t*(u.coordinate+t*f/2-c);a[s-1]=u=xr(xr({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate});var d=Oy(t,u.tickCoord,function(){return f},l,c);d&&(c=u.tickCoord-t*(f/2+i),a[s-1]=xr(xr({},u),{},{isShow:!0}))}for(var v=o?s-1:s,y=function(x){var _=a[x],E,b=function(){return E===void 0&&(E=n(_,x)),E};if(x===0){var M=t*(_.coordinate-t*b()/2-l);a[x]=_=xr(xr({},_),{},{tickCoord:M<0?_.coordinate-M*t:_.coordinate})}else a[x]=_=xr(xr({},_),{},{tickCoord:_.coordinate});var S=Oy(t,_.tickCoord,b,l,c);S&&(l=_.tickCoord+t*(b()/2+i),a[x]=xr(xr({},_),{},{isShow:!0}))},g=0;g<v;g++)y(g);return a}function YA(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,a=t.minTickGap,s=t.orientation,l=t.interval,c=t.tickFormatter,u=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(Ae(l)||ao.isSsr)return gEe(i,typeof l=="number"&&Ae(l)?l:0);var h=[],d=s==="top"||s==="bottom"?"width":"height",v=u&&d==="width"?sd(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},y=function(_,E){var b=ot(c)?c(_.value,E):_.value;return d==="width"?pEe(sd(b,{fontSize:e,letterSpacing:n}),v,f):sd(b,{fontSize:e,letterSpacing:n})[d]},g=i.length>=2?kr(i[1].coordinate-i[0].coordinate):1,p=mEe(o,g,d);return l==="equidistantPreserveStart"?vEe(g,p,y,i,a):(l==="preserveStart"||l==="preserveStartEnd"?h=wEe(g,p,y,i,a,l==="preserveStartEnd"):h=bEe(g,p,y,i,a),h.filter(function(x){return x.isShow}))}var SEe=["viewBox"],EEe=["viewBox"],TEe=["ticks"];function cf(t){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(t)}function fu(){return fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fu.apply(this,arguments)}function YD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YD(Object(n),!0).forEach(function(r){QA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tb(t,e){if(t==null)return{};var n=AEe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function AEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function MEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a5(r.key),r)}}function PEe(t,e,n){return e&&QD(t.prototype,e),n&&QD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function CEe(t,e,n){return e=Iy(e),REe(t,o5()?Reflect.construct(e,n||[],Iy(t).constructor):e.apply(t,n))}function REe(t,e){if(e&&(cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OEe(t)}function OEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o5=function(){return!!t})()}function Iy(t){return Iy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Iy(t)}function IEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TS(t,e)}function TS(t,e){return TS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},TS(t,e)}function QA(t,e,n){return e=a5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a5(t){var e=NEe(t,"string");return cf(e)=="symbol"?e:e+""}function NEe(t,e){if(cf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hf=function(t){function e(n){var r;return MEe(this,e),r=CEe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return IEe(e,t),PEe(e,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,a=Tb(r,SEe),s=this.props,l=s.viewBox,c=Tb(s,EEe);return!wu(o,l)||!wu(a,c)||!wu(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,a=i.y,s=i.width,l=i.height,c=i.orientation,u=i.tickSize,f=i.mirror,h=i.tickMargin,d,v,y,g,p,x,_=f?-1:1,E=r.tickSize||u,b=Ae(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":d=v=r.coordinate,g=a+ +!f*l,y=g-_*E,x=y-_*h,p=b;break;case"left":y=g=r.coordinate,v=o+ +!f*s,d=v-_*E,p=d-_*h,x=b;break;case"right":y=g=r.coordinate,v=o+ +f*s,d=v+_*E,p=d+_*h,x=b;break;default:d=v=r.coordinate,g=a+ +f*l,y=g+_*E,x=y+_*h,p=b;break}return{line:{x1:d,y1:y,x2:v,y2:g},tick:{x:p,y:x}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a;switch(i){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,f=Cr(Cr(Cr({},Ke(this.props,!1)),Ke(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!c||l==="bottom"&&c);f=Cr(Cr({},f),{},{x1:i,y1:o+h*s,x2:i+a,y2:o+h*s})}else{var d=+(l==="left"&&!c||l==="right"&&c);f=Cr(Cr({},f),{},{x1:i+d*a,y1:o,x2:i+d*a,y2:o+s})}return G.createElement("line",fu({},f,{className:_t("recharts-cartesian-axis-line",fi(u,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var a=this,s=this.props,l=s.tickLine,c=s.stroke,u=s.tick,f=s.tickFormatter,h=s.unit,d=YA(Cr(Cr({},this.props),{},{ticks:r}),i,o),v=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),g=Ke(this.props,!1),p=Ke(u,!1),x=Cr(Cr({},g),{},{fill:"none"},Ke(l,!1)),_=d.map(function(E,b){var M=a.getTickLineCoord(E),S=M.line,A=M.tick,T=Cr(Cr(Cr(Cr({textAnchor:v,verticalAnchor:y},g),{},{stroke:"none",fill:c},p),A),{},{index:b,payload:E,visibleTicksCount:d.length,tickFormatter:f});return G.createElement(St,fu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(E.value,"-").concat(E.coordinate,"-").concat(E.tickCoord)},Vl(a.props,E,b)),l&&G.createElement("line",fu({},x,S,{className:_t("recharts-cartesian-axis-tick-line",fi(l,"className"))})),u&&e.renderTickItem(u,T,"".concat(ot(f)?f(E.value,b):E.value).concat(h||"")))});return G.createElement("g",{className:"recharts-cartesian-axis-ticks"},_)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,a=i.width,s=i.height,l=i.ticksGenerator,c=i.className,u=i.hide;if(u)return null;var f=this.props,h=f.ticks,d=Tb(f,TEe),v=h;return ot(l)&&(v=h&&h.length>0?l(this.props):l(d)),a<=0||s<=0||!v||!v.length?null:G.createElement(St,{className:_t("recharts-cartesian-axis",c),ref:function(g){r.layerReference=g}},o&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Qn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var a;return G.isValidElement(r)?a=G.cloneElement(r,i):ot(r)?a=r(i):a=G.createElement(Bl,fu({},i,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(B.Component);QA(Hf,"displayName","CartesianAxis");QA(Hf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var DEe=["x1","y1","x2","y2","key"],LEe=["offset"];function Gl(t){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gl(t)}function ZD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Er(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZD(Object(n),!0).forEach(function(r){kEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kEe(t,e,n){return e=jEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jEe(t){var e=UEe(t,"string");return Gl(e)=="symbol"?e:e+""}function UEe(t,e){if(Gl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xl(){return xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xl.apply(this,arguments)}function JD(t,e){if(t==null)return{};var n=FEe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function FEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var VEe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,o=e.y,a=e.width,s=e.height,l=e.ry;return G.createElement("rect",{x:i,y:o,ry:l,width:a,height:s,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function s5(t,e){var n;if(G.isValidElement(t))n=G.cloneElement(t,e);else if(ot(t))n=t(e);else{var r=e.x1,i=e.y1,o=e.x2,a=e.y2,s=e.key,l=JD(e,DEe),c=Ke(l,!1);c.offset;var u=JD(c,LEe);n=G.createElement("line",xl({},u,{x1:r,y1:i,x2:o,y2:a,fill:"none",key:s}))}return n}function BEe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,o=t.horizontalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,l){var c=Er(Er({},t),{},{x1:e,y1:s,x2:e+n,y2:s,key:"line-".concat(l),index:l});return s5(i,c)});return G.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function $Ee(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,o=t.verticalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,l){var c=Er(Er({},t),{},{x1:s,y1:e,x2:s,y2:e+n,key:"line-".concat(l),index:l});return s5(i,c)});return G.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function zEe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,o=t.width,a=t.height,s=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var u=s.map(function(h){return Math.round(h+i-i)}).sort(function(h,d){return h-d});i!==u[0]&&u.unshift(0);var f=u.map(function(h,d){var v=!u[d+1],y=v?i+a-h:u[d+1]-h;if(y<=0)return null;var g=d%e.length;return G.createElement("rect",{key:"react-".concat(d),y:h,x:r,height:y,width:o,stroke:"none",fill:e[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return G.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function HEe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,o=t.x,a=t.y,s=t.width,l=t.height,c=t.verticalPoints;if(!n||!r||!r.length)return null;var u=c.map(function(h){return Math.round(h+o-o)}).sort(function(h,d){return h-d});o!==u[0]&&u.unshift(0);var f=u.map(function(h,d){var v=!u[d+1],y=v?o+s-h:u[d+1]-h;if(y<=0)return null;var g=d%r.length;return G.createElement("rect",{key:"react-".concat(d),x:h,y:a,width:y,height:l,stroke:"none",fill:r[g],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return G.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var GEe=function(e,n){var r=e.xAxis,i=e.width,o=e.height,a=e.offset;return aB(YA(Er(Er(Er({},Hf.defaultProps),r),{},{ticks:ia(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.left,a.left+a.width,n)},WEe=function(e,n){var r=e.yAxis,i=e.width,o=e.height,a=e.offset;return aB(YA(Er(Er(Er({},Hf.defaultProps),r),{},{ticks:ia(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.top,a.top+a.height,n)},Nc={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Gf(t){var e,n,r,i,o,a,s=WA(),l=qA(),c=NSe(),u=Er(Er({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Nc.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Nc.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Nc.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Nc.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:Nc.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:Nc.verticalFill,x:Ae(t.x)?t.x:c.left,y:Ae(t.y)?t.y:c.top,width:Ae(t.width)?t.width:c.width,height:Ae(t.height)?t.height:c.height}),f=u.x,h=u.y,d=u.width,v=u.height,y=u.syncWithTicks,g=u.horizontalValues,p=u.verticalValues,x=RSe(),_=OSe();if(!Ae(d)||d<=0||!Ae(v)||v<=0||!Ae(f)||f!==+f||!Ae(h)||h!==+h)return null;var E=u.verticalCoordinatesGenerator||GEe,b=u.horizontalCoordinatesGenerator||WEe,M=u.horizontalPoints,S=u.verticalPoints;if((!M||!M.length)&&ot(b)){var A=g&&g.length,T=b({yAxis:_?Er(Er({},_),{},{ticks:A?g:_.ticks}):void 0,width:s,height:l,offset:c},A?!0:y);oo(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Gl(T),"]")),Array.isArray(T)&&(M=T)}if((!S||!S.length)&&ot(E)){var P=p&&p.length,R=E({xAxis:x?Er(Er({},x),{},{ticks:P?p:x.ticks}):void 0,width:s,height:l,offset:c},P?!0:y);oo(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Gl(R),"]")),Array.isArray(R)&&(S=R)}return G.createElement("g",{className:"recharts-cartesian-grid"},G.createElement(VEe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),G.createElement(BEe,xl({},u,{offset:c,horizontalPoints:M,xAxis:x,yAxis:_})),G.createElement($Ee,xl({},u,{offset:c,verticalPoints:S,xAxis:x,yAxis:_})),G.createElement(zEe,xl({},u,{horizontalPoints:M})),G.createElement(HEe,xl({},u,{verticalPoints:S})))}Gf.displayName="CartesianGrid";var qEe=["type","layout","connectNulls","ref"],XEe=["key"];function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}function eL(t,e){if(t==null)return{};var n=KEe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function KEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dd.apply(this,arguments)}function tL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ri(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tL(Object(n),!0).forEach(function(r){Yi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dc(t){return JEe(t)||ZEe(t)||QEe(t)||YEe()}function YEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QEe(t,e){if(t){if(typeof t=="string")return AS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AS(t,e)}}function ZEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function JEe(t){if(Array.isArray(t))return AS(t)}function AS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function eTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c5(r.key),r)}}function tTe(t,e,n){return e&&nL(t.prototype,e),n&&nL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nTe(t,e,n){return e=Ny(e),rTe(t,l5()?Reflect.construct(e,n||[],Ny(t).constructor):e.apply(t,n))}function rTe(t,e){if(e&&(uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iTe(t)}function iTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l5=function(){return!!t})()}function Ny(t){return Ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ny(t)}function oTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MS(t,e)}function MS(t,e){return MS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},MS(t,e)}function Yi(t,e,n){return e=c5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c5(t){var e=aTe(t,"string");return uf(e)=="symbol"?e:e+""}function aTe(t,e){if(uf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ts=function(t){function e(){var n;eTe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=nTe(this,e,[].concat(i)),Yi(n,"state",{isAnimationFinished:!0,totalLength:0}),Yi(n,"generateSimpleStrokeDasharray",function(a,s){return"".concat(s,"px ").concat(a-s,"px")}),Yi(n,"getStrokeDasharray",function(a,s,l){var c=l.reduce(function(p,x){return p+x});if(!c)return n.generateSimpleStrokeDasharray(s,a);for(var u=Math.floor(a/c),f=a%c,h=s-a,d=[],v=0,y=0;v<l.length;y+=l[v],++v)if(y+l[v]>f){d=[].concat(Dc(l.slice(0,v)),[f-y]);break}var g=d.length%2===0?[0,h]:[h];return[].concat(Dc(e.repeat(l,u)),Dc(d),g).map(function(p){return"".concat(p,"px")}).join(", ")}),Yi(n,"id",Zl("recharts-line-")),Yi(n,"pathRef",function(a){n.mainCurve=a}),Yi(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Yi(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return oTe(e,t),tTe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.points,s=o.xAxis,l=o.yAxis,c=o.layout,u=o.children,f=hi(u,Jp);if(!f)return null;var h=function(y,g){return{x:y.x,y:y.y,value:y.value,errorVal:Sn(y.payload,g)}},d={clipPath:r?"url(#clipPath-".concat(i,")"):null};return G.createElement(St,d,f.map(function(v){return G.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:a,xAxis:s,yAxis:l,layout:c,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,i,o){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,c=s.points,u=s.dataKey,f=Ke(this.props,!1),h=Ke(l,!0),d=c.map(function(y,g){var p=ri(ri(ri({key:"dot-".concat(g),r:3},f),h),{},{value:y.value,dataKey:u,cx:y.x,cy:y.y,index:g,payload:y.payload});return e.renderDotItem(l,p)}),v={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return G.createElement(St,dd({className:"recharts-line-dots",key:"dots"},v),d)}},{key:"renderCurveStatically",value:function(r,i,o,a){var s=this.props,l=s.type,c=s.layout,u=s.connectNulls;s.ref;var f=eL(s,qEe),h=ri(ri(ri({},Ke(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:r},a),{},{type:l,layout:c,connectNulls:u});return G.createElement(Ol,dd({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var o=this,a=this.props,s=a.points,l=a.strokeDasharray,c=a.isAnimationActive,u=a.animationBegin,f=a.animationDuration,h=a.animationEasing,d=a.animationId,v=a.animateNewValues,y=a.width,g=a.height,p=this.state,x=p.prevPoints,_=p.totalLength;return G.createElement(lo,{begin:u,duration:f,isActive:c,easing:h,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(E){var b=E.t;if(x){var M=x.length/s.length,S=s.map(function(N,I){var D=Math.floor(I*M);if(x[D]){var L=x[D],q=Un(L.x,N.x),$=Un(L.y,N.y);return ri(ri({},N),{},{x:q(b),y:$(b)})}if(v){var V=Un(y*2,N.x),X=Un(g/2,N.y);return ri(ri({},N),{},{x:V(b),y:X(b)})}return ri(ri({},N),{},{x:N.x,y:N.y})});return o.renderCurveStatically(S,r,i)}var A=Un(0,_),T=A(b),P;if(l){var R="".concat(l).split(/[,\s]+/gim).map(function(N){return parseFloat(N)});P=o.getStrokeDasharray(T,_,R)}else P=o.generateSimpleStrokeDasharray(_,T);return o.renderCurveStatically(s,r,i,{strokeDasharray:P})})}},{key:"renderCurve",value:function(r,i){var o=this.props,a=o.points,s=o.isAnimationActive,l=this.state,c=l.prevPoints,u=l.totalLength;return s&&a&&a.length&&(!c&&u>0||!$l(c,a))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(a,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,a=i.dot,s=i.points,l=i.className,c=i.xAxis,u=i.yAxis,f=i.top,h=i.left,d=i.width,v=i.height,y=i.isAnimationActive,g=i.id;if(o||!s||!s.length)return null;var p=this.state.isAnimationFinished,x=s.length===1,_=_t("recharts-line",l),E=c&&c.allowDataOverflow,b=u&&u.allowDataOverflow,M=E||b,S=ft(g)?this.id:g,A=(r=Ke(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},T=A.r,P=T===void 0?3:T,R=A.strokeWidth,N=R===void 0?2:R,I=ZF(a)?a:{},D=I.clipDot,L=D===void 0?!0:D,q=P*2+N;return G.createElement(St,{className:_},E||b?G.createElement("defs",null,G.createElement("clipPath",{id:"clipPath-".concat(S)},G.createElement("rect",{x:E?h:h-d/2,y:b?f:f-v/2,width:E?d:d*2,height:b?v:v*2})),!L&&G.createElement("clipPath",{id:"clipPath-dots-".concat(S)},G.createElement("rect",{x:h-q/2,y:f-q/2,width:d+q,height:v+q}))):null,!x&&this.renderCurve(M,S),this.renderErrorBar(M,S),(x||a)&&this.renderDots(M,L,S),(!y||p)&&Mo.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var o=r.length%2!==0?[].concat(Dc(r),[0]):r,a=[],s=0;s<i;++s)a=[].concat(Dc(a),Dc(o));return a}},{key:"renderDotItem",value:function(r,i){var o;if(G.isValidElement(r))o=G.cloneElement(r,i);else if(ot(r))o=r(i);else{var a=i.key,s=eL(i,XEe),l=_t("recharts-line-dot",typeof r!="boolean"?r.className:"");o=G.createElement(em,dd({key:a},s,{className:l}))}return o}}])}(B.PureComponent);Yi(Ts,"displayName","Line");Yi(Ts,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!ao.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Yi(Ts,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,a=t.dataKey,s=t.bandSize,l=t.displayedData,c=t.offset,u=e.layout,f=l.map(function(h,d){var v=Sn(h,a);return u==="horizontal"?{x:uy({axis:n,ticks:i,bandSize:s,entry:h,index:d}),y:ft(v)?null:r.scale(v),value:v,payload:h}:{x:ft(v)?null:n.scale(v),y:uy({axis:r,ticks:o,bandSize:s,entry:h,index:d}),value:v,payload:h}});return ri({points:f,layout:u},c)});var sTe=["layout","type","stroke","connectNulls","isRange","ref"],lTe=["key"],u5;function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function f5(t,e){if(t==null)return{};var n=cTe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cTe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function bl(){return bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bl.apply(this,arguments)}function rL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ba(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rL(Object(n),!0).forEach(function(r){xo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d5(r.key),r)}}function fTe(t,e,n){return e&&iL(t.prototype,e),n&&iL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function hTe(t,e,n){return e=Dy(e),dTe(t,h5()?Reflect.construct(e,n||[],Dy(t).constructor):e.apply(t,n))}function dTe(t,e){if(e&&(ff(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pTe(t)}function pTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h5=function(){return!!t})()}function Dy(t){return Dy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dy(t)}function mTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PS(t,e)}function PS(t,e){return PS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PS(t,e)}function xo(t,e,n){return e=d5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d5(t){var e=gTe(t,"string");return ff(e)=="symbol"?e:e+""}function gTe(t,e){if(ff(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var No=function(t){function e(){var n;uTe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=hTe(this,e,[].concat(i)),xo(n,"state",{isAnimationFinished:!0}),xo(n,"id",Zl("recharts-area-")),xo(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ot(a)&&a()}),xo(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ot(a)&&a()}),n}return mTe(e,t),fTe(e,[{key:"renderDots",value:function(r,i,o){var a=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(a&&!s)return null;var l=this.props,c=l.dot,u=l.points,f=l.dataKey,h=Ke(this.props,!1),d=Ke(c,!0),v=u.map(function(g,p){var x=Ba(Ba(Ba({key:"dot-".concat(p),r:3},h),d),{},{index:p,cx:g.x,cy:g.y,dataKey:f,value:g.value,payload:g.payload,points:u});return e.renderDotItem(c,x)}),y={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return G.createElement(St,bl({className:"recharts-area-dots"},y),v)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,o=i.baseLine,a=i.points,s=i.strokeWidth,l=a[0].x,c=a[a.length-1].x,u=r*Math.abs(l-c),f=es(a.map(function(h){return h.y||0}));return Ae(o)&&typeof o=="number"?f=Math.max(o,f):o&&Array.isArray(o)&&o.length&&(f=Math.max(es(o.map(function(h){return h.y||0})),f)),Ae(f)?G.createElement("rect",{x:l<c?l:l-u,y:0,width:u,height:Math.floor(f+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,o=i.baseLine,a=i.points,s=i.strokeWidth,l=a[0].y,c=a[a.length-1].y,u=r*Math.abs(l-c),f=es(a.map(function(h){return h.x||0}));return Ae(o)&&typeof o=="number"?f=Math.max(o,f):o&&Array.isArray(o)&&o.length&&(f=Math.max(es(o.map(function(h){return h.x||0})),f)),Ae(f)?G.createElement("rect",{x:0,y:l<c?l:l-u,width:f+(s?parseInt("".concat(s),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,o,a){var s=this.props,l=s.layout,c=s.type,u=s.stroke,f=s.connectNulls,h=s.isRange;s.ref;var d=f5(s,sTe);return G.createElement(St,{clipPath:o?"url(#clipPath-".concat(a,")"):null},G.createElement(Ol,bl({},Ke(d,!0),{points:r,connectNulls:f,type:c,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),u!=="none"&&G.createElement(Ol,bl({},Ke(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:f,fill:"none",points:r})),u!=="none"&&h&&G.createElement(Ol,bl({},Ke(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var o=this,a=this.props,s=a.points,l=a.baseLine,c=a.isAnimationActive,u=a.animationBegin,f=a.animationDuration,h=a.animationEasing,d=a.animationId,v=this.state,y=v.prevPoints,g=v.prevBaseLine;return G.createElement(lo,{begin:u,duration:f,isActive:c,easing:h,from:{t:0},to:{t:1},key:"area-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var x=p.t;if(y){var _=y.length/s.length,E=s.map(function(A,T){var P=Math.floor(T*_);if(y[P]){var R=y[P],N=Un(R.x,A.x),I=Un(R.y,A.y);return Ba(Ba({},A),{},{x:N(x),y:I(x)})}return A}),b;if(Ae(l)&&typeof l=="number"){var M=Un(g,l);b=M(x)}else if(ft(l)||kf(l)){var S=Un(g,0);b=S(x)}else b=l.map(function(A,T){var P=Math.floor(T*_);if(g[P]){var R=g[P],N=Un(R.x,A.x),I=Un(R.y,A.y);return Ba(Ba({},A),{},{x:N(x),y:I(x)})}return A});return o.renderAreaStatically(E,b,r,i)}return G.createElement(St,null,G.createElement("defs",null,G.createElement("clipPath",{id:"animationClipPath-".concat(i)},o.renderClipRect(x))),G.createElement(St,{clipPath:"url(#animationClipPath-".concat(i,")")},o.renderAreaStatically(s,l,r,i)))})}},{key:"renderArea",value:function(r,i){var o=this.props,a=o.points,s=o.baseLine,l=o.isAnimationActive,c=this.state,u=c.prevPoints,f=c.prevBaseLine,h=c.totalLength;return l&&a&&a.length&&(!u&&h>0||!$l(u,a)||!$l(f,s))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(a,s,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,a=i.dot,s=i.points,l=i.className,c=i.top,u=i.left,f=i.xAxis,h=i.yAxis,d=i.width,v=i.height,y=i.isAnimationActive,g=i.id;if(o||!s||!s.length)return null;var p=this.state.isAnimationFinished,x=s.length===1,_=_t("recharts-area",l),E=f&&f.allowDataOverflow,b=h&&h.allowDataOverflow,M=E||b,S=ft(g)?this.id:g,A=(r=Ke(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},T=A.r,P=T===void 0?3:T,R=A.strokeWidth,N=R===void 0?2:R,I=ZF(a)?a:{},D=I.clipDot,L=D===void 0?!0:D,q=P*2+N;return G.createElement(St,{className:_},E||b?G.createElement("defs",null,G.createElement("clipPath",{id:"clipPath-".concat(S)},G.createElement("rect",{x:E?u:u-d/2,y:b?c:c-v/2,width:E?d:d*2,height:b?v:v*2})),!L&&G.createElement("clipPath",{id:"clipPath-dots-".concat(S)},G.createElement("rect",{x:u-q/2,y:c-q/2,width:d+q,height:v+q}))):null,x?null:this.renderArea(M,S),(a||x)&&this.renderDots(M,L,S),(!y||p)&&Mo.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(B.PureComponent);u5=No;xo(No,"displayName","Area");xo(No,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!ao.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});xo(No,"getBaseValue",function(t,e,n,r){var i=t.layout,o=t.baseValue,a=e.props.baseValue,s=a??o;if(Ae(s)&&typeof s=="number")return s;var l=i==="horizontal"?r:n,c=l.scale.domain();if(l.type==="number"){var u=Math.max(c[0],c[1]),f=Math.min(c[0],c[1]);return s==="dataMin"?f:s==="dataMax"||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return s==="dataMin"?c[0]:s==="dataMax"?c[1]:c[0]});xo(No,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,o=t.xAxisTicks,a=t.yAxisTicks,s=t.bandSize,l=t.dataKey,c=t.stackedData,u=t.dataStartIndex,f=t.displayedData,h=t.offset,d=e.layout,v=c&&c.length,y=u5.getBaseValue(e,n,r,i),g=d==="horizontal",p=!1,x=f.map(function(E,b){var M;v?M=c[u+b]:(M=Sn(E,l),Array.isArray(M)?p=!0:M=[y,M]);var S=M[1]==null||v&&Sn(E,l)==null;return g?{x:uy({axis:r,ticks:o,bandSize:s,entry:E,index:b}),y:S?null:i.scale(M[1]),value:M,payload:E}:{x:S?null:r.scale(M[1]),y:uy({axis:i,ticks:a,bandSize:s,entry:E,index:b}),value:M,payload:E}}),_;return v||p?_=x.map(function(E){var b=Array.isArray(E.value)?E.value[0]:null;return g?{x:E.x,y:b!=null&&E.y!=null?i.scale(b):null}:{x:b!=null?r.scale(b):null,y:E.y}}):_=g?i.scale(y):r.scale(y),Ba({points:x,baseLine:_,layout:d,isRange:p},h)});xo(No,"renderDotItem",function(t,e){var n;if(G.isValidElement(t))n=G.cloneElement(t,e);else if(ot(t))n=t(e);else{var r=_t("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,o=f5(e,lTe);n=G.createElement(em,bl({},o,{key:i,className:r}))}return n});function hf(t){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(t)}function vTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yTe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g5(r.key),r)}}function _Te(t,e,n){return e&&yTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xTe(t,e,n){return e=Ly(e),bTe(t,p5()?Reflect.construct(e,n||[],Ly(t).constructor):e.apply(t,n))}function bTe(t,e){if(e&&(hf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wTe(t)}function wTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p5=function(){return!!t})()}function Ly(t){return Ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ly(t)}function STe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CS(t,e)}function CS(t,e){return CS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},CS(t,e)}function m5(t,e,n){return e=g5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g5(t){var e=ETe(t,"string");return hf(e)=="symbol"?e:e+""}function ETe(t,e){if(hf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RS(){return RS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RS.apply(this,arguments)}function TTe(t){var e=t.xAxisId,n=WA(),r=qA(),i=YB(e);return i==null?null:G.createElement(Hf,RS({},i,{className:_t("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return ia(a,!0)}}))}var Uo=function(t){function e(){return vTe(this,e),xTe(this,e,arguments)}return STe(e,t),_Te(e,[{key:"render",value:function(){return G.createElement(TTe,this.props)}}])}(G.Component);m5(Uo,"displayName","XAxis");m5(Uo,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function ATe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MTe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_5(r.key),r)}}function PTe(t,e,n){return e&&MTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function CTe(t,e,n){return e=ky(e),RTe(t,v5()?Reflect.construct(e,n||[],ky(t).constructor):e.apply(t,n))}function RTe(t,e){if(e&&(df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OTe(t)}function OTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v5=function(){return!!t})()}function ky(t){return ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ky(t)}function ITe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OS(t,e)}function OS(t,e){return OS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},OS(t,e)}function y5(t,e,n){return e=_5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _5(t){var e=NTe(t,"string");return df(e)=="symbol"?e:e+""}function NTe(t,e){if(df(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IS(){return IS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IS.apply(this,arguments)}var DTe=function(e){var n=e.yAxisId,r=WA(),i=qA(),o=QB(n);return o==null?null:G.createElement(Hf,IS({},o,{className:_t("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return ia(s,!0)}}))},co=function(t){function e(){return ATe(this,e),CTe(this,e,arguments)}return ITe(e,t),PTe(e,[{key:"render",value:function(){return G.createElement(DTe,this.props)}}])}(G.Component);y5(co,"displayName","YAxis");y5(co,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function oL(t){return UTe(t)||jTe(t)||kTe(t)||LTe()}function LTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kTe(t,e){if(t){if(typeof t=="string")return NS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NS(t,e)}}function jTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function UTe(t){if(Array.isArray(t))return NS(t)}function NS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var DS=function(e,n,r,i,o){var a=hi(e,KA),s=hi(e,d_),l=[].concat(oL(a),oL(s)),c=hi(e,m_),u="".concat(i,"Id"),f=i[0],h=n;if(l.length&&(h=l.reduce(function(y,g){if(g.props[u]===r&&Po(g.props,"extendDomain")&&Ae(g.props[f])){var p=g.props[f];return[Math.min(y[0],p),Math.max(y[1],p)]}return y},h)),c.length){var d="".concat(f,"1"),v="".concat(f,"2");h=c.reduce(function(y,g){if(g.props[u]===r&&Po(g.props,"extendDomain")&&Ae(g.props[d])&&Ae(g.props[v])){var p=g.props[d],x=g.props[v];return[Math.min(y[0],p,x),Math.max(y[1],p,x)]}return y},h)}return o&&o.length&&(h=o.reduce(function(y,g){return Ae(g)?[Math.min(y[0],g),Math.max(y[1],g)]:y},h)),h},x5={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function o(l,c,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var d=new i(u,f||l,h),v=n?n+c:c;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],d]:l._events[v].push(d):(l._events[v]=d,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},s.prototype.listeners=function(c){var u=n?n+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,v=new Array(d);h<d;h++)v[h]=f[h].fn;return v},s.prototype.listenerCount=function(c){var u=n?n+c:c,f=this._events[u];return f?f.fn?1:f.length:0},s.prototype.emit=function(c,u,f,h,d,v){var y=n?n+c:c;if(!this._events[y])return!1;var g=this._events[y],p=arguments.length,x,_;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),p){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,f),!0;case 4:return g.fn.call(g.context,u,f,h),!0;case 5:return g.fn.call(g.context,u,f,h,d),!0;case 6:return g.fn.call(g.context,u,f,h,d,v),!0}for(_=1,x=new Array(p-1);_<p;_++)x[_-1]=arguments[_];g.fn.apply(g.context,x)}else{var E=g.length,b;for(_=0;_<E;_++)switch(g[_].once&&this.removeListener(c,g[_].fn,void 0,!0),p){case 1:g[_].fn.call(g[_].context);break;case 2:g[_].fn.call(g[_].context,u);break;case 3:g[_].fn.call(g[_].context,u,f);break;case 4:g[_].fn.call(g[_].context,u,f,h);break;default:if(!x)for(b=1,x=new Array(p-1);b<p;b++)x[b-1]=arguments[b];g[_].fn.apply(g[_].context,x)}}return!0},s.prototype.on=function(c,u,f){return o(this,c,u,f,!1)},s.prototype.once=function(c,u,f){return o(this,c,u,f,!0)},s.prototype.removeListener=function(c,u,f,h){var d=n?n+c:c;if(!this._events[d])return this;if(!u)return a(this,d),this;var v=this._events[d];if(v.fn)v.fn===u&&(!h||v.once)&&(!f||v.context===f)&&a(this,d);else{for(var y=0,g=[],p=v.length;y<p;y++)(v[y].fn!==u||h&&!v[y].once||f&&v[y].context!==f)&&g.push(v[y]);g.length?this._events[d]=g.length===1?g[0]:g:a(this,d)}return this},s.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})(x5);var FTe=x5.exports;const VTe=Ft(FTe);var Ab=new VTe,Mb="recharts.syncMouseEvents";function Ep(t){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(t)}function BTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $Te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b5(r.key),r)}}function zTe(t,e,n){return e&&$Te(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pb(t,e,n){return e=b5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b5(t){var e=HTe(t,"string");return Ep(e)=="symbol"?e:e+""}function HTe(t,e){if(Ep(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var GTe=function(){function t(){BTe(this,t),Pb(this,"activeIndex",0),Pb(this,"coordinateList",[]),Pb(this,"layout","horizontal")}return zTe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,o=i===void 0?null:i,a=n.container,s=a===void 0?null:a,l=n.layout,c=l===void 0?null:l,u=n.offset,f=u===void 0?null:u,h=n.mouseHandlerCallback,d=h===void 0?null:h;this.coordinateList=(r=o??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=c??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=d??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,a=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=o+l+c,h=a+this.offset.top+s/2+u;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function WTe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Ae(r)&&Ae(i))return!0}return!1}function qTe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function w5(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle,a=Qt(e,n,r,i),s=Qt(e,n,r,o);return{points:[a,s],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function XTe(t,e,n){var r,i,o,a;if(t==="horizontal")r=e.x,o=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,f=e.angle,h=Qt(s,l,c,f),d=Qt(s,l,u,f);r=h.x,i=h.y,o=d.x,a=d.y}else return w5(e);return[{x:r,y:i},{x:o,y:a}]}function Tp(t){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tp(t)}function aL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aL(Object(n),!0).forEach(function(r){KTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KTe(t,e,n){return e=YTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YTe(t){var e=QTe(t,"string");return Tp(e)=="symbol"?e:e+""}function QTe(t,e){if(Tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZTe(t){var e,n,r=t.element,i=t.tooltipEventType,o=t.isActive,a=t.activeCoordinate,s=t.activePayload,l=t.offset,c=t.activeTooltipIndex,u=t.tooltipAxisBandSize,f=t.layout,h=t.chartName,d=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!d||!o||!a||h!=="ScatterChart"&&i!=="axis")return null;var v,y=Ol;if(h==="ScatterChart")v=a,y=abe;else if(h==="BarChart")v=qTe(f,a,l,u),y=BA;else if(f==="radial"){var g=w5(a),p=g.cx,x=g.cy,_=g.radius,E=g.startAngle,b=g.endAngle;v={cx:p,cy:x,startAngle:E,endAngle:b,innerRadius:_,outerRadius:_},y=vB}else v={points:XTe(f,a,l)},y=Ol;var M=bg(bg(bg(bg({stroke:"#ccc",pointerEvents:"none"},l),v),Ke(d,!1)),{},{payload:s,payloadIndex:c,className:_t("recharts-tooltip-cursor",d.className)});return B.isValidElement(d)?B.cloneElement(d,M):B.createElement(y,M)}var JTe=["item"],eAe=["children","className","width","height","style","compact","title","desc"];function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}function hu(){return hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hu.apply(this,arguments)}function sL(t,e){return rAe(t)||nAe(t,e)||E5(t,e)||tAe()}function tAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function rAe(t){if(Array.isArray(t))return t}function lL(t,e){if(t==null)return{};var n=iAe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iAe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function oAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aAe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T5(r.key),r)}}function sAe(t,e,n){return e&&aAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lAe(t,e,n){return e=jy(e),cAe(t,S5()?Reflect.construct(e,n||[],jy(t).constructor):e.apply(t,n))}function cAe(t,e){if(e&&(pf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uAe(t)}function uAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S5=function(){return!!t})()}function jy(t){return jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jy(t)}function fAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LS(t,e)}function LS(t,e){return LS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},LS(t,e)}function mf(t){return pAe(t)||dAe(t)||E5(t)||hAe()}function hAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E5(t,e){if(t){if(typeof t=="string")return kS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kS(t,e)}}function dAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pAe(t){if(Array.isArray(t))return kS(t)}function kS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ce(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cL(Object(n),!0).forEach(function(r){it(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function it(t,e,n){return e=T5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T5(t){var e=mAe(t,"string");return pf(e)=="symbol"?e:e+""}function mAe(t,e){if(pf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(pf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gAe={xAxis:["bottom","top"],yAxis:["left","right"]},vAe={width:"100%",height:"100%"},A5={x:0,y:0};function wg(t){return t}var yAe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},_Ae=function(e,n,r,i){var o=n.find(function(u){return u&&u.index===r});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,s=i.radius;return ce(ce(ce({},i),Qt(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var l=o.coordinate,c=i.angle;return ce(ce(ce({},i),Qt(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return A5},g_=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,a=(r??[]).reduce(function(s,l){var c=l.props.data;return c&&c.length?[].concat(mf(s),mf(c)):s},[]);return a.length>0?a:e&&e.length&&Ae(i)&&Ae(o)?e.slice(i,o+1):[]};function M5(t){return t==="number"?[0,"auto"]:void 0}var jS=function(e,n,r,i){var o=e.graphicalItems,a=e.tooltipAxis,s=g_(n,e);return r<0||!o||!o.length||r>=s.length?null:o.reduce(function(l,c){var u,f=(u=c.props.data)!==null&&u!==void 0?u:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(a.dataKey&&!a.allowDuplicatedCategory){var d=f===void 0?s:f;h=kv(d,a.dataKey,i)}else h=f&&f[r]||s[r];return h?[].concat(mf(l),[fB(c,h)]):l},[])},uL=function(e,n,r,i){var o=i||{x:e.chartX,y:e.chartY},a=yAe(o,r),s=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=Gye(a,s,c,l);if(u>=0&&c){var f=c[u]&&c[u].value,h=jS(e,n,u,f),d=_Ae(r,s,u,o);return{activeTooltipIndex:u,activeLabel:f,activePayload:h,activeCoordinate:d}}return null},xAe=function(e,n){var r=n.axes,i=n.graphicalItems,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,f=e.children,h=e.stackOffset,d=oB(u,o);return r.reduce(function(v,y){var g,p=y.type.defaultProps!==void 0?ce(ce({},y.type.defaultProps),y.props):y.props,x=p.type,_=p.dataKey,E=p.allowDataOverflow,b=p.allowDuplicatedCategory,M=p.scale,S=p.ticks,A=p.includeHidden,T=p[a];if(v[T])return v;var P=g_(e.data,{graphicalItems:i.filter(function(W){var ee,me=a in W.props?W.props[a]:(ee=W.type.defaultProps)===null||ee===void 0?void 0:ee[a];return me===T}),dataStartIndex:l,dataEndIndex:c}),R=P.length,N,I,D;WTe(p.domain,E,x)&&(N=Yw(p.domain,null,E),d&&(x==="number"||M!=="auto")&&(D=cd(P,_,"category")));var L=M5(x);if(!N||N.length===0){var q,$=(q=p.domain)!==null&&q!==void 0?q:L;if(_){if(N=cd(P,_,x),x==="category"&&d){var V=kre(N);b&&V?(I=N,N=Sy(0,R)):b||(N=RN($,N,y).reduce(function(W,ee){return W.indexOf(ee)>=0?W:[].concat(mf(W),[ee])},[]))}else if(x==="category")b?N=N.filter(function(W){return W!==""&&!ft(W)}):N=RN($,N,y).reduce(function(W,ee){return W.indexOf(ee)>=0||ee===""||ft(ee)?W:[].concat(mf(W),[ee])},[]);else if(x==="number"){var X=Yye(P,i.filter(function(W){var ee,me,_e=a in W.props?W.props[a]:(ee=W.type.defaultProps)===null||ee===void 0?void 0:ee[a],Ne="hide"in W.props?W.props.hide:(me=W.type.defaultProps)===null||me===void 0?void 0:me.hide;return _e===T&&(A||!Ne)}),_,o,u);X&&(N=X)}d&&(x==="number"||M!=="auto")&&(D=cd(P,_,"category"))}else d?N=Sy(0,R):s&&s[T]&&s[T].hasStack&&x==="number"?N=h==="expand"?[0,1]:uB(s[T].stackGroups,l,c):N=iB(P,i.filter(function(W){var ee=a in W.props?W.props[a]:W.type.defaultProps[a],me="hide"in W.props?W.props.hide:W.type.defaultProps.hide;return ee===T&&(A||!me)}),x,u,!0);if(x==="number")N=DS(f,N,T,o,S),$&&(N=Yw($,N,E));else if(x==="category"&&$){var K=$,z=N.every(function(W){return K.indexOf(W)>=0});z&&(N=K)}}return ce(ce({},v),{},it({},T,ce(ce({},p),{},{axisType:o,domain:N,categoricalDomain:D,duplicateDomain:I,originalDomain:(g=p.domain)!==null&&g!==void 0?g:L,isCategorical:d,layout:u})))},{})},bAe=function(e,n){var r=n.graphicalItems,i=n.Axis,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,f=e.children,h=g_(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),d=h.length,v=oB(u,o),y=-1;return r.reduce(function(g,p){var x=p.type.defaultProps!==void 0?ce(ce({},p.type.defaultProps),p.props):p.props,_=x[a],E=M5("number");if(!g[_]){y++;var b;return v?b=Sy(0,d):s&&s[_]&&s[_].hasStack?(b=uB(s[_].stackGroups,l,c),b=DS(f,b,_,o)):(b=Yw(E,iB(h,r.filter(function(M){var S,A,T=a in M.props?M.props[a]:(S=M.type.defaultProps)===null||S===void 0?void 0:S[a],P="hide"in M.props?M.props.hide:(A=M.type.defaultProps)===null||A===void 0?void 0:A.hide;return T===_&&!P}),"number",u),i.defaultProps.allowDataOverflow),b=DS(f,b,_,o)),ce(ce({},g),{},it({},_,ce(ce({axisType:o},i.defaultProps),{},{hide:!0,orientation:fi(gAe,"".concat(o,".").concat(y%2),null),domain:b,originalDomain:E,isCategorical:v,layout:u})))}return g},{})},wAe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,o=n.AxisComp,a=n.graphicalItems,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.children,f="".concat(i,"Id"),h=hi(u,o),d={};return h&&h.length?d=xAe(e,{axes:h,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:c}):a&&a.length&&(d=bAe(e,{Axis:o,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:c})),d},SAe=function(e){var n=Ka(e),r=ia(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:pA(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:fy(n,r)}},fL=function(e){var n=e.children,r=e.defaultShowTooltip,i=ai(n,rf),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},EAe=function(e){return!e||!e.length?!1:e.some(function(n){var r=ua(n&&n.type);return r&&r.indexOf("Bar")>=0})},hL=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},TAe=function(e,n){var r=e.props,i=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,s=e.yAxisMap,l=s===void 0?{}:s,c=r.width,u=r.height,f=r.children,h=r.margin||{},d=ai(f,rf),v=ai(f,fa),y=Object.keys(l).reduce(function(b,M){var S=l[M],A=S.orientation;return!S.mirror&&!S.hide?ce(ce({},b),{},it({},A,b[A]+S.width)):b},{left:h.left||0,right:h.right||0}),g=Object.keys(a).reduce(function(b,M){var S=a[M],A=S.orientation;return!S.mirror&&!S.hide?ce(ce({},b),{},it({},A,fi(b,"".concat(A))+S.height)):b},{top:h.top||0,bottom:h.bottom||0}),p=ce(ce({},g),y),x=p.bottom;d&&(p.bottom+=d.props.height||rf.defaultProps.height),v&&n&&(p=Xye(p,i,r,n));var _=c-p.left-p.right,E=u-p.top-p.bottom;return ce(ce({brushBottom:x},p),{},{width:Math.max(_,0),height:Math.max(E,0)})},AAe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},v_=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,o=i===void 0?"axis":i,a=e.validateTooltipEventTypes,s=a===void 0?["axis"]:a,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,f=e.defaultProps,h=function(p,x){var _=x.graphicalItems,E=x.stackGroups,b=x.offset,M=x.updateId,S=x.dataStartIndex,A=x.dataEndIndex,T=p.barSize,P=p.layout,R=p.barGap,N=p.barCategoryGap,I=p.maxBarSize,D=hL(P),L=D.numericAxisName,q=D.cateAxisName,$=EAe(_),V=[];return _.forEach(function(X,K){var z=g_(p.data,{graphicalItems:[X],dataStartIndex:S,dataEndIndex:A}),W=X.type.defaultProps!==void 0?ce(ce({},X.type.defaultProps),X.props):X.props,ee=W.dataKey,me=W.maxBarSize,_e=W["".concat(L,"Id")],Ne=W["".concat(q,"Id")],We={},Ue=l.reduce(function(Mt,jt){var F=x["".concat(jt.axisType,"Map")],k=W["".concat(jt.axisType,"Id")];F&&F[k]||jt.axisType==="zAxis"||Hl();var re=F[k];return ce(ce({},Mt),{},it(it({},jt.axisType,re),"".concat(jt.axisType,"Ticks"),ia(re)))},We),fe=Ue[q],Re=Ue["".concat(q,"Ticks")],Ee=E&&E[_e]&&E[_e].hasStack&&o0e(X,E[_e].stackGroups),H=ua(X.type).indexOf("Bar")>=0,lt=fy(fe,Re),be=[],Le=$&&Wye({barSize:T,stackGroups:E,totalSize:AAe(Ue,q)});if(H){var ke,mt,Ye=ft(me)?I:me,Ze=(ke=(mt=fy(fe,Re,!0))!==null&&mt!==void 0?mt:Ye)!==null&&ke!==void 0?ke:0;be=qye({barGap:R,barCategoryGap:N,bandSize:Ze!==lt?Ze:lt,sizeList:Le[Ne],maxBarSize:Ye}),Ze!==lt&&(be=be.map(function(Mt){return ce(ce({},Mt),{},{position:ce(ce({},Mt.position),{},{offset:Mt.position.offset-Ze/2})})}))}var ht=X&&X.type&&X.type.getComposedData;ht&&V.push({props:ce(ce({},ht(ce(ce({},Ue),{},{displayedData:z,props:p,dataKey:ee,item:X,bandSize:lt,barPosition:be,offset:b,stackedData:Ee,layout:P,dataStartIndex:S,dataEndIndex:A}))),{},it(it(it({key:X.key||"item-".concat(K)},L,Ue[L]),q,Ue[q]),"animationId",M)),childIndex:qre(X,p.children),item:X})}),V},d=function(p,x){var _=p.props,E=p.dataStartIndex,b=p.dataEndIndex,M=p.updateId;if(!EO({props:_}))return null;var S=_.children,A=_.layout,T=_.stackOffset,P=_.data,R=_.reverseStackOrder,N=hL(A),I=N.numericAxisName,D=N.cateAxisName,L=hi(S,r),q=r0e(P,L,"".concat(I,"Id"),"".concat(D,"Id"),T,R),$=l.reduce(function(W,ee){var me="".concat(ee.axisType,"Map");return ce(ce({},W),{},it({},me,wAe(_,ce(ce({},ee),{},{graphicalItems:L,stackGroups:ee.axisType===I&&q,dataStartIndex:E,dataEndIndex:b}))))},{}),V=TAe(ce(ce({},$),{},{props:_,graphicalItems:L}),x==null?void 0:x.legendBBox);Object.keys($).forEach(function(W){$[W]=u(_,$[W],V,W.replace("Map",""),n)});var X=$["".concat(D,"Map")],K=SAe(X),z=h(_,ce(ce({},$),{},{dataStartIndex:E,dataEndIndex:b,updateId:M,graphicalItems:L,stackGroups:q,offset:V}));return ce(ce({formattedGraphicalItems:z,graphicalItems:L,offset:V,stackGroups:q},K),$)},v=function(g){function p(x){var _,E,b;return oAe(this,p),b=lAe(this,p,[x]),it(b,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),it(b,"accessibilityManager",new GTe),it(b,"handleLegendBBoxUpdate",function(M){if(M){var S=b.state,A=S.dataStartIndex,T=S.dataEndIndex,P=S.updateId;b.setState(ce({legendBBox:M},d({props:b.props,dataStartIndex:A,dataEndIndex:T,updateId:P},ce(ce({},b.state),{},{legendBBox:M}))))}}),it(b,"handleReceiveSyncEvent",function(M,S,A){if(b.props.syncId===M){if(A===b.eventEmitterSymbol&&typeof b.props.syncMethod!="function")return;b.applySyncEvent(S)}}),it(b,"handleBrushChange",function(M){var S=M.startIndex,A=M.endIndex;if(S!==b.state.dataStartIndex||A!==b.state.dataEndIndex){var T=b.state.updateId;b.setState(function(){return ce({dataStartIndex:S,dataEndIndex:A},d({props:b.props,dataStartIndex:S,dataEndIndex:A,updateId:T},b.state))}),b.triggerSyncEvent({dataStartIndex:S,dataEndIndex:A})}}),it(b,"handleMouseEnter",function(M){var S=b.getMouseInfo(M);if(S){var A=ce(ce({},S),{},{isTooltipActive:!0});b.setState(A),b.triggerSyncEvent(A);var T=b.props.onMouseEnter;ot(T)&&T(A,M)}}),it(b,"triggeredAfterMouseMove",function(M){var S=b.getMouseInfo(M),A=S?ce(ce({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};b.setState(A),b.triggerSyncEvent(A);var T=b.props.onMouseMove;ot(T)&&T(A,M)}),it(b,"handleItemMouseEnter",function(M){b.setState(function(){return{isTooltipActive:!0,activeItem:M,activePayload:M.tooltipPayload,activeCoordinate:M.tooltipPosition||{x:M.cx,y:M.cy}}})}),it(b,"handleItemMouseLeave",function(){b.setState(function(){return{isTooltipActive:!1}})}),it(b,"handleMouseMove",function(M){M.persist(),b.throttleTriggeredAfterMouseMove(M)}),it(b,"handleMouseLeave",function(M){b.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};b.setState(S),b.triggerSyncEvent(S);var A=b.props.onMouseLeave;ot(A)&&A(S,M)}),it(b,"handleOuterEvent",function(M){var S=Wre(M),A=fi(b.props,"".concat(S));if(S&&ot(A)){var T,P;/.*touch.*/i.test(S)?P=b.getMouseInfo(M.changedTouches[0]):P=b.getMouseInfo(M),A((T=P)!==null&&T!==void 0?T:{},M)}}),it(b,"handleClick",function(M){var S=b.getMouseInfo(M);if(S){var A=ce(ce({},S),{},{isTooltipActive:!0});b.setState(A),b.triggerSyncEvent(A);var T=b.props.onClick;ot(T)&&T(A,M)}}),it(b,"handleMouseDown",function(M){var S=b.props.onMouseDown;if(ot(S)){var A=b.getMouseInfo(M);S(A,M)}}),it(b,"handleMouseUp",function(M){var S=b.props.onMouseUp;if(ot(S)){var A=b.getMouseInfo(M);S(A,M)}}),it(b,"handleTouchMove",function(M){M.changedTouches!=null&&M.changedTouches.length>0&&b.throttleTriggeredAfterMouseMove(M.changedTouches[0])}),it(b,"handleTouchStart",function(M){M.changedTouches!=null&&M.changedTouches.length>0&&b.handleMouseDown(M.changedTouches[0])}),it(b,"handleTouchEnd",function(M){M.changedTouches!=null&&M.changedTouches.length>0&&b.handleMouseUp(M.changedTouches[0])}),it(b,"triggerSyncEvent",function(M){b.props.syncId!==void 0&&Ab.emit(Mb,b.props.syncId,M,b.eventEmitterSymbol)}),it(b,"applySyncEvent",function(M){var S=b.props,A=S.layout,T=S.syncMethod,P=b.state.updateId,R=M.dataStartIndex,N=M.dataEndIndex;if(M.dataStartIndex!==void 0||M.dataEndIndex!==void 0)b.setState(ce({dataStartIndex:R,dataEndIndex:N},d({props:b.props,dataStartIndex:R,dataEndIndex:N,updateId:P},b.state)));else if(M.activeTooltipIndex!==void 0){var I=M.chartX,D=M.chartY,L=M.activeTooltipIndex,q=b.state,$=q.offset,V=q.tooltipTicks;if(!$)return;if(typeof T=="function")L=T(V,M);else if(T==="value"){L=-1;for(var X=0;X<V.length;X++)if(V[X].value===M.activeLabel){L=X;break}}var K=ce(ce({},$),{},{x:$.left,y:$.top}),z=Math.min(I,K.x+K.width),W=Math.min(D,K.y+K.height),ee=V[L]&&V[L].value,me=jS(b.state,b.props.data,L),_e=V[L]?{x:A==="horizontal"?V[L].coordinate:z,y:A==="horizontal"?W:V[L].coordinate}:A5;b.setState(ce(ce({},M),{},{activeLabel:ee,activeCoordinate:_e,activePayload:me,activeTooltipIndex:L}))}else b.setState(M)}),it(b,"renderCursor",function(M){var S,A=b.state,T=A.isTooltipActive,P=A.activeCoordinate,R=A.activePayload,N=A.offset,I=A.activeTooltipIndex,D=A.tooltipAxisBandSize,L=b.getTooltipEventType(),q=(S=M.props.active)!==null&&S!==void 0?S:T,$=b.props.layout,V=M.key||"_recharts-cursor";return G.createElement(ZTe,{key:V,activeCoordinate:P,activePayload:R,activeTooltipIndex:I,chartName:n,element:M,isActive:q,layout:$,offset:N,tooltipAxisBandSize:D,tooltipEventType:L})}),it(b,"renderPolarAxis",function(M,S,A){var T=fi(M,"type.axisType"),P=fi(b.state,"".concat(T,"Map")),R=M.type.defaultProps,N=R!==void 0?ce(ce({},R),M.props):M.props,I=P&&P[N["".concat(T,"Id")]];return B.cloneElement(M,ce(ce({},I),{},{className:_t(T,I.className),key:M.key||"".concat(S,"-").concat(A),ticks:ia(I,!0)}))}),it(b,"renderPolarGrid",function(M){var S=M.props,A=S.radialLines,T=S.polarAngles,P=S.polarRadius,R=b.state,N=R.radiusAxisMap,I=R.angleAxisMap,D=Ka(N),L=Ka(I),q=L.cx,$=L.cy,V=L.innerRadius,X=L.outerRadius;return B.cloneElement(M,{polarAngles:Array.isArray(T)?T:ia(L,!0).map(function(K){return K.coordinate}),polarRadius:Array.isArray(P)?P:ia(D,!0).map(function(K){return K.coordinate}),cx:q,cy:$,innerRadius:V,outerRadius:X,key:M.key||"polar-grid",radialLines:A})}),it(b,"renderLegend",function(){var M=b.state.formattedGraphicalItems,S=b.props,A=S.children,T=S.width,P=S.height,R=b.props.margin||{},N=T-(R.left||0)-(R.right||0),I=nB({children:A,formattedGraphicalItems:M,legendWidth:N,legendContent:c});if(!I)return null;var D=I.item,L=lL(I,JTe);return B.cloneElement(D,ce(ce({},L),{},{chartWidth:T,chartHeight:P,margin:R,onBBoxUpdate:b.handleLegendBBoxUpdate}))}),it(b,"renderTooltip",function(){var M,S=b.props,A=S.children,T=S.accessibilityLayer,P=ai(A,Lr);if(!P)return null;var R=b.state,N=R.isTooltipActive,I=R.activeCoordinate,D=R.activePayload,L=R.activeLabel,q=R.offset,$=(M=P.props.active)!==null&&M!==void 0?M:N;return B.cloneElement(P,{viewBox:ce(ce({},q),{},{x:q.left,y:q.top}),active:$,label:L,payload:$?D:[],coordinate:I,accessibilityLayer:T})}),it(b,"renderBrush",function(M){var S=b.props,A=S.margin,T=S.data,P=b.state,R=P.offset,N=P.dataStartIndex,I=P.dataEndIndex,D=P.updateId;return B.cloneElement(M,{key:M.key||"_recharts-brush",onChange:vg(b.handleBrushChange,M.props.onChange),data:T,x:Ae(M.props.x)?M.props.x:R.left,y:Ae(M.props.y)?M.props.y:R.top+R.height+R.brushBottom-(A.bottom||0),width:Ae(M.props.width)?M.props.width:R.width,startIndex:N,endIndex:I,updateId:"brush-".concat(D)})}),it(b,"renderReferenceElement",function(M,S,A){if(!M)return null;var T=b,P=T.clipPathId,R=b.state,N=R.xAxisMap,I=R.yAxisMap,D=R.offset,L=M.type.defaultProps||{},q=M.props,$=q.xAxisId,V=$===void 0?L.xAxisId:$,X=q.yAxisId,K=X===void 0?L.yAxisId:X;return B.cloneElement(M,{key:M.key||"".concat(S,"-").concat(A),xAxis:N[V],yAxis:I[K],viewBox:{x:D.left,y:D.top,width:D.width,height:D.height},clipPathId:P})}),it(b,"renderActivePoints",function(M){var S=M.item,A=M.activePoint,T=M.basePoint,P=M.childIndex,R=M.isRange,N=[],I=S.props.key,D=S.item.type.defaultProps!==void 0?ce(ce({},S.item.type.defaultProps),S.item.props):S.item.props,L=D.activeDot,q=D.dataKey,$=ce(ce({index:P,dataKey:q,cx:A.x,cy:A.y,r:4,fill:VA(S.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},Ke(L,!1)),jv(L));return N.push(p.renderActiveDot(L,$,"".concat(I,"-activePoint-").concat(P))),T?N.push(p.renderActiveDot(L,ce(ce({},$),{},{cx:T.x,cy:T.y}),"".concat(I,"-basePoint-").concat(P))):R&&N.push(null),N}),it(b,"renderGraphicChild",function(M,S,A){var T=b.filterFormatItem(M,S,A);if(!T)return null;var P=b.getTooltipEventType(),R=b.state,N=R.isTooltipActive,I=R.tooltipAxis,D=R.activeTooltipIndex,L=R.activeLabel,q=b.props.children,$=ai(q,Lr),V=T.props,X=V.points,K=V.isRange,z=V.baseLine,W=T.item.type.defaultProps!==void 0?ce(ce({},T.item.type.defaultProps),T.item.props):T.item.props,ee=W.activeDot,me=W.hide,_e=W.activeBar,Ne=W.activeShape,We=!!(!me&&N&&$&&(ee||_e||Ne)),Ue={};P!=="axis"&&$&&$.props.trigger==="click"?Ue={onClick:vg(b.handleItemMouseEnter,M.props.onClick)}:P!=="axis"&&(Ue={onMouseLeave:vg(b.handleItemMouseLeave,M.props.onMouseLeave),onMouseEnter:vg(b.handleItemMouseEnter,M.props.onMouseEnter)});var fe=B.cloneElement(M,ce(ce({},T.props),Ue));function Re(jt){return typeof I.dataKey=="function"?I.dataKey(jt.payload):null}if(We)if(D>=0){var Ee,H;if(I.dataKey&&!I.allowDuplicatedCategory){var lt=typeof I.dataKey=="function"?Re:"payload.".concat(I.dataKey.toString());Ee=kv(X,lt,L),H=K&&z&&kv(z,lt,L)}else Ee=X==null?void 0:X[D],H=K&&z&&z[D];if(Ne||_e){var be=M.props.activeIndex!==void 0?M.props.activeIndex:D;return[B.cloneElement(M,ce(ce(ce({},T.props),Ue),{},{activeIndex:be})),null,null]}if(!ft(Ee))return[fe].concat(mf(b.renderActivePoints({item:T,activePoint:Ee,basePoint:H,childIndex:D,isRange:K})))}else{var Le,ke=(Le=b.getItemByXY(b.state.activeCoordinate))!==null&&Le!==void 0?Le:{graphicalItem:fe},mt=ke.graphicalItem,Ye=mt.item,Ze=Ye===void 0?M:Ye,ht=mt.childIndex,Mt=ce(ce(ce({},T.props),Ue),{},{activeIndex:ht});return[B.cloneElement(Ze,Mt),null,null]}return K?[fe,null,null]:[fe,null]}),it(b,"renderCustomized",function(M,S,A){return B.cloneElement(M,ce(ce({key:"recharts-customized-".concat(A)},b.props),b.state))}),it(b,"renderMap",{CartesianGrid:{handler:wg,once:!0},ReferenceArea:{handler:b.renderReferenceElement},ReferenceLine:{handler:wg},ReferenceDot:{handler:b.renderReferenceElement},XAxis:{handler:wg},YAxis:{handler:wg},Brush:{handler:b.renderBrush,once:!0},Bar:{handler:b.renderGraphicChild},Line:{handler:b.renderGraphicChild},Area:{handler:b.renderGraphicChild},Radar:{handler:b.renderGraphicChild},RadialBar:{handler:b.renderGraphicChild},Scatter:{handler:b.renderGraphicChild},Pie:{handler:b.renderGraphicChild},Funnel:{handler:b.renderGraphicChild},Tooltip:{handler:b.renderCursor,once:!0},PolarGrid:{handler:b.renderPolarGrid,once:!0},PolarAngleAxis:{handler:b.renderPolarAxis},PolarRadiusAxis:{handler:b.renderPolarAxis},Customized:{handler:b.renderCustomized}}),b.clipPathId="".concat((_=x.id)!==null&&_!==void 0?_:Zl("recharts"),"-clip"),b.throttleTriggeredAfterMouseMove=tV(b.triggeredAfterMouseMove,(E=x.throttleDelay)!==null&&E!==void 0?E:1e3/60),b.state={},b}return fAe(p,g),sAe(p,[{key:"componentDidMount",value:function(){var _,E;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var _=this.props,E=_.children,b=_.data,M=_.height,S=_.layout,A=ai(E,Lr);if(A){var T=A.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,R=jS(this.state,b,T,P),N=this.state.tooltipTicks[T].coordinate,I=(this.state.offset.top+M)/2,D=S==="horizontal",L=D?{x:N,y:I}:{y:N,x:I},q=this.state.formattedGraphicalItems.find(function(V){var X=V.item;return X.type.name==="Scatter"});q&&(L=ce(ce({},L),q.props.points[T].tooltipPosition),R=q.props.points[T].tooltipPayload);var $={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:P,activePayload:R,activeCoordinate:L};this.setState($),this.renderCursor(A),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(_,E){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==E.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==_.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==_.margin){var b,M;this.accessibilityManager.setDetails({offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(M=this.props.margin.top)!==null&&M!==void 0?M:0}})}return null}},{key:"componentDidUpdate",value:function(_){fw([ai(_.children,Lr)],[ai(this.props.children,Lr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var _=ai(this.props.children,Lr);if(_&&typeof _.props.shared=="boolean"){var E=_.props.shared?"axis":"item";return s.indexOf(E)>=0?E:o}return o}},{key:"getMouseInfo",value:function(_){if(!this.container)return null;var E=this.container,b=E.getBoundingClientRect(),M=_pe(b),S={chartX:Math.round(_.pageX-M.left),chartY:Math.round(_.pageY-M.top)},A=b.width/E.offsetWidth||1,T=this.inRange(S.chartX,S.chartY,A);if(!T)return null;var P=this.state,R=P.xAxisMap,N=P.yAxisMap,I=this.getTooltipEventType();if(I!=="axis"&&R&&N){var D=Ka(R).scale,L=Ka(N).scale,q=D&&D.invert?D.invert(S.chartX):null,$=L&&L.invert?L.invert(S.chartY):null;return ce(ce({},S),{},{xValue:q,yValue:$})}var V=uL(this.state,this.props.data,this.props.layout,T);return V?ce(ce({},S),V):null}},{key:"inRange",value:function(_,E){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,M=this.props.layout,S=_/b,A=E/b;if(M==="horizontal"||M==="vertical"){var T=this.state.offset,P=S>=T.left&&S<=T.left+T.width&&A>=T.top&&A<=T.top+T.height;return P?{x:S,y:A}:null}var R=this.state,N=R.angleAxisMap,I=R.radiusAxisMap;if(N&&I){var D=Ka(N);return NN({x:S,y:A},D)}return null}},{key:"parseEventsOfWrapper",value:function(){var _=this.props.children,E=this.getTooltipEventType(),b=ai(_,Lr),M={};b&&E==="axis"&&(b.props.trigger==="click"?M={onClick:this.handleClick}:M={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var S=jv(this.props,this.handleOuterEvent);return ce(ce({},S),M)}},{key:"addListener",value:function(){Ab.on(Mb,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Ab.removeListener(Mb,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(_,E,b){for(var M=this.state.formattedGraphicalItems,S=0,A=M.length;S<A;S++){var T=M[S];if(T.item===_||T.props.key===_.key||E===ua(T.item.type)&&b===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var _=this.clipPathId,E=this.state.offset,b=E.left,M=E.top,S=E.height,A=E.width;return G.createElement("defs",null,G.createElement("clipPath",{id:_},G.createElement("rect",{x:b,y:M,height:S,width:A})))}},{key:"getXScales",value:function(){var _=this.state.xAxisMap;return _?Object.entries(_).reduce(function(E,b){var M=sL(b,2),S=M[0],A=M[1];return ce(ce({},E),{},it({},S,A.scale))},{}):null}},{key:"getYScales",value:function(){var _=this.state.yAxisMap;return _?Object.entries(_).reduce(function(E,b){var M=sL(b,2),S=M[0],A=M[1];return ce(ce({},E),{},it({},S,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(_){var E;return(E=this.state.xAxisMap)===null||E===void 0||(E=E[_])===null||E===void 0?void 0:E.scale}},{key:"getYScaleByAxisId",value:function(_){var E;return(E=this.state.yAxisMap)===null||E===void 0||(E=E[_])===null||E===void 0?void 0:E.scale}},{key:"getItemByXY",value:function(_){var E=this.state,b=E.formattedGraphicalItems,M=E.activeItem;if(b&&b.length)for(var S=0,A=b.length;S<A;S++){var T=b[S],P=T.props,R=T.item,N=R.type.defaultProps!==void 0?ce(ce({},R.type.defaultProps),R.props):R.props,I=ua(R.type);if(I==="Bar"){var D=(P.data||[]).find(function(V){return Vxe(_,V)});if(D)return{graphicalItem:T,payload:D}}else if(I==="RadialBar"){var L=(P.data||[]).find(function(V){return NN(_,V)});if(L)return{graphicalItem:T,payload:L}}else if(c_(T,M)||u_(T,M)||_p(T,M)){var q=P1e({graphicalItem:T,activeTooltipItem:M,itemData:N.data}),$=N.activeIndex===void 0?q:N.activeIndex;return{graphicalItem:ce(ce({},T),{},{childIndex:$}),payload:_p(T,M)?N.data[q]:T.props.data[q]}}}return null}},{key:"render",value:function(){var _=this;if(!EO(this))return null;var E=this.props,b=E.children,M=E.className,S=E.width,A=E.height,T=E.style,P=E.compact,R=E.title,N=E.desc,I=lL(E,eAe),D=Ke(I,!1);if(P)return G.createElement(BD,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},G.createElement(dw,hu({},D,{width:S,height:A,title:R,desc:N}),this.renderClipPath(),AO(b,this.renderMap)));if(this.props.accessibilityLayer){var L,q;D.tabIndex=(L=this.props.tabIndex)!==null&&L!==void 0?L:0,D.role=(q=this.props.role)!==null&&q!==void 0?q:"application",D.onKeyDown=function(V){_.accessibilityManager.keyboardEvent(V)},D.onFocus=function(){_.accessibilityManager.focus()}}var $=this.parseEventsOfWrapper();return G.createElement(BD,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},G.createElement("div",hu({className:_t("recharts-wrapper",M),style:ce({position:"relative",cursor:"default",width:S,height:A},T)},$,{ref:function(X){_.container=X}}),G.createElement(dw,hu({},D,{width:S,height:A,title:R,desc:N,style:vAe}),this.renderClipPath(),AO(b,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(B.Component);it(v,"displayName",n),it(v,"defaultProps",ce({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),it(v,"getDerivedStateFromProps",function(g,p){var x=g.dataKey,_=g.data,E=g.children,b=g.width,M=g.height,S=g.layout,A=g.stackOffset,T=g.margin,P=p.dataStartIndex,R=p.dataEndIndex;if(p.updateId===void 0){var N=fL(g);return ce(ce(ce({},N),{},{updateId:0},d(ce(ce({props:g},N),{},{updateId:0}),p)),{},{prevDataKey:x,prevData:_,prevWidth:b,prevHeight:M,prevLayout:S,prevStackOffset:A,prevMargin:T,prevChildren:E})}if(x!==p.prevDataKey||_!==p.prevData||b!==p.prevWidth||M!==p.prevHeight||S!==p.prevLayout||A!==p.prevStackOffset||!wu(T,p.prevMargin)){var I=fL(g),D={chartX:p.chartX,chartY:p.chartY,isTooltipActive:p.isTooltipActive},L=ce(ce({},uL(p,_,S)),{},{updateId:p.updateId+1}),q=ce(ce(ce({},I),D),L);return ce(ce(ce({},q),d(ce({props:g},q),p)),{},{prevDataKey:x,prevData:_,prevWidth:b,prevHeight:M,prevLayout:S,prevStackOffset:A,prevMargin:T,prevChildren:E})}if(!fw(E,p.prevChildren)){var $,V,X,K,z=ai(E,rf),W=z&&($=(V=z.props)===null||V===void 0?void 0:V.startIndex)!==null&&$!==void 0?$:P,ee=z&&(X=(K=z.props)===null||K===void 0?void 0:K.endIndex)!==null&&X!==void 0?X:R,me=W!==P||ee!==R,_e=!ft(_),Ne=_e&&!me?p.updateId:p.updateId+1;return ce(ce({updateId:Ne},d(ce(ce({props:g},p),{},{updateId:Ne,dataStartIndex:W,dataEndIndex:ee}),p)),{},{prevChildren:E,dataStartIndex:W,dataEndIndex:ee})}return null}),it(v,"renderActiveDot",function(g,p,x){var _;return B.isValidElement(g)?_=B.cloneElement(g,p):ot(g)?_=g(p):_=G.createElement(em,p),G.createElement(St,{className:"recharts-active-dot",key:x},_)});var y=B.forwardRef(function(p,x){return G.createElement(v,hu({},p,{ref:x}))});return y.displayName=v.displayName,y},P5=v_({chartName:"LineChart",GraphicalChild:Ts,axisComponents:[{axisType:"xAxis",AxisComp:Uo},{axisType:"yAxis",AxisComp:co}],formatAxisMap:$A}),MAe=v_({chartName:"BarChart",GraphicalChild:tc,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Uo},{axisType:"yAxis",AxisComp:co}],formatAxisMap:$A}),PAe=v_({chartName:"PieChart",GraphicalChild:Oa,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:l_},{axisType:"radiusAxis",AxisComp:a_}],formatAxisMap:m0e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),C5=v_({chartName:"AreaChart",GraphicalChild:No,axisComponents:[{axisType:"xAxis",AxisComp:Uo},{axisType:"yAxis",AxisComp:co}],formatAxisMap:$A});const CAe=({country:t,onClose:e,controlsRef:n})=>{var I;const[r,i]=B.useState(null),[o,a]=B.useState(null),[s,l]=B.useState(null),[c,u]=B.useState(null),[f,h]=B.useState(null),[d,v]=B.useState(null),[y,g]=B.useState(!0),[p,x]=B.useState(!1),[_,E]=B.useState("resumen"),b="https://web-production-2cf89.up.railway.app",M={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},S=[{id:"resumen",label:"Resumen",icon:BJ},{id:"empresas",label:"Empresas",icon:ad},{id:"produccion",label:"Produccin",icon:eb}];B.useEffect(()=>(n!=null&&n.current&&(n.current.autoRotate=!1),()=>{n!=null&&n.current&&(n.current.autoRotate=!0)}),[n]),B.useEffect(()=>{(async()=>{if(t!=null&&t.name){g(!0),v(null);try{const[L,q,$,V,X]=await Promise.all([fetch(`${b}/stats/country/${encodeURIComponent(t.name)}`),fetch(`${b}/stats/emissions_by_sector/${encodeURIComponent(t.name)}`),fetch(`${b}/stats/historical/${encodeURIComponent(t.name)}`),fetch(`${b}/stats/companies/${encodeURIComponent(t.name)}`),fetch(`${b}/stats/production/${encodeURIComponent(t.name)}`)]);if(!L.ok||!q.ok||!$.ok||!V.ok||!X.ok)throw new Error("Error al cargar los datos");const[K,z,W,ee,me]=await Promise.all([L.json(),q.json(),$.json(),V.json(),X.json()]);i(K),a(z),l(W),u(ee),h(me)}catch(L){console.error("Error al cargar datos:",L),v(L.message)}finally{g(!1)}}})()},[t]);const A=()=>{n!=null&&n.current&&(n.current.autoRotate=!0),e()},T=()=>{n!=null&&n.current&&(n.current.autoRotate=!n.current.autoRotate,x(n.current.autoRotate))},P=({title:D,value:L,icon:q,trend:$,description:V})=>w.jsxs(It.div,{className:"relative overflow-hidden bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-6 rounded-xl border border-gray-700 hover:border-green-500/30 transition-all duration-500",whileHover:{scale:1.02,y:-5},initial:"hidden",animate:"visible",variants:M,children:[w.jsx("div",{className:"relative z-10",children:w.jsxs("div",{className:"flex justify-between items-start",children:[w.jsxs("div",{children:[w.jsxs("p",{className:"text-sm text-gray-400 flex items-center gap-2",children:[D,w.jsx(VJ,{size:14,className:"text-gray-500 hover:text-gray-300 cursor-help"})]}),w.jsx("p",{className:"text-3xl font-bold mt-2 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:w.jsx(It.span,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:L})}),V&&w.jsx("p",{className:"text-sm text-gray-400 mt-1",children:V}),$&&w.jsxs(It.span,{className:`inline-flex items-center gap-1 px-2 py-1 mt-2 text-sm rounded ${$>0?"bg-red-500/20 text-red-400 border border-red-500/30":"bg-green-500/20 text-green-400 border border-green-500/30"}`,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:[$>0?"":""," ",Math.abs($),"%",w.jsx(Bu,{size:14})]})]}),w.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${$>0?"from-red-500/20 to-orange-500/20 border border-red-500/30":"from-green-500/20 to-blue-500/20 border border-green-500/30"}`,children:w.jsx(q,{className:"h-6 w-6 text-white"})})]})}),w.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-500"})]}),R=({company:D,index:L})=>w.jsxs(It.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:L*.1},className:"group relative overflow-hidden",children:[w.jsxs("div",{className:"flex justify-between items-center p-4 bg-gradient-to-br from-gray-800/60 to-gray-700/60 hover:from-gray-700/60 hover:to-gray-600/60 rounded-lg transition-all duration-500",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:"bg-gradient-to-br from-green-500/20 to-blue-500/20 p-3 rounded-lg border border-green-500/30",children:w.jsx(ad,{className:"h-6 w-6 text-white"})}),w.jsxs("div",{children:[w.jsx("p",{className:"font-medium text-lg group-hover:text-green-400 transition-colors",children:D.name}),w.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[w.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-sm bg-gray-700/50 rounded",children:[w.jsx(eb,{size:14,className:"text-gray-400"}),D.sector]}),w.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-sm bg-gray-700/50 rounded",children:[w.jsx($J,{size:14,className:"text-gray-400"}),D.location||"Global"]})]})]})]}),w.jsxs("div",{className:"text-right",children:[w.jsxs("p",{className:"font-bold text-xl bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:[D.total_emissions.toFixed(2)," MtCOe"]}),w.jsxs("p",{className:"text-sm text-gray-400 flex items-center gap-1 justify-end",children:[w.jsx(uO,{size:14}),D.emissions_percentage.toFixed(1),"% del total",w.jsx(gl,{size:14,className:"transform group-hover:translate-x-1 transition-transform"})]})]})]}),w.jsx("div",{className:"absolute inset-0 border border-green-500/0 group-hover:border-green-500/50 rounded-lg transition-all duration-500"})]}),N=({data:D})=>w.jsxs(It.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-6 rounded-xl border border-gray-700",children:[w.jsxs("div",{className:"flex items-center justify-between mb-6",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-xl font-semibold bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:"Emisiones Histricas"}),w.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Evolucin temporal de emisiones de CO"})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(UF,{className:"h-5 w-5 text-gray-400"}),w.jsx(jJ,{className:"h-5 w-5 text-gray-400"})," "]})]}),w.jsx(qu,{width:"100%",height:300,children:w.jsxs(C5,{data:D,margin:{top:5,right:30,left:20,bottom:5},children:[w.jsx("defs",{children:w.jsxs("linearGradient",{id:"colorEmissions",x1:"0",y1:"0",x2:"0",y2:"1",children:[w.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.8}),w.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]})}),w.jsx(Gf,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),w.jsx(Uo,{dataKey:"year",stroke:"#fff",tick:{fill:"#9CA3AF"}}),w.jsx(co,{stroke:"#fff",tick:{fill:"#9CA3AF"}}),w.jsx(Lr,{contentStyle:{backgroundColor:"rgba(0,0,0,0.8)",backdropFilter:"blur(12px)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}}),w.jsx(No,{type:"monotone",dataKey:"total_emissions",stroke:"#10B981",strokeWidth:2,fillOpacity:1,fill:"url(#colorEmissions)",name:"Emisiones (MtCOe)"})]})})]});return t?w.jsxs(Lv,{children:[w.jsx(It.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:A}),w.jsx(It.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"fixed inset-0 flex items-center justify-center z-50",onClick:D=>D.stopPropagation(),children:w.jsx("div",{className:"w-[90vw] max-w-[800px] h-[90vh] overflow-hidden backdrop-blur-xl bg-black/80 rounded-xl shadow-2xl border border-white/10",children:w.jsxs("div",{className:"relative z-50 h-full flex flex-col",children:[w.jsxs(It.div,{className:"sticky top-0 z-50 bg-black/80 backdrop-blur-xl p-6 pb-4 border-b border-white/10",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},children:[w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsxs("div",{className:"flex items-center space-x-4",children:[w.jsxs(It.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"relative group",children:[w.jsx("img",{src:`https://flagcdn.com/w40/${t.code.toLowerCase()}.png`,alt:`Bandera de ${t.name}`,className:"h-8 rounded shadow-lg transition-transform duration-300 group-hover:scale-110"}),w.jsx("div",{className:"absolute inset-0 bg-white/10 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),w.jsxs("div",{children:[w.jsxs(It.h2,{className:"text-3xl font-bold bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent flex items-center gap-2",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},children:[t.name,w.jsx(zd,{className:"h-6 w-6 text-green-400"})]}),w.jsxs(It.p,{className:"text-gray-400 mt-1 flex items-center gap-2",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1},children:[w.jsx(YJ,{size:14}),"Panel de Control de Emisiones CO"]})]})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx(It.button,{whileHover:{scale:1.1,rotate:180},whileTap:{scale:.9},onClick:T,className:`p-3 rounded-lg backdrop-blur-md transition-all duration-300 ${p?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-gray-800/50 text-white hover:bg-gray-700/50"}`,children:w.jsx(KJ,{size:20})}),w.jsx(It.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:A,className:"p-3 rounded-lg bg-gray-800/50 backdrop-blur-md hover:bg-red-500/20 hover:text-red-400 transition-all duration-300",children:w.jsx(Ma,{size:20})})]})]}),w.jsx(It.div,{className:"flex gap-3 mt-4 bg-gray-900/50 p-1 rounded-lg",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:S.map((D,L)=>w.jsxs(It.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>E(D.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-300 ${_===D.id?"bg-gradient-to-r from-green-500/20 to-blue-500/20 text-white border border-green-500/30":"text-gray-400 hover:text-white hover:bg-gray-800/50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:L*.1},children:[w.jsx(D.icon,{size:18}),D.label]},D.id))})]}),w.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:y?w.jsx(It.div,{className:"space-y-4",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},children:[1,2,3].map(D=>w.jsx(It.div,{className:"h-24 w-full bg-gradient-to-r from-gray-800/50 to-gray-700/50 rounded-xl overflow-hidden",variants:M,children:w.jsx("div",{className:"h-full w-full animate-pulse bg-gradient-to-r from-transparent via-white/5 to-transparent"})},D))}):d?w.jsxs(It.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-red-900/50 border border-red-500/30 p-4 rounded-xl flex items-center gap-3",children:[w.jsx(Gp,{className:"h-5 w-5 text-red-400"}),w.jsx("p",{className:"text-red-200",children:d})]}):w.jsx(Lv,{mode:"wait",children:w.jsxs(It.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"space-y-6",children:[_==="resumen"&&r&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[w.jsx(P,{title:"Emisiones Totales",value:`${(I=r.total_emissions)==null?void 0:I.toFixed(2)} MtCOe`,icon:Bu,trend:-2.5,description:"Emisiones totales de CO equivalente"}),w.jsx(P,{title:"Empresas Registradas",value:r.number_of_companies,icon:ad,description:"Total de empresas monitoreadas"}),w.jsx(P,{title:"Sectores Activos",value:r.number_of_sectors,icon:kF,description:"Sectores industriales principales"})]}),(s==null?void 0:s.timeline)&&w.jsx(N,{data:s.timeline})]}),_==="empresas"&&(c==null?void 0:c.companies)&&w.jsxs(It.div,{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-6 rounded-xl border border-gray-700",initial:{opacity:0},animate:{opacity:1},children:[w.jsx("h3",{className:"text-xl font-semibold mb-4 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:"Principales Empresas por Emisiones"}),w.jsx("div",{className:"space-y-4",children:c.companies.sort((D,L)=>L.total_emissions-D.total_emissions).slice(0,5).map((D,L)=>w.jsx(R,{company:D,index:L},D.name))})]}),_==="produccion"&&(f==null?void 0:f.products)&&w.jsxs(It.div,{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-6 rounded-xl border border-gray-700",initial:{opacity:0},animate:{opacity:1},children:[w.jsxs("h3",{className:"text-xl font-semibold mb-4 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent flex items-center gap-2",children:[w.jsx(eb,{className:"h-5 w-5"}),"Resumen de Produccin"]}),w.jsx("div",{className:"grid grid-cols-2 gap-4",children:f.products.map((D,L)=>w.jsxs(It.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:L*.1},className:"group bg-gradient-to-br from-gray-800/60 to-gray-700/60 p-4 rounded-lg hover:from-gray-700/60 hover:to-gray-600/60 transition-all duration-500 border border-white/10 hover:border-green-500/30",children:[w.jsxs("p",{className:"text-lg font-bold flex items-center justify-between",children:[D.name,w.jsx(It.span,{initial:{scale:0},animate:{scale:1},transition:{delay:L*.1+.2},className:"bg-gradient-to-r from-green-500/20 to-blue-500/20 p-2 rounded-lg",children:w.jsx(uO,{className:"h-5 w-5 text-gray-400"})})]}),w.jsx("div",{className:"mt-2",children:w.jsxs(It.span,{className:"inline-block px-3 py-1.5 bg-gray-700/50 rounded text-sm border border-white/10",whileHover:{scale:1.05},children:[D.volume," ",D.unit]})})]},L))})]})]},_)})})]})})})]}):null},RAe=({isVisible:t,onClose:e})=>{const[n,r]=B.useState(null),[i,o]=B.useState(null),[a,s]=B.useState(!0),[l,c]=B.useState(null),[u,f]=B.useState("resumen"),h="https://web-production-2cf89.up.railway.app";B.useEffect(()=>{(async()=>{if(t){s(!0),c(null);try{const[E,b]=await Promise.all([fetch(`${h}/stats/global`),fetch(`${h}/stats/companies/global`)]);if(!E.ok||!b.ok)throw new Error("Error al cargar los datos globales");const[M,S]=await Promise.all([E.json(),b.json()]);r(M),o(S)}catch(E){console.error("Error:",E),c(E.message)}finally{s(!1)}}})()},[t]);const d=["#10B981","#F59E0B","#3B82F6","#EC4899","#8B5CF6","#06B6D4","#34D399","#FBBF24"],y=Object.entries({"Investor-owned Company":{icon:"",name:"Empresas Privadas",color:"#FF6B6B",hoverIcon:"",percentage:61.5,companies:75,emissions:"440.2K"},"State-owned Entity":{icon:"",name:"Empresas Estatales",color:"#4ECDC4",hoverIcon:"",percentage:29.5,companies:36,emissions:"464.6K"},"Nation State":{icon:"",name:"Estados Nacionales",color:"#45B7D1",hoverIcon:"",percentage:9.02,companies:11,emissions:"516.2K"}}).map(([_,E])=>({name:E.name,value:E.percentage,icon:E.icon,hoverIcon:E.hoverIcon,color:E.color,companies:E.companies,emissions:E.emissions})),g=({title:_,value:E,icon:b,color:M,description:S})=>w.jsx("div",{className:"bg-white/5 backdrop-blur-lg p-6 rounded-2xl border border-white/10 hover:border-white/20 transition-all duration-300 transform hover:-translate-y-1",children:w.jsxs("div",{className:"flex justify-between items-start",children:[w.jsxs("div",{children:[w.jsx("p",{className:"text-sm text-gray-400 font-medium",children:_}),w.jsx("p",{className:"text-4xl font-bold mt-2 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:E}),S&&w.jsx("p",{className:"text-sm text-gray-400 mt-2",children:S})]}),w.jsx("div",{className:`p-3 rounded-xl ${M} bg-opacity-10`,children:w.jsx(b,{className:`h-6 w-6 ${M}`})})]})}),p=_=>_>=1e6?`${(_/1e6).toFixed(1)}M`:_>=1e3?`${(_/1e3).toFixed(1)}K`:_.toFixed(1),x=[{id:"resumen",label:"Resumen",icon:sw},{id:"empresas",label:"Empresas",icon:ad},{id:"sectores",label:"Sectores",icon:kF}];return t?w.jsxs("div",{className:"fixed bottom-24 left-8 w-[650px] max-h-[calc(100vh-200px)] overflow-y-auto backdrop-blur-2xl bg-black/40 rounded-3xl p-8 text-white shadow-2xl border border-white/10",children:[w.jsxs("div",{className:"flex justify-between items-center mb-8",children:[w.jsxs("div",{children:[w.jsxs("h2",{className:"text-3xl font-bold flex items-center gap-3 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:[w.jsx(zd,{className:"h-8 w-8 text-green-400"}),"Emisiones Globales"]}),w.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Panel de Control de Emisiones CO"})]}),w.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-white/10 transition-all duration-300",children:w.jsx(Ma,{size:20})})]}),w.jsx("div",{className:"flex gap-2 mb-6 bg-white/5 p-1 rounded-xl",children:x.map(_=>w.jsxs("button",{onClick:()=>f(_.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-300 text-sm ${u===_.id?"bg-gradient-to-r from-green-400/20 to-blue-500/20 text-white shadow-lg border border-white/10":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[w.jsx(_.icon,{size:16}),_.label]},_.id))}),a?w.jsxs("div",{className:"text-center py-8",children:[w.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-green-400 mx-auto mb-3"}),w.jsx("p",{className:"text-sm text-gray-400",children:"Cargando datos globales..."})]}):l?w.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 p-4 rounded-xl flex items-center gap-3",children:[w.jsx(Gp,{className:"h-5 w-5 text-red-400"}),w.jsx("p",{className:"text-red-200",children:l})]}):w.jsxs("div",{className:"space-y-6",children:[u==="resumen"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsx(g,{title:"Emisiones Globales Totales",value:`${p(n.total_emissions)} MtCOe`,icon:ZJ,color:"text-green-400"}),w.jsx(g,{title:"Empresas Globales",value:n.number_of_companies,icon:ad,color:"text-blue-400"})]}),w.jsxs("div",{className:"bg-white/5 p-6 rounded-2xl border border-white/10",children:[w.jsx("h3",{className:"text-xl font-semibold mb-6 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:"Top 10 Emisores Globales"}),w.jsx(qu,{width:"100%",height:300,children:w.jsxs(MAe,{data:i.companies,margin:{top:20,right:20,left:20,bottom:60},children:[w.jsx(Gf,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),w.jsx(Uo,{dataKey:"name",stroke:"#fff",angle:-45,textAnchor:"end",height:60,tick:{fontSize:10}}),w.jsx(co,{stroke:"#fff",tick:{fontSize:10}}),w.jsx(Lr,{contentStyle:{backgroundColor:"rgba(0,0,0,0.8)",backdropFilter:"blur(12px)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px"},formatter:_=>[`${p(_)} MtCOe`,"Emisiones"]}),w.jsx(tc,{dataKey:"total_emissions",radius:[4,4,0,0],children:i.companies.map((_,E)=>w.jsx(Kd,{fill:d[E%d.length]},`cell-${E}`))})]})})]})]}),u==="sectores"&&w.jsxs("div",{className:"bg-white/5 p-8 rounded-2xl border border-white/10",children:[w.jsx("h3",{className:"text-2xl font-bold mb-2 text-center bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:" Distribucin Global por Tipo de Entidad "}),w.jsx("p",{className:"text-center text-gray-400 text-sm mb-8",children:" Anlisis de la Estructura Empresarial Global "}),w.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[w.jsxs("div",{className:"relative",children:[w.jsx(qu,{width:"100%",height:300,children:w.jsxs(PAe,{children:[w.jsx(Oa,{data:y,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:"60%",outerRadius:"80%",paddingAngle:2,children:y.map((_,E)=>w.jsx(Kd,{fill:_.color,stroke:"rgba(255,255,255,0.1)",strokeWidth:2},`cell-${E}`))}),w.jsx(Lr,{content:({active:_,payload:E})=>{if(_&&E&&E.length){const b=E[0].payload;return w.jsxs("div",{className:"bg-black/90 backdrop-blur-xl p-4 rounded-xl border border-white/10 shadow-xl",children:[w.jsxs("p",{className:"text-lg font-bold mb-2",children:[b.icon," ",b.name," ",b.hoverIcon]}),w.jsxs("p",{className:"text-sm text-gray-300",children:[" Porcentaje: ",b.value,"%"]}),w.jsxs("p",{className:"text-sm text-gray-300",children:[" Empresas: ",b.companies]}),w.jsxs("p",{className:"text-sm text-gray-300",children:[" Emisiones: ",b.emissions," MtCOe"]})]})}return null}})]})}),w.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:w.jsxs("div",{className:"text-center",children:[w.jsx("p",{className:"text-sm text-gray-400",children:"Total"}),w.jsx("p",{className:"text-2xl font-bold text-white",children:"120"}),w.jsx("p",{className:"text-sm text-gray-400",children:"Empresas"})]})})]}),w.jsx("div",{className:"space-y-4 overflow-y-auto max-h-[300px] pr-2",children:y.map(_=>w.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10 hover:border-white/20 transition-all duration-300",style:{borderLeft:`4px solid ${_.color}`},children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsxs("span",{className:"text-lg font-bold flex items-center gap-2",children:[_.icon," ",_.name]}),w.jsxs("span",{className:"text-sm px-3 py-1.5 bg-white/5 rounded-lg font-medium",children:[_.value,"%"]})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[w.jsxs("div",{className:"bg-white/5 p-2 rounded-lg",children:[w.jsx("p",{className:"text-sm text-gray-400",children:"Empresas"}),w.jsxs("p",{className:"text-lg font-bold",children:[_.companies," "]})]}),w.jsxs("div",{className:"bg-white/5 p-2 rounded-lg",children:[w.jsx("p",{className:"text-sm text-gray-400",children:"Emisiones"}),w.jsxs("p",{className:"text-lg font-bold",children:[_.emissions," "]})]})]})]},_.name))})]}),w.jsx("p",{className:"text-center text-gray-400 text-sm mt-6",children:" Distribucin por sectores principales"})]}),u==="empresas"&&w.jsxs("div",{className:"bg-white/5 p-6 rounded-2xl border border-white/10",children:[w.jsx("h3",{className:"text-xl font-semibold mb-4 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:"Principales Emisores Globales"}),w.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:i.companies.map((_,E)=>w.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/5 hover:bg-white/10 rounded-xl border border-white/10 hover:border-white/20 transition-all duration-300 cursor-pointer group",children:[w.jsxs("div",{children:[w.jsx("p",{className:"font-medium group-hover:text-green-400 transition-colors",children:_.name}),w.jsx("span",{className:"inline-block px-3 py-1 text-xs bg-white/5 rounded-lg mt-2",children:_.sector})]}),w.jsxs("div",{className:"text-right",children:[w.jsxs("p",{className:"font-bold",children:[p(_.total_emissions)," MtCOe"]}),w.jsxs("p",{className:"text-sm text-gray-400",children:[(_.total_emissions/n.total_emissions*100).toFixed(1),"% del total"]})]})]},_.name))})]})]})]}):null},Cb="https://web-production-2cf89.up.railway.app",OAe=({isVisible:t,onClose:e})=>{const[n,r]=B.useState([]),[i,o]=B.useState([]),[a,s]=B.useState(null),[l,c]=B.useState(null),[u,f]=B.useState(null),[h,d]=B.useState(!1),[v,y]=B.useState(null),[g,p]=B.useState("country");B.useEffect(()=>{t&&x()},[t]),B.useEffect(()=>{a&&_(a)},[a]);const x=async()=>{d(!0),y(null);try{const A=await fetch(`${Cb}/countries/list`);if(!A.ok)throw new Error(`Error fetching countries data: ${A.statusText}`);const T=await A.json();if(Array.isArray(T.countries))r(T.countries);else throw new Error("Unexpected data format from API")}catch(A){console.error("Error loading countries:",A),y("Error loading countries")}finally{d(!1)}},_=async A=>{if(!A||!A.name){y("Invalid country data");return}d(!0),y(null);const T=encodeURIComponent(A.name);console.log("Fetching commodities for country:",T);try{const P=await fetch(`${Cb}/stats/production/${T}`);if(!P.ok)throw new Error(`Error fetching commodities data for ${A.name}: ${P.statusText}`);const R=await P.json();if(Array.isArray(R.products))o(R.products);else throw new Error("Unexpected data format from API")}catch(P){console.error("Error:",P),y(`Error al cargar los commodities para ${A.name}`)}finally{d(!1)}},E=async(A,T)=>{if(!A||!T){y("Country or commodity not selected");return}d(!0),y(null);try{const P=A.name,R=T.name;console.log("Fetching simulation for country:",P,"and commodity:",R);const N=await fetch(`${Cb}/model/simulation/${encodeURIComponent(P)}/${encodeURIComponent(R)}`);if(!N.ok)throw new Error(`Error fetching simulation data for ${P} and ${R}: ${N.statusText}`);const I=await N.json();f(I),p("results")}catch(P){console.error("Error:",P),y(`Error fetching simulation data for ${A.name} and ${T.name}: ${P.message}`)}finally{d(!1)}},b=A=>new Intl.NumberFormat("en-US",{maximumFractionDigits:2,minimumFractionDigits:2}).format(A);B.useEffect(()=>{t&&x()},[t]),B.useEffect(()=>{a&&_(a)},[a]);const M=({metrics:A})=>w.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{label:"RMSE",value:A.rmse,desc:"Error Cuadrtico Medio"},{label:"MAE",value:A.mae,desc:"Error Absoluto Medio"},{label:"R Score",value:`${(A.r2_score*100).toFixed(2)}%`,desc:"Coeficiente de Determinacin"}].map((T,P)=>w.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-6 rounded-2xl border border-gray-700/50 hover:border-blue-500/50 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg hover:shadow-blue-500/20",children:[w.jsx("div",{className:"text-sm text-blue-400 font-medium",children:T.label}),w.jsx("div",{className:"text-3xl font-bold text-white mt-2 mb-1",children:b(T.value)}),w.jsx("div",{className:"text-xs text-gray-400",children:T.desc})]},T.label))}),S=()=>{if(h)return w.jsx("div",{className:"flex items-center justify-center p-12",children:w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"w-16 h-16 border-4 border-blue-500/20 border-t-blue-500 rounded-full animate-spin"}),w.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:w.jsx("div",{className:"w-8 h-8 border-4 border-purple-500/20 border-t-purple-500 rounded-full animate-spin"})})]})});if(v)return w.jsxs("div",{className:"bg-red-900/30 backdrop-blur-sm border border-red-500/50 p-6 rounded-2xl flex items-center gap-3 animate-fadeIn",children:[w.jsx(Gp,{className:"h-6 w-6 text-red-400"}),w.jsx("p",{className:"text-red-200",children:v})]});switch(g){case"country":return w.jsx("div",{className:"grid grid-cols-2 gap-4 animate-fadeIn",children:n.map((A,T)=>w.jsx("button",{onClick:()=>{s(A),p("commodity")},className:"group p-6 bg-gradient-to-br from-gray-900/90 to-gray-800/90 rounded-2xl border border-gray-700/50 hover:border-blue-500/50 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg hover:shadow-blue-500/20",style:{animation:`fadeIn 0.5s ease-out ${T*.1}s backwards`},children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("span",{className:"text-lg font-medium",children:A.name}),w.jsx(gl,{size:20,className:"text-blue-400 transform group-hover:translate-x-1 transition-transform duration-300"})]})},A.name))});case"commodity":return w.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[w.jsxs("button",{onClick:()=>{p("country"),s(null),c(null)},className:"flex items-center gap-2 text-sm text-blue-400 hover:text-blue-300 transition-colors",children:[w.jsx(gl,{size:16,className:"rotate-180"}),"Volver a pases"]}),w.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.map((A,T)=>w.jsx("button",{onClick:()=>{c(A),E(a,A)},className:"group p-6 bg-gradient-to-br from-gray-900/90 to-gray-800/90 rounded-2xl border border-gray-700/50 hover:border-blue-500/50 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg hover:shadow-blue-500/20",style:{animation:`fadeIn 0.5s ease-out ${T*.1}s backwards`},children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("span",{className:"text-lg font-medium",children:A.name}),w.jsx(gl,{size:20,className:"text-blue-400 transform group-hover:translate-x-1 transition-transform duration-300"})]})},`commodity-${T}`))})]});case"results":return w.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[w.jsxs("button",{onClick:()=>{p("commodity"),f(null),c(null)},className:"flex items-center gap-2 text-sm text-blue-400 hover:text-blue-300 transition-colors",children:[w.jsx(gl,{size:16,className:"rotate-180"}),"Volver a commodities"]}),w.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-8 rounded-2xl border border-gray-700/50 hover:border-blue-500/50 transition-all duration-500",children:[w.jsx("h3",{className:"text-xl font-semibold mb-6 text-blue-400",children:"Mtricas del Modelo"}),w.jsx(M,{metrics:u.model_metrics})]}),w.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-8 rounded-2xl border border-gray-700/50 hover:border-blue-500/50 transition-all duration-500",children:[w.jsx("h3",{className:"text-xl font-semibold mb-6 text-blue-400",children:"Resultados de la Simulacin"}),w.jsx("div",{className:"h-[400px] w-full",children:w.jsx(qu,{children:w.jsxs(P5,{data:u.simulation_results,children:[w.jsx(Gf,{strokeDasharray:"3 3",stroke:"#374151"}),w.jsx(Uo,{dataKey:"reduction_percentage",stroke:"#9CA3AF",label:{value:"Reduccin (%)",position:"bottom",fill:"#9CA3AF"}}),w.jsx(co,{stroke:"#9CA3AF",yAxisId:"left",label:{value:"Emisiones (MtCO2e)",angle:-90,position:"insideLeft",fill:"#9CA3AF"}}),w.jsx(co,{stroke:"#9CA3AF",yAxisId:"right",orientation:"right",label:{value:"Eficiencia",angle:90,position:"insideRight",fill:"#9CA3AF"}}),w.jsx(Lr,{contentStyle:{backgroundColor:"rgba(17, 24, 39, 0.9)",border:"1px solid rgba(59, 130, 246, 0.5)",borderRadius:"0.5rem",backdropFilter:"blur(4px)"}}),w.jsx(fa,{}),w.jsx(Ts,{yAxisId:"left",type:"monotone",dataKey:"predicted_emissions",stroke:"#3B82F6",strokeWidth:2,dot:{fill:"#3B82F6",r:4},activeDot:{r:6,fill:"#60A5FA"},name:"Emisiones Proyectadas"}),w.jsx(Ts,{yAxisId:"right",type:"monotone",dataKey:"reduction_efficiency",stroke:"#10B981",strokeWidth:2,dot:{fill:"#10B981",r:4},activeDot:{r:6,fill:"#34D399"},name:"Eficiencia de Reduccin"})]})})})]}),w.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-8 rounded-2xl border border-gray-700/50 hover:border-blue-500/50 transition-all duration-500",children:[w.jsx("h3",{className:"text-xl font-semibold mb-6 text-blue-400",children:"Recomendaciones"}),w.jsx("div",{className:"grid grid-cols-2 gap-6",children:[{label:"Reduccin ptima",value:`${u.recommendations.optimal_reduction}%`},{label:"Reduccin de Emisiones",value:`${b(u.recommendations.emissions_reduction)} MtCO2e`},{label:"Eficiencia",value:b(u.recommendations.reduction_efficiency)},{label:"Mejora Porcentual",value:`${b(u.recommendations.improvement_percentage)}%`}].map((A,T)=>w.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700/50 hover:border-blue-500/50 transition-all duration-300",style:{animation:`fadeIn 0.5s ease-out ${T*.1}s backwards`},children:[w.jsx("p",{className:"text-sm text-gray-400 mb-2",children:A.label}),w.jsx("p",{className:"text-2xl font-bold text-white",children:A.value})]},A.label))})]})]})}};return t?w.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-8 animate-fadeIn",children:w.jsxs("div",{className:"w-[900px] max-h-[80vh] overflow-y-auto bg-gradient-to-br from-gray-900/95 to-black/95 rounded-3xl p-8 text-white shadow-2xl border border-gray-700/50 animate-slideUp",children:[w.jsxs("div",{className:"flex justify-between items-center mb-8",children:[w.jsxs("div",{children:[w.jsxs("h2",{className:"text-3xl font-bold flex items-center gap-3 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-blue-600",children:[w.jsx(Bu,{className:"h-8 w-8 text-blue-500"}),"Simulador de Emisiones"]}),w.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[g==="country"&&"Selecciona un pas para comenzar",g==="commodity"&&`Commodities disponibles para ${a==null?void 0:a.name}`,g==="results"&&`${a==null?void 0:a.name} - ${l==null?void 0:l.name}`]})]}),w.jsx("button",{onClick:e,className:"p-2 rounded-xl hover:bg-gray-800/50 transition-all duration-300 group",children:w.jsx(Ma,{size:24,className:"text-gray-400 group-hover:text-red-400 transition-colors"})})]}),S()]})}):null},R5=document.createElement("style");R5.textContent=`
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideUp {
    from { 
        opacity: 0;
        transform: translateY(20px);
    }
    to { 
        opacity: 1;
        transform: translateY(0);
    }
}

.animate-fadeIn {
    animation: fadeIn 0.5s ease-out;
}

.animate-slideUp {
    animation: slideUp 0.5s ease-out;
}
`;document.head.appendChild(R5);const dL="https://web-production-2cf89.up.railway.app",IAe=({isVisible:t,onClose:e})=>{const[n,r]=B.useState([]),[i,o]=B.useState(null),[a,s]=B.useState(null),[l,c]=B.useState(!1),[u,f]=B.useState(null);B.useEffect(()=>{t&&h()},[t]);const h=async()=>{c(!0),f(null);try{const _=await fetch(`${dL}/countries/list`);if(!_.ok)throw new Error("Error fetching countries");const E=await _.json();r(E.countries)}catch{f("Error loading countries")}finally{c(!1)}},d=async _=>{c(!0),f(null);try{const E=await fetch(`${dL}/model/country_predictions/${encodeURIComponent(_.name)}`);if(!E.ok)throw new Error("Error fetching predictions");const b=await E.json();s(b)}catch{f(`Error loading predictions for ${_.name}`)}finally{c(!1)}},v=_=>new Intl.NumberFormat("en-US",{maximumFractionDigits:2,minimumFractionDigits:2}).format(_),y=({title:_,children:E})=>w.jsxs("div",{className:"bg-gradient-to-br from-slate-900/90 to-black/90 p-8 rounded-2xl border border-cyan-900/50 hover:border-cyan-500/50 transition-all duration-500 mb-6 backdrop-blur-xl shadow-lg shadow-cyan-500/20",children:[w.jsx("h3",{className:"text-xl font-semibold mb-6 text-cyan-400 tracking-wider",children:_}),E]}),g=({metrics:_})=>w.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{label:"RMSE",value:_.rmse,desc:"Error Cuadrtico Medio"},{label:"R Score",value:_.r2_score,desc:"Coeficiente de Determinacin"},{label:"Tiempo",value:`${_.training_time.toFixed(2)}s`,desc:"Duracin del Entrenamiento"}].map((E,b)=>w.jsxs("div",{className:"bg-gradient-to-br from-slate-900/90 to-black/90 p-6 rounded-2xl border border-cyan-900/50 hover:border-cyan-500/50 transition-all duration-300 backdrop-blur-xl",style:{animation:`fadeIn 0.5s ease-out ${b*.1}s backwards`},children:[w.jsx("div",{className:"text-sm text-cyan-400 font-medium tracking-wider",children:E.label}),w.jsx("div",{className:"text-3xl font-bold text-white mt-2 mb-1 font-mono",children:v(E.value)}),w.jsx("div",{className:"text-xs text-gray-400",children:E.desc})]},E.label))}),p=()=>l?w.jsx("div",{className:"flex items-center justify-center p-12",children:w.jsx("div",{className:"w-16 h-16 border-4 border-cyan-500/20 border-t-cyan-500 rounded-full animate-spin"})}):u?w.jsxs("div",{className:"bg-red-900/30 backdrop-blur-sm border border-red-500/50 p-6 rounded-2xl flex items-center gap-3",children:[w.jsx(Gp,{className:"h-6 w-6 text-red-400"}),w.jsx("p",{className:"text-red-200",children:u})]}):i?w.jsxs("div",{className:"space-y-6",children:[w.jsxs("button",{onClick:()=>{o(null),s(null)},className:"flex items-center gap-2 text-sm text-cyan-400 hover:text-cyan-300 transition-colors tracking-wider",children:[w.jsx(gl,{className:"rotate-180"}),"Volver a pases"]}),a&&w.jsxs(w.Fragment,{children:[w.jsx(y,{title:"Mtricas del Modelo",children:w.jsx(g,{metrics:a.metrics})}),w.jsx(y,{title:"Prediccin de Emisiones",children:w.jsx("div",{className:"h-[400px] w-full",children:w.jsx(qu,{children:w.jsxs(P5,{data:a.predictions.historical.concat(a.predictions.forecast),children:[w.jsx(Gf,{strokeDasharray:"3 3",stroke:"#1e293b"}),w.jsx(Uo,{dataKey:"year",stroke:"#94a3b8",label:{value:"Ao",position:"bottom",fill:"#94a3b8"}}),w.jsx(co,{stroke:"#94a3b8",label:{value:"Emisiones (MtCO2e)",angle:-90,position:"insideLeft",fill:"#94a3b8"}}),w.jsx(Lr,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.9)",border:"1px solid rgba(6, 182, 212, 0.5)",borderRadius:"0.5rem",backdropFilter:"blur(4px)"}}),w.jsx(fa,{}),w.jsx(Ts,{type:"monotone",dataKey:"emissions",stroke:"#06b6d4",strokeWidth:2,dot:{fill:"#06b6d4",r:4},activeDot:{r:6,fill:"#22d3ee"},name:"Emisiones Histricas"}),w.jsx(Ts,{type:"monotone",dataKey:"forecast",stroke:"#14b8a6",strokeWidth:2,dot:{fill:"#14b8a6",r:4},activeDot:{r:6,fill:"#2dd4bf"},name:"Predicciones",strokeDasharray:"5 5"})]})})})}),w.jsxs(y,{title:"Estado y Recomendaciones",children:[w.jsx("div",{className:"grid grid-cols-2 gap-6 mb-6",children:w.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-cyan-900/50 backdrop-blur-xl",children:[w.jsxs("h3",{className:"text-lg font-semibold mb-4 tracking-wider",style:{color:x(a.status.current_state)},children:["Estado: ",a.status.current_state]}),w.jsx("p",{className:"text-gray-300",children:a.status.message}),w.jsxs("div",{className:"mt-4 space-y-2",children:[w.jsxs("p",{className:"text-sm text-gray-400",children:["Tendencia Anual: ",w.jsxs("span",{className:"text-cyan-400 font-mono",children:[a.status.annual_trend.toFixed(1),"%"]})]}),w.jsxs("p",{className:"text-sm text-gray-400",children:["Cambio Reciente: ",w.jsxs("span",{className:"text-cyan-400 font-mono",children:[a.status.recent_change.toFixed(1),"%"]})]}),w.jsxs("p",{className:"text-sm text-gray-400",children:["Cambio Proyectado: ",w.jsxs("span",{className:"text-cyan-400 font-mono",children:[a.status.forecast_change.toFixed(1),"%"]})]})]})]})}),w.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-cyan-900/50 backdrop-blur-xl",children:[w.jsx("h3",{className:"text-lg font-semibold mb-4 text-cyan-400 tracking-wider",children:"Recomendaciones"}),w.jsx("ul",{className:"space-y-2",children:a.recommendations.map((_,E)=>w.jsxs("li",{className:"flex items-start gap-2 text-gray-300 hover:text-cyan-300 transition-colors",children:[w.jsx("div",{className:"mt-1 text-cyan-400",children:""}),_]},E))})]})]})]})]}):w.jsx("div",{className:"grid grid-cols-2 gap-4",children:n.map((_,E)=>w.jsx("button",{onClick:()=>{o(_),d(_)},className:"group p-6 bg-gradient-to-br from-slate-900/90 to-black/90 rounded-2xl border border-cyan-900/50 hover:border-cyan-500/50 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg hover:shadow-cyan-500/20 backdrop-blur-xl",style:{animation:`fadeIn 0.5s ease-out ${E*.1}s backwards`},children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("span",{className:"text-lg font-medium tracking-wider",children:_.name}),w.jsx(gl,{className:"text-cyan-400 transform group-hover:translate-x-1 transition-transform duration-300"})]})},_.name))}),x=_=>{switch(_){case"POSITIVO":return"#10b981";case"ALERTA":return"#ef4444";default:return"#f59e0b"}};return t?w.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-8 animate-fadeIn",children:w.jsxs("div",{className:"w-[900px] max-h-[80vh] overflow-y-auto bg-gradient-to-br from-slate-900/95 to-black/95 rounded-3xl p-8 text-white shadow-2xl border border-cyan-900/50 animate-slideUp backdrop-blur-xl",children:[w.jsxs("div",{className:"flex justify-between items-center mb-8",children:[w.jsxs("div",{children:[w.jsxs("h2",{className:"text-3xl font-bold flex items-center gap-3 tracking-wider",children:[w.jsx(Bu,{className:"h-8 w-8 text-cyan-500"}),w.jsx("span",{className:"bg-gradient-to-r from-cyan-400 to-teal-400 text-transparent bg-clip-text",children:"Prediccin de Emisiones"})]}),w.jsx("p",{className:"text-sm text-gray-400 mt-2",children:i?i.name:"Selecciona un pas para comenzar"})]}),w.jsx("button",{onClick:e,className:"p-2 rounded-xl hover:bg-slate-800/50 transition-all duration-300 group",children:w.jsx(Ma,{className:"text-gray-400 group-hover:text-red-400 transition-colors"})})]}),p()]})}):null},NAe="https://web-production-2cf89.up.railway.app",DAe=({isVisible:t,onClose:e})=>{const[n,r]=B.useState(null),[i,o]=B.useState(!1),[a,s]=B.useState(null);B.useEffect(()=>{t&&l()},[t]);const l=async()=>{o(!0),s(null);try{const f=await fetch(`${NAe}/model/predictions`);if(!f.ok)throw new Error("Error fetching predictions");const h=await f.json();r(h)}catch{s("Error loading predictions")}finally{o(!1)}},c=({title:f,children:h})=>w.jsxs("div",{className:"bg-gradient-to-br from-slate-900/90 to-black/90 p-8 rounded-2xl border border-cyan-900/50 hover:border-cyan-500/50 transition-all duration-500 mb-6 backdrop-blur-xl shadow-lg shadow-cyan-500/20",children:[w.jsx("h3",{className:"text-xl font-semibold mb-6 text-cyan-400 tracking-wider",children:f}),h]}),u=()=>{var f,h,d,v,y,g,p,x,_,E,b,M;return i?w.jsx("div",{className:"flex items-center justify-center p-12",children:w.jsx("div",{className:"w-16 h-16 border-4 border-cyan-500/20 border-t-cyan-500 rounded-full animate-spin"})}):a?w.jsxs("div",{className:"bg-red-900/30 backdrop-blur-sm border border-red-500/50 p-6 rounded-2xl flex items-center gap-3",children:[w.jsx(Gp,{className:"h-6 w-6 text-red-400"}),w.jsx("p",{className:"text-red-200",children:a})]}):w.jsxs(w.Fragment,{children:[w.jsx(c,{title:"Emisiones Globales",children:w.jsx("div",{className:"h-[400px] w-full",children:w.jsx(qu,{children:w.jsxs(C5,{data:(h=n==null?void 0:n.predictions)==null?void 0:h.historical.concat((f=n==null?void 0:n.predictions)==null?void 0:f.forecast),children:[w.jsx("defs",{children:w.jsxs("linearGradient",{id:"colorGlobalEmissions",x1:"0",y1:"0",x2:"0",y2:"1",children:[w.jsx("stop",{offset:"5%",stopColor:"#06b6d4",stopOpacity:.3}),w.jsx("stop",{offset:"95%",stopColor:"#06b6d4",stopOpacity:0})]})}),w.jsx(Gf,{strokeDasharray:"3 3",stroke:"#1e293b"}),w.jsx(Uo,{dataKey:"year",stroke:"#94a3b8",label:{value:"Ao",position:"bottom",fill:"#94a3b8"}}),w.jsx(co,{stroke:"#94a3b8",label:{value:"Emisiones (MtCO2e)",angle:-90,position:"insideLeft",fill:"#94a3b8"}}),w.jsx(Lr,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.9)",border:"1px solid rgba(6, 182, 212, 0.5)",borderRadius:"0.5rem",backdropFilter:"blur(4px)"}}),w.jsx(fa,{}),w.jsx(No,{type:"monotone",dataKey:"emissions",stroke:"#06b6d4",strokeWidth:2,fillOpacity:1,fill:"url(#colorGlobalEmissions)",name:"Emisiones Histricas"}),w.jsx(No,{type:"monotone",dataKey:"emissions",stroke:"#14b8a6",strokeWidth:2,fillOpacity:.3,fill:"url(#colorGlobalEmissions)",name:"Predicciones",strokeDasharray:"5 5"})]})})})}),w.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[w.jsx(c,{title:"Mtricas del Modelo",children:w.jsx("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-cyan-900/50 backdrop-blur-xl",children:w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{children:[w.jsx("h4",{className:"text-sm text-gray-400",children:"RMSE"}),w.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:(d=n==null?void 0:n.metrics)==null?void 0:d.rmse.toFixed(2)})]}),w.jsxs("div",{children:[w.jsx("h4",{className:"text-sm text-gray-400",children:"R Score"}),w.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:(v=n==null?void 0:n.metrics)==null?void 0:v.r2_score.toFixed(2)})]}),w.jsxs("div",{children:[w.jsx("h4",{className:"text-sm text-gray-400",children:"Tiempo de Entrenamiento"}),w.jsxs("div",{className:"text-2xl font-bold text-cyan-400",children:[(y=n==null?void 0:n.metrics)==null?void 0:y.training_time.toFixed(2),"s"]})]})]})})}),w.jsx(c,{title:"Proyecciones",children:w.jsx("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-cyan-900/50 backdrop-blur-xl",children:w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("h4",{className:"text-sm text-gray-400",children:"Emisiones Futuras Estimadas"}),(g=n==null?void 0:n.predictions)==null?void 0:g.forecast.map((S,A)=>w.jsxs("div",{className:"mt-2",children:[w.jsxs("span",{className:"text-gray-300",children:[S.year,": "]}),w.jsxs("span",{className:"text-cyan-400 font-mono",children:[S.emissions.toFixed(2)," MtCO2e"]})]},A))]}),w.jsxs("div",{className:"mt-4",children:[w.jsx("h4",{className:"text-sm text-gray-400",children:"Cambio Porcentual"}),w.jsxs("div",{className:"text-xl font-bold text-cyan-400",children:[((((_=(x=n==null?void 0:n.predictions)==null?void 0:x.forecast[((p=n==null?void 0:n.predictions)==null?void 0:p.forecast.length)-1])==null?void 0:_.emissions)/((M=(b=n==null?void 0:n.predictions)==null?void 0:b.historical[((E=n==null?void 0:n.predictions)==null?void 0:E.historical.length)-1])==null?void 0:M.emissions)-1)*100).toFixed(2),"%"]})]})]})})})]})]})};return t?w.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-8 animate-fadeIn",children:w.jsxs("div",{className:"w-[900px] max-h-[80vh] overflow-y-auto bg-gradient-to-br from-slate-900/95 to-black/95 rounded-3xl p-8 text-white shadow-2xl border border-cyan-900/50 animate-slideUp backdrop-blur-xl",children:[w.jsxs("div",{className:"flex justify-between items-center mb-8",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(zd,{className:"h-8 w-8 text-cyan-500"}),w.jsx("h2",{className:"text-3xl font-bold tracking-wider bg-gradient-to-r from-cyan-400 to-teal-400 text-transparent bg-clip-text",children:"Predicciones Globales de CO2"})]}),w.jsx("button",{onClick:e,className:"p-2 rounded-xl hover:bg-slate-800/50 transition-all duration-300 group",children:w.jsx(Ma,{className:"text-gray-400 group-hover:text-red-400 transition-colors"})})]}),u()]})}):null},Lc=({title:t,description:e,icon:n,className:r=""})=>{const[i,o]=B.useState(!1);return w.jsxs("div",{className:`
                relative overflow-hidden p-6 rounded-xl
                bg-gradient-to-br from-gray-900/80 to-black
                border border-gray-800 backdrop-blur-sm
                transform transition-all duration-500
                hover:scale-105 hover:shadow-2xl
                ${r}
            `,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[w.jsx("div",{className:"absolute inset-0 bg-gradient-to-br opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),w.jsxs("div",{className:"relative z-10",children:[w.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[w.jsx("div",{className:"p-2 rounded-lg bg-gray-800/50",children:w.jsx(n,{})}),w.jsx("h4",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-300",children:t})]}),w.jsx("p",{className:"text-gray-400 leading-relaxed",children:e})]}),i&&w.jsx("div",{className:"absolute inset-0 bg-white/5 rounded-xl animate-pulse-slow"})]})},kc=({title:t,description:e,icon:n})=>w.jsx("div",{className:"group p-4 bg-black/20 rounded-lg border border-gray-800 hover:border-blue-500/30 transition-all duration-300",children:w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"p-2 rounded-lg bg-blue-900/30 group-hover:bg-blue-900/50 transition-all",children:w.jsx(n,{})}),w.jsxs("div",{children:[w.jsx("h5",{className:"font-semibold text-blue-300",children:t}),w.jsx("p",{className:"text-gray-400 text-sm",children:e})]})]})}),Rb=({title:t,icon:e,demands:n})=>w.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-600/20 to-purple-900/20 rounded-xl border border-purple-500/30",children:[w.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[w.jsx("div",{className:"p-2 rounded-lg bg-black/20",children:w.jsx(e,{})}),w.jsx("h4",{className:"text-xl font-bold text-purple-400",children:t})]}),w.jsx("ul",{className:"space-y-3",children:n.map((r,i)=>w.jsxs("li",{className:"flex items-center gap-2 text-gray-300",children:[w.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-purple-500"}),r]},i))})]}),gn={Earth:()=>w.jsxs("svg",{viewBox:"0 0 24 24",className:"w-8 h-8",children:[w.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"animate-pulse-slow",children:w.jsx("animate",{attributeName:"r",values:"10;9;10",dur:"3s",repeatCount:"indefinite"})}),w.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z",fill:"currentColor",className:"text-emerald-500",children:w.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 12 12",to:"360 12 12",dur:"20s",repeatCount:"indefinite"})})]}),Protest:()=>w.jsx("svg",{viewBox:"0 0 24 24",className:"w-8 h-8",children:w.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",className:"text-blue-500",children:w.jsx("animate",{attributeName:"stroke-dasharray",values:"1,150;150,1",dur:"2s",repeatCount:"indefinite"})})}),Warning:()=>w.jsxs("svg",{viewBox:"0 0 24 24",className:"w-8 h-8",children:[w.jsx("path",{d:"M12 2L2 22h20L12 2z",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-red-500",children:w.jsx("animate",{attributeName:"stroke-dasharray",values:"0,100;100,0",dur:"2s",repeatCount:"indefinite"})}),w.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"15",stroke:"currentColor",strokeWidth:"2",children:w.jsx("animate",{attributeName:"strokeOpacity",values:"0;1;1;0",dur:"1.5s",repeatCount:"indefinite"})})]}),Fire:()=>w.jsx("svg",{viewBox:"0 0 24 24",className:"w-8 h-8",children:w.jsx("path",{d:"M12 2c0 0-3 4-3 6c0 1.5 1 2 1 2s-1.5-0.5-1.5 1c0 1.5 1 2 1 2s-1.5-0.5-1.5 1c0 1.5 3 2 3 2s-1.5-0.5-1.5 1c0 1.5 1.5 2 1.5 2s-1.5-0.5-1.5 1c0 1.5 3 2 3 2",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-orange-500",children:w.jsx("animate",{attributeName:"d",values:"M12 2c0 0-3 4-3 6c0 1.5 1 2 1 2s-1.5-0.5-1.5 1c0 1.5 1 2 1 2s-1.5-0.5-1.5 1c0 1.5 3 2 3 2s-1.5-0.5-1.5 1c0 1.5 1.5 2 1.5 2s-1.5-0.5-1.5 1c0 1.5 3 2 3 2;M12 2c0 0-2 4-2 6c0 1.5 1.5 2 1.5 2s-1-0.5-1 1c0 1.5 1.5 2 1.5 2s-1-0.5-1 1c0 1.5 2 2 2 2s-1-0.5-1 1c0 1.5 1.5 2 1.5 2s-1-0.5-1 1c0 1.5 2 2 2 2",dur:"0.5s",repeatCount:"indefinite"})})}),Wave:()=>w.jsx("svg",{viewBox:"0 0 24 24",className:"w-8 h-8",children:w.jsx("path",{d:"M2 12s4-8 10-8 10 8 10 8-4 8-10 8-10-8-10-8z",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-blue-400",children:w.jsx("animate",{attributeName:"d",values:"M2 12s4-8 10-8 10 8 10 8-4 8-10 8-10-8-10-8z;M2 12s4-4 10-4 10 4 10 4-4 4-10 4-10-4-10-4z;M2 12s4-8 10-8 10 8 10 8-4 8-10 8-10-8-10-8z",dur:"3s",repeatCount:"indefinite"})})})},LAe=[{id:"purpose",icon:gn.Earth,label:"Misin Global",color:"from-emerald-600 to-green-800",gradient:"from-emerald-900/50 to-green-900/50"},{id:"crisis",icon:gn.Fire,label:"Crisis Climtica",color:"from-red-600 to-orange-700",gradient:"from-red-900/50 to-orange-900/50"},{id:"action",icon:gn.Protest,label:"Accin Ciudadana",color:"from-blue-600 to-indigo-800",gradient:"from-blue-900/50 to-indigo-900/50"},{id:"demands",icon:gn.Warning,label:"Exigencias",color:"from-purple-600 to-pink-700",gradient:"from-purple-900/50 to-pink-900/50"}],kAe=({isVisible:t,onClose:e})=>{const[n,r]=B.useState("purpose"),[i,o]=B.useState(!1);return B.useEffect(()=>(t&&(o(!0),document.body.style.overflow="hidden"),()=>{document.body.style.overflow="unset"}),[t]),t?w.jsxs("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-lg z-50",children:[w.jsx("div",{className:"h-full overflow-y-auto",children:w.jsx("div",{className:"container mx-auto p-4",children:w.jsxs("div",{className:"w-full max-w-7xl mx-auto bg-gradient-to-br from-gray-900 to-black rounded-2xl overflow-hidden shadow-2xl border border-gray-800",children:[w.jsxs("div",{className:"sticky top-0 z-20 bg-gradient-to-br from-gray-900 to-black",children:[w.jsxs("div",{className:"relative p-8 overflow-hidden",children:[w.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/10 to-blue-500/10 animate-pulse-slow"}),w.jsxs("div",{className:"relative z-10 flex justify-between items-center",children:[w.jsxs("div",{className:"flex items-center gap-6",children:[w.jsx(gn.Earth,{}),w.jsxs("div",{children:[w.jsx("h2",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-300 to-blue-300",children:"Accin por el Clima"}),w.jsx("p",{className:"text-gray-400 mt-2",children:"Unidos por un futuro sostenible"})]})]}),w.jsx("button",{onClick:()=>{document.body.style.overflow="unset",e()},className:"p-3 rounded-xl hover:bg-gray-800/50 transition-all duration-300 group",children:w.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-gray-400 group-hover:text-red-400",children:w.jsx("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]})]}),w.jsx("nav",{className:"flex gap-3 p-4 bg-black/50 overflow-x-auto",children:LAe.map(a=>w.jsxs("button",{onClick:()=>r(a.id),className:`
                                            relative group flex items-center gap-3 px-6 py-3 rounded-xl
                                            transition-all duration-500 whitespace-nowrap
                                            ${n===a.id?`bg-gradient-to-r ${a.color} shadow-lg scale-105`:"bg-gray-800/50 hover:bg-gray-700/50"}
                                        `,children:[w.jsx(a.icon,{}),w.jsx("span",{className:"font-medium",children:a.label}),n===a.id&&w.jsx("div",{className:"absolute inset-0 bg-white/10 rounded-xl animate-pulse-slow"})]},a.id))})]}),w.jsxs("div",{className:"p-6",children:[n==="purpose"&&w.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[w.jsx("h3",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-green-300",children:"Nuestra Misin por el Planeta"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.jsx(Lc,{title:"Visualizacin de Impacto",description:"Creamos consciencia sobre la crisis climtica a travs de datos visuales impactantes y anlisis en tiempo real de las emisiones globales.",icon:gn.Earth,className:"border-emerald-500/20"}),w.jsx(Lc,{title:"Educacin Ambiental",description:"Proporcionamos informacin clara y actualizada sobre el cambio climtico y sus efectos en nuestro planeta y sociedades.",icon:gn.Wave,className:"border-emerald-500/20"}),w.jsx(Lc,{title:"Movilizacin Global",description:"Conectamos activistas y organizaciones para crear un movimiento global unificado por la justicia climtica.",icon:gn.Protest,className:"border-emerald-500/20"}),w.jsx(Lc,{title:"Soluciones Climticas",description:"Proponemos y promovemos soluciones concretas para la reduccin de emisiones y la transicin hacia energas renovables.",icon:gn.Fire,className:"border-emerald-500/20"})]})]}),n==="crisis"&&w.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[w.jsx("h3",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-red-400 to-orange-300",children:"Crisis Climtica: La Cuenta Regresiva"}),w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[w.jsx("div",{className:"lg:col-span-2",children:w.jsxs("div",{className:"bg-black/40 p-6 rounded-xl border border-red-500/30 space-y-4",children:[w.jsx("h4",{className:"text-2xl font-bold text-red-400",children:"Punto de No Retorno"}),w.jsx("div",{className:"relative overflow-hidden rounded-lg h-48 bg-gray-900/50",children:w.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-4xl font-bold text-red-500",children:"1.5C"}),w.jsx("div",{className:"text-gray-400",children:"Lmite crtico de calentamiento"})]})})}),w.jsx("p",{className:"text-gray-300",children:"Estamos peligrosamente cerca del punto de no retorno. Las emisiones actuales nos llevan a un calentamiento catastrfico si no actuamos ahora."})]})}),w.jsxs("div",{className:"space-y-6",children:[w.jsx(Lc,{title:"Impacto Global",description:"Los efectos del cambio climtico ya son evidentes: eventos extremos, prdida de biodiversidad y riesgo para millones.",icon:gn.Warning,className:"border-red-500/20"}),w.jsx(Lc,{title:"Tiempo Limitado",description:"Cientficos advierten que tenemos menos de una dcada para realizar cambios drsticos y evitar daos irreversibles.",icon:gn.Fire,className:"border-red-500/20"})]})]})]}),n==="action"&&w.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[w.jsx("h3",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-indigo-300",children:"Accin Climtica: El Momento es Ahora"}),w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[w.jsxs("div",{className:"bg-black/40 p-6 rounded-xl border border-blue-500/30",children:[w.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[w.jsx(gn.Wave,{}),w.jsx("h4",{className:"text-2xl font-bold text-blue-400",children:"Acciones Individuales"})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsx(kc,{title:"Reduce tu Huella de Carbono",description:"Calcula y reduce tu impacto personal en el planeta.",icon:gn.Earth}),w.jsx(kc,{title:"Transporte Sostenible",description:"Utiliza bicicleta, transporte pblico o vehculos elctricos.",icon:gn.Wave}),w.jsx(kc,{title:"Consumo Consciente",description:"Elige productos locales y reduce el desperdicio.",icon:gn.Fire}),w.jsx("button",{className:"w-full py-3 mt-4 bg-blue-600/20 hover:bg-blue-600/40 rounded-lg border border-blue-500/30 transition-all duration-300",children:"Calcula tu Impacto "})]})]}),w.jsxs("div",{className:"bg-black/40 p-6 rounded-xl border border-indigo-500/30",children:[w.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[w.jsx(gn.Protest,{}),w.jsx("h4",{className:"text-2xl font-bold text-indigo-400",children:"Accin Comunitaria"})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsx(kc,{title:"nete a Movimientos",description:"Participa en organizaciones locales y globales por el clima.",icon:gn.Protest}),w.jsx(kc,{title:"Educa e Inspira",description:"Comparte conocimiento y motiva a otros a actuar.",icon:gn.Wave}),w.jsx(kc,{title:"Proyectos Locales",description:"Inicia o nete a proyectos de sostenibilidad en tu comunidad.",icon:gn.Earth}),w.jsx("button",{className:"w-full py-3 mt-4 bg-indigo-600/20 hover:bg-indigo-600/40 rounded-lg border border-indigo-500/30 transition-all duration-300",children:"Encuentra Grupos Locales "})]})]})]}),w.jsxs("div",{className:"relative mt-8 p-6 bg-black/40 rounded-xl border border-blue-500/30",children:[w.jsx("h4",{className:"text-2xl font-bold text-blue-400 mb-4",children:"Impacto Global de la Accin Climtica"}),w.jsx("div",{className:"aspect-video bg-gray-900/50 rounded-lg overflow-hidden relative",children:w.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-4xl font-bold text-blue-500",children:"2.1M+"}),w.jsx("div",{className:"text-gray-400",children:"Activistas Unidos Globalmente"})]})})})]})]}),n==="demands"&&w.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[w.jsx("h3",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-300",children:"Exigencias para el Cambio"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[w.jsx(Rb,{title:"Para Gobiernos",icon:gn.Warning,demands:["Declaracin de emergencia climtica","100% energas renovables para 2035","Fin de subsidios a combustibles fsiles","Leyes estrictas de proteccin ambiental"]}),w.jsx(Rb,{title:"Para Empresas",icon:gn.Fire,demands:["Neutralidad de carbono para 2030","Transparencia en emisiones","Inversin en tecnologas limpias","Cadenas de suministro sostenibles"]}),w.jsx(Rb,{title:"Para Instituciones",icon:gn.Earth,demands:["Desinversin de combustibles fsiles","Educacin climtica obligatoria","Investigacin en soluciones verdes","Polticas de cero residuos"]})]}),w.jsx("div",{className:"mt-8 p-8 bg-gradient-to-r from-purple-900/30 to-pink-900/30 rounded-xl border border-purple-500/30",children:w.jsxs("div",{className:"text-center space-y-4",children:[w.jsx("h4",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-300",children:"nete al Movimiento!"}),w.jsx("p",{className:"text-gray-300 max-w-2xl mx-auto",children:"El tiempo de actuar es ahora. Cada voz cuenta, cada accin suma. Juntos podemos crear el cambio que nuestro planeta necesita."}),w.jsx("div",{className:"flex justify-center mt-6",children:w.jsx("button",{className:"px-6 py-3 bg-pink-600 hover:bg-pink-500 rounded-lg transition-all duration-300",children:"Comparte el Mensaje"})})]})})]})]})]})})}),w.jsx("style",{jsx:!0,children:`
                ::-webkit-scrollbar {
                    width: 8px;
                }

                ::-webkit-scrollbar-track {
                    background: rgba(0, 0, 0, 0.1);
                }

                ::-webkit-scrollbar-thumb {
                    background: rgba(255, 255, 255, 0.2);
                    border-radius: 4px;
                }

                ::-webkit-scrollbar-thumb:hover {
                    background: rgba(255, 255, 255, 0.3);
                }

                @keyframes fadeIn {
                    from {
                        opacity: 0;
                        transform: translateY(10px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }

                @keyframes pulse-slow {
                    0%, 100% {
                        opacity: 1;
                    }
                    50% {
                        opacity: 0.5;
                    }
                }

                .animate-fadeIn {
                    animation: fadeIn 0.5s ease-out forwards;
                }

                .animate-pulse-slow {
                    animation: pulse-slow 3s ease-in-out infinite;
                }
            `})]}):null},jAe=({isVisible:t,onClose:e})=>{var f;const[n,r]=B.useState("general"),[i,o]=B.useState(""),[a,s]=B.useState(!1);if(B.useEffect(()=>{t&&s(!0)},[t,n]),!t)return null;const l={Book:()=>w.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:w.jsx("path",{d:"M2 6s1.5-2 5-2 5 2 5 2v14s-1.5-1-5-1-5 1-5 1V6zm10 0s1.5-2 5-2 5 2 5 2v14s-1.5-1-5-1-5 1-5 1V6z",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:w.jsx("animate",{attributeName:"stroke-dasharray",from:"0 100",to:"100 100",dur:"1.5s",begin:"0s",fill:"freeze"})})}),Factory:()=>w.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:w.jsx("path",{d:"M12 16V4l-6 6v6m12 0V8l-6 4v4M2 20h20",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:w.jsx("animate",{attributeName:"stroke-dasharray",from:"0 100",to:"100 100",dur:"1.5s",begin:"0s",fill:"freeze"})})}),Data:()=>w.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:w.jsxs("g",{fill:"none",stroke:"currentColor",strokeWidth:"2",children:[w.jsx("circle",{cx:"12",cy:"12",r:"8",children:w.jsx("animate",{attributeName:"r",values:"8;7;8",dur:"2s",repeatCount:"indefinite"})}),w.jsx("path",{d:"M12 4v16M4 12h16",children:w.jsx("animate",{attributeName:"stroke-dasharray",from:"0 100",to:"100 100",dur:"1.5s",begin:"0s",fill:"freeze"})})]})}),Emission:()=>w.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:w.jsx("path",{d:"M12 4c-3 0-6 2-6 6 0 4 6 10 6 10s6-6 6-10c0-4-3-6-6-6z",fill:"none",stroke:"currentColor",strokeWidth:"2",children:w.jsx("animate",{attributeName:"stroke-dasharray",from:"0 100",to:"100 100",dur:"1.5s",begin:"0s",fill:"freeze"})})}),Fuel:()=>w.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:w.jsx("path",{d:"M12 2l-6 12h12L12 2zm0 20l-3-6h6l-3 6z",fill:"none",stroke:"currentColor",strokeWidth:"2",children:w.jsx("animate",{attributeName:"stroke-dasharray",from:"0 100",to:"100 100",dur:"1.5s",begin:"0s",fill:"freeze"})})}),Search:()=>w.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[w.jsx("circle",{cx:"11",cy:"11",r:"7",fill:"none",stroke:"currentColor",strokeWidth:"2",children:w.jsx("animate",{attributeName:"r",values:"7;6.5;7",dur:"2s",repeatCount:"indefinite"})}),w.jsx("path",{d:"M21 21l-4.35-4.35",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:w.jsx("animate",{attributeName:"stroke-dasharray",from:"0 20",to:"20 20",dur:"1s",begin:"0s",fill:"freeze"})})]})},c={general:{icon:l.Book,title:"Conceptos Generales",bgGradient:"from-emerald-500 to-teal-700",items:[{title:"Carbon Majors Database",description:"Base de datos que rastrea las emisiones de gases de efecto invernadero desde 1854 hasta la actualidad, vinculndolas directamente con las empresas productoras.",icon:l.Data},{title:"Gases de Efecto Invernadero",description:"Gases atmosfricos que retienen el calor y contribuyen al cambio climtico. Los principales son CO2, metano y xido nitroso.",icon:l.Emission},{title:"MtCO2e",description:"Millones de toneladas de CO2 equivalente. Unidad estndar para medir las emisiones de gases de efecto invernadero.",icon:l.Data}]},empresas:{icon:l.Factory,title:"Tipos de Empresas",bgGradient:"from-blue-500 to-indigo-700",items:[{title:"Empresas Privadas",description:"Compaas de propiedad de inversores privados que producen combustibles fsiles.",icon:l.Factory},{title:"Empresas Estatales",description:"Compaas controladas en ms del 50% por gobiernos nacionales.",icon:l.Factory},{title:"Productores Nacionales",description:"Produccin directamente controlada por estados, comn en el sector del carbn.",icon:l.Factory}]},datos:{icon:l.Data,title:"Fuentes de Datos",bgGradient:"from-purple-500 to-pink-700",items:[{title:"Datos Autorreportados",description:"Informacin proporcionada directamente por las empresas en informes anuales y documentos oficiales.",icon:l.Data},{title:"Fuentes Externas",description:"Datos de agencias como EIA, Oil & Gas Journal y otros cuando no hay datos directos disponibles.",icon:l.Data},{title:"Verificacin",description:"Proceso de validacin de datos usando mltiples fuentes y metodologas estandarizadas.",icon:l.Data}]},emisiones:{icon:l.Emission,title:"Tipos de Emisiones",bgGradient:"from-orange-500 to-red-700",items:[{title:"Emisiones Directas (Scope 1)",description:"Emisiones generadas directamente por las operaciones de la empresa.",icon:l.Emission},{title:"Emisiones Indirectas (Scope 3)",description:"Emisiones producidas por el uso final de los productos vendidos por la empresa.",icon:l.Emission},{title:"Emisiones Fugitivas",description:"Escapes no intencionales de gases durante la produccin y transporte.",icon:l.Emission}]},combustibles:{icon:l.Fuel,title:"Combustibles",bgGradient:"from-yellow-500 to-orange-700",items:[{title:"Petrleo y GNL",description:"Medido en barriles. Incluye petrleo crudo y lquidos de gas natural.",icon:l.Fuel},{title:"Gas Natural",description:"Medido en pies cbicos. Principal fuente de energa para generacin elctrica.",icon:l.Fuel},{title:"Carbn",description:"Medido en toneladas. Incluye diferentes tipos como trmico y metalrgico.",icon:l.Fuel}]}},u=Object.entries(c).reduce((h,[d,v])=>{const y=v.items.filter(g=>g.title.toLowerCase().includes(i.toLowerCase())||g.description.toLowerCase().includes(i.toLowerCase()));return y.length>0&&(h[d]={...v,items:y}),h},{});return w.jsxs("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-md flex items-center justify-center p-4 z-50",children:[w.jsxs("div",{className:"w-full max-w-6xl max-h-[90vh] overflow-hidden rounded-2xl bg-gradient-to-br from-slate-50 to-slate-100 shadow-2xl transform transition-all duration-500 scale-100",children:[w.jsxs("div",{className:"relative p-6 backdrop-blur-sm bg-white/80 border-b border-slate-200",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-400 to-teal-600 rounded-xl shadow-lg text-white",children:w.jsx(l.Book,{})}),w.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-emerald-600 to-teal-800 bg-clip-text text-transparent",children:"Diccionario de Carbono"})]}),w.jsx("button",{onClick:e,className:"p-2 rounded-lg hover:bg-slate-200/50 transition-all duration-300",children:w.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-slate-600",children:w.jsx("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]}),w.jsxs("div",{className:"mt-6 relative group",children:[w.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-200 to-teal-200 rounded-lg blur opacity-75 group-hover:opacity-100 transition duration-300"}),w.jsxs("div",{className:"relative flex items-center",children:[w.jsx("input",{type:"text",placeholder:"Buscar conceptos...",value:i,onChange:h=>o(h.target.value),className:"w-full px-12 py-3 bg-white rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 transition-all duration-300"}),w.jsx("div",{className:"absolute left-4 text-slate-400",children:w.jsx(l.Search,{})})]})]}),w.jsx("div",{className:"mt-6 flex gap-2 overflow-x-auto pb-2",children:Object.entries(c).map(([h,d])=>{const v=d.icon;return w.jsxs("button",{onClick:()=>r(h),className:`
                                        flex items-center gap-2 px-4 py-2 rounded-lg
                                        transition-all duration-300 whitespace-nowrap
                                        ${n===h?`bg-gradient-to-r ${d.bgGradient} text-white shadow-lg`:"bg-white hover:bg-slate-50 text-slate-700"}
                                    `,children:[w.jsx(v,{}),d.title]},h)})})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6 overflow-y-auto max-h-[calc(90vh-280px)]",children:(i?(f=u[n])==null?void 0:f.items:c[n].items).map((h,d)=>w.jsxs("div",{className:`
                                relative group p-6 bg-white rounded-xl shadow-lg
                                hover:shadow-2xl transition-all duration-500 transform
                                ${a?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}
                            `,style:{transitionDelay:`${d*100}ms`},children:[w.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/10 to-teal-500/10 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),w.jsxs("div",{className:"relative z-10",children:[w.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[w.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-400/20 to-teal-400/20 rounded-lg",children:w.jsx(h.icon,{})}),w.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:h.title})]}),w.jsx("p",{className:"text-slate-600 leading-relaxed",children:h.description})]})]},d))}),w.jsx("div",{className:"p-4 bg-gradient-to-r from-emerald-50 to-teal-50 border-t border-slate-200",children:w.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-600",children:[w.jsxs("span",{className:"flex items-center gap-2",children:[w.jsx("svg",{className:"w-4 h-4 text-emerald-500",viewBox:"0 0 24 24",children:w.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"2",children:w.jsx("animate",{attributeName:"r",values:"10;9;10",dur:"3s",repeatCount:"indefinite"})})}),"Actualizado 2024"]}),w.jsx("span",{children:"Carbon Majors Database"})]})})]}),w.jsx("style",{jsx:!0,children:`
                ::-webkit-scrollbar {
                    width: 8px;
                    height: 8px;
                }
                
                ::-webkit-scrollbar-track {
                    background: transparent;
                }
                
                ::-webkit-scrollbar-thumb {
                    background: rgba(100, 116, 139, 0.5);
                    border-radius: 4px;
                }
                
                ::-webkit-scrollbar-thumb:hover {
                    background: rgba(100, 116, 139, 0.7);
                }

                @keyframes fadeIn {
                    from {
                        opacity: 0;
                        transform: translateY(20px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }

                .animate-fadeIn {
                    animation: fadeIn 0.5s ease-out forwards;
                }
            `})]})},UAe="/EmissionsPage/sounds/mixkit-relaxing-harp-sweep-2628.mp3",FAe=({onComplete:t})=>{const[e,n]=B.useState(!1),[r,i]=B.useState(!1),[o,a]=B.useState(!1),[s,l]=B.useState(!1),[c,u]=B.useState(!1),[f,h]=B.useState(!1),d=B.useRef(null),v=B.useRef(null),y=B.useRef(null),g=B.useRef(null),p=async()=>{try{const _=new Audio(UAe);g.current=_,_.preload="auto",_.volume=.5,_.onerror=E=>{var b,M;console.error("Error loading audio:",E),console.error("Error code:",(b=_.error)==null?void 0:b.code),console.error("Error message:",(M=_.error)==null?void 0:M.message),u(!0)},_.oncanplaythrough=async()=>{try{await _.play(),console.log("Audio playing successfully")}catch(E){if(console.error("Play error:",E),E.name==="NotAllowedError"){const b=async()=>{try{await _.play(),document.removeEventListener("click",b)}catch(M){console.error("Retry play error:",M)}};document.addEventListener("click",b)}}}}catch(_){console.error("Audio setup error:",_),u(!0)}},x=()=>{l(!0),n(!0),p().catch(console.error),setTimeout(()=>{i(!0)},1e3),setTimeout(()=>{a(!0),setTimeout(()=>{n(!1),t()},1e3)},5e3)};return B.useEffect(()=>()=>{g.current&&(g.current.pause(),g.current=null)},[]),B.useEffect(()=>{var L;if(!e)return;let _;const E=new Qj,b=new si(75,window.innerWidth/window.innerHeight,.1,1e3),M=new lT({alpha:!0,antialias:!0});M.setSize(window.innerWidth,window.innerHeight),M.setPixelRatio(Math.min(window.devicePixelRatio,2)),(L=d.current)==null||L.appendChild(M.domElement);const S=new _a({uniforms:{time:{value:0},progress:{value:0},noiseScale:{value:5}},vertexShader:`
        uniform float time;
        uniform float progress;
        varying vec2 vUv;
        varying vec3 vNormal;
        varying vec3 vPosition;
        
        vec3 mod289(vec3 x) {
          return x - floor(x * (1.0 / 289.0)) * 289.0;
        }
        vec4 mod289(vec4 x) {
          return x - floor(x * (1.0 / 289.0)) * 289.0;
        }
        vec4 permute(vec4 x) {
          return mod289(((x*34.0)+1.0)*x);
        }
        vec4 taylorInvSqrt(vec4 r) {
          return 1.79284291400159 - 0.85373472095314 * r;
        }
        vec3 fade(vec3 t) {
          return t*t*t*(t*(t*6.0-15.0)+10.0);
        }

        float noise(vec3 P) {
          vec3 i0 = mod289(floor(P));
          vec3 i1 = mod289(i0 + vec3(1.0));
          vec3 f0 = fract(P);
          vec3 f1 = f0 - vec3(1.0);
          vec3 f = fade(f0);
          vec4 ix = vec4(i0.x, i1.x, i0.x, i1.x);
          vec4 iy = vec4(i0.yy, i1.yy);
          vec4 iz0 = i0.zzzz;
          vec4 iz1 = i1.zzzz;
          vec4 ixy = permute(permute(ix) + iy);
          vec4 ixy0 = permute(ixy + iz0);
          vec4 ixy1 = permute(ixy + iz1);
          vec4 gx0 = ixy0 * (1.0 / 7.0);
          vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
          gx0 = fract(gx0);
          vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
          vec4 sz0 = step(gz0, vec4(0.0));
          gx0 -= sz0 * (step(0.0, gx0) - 0.5);
          gy0 -= sz0 * (step(0.0, gy0) - 0.5);
          vec4 gx1 = ixy1 * (1.0 / 7.0);
          vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
          gx1 = fract(gx1);
          vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
          vec4 sz1 = step(gz1, vec4(0.0));
          gx1 -= sz1 * (step(0.0, gx1) - 0.5);
          gy1 -= sz1 * (step(0.0, gy1) - 0.5);
          vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
          vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
          vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
          vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
          vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
          vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
          vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
          vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
          vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
          g000 *= norm0.x;
          g010 *= norm0.y;
          g100 *= norm0.z;
          g110 *= norm0.w;
          vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
          g001 *= norm1.x;
          g011 *= norm1.y;
          g101 *= norm1.z;
          g111 *= norm1.w;
          float n000 = dot(g000, f0);
          float n100 = dot(g100, vec3(f1.x, f0.yz));
          float n010 = dot(g010, vec3(f0.x, f1.y, f0.z));
          float n110 = dot(g110, vec3(f1.xy, f0.z));
          float n001 = dot(g001, vec3(f0.xy, f1.z));
          float n101 = dot(g101, vec3(f1.x, f0.y, f1.z));
          float n011 = dot(g011, vec3(f0.x, f1.yz));
          float n111 = dot(g111, f1);
          vec3 fade_xyz = fade(f0);
          vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
          vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
          float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
          return 2.2 * n_xyz;
        }
        
        void main() {
          vUv = uv;
          vNormal = normalize(normalMatrix * normal);
          vPosition = position;
          
          vec3 pos = position;
          float noiseValue = noise(pos * 0.1 + time * 0.2);
          
          float displacement = sin(time * 2.0 + noiseValue * 5.0) * 0.2;
          pos += normal * displacement * progress;
          
          float bounce = sin(progress * 3.14159) * (1.0 - progress) * 0.3;
          pos *= mix(0.0, 1.0 + bounce, progress);
          
          gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
        }
      `,fragmentShader:`
        uniform float time;
        uniform float progress;
        uniform float noiseScale;
        varying vec2 vUv;
        varying vec3 vNormal;
        varying vec3 vPosition;
        
        void main() {
          vec3 baseColor = vec3(0.133, 0.694, 0.298);
          vec3 highlightColor = vec3(0.831, 0.976, 0.839);
          vec3 accentColor = vec3(0.047, 0.416, 0.137);
          
          float fresnel = pow(1.0 - dot(vNormal, vec3(0.0, 0.0, 1.0)), 3.0);
          
          float pattern1 = sin(vPosition.x * noiseScale + time * 2.0) * 
                          sin(vPosition.y * noiseScale + time * 1.5) * 
                          sin(vPosition.z * noiseScale + time);
          
          float pattern2 = cos(vPosition.x * noiseScale * 0.5 - time) * 
                          cos(vPosition.y * noiseScale * 0.5 - time * 1.2);
          
          float pulse1 = (sin(time * 2.0) * 0.5 + 0.5) * 0.2;
          float pulse2 = (sin(time * 3.0 + pattern1) * 0.5 + 0.5) * 0.15;
          
          vec3 color1 = mix(baseColor, highlightColor, fresnel + pulse1);
          vec3 color2 = mix(color1, accentColor, pattern1 * 0.5 + pattern2 * 0.3);
          vec3 finalColor = mix(color2, highlightColor, fresnel * pulse2);
          
          float rainbow = sin(vPosition.x * 2.0 + time) * 0.1;
          finalColor += vec3(rainbow, rainbow * 0.5, -rainbow) * (1.0 - fresnel);
          
          float opacity = progress * (1.0 + fresnel * 0.5);
          
          gl_FragColor = vec4(finalColor, opacity);
        }
      `,transparent:!0}),A=new pl(5,128,128),T=new Gr(A,S);v.current=T,E.add(T),b.position.z=15;const P=new tU(b,M.domElement);y.current=P,P.enableDamping=!0,P.dampingFactor=.05,P.rotateSpeed=.5,P.enableZoom=!1,P.enablePan=!1,P.autoRotate=!0,P.autoRotateSpeed=1,T.rotation.x=.4;let R=0,N=0;const I=()=>{_=requestAnimationFrame(I),R+=.01,N<1&&(N+=.02,S.uniforms.progress.value=Dj.smoothstep(N,0,1)),S.uniforms.time.value=R,S.uniforms.noiseScale.value=5+Math.sin(R)*2,T.rotation.y+=.003,P.update(),M.render(E,b)};I();const D=()=>{b.aspect=window.innerWidth/window.innerHeight,b.updateProjectionMatrix(),M.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",D),()=>{var q;cancelAnimationFrame(_),window.removeEventListener("resize",D),(q=d.current)==null||q.removeChild(M.domElement)}},[e,t]),s?e?w.jsxs("div",{className:`fixed inset-0 z-50 bg-gradient-to-b from-[#E7F0DC]/90 to-[#597445]/90 
        transition-opacity duration-1000 ${o?"opacity-0":"opacity-100"}`,children:[w.jsx("div",{ref:d,className:"absolute inset-0"}),w.jsxs("div",{className:`absolute inset-0 flex flex-col items-center justify-center
          transition-all duration-1000 ease-out
          ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}
          ${o?"opacity-0 scale-95":""}`,children:[w.jsx("h1",{className:"text-6xl font-bold text-[#2A3B1F] mb-6 tracking-wide animate-float",children:"EcoSphere"}),w.jsx("p",{className:"text-2xl text-[#2A3B1F]/90 mb-12 max-w-md text-center animate-float-delayed",children:"Explora el impacto ambiental global"}),w.jsx("div",{className:"flex gap-8",children:[jF,Bu,UF,sw].map((_,E)=>w.jsx(_,{className:`w-8 h-8 text-[#2A3B1F] transition-all duration-300
                hover:scale-110 hover:text-[#2A3B1F]/80
                animate-bounce-in
                ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,style:{transitionDelay:`${E*100}ms`,animationDelay:`${E*150}ms`}},E))})]})]}):null:w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-b from-[#E7F0DC]/90 to-[#597445]/90",children:w.jsxs("button",{onClick:x,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),className:`
            group relative overflow-hidden
            flex items-center gap-3 px-8 py-4 
            text-xl font-bold text-white
            bg-[#2A3B1F] rounded-xl
            transition-all duration-500 ease-out
            transform hover:scale-105
            ${f?"shadow-lg shadow-[#2A3B1F]/30":""}
          `,children:[w.jsx("div",{className:`
            absolute inset-0 bg-gradient-to-r from-[#3da063] via-[#2A3B1F] to-[#3da063] opacity-0
            group-hover:opacity-100 transition-opacity duration-500
            bg-[length:200%_100%] animate-shimmer
          `}),w.jsxs("div",{className:"relative flex items-center gap-3",children:[w.jsx(sw,{className:`
              w-6 h-6 transition-transform duration-500
              ${f?"scale-110 rotate-12":""}
            `}),w.jsx("span",{className:`
              transform transition-all duration-500
              ${f?"translate-x-1":""}
            `,children:"Iniciar Experiencia"})]}),w.jsx("div",{className:`
            absolute inset-0 pointer-events-none
            opacity-0 group-hover:opacity-100
            transition-opacity duration-500
          `,children:[...Array(3)].map((_,E)=>w.jsx("div",{className:`
                  absolute w-1 h-1 bg-white rounded-full
                  animate-particle opacity-75
                `,style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${E*.2}s`}},E))})]})})};var pL={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},VAe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],a=t[n++],s=t[n++],l=((i&7)<<18|(o&63)<<12|(a&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},I5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],a=i+1<t.length,s=a?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=o>>2,f=(o&3)<<4|s>>4;let h=(s&15)<<2|c>>6,d=c&63;l||(d=64,a||(h=64)),r.push(n[u],n[f],n[h],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(O5(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VAe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||s==null||c==null||f==null)throw new BAe;const h=o<<2|s>>4;if(r.push(h),c!==64){const d=s<<4&240|c>>2;if(r.push(d),f!==64){const v=c<<6&192|f;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class BAe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $Ae=function(t){const e=O5(t);return I5.encodeByteArray(e,!0)},Uy=function(t){return $Ae(t).replace(/\./g,"")},zAe=function(t){try{return I5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HAe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GAe=()=>HAe().__FIREBASE_DEFAULTS__,WAe=()=>{if(typeof process>"u"||typeof pL>"u")return;const t=pL.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qAe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zAe(t[1]);return e&&JSON.parse(e)},ZA=()=>{try{return GAe()||WAe()||qAe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},XAe=t=>{var e,n;return(n=(e=ZA())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},KAe=t=>{const e=XAe(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},N5=()=>{var t;return(t=ZA())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YAe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QAe(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Uy(JSON.stringify(n)),Uy(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZAe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JAe(){var t;const e=(t=ZA())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eMe(){return!JAe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tMe(){try{return typeof indexedDB=="object"}catch{return!1}}function nMe(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rMe="FirebaseError";class Wf extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rMe,Object.setPrototypeOf(this,Wf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D5.prototype.create)}}class D5{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?iMe(o,r):"Error",s=`${this.serviceName}: ${a} (${i}).`;return new Wf(i,s,r)}}function iMe(t,e){return t.replace(oMe,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const oMe=/\{\$([^}]+)}/g;function US(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],a=e[i];if(mL(o)&&mL(a)){if(!US(o,a))return!1}else if(o!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function mL(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(t){return t&&t._delegate?t._delegate:t}class Ap{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aMe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new YAe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lMe(e))try{this.getOrInitializeService({instanceIdentifier:sl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=sl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sl){return this.instances.has(e)}getOptions(e=sl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(o);r===s&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sMe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=sl){return this.component?this.component.multipleInstances?e:sl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sMe(t){return t===sl?void 0:t}function lMe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cMe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aMe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ct||(Ct={}));const uMe={debug:Ct.DEBUG,verbose:Ct.VERBOSE,info:Ct.INFO,warn:Ct.WARN,error:Ct.ERROR,silent:Ct.SILENT},fMe=Ct.INFO,hMe={[Ct.DEBUG]:"log",[Ct.VERBOSE]:"log",[Ct.INFO]:"info",[Ct.WARN]:"warn",[Ct.ERROR]:"error"},dMe=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=hMe[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class L5{constructor(e){this.name=e,this._logLevel=fMe,this._logHandler=dMe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uMe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ct.DEBUG,...e),this._logHandler(this,Ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ct.VERBOSE,...e),this._logHandler(this,Ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ct.INFO,...e),this._logHandler(this,Ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ct.WARN,...e),this._logHandler(this,Ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ct.ERROR,...e),this._logHandler(this,Ct.ERROR,...e)}}const pMe=(t,e)=>e.some(n=>t instanceof n);let gL,vL;function mMe(){return gL||(gL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gMe(){return vL||(vL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const k5=new WeakMap,FS=new WeakMap,j5=new WeakMap,Ob=new WeakMap,JA=new WeakMap;function vMe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(ms(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&k5.set(n,t)}).catch(()=>{}),JA.set(e,t),e}function yMe(t){if(FS.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});FS.set(t,e)}let VS={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return FS.get(t);if(e==="objectStoreNames")return t.objectStoreNames||j5.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ms(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _Me(t){VS=t(VS)}function xMe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ib(this),e,...n);return j5.set(r,e.sort?e.sort():[e]),ms(r)}:gMe().includes(t)?function(...e){return t.apply(Ib(this),e),ms(k5.get(this))}:function(...e){return ms(t.apply(Ib(this),e))}}function bMe(t){return typeof t=="function"?xMe(t):(t instanceof IDBTransaction&&yMe(t),pMe(t,mMe())?new Proxy(t,VS):t)}function ms(t){if(t instanceof IDBRequest)return vMe(t);if(Ob.has(t))return Ob.get(t);const e=bMe(t);return e!==t&&(Ob.set(t,e),JA.set(e,t)),e}const Ib=t=>JA.get(t);function wMe(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),s=ms(a);return r&&a.addEventListener("upgradeneeded",l=>{r(ms(a.result),l.oldVersion,l.newVersion,ms(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),s.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),s}const SMe=["get","getKey","getAll","getAllKeys","count"],EMe=["put","add","delete","clear"],Nb=new Map;function yL(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nb.get(e))return Nb.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=EMe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||SMe.includes(n)))return;const o=async function(a,...s){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(s.shift())),(await Promise.all([c[n](...s),i&&l.done]))[0]};return Nb.set(e,o),o}_Me(t=>({...t,get:(e,n,r)=>yL(e,n)||t.get(e,n,r),has:(e,n)=>!!yL(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TMe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AMe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function AMe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const BS="@firebase/app",_L="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=new L5("@firebase/app"),MMe="@firebase/app-compat",PMe="@firebase/analytics-compat",CMe="@firebase/analytics",RMe="@firebase/app-check-compat",OMe="@firebase/app-check",IMe="@firebase/auth",NMe="@firebase/auth-compat",DMe="@firebase/database",LMe="@firebase/data-connect",kMe="@firebase/database-compat",jMe="@firebase/functions",UMe="@firebase/functions-compat",FMe="@firebase/installations",VMe="@firebase/installations-compat",BMe="@firebase/messaging",$Me="@firebase/messaging-compat",zMe="@firebase/performance",HMe="@firebase/performance-compat",GMe="@firebase/remote-config",WMe="@firebase/remote-config-compat",qMe="@firebase/storage",XMe="@firebase/storage-compat",KMe="@firebase/firestore",YMe="@firebase/vertexai",QMe="@firebase/firestore-compat",ZMe="firebase",JMe="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="[DEFAULT]",ePe={[BS]:"fire-core",[MMe]:"fire-core-compat",[CMe]:"fire-analytics",[PMe]:"fire-analytics-compat",[OMe]:"fire-app-check",[RMe]:"fire-app-check-compat",[IMe]:"fire-auth",[NMe]:"fire-auth-compat",[DMe]:"fire-rtdb",[LMe]:"fire-data-connect",[kMe]:"fire-rtdb-compat",[jMe]:"fire-fn",[UMe]:"fire-fn-compat",[FMe]:"fire-iid",[VMe]:"fire-iid-compat",[BMe]:"fire-fcm",[$Me]:"fire-fcm-compat",[zMe]:"fire-perf",[HMe]:"fire-perf-compat",[GMe]:"fire-rc",[WMe]:"fire-rc-compat",[qMe]:"fire-gcs",[XMe]:"fire-gcs-compat",[KMe]:"fire-fst",[QMe]:"fire-fst-compat",[YMe]:"fire-vertex","fire-js":"fire-js",[ZMe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy=new Map,tPe=new Map,zS=new Map;function xL(t,e){try{t.container.addComponent(e)}catch(n){Sa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Vy(t){const e=t.name;if(zS.has(e))return Sa.debug(`There were multiple attempts to register component ${e}.`),!1;zS.set(e,t);for(const n of Fy.values())xL(n,t);for(const n of tPe.values())xL(n,t);return!0}function nPe(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rPe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gs=new D5("app","Firebase",rPe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iPe{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ap("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oPe=JMe;function U5(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:$S,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw gs.create("bad-app-name",{appName:String(i)});if(n||(n=N5()),!n)throw gs.create("no-options");const o=Fy.get(i);if(o){if(US(n,o.options)&&US(r,o.config))return o;throw gs.create("duplicate-app",{appName:i})}const a=new cMe(i);for(const l of zS.values())a.addComponent(l);const s=new iPe(n,r,a);return Fy.set(i,s),s}function aPe(t=$S){const e=Fy.get(t);if(!e&&t===$S&&N5())return U5();if(!e)throw gs.create("no-app",{appName:t});return e}function Tu(t,e,n){var r;let i=(r=ePe[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const s=[`Unable to register library "${i}" with version "${e}":`];o&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sa.warn(s.join(" "));return}Vy(new Ap(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sPe="firebase-heartbeat-database",lPe=1,Mp="firebase-heartbeat-store";let Db=null;function F5(){return Db||(Db=wMe(sPe,lPe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mp)}catch(n){console.warn(n)}}}}).catch(t=>{throw gs.create("idb-open",{originalErrorMessage:t.message})})),Db}async function cPe(t){try{const n=(await F5()).transaction(Mp),r=await n.objectStore(Mp).get(V5(t));return await n.done,r}catch(e){if(e instanceof Wf)Sa.warn(e.message);else{const n=gs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sa.warn(n.message)}}}async function bL(t,e){try{const r=(await F5()).transaction(Mp,"readwrite");await r.objectStore(Mp).put(e,V5(t)),await r.done}catch(n){if(n instanceof Wf)Sa.warn(n.message);else{const r=gs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Sa.warn(r.message)}}}function V5(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uPe=1024,fPe=30*24*60*60*1e3;class hPe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pPe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=wL();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const s=new Date(a.date).valueOf();return Date.now()-s<=fPe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Sa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wL(),{heartbeatsToSend:r,unsentEntries:i}=dPe(this._heartbeatsCache.heartbeats),o=Uy(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Sa.warn(n),""}}}function wL(){return new Date().toISOString().substring(0,10)}function dPe(t,e=uPe){const n=[];let r=t.slice();for(const i of t){const o=n.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),SL(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),SL(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class pPe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tMe()?nMe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cPe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return bL(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return bL(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function SL(t){return Uy(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mPe(t){Vy(new Ap("platform-logger",e=>new TMe(e),"PRIVATE")),Vy(new Ap("heartbeat",e=>new hPe(e),"PRIVATE")),Tu(BS,_L,t),Tu(BS,_L,"esm2017"),Tu("fire-js","")}mPe("");var gPe="firebase",vPe="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tu(gPe,vPe,"app");var EL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Il,B5;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,A){function T(){}T.prototype=A.prototype,S.D=A.prototype,S.prototype=new T,S.prototype.constructor=S,S.C=function(P,R,N){for(var I=Array(arguments.length-2),D=2;D<arguments.length;D++)I[D-2]=arguments[D];return A.prototype[R].apply(P,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,A,T){T||(T=0);var P=Array(16);if(typeof A=="string")for(var R=0;16>R;++R)P[R]=A.charCodeAt(T++)|A.charCodeAt(T++)<<8|A.charCodeAt(T++)<<16|A.charCodeAt(T++)<<24;else for(R=0;16>R;++R)P[R]=A[T++]|A[T++]<<8|A[T++]<<16|A[T++]<<24;A=S.g[0],T=S.g[1],R=S.g[2];var N=S.g[3],I=A+(N^T&(R^N))+P[0]+3614090360&4294967295;A=T+(I<<7&4294967295|I>>>25),I=N+(R^A&(T^R))+P[1]+3905402710&4294967295,N=A+(I<<12&4294967295|I>>>20),I=R+(T^N&(A^T))+P[2]+606105819&4294967295,R=N+(I<<17&4294967295|I>>>15),I=T+(A^R&(N^A))+P[3]+3250441966&4294967295,T=R+(I<<22&4294967295|I>>>10),I=A+(N^T&(R^N))+P[4]+4118548399&4294967295,A=T+(I<<7&4294967295|I>>>25),I=N+(R^A&(T^R))+P[5]+1200080426&4294967295,N=A+(I<<12&4294967295|I>>>20),I=R+(T^N&(A^T))+P[6]+2821735955&4294967295,R=N+(I<<17&4294967295|I>>>15),I=T+(A^R&(N^A))+P[7]+4249261313&4294967295,T=R+(I<<22&4294967295|I>>>10),I=A+(N^T&(R^N))+P[8]+1770035416&4294967295,A=T+(I<<7&4294967295|I>>>25),I=N+(R^A&(T^R))+P[9]+2336552879&4294967295,N=A+(I<<12&4294967295|I>>>20),I=R+(T^N&(A^T))+P[10]+4294925233&4294967295,R=N+(I<<17&4294967295|I>>>15),I=T+(A^R&(N^A))+P[11]+2304563134&4294967295,T=R+(I<<22&4294967295|I>>>10),I=A+(N^T&(R^N))+P[12]+1804603682&4294967295,A=T+(I<<7&4294967295|I>>>25),I=N+(R^A&(T^R))+P[13]+4254626195&4294967295,N=A+(I<<12&4294967295|I>>>20),I=R+(T^N&(A^T))+P[14]+2792965006&4294967295,R=N+(I<<17&4294967295|I>>>15),I=T+(A^R&(N^A))+P[15]+1236535329&4294967295,T=R+(I<<22&4294967295|I>>>10),I=A+(R^N&(T^R))+P[1]+4129170786&4294967295,A=T+(I<<5&4294967295|I>>>27),I=N+(T^R&(A^T))+P[6]+3225465664&4294967295,N=A+(I<<9&4294967295|I>>>23),I=R+(A^T&(N^A))+P[11]+643717713&4294967295,R=N+(I<<14&4294967295|I>>>18),I=T+(N^A&(R^N))+P[0]+3921069994&4294967295,T=R+(I<<20&4294967295|I>>>12),I=A+(R^N&(T^R))+P[5]+3593408605&4294967295,A=T+(I<<5&4294967295|I>>>27),I=N+(T^R&(A^T))+P[10]+38016083&4294967295,N=A+(I<<9&4294967295|I>>>23),I=R+(A^T&(N^A))+P[15]+3634488961&4294967295,R=N+(I<<14&4294967295|I>>>18),I=T+(N^A&(R^N))+P[4]+3889429448&4294967295,T=R+(I<<20&4294967295|I>>>12),I=A+(R^N&(T^R))+P[9]+568446438&4294967295,A=T+(I<<5&4294967295|I>>>27),I=N+(T^R&(A^T))+P[14]+3275163606&4294967295,N=A+(I<<9&4294967295|I>>>23),I=R+(A^T&(N^A))+P[3]+4107603335&4294967295,R=N+(I<<14&4294967295|I>>>18),I=T+(N^A&(R^N))+P[8]+1163531501&4294967295,T=R+(I<<20&4294967295|I>>>12),I=A+(R^N&(T^R))+P[13]+2850285829&4294967295,A=T+(I<<5&4294967295|I>>>27),I=N+(T^R&(A^T))+P[2]+4243563512&4294967295,N=A+(I<<9&4294967295|I>>>23),I=R+(A^T&(N^A))+P[7]+1735328473&4294967295,R=N+(I<<14&4294967295|I>>>18),I=T+(N^A&(R^N))+P[12]+2368359562&4294967295,T=R+(I<<20&4294967295|I>>>12),I=A+(T^R^N)+P[5]+4294588738&4294967295,A=T+(I<<4&4294967295|I>>>28),I=N+(A^T^R)+P[8]+2272392833&4294967295,N=A+(I<<11&4294967295|I>>>21),I=R+(N^A^T)+P[11]+1839030562&4294967295,R=N+(I<<16&4294967295|I>>>16),I=T+(R^N^A)+P[14]+4259657740&4294967295,T=R+(I<<23&4294967295|I>>>9),I=A+(T^R^N)+P[1]+2763975236&4294967295,A=T+(I<<4&4294967295|I>>>28),I=N+(A^T^R)+P[4]+1272893353&4294967295,N=A+(I<<11&4294967295|I>>>21),I=R+(N^A^T)+P[7]+4139469664&4294967295,R=N+(I<<16&4294967295|I>>>16),I=T+(R^N^A)+P[10]+3200236656&4294967295,T=R+(I<<23&4294967295|I>>>9),I=A+(T^R^N)+P[13]+681279174&4294967295,A=T+(I<<4&4294967295|I>>>28),I=N+(A^T^R)+P[0]+3936430074&4294967295,N=A+(I<<11&4294967295|I>>>21),I=R+(N^A^T)+P[3]+3572445317&4294967295,R=N+(I<<16&4294967295|I>>>16),I=T+(R^N^A)+P[6]+76029189&4294967295,T=R+(I<<23&4294967295|I>>>9),I=A+(T^R^N)+P[9]+3654602809&4294967295,A=T+(I<<4&4294967295|I>>>28),I=N+(A^T^R)+P[12]+3873151461&4294967295,N=A+(I<<11&4294967295|I>>>21),I=R+(N^A^T)+P[15]+530742520&4294967295,R=N+(I<<16&4294967295|I>>>16),I=T+(R^N^A)+P[2]+3299628645&4294967295,T=R+(I<<23&4294967295|I>>>9),I=A+(R^(T|~N))+P[0]+4096336452&4294967295,A=T+(I<<6&4294967295|I>>>26),I=N+(T^(A|~R))+P[7]+1126891415&4294967295,N=A+(I<<10&4294967295|I>>>22),I=R+(A^(N|~T))+P[14]+2878612391&4294967295,R=N+(I<<15&4294967295|I>>>17),I=T+(N^(R|~A))+P[5]+4237533241&4294967295,T=R+(I<<21&4294967295|I>>>11),I=A+(R^(T|~N))+P[12]+1700485571&4294967295,A=T+(I<<6&4294967295|I>>>26),I=N+(T^(A|~R))+P[3]+2399980690&4294967295,N=A+(I<<10&4294967295|I>>>22),I=R+(A^(N|~T))+P[10]+4293915773&4294967295,R=N+(I<<15&4294967295|I>>>17),I=T+(N^(R|~A))+P[1]+2240044497&4294967295,T=R+(I<<21&4294967295|I>>>11),I=A+(R^(T|~N))+P[8]+1873313359&4294967295,A=T+(I<<6&4294967295|I>>>26),I=N+(T^(A|~R))+P[15]+4264355552&4294967295,N=A+(I<<10&4294967295|I>>>22),I=R+(A^(N|~T))+P[6]+2734768916&4294967295,R=N+(I<<15&4294967295|I>>>17),I=T+(N^(R|~A))+P[13]+1309151649&4294967295,T=R+(I<<21&4294967295|I>>>11),I=A+(R^(T|~N))+P[4]+4149444226&4294967295,A=T+(I<<6&4294967295|I>>>26),I=N+(T^(A|~R))+P[11]+3174756917&4294967295,N=A+(I<<10&4294967295|I>>>22),I=R+(A^(N|~T))+P[2]+718787259&4294967295,R=N+(I<<15&4294967295|I>>>17),I=T+(N^(R|~A))+P[9]+3951481745&4294967295,S.g[0]=S.g[0]+A&4294967295,S.g[1]=S.g[1]+(R+(I<<21&4294967295|I>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.u=function(S,A){A===void 0&&(A=S.length);for(var T=A-this.blockSize,P=this.B,R=this.h,N=0;N<A;){if(R==0)for(;N<=T;)i(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<A;)if(P[R++]=S.charCodeAt(N++),R==this.blockSize){i(this,P),R=0;break}}else for(;N<A;)if(P[R++]=S[N++],R==this.blockSize){i(this,P),R=0;break}}this.h=R,this.o+=A},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var A=1;A<S.length-8;++A)S[A]=0;var T=8*this.o;for(A=S.length-8;A<S.length;++A)S[A]=T&255,T/=256;for(this.u(S),S=Array(16),A=T=0;4>A;++A)for(var P=0;32>P;P+=8)S[T++]=this.g[A]>>>P&255;return S};function o(S,A){var T=s;return Object.prototype.hasOwnProperty.call(T,S)?T[S]:T[S]=A(S)}function a(S,A){this.h=A;for(var T=[],P=!0,R=S.length-1;0<=R;R--){var N=S[R]|0;P&&N==A||(T[R]=N,P=!1)}this.g=T}var s={};function l(S){return-128<=S&&128>S?o(S,function(A){return new a([A|0],0>A?-1:0)}):new a([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return g(c(-S));for(var A=[],T=1,P=0;S>=T;P++)A[P]=S/T|0,T*=4294967296;return new a(A,0)}function u(S,A){if(S.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(S.charAt(0)=="-")return g(u(S.substring(1),A));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(A,8)),P=f,R=0;R<S.length;R+=8){var N=Math.min(8,S.length-R),I=parseInt(S.substring(R,R+N),A);8>N?(N=c(Math.pow(A,N)),P=P.j(N).add(c(I))):(P=P.j(T),P=P.add(c(I)))}return P}var f=l(0),h=l(1),d=l(16777216);t=a.prototype,t.m=function(){if(y(this))return-g(this).m();for(var S=0,A=1,T=0;T<this.g.length;T++){var P=this.i(T);S+=(0<=P?P:4294967296+P)*A,A*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(v(this))return"0";if(y(this))return"-"+g(this).toString(S);for(var A=c(Math.pow(S,6)),T=this,P="";;){var R=E(T,A).g;T=p(T,R.j(A));var N=((0<T.g.length?T.g[0]:T.h)>>>0).toString(S);if(T=R,v(T))return N+P;for(;6>N.length;)N="0"+N;P=N+P}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function v(S){if(S.h!=0)return!1;for(var A=0;A<S.g.length;A++)if(S.g[A]!=0)return!1;return!0}function y(S){return S.h==-1}t.l=function(S){return S=p(this,S),y(S)?-1:v(S)?0:1};function g(S){for(var A=S.g.length,T=[],P=0;P<A;P++)T[P]=~S.g[P];return new a(T,~S.h).add(h)}t.abs=function(){return y(this)?g(this):this},t.add=function(S){for(var A=Math.max(this.g.length,S.g.length),T=[],P=0,R=0;R<=A;R++){var N=P+(this.i(R)&65535)+(S.i(R)&65535),I=(N>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);P=I>>>16,N&=65535,I&=65535,T[R]=I<<16|N}return new a(T,T[T.length-1]&-2147483648?-1:0)};function p(S,A){return S.add(g(A))}t.j=function(S){if(v(this)||v(S))return f;if(y(this))return y(S)?g(this).j(g(S)):g(g(this).j(S));if(y(S))return g(this.j(g(S)));if(0>this.l(d)&&0>S.l(d))return c(this.m()*S.m());for(var A=this.g.length+S.g.length,T=[],P=0;P<2*A;P++)T[P]=0;for(P=0;P<this.g.length;P++)for(var R=0;R<S.g.length;R++){var N=this.i(P)>>>16,I=this.i(P)&65535,D=S.i(R)>>>16,L=S.i(R)&65535;T[2*P+2*R]+=I*L,x(T,2*P+2*R),T[2*P+2*R+1]+=N*L,x(T,2*P+2*R+1),T[2*P+2*R+1]+=I*D,x(T,2*P+2*R+1),T[2*P+2*R+2]+=N*D,x(T,2*P+2*R+2)}for(P=0;P<A;P++)T[P]=T[2*P+1]<<16|T[2*P];for(P=A;P<2*A;P++)T[P]=0;return new a(T,0)};function x(S,A){for(;(S[A]&65535)!=S[A];)S[A+1]+=S[A]>>>16,S[A]&=65535,A++}function _(S,A){this.g=S,this.h=A}function E(S,A){if(v(A))throw Error("division by zero");if(v(S))return new _(f,f);if(y(S))return A=E(g(S),A),new _(g(A.g),g(A.h));if(y(A))return A=E(S,g(A)),new _(g(A.g),A.h);if(30<S.g.length){if(y(S)||y(A))throw Error("slowDivide_ only works with positive integers.");for(var T=h,P=A;0>=P.l(S);)T=b(T),P=b(P);var R=M(T,1),N=M(P,1);for(P=M(P,2),T=M(T,2);!v(P);){var I=N.add(P);0>=I.l(S)&&(R=R.add(T),N=I),P=M(P,1),T=M(T,1)}return A=p(S,R.j(A)),new _(R,A)}for(R=f;0<=S.l(A);){for(T=Math.max(1,Math.floor(S.m()/A.m())),P=Math.ceil(Math.log(T)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),N=c(T),I=N.j(A);y(I)||0<I.l(S);)T-=P,N=c(T),I=N.j(A);v(N)&&(N=h),R=R.add(N),S=p(S,I)}return new _(R,S)}t.A=function(S){return E(this,S).h},t.and=function(S){for(var A=Math.max(this.g.length,S.g.length),T=[],P=0;P<A;P++)T[P]=this.i(P)&S.i(P);return new a(T,this.h&S.h)},t.or=function(S){for(var A=Math.max(this.g.length,S.g.length),T=[],P=0;P<A;P++)T[P]=this.i(P)|S.i(P);return new a(T,this.h|S.h)},t.xor=function(S){for(var A=Math.max(this.g.length,S.g.length),T=[],P=0;P<A;P++)T[P]=this.i(P)^S.i(P);return new a(T,this.h^S.h)};function b(S){for(var A=S.g.length+1,T=[],P=0;P<A;P++)T[P]=S.i(P)<<1|S.i(P-1)>>>31;return new a(T,S.h)}function M(S,A){var T=A>>5;A%=32;for(var P=S.g.length-T,R=[],N=0;N<P;N++)R[N]=0<A?S.i(N+T)>>>A|S.i(N+T+1)<<32-A:S.i(N+T);return new a(R,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,B5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,Il=a}).apply(typeof EL<"u"?EL:typeof self<"u"?self:typeof window<"u"?window:{});var Sg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $5,$h,z5,Wg,HS,H5,G5,W5;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,C,O){return m==Array.prototype||m==Object.prototype||(m[C]=O.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sg=="object"&&Sg];for(var C=0;C<m.length;++C){var O=m[C];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=n(this);function i(m,C){if(C)e:{var O=r;m=m.split(".");for(var j=0;j<m.length-1;j++){var Z=m[j];if(!(Z in O))break e;O=O[Z]}m=m[m.length-1],j=O[m],C=C(j),C!=j&&C!=null&&e(O,m,{configurable:!0,writable:!0,value:C})}}function o(m,C){m instanceof String&&(m+="");var O=0,j=!1,Z={next:function(){if(!j&&O<m.length){var se=O++;return{value:C(se,m[se]),done:!1}}return j=!0,{done:!0,value:void 0}}};return Z[Symbol.iterator]=function(){return Z},Z}i("Array.prototype.values",function(m){return m||function(){return o(this,function(C,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},s=this||self;function l(m){var C=typeof m;return C=C!="object"?C:m?Array.isArray(m)?"array":C:"null",C=="array"||C=="object"&&typeof m.length=="number"}function c(m){var C=typeof m;return C=="object"&&m!=null||C=="function"}function u(m,C,O){return m.call.apply(m.bind,arguments)}function f(m,C,O){if(!m)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var Z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Z,j),m.apply(C,Z)}}return function(){return m.apply(C,arguments)}}function h(m,C,O){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,h.apply(null,arguments)}function d(m,C){var O=Array.prototype.slice.call(arguments,1);return function(){var j=O.slice();return j.push.apply(j,arguments),m.apply(this,j)}}function v(m,C){function O(){}O.prototype=C.prototype,m.aa=C.prototype,m.prototype=new O,m.prototype.constructor=m,m.Qb=function(j,Z,se){for(var Me=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)Me[Wt-2]=arguments[Wt];return C.prototype[Z].apply(j,Me)}}function y(m){const C=m.length;if(0<C){const O=Array(C);for(let j=0;j<C;j++)O[j]=m[j];return O}return[]}function g(m,C){for(let O=1;O<arguments.length;O++){const j=arguments[O];if(l(j)){const Z=m.length||0,se=j.length||0;m.length=Z+se;for(let Me=0;Me<se;Me++)m[Z+Me]=j[Me]}else m.push(j)}}class p{constructor(C,O){this.i=C,this.j=O,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function x(m){return/^[\s\xa0]*$/.test(m)}function _(){var m=s.navigator;return m&&(m=m.userAgent)?m:""}function E(m){return E[" "](m),m}E[" "]=function(){};var b=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function M(m,C,O){for(const j in m)C.call(O,m[j],j,m)}function S(m,C){for(const O in m)C.call(void 0,m[O],O,m)}function A(m){const C={};for(const O in m)C[O]=m[O];return C}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(m,C){let O,j;for(let Z=1;Z<arguments.length;Z++){j=arguments[Z];for(O in j)m[O]=j[O];for(let se=0;se<T.length;se++)O=T[se],Object.prototype.hasOwnProperty.call(j,O)&&(m[O]=j[O])}}function R(m){var C=1;m=m.split(":");const O=[];for(;0<C&&m.length;)O.push(m.shift()),C--;return m.length&&O.push(m.join(":")),O}function N(m){s.setTimeout(()=>{throw m},0)}function I(){var m=X;let C=null;return m.g&&(C=m.g,m.g=m.g.next,m.g||(m.h=null),C.next=null),C}class D{constructor(){this.h=this.g=null}add(C,O){const j=L.get();j.set(C,O),this.h?this.h.next=j:this.g=j,this.h=j}}var L=new p(()=>new q,m=>m.reset());class q{constructor(){this.next=this.g=this.h=null}set(C,O){this.h=C,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let $,V=!1,X=new D,K=()=>{const m=s.Promise.resolve(void 0);$=()=>{m.then(z)}};var z=()=>{for(var m;m=I();){try{m.h.call(m.g)}catch(O){N(O)}var C=L;C.j(m),100>C.h&&(C.h++,m.next=C.g,C.g=m)}V=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(m,C){this.type=m,this.g=this.target=C,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var m=!1,C=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const O=()=>{};s.addEventListener("test",O,C),s.removeEventListener("test",O,C)}catch{}return m}();function _e(m,C){if(ee.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var O=this.type=m.type,j=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=C,C=m.relatedTarget){if(b){e:{try{E(C.nodeName);var Z=!0;break e}catch{}Z=!1}Z||(C=null)}}else O=="mouseover"?C=m.fromElement:O=="mouseout"&&(C=m.toElement);this.relatedTarget=C,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Ne[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&_e.aa.h.call(this)}}v(_e,ee);var Ne={2:"touch",3:"pen",4:"mouse"};_e.prototype.h=function(){_e.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var We="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function fe(m,C,O,j,Z){this.listener=m,this.proxy=null,this.src=C,this.type=O,this.capture=!!j,this.ha=Z,this.key=++Ue,this.da=this.fa=!1}function Re(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ee(m){this.src=m,this.g={},this.h=0}Ee.prototype.add=function(m,C,O,j,Z){var se=m.toString();m=this.g[se],m||(m=this.g[se]=[],this.h++);var Me=lt(m,C,j,Z);return-1<Me?(C=m[Me],O||(C.fa=!1)):(C=new fe(C,this.src,se,!!j,Z),C.fa=O,m.push(C)),C};function H(m,C){var O=C.type;if(O in m.g){var j=m.g[O],Z=Array.prototype.indexOf.call(j,C,void 0),se;(se=0<=Z)&&Array.prototype.splice.call(j,Z,1),se&&(Re(C),m.g[O].length==0&&(delete m.g[O],m.h--))}}function lt(m,C,O,j){for(var Z=0;Z<m.length;++Z){var se=m[Z];if(!se.da&&se.listener==C&&se.capture==!!O&&se.ha==j)return Z}return-1}var be="closure_lm_"+(1e6*Math.random()|0),Le={};function ke(m,C,O,j,Z){if(Array.isArray(C)){for(var se=0;se<C.length;se++)ke(m,C[se],O,j,Z);return null}return O=re(O),m&&m[We]?m.K(C,O,c(j)?!!j.capture:!!j,Z):mt(m,C,O,!1,j,Z)}function mt(m,C,O,j,Z,se){if(!C)throw Error("Invalid event type");var Me=c(Z)?!!Z.capture:!!Z,Wt=F(m);if(Wt||(m[be]=Wt=new Ee(m)),O=Wt.add(C,O,j,Me,se),O.proxy)return O;if(j=Ye(),O.proxy=j,j.src=m,j.listener=O,m.addEventListener)me||(Z=Me),Z===void 0&&(Z=!1),m.addEventListener(C.toString(),j,Z);else if(m.attachEvent)m.attachEvent(Mt(C.toString()),j);else if(m.addListener&&m.removeListener)m.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return O}function Ye(){function m(O){return C.call(m.src,m.listener,O)}const C=jt;return m}function Ze(m,C,O,j,Z){if(Array.isArray(C))for(var se=0;se<C.length;se++)Ze(m,C[se],O,j,Z);else j=c(j)?!!j.capture:!!j,O=re(O),m&&m[We]?(m=m.i,C=String(C).toString(),C in m.g&&(se=m.g[C],O=lt(se,O,j,Z),-1<O&&(Re(se[O]),Array.prototype.splice.call(se,O,1),se.length==0&&(delete m.g[C],m.h--)))):m&&(m=F(m))&&(C=m.g[C.toString()],m=-1,C&&(m=lt(C,O,j,Z)),(O=-1<m?C[m]:null)&&ht(O))}function ht(m){if(typeof m!="number"&&m&&!m.da){var C=m.src;if(C&&C[We])H(C.i,m);else{var O=m.type,j=m.proxy;C.removeEventListener?C.removeEventListener(O,j,m.capture):C.detachEvent?C.detachEvent(Mt(O),j):C.addListener&&C.removeListener&&C.removeListener(j),(O=F(C))?(H(O,m),O.h==0&&(O.src=null,C[be]=null)):Re(m)}}}function Mt(m){return m in Le?Le[m]:Le[m]="on"+m}function jt(m,C){if(m.da)m=!0;else{C=new _e(C,this);var O=m.listener,j=m.ha||m.src;m.fa&&ht(m),m=O.call(j,C)}return m}function F(m){return m=m[be],m instanceof Ee?m:null}var k="__closure_events_fn_"+(1e9*Math.random()>>>0);function re(m){return typeof m=="function"?m:(m[k]||(m[k]=function(C){return m.handleEvent(C)}),m[k])}function ye(){W.call(this),this.i=new Ee(this),this.M=this,this.F=null}v(ye,W),ye.prototype[We]=!0,ye.prototype.removeEventListener=function(m,C,O,j){Ze(this,m,C,O,j)};function he(m,C){var O,j=m.F;if(j)for(O=[];j;j=j.F)O.push(j);if(m=m.M,j=C.type||C,typeof C=="string")C=new ee(C,m);else if(C instanceof ee)C.target=C.target||m;else{var Z=C;C=new ee(j,m),P(C,Z)}if(Z=!0,O)for(var se=O.length-1;0<=se;se--){var Me=C.g=O[se];Z=xe(Me,j,!0,C)&&Z}if(Me=C.g=m,Z=xe(Me,j,!0,C)&&Z,Z=xe(Me,j,!1,C)&&Z,O)for(se=0;se<O.length;se++)Me=C.g=O[se],Z=xe(Me,j,!1,C)&&Z}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var m=this.i,C;for(C in m.g){for(var O=m.g[C],j=0;j<O.length;j++)Re(O[j]);delete m.g[C],m.h--}}this.F=null},ye.prototype.K=function(m,C,O,j){return this.i.add(String(m),C,!1,O,j)},ye.prototype.L=function(m,C,O,j){return this.i.add(String(m),C,!0,O,j)};function xe(m,C,O,j){if(C=m.i.g[String(C)],!C)return!0;C=C.concat();for(var Z=!0,se=0;se<C.length;++se){var Me=C[se];if(Me&&!Me.da&&Me.capture==O){var Wt=Me.listener,nr=Me.ha||Me.src;Me.fa&&H(m.i,Me),Z=Wt.call(nr,j)!==!1&&Z}}return Z&&!j.defaultPrevented}function Ce(m,C,O){if(typeof m=="function")O&&(m=h(m,O));else if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:s.setTimeout(m,C||0)}function Te(m){m.g=Ce(()=>{m.g=null,m.i&&(m.i=!1,Te(m))},m.l);const C=m.h;m.h=null,m.m.apply(null,C)}class Pe extends W{constructor(C,O){super(),this.m=C,this.l=O,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:Te(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Y(m){W.call(this),this.h=m,this.g={}}v(Y,W);var Se=[];function de(m){M(m.g,function(C,O){this.g.hasOwnProperty(O)&&ht(C)},m),m.g={}}Y.prototype.N=function(){Y.aa.N.call(this),de(this)},Y.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qe=s.JSON.stringify,Ge=s.JSON.parse,qe=class{stringify(m){return s.JSON.stringify(m,void 0)}parse(m){return s.JSON.parse(m,void 0)}};function Ve(){}Ve.prototype.h=null;function De(m){return m.h||(m.h=m.i())}function vt(){}var Q={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function le(){ee.call(this,"d")}v(le,ee);function ue(){ee.call(this,"c")}v(ue,ee);var ne={},ge=null;function Ie(){return ge=ge||new ye}ne.La="serverreachability";function rt(m){ee.call(this,ne.La,m)}v(rt,ee);function Ot(m){const C=Ie();he(C,new rt(C))}ne.STAT_EVENT="statevent";function En(m,C){ee.call(this,ne.STAT_EVENT,m),this.stat=C}v(En,ee);function dt(m){const C=Ie();he(C,new En(C,m))}ne.Ma="timingevent";function Tn(m,C){ee.call(this,ne.Ma,m),this.size=C}v(Tn,ee);function Dn(m,C){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){m()},C)}function vi(){this.g=!0}vi.prototype.xa=function(){this.g=!1};function O_(m,C,O,j,Z,se){m.info(function(){if(m.g)if(se)for(var Me="",Wt=se.split("&"),nr=0;nr<Wt.length;nr++){var Dt=Wt[nr].split("=");if(1<Dt.length){var hr=Dt[0];Dt=Dt[1];var dr=hr.split("_");Me=2<=dr.length&&dr[1]=="type"?Me+(hr+"="+Dt+"&"):Me+(hr+"=redacted&")}}else Me=null;else Me=se;return"XMLHTTP REQ ("+j+") [attempt "+Z+"]: "+C+`
`+O+`
`+Me})}function ac(m,C,O,j,Z,se,Me){m.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+Z+"]: "+C+`
`+O+`
`+se+" "+Me})}function Fo(m,C,O,j){m.info(function(){return"XMLHTTP TEXT ("+C+"): "+om(m,O)+(j?" "+j:"")})}function sc(m,C){m.info(function(){return"TIMEOUT: "+C})}vi.prototype.info=function(){};function om(m,C){if(!m.g)return C;if(!C)return null;try{var O=JSON.parse(C);if(O){for(m=0;m<O.length;m++)if(Array.isArray(O[m])){var j=O[m];if(!(2>j.length)){var Z=j[1];if(Array.isArray(Z)&&!(1>Z.length)){var se=Z[0];if(se!="noop"&&se!="stop"&&se!="close")for(var Me=1;Me<Z.length;Me++)Z[Me]=""}}}}return Qe(O)}catch{return C}}var Vs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},am={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zf;function lc(){}v(lc,Ve),lc.prototype.g=function(){return new XMLHttpRequest},lc.prototype.i=function(){return{}},Zf=new lc;function U(m,C,O,j){this.j=m,this.i=C,this.l=O,this.R=j||1,this.U=new Y(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new J}function J(){this.i=null,this.g="",this.h=!1}var ie={},oe={};function ae(m,C,O){m.L=1,m.v=sm(Jr(C)),m.m=O,m.P=!0,Fe(m,null)}function Fe(m,C){m.F=Date.now(),tt(m),m.A=Jr(m.v);var O=m.A,j=m.R;Array.isArray(j)||(j=[String(j)]),jM(O.i,"t",j),m.C=0,O=m.j.J,m.h=new J,m.g=tP(m.j,O?C:null,!m.m),0<m.O&&(m.M=new Pe(h(m.Y,m,m.g),m.O)),C=m.U,O=m.g,j=m.ca;var Z="readystatechange";Array.isArray(Z)||(Z&&(Se[0]=Z.toString()),Z=Se);for(var se=0;se<Z.length;se++){var Me=ke(O,Z[se],j||C.handleEvent,!1,C.h||C);if(!Me)break;C.g[Me.key]=Me}C=m.H?A(m.H):{},m.m?(m.u||(m.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,C)):(m.u="GET",m.g.ea(m.A,m.u,null,C)),Ot(),O_(m.i,m.u,m.A,m.l,m.R,m.m)}U.prototype.ca=function(m){m=m.target;const C=this.M;C&&Vo(m)==3?C.j():this.Y(m)},U.prototype.Y=function(m){try{if(m==this.g)e:{const dr=Vo(this.g);var C=this.g.Ba();const hc=this.g.Z();if(!(3>dr)&&(dr!=3||this.g&&(this.h.h||this.g.oa()||HM(this.g)))){this.J||dr!=4||C==7||(C==8||0>=hc?Ot(3):Ot(2)),ct(this);var O=this.g.Z();this.X=O;t:if(Xe(this)){var j=HM(this.g);m="";var Z=j.length,se=Vo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vt(this),at(this);var Me="";break t}this.h.i=new s.TextDecoder}for(C=0;C<Z;C++)this.h.h=!0,m+=this.h.i.decode(j[C],{stream:!(se&&C==Z-1)});j.length=0,this.h.g+=m,this.C=0,Me=this.h.g}else Me=this.g.oa();if(this.o=O==200,ac(this.i,this.u,this.A,this.l,this.R,dr,O),this.o){if(this.T&&!this.K){t:{if(this.g){var Wt,nr=this.g;if((Wt=nr.g?nr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Wt)){var Dt=Wt;break t}}Dt=null}if(O=Dt)Fo(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tr(this,O);else{this.o=!1,this.s=3,dt(12),Vt(this),at(this);break e}}if(this.P){O=!0;let Bi;for(;!this.J&&this.C<Me.length;)if(Bi=et(this,Me),Bi==oe){dr==4&&(this.s=4,dt(14),O=!1),Fo(this.i,this.l,null,"[Incomplete Response]");break}else if(Bi==ie){this.s=4,dt(15),Fo(this.i,this.l,Me,"[Invalid Chunk]"),O=!1;break}else Fo(this.i,this.l,Bi,null),tr(this,Bi);if(Xe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dr!=4||Me.length!=0||this.h.h||(this.s=1,dt(16),O=!1),this.o=this.o&&O,!O)Fo(this.i,this.l,Me,"[Invalid Chunked Response]"),Vt(this),at(this);else if(0<Me.length&&!this.W){this.W=!0;var hr=this.j;hr.g==this&&hr.ba&&!hr.M&&(hr.j.info("Great, no buffering proxy detected. Bytes received: "+Me.length),L_(hr),hr.M=!0,dt(11))}}else Fo(this.i,this.l,Me,null),tr(this,Me);dr==4&&Vt(this),this.o&&!this.J&&(dr==4?QM(this.j,this):(this.o=!1,tt(this)))}else bz(this.g),O==400&&0<Me.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Vt(this),at(this)}}}catch{}finally{}};function Xe(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function et(m,C){var O=m.C,j=C.indexOf(`
`,O);return j==-1?oe:(O=Number(C.substring(O,j)),isNaN(O)?ie:(j+=1,j+O>C.length?oe:(C=C.slice(j,j+O),m.C=j+O,C)))}U.prototype.cancel=function(){this.J=!0,Vt(this)};function tt(m){m.S=Date.now()+m.I,yt(m,m.I)}function yt(m,C){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Dn(h(m.ba,m),C)}function ct(m){m.B&&(s.clearTimeout(m.B),m.B=null)}U.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(sc(this.i,this.A),this.L!=2&&(Ot(),dt(17)),Vt(this),this.s=2,at(this)):yt(this,this.S-m)};function at(m){m.j.G==0||m.J||QM(m.j,m)}function Vt(m){ct(m);var C=m.M;C&&typeof C.ma=="function"&&C.ma(),m.M=null,de(m.U),m.g&&(C=m.g,m.g=null,C.abort(),C.ma())}function tr(m,C){try{var O=m.j;if(O.G!=0&&(O.g==m||Bs(O.h,m))){if(!m.K&&Bs(O.h,m)&&O.G==3){try{var j=O.Da.g.parse(C)}catch{j=null}if(Array.isArray(j)&&j.length==3){var Z=j;if(Z[0]==0){e:if(!O.u){if(O.g)if(O.g.F+3e3<m.F)dm(O),fm(O);else break e;D_(O),dt(18)}}else O.za=Z[1],0<O.za-O.T&&37500>Z[2]&&O.F&&O.v==0&&!O.C&&(O.C=Dn(h(O.Za,O),6e3));if(1>=bt(O.h)&&O.ca){try{O.ca()}catch{}O.ca=void 0}}else Hs(O,11)}else if((m.K||O.g==m)&&dm(O),!x(C))for(Z=O.Da.g.parse(C),C=0;C<Z.length;C++){let Dt=Z[C];if(O.T=Dt[0],Dt=Dt[1],O.G==2)if(Dt[0]=="c"){O.K=Dt[1],O.ia=Dt[2];const hr=Dt[3];hr!=null&&(O.la=hr,O.j.info("VER="+O.la));const dr=Dt[4];dr!=null&&(O.Aa=dr,O.j.info("SVER="+O.Aa));const hc=Dt[5];hc!=null&&typeof hc=="number"&&0<hc&&(j=1.5*hc,O.L=j,O.j.info("backChannelRequestTimeoutMs_="+j)),j=O;const Bi=m.g;if(Bi){const mm=Bi.g?Bi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mm){var se=j.h;se.g||mm.indexOf("spdy")==-1&&mm.indexOf("quic")==-1&&mm.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(sn(se,se.h),se.h=null))}if(j.D){const k_=Bi.g?Bi.g.getResponseHeader("X-HTTP-Session-Id"):null;k_&&(j.ya=k_,Jt(j.I,j.D,k_))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-m.F,O.j.info("Handshake RTT: "+O.R+"ms")),j=O;var Me=m;if(j.qa=eP(j,j.J?j.ia:null,j.W),Me.K){ho(j.h,Me);var Wt=Me,nr=j.L;nr&&(Wt.I=nr),Wt.B&&(ct(Wt),tt(Wt)),j.g=Me}else KM(j);0<O.i.length&&hm(O)}else Dt[0]!="stop"&&Dt[0]!="close"||Hs(O,7);else O.G==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?Hs(O,7):N_(O):Dt[0]!="noop"&&O.l&&O.l.ta(Dt),O.v=0)}}Ot(4)}catch{}}var An=class{constructor(m,C){this.g=m,this.map=C}};function yi(m){this.l=m||10,s.PerformanceNavigationTiming?(m=s.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zt(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function bt(m){return m.h?1:m.g?m.g.size:0}function Bs(m,C){return m.h?m.h==C:m.g?m.g.has(C):!1}function sn(m,C){m.g?m.g.add(C):m.h=C}function ho(m,C){m.h&&m.h==C?m.h=null:m.g&&m.g.has(C)&&m.g.delete(C)}yi.prototype.cancel=function(){if(this.i=Jf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Jf(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let C=m.i;for(const O of m.g.values())C=C.concat(O.D);return C}return y(m.i)}function $s(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(l(m)){for(var C=[],O=m.length,j=0;j<O;j++)C.push(m[j]);return C}C=[],O=0;for(j in m)C[O++]=m[j];return C}function eh(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(l(m)||typeof m=="string"){var C=[];m=m.length;for(var O=0;O<m;O++)C.push(O);return C}C=[],O=0;for(const j in m)C[O++]=j;return C}}}function Wn(m,C){if(m.forEach&&typeof m.forEach=="function")m.forEach(C,void 0);else if(l(m)||typeof m=="string")Array.prototype.forEach.call(m,C,void 0);else for(var O=eh(m),j=$s(m),Z=j.length,se=0;se<Z;se++)C.call(void 0,j[se],O&&O[se],m)}var po=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function th(m,C){if(m){m=m.split("&");for(var O=0;O<m.length;O++){var j=m[O].indexOf("="),Z=null;if(0<=j){var se=m[O].substring(0,j);Z=m[O].substring(j+1)}else se=m[O];C(se,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function _n(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof _n){this.h=m.h,cc(this,m.j),this.o=m.o,this.g=m.g,zs(this,m.s),this.l=m.l;var C=m.i,O=new ih;O.i=C.i,C.g&&(O.g=new Map(C.g),O.h=C.h),NM(this,O),this.m=m.m}else m&&(C=String(m).match(po))?(this.h=!1,cc(this,C[1]||"",!0),this.o=nh(C[2]||""),this.g=nh(C[3]||"",!0),zs(this,C[4]),this.l=nh(C[5]||"",!0),NM(this,C[6]||"",!0),this.m=nh(C[7]||"")):(this.h=!1,this.i=new ih(null,this.h))}_n.prototype.toString=function(){var m=[],C=this.j;C&&m.push(rh(C,DM,!0),":");var O=this.g;return(O||C=="file")&&(m.push("//"),(C=this.o)&&m.push(rh(C,DM,!0),"@"),m.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&m.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&m.push("/"),m.push(rh(O,O.charAt(0)=="/"?fz:uz,!0))),(O=this.i.toString())&&m.push("?",O),(O=this.m)&&m.push("#",rh(O,dz)),m.join("")};function Jr(m){return new _n(m)}function cc(m,C,O){m.j=O?nh(C,!0):C,m.j&&(m.j=m.j.replace(/:$/,""))}function zs(m,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);m.s=C}else m.s=null}function NM(m,C,O){C instanceof ih?(m.i=C,pz(m.i,m.h)):(O||(C=rh(C,hz)),m.i=new ih(C,m.h))}function Jt(m,C,O){m.i.set(C,O)}function sm(m){return Jt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function nh(m,C){return m?C?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function rh(m,C,O){return typeof m=="string"?(m=encodeURI(m).replace(C,cz),O&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function cz(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var DM=/[#\/\?@]/g,uz=/[#\?:]/g,fz=/[#\?]/g,hz=/[#\?@]/g,dz=/#/g;function ih(m,C){this.h=this.g=null,this.i=m||null,this.j=!!C}function Ia(m){m.g||(m.g=new Map,m.h=0,m.i&&th(m.i,function(C,O){m.add(decodeURIComponent(C.replace(/\+/g," ")),O)}))}t=ih.prototype,t.add=function(m,C){Ia(this),this.i=null,m=uc(this,m);var O=this.g.get(m);return O||this.g.set(m,O=[]),O.push(C),this.h+=1,this};function LM(m,C){Ia(m),C=uc(m,C),m.g.has(C)&&(m.i=null,m.h-=m.g.get(C).length,m.g.delete(C))}function kM(m,C){return Ia(m),C=uc(m,C),m.g.has(C)}t.forEach=function(m,C){Ia(this),this.g.forEach(function(O,j){O.forEach(function(Z){m.call(C,Z,j,this)},this)},this)},t.na=function(){Ia(this);const m=Array.from(this.g.values()),C=Array.from(this.g.keys()),O=[];for(let j=0;j<C.length;j++){const Z=m[j];for(let se=0;se<Z.length;se++)O.push(C[j])}return O},t.V=function(m){Ia(this);let C=[];if(typeof m=="string")kM(this,m)&&(C=C.concat(this.g.get(uc(this,m))));else{m=Array.from(this.g.values());for(let O=0;O<m.length;O++)C=C.concat(m[O])}return C},t.set=function(m,C){return Ia(this),this.i=null,m=uc(this,m),kM(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[C]),this.h+=1,this},t.get=function(m,C){return m?(m=this.V(m),0<m.length?String(m[0]):C):C};function jM(m,C,O){LM(m,C),0<O.length&&(m.i=null,m.g.set(uc(m,C),y(O)),m.h+=O.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],C=Array.from(this.g.keys());for(var O=0;O<C.length;O++){var j=C[O];const se=encodeURIComponent(String(j)),Me=this.V(j);for(j=0;j<Me.length;j++){var Z=se;Me[j]!==""&&(Z+="="+encodeURIComponent(String(Me[j]))),m.push(Z)}}return this.i=m.join("&")};function uc(m,C){return C=String(C),m.j&&(C=C.toLowerCase()),C}function pz(m,C){C&&!m.j&&(Ia(m),m.i=null,m.g.forEach(function(O,j){var Z=j.toLowerCase();j!=Z&&(LM(this,j),jM(this,Z,O))},m)),m.j=C}function mz(m,C){const O=new vi;if(s.Image){const j=new Image;j.onload=d(Na,O,"TestLoadImage: loaded",!0,C,j),j.onerror=d(Na,O,"TestLoadImage: error",!1,C,j),j.onabort=d(Na,O,"TestLoadImage: abort",!1,C,j),j.ontimeout=d(Na,O,"TestLoadImage: timeout",!1,C,j),s.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=m}else C(!1)}function gz(m,C){const O=new vi,j=new AbortController,Z=setTimeout(()=>{j.abort(),Na(O,"TestPingServer: timeout",!1,C)},1e4);fetch(m,{signal:j.signal}).then(se=>{clearTimeout(Z),se.ok?Na(O,"TestPingServer: ok",!0,C):Na(O,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(Z),Na(O,"TestPingServer: error",!1,C)})}function Na(m,C,O,j,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),j(O)}catch{}}function vz(){this.g=new qe}function yz(m,C,O){const j=O||"";try{Wn(m,function(Z,se){let Me=Z;c(Z)&&(Me=Qe(Z)),C.push(j+se+"="+encodeURIComponent(Me))})}catch(Z){throw C.push(j+"type="+encodeURIComponent("_badmap")),Z}}function lm(m){this.l=m.Ub||null,this.j=m.eb||!1}v(lm,Ve),lm.prototype.g=function(){return new cm(this.l,this.j)},lm.prototype.i=function(m){return function(){return m}}({});function cm(m,C){ye.call(this),this.D=m,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(cm,ye),t=cm.prototype,t.open=function(m,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=C,this.readyState=1,ah(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(C.body=m),(this.D||s).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oh(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ah(this)),this.g&&(this.readyState=3,ah(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;UM(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function UM(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var C=m.value?m.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!m.done}))&&(this.response=this.responseText+=C)}m.done?oh(this):ah(this),this.readyState==3&&UM(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,oh(this))},t.Qa=function(m){this.g&&(this.response=m,oh(this))},t.ga=function(){this.g&&oh(this)};function oh(m){m.readyState=4,m.l=null,m.j=null,m.v=null,ah(m)}t.setRequestHeader=function(m,C){this.u.append(m,C)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],C=this.h.entries();for(var O=C.next();!O.done;)O=O.value,m.push(O[0]+": "+O[1]),O=C.next();return m.join(`\r
`)};function ah(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(cm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function FM(m){let C="";return M(m,function(O,j){C+=j,C+=":",C+=O,C+=`\r
`}),C}function I_(m,C,O){e:{for(j in O){var j=!1;break e}j=!0}j||(O=FM(O),typeof m=="string"?O!=null&&encodeURIComponent(String(O)):Jt(m,C,O))}function mn(m){ye.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(mn,ye);var _z=/^https?$/i,xz=["POST","PUT"];t=mn.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,C,O,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);C=C?C.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zf.g(),this.v=this.o?De(this.o):De(Zf),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(C,String(m),!0),this.B=!1}catch(se){VM(this,se);return}if(m=O||"",O=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var Z in j)O.set(Z,j[Z]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const se of j.keys())O.set(se,j.get(se));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(O.keys()).find(se=>se.toLowerCase()=="content-type"),Z=s.FormData&&m instanceof s.FormData,!(0<=Array.prototype.indexOf.call(xz,C,void 0))||j||Z||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,Me]of O)this.g.setRequestHeader(se,Me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zM(this),this.u=!0,this.g.send(m),this.u=!1}catch(se){VM(this,se)}};function VM(m,C){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=C,m.m=5,BM(m),um(m)}function BM(m){m.A||(m.A=!0,he(m,"complete"),he(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,he(this,"complete"),he(this,"abort"),um(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),um(this,!0)),mn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?$M(this):this.bb())},t.bb=function(){$M(this)};function $M(m){if(m.h&&typeof a<"u"&&(!m.v[1]||Vo(m)!=4||m.Z()!=2)){if(m.u&&Vo(m)==4)Ce(m.Ea,0,m);else if(he(m,"readystatechange"),Vo(m)==4){m.h=!1;try{const Me=m.Z();e:switch(Me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var O;if(!(O=C)){var j;if(j=Me===0){var Z=String(m.D).match(po)[1]||null;!Z&&s.self&&s.self.location&&(Z=s.self.location.protocol.slice(0,-1)),j=!_z.test(Z?Z.toLowerCase():"")}O=j}if(O)he(m,"complete"),he(m,"success");else{m.m=6;try{var se=2<Vo(m)?m.g.statusText:""}catch{se=""}m.l=se+" ["+m.Z()+"]",BM(m)}}finally{um(m)}}}}function um(m,C){if(m.g){zM(m);const O=m.g,j=m.v[0]?()=>{}:null;m.g=null,m.v=null,C||he(m,"ready");try{O.onreadystatechange=j}catch{}}}function zM(m){m.I&&(s.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Vo(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Vo(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var C=this.g.responseText;return m&&C.indexOf(m)==0&&(C=C.substring(m.length)),Ge(C)}};function HM(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function bz(m){const C={};m=(m.g&&2<=Vo(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<m.length;j++){if(x(m[j]))continue;var O=R(m[j]);const Z=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const se=C[Z]||[];C[Z]=se,se.push(O)}S(C,function(j){return j.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sh(m,C,O){return O&&O.internalChannelParams&&O.internalChannelParams[m]||C}function GM(m){this.Aa=0,this.i=[],this.j=new vi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sh("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sh("baseRetryDelayMs",5e3,m),this.cb=sh("retryDelaySeedMs",1e4,m),this.Wa=sh("forwardChannelMaxRetries",2,m),this.wa=sh("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new yi(m&&m.concurrentRequestLimit),this.Da=new vz,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=GM.prototype,t.la=8,t.G=1,t.connect=function(m,C,O,j){dt(0),this.W=m,this.H=C||{},O&&j!==void 0&&(this.H.OSID=O,this.H.OAID=j),this.F=this.X,this.I=eP(this,null,this.W),hm(this)};function N_(m){if(WM(m),m.G==3){var C=m.U++,O=Jr(m.I);if(Jt(O,"SID",m.K),Jt(O,"RID",C),Jt(O,"TYPE","terminate"),lh(m,O),C=new U(m,m.j,C),C.L=2,C.v=sm(Jr(O)),O=!1,s.navigator&&s.navigator.sendBeacon)try{O=s.navigator.sendBeacon(C.v.toString(),"")}catch{}!O&&s.Image&&(new Image().src=C.v,O=!0),O||(C.g=tP(C.j,null),C.g.ea(C.v)),C.F=Date.now(),tt(C)}JM(m)}function fm(m){m.g&&(L_(m),m.g.cancel(),m.g=null)}function WM(m){fm(m),m.u&&(s.clearTimeout(m.u),m.u=null),dm(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&s.clearTimeout(m.s),m.s=null)}function hm(m){if(!Zt(m.h)&&!m.s){m.s=!0;var C=m.Ga;$||K(),V||($(),V=!0),X.add(C,m),m.B=0}}function wz(m,C){return bt(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=C.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Dn(h(m.Ga,m,C),ZM(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const Z=new U(this,this.j,m);let se=this.o;if(this.S&&(se?(se=A(se),P(se,this.S)):se=this.S),this.m!==null||this.O||(Z.H=se,se=null),this.P)e:{for(var C=0,O=0;O<this.i.length;O++){t:{var j=this.i[O];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(C+=j,4096<C){C=O;break e}if(C===4096||O===this.i.length-1){C=O+1;break e}}C=1e3}else C=1e3;C=XM(this,Z,C),O=Jr(this.I),Jt(O,"RID",m),Jt(O,"CVER",22),this.D&&Jt(O,"X-HTTP-Session-Id",this.D),lh(this,O),se&&(this.O?C="headers="+encodeURIComponent(String(FM(se)))+"&"+C:this.m&&I_(O,this.m,se)),sn(this.h,Z),this.Ua&&Jt(O,"TYPE","init"),this.P?(Jt(O,"$req",C),Jt(O,"SID","null"),Z.T=!0,ae(Z,O,null)):ae(Z,O,C),this.G=2}}else this.G==3&&(m?qM(this,m):this.i.length==0||Zt(this.h)||qM(this))};function qM(m,C){var O;C?O=C.l:O=m.U++;const j=Jr(m.I);Jt(j,"SID",m.K),Jt(j,"RID",O),Jt(j,"AID",m.T),lh(m,j),m.m&&m.o&&I_(j,m.m,m.o),O=new U(m,m.j,O,m.B+1),m.m===null&&(O.H=m.o),C&&(m.i=C.D.concat(m.i)),C=XM(m,O,1e3),O.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),sn(m.h,O),ae(O,j,C)}function lh(m,C){m.H&&M(m.H,function(O,j){Jt(C,j,O)}),m.l&&Wn({},function(O,j){Jt(C,j,O)})}function XM(m,C,O){O=Math.min(m.i.length,O);var j=m.l?h(m.l.Na,m.l,m):null;e:{var Z=m.i;let se=-1;for(;;){const Me=["count="+O];se==-1?0<O?(se=Z[0].g,Me.push("ofs="+se)):se=0:Me.push("ofs="+se);let Wt=!0;for(let nr=0;nr<O;nr++){let Dt=Z[nr].g;const hr=Z[nr].map;if(Dt-=se,0>Dt)se=Math.max(0,Z[nr].g-100),Wt=!1;else try{yz(hr,Me,"req"+Dt+"_")}catch{j&&j(hr)}}if(Wt){j=Me.join("&");break e}}}return m=m.i.splice(0,O),C.D=m,j}function KM(m){if(!m.g&&!m.u){m.Y=1;var C=m.Fa;$||K(),V||($(),V=!0),X.add(C,m),m.v=0}}function D_(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Dn(h(m.Fa,m),ZM(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,YM(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Dn(h(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),fm(this),YM(this))};function L_(m){m.A!=null&&(s.clearTimeout(m.A),m.A=null)}function YM(m){m.g=new U(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var C=Jr(m.qa);Jt(C,"RID","rpc"),Jt(C,"SID",m.K),Jt(C,"AID",m.T),Jt(C,"CI",m.F?"0":"1"),!m.F&&m.ja&&Jt(C,"TO",m.ja),Jt(C,"TYPE","xmlhttp"),lh(m,C),m.m&&m.o&&I_(C,m.m,m.o),m.L&&(m.g.I=m.L);var O=m.g;m=m.ia,O.L=1,O.v=sm(Jr(C)),O.m=null,O.P=!0,Fe(O,m)}t.Za=function(){this.C!=null&&(this.C=null,fm(this),D_(this),dt(19))};function dm(m){m.C!=null&&(s.clearTimeout(m.C),m.C=null)}function QM(m,C){var O=null;if(m.g==C){dm(m),L_(m),m.g=null;var j=2}else if(Bs(m.h,C))O=C.D,ho(m.h,C),j=1;else return;if(m.G!=0){if(C.o)if(j==1){O=C.m?C.m.length:0,C=Date.now()-C.F;var Z=m.B;j=Ie(),he(j,new Tn(j,O)),hm(m)}else KM(m);else if(Z=C.s,Z==3||Z==0&&0<C.X||!(j==1&&wz(m,C)||j==2&&D_(m)))switch(O&&0<O.length&&(C=m.h,C.i=C.i.concat(O)),Z){case 1:Hs(m,5);break;case 4:Hs(m,10);break;case 3:Hs(m,6);break;default:Hs(m,2)}}}function ZM(m,C){let O=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(O*=2),O*C}function Hs(m,C){if(m.j.info("Error code "+C),C==2){var O=h(m.fb,m),j=m.Xa;const Z=!j;j=new _n(j||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||cc(j,"https"),sm(j),Z?mz(j.toString(),O):gz(j.toString(),O)}else dt(2);m.G=0,m.l&&m.l.sa(C),JM(m),WM(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function JM(m){if(m.G=0,m.ka=[],m.l){const C=Jf(m.h);(C.length!=0||m.i.length!=0)&&(g(m.ka,C),g(m.ka,m.i),m.h.i.length=0,y(m.i),m.i.length=0),m.l.ra()}}function eP(m,C,O){var j=O instanceof _n?Jr(O):new _n(O);if(j.g!="")C&&(j.g=C+"."+j.g),zs(j,j.s);else{var Z=s.location;j=Z.protocol,C=C?C+"."+Z.hostname:Z.hostname,Z=+Z.port;var se=new _n(null);j&&cc(se,j),C&&(se.g=C),Z&&zs(se,Z),O&&(se.l=O),j=se}return O=m.D,C=m.ya,O&&C&&Jt(j,O,C),Jt(j,"VER",m.la),lh(m,j),j}function tP(m,C,O){if(C&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=m.Ca&&!m.pa?new mn(new lm({eb:O})):new mn(m.pa),C.Ha(m.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function nP(){}t=nP.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function pm(){}pm.prototype.g=function(m,C){return new ei(m,C)};function ei(m,C){ye.call(this),this.g=new GM(C),this.l=m,this.h=C&&C.messageUrlParams||null,m=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(m?m["X-WebChannel-Content-Type"]=C.messageContentType:m={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(m?m["X-WebChannel-Client-Profile"]=C.va:m={"X-WebChannel-Client-Profile":C.va}),this.g.S=m,(m=C&&C.Sb)&&!x(m)&&(this.g.m=m),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!x(C)&&(this.g.D=C,m=this.h,m!==null&&C in m&&(m=this.h,C in m&&delete m[C])),this.j=new fc(this)}v(ei,ye),ei.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ei.prototype.close=function(){N_(this.g)},ei.prototype.o=function(m){var C=this.g;if(typeof m=="string"){var O={};O.__data__=m,m=O}else this.u&&(O={},O.__data__=Qe(m),m=O);C.i.push(new An(C.Ya++,m)),C.G==3&&hm(C)},ei.prototype.N=function(){this.g.l=null,delete this.j,N_(this.g),delete this.g,ei.aa.N.call(this)};function rP(m){le.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var C=m.__sm__;if(C){e:{for(const O in C){m=O;break e}m=void 0}(this.i=m)&&(m=this.i,C=C!==null&&m in C?C[m]:void 0),this.data=C}else this.data=m}v(rP,le);function iP(){ue.call(this),this.status=1}v(iP,ue);function fc(m){this.g=m}v(fc,nP),fc.prototype.ua=function(){he(this.g,"a")},fc.prototype.ta=function(m){he(this.g,new rP(m))},fc.prototype.sa=function(m){he(this.g,new iP)},fc.prototype.ra=function(){he(this.g,"b")},pm.prototype.createWebChannel=pm.prototype.g,ei.prototype.send=ei.prototype.o,ei.prototype.open=ei.prototype.m,ei.prototype.close=ei.prototype.close,W5=function(){return new pm},G5=function(){return Ie()},H5=ne,HS={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vs.NO_ERROR=0,Vs.TIMEOUT=8,Vs.HTTP_ERROR=6,Wg=Vs,am.COMPLETE="complete",z5=am,vt.EventType=Q,Q.OPEN="a",Q.CLOSE="b",Q.ERROR="c",Q.MESSAGE="d",ye.prototype.listen=ye.prototype.K,$h=vt,mn.prototype.listenOnce=mn.prototype.L,mn.prototype.getLastError=mn.prototype.Ka,mn.prototype.getLastErrorCode=mn.prototype.Ba,mn.prototype.getStatus=mn.prototype.Z,mn.prototype.getResponseJson=mn.prototype.Oa,mn.prototype.getResponseText=mn.prototype.oa,mn.prototype.send=mn.prototype.ea,mn.prototype.setWithCredentials=mn.prototype.Ha,$5=mn}).apply(typeof Sg<"u"?Sg:typeof self<"u"?self:typeof window<"u"?window:{});const TL="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qf="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=new L5("@firebase/firestore");function Uc(){return Wl.logLevel}function Be(t,...e){if(Wl.logLevel<=Ct.DEBUG){const n=e.map(eM);Wl.debug(`Firestore (${qf}): ${t}`,...n)}}function Ea(t,...e){if(Wl.logLevel<=Ct.ERROR){const n=e.map(eM);Wl.error(`Firestore (${qf}): ${t}`,...n)}}function vf(t,...e){if(Wl.logLevel<=Ct.WARN){const n=e.map(eM);Wl.warn(`Firestore (${qf}): ${t}`,...n)}}function eM(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t="Unexpected state"){const e=`FIRESTORE (${qf}) INTERNAL ASSERTION FAILED: `+t;throw Ea(e),new Error(e)}function Ut(t,e){t||st()}function pt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends Wf{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yPe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(br.UNAUTHENTICATED))}shutdown(){}}class _Pe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class xPe{constructor(e){this.t=e,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ut(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new vs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new vs,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},s=l=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>s(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?s(l):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new vs)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ut(typeof r.accessToken=="string"),new q5(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ut(e===null||typeof e=="string"),new br(e)}}class bPe{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=br.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class wPe{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new bPe(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class SPe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EPe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ut(this.o===void 0);const r=o=>{o.error!=null&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,Be("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ut(typeof n.token=="string"),this.R=n.token,new SPe(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TPe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=TPe(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function At(t,e){return t<e?-1:t>e?1:0}function yf(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{static now(){return Bn.fromMillis(Date.now())}static fromDate(e){return Bn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Bn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new He(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new He(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new He(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{static fromTimestamp(e){return new ut(e)}static min(){return new ut(new Bn(0,0))}static max(){return new ut(new Bn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n,r){n===void 0?n=0:n>e.length&&st(),r===void 0?r=e.length-n:r>e.length-n&&st(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Pp.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pp?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),a=n.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class on extends Pp{construct(e,n,r){return new on(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new He(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new on(n)}static emptyPath(){return new on([])}}const APe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sr extends Pp{construct(e,n,r){return new sr(e,n,r)}static isValidIdentifier(e){return APe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new sr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new He(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new He(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new He(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else s==="`"?(a=!a,i++):s!=="."||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new He(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sr(n)}static emptyPath(){return new sr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.path=e}static fromPath(e){return new Je(on.fromString(e))}static fromName(e){return new Je(on.fromString(e).popFirst(5))}static empty(){return new Je(on.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&on.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return on.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new on(e.slice()))}}function MPe(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ut.fromTimestamp(r===1e9?new Bn(n+1,0):new Bn(n,r));return new As(i,Je.empty(),e)}function PPe(t){return new As(t.readTime,t.key,-1)}class As{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new As(ut.min(),Je.empty(),-1)}static max(){return new As(ut.max(),Je.empty(),-1)}}function CPe(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Je.comparator(t.documentKey,e.documentKey),n!==0?n:At(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RPe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OPe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xf(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==RPe)throw t;Be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new pe((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof pe?n:pe.resolve(n)}catch(n){return pe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):pe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):pe.reject(n)}static resolve(e){return new pe((n,r)=>{n(e)})}static reject(e){return new pe((n,r)=>{r(e)})}static waitFor(e){return new pe((n,r)=>{let i=0,o=0,a=!1;e.forEach(s=>{++i,s.next(()=>{++o,a&&o===i&&n()},l=>r(l))}),a=!0,o===i&&n()})}static or(e){let n=pe.resolve(!1);for(const r of e)n=n.next(i=>i?pe.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new pe((r,i)=>{const o=e.length,a=new Array(o);let s=0;for(let l=0;l<o;l++){const c=l;n(e[c]).next(u=>{a[c]=u,++s,s===o&&r(a)},u=>i(u))}})}static doWhile(e,n){return new pe((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function IPe(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Kf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}y_.oe=-1;function __(t){return t==null}function By(t){return t===0&&1/t==-1/0}function NPe(t){return typeof t=="number"&&Number.isInteger(t)&&!By(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DPe(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=AL(e)),e=LPe(t.get(n),e);return AL(e)}function LPe(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function AL(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function nc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function K5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n){this.comparator=e,this.root=n||ar.EMPTY}insert(e,n){return new pn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ar.BLACK,null,null))}remove(e){return new pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ar.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eg(this.root,e,this.comparator,!0)}}class Eg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ar{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??ar.RED,this.left=i??ar.EMPTY,this.right=o??ar.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new ar(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ar.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ar.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}ar.EMPTY=null,ar.RED=!0,ar.BLACK=!1;ar.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(e,n,r,i,o){return this}insert(e,n,r){return new ar(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.comparator=e,this.data=new pn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new PL(this.data.getIterator())}getIteratorFrom(e){return new PL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $n(this.comparator);return n.data=e,n}}class PL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.fields=e,e.sort(sr.comparator)}static empty(){return new no([])}unionWith(e){let n=new $n(sr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new no(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return yf(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Y5("Invalid base64 string: "+o):o}}(e);return new fr(n)}static fromUint8Array(e){const n=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new fr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fr.EMPTY_BYTE_STRING=new fr("");const kPe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ms(t){if(Ut(!!t),typeof t=="string"){let e=0;const n=kPe.exec(t);if(Ut(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bn(t.seconds),nanos:bn(t.nanos)}}function bn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ps(t){return typeof t=="string"?fr.fromBase64String(t):fr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function x_(t){const e=t.mapValue.fields.__previous_value__;return tM(e)?x_(e):e}function Cp(t){const e=Ms(t.mapValue.fields.__local_write_time__.timestampValue);return new Bn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jPe{constructor(e,n,r,i,o,a,s,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=s,this.longPollingOptions=l,this.useFetchStreams=c}}class Rp{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Rp("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Rp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Cs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tM(t)?4:FPe(t)?9007199254740991:UPe(t)?10:11:st()}function Do(t,e){if(t===e)return!0;const n=Cs(t);if(n!==Cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Cp(t).isEqual(Cp(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const a=Ms(i.timestampValue),s=Ms(o.timestampValue);return a.seconds===s.seconds&&a.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Ps(i.bytesValue).isEqual(Ps(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return bn(i.geoPointValue.latitude)===bn(o.geoPointValue.latitude)&&bn(i.geoPointValue.longitude)===bn(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return bn(i.integerValue)===bn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const a=bn(i.doubleValue),s=bn(o.doubleValue);return a===s?By(a)===By(s):isNaN(a)&&isNaN(s)}return!1}(t,e);case 9:return yf(t.arrayValue.values||[],e.arrayValue.values||[],Do);case 10:case 11:return function(i,o){const a=i.mapValue.fields||{},s=o.mapValue.fields||{};if(ML(a)!==ML(s))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(s[l]===void 0||!Do(a[l],s[l])))return!1;return!0}(t,e);default:return st()}}function Op(t,e){return(t.values||[]).find(n=>Do(n,e))!==void 0}function _f(t,e){if(t===e)return 0;const n=Cs(t),r=Cs(e);if(n!==r)return At(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return At(t.booleanValue,e.booleanValue);case 2:return function(o,a){const s=bn(o.integerValue||o.doubleValue),l=bn(a.integerValue||a.doubleValue);return s<l?-1:s>l?1:s===l?0:isNaN(s)?isNaN(l)?0:-1:1}(t,e);case 3:return CL(t.timestampValue,e.timestampValue);case 4:return CL(Cp(t),Cp(e));case 5:return At(t.stringValue,e.stringValue);case 6:return function(o,a){const s=Ps(o),l=Ps(a);return s.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const s=o.split("/"),l=a.split("/");for(let c=0;c<s.length&&c<l.length;c++){const u=At(s[c],l[c]);if(u!==0)return u}return At(s.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const s=At(bn(o.latitude),bn(a.latitude));return s!==0?s:At(bn(o.longitude),bn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return RL(t.arrayValue,e.arrayValue);case 10:return function(o,a){var s,l,c,u;const f=o.fields||{},h=a.fields||{},d=(s=f.value)===null||s===void 0?void 0:s.arrayValue,v=(l=h.value)===null||l===void 0?void 0:l.arrayValue,y=At(((c=d==null?void 0:d.values)===null||c===void 0?void 0:c.length)||0,((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0);return y!==0?y:RL(d,v)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Tg.mapValue&&a===Tg.mapValue)return 0;if(o===Tg.mapValue)return 1;if(a===Tg.mapValue)return-1;const s=o.fields||{},l=Object.keys(s),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const h=At(l[f],u[f]);if(h!==0)return h;const d=_f(s[l[f]],c[u[f]]);if(d!==0)return d}return At(l.length,u.length)}(t.mapValue,e.mapValue);default:throw st()}}function CL(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return At(t,e);const n=Ms(t),r=Ms(e),i=At(n.seconds,r.seconds);return i!==0?i:At(n.nanos,r.nanos)}function RL(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=_f(n[i],r[i]);if(o)return o}return At(n.length,r.length)}function xf(t){return GS(t)}function GS(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ms(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ps(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Je.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=GS(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${GS(n.fields[a])}`;return i+"}"}(t.mapValue):st()}function qg(t){switch(Cs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=x_(t);return e?16+qg(e):16;case 5:return 2*t.stringValue.length;case 6:return Ps(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+qg(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return nc(r.fields,(o,a)=>{i+=o.length+qg(a)}),i}(t.mapValue);default:throw st()}}function OL(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function WS(t){return!!t&&"integerValue"in t}function nM(t){return!!t&&"arrayValue"in t}function IL(t){return!!t&&"nullValue"in t}function NL(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xg(t){return!!t&&"mapValue"in t}function UPe(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function pd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return nc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=pd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function FPe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.value=e}static empty(){return new Ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pd(n)}setAll(e){let n=sr.emptyPath(),r={},i=[];e.forEach((a,s)=>{if(!n.isImmediateParentOf(s)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=s.popLast()}a?r[s.lastSegment()]=pd(a):i.push(s.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Xg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Do(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Xg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){nc(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Ri(pd(this.value))}}function Q5(t){const e=[];return nc(t.fields,(n,r)=>{const i=new sr([n]);if(Xg(r)){const o=Q5(r.mapValue).fields;if(o.length===0)e.push(i);else for(const a of o)e.push(i.child(a))}else e.push(i)}),new no(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n,r,i,o,a,s){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=s}static newInvalidDocument(e){return new Tr(e,0,ut.min(),ut.min(),ut.min(),Ri.empty(),0)}static newFoundDocument(e,n,r,i){return new Tr(e,1,n,ut.min(),r,i,0)}static newNoDocument(e,n){return new Tr(e,2,n,ut.min(),ut.min(),Ri.empty(),0)}static newUnknownDocument(e,n){return new Tr(e,3,n,ut.min(),ut.min(),Ri.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,n){this.position=e,this.inclusive=n}}function DL(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],a=t.position[i];if(o.field.isKeyField()?r=Je.comparator(Je.fromName(a.referenceValue),n.key):r=_f(a,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function LL(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Do(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n="asc"){this.field=e,this.dir=n}}function VPe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{}class On extends Z5{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new $Pe(e,n,r):n==="array-contains"?new GPe(e,r):n==="in"?new WPe(e,r):n==="not-in"?new qPe(e,r):n==="array-contains-any"?new XPe(e,r):new On(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new zPe(e,r):new HPe(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(_f(n,this.value)):n!==null&&Cs(this.value)===Cs(n)&&this.matchesComparison(_f(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return st()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class uo extends Z5{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new uo(e,n)}matches(e){return J5(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function J5(t){return t.op==="and"}function e$(t){return BPe(t)&&J5(t)}function BPe(t){for(const e of t.filters)if(e instanceof uo)return!1;return!0}function qS(t){if(t instanceof On)return t.field.canonicalString()+t.op.toString()+xf(t.value);if(e$(t))return t.filters.map(e=>qS(e)).join(",");{const e=t.filters.map(n=>qS(n)).join(",");return`${t.op}(${e})`}}function t$(t,e){return t instanceof On?function(r,i){return i instanceof On&&r.op===i.op&&r.field.isEqual(i.field)&&Do(r.value,i.value)}(t,e):t instanceof uo?function(r,i){return i instanceof uo&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,s)=>o&&t$(a,i.filters[s]),!0):!1}(t,e):void st()}function n$(t){return t instanceof On?function(n){return`${n.field.canonicalString()} ${n.op} ${xf(n.value)}`}(t):t instanceof uo?function(n){return n.op.toString()+" {"+n.getFilters().map(n$).join(" ,")+"}"}(t):"Filter"}class $Pe extends On{constructor(e,n,r){super(e,n,r),this.key=Je.fromName(r.referenceValue)}matches(e){const n=Je.comparator(e.key,this.key);return this.matchesComparison(n)}}class zPe extends On{constructor(e,n){super(e,"in",n),this.keys=r$("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class HPe extends On{constructor(e,n){super(e,"not-in",n),this.keys=r$("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function r$(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Je.fromName(r.referenceValue))}class GPe extends On{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nM(n)&&Op(n.arrayValue,this.value)}}class WPe extends On{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Op(this.value.arrayValue,n)}}class qPe extends On{constructor(e,n){super(e,"not-in",n)}matches(e){if(Op(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Op(this.value.arrayValue,n)}}class XPe extends On{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nM(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Op(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KPe{constructor(e,n=null,r=[],i=[],o=null,a=null,s=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=s,this.ue=null}}function kL(t,e=null,n=[],r=[],i=null,o=null,a=null){return new KPe(t,e,n,r,i,o,a)}function rM(t){const e=pt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qS(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),__(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xf(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xf(r)).join(",")),e.ue=n}return e.ue}function iM(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!VPe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!t$(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!LL(t.startAt,e.startAt)&&LL(t.endAt,e.endAt)}function XS(t){return Je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n=null,r=[],i=[],o=null,a="F",s=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=s,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function YPe(t,e,n,r,i,o,a,s){return new Yf(t,e,n,r,i,o,a,s)}function i$(t){return new Yf(t)}function jL(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function o$(t){return t.collectionGroup!==null}function md(t){const e=pt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let s=new $n(sr.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(s=s.add(c.field))})}),s})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ip(o,r))}),n.has(sr.keyField().canonicalString())||e.ce.push(new Ip(sr.keyField(),r))}return e.ce}function Co(t){const e=pt(t);return e.le||(e.le=QPe(e,md(t))),e.le}function QPe(t,e){if(t.limitType==="F")return kL(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Ip(i.field,o)});const n=t.endAt?new $y(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new $y(t.startAt.position,t.startAt.inclusive):null;return kL(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function KS(t,e){const n=t.filters.concat([e]);return new Yf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function zy(t,e,n){return new Yf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function b_(t,e){return iM(Co(t),Co(e))&&t.limitType===e.limitType}function a$(t){return`${rM(Co(t))}|lt:${t.limitType}`}function Fc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>n$(i)).join(", ")}]`),__(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>xf(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>xf(i)).join(",")),`Target(${r})`}(Co(t))}; limitType=${t.limitType})`}function w_(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Je.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of md(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,s,l){const c=DL(a,s,l);return a.inclusive?c<=0:c<0}(r.startAt,md(r),i)||r.endAt&&!function(a,s,l){const c=DL(a,s,l);return a.inclusive?c>=0:c>0}(r.endAt,md(r),i))}(t,e)}function ZPe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function s$(t){return(e,n)=>{let r=!1;for(const i of md(t)){const o=JPe(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function JPe(t,e,n){const r=t.field.isKeyField()?Je.comparator(e.key,n.key):function(o,a,s){const l=a.data.field(o),c=s.data.field(o);return l!==null&&c!==null?_f(l,c):st()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){nc(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return K5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eCe=new pn(Je.comparator);function Ta(){return eCe}const l$=new pn(Je.comparator);function zh(...t){let e=l$;for(const n of t)e=e.insert(n.key,n);return e}function c$(t){let e=l$;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function wl(){return gd()}function u$(){return gd()}function gd(){return new rc(t=>t.toString(),(t,e)=>t.isEqual(e))}const tCe=new pn(Je.comparator),nCe=new $n(Je.comparator);function Tt(...t){let e=nCe;for(const n of t)e=e.add(n);return e}const rCe=new $n(At);function iCe(){return rCe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:By(e)?"-0":e}}function f$(t){return{integerValue:""+t}}function oCe(t,e){return NPe(e)?f$(e):oM(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(){this._=void 0}}function aCe(t,e,n){return t instanceof Hy?function(i,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&tM(o)&&(o=x_(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof Np?d$(t,e):t instanceof Dp?p$(t,e):function(i,o){const a=h$(i,o),s=UL(a)+UL(i.Pe);return WS(a)&&WS(i.Pe)?f$(s):oM(i.serializer,s)}(t,e)}function sCe(t,e,n){return t instanceof Np?d$(t,e):t instanceof Dp?p$(t,e):n}function h$(t,e){return t instanceof Gy?function(r){return WS(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Hy extends S_{}class Np extends S_{constructor(e){super(),this.elements=e}}function d$(t,e){const n=m$(e);for(const r of t.elements)n.some(i=>Do(i,r))||n.push(r);return{arrayValue:{values:n}}}class Dp extends S_{constructor(e){super(),this.elements=e}}function p$(t,e){let n=m$(e);for(const r of t.elements)n=n.filter(i=>!Do(i,r));return{arrayValue:{values:n}}}class Gy extends S_{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function UL(t){return bn(t.integerValue||t.doubleValue)}function m$(t){return nM(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function lCe(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Np&&i instanceof Np||r instanceof Dp&&i instanceof Dp?yf(r.elements,i.elements,Do):r instanceof Gy&&i instanceof Gy?Do(r.Pe,i.Pe):r instanceof Hy&&i instanceof Hy}(t.transform,e.transform)}class cCe{constructor(e,n){this.version=e,this.transformResults=n}}class da{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new da}static exists(e){return new da(void 0,e)}static updateTime(e){return new da(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class E_{}function g$(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new y$(t.key,da.none()):new tm(t.key,t.data,da.none());{const n=t.data,r=Ri.empty();let i=new $n(sr.comparator);for(let o of e.fields)if(!i.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new ic(t.key,r,new no(i.toArray()),da.none())}}function uCe(t,e,n){t instanceof tm?function(i,o,a){const s=i.value.clone(),l=VL(i.fieldTransforms,o,a.transformResults);s.setAll(l),o.convertToFoundDocument(a.version,s).setHasCommittedMutations()}(t,e,n):t instanceof ic?function(i,o,a){if(!Kg(i.precondition,o))return void o.convertToUnknownDocument(a.version);const s=VL(i.fieldTransforms,o,a.transformResults),l=o.data;l.setAll(v$(i)),l.setAll(s),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function vd(t,e,n,r){return t instanceof tm?function(o,a,s,l){if(!Kg(o.precondition,a))return s;const c=o.value.clone(),u=BL(o.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ic?function(o,a,s,l){if(!Kg(o.precondition,a))return s;const c=BL(o.fieldTransforms,l,a),u=a.data;return u.setAll(v$(o)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),s===null?null:s.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(o,a,s){return Kg(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):s}(t,e,n)}function fCe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=h$(r.transform,i||null);o!=null&&(n===null&&(n=Ri.empty()),n.set(r.field,o))}return n||null}function FL(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&yf(r,i,(o,a)=>lCe(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tm extends E_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ic extends E_{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function v$(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function VL(t,e,n){const r=new Map;Ut(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,sCe(a,s,n[i]))}return r}function BL(t,e,n){const r=new Map;for(const i of t){const o=i.transform,a=n.data.field(i.field);r.set(i.field,aCe(o,a,e))}return r}class y$ extends E_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hCe extends E_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dCe{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&uCe(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=u$();return this.mutations.forEach(i=>{const o=e.get(i.key),a=o.overlayedDocument;let s=this.applyToLocalView(a,o.mutatedFields);s=n.has(i.key)?null:s;const l=g$(a,s);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(ut.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Tt())}isEqual(e){return this.batchId===e.batchId&&yf(this.mutations,e.mutations,(n,r)=>FL(n,r))&&yf(this.baseMutations,e.baseMutations,(n,r)=>FL(n,r))}}class aM{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ut(e.mutations.length===r.length);let i=function(){return tCe}();const o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new aM(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pCe{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mCe{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pn,Pt;function gCe(t){switch(t){default:return st();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function _$(t){if(t===void 0)return Ea("GRPC error has no .code"),ve.UNKNOWN;switch(t){case Pn.OK:return ve.OK;case Pn.CANCELLED:return ve.CANCELLED;case Pn.UNKNOWN:return ve.UNKNOWN;case Pn.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case Pn.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case Pn.INTERNAL:return ve.INTERNAL;case Pn.UNAVAILABLE:return ve.UNAVAILABLE;case Pn.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case Pn.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case Pn.NOT_FOUND:return ve.NOT_FOUND;case Pn.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case Pn.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case Pn.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case Pn.ABORTED:return ve.ABORTED;case Pn.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case Pn.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case Pn.DATA_LOSS:return ve.DATA_LOSS;default:return st()}}(Pt=Pn||(Pn={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vCe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yCe=new Il([4294967295,4294967295],0);function $L(t){const e=vCe().encode(t),n=new B5;return n.update(e),new Uint8Array(n.digest())}function zL(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Il([n,r],0),new Il([i,o],0)]}class sM{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hh(`Invalid padding: ${n}`);if(r<0)throw new Hh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Hh(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Il.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(Il.fromNumber(r)));return i.compare(yCe)===1&&(i=new Il([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=$L(e),[r,i]=zL(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(r,i,o);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new sM(o,i,n);return r.forEach(s=>a.insert(s)),a}insert(e){if(this.Te===0)return;const n=$L(e),[r,i]=zL(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(r,i,o);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Hh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,nm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new T_(ut.min(),i,new pn(At),Ta(),Tt())}}class nm{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new nm(r,n,Tt(),Tt(),Tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class x${constructor(e,n){this.targetId=e,this.me=n}}class b${constructor(e,n,r=fr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class HL{constructor(){this.fe=0,this.ge=GL(),this.pe=fr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Tt(),n=Tt(),r=Tt();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:st()}}),new nm(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=GL()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ut(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _Ce{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ta(),this.qe=Ag(),this.Qe=Ag(),this.Ke=new pn(At)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:st()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const o=i.target;if(XS(o))if(r===0){const a=new Je(o.path);this.We(n,a,Tr.newNoDocument(a,ut.min()))}else Ut(r===1);else{const a=this.Ze(n);if(a!==r){const s=this.Xe(e),l=s?this.et(s,e,a):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let a,s;try{a=Ps(r).toUint8Array()}catch(l){if(l instanceof Y5)return vf("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{s=new sM(a,i,o)}catch(l){return vf(l instanceof Hh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return s.Te===0?null:s}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const a=this.Le.nt(),s=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(s)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.Be.forEach((o,a)=>{const s=this.Ye(a);if(s){if(o.current&&XS(s.target)){const l=new Je(s.target.path);this.st(l).has(a)||this.ot(a,l)||this.We(a,l,Tr.newNoDocument(l,e))}o.be&&(n.set(a,o.ve()),o.Ce())}});let r=Tt();this.Qe.forEach((o,a)=>{let s=!0;a.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(r=r.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const i=new T_(e,n,this.Ke,this.ke,r);return this.ke=Ta(),this.qe=Ag(),this.Qe=Ag(),this.Ke=new pn(At),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new HL,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new $n(At),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new $n(At),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||Be("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new HL),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ag(){return new pn(Je.comparator)}function GL(){return new pn(Je.comparator)}const xCe={asc:"ASCENDING",desc:"DESCENDING"},bCe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wCe={and:"AND",or:"OR"};class SCe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function YS(t,e){return t.useProto3Json||__(e)?e:{value:e}}function Wy(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w$(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ECe(t,e){return Wy(t,e.toTimestamp())}function Ro(t){return Ut(!!t),ut.fromTimestamp(function(n){const r=Ms(n);return new Bn(r.seconds,r.nanos)}(t))}function lM(t,e){return QS(t,e).canonicalString()}function QS(t,e){const n=function(i){return new on(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function S$(t){const e=on.fromString(t);return Ut(P$(e)),e}function ZS(t,e){return lM(t.databaseId,e.path)}function Lb(t,e){const n=S$(e);if(n.get(1)!==t.databaseId.projectId)throw new He(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new He(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Je(T$(n))}function E$(t,e){return lM(t.databaseId,e)}function TCe(t){const e=S$(t);return e.length===4?on.emptyPath():T$(e)}function JS(t){return new on(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function T$(t){return Ut(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function WL(t,e,n){return{name:ZS(t,e),fields:n.value.mapValue.fields}}function ACe(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:st()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,u){return c.useProto3Json?(Ut(u===void 0||typeof u=="string"),fr.fromBase64String(u||"")):(Ut(u===void 0||u instanceof Buffer||u instanceof Uint8Array),fr.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,s=a&&function(c){const u=c.code===void 0?ve.UNKNOWN:_$(c.code);return new He(u,c.message||"")}(a);n=new b$(r,i,o,s||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Lb(t,r.document.name),o=Ro(r.document.updateTime),a=r.document.createTime?Ro(r.document.createTime):ut.min(),s=new Ri({mapValue:{fields:r.document.fields}}),l=Tr.newFoundDocument(i,o,a,s),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Yg(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Lb(t,r.document),o=r.readTime?Ro(r.readTime):ut.min(),a=Tr.newNoDocument(i,o),s=r.removedTargetIds||[];n=new Yg([],s,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Lb(t,r.document),o=r.removedTargetIds||[];n=new Yg([],o,i,null)}else{if(!("filter"in e))return st();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,a=new mCe(i,o),s=r.targetId;n=new x$(s,a)}}return n}function MCe(t,e){let n;if(e instanceof tm)n={update:WL(t,e.key,e.value)};else if(e instanceof y$)n={delete:ZS(t,e.key)};else if(e instanceof ic)n={update:WL(t,e.key,e.data),updateMask:kCe(e.fieldMask)};else{if(!(e instanceof hCe))return st();n={verify:ZS(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,a){const s=a.transform;if(s instanceof Hy)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof Np)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof Dp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof Gy)return{fieldPath:a.field.canonicalString(),increment:s.Pe};throw st()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:ECe(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:st()}(t,e.precondition)),n}function PCe(t,e){return t&&t.length>0?(Ut(e!==void 0),t.map(n=>function(i,o){let a=i.updateTime?Ro(i.updateTime):Ro(o);return a.isEqual(ut.min())&&(a=Ro(o)),new cCe(a,i.transformResults||[])}(n,e))):[]}function CCe(t,e){return{documents:[E$(t,e.path)]}}function RCe(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=E$(t,i);const o=function(c){if(c.length!==0)return M$(uo.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:Vc(h.field),direction:NCe(h.dir)}}(u))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const s=YS(t,e.limit);return s!==null&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:n,parent:i}}function OCe(t){let e=TCe(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ut(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];n.where&&(o=function(f){const h=A$(f);return h instanceof uo&&e$(h)?h.getFilters():[h]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(h=>function(v){return new Ip(Bc(v.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(h))}(n.orderBy));let s=null;n.limit&&(s=function(f){let h;return h=typeof f=="object"?f.value:f,__(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(f){const h=!!f.before,d=f.values||[];return new $y(d,h)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const h=!f.before,d=f.values||[];return new $y(d,h)}(n.endAt)),YPe(e,i,a,o,s,"F",l,c)}function ICe(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function A$(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Bc(n.unaryFilter.field);return On.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Bc(n.unaryFilter.field);return On.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Bc(n.unaryFilter.field);return On.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Bc(n.unaryFilter.field);return On.create(a,"!=",{nullValue:"NULL_VALUE"});default:return st()}}(t):t.fieldFilter!==void 0?function(n){return On.create(Bc(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return uo.create(n.compositeFilter.filters.map(r=>A$(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return st()}}(n.compositeFilter.op))}(t):st()}function NCe(t){return xCe[t]}function DCe(t){return bCe[t]}function LCe(t){return wCe[t]}function Vc(t){return{fieldPath:t.canonicalString()}}function Bc(t){return sr.fromServerFormat(t.fieldPath)}function M$(t){return t instanceof On?function(n){if(n.op==="=="){if(NL(n.value))return{unaryFilter:{field:Vc(n.field),op:"IS_NAN"}};if(IL(n.value))return{unaryFilter:{field:Vc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(NL(n.value))return{unaryFilter:{field:Vc(n.field),op:"IS_NOT_NAN"}};if(IL(n.value))return{unaryFilter:{field:Vc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vc(n.field),op:DCe(n.op),value:n.value}}}(t):t instanceof uo?function(n){const r=n.getFilters().map(i=>M$(i));return r.length===1?r[0]:{compositeFilter:{op:LCe(n.op),filters:r}}}(t):st()}function kCe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function P$(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n,r,i,o=ut.min(),a=ut.min(),s=fr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=s,this.expectedCount=l}withSequenceNumber(e){return new ns(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jCe{constructor(e){this.ht=e}}function UCe(t){const e=OCe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FCe{constructor(){this.ln=new VCe}addToCollectionParentIndex(e,n){return this.ln.add(n),pe.resolve()}getCollectionParents(e,n){return pe.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return pe.resolve()}deleteFieldIndex(e,n){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,n){return pe.resolve()}getDocumentsMatchingTarget(e,n){return pe.resolve(null)}getIndexType(e,n){return pe.resolve(0)}getFieldIndexes(e,n){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,n){return pe.resolve(As.min())}getMinOffsetFromCollectionGroup(e,n){return pe.resolve(As.min())}updateCollectionGroup(e,n,r){return pe.resolve()}updateIndexEntries(e,n){return pe.resolve()}}class VCe{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new $n(on.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $n(on.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zr{static withCacheSize(e){return new zr(e,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zr.DEFAULT_COLLECTION_PERCENTILE=10,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zr.DEFAULT=new zr(41943040,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zr.DISABLED=new zr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new bf(0)}static Qn(){return new bf(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL([t,e],[n,r]){const i=At(t,n);return i===0?At(e,r):i}class BCe{constructor(e){this.Gn=e,this.buffer=new $n(XL),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();XL(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $Ce{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Kf(n)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Xf(n)}await this.Yn(3e5)})}}class zCe{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return pe.resolve(y_.oe);const r=new BCe(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(qL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qL):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,o,a,s,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,a=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,s=Date.now(),this.removeTargets(e,r,n))).next(f=>(o=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),Uc()<=Ct.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-u}ms
	Determined least recently used ${i} in `+(s-a)+`ms
	Removed ${o} targets in `+(l-s)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}}function HCe(t,e){return new zCe(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GCe{constructor(){this.changes=new rc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?pe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WCe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qCe{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&vd(r.mutation,i,no.empty(),Bn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Tt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Tt()){const i=wl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let a=zh();return o.forEach((s,l)=>{a=a.insert(s,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=wl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Tt()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,s)=>{n.set(a,s)})})}computeViews(e,n,r,i){let o=Ta();const a=gd(),s=function(){return gd()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof ic)?o=o.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),vd(u.mutation,c,u.mutation.getFieldMask(),Bn.now())):a.set(c.key,no.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,u)=>a.set(c,u)),n.forEach((c,u)=>{var f;return s.set(c,new WCe(u,(f=a.get(c))!==null&&f!==void 0?f:null))}),s))}recalculateAndSaveOverlays(e,n){const r=gd();let i=new pn((a,s)=>a-s),o=Tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const s of a)s.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||no.empty();u=s.applyToLocalView(c,u),r.set(l,u);const f=(i.get(s.batchId)||Tt()).add(l);i=i.insert(s.batchId,f)})}).next(()=>{const a=[],s=i.getReverseIterator();for(;s.hasNext();){const l=s.getNext(),c=l.key,u=l.value,f=u$();u.forEach(h=>{if(!o.has(h)){const d=g$(n.get(h),r.get(h));d!==null&&f.set(h,d),o=o.add(h)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,f))}return pe.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return Je.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):o$(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):pe.resolve(wl());let s=-1,l=o;return a.next(c=>pe.forEach(c,(u,f)=>(s<f.largestBatchId&&(s=f.largestBatchId),o.get(u)?pe.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,Tt())).next(u=>({batchId:s,changes:c$(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Je(n)).next(r=>{let i=zh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let a=zh();return this.indexManager.getCollectionParents(e,o).next(s=>pe.forEach(s,l=>{const c=function(f,h){return new Yf(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((f,h)=>{a=a.insert(f,h)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(a=>{o.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,Tr.newInvalidDocument(u)))});let s=zh();return a.forEach((l,c)=>{const u=o.get(l);u!==void 0&&vd(u.mutation,c,no.empty(),Bn.now()),w_(n,c)&&(s=s.insert(l,c))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XCe{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return pe.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ro(i.createTime)}}(n)),pe.resolve()}getNamedQuery(e,n){return pe.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:UCe(i.bundledQuery),readTime:Ro(i.readTime)}}(n)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KCe{constructor(){this.overlays=new pn(Je.comparator),this.Er=new Map}getOverlay(e,n){return pe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=wl();return pe.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.Tt(e,n,o)}),pe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Er.delete(r)),pe.resolve()}getOverlaysForCollection(e,n,r){const i=wl(),o=n.length+1,a=new Je(n.child("")),s=this.overlays.getIteratorFrom(a);for(;s.hasNext();){const l=s.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new pn((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=o.get(c.largestBatchId);u===null&&(u=wl(),o=o.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const s=wl(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>s.set(c,u)),!(s.size()>=i)););return pe.resolve(s)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new pCe(n,r));let o=this.Er.get(n);o===void 0&&(o=Tt(),this.Er.set(n,o)),this.Er.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YCe{constructor(){this.sessionToken=fr.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(){this.dr=new $n(Kn.Ar),this.Rr=new $n(Kn.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new Kn(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new Kn(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new Je(new on([])),r=new Kn(n,e),i=new Kn(n,e+1),o=[];return this.Rr.forEachInRange([r,i],a=>{this.gr(a),o.push(a.key)}),o}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new Je(new on([])),r=new Kn(n,e),i=new Kn(n,e+1);let o=Tt();return this.Rr.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new Kn(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Kn{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return Je.comparator(e.key,n.key)||At(e.br,n.br)}static Vr(e,n){return At(e.br,n.br)||Je.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QCe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new $n(Kn.Ar)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new dCe(o,n,r,i);this.mutationQueue.push(a);for(const s of i)this.vr=this.vr.add(new Kn(s.key,o)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return pe.resolve(a)}lookupMutationBatch(e,n){return pe.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),o=i<0?0:i;return pe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Kn(n,0),i=new Kn(n,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],a=>{const s=this.Cr(a.br);o.push(s)}),pe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $n(At);return n.forEach(i=>{const o=new Kn(i,0),a=new Kn(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,a],s=>{r=r.add(s.br)})}),pe.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Je.isDocumentKey(o)||(o=o.child(""));const a=new Kn(new Je(o),0);let s=new $n(At);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(s=s.add(l.br)),!0)},a),pe.resolve(this.Mr(s))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ut(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return pe.forEach(n.mutations,i=>{const o=new Kn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new Kn(n,0),i=this.vr.firstAfterOrEqual(r);return pe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZCe{constructor(e){this.Nr=e,this.docs=function(){return new pn(Je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,a=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return pe.resolve(r?r.document.mutableCopy():Tr.newInvalidDocument(n))}getEntries(e,n){let r=Ta();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Tr.newInvalidDocument(i))}),pe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Ta();const a=n.path,s=new Je(a.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||CPe(PPe(u),r)<=0||(i.has(u.key)||w_(n,u))&&(o=o.insert(u.key,u.mutableCopy()))}return pe.resolve(o)}getAllFromCollectionGroup(e,n,r,i){st()}Lr(e,n){return pe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new JCe(this)}getSize(e){return pe.resolve(this.size)}}class JCe extends GCe{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),pe.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2e{constructor(e){this.persistence=e,this.Br=new rc(n=>rM(n),iM),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.kr=0,this.qr=new cM,this.targetCount=0,this.Qr=bf.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),pe.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new bf(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,pe.resolve()}updateTargetData(e,n){return this.Un(n),pe.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Br.forEach((a,s)=>{s.sequenceNumber<=n&&r.get(s.targetId)===null&&(this.Br.delete(a),o.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),pe.waitFor(o).next(()=>i)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return pe.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),pe.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),pe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),pe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return pe.resolve(r)}containsKey(e,n){return pe.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(e,n){this.Kr={},this.overlays={},this.$r=new y_(0),this.Ur=!1,this.Ur=!0,this.Wr=new YCe,this.referenceDelegate=e(this),this.Gr=new e2e(this),this.indexManager=new FCe,this.remoteDocumentCache=function(i){return new ZCe(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new jCe(n),this.jr=new XCe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new KCe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new QCe(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){Be("MemoryPersistence","Starting transaction:",e);const i=new t2e(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,n){return pe.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class t2e extends OPe{constructor(e){super(),this.currentSequenceNumber=e}}class uM{constructor(e){this.persistence=e,this.Zr=new cM,this.Xr=null}static ei(e){return new uM(e)}get ti(){if(this.Xr)return this.Xr;throw st()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),pe.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),pe.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.ti,r=>{const i=Je.fromPath(r);return this.ni(e,i).next(o=>{o||n.removeEntry(i,ut.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return pe.or([()=>pe.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class qy{constructor(e,n){this.persistence=e,this.ri=new rc(r=>DPe(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=HCe(this,n)}static ei(e,n){return new qy(e,n)}Hr(){}Jr(e){return pe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return pe.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?pe.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Lr(e,a=>this.ir(e,a,n).next(s=>{s||(r++,o.removeEntry(a,ut.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),pe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),pe.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),pe.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qg(e.data.value)),n}ir(e,n,r){return pe.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return pe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=Tt(),i=Tt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new fM(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2e{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return eMe()?8:IPe(ZAe())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Xi(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.es(e,n,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new n2e;return this.ts(e,n,a).next(s=>{if(o.result=s,this.Hi)return this.ns(e,n,a,s.size)})}).next(()=>o.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(Uc()<=Ct.DEBUG&&Be("QueryEngine","SDK will not create cache indexes for query:",Fc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),pe.resolve()):(Uc()<=Ct.DEBUG&&Be("QueryEngine","Query:",Fc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Uc()<=Ct.DEBUG&&Be("QueryEngine","The SDK decides to create cache indexes for query:",Fc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Co(n))):pe.resolve())}Xi(e,n){if(jL(n))return pe.resolve(null);let r=Co(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=zy(n,null,"F"),r=Co(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const a=Tt(...o);return this.Zi.getDocuments(e,a).next(s=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.rs(n,s);return this.ss(n,c,a,l.readTime)?this.Xi(e,zy(n,null,"F")):this.os(e,c,n,l)}))})))}es(e,n,r,i){return jL(n)||i.isEqual(ut.min())?pe.resolve(null):this.Zi.getDocuments(e,r).next(o=>{const a=this.rs(n,o);return this.ss(n,a,r,i)?pe.resolve(null):(Uc()<=Ct.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fc(n)),this.os(e,a,n,MPe(i,-1)).next(s=>s))})}rs(e,n){let r=new $n(s$(e));return n.forEach((i,o)=>{w_(e,o)&&(r=r.add(o))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,n,r){return Uc()<=Ct.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Fc(n)),this.Zi.getDocumentsMatchingQuery(e,n,As.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2e{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new pn(At),this.cs=new rc(o=>rM(o),iM),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qCe(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function o2e(t,e,n,r){return new i2e(t,e,n,r)}async function R$(t,e){const n=pt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],s=[];let l=Tt();for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of o){s.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ts:c,removedBatchIds:a,addedBatchIds:s}))})})}function a2e(t,e){const n=pt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.hs.newChangeBuffer({trackRemovals:!0});return function(s,l,c,u){const f=c.batch,h=f.keys();let d=pe.resolve();return h.forEach(v=>{d=d.next(()=>u.getEntry(l,v)).next(y=>{const g=c.docVersions.get(v);Ut(g!==null),y.version.compareTo(g)<0&&(f.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),d.next(()=>s.mutationQueue.removeMutationBatch(l,f))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(s){let l=Tt();for(let c=0;c<s.mutationResults.length;++c)s.mutationResults[c].transformResults.length>0&&(l=l.add(s.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function O$(t){const e=pt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function s2e(t,e){const n=pt(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const s=[];e.targetChanges.forEach((u,f)=>{const h=i.get(f);if(!h)return;s.push(n.Gr.removeMatchingKeys(o,u.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(o,u.addedDocuments,f)));let d=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?d=d.withResumeToken(fr.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):u.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(u.resumeToken,r)),i=i.insert(f,d),function(y,g,p){return y.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size>0}(h,d,u)&&s.push(n.Gr.updateTargetData(o,d))});let l=Ta(),c=Tt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,u))}),s.push(l2e(o,a,e.documentUpdates).next(u=>{l=u.Is,c=u.Es})),!r.isEqual(ut.min())){const u=n.Gr.getLastRemoteSnapshotVersion(o).next(f=>n.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));s.push(u)}return pe.waitFor(s).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(n.us=i,o))}function l2e(t,e,n){let r=Tt(),i=Tt();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let a=Ta();return n.forEach((s,l)=>{const c=o.get(s);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(s)),l.isNoDocument()&&l.version.isEqual(ut.min())?(e.removeEntry(s,l.readTime),a=a.insert(s,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(s,l)):Be("LocalStore","Ignoring outdated watch update for ",s,". Current version:",c.version," Watch version:",l.version)}),{Is:a,Es:i}})}function c2e(t,e){const n=pt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function u2e(t,e){const n=pt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(o=>o?(i=o,pe.resolve(i)):n.Gr.allocateTargetId(r).next(a=>(i=new ns(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function eE(t,e,n){const r=pt(t),i=r.us.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Kf(a))throw a;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function KL(t,e,n){const r=pt(t);let i=ut.min(),o=Tt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const f=pt(l),h=f.cs.get(u);return h!==void 0?pe.resolve(f.us.get(h)):f.Gr.getTargetData(c,u)}(r,a,Co(e)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(a,s.targetId).next(l=>{o=l})}).next(()=>r._s.getDocumentsMatchingQuery(a,e,n?i:ut.min(),n?o:Tt())).next(s=>(f2e(r,ZPe(e),s),{documents:s,ds:o})))}function f2e(t,e,n){let r=t.ls.get(e)||ut.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ls.set(e,r)}class YL{constructor(){this.activeTargetIds=iCe()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class h2e{constructor(){this._o=new YL,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new YL,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2e{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mg=null;function kb(){return Mg===null?Mg=function(){return 268435456+Math.round(2147483648*Math.random())}():Mg++,"0x"+Mg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2e{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr="WebChannelConnection";class g2e extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(n,r,i,o,a){const s=kb(),l=this.No(n,r.toUriEncodedString());Be("RestConnection",`Sending RPC '${n}' ${s}:`,l,i);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(c,o,a),this.Bo(n,l,c,i).then(u=>(Be("RestConnection",`Received RPC '${n}' ${s}: `,u),u),u=>{throw vf("RestConnection",`RPC '${n}' ${s} failed with error: `,u,"url: ",l,"request:",i),u})}ko(n,r,i,o,a,s){return this.Oo(n,r,i,o,a)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qf}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,a)=>n[a]=o),i&&i.headers.forEach((o,a)=>n[a]=o)}No(n,r){const i=p2e[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){const o=kb();return new Promise((a,s)=>{const l=new $5;l.setWithCredentials(!0),l.listenOnce(z5.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Wg.NO_ERROR:const u=l.getResponseJson();Be(yr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),a(u);break;case Wg.TIMEOUT:Be(yr,`RPC '${e}' ${o} timed out`),s(new He(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Wg.HTTP_ERROR:const f=l.getStatus();if(Be(yr,`RPC '${e}' ${o} failed with status:`,f,"response text:",l.getResponseText()),f>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const d=h==null?void 0:h.error;if(d&&d.status&&d.message){const v=function(g){const p=g.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(p)>=0?p:ve.UNKNOWN}(d.status);s(new He(v,d.message))}else s(new He(ve.UNKNOWN,"Server responded with status "+l.getStatus()))}else s(new He(ve.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Be(yr,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);Be(yr,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",c,r,15)})}qo(e,n,r){const i=kb(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=W5(),s=G5(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=o.join("");Be(yr,`Creating RPC '${e}' stream ${i}: ${u}`,l);const f=a.createWebChannel(u,l);let h=!1,d=!1;const v=new m2e({Eo:g=>{d?Be(yr,`Not sending because RPC '${e}' stream ${i} is closed:`,g):(h||(Be(yr,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),Be(yr,`RPC '${e}' stream ${i} sending:`,g),f.send(g))},Ao:()=>f.close()}),y=(g,p,x)=>{g.listen(p,_=>{try{x(_)}catch(E){setTimeout(()=>{throw E},0)}})};return y(f,$h.EventType.OPEN,()=>{d||(Be(yr,`RPC '${e}' stream ${i} transport opened.`),v.So())}),y(f,$h.EventType.CLOSE,()=>{d||(d=!0,Be(yr,`RPC '${e}' stream ${i} transport closed`),v.Do())}),y(f,$h.EventType.ERROR,g=>{d||(d=!0,vf(yr,`RPC '${e}' stream ${i} transport errored:`,g),v.Do(new He(ve.UNAVAILABLE,"The operation could not be completed")))}),y(f,$h.EventType.MESSAGE,g=>{var p;if(!d){const x=g.data[0];Ut(!!x);const _=x,E=(_==null?void 0:_.error)||((p=_[0])===null||p===void 0?void 0:p.error);if(E){Be(yr,`RPC '${e}' stream ${i} received error:`,E);const b=E.status;let M=function(T){const P=Pn[T];if(P!==void 0)return _$(P)}(b),S=E.message;M===void 0&&(M=ve.INTERNAL,S="Unknown error status: "+b+" with message "+E.message),d=!0,v.Do(new He(M,S)),f.close()}else Be(yr,`RPC '${e}' stream ${i} received:`,x),v.vo(x)}}),y(s,H5.STAT_EVENT,g=>{g.stat===HS.PROXY?Be(yr,`RPC '${e}' stream ${i} detected buffering proxy`):g.stat===HS.NOPROXY&&Be(yr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.bo()},0),v}}function jb(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(t){return new SCe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(e,n,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N${constructor(e,n,r,i,o,a,s,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=s,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new I$(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(Ea(n.toString()),Ea("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new He(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class v2e extends N${constructor(e,n,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=ACe(this.serializer,e),r=function(o){if(!("targetChange"in o))return ut.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?ut.min():a.readTime?Ro(a.readTime):ut.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=JS(this.serializer),n.addTarget=function(o,a){let s;const l=a.target;if(s=XS(l)?{documents:CCe(o,l)}:{query:RCe(o,l).ct},s.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){s.resumeToken=w$(o,a.resumeToken);const c=YS(o,a.expectedCount);c!==null&&(s.expectedCount=c)}else if(a.snapshotVersion.compareTo(ut.min())>0){s.readTime=Wy(o,a.snapshotVersion.toTimestamp());const c=YS(o,a.expectedCount);c!==null&&(s.expectedCount=c)}return s}(this.serializer,e);const r=ICe(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=JS(this.serializer),n.removeTarget=e,this.c_(n)}}class y2e extends N${constructor(e,n,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Ut(!!e.streamToken),this.lastStreamToken=e.streamToken,Ut(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=PCe(e.writeResults,e.commitTime),r=Ro(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=JS(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>MCe(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2e extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new He(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Oo(e,QS(n,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new He(ve.UNKNOWN,o.toString())})}ko(e,n,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.ko(e,QS(n,r),i,a,s,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new He(ve.UNKNOWN,a.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class x2e{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Ea(n),this.C_=!1):Be("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2e{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(a=>{r.enqueueAndForget(async()=>{oc(this)&&(Be("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=pt(l);c.k_.add(4),await rm(c),c.K_.set("Unknown"),c.k_.delete(4),await M_(c)}(this))})}),this.K_=new x2e(r,i)}}async function M_(t){if(oc(t))for(const e of t.q_)await e(!0)}async function rm(t){for(const e of t.q_)await e(!1)}function D$(t,e){const n=pt(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),mM(n)?pM(n):Qf(n).s_()&&dM(n,e))}function hM(t,e){const n=pt(t),r=Qf(n);n.B_.delete(e),r.s_()&&L$(n,e),n.B_.size===0&&(r.s_()?r.a_():oc(n)&&n.K_.set("Unknown"))}function dM(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qf(t).V_(e)}function L$(t,e){t.U_.xe(e),Qf(t).m_(e)}function pM(t){t.U_=new _Ce({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Qf(t).start(),t.K_.F_()}function mM(t){return oc(t)&&!Qf(t).i_()&&t.B_.size>0}function oc(t){return pt(t).k_.size===0}function k$(t){t.U_=void 0}async function w2e(t){t.K_.set("Online")}async function S2e(t){t.B_.forEach((e,n)=>{dM(t,e)})}async function E2e(t,e){k$(t),mM(t)?(t.K_.O_(e),pM(t)):t.K_.set("Unknown")}async function T2e(t,e,n){if(t.K_.set("Online"),e instanceof b$&&e.state===2&&e.cause)try{await async function(i,o){const a=o.cause;for(const s of o.targetIds)i.B_.has(s)&&(await i.remoteSyncer.rejectListen(s,a),i.B_.delete(s),i.U_.removeTarget(s))}(t,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xy(t,r)}else if(e instanceof Yg?t.U_.$e(e):e instanceof x$?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(ut.min()))try{const r=await O$(t.localStore);n.compareTo(r)>=0&&await function(o,a){const s=o.U_.it(a);return s.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=o.B_.get(c);u&&o.B_.set(c,u.withResumeToken(l.resumeToken,a))}}),s.targetMismatches.forEach((l,c)=>{const u=o.B_.get(l);if(!u)return;o.B_.set(l,u.withResumeToken(fr.EMPTY_BYTE_STRING,u.snapshotVersion)),L$(o,l);const f=new ns(u.target,l,c,u.sequenceNumber);dM(o,f)}),o.remoteSyncer.applyRemoteEvent(s)}(t,n)}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),await Xy(t,r)}}async function Xy(t,e,n){if(!Kf(e))throw e;t.k_.add(1),await rm(t),t.K_.set("Offline"),n||(n=()=>O$(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Be("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await M_(t)})}function j$(t,e){return e().catch(n=>Xy(t,n,e))}async function P_(t){const e=pt(t),n=Rs(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;A2e(e);)try{const i=await c2e(e.localStore,r);if(i===null){e.L_.length===0&&n.a_();break}r=i.batchId,M2e(e,i)}catch(i){await Xy(e,i)}U$(e)&&F$(e)}function A2e(t){return oc(t)&&t.L_.length<10}function M2e(t,e){t.L_.push(e);const n=Rs(t);n.s_()&&n.f_&&n.g_(e.mutations)}function U$(t){return oc(t)&&!Rs(t).i_()&&t.L_.length>0}function F$(t){Rs(t).start()}async function P2e(t){Rs(t).w_()}async function C2e(t){const e=Rs(t);for(const n of t.L_)e.g_(n.mutations)}async function R2e(t,e,n){const r=t.L_.shift(),i=aM.from(r,e,n);await j$(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await P_(t)}async function O2e(t,e){e&&Rs(t).f_&&await async function(r,i){if(function(a){return gCe(a)&&a!==ve.ABORTED}(i.code)){const o=r.L_.shift();Rs(r).__(),await j$(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await P_(r)}}(t,e),U$(t)&&F$(t)}async function ZL(t,e){const n=pt(t);n.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=oc(n);n.k_.add(3),await rm(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await M_(n)}async function I2e(t,e){const n=pt(t);e?(n.k_.delete(2),await M_(n)):e||(n.k_.add(2),await rm(n),n.K_.set("Unknown"))}function Qf(t){return t.W_||(t.W_=function(n,r,i){const o=pt(n);return o.b_(),new v2e(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Ro:w2e.bind(null,t),mo:S2e.bind(null,t),po:E2e.bind(null,t),R_:T2e.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),mM(t)?pM(t):t.K_.set("Unknown")):(await t.W_.stop(),k$(t))})),t.W_}function Rs(t){return t.G_||(t.G_=function(n,r,i){const o=pt(n);return o.b_(),new y2e(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:P2e.bind(null,t),po:O2e.bind(null,t),p_:C2e.bind(null,t),y_:R2e.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await P_(t)):(await t.G_.stop(),t.L_.length>0&&(Be("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const a=Date.now()+r,s=new gM(e,n,a,i,o);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vM(t,e){if(Ea("AsyncQueue",`${e}: ${t}`),Kf(t))return new He(ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{static emptySet(e){return new Au(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Je.comparator(n.key,r.key):(n,r)=>Je.comparator(n.key,r.key),this.keyedMap=zh(),this.sortedSet=new pn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Au)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Au;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(){this.z_=new pn(Je.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):st():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class wf{constructor(e,n,r,i,o,a,s,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=s,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const a=[];return n.forEach(s=>{a.push({type:0,doc:s})}),new wf(e,n,Au.emptySet(n),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&b_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2e{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class D2e{constructor(){this.queries=ek(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=pt(n),o=i.queries;i.queries=ek(),o.forEach((a,s)=>{for(const l of s.J_)l.onError(r)})})(this,new He(ve.ABORTED,"Firestore shutting down"))}}function ek(){return new rc(t=>a$(t),b_)}async function L2e(t,e){const n=pt(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new N2e,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=await n.onListen(i,!0);break;case 1:o.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const s=vM(a,`Initialization of query '${Fc(e.query)}' failed`);return void e.onError(s)}n.queries.set(i,o),o.J_.push(e),e.ea(n.onlineState),o.H_&&e.ta(o.H_)&&yM(n)}async function k2e(t,e){const n=pt(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const a=o.J_.indexOf(e);a>=0&&(o.J_.splice(a,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function j2e(t,e){const n=pt(t);let r=!1;for(const i of e){const o=i.query,a=n.queries.get(o);if(a){for(const s of a.J_)s.ta(i)&&(r=!0);a.H_=i}}r&&yM(n)}function U2e(t,e,n){const r=pt(t),i=r.queries.get(e);if(i)for(const o of i.J_)o.onError(n);r.queries.delete(e)}function yM(t){t.X_.forEach(e=>{e.next()})}var tE,tk;(tk=tE||(tE={})).na="default",tk.Cache="cache";class F2e{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new wf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=wf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==tE.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(e){this.key=e}}class B${constructor(e){this.key=e}}class V2e{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Tt(),this.mutatedKeys=Tt(),this.Va=s$(e),this.ma=new Au(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new JL,i=n?n.ma:this.ma;let o=n?n.mutatedKeys:this.mutatedKeys,a=i,s=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{const h=i.get(u),d=w_(this.query,f)?f:null,v=!!h&&this.mutatedKeys.has(h.key),y=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let g=!1;h&&d?h.data.isEqual(d.data)?v!==y&&(r.track({type:3,doc:d}),g=!0):this.ya(h,d)||(r.track({type:2,doc:d}),g=!0,(l&&this.Va(d,l)>0||c&&this.Va(d,c)<0)&&(s=!0)):!h&&d?(r.track({type:0,doc:d}),g=!0):h&&!d&&(r.track({type:1,doc:h}),g=!0,(l||c)&&(s=!0)),g&&(d?(a=a.add(d),o=y?o.add(u):o.delete(u)):(a=a.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{ma:a,pa:r,ss:s,mutatedKeys:o}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const a=e.pa.j_();a.sort((u,f)=>function(d,v){const y=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return y(d)-y(v)}(u.type,f.type)||this.Va(u.doc,f.doc)),this.wa(r),i=i!=null&&i;const s=n&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,c=l!==this.Aa;return this.Aa=l,a.length!==0||c?{snapshot:new wf(this.query,e.ma,o,a,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:s}:{ba:s}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new JL,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Tt(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new B$(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new V$(r))}),n}va(e){this.da=e.ds,this.Ra=Tt();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return wf.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class B2e{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $2e{constructor(e){this.key=e,this.Fa=!1}}class z2e{constructor(e,n,r,i,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ma={},this.xa=new rc(s=>a$(s),b_),this.Oa=new Map,this.Na=new Set,this.La=new pn(Je.comparator),this.Ba=new Map,this.ka=new cM,this.qa={},this.Qa=new Map,this.Ka=bf.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function H2e(t,e,n=!0){const r=q$(t);let i;const o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=await $$(r,e,n,!0),i}async function G2e(t,e){const n=q$(t);await $$(n,e,!0,!1)}async function $$(t,e,n,r){const i=await u2e(t.localStore,Co(e)),o=i.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let s;return r&&(s=await W2e(t,e,o,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&D$(t.remoteStore,i),s}async function W2e(t,e,n,r,i){t.Ua=(f,h,d)=>async function(y,g,p,x){let _=g.view.ga(p);_.ss&&(_=await KL(y.localStore,g.query,!1).then(({documents:S})=>g.view.ga(S,_)));const E=x&&x.targetChanges.get(g.targetId),b=x&&x.targetMismatches.get(g.targetId)!=null,M=g.view.applyChanges(_,y.isPrimaryClient,E,b);return rk(y,g.targetId,M.ba),M.snapshot}(t,f,h,d);const o=await KL(t.localStore,e,!0),a=new V2e(e,o.ds),s=a.ga(o.documents),l=nm.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=a.applyChanges(s,t.isPrimaryClient,l);rk(t,n,c.ba);const u=new B2e(e,n,a);return t.xa.set(e,u),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),c.snapshot}async function q2e(t,e,n){const r=pt(t),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(a=>!b_(a,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await eE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&hM(r.remoteStore,i.targetId),nE(r,i.targetId)}).catch(Xf)):(nE(r,i.targetId),await eE(r.localStore,i.targetId,!0))}async function X2e(t,e){const n=pt(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hM(n.remoteStore,r.targetId))}async function K2e(t,e,n){const r=nRe(t);try{const i=await function(a,s){const l=pt(a),c=Bn.now(),u=s.reduce((d,v)=>d.add(v.key),Tt());let f,h;return l.persistence.runTransaction("Locally write mutations","readwrite",d=>{let v=Ta(),y=Tt();return l.hs.getEntries(d,u).next(g=>{v=g,v.forEach((p,x)=>{x.isValidDocument()||(y=y.add(p))})}).next(()=>l.localDocuments.getOverlayedDocuments(d,v)).next(g=>{f=g;const p=[];for(const x of s){const _=fCe(x,f.get(x.key).overlayedDocument);_!=null&&p.push(new ic(x.key,_,Q5(_.value.mapValue),da.exists(!0)))}return l.mutationQueue.addMutationBatch(d,c,p,s)}).next(g=>{h=g;const p=g.applyToLocalDocumentSet(f,y);return l.documentOverlayCache.saveOverlays(d,g.batchId,p)})}).then(()=>({batchId:h.batchId,changes:c$(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,s,l){let c=a.qa[a.currentUser.toKey()];c||(c=new pn(At)),c=c.insert(s,l),a.qa[a.currentUser.toKey()]=c}(r,i.batchId,n),await im(r,i.changes),await P_(r.remoteStore)}catch(i){const o=vM(i,"Failed to persist write");n.reject(o)}}async function z$(t,e){const n=pt(t);try{const r=await s2e(n.localStore,e);e.targetChanges.forEach((i,o)=>{const a=n.Ba.get(o);a&&(Ut(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.Fa=!0:i.modifiedDocuments.size>0?Ut(a.Fa):i.removedDocuments.size>0&&(Ut(a.Fa),a.Fa=!1))}),await im(n,r,e)}catch(r){await Xf(r)}}function nk(t,e,n){const r=pt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((o,a)=>{const s=a.view.ea(e);s.snapshot&&i.push(s.snapshot)}),function(a,s){const l=pt(a);l.onlineState=s;let c=!1;l.queries.forEach((u,f)=>{for(const h of f.J_)h.ea(s)&&(c=!0)}),c&&yM(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Y2e(t,e,n){const r=pt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),o=i&&i.key;if(o){let a=new pn(Je.comparator);a=a.insert(o,Tr.newNoDocument(o,ut.min()));const s=Tt().add(o),l=new T_(ut.min(),new Map,new pn(At),a,s);await z$(r,l),r.La=r.La.remove(o),r.Ba.delete(e),_M(r)}else await eE(r.localStore,e,!1).then(()=>nE(r,e,n)).catch(Xf)}async function Q2e(t,e){const n=pt(t),r=e.batch.batchId;try{const i=await a2e(n.localStore,e);G$(n,r,null),H$(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await im(n,i)}catch(i){await Xf(i)}}async function Z2e(t,e,n){const r=pt(t);try{const i=await function(a,s){const l=pt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,s).next(f=>(Ut(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,s)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);G$(r,e,n),H$(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await im(r,i)}catch(i){await Xf(i)}}function H$(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function G$(t,e,n){const r=pt(t);let i=r.qa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function nE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||W$(t,r)})}function W$(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(hM(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),_M(t))}function rk(t,e,n){for(const r of n)r instanceof V$?(t.ka.addReference(r.key,e),J2e(t,r)):r instanceof B$?(Be("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||W$(t,r.key)):st()}function J2e(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(Be("SyncEngine","New document in limbo: "+n),t.Na.add(r),_M(t))}function _M(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new Je(on.fromString(e)),r=t.Ka.next();t.Ba.set(r,new $2e(n)),t.La=t.La.insert(n,r),D$(t.remoteStore,new ns(Co(i$(n.path)),r,"TargetPurposeLimboResolution",y_.oe))}}async function im(t,e,n){const r=pt(t),i=[],o=[],a=[];r.xa.isEmpty()||(r.xa.forEach((s,l)=>{a.push(r.Ua(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=fM.zi(l.targetId,c);o.push(f)}}))}),await Promise.all(a),r.Ma.R_(i),await async function(l,c){const u=pt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>pe.forEach(c,h=>pe.forEach(h.Wi,d=>u.persistence.referenceDelegate.addReference(f,h.targetId,d)).next(()=>pe.forEach(h.Gi,d=>u.persistence.referenceDelegate.removeReference(f,h.targetId,d)))))}catch(f){if(!Kf(f))throw f;Be("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const h=f.targetId;if(!f.fromCache){const d=u.us.get(h),v=d.snapshotVersion,y=d.withLastLimboFreeSnapshotVersion(v);u.us=u.us.insert(h,y)}}}(r.localStore,o))}async function eRe(t,e){const n=pt(t);if(!n.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=await R$(n.localStore,e);n.currentUser=e,function(o,a){o.Qa.forEach(s=>{s.forEach(l=>{l.reject(new He(ve.CANCELLED,a))})}),o.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await im(n,r.Ts)}}function tRe(t,e){const n=pt(t),r=n.Ba.get(e);if(r&&r.Fa)return Tt().add(r.key);{let i=Tt();const o=n.Oa.get(e);if(!o)return i;for(const a of o){const s=n.xa.get(a);i=i.unionWith(s.view.fa)}return i}}function q$(t){const e=pt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=z$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tRe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Y2e.bind(null,e),e.Ma.R_=j2e.bind(null,e.eventManager),e.Ma.Wa=U2e.bind(null,e.eventManager),e}function nRe(t){const e=pt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q2e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Z2e.bind(null,e),e}class Ky{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=A_(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return o2e(this.persistence,new r2e,e.initialUser,this.serializer)}ja(e){return new C$(uM.ei,this.serializer)}za(e){return new h2e}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ky.provider={build:()=>new Ky};class rRe extends Ky{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Ut(this.persistence.referenceDelegate instanceof qy);const r=this.persistence.referenceDelegate.garbageCollector;return new $Ce(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?zr.withCacheSize(this.cacheSizeBytes):zr.DEFAULT;return new C$(r=>qy.ei(r,n),this.serializer)}}class rE{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eRe.bind(null,this.syncEngine),await I2e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new D2e}()}createDatastore(e){const n=A_(e.databaseInfo.databaseId),r=function(o){return new g2e(o)}(e.databaseInfo);return function(o,a,s,l){return new _2e(o,a,s,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,a,s){return new b2e(r,i,o,a,s)}(this.localStore,this.datastore,e.asyncQueue,n=>nk(this.syncEngine,n,0),function(){return QL.p()?new QL:new d2e}())}createSyncEngine(e,n){return function(i,o,a,s,l,c,u){const f=new z2e(i,o,a,s,l,c);return u&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=pt(i);Be("RemoteStore","RemoteStore shutting down."),o.k_.add(5),await rm(o),o.Q_.shutdown(),o.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}rE.provider={build:()=>new rE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iRe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Ea("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oRe{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=br.UNAUTHENTICATED,this.clientId=X5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{Be("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Be("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=vM(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ub(t,e){t.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await R$(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ik(t,e){t.asyncQueue.verifyOperationInProgress();const n=await aRe(t);Be("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ZL(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ZL(e.remoteStore,i)),t._onlineComponents=e}async function aRe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Be("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ub(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ve.FAILED_PRECONDITION||i.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;vf("Error using user provided cache. Falling back to memory cache: "+n),await Ub(t,new Ky)}}else Be("FirestoreClient","Using default OfflineComponentProvider"),await Ub(t,new rRe(void 0));return t._offlineComponents}async function X$(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Be("FirestoreClient","Using user provided OnlineComponentProvider"),await ik(t,t._uninitializedComponentsProvider._online)):(Be("FirestoreClient","Using default OnlineComponentProvider"),await ik(t,new rE))),t._onlineComponents}function sRe(t){return X$(t).then(e=>e.syncEngine)}async function lRe(t){const e=await X$(t),n=e.eventManager;return n.onListen=H2e.bind(null,e.syncEngine),n.onUnlisten=q2e.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=G2e.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=X2e.bind(null,e.syncEngine),n}function cRe(t,e,n={}){const r=new vs;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,s,l,c){const u=new iRe({next:h=>{u.eu(),a.enqueueAndForget(()=>k2e(o,f)),h.fromCache&&l.source==="server"?c.reject(new He(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),f=new F2e(s,u,{includeMetadataChanges:!0,ua:!0});return L2e(o,f)}(await lRe(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K$(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y$(t,e,n){if(!n)throw new He(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function uRe(t,e,n,r){if(e===!0&&r===!0)throw new He(ve.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ak(t){if(!Je.isDocumentKey(t))throw new He(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sk(t){if(Je.isDocumentKey(t))throw new He(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function C_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":st()}function Yy(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new He(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=C_(t);throw new He(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new He(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new He(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uRe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=K$((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new He(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new He(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new He(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class R_{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lk({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new He(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lk(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yPe;switch(r.type){case"firstParty":return new wPe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new He(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ok.get(n);r&&(Be("ComponentProvider","Removing Datastore"),ok.delete(n),r.terminate())}(this),Promise.resolve()}}function fRe(t,e,n,r={}){var i;const o=(t=Yy(t,R_))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&vf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let s,l;if(typeof r.mockUserToken=="string")s=r.mockUserToken,l=br.MOCK_USER;else{s=QAe(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new He(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new br(c)}t._authCredentials=new _Pe(new q5(s,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fs(this.firestore,e,this._query)}}class Li{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Li(this.firestore,e,this._key)}}class ys extends Fs{constructor(e,n,r){super(e,n,i$(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Li(this.firestore,null,new Je(e))}withConverter(e){return new ys(this.firestore,e,this._path)}}function Q$(t,e,...n){if(t=gf(t),Y$("collection","path",e),t instanceof R_){const r=on.fromString(e,...n);return sk(r),new ys(t,null,r)}{if(!(t instanceof Li||t instanceof ys))throw new He(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(on.fromString(e,...n));return sk(r),new ys(t.firestore,null,r)}}function hRe(t,e,...n){if(t=gf(t),arguments.length===1&&(e=X5.newId()),Y$("doc","path",e),t instanceof R_){const r=on.fromString(e,...n);return ak(r),new Li(t,null,new Je(r))}{if(!(t instanceof Li||t instanceof ys))throw new He(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(on.fromString(e,...n));return ak(r),new Li(t.firestore,t instanceof ys?t.converter:null,new Je(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new I$(this,"async_queue_retry"),this.fu=()=>{const r=jb();r&&Be("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=jb();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=jb();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new vs;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Kf(e))throw e;Be("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(a){let s=a.message||"";return a.stack&&(s=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),s}(r);throw Ea("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=gM.createAndSchedule(this,e,n,r,o=>this.Su(o));return this.du.push(i),i}pu(){this.Au&&st()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class xM extends R_{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ck,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ck(e),this._firestoreClient=void 0,await e}}}function dRe(t,e){const n=typeof t=="object"?t:aPe(),r=typeof t=="string"?t:"(default)",i=nPe(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=KAe("firestore");o&&fRe(i,...o)}return i}function Z$(t){if(t._terminated)throw new He(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pRe(t),t._firestoreClient}function pRe(t){var e,n,r;const i=t._freezeSettings(),o=function(s,l,c,u){return new jPe(s,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,K$(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new oRe(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(s){const l=s==null?void 0:s._online.build();return{_offline:s==null?void 0:s._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sf(fr.fromBase64String(e))}catch(n){throw new He(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Sf(fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new He(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new He(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new He(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mRe=/^__.*__$/;class gRe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ic(e,this.data,this.fieldMask,n,this.fieldTransforms):new tm(e,this.data,n,this.fieldTransforms)}}function ez(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class EM{constructor(e,n,r,i,o,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new EM(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Qy(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(ez(this.Mu)&&mRe.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class vRe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||A_(e)}$u(e,n,r,i=!1){return new EM({Mu:e,methodName:n,Ku:r,path:sr.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tz(t){const e=t._freezeSettings(),n=A_(t._databaseId);return new vRe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yRe(t,e,n,r,i,o={}){const a=t.$u(o.merge||o.mergeFields?2:0,e,n,i);iz("Data must be an object, but it was:",a,r);const s=nz(r,a);let l,c;if(o.merge)l=new no(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const u=[];for(const f of o.mergeFields){const h=xRe(e,f,n);if(!a.contains(h))throw new He(ve.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);wRe(u,h)||u.push(h)}l=new no(u),c=a.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=a.fieldTransforms;return new gRe(new Ri(s),l,c)}function _Re(t,e,n,r=!1){return TM(n,t.$u(r?4:3,e))}function TM(t,e){if(rz(t=gf(t)))return iz("Unsupported field value:",e,t),nz(t,e);if(t instanceof J$)return function(r,i){if(!ez(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const o=[];let a=0;for(const s of r){let l=TM(s,i.ku(a));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),a++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=gf(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oCe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Bn.fromDate(r);return{timestampValue:Wy(i.serializer,o)}}if(r instanceof Bn){const o=new Bn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wy(i.serializer,o)}}if(r instanceof wM)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Sf)return{bytesValue:w$(i.serializer,r._byteString)};if(r instanceof Li){const o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.qu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:lM(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof SM)return function(a,s){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw s.qu("VectorValues must only contain numeric values.");return oM(s.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${C_(r)}`)}(t,e)}function nz(t,e){const n={};return K5(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nc(t,(r,i)=>{const o=TM(i,e.Ou(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function rz(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Bn||t instanceof wM||t instanceof Sf||t instanceof Li||t instanceof J$||t instanceof SM)}function iz(t,e,n){if(!rz(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=C_(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function xRe(t,e,n){if((e=gf(e))instanceof bM)return e._internalPath;if(typeof e=="string")return oz(t,e);throw Qy("Field path arguments must be of type string or ",t,!1,void 0,n)}const bRe=new RegExp("[~\\*/\\[\\]]");function oz(t,e,n){if(e.search(bRe)>=0)throw Qy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bM(...e.split("."))._internalPath}catch{throw Qy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qy(t,e,n,r,i){const o=r&&!r.isEmpty(),a=i!==void 0;let s=`Function ${e}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new He(ve.INVALID_ARGUMENT,s+t+l)}function wRe(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Li(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SRe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(AM("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SRe extends az{data(){return super.data()}}function AM(t,e){return typeof e=="string"?oz(t,e):e instanceof bM?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ERe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new He(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class MM{}class PM extends MM{}function TRe(t,e,...n){let r=[];e instanceof MM&&r.push(e),r=r.concat(n),function(o){const a=o.filter(l=>l instanceof RM).length,s=o.filter(l=>l instanceof CM).length;if(a>1||a>0&&s>0)throw new He(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class CM extends PM{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new CM(e,n,r)}_apply(e){const n=this._parse(e);return sz(e._query,n),new Fs(e.firestore,e.converter,KS(e._query,n))}_parse(e){const n=tz(e.firestore);return function(o,a,s,l,c,u,f){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new He(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){fk(f,u);const d=[];for(const v of f)d.push(uk(l,o,v));h={arrayValue:{values:d}}}else h=uk(l,o,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||fk(f,u),h=_Re(s,a,f,u==="in"||u==="not-in");return On.create(c,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class RM extends MM{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new RM(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:uo.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let a=i;const s=o.getFlattenedFilters();for(const l of s)sz(a,l),a=KS(a,l)}(e._query,n),new Fs(e.firestore,e.converter,KS(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class OM extends PM{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new OM(e,n)}_apply(e){const n=function(i,o,a){if(i.startAt!==null)throw new He(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new He(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ip(o,a)}(e._query,this._field,this._direction);return new Fs(e.firestore,e.converter,function(i,o){const a=i.explicitOrderBy.concat([o]);return new Yf(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function ARe(t,e="asc"){const n=e,r=AM("orderBy",t);return OM._create(r,n)}class IM extends PM{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new IM(e,n,r)}_apply(e){return new Fs(e.firestore,e.converter,zy(e._query,this._limit,this._limitType))}}function MRe(t){return IM._create("limit",t,"F")}function uk(t,e,n){if(typeof(n=gf(n))=="string"){if(n==="")throw new He(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!o$(e)&&n.indexOf("/")!==-1)throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(on.fromString(n));if(!Je.isDocumentKey(r))throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return OL(t,new Je(r))}if(n instanceof Li)return OL(t,n._key);throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${C_(n)}.`)}function fk(t,e){if(!Array.isArray(t)||t.length===0)throw new He(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sz(t,e){const n=function(i,o){for(const a of i)for(const s of a.getFlattenedFilters())if(o.indexOf(s.op)>=0)return s.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new He(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new He(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class PRe{convertValue(e,n="none"){switch(Cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw st()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return nc(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>bn(a.doubleValue));return new SM(o)}convertGeoPoint(e){return new wM(bn(e.latitude),bn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=x_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Cp(e));default:return null}}convertTimestamp(e){const n=Ms(e);return new Bn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=on.fromString(e);Ut(P$(r));const i=new Rp(r.get(1),r.get(3)),o=new Je(r.popFirst(5));return i.isEqual(n)||Ea(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CRe(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class RRe extends az{constructor(e,n,r,i,o,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(AM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Qg extends RRe{data(e={}){return super.data(e)}}class ORe{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Pg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Qg(this._firestore,this._userDataWriter,r.key,r,new Pg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new He(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(s=>{const l=new Qg(i._firestore,i._userDataWriter,s.doc.key,s.doc,new Pg(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>o||s.type!==3).map(s=>{const l=new Qg(i._firestore,i._userDataWriter,s.doc.key,s.doc,new Pg(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return s.type!==0&&(c=a.indexOf(s.doc.key),a=a.delete(s.doc.key)),s.type!==1&&(a=a.add(s.doc),u=a.indexOf(s.doc.key)),{type:IRe(s.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function IRe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}class NRe extends PRe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sf(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Li(this.firestore,null,n)}}function DRe(t){t=Yy(t,Fs);const e=Yy(t.firestore,xM),n=Z$(e),r=new NRe(e);return ERe(t._query),cRe(n,t._query).then(i=>new ORe(e,r,t,i))}function LRe(t,e){const n=Yy(t.firestore,xM),r=hRe(t),i=CRe(t.converter,e);return kRe(n,[yRe(tz(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,da.exists(!1))]).then(()=>r)}function kRe(t,e){return function(r,i){const o=new vs;return r.asyncQueue.enqueueAndForget(async()=>K2e(await sRe(r),i,o)),o.promise}(Z$(t),e)}(function(e,n=!0){(function(i){qf=i})(oPe),Vy(new Ap("firestore",(r,{instanceIdentifier:i,options:o})=>{const a=r.getProvider("app").getImmediate(),s=new xM(new xPe(r.getProvider("auth-internal")),new EPe(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new He(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rp(c.options.projectId,u)}(a,i),a);return o=Object.assign({useFetchStreams:n},o),s._setSettings(o),s},"PUBLIC").setMultipleInstances(!0)),Tu(TL,"4.7.5",e),Tu(TL,"4.7.5","esm2017")})();const jRe={apiKey:"AIzaSyBQa_lv8rGDt-zK8EbazhZu3KdoK-FmQgE",authDomain:"globe-rating-system.firebaseapp.com",projectId:"globe-rating-system",storageBucket:"globe-rating-system.firebasestorage.app",messagingSenderId:"213598069837",appId:"1:213598069837:web:b59d5d3c5a79d0640aa804"},URe=U5(jRe),lz=dRe(URe),FRe=({isOpen:t,onClose:e})=>{const[n,r]=B.useState(0),[i,o]=B.useState(0),[a,s]=B.useState(""),[l,c]=B.useState(""),[u,f]=B.useState(!1),h=async d=>{if(d.preventDefault(),!n||n<1||n>5){alert("Por favor selecciona una calificacin vlida");return}if(!a.trim()||a.length<2){alert("Por favor ingresa un nombre vlido");return}if(!l.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)){alert("Por favor ingresa un email vlido");return}const v=localStorage.getItem("lastRating");if(v&&Date.now()-parseInt(v)<24*60*60*1e3){alert("Solo puedes enviar una valoracin por da");return}try{await LRe(Q$(lz,"ratings"),{name:a,email:l,rating:n,timestamp:new Date,url:window.location.href}),localStorage.setItem("lastRating",Date.now().toString()),f(!0),setTimeout(()=>{f(!1),e(),r(0),s(""),c("")},2e3)}catch(y){console.error("Error:",y),alert("Hubo un error al enviar tu valoracin")}};return t?w.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:w.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-black w-full max-w-md m-4 rounded-xl shadow-2xl relative border border-gray-800",children:[w.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:w.jsx(Ma,{size:24})}),u?w.jsxs("div",{className:"p-6 text-center",children:[w.jsx("div",{className:"text-6xl mb-4",children:""}),w.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Gracias por tu valoracin!"}),w.jsx("p",{className:"text-gray-400",children:"Tu opinin nos ayuda a mejorar"})]}):w.jsxs("div",{className:"p-6",children:[w.jsx("h2",{className:"text-2xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Valora tu Experiencia"}),w.jsxs("form",{onSubmit:h,className:"space-y-6",children:[w.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(d=>w.jsx("button",{type:"button",className:"transform transition-all duration-300 hover:scale-110",onMouseEnter:()=>o(d),onMouseLeave:()=>o(0),onClick:()=>r(d),children:w.jsx(su,{size:32,className:`${d<=(i||n)?"fill-yellow-400 text-yellow-400":"text-gray-600"} transition-colors duration-300`})},d))}),w.jsxs("div",{className:"space-y-4",children:[w.jsx("input",{type:"text",placeholder:"Tu nombre",value:a,onChange:d=>s(d.target.value),className:"w-full px-4 py-2 bg-black/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-white"}),w.jsx("input",{type:"email",placeholder:"Tu correo electrnico",value:l,onChange:d=>c(d.target.value),className:"w-full px-4 py-2 bg-black/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-white"})]}),w.jsx("button",{type:"submit",className:"w-full py-3 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg font-semibold hover:opacity-90 transition-opacity text-white",children:"Enviar Valoracin"})]})]})]})}):null},VRe=({isVisible:t,onClose:e})=>{const[n,r]=B.useState([]),[i,o]=B.useState({totalVotes:0,averageRating:0,lastWeekVotes:0,distribution:{1:0,2:0,3:0,4:0,5:0}});B.useEffect(()=>{t&&a()},[t]);const a=async()=>{try{const s=Q$(lz,"ratings"),l=TRe(s,ARe("timestamp","desc"),MRe(100)),c=await DRe(l),u=[];let f=0,h=0;const d={1:0,2:0,3:0,4:0,5:0},v=new Date(Date.now()-7*24*60*60*1e3);let y=0;c.forEach(g=>{var _,E;const p=g.data(),x=Number(p.rating);!isNaN(x)&&x>=1&&x<=5&&(f+=x,h++,d[x]++,(((_=p.timestamp)==null?void 0:_.toDate())||new Date)>v&&y++),u.push({id:g.id,...p,timestamp:((E=p.timestamp)==null?void 0:E.toDate())||new Date,rating:x})}),r(u),o({totalVotes:h,averageRating:h>0?f/h:0,lastWeekVotes:y,distribution:d})}catch(s){console.error("Error fetching ratings:",s),o({totalVotes:0,averageRating:0,lastWeekVotes:0,distribution:{1:0,2:0,3:0,4:0,5:0}})}};return t?w.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:w.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-black w-full max-w-6xl m-4 rounded-xl shadow-2xl relative border border-gray-800 max-h-[90vh] overflow-hidden",children:[w.jsx("div",{className:"sticky top-0 z-10 bg-gradient-to-br from-gray-900 to-black p-6 border-b border-gray-800",children:w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx(su,{className:"w-8 h-8 text-yellow-400"}),w.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Valoraciones y Opiniones"})]}),w.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-800 rounded-lg transition-colors",children:w.jsx(Ma,{size:24,className:"text-gray-400"})})]})}),w.jsxs("div",{className:"p-6 space-y-8 overflow-y-auto max-h-[calc(90vh-80px)]",children:[w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[w.jsx("div",{className:"bg-black/40 p-6 rounded-xl border border-blue-500/30",children:w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx(lw,{className:"w-8 h-8 text-blue-400"}),w.jsxs("div",{children:[w.jsx("p",{className:"text-sm text-gray-400",children:"Total Valoraciones"}),w.jsx("p",{className:"text-3xl font-bold text-white",children:i.totalVotes})]})]})}),w.jsx("div",{className:"bg-black/40 p-6 rounded-xl border border-yellow-500/30",children:w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx(su,{className:"w-8 h-8 text-yellow-400"}),w.jsxs("div",{children:[w.jsx("p",{className:"text-sm text-gray-400",children:"Calificacin Promedio"}),w.jsx("p",{className:"text-3xl font-bold text-white",children:i.averageRating?i.averageRating.toFixed(1):"0.0"})]})]})}),w.jsx("div",{className:"bg-black/40 p-6 rounded-xl border border-green-500/30",children:w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx(kJ,{className:"w-8 h-8 text-green-400"}),w.jsxs("div",{children:[w.jsx("p",{className:"text-sm text-gray-400",children:"ltima Semana"}),w.jsx("p",{className:"text-3xl font-bold text-white",children:i.lastWeekVotes})]})]})})]}),w.jsxs("div",{className:"bg-black/40 p-6 rounded-xl border border-gray-800",children:[w.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Distribucin de Estrellas"}),w.jsx("div",{className:"space-y-3",children:[5,4,3,2,1].map(s=>{const l=i.distribution[s]||0,c=i.totalVotes>0?l/i.totalVotes*100:0;return w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsxs("div",{className:"flex items-center gap-1 w-20",children:[w.jsx(su,{className:"w-4 h-4 text-yellow-400",fill:"currentColor"}),w.jsx("span",{className:"text-gray-400",children:s})]}),w.jsx("div",{className:"flex-1 h-4 bg-gray-800 rounded-full overflow-hidden",children:w.jsx("div",{className:"h-full bg-yellow-400/50 transition-all duration-500",style:{width:`${c}%`}})}),w.jsx("div",{className:"w-32 text-right",children:w.jsxs("span",{className:"text-gray-400",children:[l," (",c.toFixed(1),"%)"]})})]},s)})})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsx("h3",{className:"text-xl font-bold text-white",children:"Valoraciones Recientes"}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(s=>w.jsx("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800",children:w.jsx("div",{className:"flex justify-between items-start",children:w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[w.jsx("span",{className:"font-medium text-white",children:s.name}),w.jsx("span",{className:"text-sm text-gray-500",children:s.timestamp.toLocaleDateString()})]}),w.jsx("div",{className:"flex gap-1 mb-2",children:[...Array(5)].map((l,c)=>w.jsx(su,{size:16,className:c<s.rating?"text-yellow-400 fill-yellow-400":"text-gray-600"},c))}),w.jsx("p",{className:"text-sm text-gray-400",children:s.email})]})})},s.id))})]})]})]})}):null},BRe=({isMobile:t,onToggleMenu:e,setShowGlobal:n,setShowSimulation:r,setShowPredictions:i,setShowGlobalPredictions:o,setShowDictionary:a,setShowEducational:s,setIsRatingModalOpen:l})=>{const[c,u]=B.useState(!1),[f,h]=B.useState(!1);B.useEffect(()=>{const y=setInterval(()=>{c||(h(!0),setTimeout(()=>h(!1),1e3))},5e3);return()=>clearInterval(y)},[c]);const d=()=>{u(!c),e&&e(!c)},v=y=>{y(!0),u(!1)};return w.jsxs("div",{className:"fixed z-50 left-4 bottom-4",children:[w.jsxs("button",{onClick:d,className:`
          relative flex items-center justify-center 
          w-16 h-16 rounded-full 
          bg-gradient-to-r from-blue-500 to-purple-600
          text-white shadow-lg 
          hover:from-blue-600 hover:to-purple-700
          transition-all duration-300
          ${f?"animate-pulse scale-110":""}
          group
        `,"aria-label":"Men de opciones",children:[c?w.jsx(Ma,{size:28}):w.jsx(HJ,{size:28}),!c&&w.jsx("div",{className:"absolute left-20 hidden group-hover:flex items-center",children:w.jsx("div",{className:"bg-black/90 text-white px-3 py-2 rounded-lg whitespace-nowrap text-sm",children:"Click para ver opciones"})}),!c&&w.jsx("div",{className:"absolute inset-0 rounded-full",children:w.jsx("div",{className:"absolute inset-0 rounded-full bg-white/30 animate-ping"})})]}),c&&w.jsxs("div",{className:`
          absolute left-0 bottom-20 py-2 w-72
          bg-gradient-to-br from-black/95 to-gray-900/95
          backdrop-blur-lg rounded-2xl shadow-2xl
          border border-gray-700/50
          transform transition-all duration-300 ease-in-out
        `,children:[w.jsx("div",{className:"absolute -bottom-2 left-6 w-4 h-4 bg-gray-900 transform rotate-45"}),w.jsxs("button",{onClick:()=>v(n),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[w.jsx(zd,{size:20,className:"text-blue-400"}),w.jsx("span",{children:"Estadsticas Globales"})]}),w.jsxs("button",{onClick:()=>v(r),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[w.jsx(Bu,{size:20,className:"text-green-400"}),w.jsx("span",{children:"Simulador"})]}),w.jsxs("button",{onClick:()=>v(i),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[w.jsx(UJ,{size:20,className:"text-purple-400"}),w.jsx("span",{children:"Predicciones"})]}),w.jsxs("button",{onClick:()=>v(o),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[w.jsx(zd,{size:20,className:"text-cyan-400"}),w.jsx("span",{children:"Predicciones Globales"})]}),w.jsxs("button",{onClick:()=>v(a),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[w.jsx(FJ,{size:20,className:"text-indigo-400"}),w.jsx("span",{children:"Fuente de datos"})]}),w.jsxs("button",{onClick:()=>v(s),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[w.jsx(jF,{size:20,className:"text-green-500"}),w.jsx("span",{children:"Gua del Proyecto"})]}),w.jsxs("button",{onClick:()=>v(l),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[w.jsx(su,{size:20,className:"text-yellow-400"}),w.jsx("span",{children:"Valorar Experiencia"})]})]})]})},$Re=({country:t,isMobile:e})=>w.jsxs("div",{className:`fixed ${e?"top-16 left-2":"top-24 left-4"} z-50`,children:[w.jsxs("div",{className:"flex flex-col items-center gap-2",children:[w.jsx("div",{className:`flag-container ${e?"w-32 h-20":"w-40 h-24"} relative overflow-hidden rounded-lg shadow-lg`,children:w.jsx("div",{className:"flag-static w-full h-full",style:{background:`url(https://flagcdn.com/w160/${t.code.toLowerCase()}.png) no-repeat center center`,backgroundSize:"contain",backgroundColor:"#f0f0f0"}})}),w.jsx("div",{className:"text-content",children:w.jsx("h1",{className:`text-white ${e?"text-2xl":"text-3xl"} font-bold tracking-wider bg-black bg-opacity-50 px-4 py-2 rounded text-center`,children:t.name})})]}),w.jsx("style",{jsx:!0,children:`
                .flag-container {
                    transform-style: preserve-3d;
                    perspective: 1000px;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                }

                .flag-container::after {
                    content: '';
                    position: absolute;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    background: linear-gradient(
                        45deg,
                        rgba(0,0,0,0.2) 0%,
                        rgba(0,0,0,0) 70%
                    );
                    pointer-events: none;
                    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
                }
            `})]}),zRe=()=>{const t=B.useRef(null),[e,n]=B.useState(null),r=B.useRef(null),i=B.useRef(null),o=B.useRef([]),[a,s]=B.useState(1e-4),[l,c]=B.useState(!0),[u,f]=B.useState(!1),[h,d]=B.useState(!1),[v,y]=B.useState(!1),[g,p]=B.useState(!1),[x,_]=B.useState(!1),[E,b]=B.useState(!1),[M,S]=B.useState(!0),[A,T]=B.useState(!1),[P,R]=B.useState(!1),N=B.useRef({x:0,y:0}),I=B.useRef(!1),D=B.useRef(null),L=K2({maxWidth:768}),q=K2({minWidth:769,maxWidth:1024}),$=B.useCallback(()=>L?{earthRadius:3,cameraDistance:10,markerSize:.05,minDistance:5,maxDistance:15,starCount:5e3,starSize:.08}:q?{earthRadius:4,cameraDistance:12,markerSize:.08,minDistance:6,maxDistance:20,starCount:7500,starSize:.09}:{earthRadius:5,cameraDistance:15,markerSize:.1,minDistance:7,maxDistance:25,starCount:1e4,starSize:.1},[L,q]);B.useEffect(()=>{var Q;const K=$(),z=new Qj;z.background=new Rt(0);const W=new si(L?60:75,window.innerWidth/window.innerHeight,.1,1e3),ee=new lT({antialias:!L,alpha:!0,powerPreference:"high-performance"});ee.setSize(window.innerWidth,window.innerHeight),ee.setPixelRatio(L?1:window.devicePixelRatio),(Q=t.current)==null||Q.appendChild(ee.domElement);const me=new Lo,_e=new Zj({color:16777215,size:K.starSize,transparent:!0,opacity:1,sizeAttenuation:!0}),Ne=[];for(let le=0;le<K.starCount;le++){const ue=(Math.random()-.5)*2e3,ne=(Math.random()-.5)*2e3,ge=(Math.random()-.5)*2e3;Ne.push(ue,ne,ge)}me.setAttribute("position",new Di(Ne,3));const We=new Float32Array(Ne.length/3);for(let le=0;le<We.length;le++)We[le]=Math.random()*Math.PI*2;me.setAttribute("blinkOffset",new Di(We,1));const Ue=new dX(me,_e);z.add(Ue);const fe=new Jj,Re=new gX(fe),Ee=L?"2k":"8k",H=Re.load(`textures/${Ee}_earth_daymap.jpg`),lt=Re.load(`textures/${Ee}_earth_nightmap.jpg`),be=Re.load(`textures/${Ee}_earth_normal_map.tif`),Le=Re.load(`textures/${Ee}_earth_clouds.jpg`);H.colorSpace=jn,lt.colorSpace=jn;const ke=new _a({uniforms:{dayTexture:{value:H},nightTexture:{value:lt},normalMap:{value:be},sunDirection:{value:new te(1,0,0)},normalScale:{value:new gt(.5,.5)}},vertexShader:`
                varying vec2 vUv;
                varying vec3 vNormal;
                varying vec3 vPosition;

                void main() {
                    vUv = uv;
                    vNormal = normalize(normalMatrix * normal);
                    vPosition = position;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                }
            `,fragmentShader:`
                uniform sampler2D dayTexture;
                uniform sampler2D nightTexture;
                uniform sampler2D normalMap;
                uniform vec3 sunDirection;
                uniform vec2 normalScale;

                varying vec2 vUv;
                varying vec3 vNormal;

                void main() {
                    vec3 normalMap = texture2D(normalMap, vUv).xyz * 2.0 - 1.0;
                    vec3 mixNormal = normalize(vNormal + normalMap.xyz * vec3(normalScale, 1.0));

                    float sunDot = dot(mixNormal, sunDirection);
                    float dayMix = smoothstep(-0.2, 0.2, sunDot);

                    vec4 dayColor = texture2D(dayTexture, vUv);
                    vec4 nightColor = texture2D(nightTexture, vUv);

                    gl_FragColor = mix(nightColor, dayColor, dayMix);
                }
            `}),mt=new pl(K.earthRadius,L?64:128,L?64:128),Ye=new Gr(mt,ke);i.current=Ye,z.add(Ye);const Ze=new pl(K.earthRadius*1.006,L?64:128,L?64:128),ht=new L2({map:Le,transparent:!0,opacity:.4,depthWrite:!1,blending:I1}),Mt=new Gr(Ze,ht);z.add(Mt);const jt=new pl(K.earthRadius*1.03,L?64:128,L?64:128),F=new L2({color:9681119,transparent:!0,opacity:.15,side:Vr}),k=new Gr(jt,F);z.add(k);const re=new jh;z.add(re),o.current=[];function ye(le,ue,ne){const ge=(90-le)*(Math.PI/180),Ie=(ue+180)*(Math.PI/180);return new te(-ne*Math.sin(ge)*Math.cos(Ie),ne*Math.cos(ge),ne*Math.sin(ge)*Math.sin(Ie))}sK.countries.forEach(le=>{const ue=new pl(K.markerSize,L?8:16,L?8:16),ne=new iT({color:65280,transparent:!0,opacity:.6}),ge=new Gr(ue,ne),Ie=ye(le.lat,le.lng,K.earthRadius*1.02);ge.position.copy(Ie),ge.userData.countryData=le,re.add(ge),o.current.push(ge)});const he=new xX(4210752,L?.7:.6);z.add(he);const xe=new _X(16777215,L?1:1.2);xe.position.set(5,3,5),z.add(xe),W.position.z=K.cameraDistance;const Ce=new tU(W,ee.domElement);r.current=Ce,Ce.enableDamping=!0,Ce.dampingFactor=L?.07:.05,Ce.rotateSpeed=L?.5:.3,Ce.enableZoom=!0,Ce.minDistance=K.minDistance,Ce.maxDistance=K.maxDistance,Ce.autoRotate=l,Ce.autoRotateSpeed=L?.3:.5,Ce.enablePan=!1,Ce.minPolarAngle=Math.PI*.2,Ce.maxPolarAngle=Math.PI*.8,Ce.touches={ONE:Ha.ROTATE,TWO:Ha.DOLLY_ROTATE};const Te=new bX,Pe=new gt,Y=le=>{le.preventDefault(),I.current=!0;const ue=le.touches[0];N.current={x:ue.clientX,y:ue.clientY,time:Date.now()},D.current&&clearTimeout(D.current)},Se=le=>{I.current&&(le.preventDefault(),r.current&&(r.current.autoRotate=!1))},de=le=>{le.preventDefault();const ue=le.changedTouches[0],ne=N.current.time,Ie=Date.now()-ne,rt=Math.abs(ue.clientX-N.current.x),Ot=Math.abs(ue.clientY-N.current.y),En=Math.sqrt(rt*rt+Ot*Ot);if(Ie<200&&En<10){const dt=ue.clientX,Tn=ue.clientY;Pe.x=dt/window.innerWidth*2-1,Pe.y=-(Tn/window.innerHeight)*2+1,Te.setFromCamera(Pe,W);const Dn=Te.intersectObjects(o.current,!0);if(Dn.length>0){const vi=Dn[0].object.userData.countryData;vi&&(n(vi),Ge(vi,W,Ce))}}D.current=setTimeout(()=>{r.current&&l&&(r.current.autoRotate=!0)},1500),I.current=!1},Qe=le=>{le.preventDefault();const ue=le.clientX,ne=le.clientY;Pe.x=ue/window.innerWidth*2-1,Pe.y=-(ne/window.innerHeight)*2+1,Te.setFromCamera(Pe,W);const ge=Te.intersectObjects(o.current,!0);if(ge.length>0){const Ie=ge[0].object.userData.countryData;Ie&&(n(Ie),Ge(Ie,W,Ce))}},Ge=(le,ue,ne)=>{ne.autoRotate=!1;const ge=ye(le.lat,le.lng,K.earthRadius),Ie=L?K.earthRadius+2:K.earthRadius+4,rt=ye(le.lat,le.lng,Ie);new TX(ue.position).to({x:rt.x,y:rt.y,z:rt.z},L?1e3:1500).easing(bu.Cubic.InOut).onUpdate(()=>{ue.lookAt(ge),ne.target.copy(ge)}).start(),o.current.forEach(Ot=>{const En=Ot.userData.countryData.code===le.code;Ot.material.color.setHex(En?16711680:65280),Ot.material.opacity=En?1:.6})},qe=()=>{const le=window.innerWidth,ue=window.innerHeight;W.aspect=le/ue,W.updateProjectionMatrix(),ee.setSize(le,ue);const ne=$();W.position.z=ne.cameraDistance,Ce.minDistance=ne.minDistance,Ce.maxDistance=ne.maxDistance};L?(ee.domElement.addEventListener("touchstart",Y,{passive:!1}),ee.domElement.addEventListener("touchmove",Se,{passive:!1}),ee.domElement.addEventListener("touchend",de,{passive:!1}),ee.domElement.style.touchAction="none"):window.addEventListener("click",Qe),window.addEventListener("resize",qe,{passive:!0}),window.addEventListener("orientationchange",qe);let Ve=0,De=null;const vt=()=>{if(De=requestAnimationFrame(vt),Ve+=L?8e-4:.001,!L||Ve%2===0){const ne=Ue.geometry.attributes.position,ge=Ue.geometry.attributes.blinkOffset;for(let Ie=0;Ie<ne.count;Ie++){const rt=Math.sin(Ve*3+ge.array[Ie])*.3+.7;Ue.material.opacity=rt}}Ue.rotation.y+=L?5e-5:1e-4,Ue.rotation.x+=L?5e-5:1e-4;const le=Math.cos(Ve),ue=Math.sin(Ve);if(ke.uniforms.sunDirection.value.set(le,0,ue),xe.position.set(le*5,3,ue*5),l){const ne=L?a*.75:a;Ye.rotation.y+=ne,Mt.rotation.y+=ne*1.1,k.rotation.y+=ne,re.rotation.y+=ne}AX(),Ce.update(),ee.render(z,W)};return vt(),()=>{De&&cancelAnimationFrame(De),L?(ee.domElement.removeEventListener("touchstart",Y),ee.domElement.removeEventListener("touchmove",Se),ee.domElement.removeEventListener("touchend",de),D.current&&clearTimeout(D.current)):window.removeEventListener("click",Qe),window.removeEventListener("resize",qe),window.removeEventListener("orientationchange",qe),z.traverse(le=>{le instanceof Gr&&(le.geometry.dispose(),le.material.map&&le.material.map.dispose(),le.material.dispose())}),ee.dispose(),t.current&&t.current.contains(ee.domElement)&&t.current.removeChild(ee.domElement)}},[L,q,l,a,$]);const V=K=>{const z=L?5e-5:1e-4;s(W=>W+K*z)},X=()=>{c(K=>!K)};return w.jsxs("div",{className:"relative w-full h-screen overflow-hidden select-none",children:[w.jsx("div",{ref:t,className:"w-full h-screen bg-black touch-manipulation",style:{cursor:L?"default":"grab",overscrollBehavior:"none",WebkitTapHighlightColor:"transparent"}}),w.jsx(tee,{isMobile:L}),e&&w.jsx($Re,{country:e,isMobile:L}),w.jsx(JJ,{onPause:X,isPlaying:l,isMobile:L,onSpeedChange:V}),w.jsx(nee,{isMobile:L}),w.jsx(BRe,{isMobile:L,setShowGlobal:f,setShowSimulation:d,setShowPredictions:y,setShowGlobalPredictions:p,setShowDictionary:b,setShowEducational:_,setIsRatingModalOpen:R}),w.jsx(RAe,{isVisible:u,onClose:()=>f(!1),isMobile:L,className:`fixed transition-all duration-300 ease-in-out ${L?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),w.jsx(OAe,{isVisible:h,onClose:()=>d(!1),isMobile:L,className:`fixed transition-all duration-300 ease-in-out ${L?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),w.jsx(IAe,{isVisible:v,onClose:()=>y(!1),isMobile:L,className:`fixed transition-all duration-300 ease-in-out ${L?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),w.jsx(DAe,{isVisible:g,onClose:()=>p(!1),isMobile:L,className:`fixed transition-all duration-300 ease-in-out ${L?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),w.jsx(kAe,{isVisible:x,onClose:()=>_(!1),isMobile:L,className:`fixed transition-all duration-300 ease-in-out ${L?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),w.jsx(jAe,{isVisible:E,onClose:()=>b(!1),isMobile:L,className:`fixed transition-all duration-300 ease-in-out ${L?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),w.jsx(FRe,{isOpen:P,onClose:()=>R(!1),isMobile:L,className:L?"w-[90vw] max-w-sm mx-auto":"w-96"}),w.jsx(VRe,{isVisible:A,onClose:()=>T(!1),isMobile:L,className:`fixed transition-all duration-300 ease-in-out ${L?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),M&&w.jsx(FAe,{onComplete:()=>S(!1),isMobile:L}),e&&w.jsx(CAe,{country:e,controlsRef:r,onClose:()=>{n(null),r.current&&(r.current.autoRotate=!0)},isMobile:L,className:`fixed transition-all duration-300 ease-in-out ${L?"inset-x-0 bottom-0 h-[70vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`})]})};function HRe(){return w.jsx("div",{className:"w-full h-full",children:w.jsx(zRe,{})})}Fb.createRoot(document.getElementById("root")).render(w.jsx(G.StrictMode,{children:w.jsx(HRe,{})}));
