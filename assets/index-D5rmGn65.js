(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var vm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ft(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hk={exports:{}},Jy={},dk={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kp=Symbol.for("react.element"),Sz=Symbol.for("react.portal"),Ez=Symbol.for("react.fragment"),Tz=Symbol.for("react.strict_mode"),Az=Symbol.for("react.profiler"),Mz=Symbol.for("react.provider"),Pz=Symbol.for("react.context"),Cz=Symbol.for("react.forward_ref"),Rz=Symbol.for("react.suspense"),Oz=Symbol.for("react.memo"),Iz=Symbol.for("react.lazy"),aP=Symbol.iterator;function Nz(t){return t===null||typeof t!="object"?null:(t=aP&&t[aP]||t["@@iterator"],typeof t=="function"?t:null)}var pk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mk=Object.assign,gk={};function Tf(t,e,n){this.props=t,this.context=e,this.refs=gk,this.updater=n||pk}Tf.prototype.isReactComponent={};Tf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Tf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vk(){}vk.prototype=Tf.prototype;function oE(t,e,n){this.props=t,this.context=e,this.refs=gk,this.updater=n||pk}var aE=oE.prototype=new vk;aE.constructor=oE;mk(aE,Tf.prototype);aE.isPureReactComponent=!0;var sP=Array.isArray,yk=Object.prototype.hasOwnProperty,sE={current:null},_k={key:!0,ref:!0,__self:!0,__source:!0};function xk(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)yk.call(e,r)&&!_k.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:kp,type:t,key:o,ref:a,props:i,_owner:sE.current}}function Dz(t,e){return{$$typeof:kp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lE(t){return typeof t=="object"&&t!==null&&t.$$typeof===kp}function Lz(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var lP=/\/+/g;function U_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Lz(""+t.key):e.toString(36)}function Rg(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case kp:case Sz:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+U_(a,0):r,sP(i)?(n="",t!=null&&(n=t.replace(lP,"$&/")+"/"),Rg(i,e,n,"",function(c){return c})):i!=null&&(lE(i)&&(i=Dz(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(lP,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",sP(t))for(var s=0;s<t.length;s++){o=t[s];var l=r+U_(o,s);a+=Rg(o,e,n,l,i)}else if(l=Nz(t),typeof l=="function")for(t=l.call(t),s=0;!(o=t.next()).done;)o=o.value,l=r+U_(o,s++),a+=Rg(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ym(t,e,n){if(t==null)return t;var r=[],i=0;return Rg(t,r,"","",function(o){return e.call(n,o,i++)}),r}function kz(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Br={current:null},Og={transition:null},jz={ReactCurrentDispatcher:Br,ReactCurrentBatchConfig:Og,ReactCurrentOwner:sE};function bk(){throw Error("act(...) is not supported in production builds of React.")}Et.Children={map:ym,forEach:function(t,e,n){ym(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ym(t,function(){e++}),e},toArray:function(t){return ym(t,function(e){return e})||[]},only:function(t){if(!lE(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Et.Component=Tf;Et.Fragment=Ez;Et.Profiler=Az;Et.PureComponent=oE;Et.StrictMode=Tz;Et.Suspense=Rz;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jz;Et.act=bk;Et.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=mk({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=sE.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)yk.call(e,l)&&!_k.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:kp,type:t.type,key:i,ref:o,props:r,_owner:a}};Et.createContext=function(t){return t={$$typeof:Pz,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Mz,_context:t},t.Consumer=t};Et.createElement=xk;Et.createFactory=function(t){var e=xk.bind(null,t);return e.type=t,e};Et.createRef=function(){return{current:null}};Et.forwardRef=function(t){return{$$typeof:Cz,render:t}};Et.isValidElement=lE;Et.lazy=function(t){return{$$typeof:Iz,_payload:{_status:-1,_result:t},_init:kz}};Et.memo=function(t,e){return{$$typeof:Oz,type:t,compare:e===void 0?null:e}};Et.startTransition=function(t){var e=Og.transition;Og.transition={};try{t()}finally{Og.transition=e}};Et.unstable_act=bk;Et.useCallback=function(t,e){return Br.current.useCallback(t,e)};Et.useContext=function(t){return Br.current.useContext(t)};Et.useDebugValue=function(){};Et.useDeferredValue=function(t){return Br.current.useDeferredValue(t)};Et.useEffect=function(t,e){return Br.current.useEffect(t,e)};Et.useId=function(){return Br.current.useId()};Et.useImperativeHandle=function(t,e,n){return Br.current.useImperativeHandle(t,e,n)};Et.useInsertionEffect=function(t,e){return Br.current.useInsertionEffect(t,e)};Et.useLayoutEffect=function(t,e){return Br.current.useLayoutEffect(t,e)};Et.useMemo=function(t,e){return Br.current.useMemo(t,e)};Et.useReducer=function(t,e,n){return Br.current.useReducer(t,e,n)};Et.useRef=function(t){return Br.current.useRef(t)};Et.useState=function(t){return Br.current.useState(t)};Et.useSyncExternalStore=function(t,e,n){return Br.current.useSyncExternalStore(t,e,n)};Et.useTransition=function(){return Br.current.useTransition()};Et.version="18.3.1";dk.exports=Et;var V=dk.exports;const G=Ft(V);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uz=V,Fz=Symbol.for("react.element"),Vz=Symbol.for("react.fragment"),Bz=Object.prototype.hasOwnProperty,$z=Uz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zz={key:!0,ref:!0,__self:!0,__source:!0};function wk(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Bz.call(e,r)&&!zz.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Fz,type:t,key:o,ref:a,props:i,_owner:$z.current}}Jy.Fragment=Vz;Jy.jsx=wk;Jy.jsxs=wk;hk.exports=Jy;var S=hk.exports,Vb={},Sk={exports:{}},mi={},Ek={exports:{}},Tk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,X){var K=B.length;B.push(X);e:for(;0<K;){var z=K-1>>>1,q=B[z];if(0<i(q,X))B[z]=X,B[K]=q,K=z;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var X=B[0],K=B.pop();if(K!==X){B[0]=K;e:for(var z=0,q=B.length,ee=q>>>1;z<ee;){var me=2*(z+1)-1,_e=B[me],Ne=me+1,We=B[Ne];if(0>i(_e,K))Ne<q&&0>i(We,_e)?(B[z]=We,B[Ne]=K,z=Ne):(B[z]=_e,B[me]=K,z=me);else if(Ne<q&&0>i(We,K))B[z]=We,B[Ne]=K,z=Ne;else break e}}return X}function i(B,X){var K=B.sortIndex-X.sortIndex;return K!==0?K:B.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var l=[],c=[],u=1,f=null,h=3,d=!1,v=!1,y=!1,g=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(B){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=B)r(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(c)}}function T(B){if(y=!1,_(B),!v)if(n(l)!==null)v=!0,W(w);else{var X=n(c);X!==null&&$(T,X.startTime-B)}}function w(B,X){v=!1,y&&(y=!1,p(A),A=-1),d=!0;var K=h;try{for(_(X),f=n(l);f!==null&&(!(f.expirationTime>X)||B&&!R());){var z=f.callback;if(typeof z=="function"){f.callback=null,h=f.priorityLevel;var q=z(f.expirationTime<=X);X=t.unstable_now(),typeof q=="function"?f.callback=q:f===n(l)&&r(l),_(X)}else r(l);f=n(l)}if(f!==null)var ee=!0;else{var me=n(c);me!==null&&$(T,me.startTime-X),ee=!1}return ee}finally{f=null,h=K,d=!1}}var M=!1,b=null,A=-1,E=5,P=-1;function R(){return!(t.unstable_now()-P<E)}function N(){if(b!==null){var B=t.unstable_now();P=B;var X=!0;try{X=b(!0,B)}finally{X?O():(M=!1,b=null)}}else M=!1}var O;if(typeof x=="function")O=function(){x(N)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,L=D.port2;D.port1.onmessage=N,O=function(){L.postMessage(null)}}else O=function(){g(N,0)};function W(B){b=B,M||(M=!0,O())}function $(B,X){A=g(function(){B(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){v||d||(v=!0,W(w))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(h){case 1:case 2:case 3:var X=3;break;default:X=h}var K=h;h=X;try{return B()}finally{h=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,X){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=h;h=B;try{return X()}finally{h=K}},t.unstable_scheduleCallback=function(B,X,K){var z=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?z+K:z):K=z,B){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=K+q,B={id:u++,callback:X,priorityLevel:B,startTime:K,expirationTime:q,sortIndex:-1},K>z?(B.sortIndex=K,e(c,B),n(l)===null&&B===n(c)&&(y?(p(A),A=-1):y=!0,$(T,K-z))):(B.sortIndex=q,e(l,B),v||d||(v=!0,W(w))),B},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(B){var X=h;return function(){var K=h;h=X;try{return B.apply(this,arguments)}finally{h=K}}}})(Tk);Ek.exports=Tk;var Hz=Ek.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gz=V,di=Hz;function we(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ak=new Set,_d={};function Xl(t,e){Pu(t,e),Pu(t+"Capture",e)}function Pu(t,e){for(_d[t]=e,t=0;t<e.length;t++)Ak.add(e[t])}var ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bb=Object.prototype.hasOwnProperty,Wz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cP={},uP={};function qz(t){return Bb.call(uP,t)?!0:Bb.call(cP,t)?!1:Wz.test(t)?uP[t]=!0:(cP[t]=!0,!1)}function Xz(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Kz(t,e,n,r){if(e===null||typeof e>"u"||Xz(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $r(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var ur={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ur[t]=new $r(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ur[e]=new $r(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ur[t]=new $r(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ur[t]=new $r(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ur[t]=new $r(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ur[t]=new $r(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ur[t]=new $r(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ur[t]=new $r(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ur[t]=new $r(t,5,!1,t.toLowerCase(),null,!1,!1)});var cE=/[\-:]([a-z])/g;function uE(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cE,uE);ur[e]=new $r(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cE,uE);ur[e]=new $r(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cE,uE);ur[e]=new $r(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ur[t]=new $r(t,1,!1,t.toLowerCase(),null,!1,!1)});ur.xlinkHref=new $r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ur[t]=new $r(t,1,!1,t.toLowerCase(),null,!0,!0)});function fE(t,e,n,r){var i=ur.hasOwnProperty(e)?ur[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Kz(e,n,i,r)&&(n=null),r||i===null?qz(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ma=Gz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_m=Symbol.for("react.element"),zc=Symbol.for("react.portal"),Hc=Symbol.for("react.fragment"),hE=Symbol.for("react.strict_mode"),$b=Symbol.for("react.profiler"),Mk=Symbol.for("react.provider"),Pk=Symbol.for("react.context"),dE=Symbol.for("react.forward_ref"),zb=Symbol.for("react.suspense"),Hb=Symbol.for("react.suspense_list"),pE=Symbol.for("react.memo"),za=Symbol.for("react.lazy"),Ck=Symbol.for("react.offscreen"),fP=Symbol.iterator;function uh(t){return t===null||typeof t!="object"?null:(t=fP&&t[fP]||t["@@iterator"],typeof t=="function"?t:null)}var dn=Object.assign,F_;function Nh(t){if(F_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);F_=e&&e[1]||""}return`
`+F_+t}var V_=!1;function B_(t,e){if(!t||V_)return"";V_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=s);break}}}finally{V_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Nh(t):""}function Yz(t){switch(t.tag){case 5:return Nh(t.type);case 16:return Nh("Lazy");case 13:return Nh("Suspense");case 19:return Nh("SuspenseList");case 0:case 2:case 15:return t=B_(t.type,!1),t;case 11:return t=B_(t.type.render,!1),t;case 1:return t=B_(t.type,!0),t;default:return""}}function Gb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hc:return"Fragment";case zc:return"Portal";case $b:return"Profiler";case hE:return"StrictMode";case zb:return"Suspense";case Hb:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pk:return(t.displayName||"Context")+".Consumer";case Mk:return(t._context.displayName||"Context")+".Provider";case dE:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case pE:return e=t.displayName||null,e!==null?e:Gb(t.type)||"Memo";case za:e=t._payload,t=t._init;try{return Gb(t(e))}catch{}}return null}function Qz(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gb(e);case 8:return e===hE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Zz(t){var e=Rk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xm(t){t._valueTracker||(t._valueTracker=Zz(t))}function Ok(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Rk(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Jg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wb(t,e){var n=e.checked;return dn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function hP(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ik(t,e){e=e.checked,e!=null&&fE(t,"checked",e,!1)}function qb(t,e){Ik(t,e);var n=xs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xb(t,e.type,n):e.hasOwnProperty("defaultValue")&&Xb(t,e.type,xs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Xb(t,e,n){(e!=="number"||Jg(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Dh=Array.isArray;function pu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Kb(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(we(91));return dn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(we(92));if(Dh(n)){if(1<n.length)throw Error(we(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xs(n)}}function Nk(t,e){var n=xs(e.value),r=xs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function mP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Dk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yb(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Dk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bm,Lk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bm=bm||document.createElement("div"),bm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jz=["Webkit","ms","Moz","O"];Object.keys(Wh).forEach(function(t){Jz.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wh[e]=Wh[t]})});function kk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wh.hasOwnProperty(t)&&Wh[t]?(""+e).trim():e+"px"}function jk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=kk(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var e6=dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qb(t,e){if(e){if(e6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(we(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(we(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(we(61))}if(e.style!=null&&typeof e.style!="object")throw Error(we(62))}}function Zb(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jb=null;function mE(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var e1=null,mu=null,gu=null;function gP(t){if(t=Fp(t)){if(typeof e1!="function")throw Error(we(280));var e=t.stateNode;e&&(e=i0(e),e1(t.stateNode,t.type,e))}}function Uk(t){mu?gu?gu.push(t):gu=[t]:mu=t}function Fk(){if(mu){var t=mu,e=gu;if(gu=mu=null,gP(t),e)for(t=0;t<e.length;t++)gP(e[t])}}function Vk(t,e){return t(e)}function Bk(){}var $_=!1;function $k(t,e,n){if($_)return t(e,n);$_=!0;try{return Vk(t,e,n)}finally{$_=!1,(mu!==null||gu!==null)&&(Bk(),Fk())}}function bd(t,e){var n=t.stateNode;if(n===null)return null;var r=i0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(we(231,e,typeof n));return n}var t1=!1;if(ma)try{var fh={};Object.defineProperty(fh,"passive",{get:function(){t1=!0}}),window.addEventListener("test",fh,fh),window.removeEventListener("test",fh,fh)}catch{t1=!1}function t6(t,e,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var qh=!1,ev=null,tv=!1,n1=null,n6={onError:function(t){qh=!0,ev=t}};function r6(t,e,n,r,i,o,a,s,l){qh=!1,ev=null,t6.apply(n6,arguments)}function i6(t,e,n,r,i,o,a,s,l){if(r6.apply(this,arguments),qh){if(qh){var c=ev;qh=!1,ev=null}else throw Error(we(198));tv||(tv=!0,n1=c)}}function Kl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vP(t){if(Kl(t)!==t)throw Error(we(188))}function o6(t){var e=t.alternate;if(!e){if(e=Kl(t),e===null)throw Error(we(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return vP(i),t;if(o===r)return vP(i),e;o=o.sibling}throw Error(we(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(we(189))}}if(n.alternate!==r)throw Error(we(190))}if(n.tag!==3)throw Error(we(188));return n.stateNode.current===n?t:e}function Hk(t){return t=o6(t),t!==null?Gk(t):null}function Gk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gk(t);if(e!==null)return e;t=t.sibling}return null}var Wk=di.unstable_scheduleCallback,yP=di.unstable_cancelCallback,a6=di.unstable_shouldYield,s6=di.unstable_requestPaint,wn=di.unstable_now,l6=di.unstable_getCurrentPriorityLevel,gE=di.unstable_ImmediatePriority,qk=di.unstable_UserBlockingPriority,nv=di.unstable_NormalPriority,c6=di.unstable_LowPriority,Xk=di.unstable_IdlePriority,e0=null,wo=null;function u6(t){if(wo&&typeof wo.onCommitFiberRoot=="function")try{wo.onCommitFiberRoot(e0,t,void 0,(t.current.flags&128)===128)}catch{}}var io=Math.clz32?Math.clz32:d6,f6=Math.log,h6=Math.LN2;function d6(t){return t>>>=0,t===0?32:31-(f6(t)/h6|0)|0}var wm=64,Sm=4194304;function Lh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rv(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=Lh(s):(o&=a,o!==0&&(r=Lh(o)))}else a=n&~i,a!==0?r=Lh(a):o!==0&&(r=Lh(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-io(e),i=1<<n,r|=t[n],e&=~i;return r}function p6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m6(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-io(o),s=1<<a,l=i[a];l===-1?(!(s&n)||s&r)&&(i[a]=p6(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}function r1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Kk(){var t=wm;return wm<<=1,!(wm&4194240)&&(wm=64),t}function z_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function jp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-io(e),t[e]=n}function g6(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-io(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function vE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-io(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Bt=0;function Yk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Qk,yE,Zk,Jk,e3,i1=!1,Em=[],is=null,os=null,as=null,wd=new Map,Sd=new Map,Xa=[],v6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _P(t,e){switch(t){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":wd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sd.delete(e.pointerId)}}function hh(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Fp(e),e!==null&&yE(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function y6(t,e,n,r,i){switch(e){case"focusin":return is=hh(is,t,e,n,r,i),!0;case"dragenter":return os=hh(os,t,e,n,r,i),!0;case"mouseover":return as=hh(as,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return wd.set(o,hh(wd.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Sd.set(o,hh(Sd.get(o)||null,t,e,n,r,i)),!0}return!1}function t3(t){var e=hl(t.target);if(e!==null){var n=Kl(e);if(n!==null){if(e=n.tag,e===13){if(e=zk(n),e!==null){t.blockedOn=e,e3(t.priority,function(){Zk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ig(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=o1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jb=r,n.target.dispatchEvent(r),Jb=null}else return e=Fp(n),e!==null&&yE(e),t.blockedOn=n,!1;e.shift()}return!0}function xP(t,e,n){Ig(t)&&n.delete(e)}function _6(){i1=!1,is!==null&&Ig(is)&&(is=null),os!==null&&Ig(os)&&(os=null),as!==null&&Ig(as)&&(as=null),wd.forEach(xP),Sd.forEach(xP)}function dh(t,e){t.blockedOn===e&&(t.blockedOn=null,i1||(i1=!0,di.unstable_scheduleCallback(di.unstable_NormalPriority,_6)))}function Ed(t){function e(i){return dh(i,t)}if(0<Em.length){dh(Em[0],t);for(var n=1;n<Em.length;n++){var r=Em[n];r.blockedOn===t&&(r.blockedOn=null)}}for(is!==null&&dh(is,t),os!==null&&dh(os,t),as!==null&&dh(as,t),wd.forEach(e),Sd.forEach(e),n=0;n<Xa.length;n++)r=Xa[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xa.length&&(n=Xa[0],n.blockedOn===null);)t3(n),n.blockedOn===null&&Xa.shift()}var vu=Ma.ReactCurrentBatchConfig,iv=!0;function x6(t,e,n,r){var i=Bt,o=vu.transition;vu.transition=null;try{Bt=1,_E(t,e,n,r)}finally{Bt=i,vu.transition=o}}function b6(t,e,n,r){var i=Bt,o=vu.transition;vu.transition=null;try{Bt=4,_E(t,e,n,r)}finally{Bt=i,vu.transition=o}}function _E(t,e,n,r){if(iv){var i=o1(t,e,n,r);if(i===null)J_(t,e,r,ov,n),_P(t,r);else if(y6(i,t,e,n,r))r.stopPropagation();else if(_P(t,r),e&4&&-1<v6.indexOf(t)){for(;i!==null;){var o=Fp(i);if(o!==null&&Qk(o),o=o1(t,e,n,r),o===null&&J_(t,e,r,ov,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else J_(t,e,r,null,n)}}var ov=null;function o1(t,e,n,r){if(ov=null,t=mE(r),t=hl(t),t!==null)if(e=Kl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ov=t,null}function n3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(l6()){case gE:return 1;case qk:return 4;case nv:case c6:return 16;case Xk:return 536870912;default:return 16}default:return 16}}var Qa=null,xE=null,Ng=null;function r3(){if(Ng)return Ng;var t,e=xE,n=e.length,r,i="value"in Qa?Qa.value:Qa.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return Ng=i.slice(t,1<r?1-r:void 0)}function Dg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Tm(){return!0}function bP(){return!1}function gi(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Tm:bP,this.isPropagationStopped=bP,this}return dn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Tm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Tm)},persist:function(){},isPersistent:Tm}),e}var Af={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bE=gi(Af),Up=dn({},Af,{view:0,detail:0}),w6=gi(Up),H_,G_,ph,t0=dn({},Up,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wE,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ph&&(ph&&t.type==="mousemove"?(H_=t.screenX-ph.screenX,G_=t.screenY-ph.screenY):G_=H_=0,ph=t),H_)},movementY:function(t){return"movementY"in t?t.movementY:G_}}),wP=gi(t0),S6=dn({},t0,{dataTransfer:0}),E6=gi(S6),T6=dn({},Up,{relatedTarget:0}),W_=gi(T6),A6=dn({},Af,{animationName:0,elapsedTime:0,pseudoElement:0}),M6=gi(A6),P6=dn({},Af,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),C6=gi(P6),R6=dn({},Af,{data:0}),SP=gi(R6),O6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=N6[t])?!!e[t]:!1}function wE(){return D6}var L6=dn({},Up,{key:function(t){if(t.key){var e=O6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?I6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wE,charCode:function(t){return t.type==="keypress"?Dg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),k6=gi(L6),j6=dn({},t0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),EP=gi(j6),U6=dn({},Up,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wE}),F6=gi(U6),V6=dn({},Af,{propertyName:0,elapsedTime:0,pseudoElement:0}),B6=gi(V6),$6=dn({},t0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),z6=gi($6),H6=[9,13,27,32],SE=ma&&"CompositionEvent"in window,Xh=null;ma&&"documentMode"in document&&(Xh=document.documentMode);var G6=ma&&"TextEvent"in window&&!Xh,i3=ma&&(!SE||Xh&&8<Xh&&11>=Xh),TP=" ",AP=!1;function o3(t,e){switch(t){case"keyup":return H6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gc=!1;function W6(t,e){switch(t){case"compositionend":return a3(e);case"keypress":return e.which!==32?null:(AP=!0,TP);case"textInput":return t=e.data,t===TP&&AP?null:t;default:return null}}function q6(t,e){if(Gc)return t==="compositionend"||!SE&&o3(t,e)?(t=r3(),Ng=xE=Qa=null,Gc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return i3&&e.locale!=="ko"?null:e.data;default:return null}}var X6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function MP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!X6[t.type]:e==="textarea"}function s3(t,e,n,r){Uk(r),e=av(e,"onChange"),0<e.length&&(n=new bE("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Kh=null,Td=null;function K6(t){y3(t,0)}function n0(t){var e=Xc(t);if(Ok(e))return t}function Y6(t,e){if(t==="change")return e}var l3=!1;if(ma){var q_;if(ma){var X_="oninput"in document;if(!X_){var PP=document.createElement("div");PP.setAttribute("oninput","return;"),X_=typeof PP.oninput=="function"}q_=X_}else q_=!1;l3=q_&&(!document.documentMode||9<document.documentMode)}function CP(){Kh&&(Kh.detachEvent("onpropertychange",c3),Td=Kh=null)}function c3(t){if(t.propertyName==="value"&&n0(Td)){var e=[];s3(e,Td,t,mE(t)),$k(K6,e)}}function Q6(t,e,n){t==="focusin"?(CP(),Kh=e,Td=n,Kh.attachEvent("onpropertychange",c3)):t==="focusout"&&CP()}function Z6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return n0(Td)}function J6(t,e){if(t==="click")return n0(e)}function e9(t,e){if(t==="input"||t==="change")return n0(e)}function t9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var lo=typeof Object.is=="function"?Object.is:t9;function Ad(t,e){if(lo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Bb.call(e,i)||!lo(t[i],e[i]))return!1}return!0}function RP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function OP(t,e){var n=RP(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=RP(n)}}function u3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?u3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function f3(){for(var t=window,e=Jg();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Jg(t.document)}return e}function EE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function n9(t){var e=f3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&u3(n.ownerDocument.documentElement,n)){if(r!==null&&EE(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=OP(n,o);var a=OP(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var r9=ma&&"documentMode"in document&&11>=document.documentMode,Wc=null,a1=null,Yh=null,s1=!1;function IP(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;s1||Wc==null||Wc!==Jg(r)||(r=Wc,"selectionStart"in r&&EE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yh&&Ad(Yh,r)||(Yh=r,r=av(a1,"onSelect"),0<r.length&&(e=new bE("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wc)))}function Am(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qc={animationend:Am("Animation","AnimationEnd"),animationiteration:Am("Animation","AnimationIteration"),animationstart:Am("Animation","AnimationStart"),transitionend:Am("Transition","TransitionEnd")},K_={},h3={};ma&&(h3=document.createElement("div").style,"AnimationEvent"in window||(delete qc.animationend.animation,delete qc.animationiteration.animation,delete qc.animationstart.animation),"TransitionEvent"in window||delete qc.transitionend.transition);function r0(t){if(K_[t])return K_[t];if(!qc[t])return t;var e=qc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in h3)return K_[t]=e[n];return t}var d3=r0("animationend"),p3=r0("animationiteration"),m3=r0("animationstart"),g3=r0("transitionend"),v3=new Map,NP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(t,e){v3.set(t,e),Xl(e,[t])}for(var Y_=0;Y_<NP.length;Y_++){var Q_=NP[Y_],i9=Q_.toLowerCase(),o9=Q_[0].toUpperCase()+Q_.slice(1);Is(i9,"on"+o9)}Is(d3,"onAnimationEnd");Is(p3,"onAnimationIteration");Is(m3,"onAnimationStart");Is("dblclick","onDoubleClick");Is("focusin","onFocus");Is("focusout","onBlur");Is(g3,"onTransitionEnd");Pu("onMouseEnter",["mouseout","mouseover"]);Pu("onMouseLeave",["mouseout","mouseover"]);Pu("onPointerEnter",["pointerout","pointerover"]);Pu("onPointerLeave",["pointerout","pointerover"]);Xl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a9=new Set("cancel close invalid load scroll toggle".split(" ").concat(kh));function DP(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,i6(r,e,void 0,t),t.currentTarget=null}function y3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;DP(i,s,c),o=l}else for(a=0;a<r.length;a++){if(s=r[a],l=s.instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;DP(i,s,c),o=l}}}if(tv)throw t=n1,tv=!1,n1=null,t}function en(t,e){var n=e[h1];n===void 0&&(n=e[h1]=new Set);var r=t+"__bubble";n.has(r)||(_3(e,t,2,!1),n.add(r))}function Z_(t,e,n){var r=0;e&&(r|=4),_3(n,t,r,e)}var Mm="_reactListening"+Math.random().toString(36).slice(2);function Md(t){if(!t[Mm]){t[Mm]=!0,Ak.forEach(function(n){n!=="selectionchange"&&(a9.has(n)||Z_(n,!1,t),Z_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Mm]||(e[Mm]=!0,Z_("selectionchange",!1,e))}}function _3(t,e,n,r){switch(n3(e)){case 1:var i=x6;break;case 4:i=b6;break;default:i=_E}n=i.bind(null,e,n,t),i=void 0,!t1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function J_(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=hl(s),a===null)return;if(l=a.tag,l===5||l===6){r=o=a;continue e}s=s.parentNode}}r=r.return}$k(function(){var c=o,u=mE(n),f=[];e:{var h=v3.get(t);if(h!==void 0){var d=bE,v=t;switch(t){case"keypress":if(Dg(n)===0)break e;case"keydown":case"keyup":d=k6;break;case"focusin":v="focus",d=W_;break;case"focusout":v="blur",d=W_;break;case"beforeblur":case"afterblur":d=W_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=wP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=E6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=F6;break;case d3:case p3:case m3:d=M6;break;case g3:d=B6;break;case"scroll":d=w6;break;case"wheel":d=z6;break;case"copy":case"cut":case"paste":d=C6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=EP}var y=(e&4)!==0,g=!y&&t==="scroll",p=y?h!==null?h+"Capture":null:h;y=[];for(var x=c,_;x!==null;){_=x;var T=_.stateNode;if(_.tag===5&&T!==null&&(_=T,p!==null&&(T=bd(x,p),T!=null&&y.push(Pd(x,T,_)))),g)break;x=x.return}0<y.length&&(h=new d(h,v,null,n,u),f.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==Jb&&(v=n.relatedTarget||n.fromElement)&&(hl(v)||v[ga]))break e;if((d||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,d?(v=n.relatedTarget||n.toElement,d=c,v=v?hl(v):null,v!==null&&(g=Kl(v),v!==g||v.tag!==5&&v.tag!==6)&&(v=null)):(d=null,v=c),d!==v)){if(y=wP,T="onMouseLeave",p="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=EP,T="onPointerLeave",p="onPointerEnter",x="pointer"),g=d==null?h:Xc(d),_=v==null?h:Xc(v),h=new y(T,x+"leave",d,n,u),h.target=g,h.relatedTarget=_,T=null,hl(u)===c&&(y=new y(p,x+"enter",v,n,u),y.target=_,y.relatedTarget=g,T=y),g=T,d&&v)t:{for(y=d,p=v,x=0,_=y;_;_=pc(_))x++;for(_=0,T=p;T;T=pc(T))_++;for(;0<x-_;)y=pc(y),x--;for(;0<_-x;)p=pc(p),_--;for(;x--;){if(y===p||p!==null&&y===p.alternate)break t;y=pc(y),p=pc(p)}y=null}else y=null;d!==null&&LP(f,h,d,y,!1),v!==null&&g!==null&&LP(f,g,v,y,!0)}}e:{if(h=c?Xc(c):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var w=Y6;else if(MP(h))if(l3)w=e9;else{w=Z6;var M=Q6}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=J6);if(w&&(w=w(t,c))){s3(f,w,n,u);break e}M&&M(t,h,c),t==="focusout"&&(M=h._wrapperState)&&M.controlled&&h.type==="number"&&Xb(h,"number",h.value)}switch(M=c?Xc(c):window,t){case"focusin":(MP(M)||M.contentEditable==="true")&&(Wc=M,a1=c,Yh=null);break;case"focusout":Yh=a1=Wc=null;break;case"mousedown":s1=!0;break;case"contextmenu":case"mouseup":case"dragend":s1=!1,IP(f,n,u);break;case"selectionchange":if(r9)break;case"keydown":case"keyup":IP(f,n,u)}var b;if(SE)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Gc?o3(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(i3&&n.locale!=="ko"&&(Gc||A!=="onCompositionStart"?A==="onCompositionEnd"&&Gc&&(b=r3()):(Qa=u,xE="value"in Qa?Qa.value:Qa.textContent,Gc=!0)),M=av(c,A),0<M.length&&(A=new SP(A,t,null,n,u),f.push({event:A,listeners:M}),b?A.data=b:(b=a3(n),b!==null&&(A.data=b)))),(b=G6?W6(t,n):q6(t,n))&&(c=av(c,"onBeforeInput"),0<c.length&&(u=new SP("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=b))}y3(f,e)})}function Pd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function av(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=bd(t,n),o!=null&&r.unshift(Pd(t,o,i)),o=bd(t,e),o!=null&&r.push(Pd(t,o,i))),t=t.return}return r}function pc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function LP(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&c!==null&&(s=c,i?(l=bd(n,o),l!=null&&a.unshift(Pd(n,l,s))):i||(l=bd(n,o),l!=null&&a.push(Pd(n,l,s)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var s9=/\r\n?/g,l9=/\u0000|\uFFFD/g;function kP(t){return(typeof t=="string"?t:""+t).replace(s9,`
`).replace(l9,"")}function Pm(t,e,n){if(e=kP(e),kP(t)!==e&&n)throw Error(we(425))}function sv(){}var l1=null,c1=null;function u1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var f1=typeof setTimeout=="function"?setTimeout:void 0,c9=typeof clearTimeout=="function"?clearTimeout:void 0,jP=typeof Promise=="function"?Promise:void 0,u9=typeof queueMicrotask=="function"?queueMicrotask:typeof jP<"u"?function(t){return jP.resolve(null).then(t).catch(f9)}:f1;function f9(t){setTimeout(function(){throw t})}function ex(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ed(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ed(e)}function ss(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function UP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Mf=Math.random().toString(36).slice(2),_o="__reactFiber$"+Mf,Cd="__reactProps$"+Mf,ga="__reactContainer$"+Mf,h1="__reactEvents$"+Mf,h9="__reactListeners$"+Mf,d9="__reactHandles$"+Mf;function hl(t){var e=t[_o];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ga]||n[_o]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=UP(t);t!==null;){if(n=t[_o])return n;t=UP(t)}return e}t=n,n=t.parentNode}return null}function Fp(t){return t=t[_o]||t[ga],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(we(33))}function i0(t){return t[Cd]||null}var d1=[],Kc=-1;function Ns(t){return{current:t}}function an(t){0>Kc||(t.current=d1[Kc],d1[Kc]=null,Kc--)}function Yt(t,e){Kc++,d1[Kc]=t.current,t.current=e}var bs={},Pr=Ns(bs),Xr=Ns(!1),Dl=bs;function Cu(t,e){var n=t.type.contextTypes;if(!n)return bs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Kr(t){return t=t.childContextTypes,t!=null}function lv(){an(Xr),an(Pr)}function FP(t,e,n){if(Pr.current!==bs)throw Error(we(168));Yt(Pr,e),Yt(Xr,n)}function x3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(we(108,Qz(t)||"Unknown",i));return dn({},n,r)}function cv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bs,Dl=Pr.current,Yt(Pr,t),Yt(Xr,Xr.current),!0}function VP(t,e,n){var r=t.stateNode;if(!r)throw Error(we(169));n?(t=x3(t,e,Dl),r.__reactInternalMemoizedMergedChildContext=t,an(Xr),an(Pr),Yt(Pr,t)):an(Xr),Yt(Xr,n)}var Qo=null,o0=!1,tx=!1;function b3(t){Qo===null?Qo=[t]:Qo.push(t)}function p9(t){o0=!0,b3(t)}function Ds(){if(!tx&&Qo!==null){tx=!0;var t=0,e=Bt;try{var n=Qo;for(Bt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qo=null,o0=!1}catch(i){throw Qo!==null&&(Qo=Qo.slice(t+1)),Wk(gE,Ds),i}finally{Bt=e,tx=!1}}return null}var Yc=[],Qc=0,uv=null,fv=0,Ti=[],Ai=0,Ll=null,Jo=1,ea="";function el(t,e){Yc[Qc++]=fv,Yc[Qc++]=uv,uv=t,fv=e}function w3(t,e,n){Ti[Ai++]=Jo,Ti[Ai++]=ea,Ti[Ai++]=Ll,Ll=t;var r=Jo;t=ea;var i=32-io(r)-1;r&=~(1<<i),n+=1;var o=32-io(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Jo=1<<32-io(e)+i|n<<i|r,ea=o+t}else Jo=1<<o|n<<i|r,ea=t}function TE(t){t.return!==null&&(el(t,1),w3(t,1,0))}function AE(t){for(;t===uv;)uv=Yc[--Qc],Yc[Qc]=null,fv=Yc[--Qc],Yc[Qc]=null;for(;t===Ll;)Ll=Ti[--Ai],Ti[Ai]=null,ea=Ti[--Ai],Ti[Ai]=null,Jo=Ti[--Ai],Ti[Ai]=null}var ui=null,ci=null,ln=!1,Zi=null;function S3(t,e){var n=Oi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function BP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ui=t,ci=ss(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ui=t,ci=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ll!==null?{id:Jo,overflow:ea}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Oi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ui=t,ci=null,!0):!1;default:return!1}}function p1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function m1(t){if(ln){var e=ci;if(e){var n=e;if(!BP(t,e)){if(p1(t))throw Error(we(418));e=ss(n.nextSibling);var r=ui;e&&BP(t,e)?S3(r,n):(t.flags=t.flags&-4097|2,ln=!1,ui=t)}}else{if(p1(t))throw Error(we(418));t.flags=t.flags&-4097|2,ln=!1,ui=t}}}function $P(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ui=t}function Cm(t){if(t!==ui)return!1;if(!ln)return $P(t),ln=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!u1(t.type,t.memoizedProps)),e&&(e=ci)){if(p1(t))throw E3(),Error(we(418));for(;e;)S3(t,e),e=ss(e.nextSibling)}if($P(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(we(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ci=ss(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ci=null}}else ci=ui?ss(t.stateNode.nextSibling):null;return!0}function E3(){for(var t=ci;t;)t=ss(t.nextSibling)}function Ru(){ci=ui=null,ln=!1}function ME(t){Zi===null?Zi=[t]:Zi.push(t)}var m9=Ma.ReactCurrentBatchConfig;function mh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(we(309));var r=n.stateNode}if(!r)throw Error(we(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(we(284));if(!n._owner)throw Error(we(290,t))}return t}function Rm(t,e){throw t=Object.prototype.toString.call(e),Error(we(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zP(t){var e=t._init;return e(t._payload)}function T3(t){function e(p,x){if(t){var _=p.deletions;_===null?(p.deletions=[x],p.flags|=16):_.push(x)}}function n(p,x){if(!t)return null;for(;x!==null;)e(p,x),x=x.sibling;return null}function r(p,x){for(p=new Map;x!==null;)x.key!==null?p.set(x.key,x):p.set(x.index,x),x=x.sibling;return p}function i(p,x){return p=fs(p,x),p.index=0,p.sibling=null,p}function o(p,x,_){return p.index=_,t?(_=p.alternate,_!==null?(_=_.index,_<x?(p.flags|=2,x):_):(p.flags|=2,x)):(p.flags|=1048576,x)}function a(p){return t&&p.alternate===null&&(p.flags|=2),p}function s(p,x,_,T){return x===null||x.tag!==6?(x=lx(_,p.mode,T),x.return=p,x):(x=i(x,_),x.return=p,x)}function l(p,x,_,T){var w=_.type;return w===Hc?u(p,x,_.props.children,T,_.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===za&&zP(w)===x.type)?(T=i(x,_.props),T.ref=mh(p,x,_),T.return=p,T):(T=Bg(_.type,_.key,_.props,null,p.mode,T),T.ref=mh(p,x,_),T.return=p,T)}function c(p,x,_,T){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=cx(_,p.mode,T),x.return=p,x):(x=i(x,_.children||[]),x.return=p,x)}function u(p,x,_,T,w){return x===null||x.tag!==7?(x=Tl(_,p.mode,T,w),x.return=p,x):(x=i(x,_),x.return=p,x)}function f(p,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=lx(""+x,p.mode,_),x.return=p,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case _m:return _=Bg(x.type,x.key,x.props,null,p.mode,_),_.ref=mh(p,null,x),_.return=p,_;case zc:return x=cx(x,p.mode,_),x.return=p,x;case za:var T=x._init;return f(p,T(x._payload),_)}if(Dh(x)||uh(x))return x=Tl(x,p.mode,_,null),x.return=p,x;Rm(p,x)}return null}function h(p,x,_,T){var w=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return w!==null?null:s(p,x,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case _m:return _.key===w?l(p,x,_,T):null;case zc:return _.key===w?c(p,x,_,T):null;case za:return w=_._init,h(p,x,w(_._payload),T)}if(Dh(_)||uh(_))return w!==null?null:u(p,x,_,T,null);Rm(p,_)}return null}function d(p,x,_,T,w){if(typeof T=="string"&&T!==""||typeof T=="number")return p=p.get(_)||null,s(x,p,""+T,w);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case _m:return p=p.get(T.key===null?_:T.key)||null,l(x,p,T,w);case zc:return p=p.get(T.key===null?_:T.key)||null,c(x,p,T,w);case za:var M=T._init;return d(p,x,_,M(T._payload),w)}if(Dh(T)||uh(T))return p=p.get(_)||null,u(x,p,T,w,null);Rm(x,T)}return null}function v(p,x,_,T){for(var w=null,M=null,b=x,A=x=0,E=null;b!==null&&A<_.length;A++){b.index>A?(E=b,b=null):E=b.sibling;var P=h(p,b,_[A],T);if(P===null){b===null&&(b=E);break}t&&b&&P.alternate===null&&e(p,b),x=o(P,x,A),M===null?w=P:M.sibling=P,M=P,b=E}if(A===_.length)return n(p,b),ln&&el(p,A),w;if(b===null){for(;A<_.length;A++)b=f(p,_[A],T),b!==null&&(x=o(b,x,A),M===null?w=b:M.sibling=b,M=b);return ln&&el(p,A),w}for(b=r(p,b);A<_.length;A++)E=d(b,p,A,_[A],T),E!==null&&(t&&E.alternate!==null&&b.delete(E.key===null?A:E.key),x=o(E,x,A),M===null?w=E:M.sibling=E,M=E);return t&&b.forEach(function(R){return e(p,R)}),ln&&el(p,A),w}function y(p,x,_,T){var w=uh(_);if(typeof w!="function")throw Error(we(150));if(_=w.call(_),_==null)throw Error(we(151));for(var M=w=null,b=x,A=x=0,E=null,P=_.next();b!==null&&!P.done;A++,P=_.next()){b.index>A?(E=b,b=null):E=b.sibling;var R=h(p,b,P.value,T);if(R===null){b===null&&(b=E);break}t&&b&&R.alternate===null&&e(p,b),x=o(R,x,A),M===null?w=R:M.sibling=R,M=R,b=E}if(P.done)return n(p,b),ln&&el(p,A),w;if(b===null){for(;!P.done;A++,P=_.next())P=f(p,P.value,T),P!==null&&(x=o(P,x,A),M===null?w=P:M.sibling=P,M=P);return ln&&el(p,A),w}for(b=r(p,b);!P.done;A++,P=_.next())P=d(b,p,A,P.value,T),P!==null&&(t&&P.alternate!==null&&b.delete(P.key===null?A:P.key),x=o(P,x,A),M===null?w=P:M.sibling=P,M=P);return t&&b.forEach(function(N){return e(p,N)}),ln&&el(p,A),w}function g(p,x,_,T){if(typeof _=="object"&&_!==null&&_.type===Hc&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case _m:e:{for(var w=_.key,M=x;M!==null;){if(M.key===w){if(w=_.type,w===Hc){if(M.tag===7){n(p,M.sibling),x=i(M,_.props.children),x.return=p,p=x;break e}}else if(M.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===za&&zP(w)===M.type){n(p,M.sibling),x=i(M,_.props),x.ref=mh(p,M,_),x.return=p,p=x;break e}n(p,M);break}else e(p,M);M=M.sibling}_.type===Hc?(x=Tl(_.props.children,p.mode,T,_.key),x.return=p,p=x):(T=Bg(_.type,_.key,_.props,null,p.mode,T),T.ref=mh(p,x,_),T.return=p,p=T)}return a(p);case zc:e:{for(M=_.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){n(p,x.sibling),x=i(x,_.children||[]),x.return=p,p=x;break e}else{n(p,x);break}else e(p,x);x=x.sibling}x=cx(_,p.mode,T),x.return=p,p=x}return a(p);case za:return M=_._init,g(p,x,M(_._payload),T)}if(Dh(_))return v(p,x,_,T);if(uh(_))return y(p,x,_,T);Rm(p,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(n(p,x.sibling),x=i(x,_),x.return=p,p=x):(n(p,x),x=lx(_,p.mode,T),x.return=p,p=x),a(p)):n(p,x)}return g}var Ou=T3(!0),A3=T3(!1),hv=Ns(null),dv=null,Zc=null,PE=null;function CE(){PE=Zc=dv=null}function RE(t){var e=hv.current;an(hv),t._currentValue=e}function g1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function yu(t,e){dv=t,PE=Zc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wr=!0),t.firstContext=null)}function ji(t){var e=t._currentValue;if(PE!==t)if(t={context:t,memoizedValue:e,next:null},Zc===null){if(dv===null)throw Error(we(308));Zc=t,dv.dependencies={lanes:0,firstContext:t}}else Zc=Zc.next=t;return e}var dl=null;function OE(t){dl===null?dl=[t]:dl.push(t)}function M3(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,OE(e)):(n.next=i.next,i.next=n),e.interleaved=n,va(t,r)}function va(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ha=!1;function IE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function aa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ls(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Nt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,va(t,n)}return i=r.interleaved,i===null?(e.next=e,OE(r)):(e.next=i.next,i.next=e),r.interleaved=e,va(t,n)}function Lg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vE(t,n)}}function HP(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pv(t,e,n,r){var i=t.updateQueue;Ha=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,a===null?o=c:a.next=c,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==a&&(s===null?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;a=0,u=c=l=null,s=o;do{var h=s.lane,d=s.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=t,y=s;switch(h=e,d=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){f=v.call(d,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,h=typeof v=="function"?v.call(d,f,h):v,h==null)break e;f=dn({},f,h);break e;case 2:Ha=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=d,l=f):u=u.next=d,a|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);jl|=a,t.lanes=a,t.memoizedState=f}}function GP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(we(191,i));i.call(r)}}}var Vp={},So=Ns(Vp),Rd=Ns(Vp),Od=Ns(Vp);function pl(t){if(t===Vp)throw Error(we(174));return t}function NE(t,e){switch(Yt(Od,e),Yt(Rd,t),Yt(So,Vp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yb(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Yb(e,t)}an(So),Yt(So,e)}function Iu(){an(So),an(Rd),an(Od)}function C3(t){pl(Od.current);var e=pl(So.current),n=Yb(e,t.type);e!==n&&(Yt(Rd,t),Yt(So,n))}function DE(t){Rd.current===t&&(an(So),an(Rd))}var un=Ns(0);function mv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nx=[];function LE(){for(var t=0;t<nx.length;t++)nx[t]._workInProgressVersionPrimary=null;nx.length=0}var kg=Ma.ReactCurrentDispatcher,rx=Ma.ReactCurrentBatchConfig,kl=0,hn=null,kn=null,Yn=null,gv=!1,Qh=!1,Id=0,g9=0;function pr(){throw Error(we(321))}function kE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!lo(t[n],e[n]))return!1;return!0}function jE(t,e,n,r,i,o){if(kl=o,hn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kg.current=t===null||t.memoizedState===null?x9:b9,t=n(r,i),Qh){o=0;do{if(Qh=!1,Id=0,25<=o)throw Error(we(301));o+=1,Yn=kn=null,e.updateQueue=null,kg.current=w9,t=n(r,i)}while(Qh)}if(kg.current=vv,e=kn!==null&&kn.next!==null,kl=0,Yn=kn=hn=null,gv=!1,e)throw Error(we(300));return t}function UE(){var t=Id!==0;return Id=0,t}function vo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yn===null?hn.memoizedState=Yn=t:Yn=Yn.next=t,Yn}function Ui(){if(kn===null){var t=hn.alternate;t=t!==null?t.memoizedState:null}else t=kn.next;var e=Yn===null?hn.memoizedState:Yn.next;if(e!==null)Yn=e,kn=t;else{if(t===null)throw Error(we(310));kn=t,t={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},Yn===null?hn.memoizedState=Yn=t:Yn=Yn.next=t}return Yn}function Nd(t,e){return typeof e=="function"?e(t):e}function ix(t){var e=Ui(),n=e.queue;if(n===null)throw Error(we(311));n.lastRenderedReducer=t;var r=kn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,l=null,c=o;do{var u=c.lane;if((kl&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=f,a=r):l=l.next=f,hn.lanes|=u,jl|=u}c=c.next}while(c!==null&&c!==o);l===null?a=r:l.next=s,lo(r,e.memoizedState)||(Wr=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,hn.lanes|=o,jl|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ox(t){var e=Ui(),n=e.queue;if(n===null)throw Error(we(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);lo(o,e.memoizedState)||(Wr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function R3(){}function O3(t,e){var n=hn,r=Ui(),i=e(),o=!lo(r.memoizedState,i);if(o&&(r.memoizedState=i,Wr=!0),r=r.queue,FE(D3.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Yn!==null&&Yn.memoizedState.tag&1){if(n.flags|=2048,Dd(9,N3.bind(null,n,r,i,e),void 0,null),Jn===null)throw Error(we(349));kl&30||I3(n,e,i)}return i}function I3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=hn.updateQueue,e===null?(e={lastEffect:null,stores:null},hn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function N3(t,e,n,r){e.value=n,e.getSnapshot=r,L3(e)&&k3(t)}function D3(t,e,n){return n(function(){L3(e)&&k3(t)})}function L3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!lo(t,n)}catch{return!0}}function k3(t){var e=va(t,1);e!==null&&oo(e,t,1,-1)}function WP(t){var e=vo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nd,lastRenderedState:t},e.queue=t,t=t.dispatch=_9.bind(null,hn,t),[e.memoizedState,t]}function Dd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=hn.updateQueue,e===null?(e={lastEffect:null,stores:null},hn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function j3(){return Ui().memoizedState}function jg(t,e,n,r){var i=vo();hn.flags|=t,i.memoizedState=Dd(1|e,n,void 0,r===void 0?null:r)}function a0(t,e,n,r){var i=Ui();r=r===void 0?null:r;var o=void 0;if(kn!==null){var a=kn.memoizedState;if(o=a.destroy,r!==null&&kE(r,a.deps)){i.memoizedState=Dd(e,n,o,r);return}}hn.flags|=t,i.memoizedState=Dd(1|e,n,o,r)}function qP(t,e){return jg(8390656,8,t,e)}function FE(t,e){return a0(2048,8,t,e)}function U3(t,e){return a0(4,2,t,e)}function F3(t,e){return a0(4,4,t,e)}function V3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function B3(t,e,n){return n=n!=null?n.concat([t]):null,a0(4,4,V3.bind(null,e,t),n)}function VE(){}function $3(t,e){var n=Ui();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function z3(t,e){var n=Ui();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function H3(t,e,n){return kl&21?(lo(n,e)||(n=Kk(),hn.lanes|=n,jl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wr=!0),t.memoizedState=n)}function v9(t,e){var n=Bt;Bt=n!==0&&4>n?n:4,t(!0);var r=rx.transition;rx.transition={};try{t(!1),e()}finally{Bt=n,rx.transition=r}}function G3(){return Ui().memoizedState}function y9(t,e,n){var r=us(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},W3(t))q3(e,n);else if(n=M3(t,e,n,r),n!==null){var i=Fr();oo(n,t,r,i),X3(n,e,r)}}function _9(t,e,n){var r=us(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(W3(t))q3(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,lo(s,a)){var l=e.interleaved;l===null?(i.next=i,OE(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=M3(t,e,i,r),n!==null&&(i=Fr(),oo(n,t,r,i),X3(n,e,r))}}function W3(t){var e=t.alternate;return t===hn||e!==null&&e===hn}function q3(t,e){Qh=gv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function X3(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vE(t,n)}}var vv={readContext:ji,useCallback:pr,useContext:pr,useEffect:pr,useImperativeHandle:pr,useInsertionEffect:pr,useLayoutEffect:pr,useMemo:pr,useReducer:pr,useRef:pr,useState:pr,useDebugValue:pr,useDeferredValue:pr,useTransition:pr,useMutableSource:pr,useSyncExternalStore:pr,useId:pr,unstable_isNewReconciler:!1},x9={readContext:ji,useCallback:function(t,e){return vo().memoizedState=[t,e===void 0?null:e],t},useContext:ji,useEffect:qP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jg(4194308,4,V3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jg(4194308,4,t,e)},useInsertionEffect:function(t,e){return jg(4,2,t,e)},useMemo:function(t,e){var n=vo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=y9.bind(null,hn,t),[r.memoizedState,t]},useRef:function(t){var e=vo();return t={current:t},e.memoizedState=t},useState:WP,useDebugValue:VE,useDeferredValue:function(t){return vo().memoizedState=t},useTransition:function(){var t=WP(!1),e=t[0];return t=v9.bind(null,t[1]),vo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=hn,i=vo();if(ln){if(n===void 0)throw Error(we(407));n=n()}else{if(n=e(),Jn===null)throw Error(we(349));kl&30||I3(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,qP(D3.bind(null,r,o,t),[t]),r.flags|=2048,Dd(9,N3.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=vo(),e=Jn.identifierPrefix;if(ln){var n=ea,r=Jo;n=(r&~(1<<32-io(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Id++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=g9++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},b9={readContext:ji,useCallback:$3,useContext:ji,useEffect:FE,useImperativeHandle:B3,useInsertionEffect:U3,useLayoutEffect:F3,useMemo:z3,useReducer:ix,useRef:j3,useState:function(){return ix(Nd)},useDebugValue:VE,useDeferredValue:function(t){var e=Ui();return H3(e,kn.memoizedState,t)},useTransition:function(){var t=ix(Nd)[0],e=Ui().memoizedState;return[t,e]},useMutableSource:R3,useSyncExternalStore:O3,useId:G3,unstable_isNewReconciler:!1},w9={readContext:ji,useCallback:$3,useContext:ji,useEffect:FE,useImperativeHandle:B3,useInsertionEffect:U3,useLayoutEffect:F3,useMemo:z3,useReducer:ox,useRef:j3,useState:function(){return ox(Nd)},useDebugValue:VE,useDeferredValue:function(t){var e=Ui();return kn===null?e.memoizedState=t:H3(e,kn.memoizedState,t)},useTransition:function(){var t=ox(Nd)[0],e=Ui().memoizedState;return[t,e]},useMutableSource:R3,useSyncExternalStore:O3,useId:G3,unstable_isNewReconciler:!1};function Xi(t,e){if(t&&t.defaultProps){e=dn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function v1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:dn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var s0={isMounted:function(t){return(t=t._reactInternals)?Kl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Fr(),i=us(t),o=aa(r,i);o.payload=e,n!=null&&(o.callback=n),e=ls(t,o,i),e!==null&&(oo(e,t,i,r),Lg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Fr(),i=us(t),o=aa(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ls(t,o,i),e!==null&&(oo(e,t,i,r),Lg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Fr(),r=us(t),i=aa(n,r);i.tag=2,e!=null&&(i.callback=e),e=ls(t,i,r),e!==null&&(oo(e,t,r,n),Lg(e,t,r))}};function XP(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!Ad(n,r)||!Ad(i,o):!0}function K3(t,e,n){var r=!1,i=bs,o=e.contextType;return typeof o=="object"&&o!==null?o=ji(o):(i=Kr(e)?Dl:Pr.current,r=e.contextTypes,o=(r=r!=null)?Cu(t,i):bs),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=s0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function KP(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&s0.enqueueReplaceState(e,e.state,null)}function y1(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},IE(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ji(o):(o=Kr(e)?Dl:Pr.current,i.context=Cu(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(v1(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&s0.enqueueReplaceState(i,i.state,null),pv(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Nu(t,e){try{var n="",r=e;do n+=Yz(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function ax(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var S9=typeof WeakMap=="function"?WeakMap:Map;function Y3(t,e,n){n=aa(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_v||(_v=!0,C1=r),_1(t,e)},n}function Q3(t,e,n){n=aa(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){_1(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){_1(t,e),typeof r!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function YP(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new S9;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=j9.bind(null,t,e,n),e.then(t,t))}function QP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ZP(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=aa(-1,1),e.tag=2,ls(n,e,1))),n.lanes|=1),t)}var E9=Ma.ReactCurrentOwner,Wr=!1;function Nr(t,e,n,r){e.child=t===null?A3(e,null,n,r):Ou(e,t.child,n,r)}function JP(t,e,n,r,i){n=n.render;var o=e.ref;return yu(e,i),r=jE(t,e,n,r,o,i),n=UE(),t!==null&&!Wr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ya(t,e,i)):(ln&&n&&TE(e),e.flags|=1,Nr(t,e,r,i),e.child)}function eC(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!XE(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Z3(t,e,o,r,i)):(t=Bg(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ad,n(a,r)&&t.ref===e.ref)return ya(t,e,i)}return e.flags|=1,t=fs(o,r),t.ref=e.ref,t.return=e,e.child=t}function Z3(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ad(o,r)&&t.ref===e.ref)if(Wr=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Wr=!0);else return e.lanes=t.lanes,ya(t,e,i)}return x1(t,e,n,r,i)}function J3(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yt(eu,oi),oi|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Yt(eu,oi),oi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Yt(eu,oi),oi|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Yt(eu,oi),oi|=r;return Nr(t,e,i,n),e.child}function ej(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function x1(t,e,n,r,i){var o=Kr(n)?Dl:Pr.current;return o=Cu(e,o),yu(e,i),n=jE(t,e,n,r,o,i),r=UE(),t!==null&&!Wr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ya(t,e,i)):(ln&&r&&TE(e),e.flags|=1,Nr(t,e,n,i),e.child)}function tC(t,e,n,r,i){if(Kr(n)){var o=!0;cv(e)}else o=!1;if(yu(e,i),e.stateNode===null)Ug(t,e),K3(e,n,r),y1(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=ji(c):(c=Kr(n)?Dl:Pr.current,c=Cu(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||l!==c)&&KP(e,a,r,c),Ha=!1;var h=e.memoizedState;a.state=h,pv(e,r,a,i),l=e.memoizedState,s!==r||h!==l||Xr.current||Ha?(typeof u=="function"&&(v1(e,n,u,r),l=e.memoizedState),(s=Ha||XP(e,n,s,r,h,l,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,P3(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:Xi(e.type,s),a.props=c,f=e.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=ji(l):(l=Kr(n)?Dl:Pr.current,l=Cu(e,l));var d=n.getDerivedStateFromProps;(u=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==f||h!==l)&&KP(e,a,r,l),Ha=!1,h=e.memoizedState,a.state=h,pv(e,r,a,i);var v=e.memoizedState;s!==f||h!==v||Xr.current||Ha?(typeof d=="function"&&(v1(e,n,d,r),v=e.memoizedState),(c=Ha||XP(e,n,c,r,h,v,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),a.props=r,a.state=v,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return b1(t,e,n,r,o,i)}function b1(t,e,n,r,i,o){ej(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&VP(e,n,!1),ya(t,e,o);r=e.stateNode,E9.current=e;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ou(e,t.child,null,o),e.child=Ou(e,null,s,o)):Nr(t,e,s,o),e.memoizedState=r.state,i&&VP(e,n,!0),e.child}function tj(t){var e=t.stateNode;e.pendingContext?FP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&FP(t,e.context,!1),NE(t,e.containerInfo)}function nC(t,e,n,r,i){return Ru(),ME(i),e.flags|=256,Nr(t,e,n,r),e.child}var w1={dehydrated:null,treeContext:null,retryLane:0};function S1(t){return{baseLanes:t,cachePool:null,transitions:null}}function nj(t,e,n){var r=e.pendingProps,i=un.current,o=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Yt(un,i&1),t===null)return m1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=u0(a,r,0,null),t=Tl(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=S1(n),e.memoizedState=w1,t):BE(e,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return T9(t,e,a,r,s,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=fs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=fs(s,o):(o=Tl(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?S1(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=w1,r}return o=t.child,t=o.sibling,r=fs(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function BE(t,e){return e=u0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Om(t,e,n,r){return r!==null&&ME(r),Ou(e,t.child,null,n),t=BE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function T9(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=ax(Error(we(422))),Om(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=u0({mode:"visible",children:r.children},i,0,null),o=Tl(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ou(e,t.child,null,a),e.child.memoizedState=S1(a),e.memoizedState=w1,o);if(!(e.mode&1))return Om(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(we(419)),r=ax(o,r,void 0),Om(t,e,a,r)}if(s=(a&t.childLanes)!==0,Wr||s){if(r=Jn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,va(t,i),oo(r,t,i,-1))}return qE(),r=ax(Error(we(421))),Om(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=U9.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,ci=ss(i.nextSibling),ui=e,ln=!0,Zi=null,t!==null&&(Ti[Ai++]=Jo,Ti[Ai++]=ea,Ti[Ai++]=Ll,Jo=t.id,ea=t.overflow,Ll=e),e=BE(e,r.children),e.flags|=4096,e)}function rC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),g1(t.return,e,n)}function sx(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function rj(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Nr(t,e,r.children,n),r=un.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rC(t,n,e);else if(t.tag===19)rC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Yt(un,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&mv(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),sx(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&mv(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}sx(e,!0,n,null,o);break;case"together":sx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ug(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ya(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),jl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(we(153));if(e.child!==null){for(t=e.child,n=fs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function A9(t,e,n){switch(e.tag){case 3:tj(e),Ru();break;case 5:C3(e);break;case 1:Kr(e.type)&&cv(e);break;case 4:NE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Yt(hv,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Yt(un,un.current&1),e.flags|=128,null):n&e.child.childLanes?nj(t,e,n):(Yt(un,un.current&1),t=ya(t,e,n),t!==null?t.sibling:null);Yt(un,un.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return rj(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Yt(un,un.current),r)break;return null;case 22:case 23:return e.lanes=0,J3(t,e,n)}return ya(t,e,n)}var ij,E1,oj,aj;ij=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};E1=function(){};oj=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,pl(So.current);var o=null;switch(n){case"input":i=Wb(t,i),r=Wb(t,r),o=[];break;case"select":i=dn({},i,{value:void 0}),r=dn({},r,{value:void 0}),o=[];break;case"textarea":i=Kb(t,i),r=Kb(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sv)}Qb(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(_d.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(s=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(_d.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&en("scroll",t),o||s===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};aj=function(t,e,n,r){n!==r&&(e.flags|=4)};function gh(t,e){if(!ln)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function M9(t,e,n){var r=e.pendingProps;switch(AE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mr(e),null;case 1:return Kr(e.type)&&lv(),mr(e),null;case 3:return r=e.stateNode,Iu(),an(Xr),an(Pr),LE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Cm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zi!==null&&(I1(Zi),Zi=null))),E1(t,e),mr(e),null;case 5:DE(e);var i=pl(Od.current);if(n=e.type,t!==null&&e.stateNode!=null)oj(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(we(166));return mr(e),null}if(t=pl(So.current),Cm(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[_o]=e,r[Cd]=o,t=(e.mode&1)!==0,n){case"dialog":en("cancel",r),en("close",r);break;case"iframe":case"object":case"embed":en("load",r);break;case"video":case"audio":for(i=0;i<kh.length;i++)en(kh[i],r);break;case"source":en("error",r);break;case"img":case"image":case"link":en("error",r),en("load",r);break;case"details":en("toggle",r);break;case"input":hP(r,o),en("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},en("invalid",r);break;case"textarea":pP(r,o),en("invalid",r)}Qb(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&Pm(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Pm(r.textContent,s,t),i=["children",""+s]):_d.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&en("scroll",r)}switch(n){case"input":xm(r),dP(r,o,!0);break;case"textarea":xm(r),mP(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=sv)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Dk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[_o]=e,t[Cd]=r,ij(t,e,!1,!1),e.stateNode=t;e:{switch(a=Zb(n,r),n){case"dialog":en("cancel",t),en("close",t),i=r;break;case"iframe":case"object":case"embed":en("load",t),i=r;break;case"video":case"audio":for(i=0;i<kh.length;i++)en(kh[i],t);i=r;break;case"source":en("error",t),i=r;break;case"img":case"image":case"link":en("error",t),en("load",t),i=r;break;case"details":en("toggle",t),i=r;break;case"input":hP(t,r),i=Wb(t,r),en("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=dn({},r,{value:void 0}),en("invalid",t);break;case"textarea":pP(t,r),i=Kb(t,r),en("invalid",t);break;default:i=r}Qb(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?jk(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Lk(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&xd(t,l):typeof l=="number"&&xd(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(_d.hasOwnProperty(o)?l!=null&&o==="onScroll"&&en("scroll",t):l!=null&&fE(t,o,l,a))}switch(n){case"input":xm(t),dP(t,r,!1);break;case"textarea":xm(t),mP(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xs(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?pu(t,!!r.multiple,o,!1):r.defaultValue!=null&&pu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=sv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mr(e),null;case 6:if(t&&e.stateNode!=null)aj(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(we(166));if(n=pl(Od.current),pl(So.current),Cm(e)){if(r=e.stateNode,n=e.memoizedProps,r[_o]=e,(o=r.nodeValue!==n)&&(t=ui,t!==null))switch(t.tag){case 3:Pm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pm(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_o]=e,e.stateNode=r}return mr(e),null;case 13:if(an(un),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ln&&ci!==null&&e.mode&1&&!(e.flags&128))E3(),Ru(),e.flags|=98560,o=!1;else if(o=Cm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(we(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(we(317));o[_o]=e}else Ru(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mr(e),o=!1}else Zi!==null&&(I1(Zi),Zi=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||un.current&1?Fn===0&&(Fn=3):qE())),e.updateQueue!==null&&(e.flags|=4),mr(e),null);case 4:return Iu(),E1(t,e),t===null&&Md(e.stateNode.containerInfo),mr(e),null;case 10:return RE(e.type._context),mr(e),null;case 17:return Kr(e.type)&&lv(),mr(e),null;case 19:if(an(un),o=e.memoizedState,o===null)return mr(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)gh(o,!1);else{if(Fn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=mv(t),a!==null){for(e.flags|=128,gh(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Yt(un,un.current&1|2),e.child}t=t.sibling}o.tail!==null&&wn()>Du&&(e.flags|=128,r=!0,gh(o,!1),e.lanes=4194304)}else{if(!r)if(t=mv(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gh(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ln)return mr(e),null}else 2*wn()-o.renderingStartTime>Du&&n!==1073741824&&(e.flags|=128,r=!0,gh(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=wn(),e.sibling=null,n=un.current,Yt(un,r?n&1|2:n&1),e):(mr(e),null);case 22:case 23:return WE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?oi&1073741824&&(mr(e),e.subtreeFlags&6&&(e.flags|=8192)):mr(e),null;case 24:return null;case 25:return null}throw Error(we(156,e.tag))}function P9(t,e){switch(AE(e),e.tag){case 1:return Kr(e.type)&&lv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Iu(),an(Xr),an(Pr),LE(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return DE(e),null;case 13:if(an(un),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(we(340));Ru()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return an(un),null;case 4:return Iu(),null;case 10:return RE(e.type._context),null;case 22:case 23:return WE(),null;case 24:return null;default:return null}}var Im=!1,wr=!1,C9=typeof WeakSet=="function"?WeakSet:Set,$e=null;function Jc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){vn(t,e,r)}else n.current=null}function T1(t,e,n){try{n()}catch(r){vn(t,e,r)}}var iC=!1;function R9(t,e){if(l1=iv,t=f3(),EE(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,c=0,u=0,f=t,h=null;t:for(;;){for(var d;f!==n||i!==0&&f.nodeType!==3||(s=a+i),f!==o||r!==0&&f.nodeType!==3||(l=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===n&&++c===i&&(s=a),h===o&&++u===r&&(l=a),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(c1={focusedElem:t,selectionRange:n},iv=!1,$e=e;$e!==null;)if(e=$e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$e=t;else for(;$e!==null;){e=$e;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,g=v.memoizedState,p=e.stateNode,x=p.getSnapshotBeforeUpdate(e.elementType===e.type?y:Xi(e.type,y),g);p.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(T){vn(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,$e=t;break}$e=e.return}return v=iC,iC=!1,v}function Zh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&T1(e,n,o)}i=i.next}while(i!==r)}}function l0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function A1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function sj(t){var e=t.alternate;e!==null&&(t.alternate=null,sj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_o],delete e[Cd],delete e[h1],delete e[h9],delete e[d9])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lj(t){return t.tag===5||t.tag===3||t.tag===4}function oC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function M1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sv));else if(r!==4&&(t=t.child,t!==null))for(M1(t,e,n),t=t.sibling;t!==null;)M1(t,e,n),t=t.sibling}function P1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(P1(t,e,n),t=t.sibling;t!==null;)P1(t,e,n),t=t.sibling}var ir=null,Ki=!1;function La(t,e,n){for(n=n.child;n!==null;)cj(t,e,n),n=n.sibling}function cj(t,e,n){if(wo&&typeof wo.onCommitFiberUnmount=="function")try{wo.onCommitFiberUnmount(e0,n)}catch{}switch(n.tag){case 5:wr||Jc(n,e);case 6:var r=ir,i=Ki;ir=null,La(t,e,n),ir=r,Ki=i,ir!==null&&(Ki?(t=ir,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ir.removeChild(n.stateNode));break;case 18:ir!==null&&(Ki?(t=ir,n=n.stateNode,t.nodeType===8?ex(t.parentNode,n):t.nodeType===1&&ex(t,n),Ed(t)):ex(ir,n.stateNode));break;case 4:r=ir,i=Ki,ir=n.stateNode.containerInfo,Ki=!0,La(t,e,n),ir=r,Ki=i;break;case 0:case 11:case 14:case 15:if(!wr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&T1(n,e,a),i=i.next}while(i!==r)}La(t,e,n);break;case 1:if(!wr&&(Jc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){vn(n,e,s)}La(t,e,n);break;case 21:La(t,e,n);break;case 22:n.mode&1?(wr=(r=wr)||n.memoizedState!==null,La(t,e,n),wr=r):La(t,e,n);break;default:La(t,e,n)}}function aC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new C9),e.forEach(function(r){var i=F9.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function zi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:ir=s.stateNode,Ki=!1;break e;case 3:ir=s.stateNode.containerInfo,Ki=!0;break e;case 4:ir=s.stateNode.containerInfo,Ki=!0;break e}s=s.return}if(ir===null)throw Error(we(160));cj(o,a,i),ir=null,Ki=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){vn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uj(e,t),e=e.sibling}function uj(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zi(e,t),go(t),r&4){try{Zh(3,t,t.return),l0(3,t)}catch(y){vn(t,t.return,y)}try{Zh(5,t,t.return)}catch(y){vn(t,t.return,y)}}break;case 1:zi(e,t),go(t),r&512&&n!==null&&Jc(n,n.return);break;case 5:if(zi(e,t),go(t),r&512&&n!==null&&Jc(n,n.return),t.flags&32){var i=t.stateNode;try{xd(i,"")}catch(y){vn(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&Ik(i,o),Zb(s,a);var c=Zb(s,o);for(a=0;a<l.length;a+=2){var u=l[a],f=l[a+1];u==="style"?jk(i,f):u==="dangerouslySetInnerHTML"?Lk(i,f):u==="children"?xd(i,f):fE(i,u,f,c)}switch(s){case"input":qb(i,o);break;case"textarea":Nk(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var d=o.value;d!=null?pu(i,!!o.multiple,d,!1):h!==!!o.multiple&&(o.defaultValue!=null?pu(i,!!o.multiple,o.defaultValue,!0):pu(i,!!o.multiple,o.multiple?[]:"",!1))}i[Cd]=o}catch(y){vn(t,t.return,y)}}break;case 6:if(zi(e,t),go(t),r&4){if(t.stateNode===null)throw Error(we(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(y){vn(t,t.return,y)}}break;case 3:if(zi(e,t),go(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ed(e.containerInfo)}catch(y){vn(t,t.return,y)}break;case 4:zi(e,t),go(t);break;case 13:zi(e,t),go(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(HE=wn())),r&4&&aC(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(wr=(c=wr)||u,zi(e,t),wr=c):zi(e,t),go(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for($e=t,u=t.child;u!==null;){for(f=$e=u;$e!==null;){switch(h=$e,d=h.child,h.tag){case 0:case 11:case 14:case 15:Zh(4,h,h.return);break;case 1:Jc(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){vn(r,n,y)}}break;case 5:Jc(h,h.return);break;case 22:if(h.memoizedState!==null){lC(f);continue}}d!==null?(d.return=h,$e=d):lC(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=f.stateNode,l=f.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=kk("display",a))}catch(y){vn(t,t.return,y)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(y){vn(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:zi(e,t),go(t),r&4&&aC(t);break;case 21:break;default:zi(e,t),go(t)}}function go(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(lj(n)){var r=n;break e}n=n.return}throw Error(we(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(xd(i,""),r.flags&=-33);var o=oC(t);P1(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=oC(t);M1(t,s,a);break;default:throw Error(we(161))}}catch(l){vn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function O9(t,e,n){$e=t,fj(t)}function fj(t,e,n){for(var r=(t.mode&1)!==0;$e!==null;){var i=$e,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Im;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||wr;s=Im;var c=wr;if(Im=a,(wr=l)&&!c)for($e=i;$e!==null;)a=$e,l=a.child,a.tag===22&&a.memoizedState!==null?cC(i):l!==null?(l.return=a,$e=l):cC(i);for(;o!==null;)$e=o,fj(o),o=o.sibling;$e=i,Im=s,wr=c}sC(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,$e=o):sC(t)}}function sC(t){for(;$e!==null;){var e=$e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wr||l0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!wr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Xi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&GP(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}GP(e,a,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Ed(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(we(163))}wr||e.flags&512&&A1(e)}catch(h){vn(e,e.return,h)}}if(e===t){$e=null;break}if(n=e.sibling,n!==null){n.return=e.return,$e=n;break}$e=e.return}}function lC(t){for(;$e!==null;){var e=$e;if(e===t){$e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$e=n;break}$e=e.return}}function cC(t){for(;$e!==null;){var e=$e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{l0(4,e)}catch(l){vn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){vn(e,i,l)}}var o=e.return;try{A1(e)}catch(l){vn(e,o,l)}break;case 5:var a=e.return;try{A1(e)}catch(l){vn(e,a,l)}}}catch(l){vn(e,e.return,l)}if(e===t){$e=null;break}var s=e.sibling;if(s!==null){s.return=e.return,$e=s;break}$e=e.return}}var I9=Math.ceil,yv=Ma.ReactCurrentDispatcher,$E=Ma.ReactCurrentOwner,Ni=Ma.ReactCurrentBatchConfig,Nt=0,Jn=null,Rn=null,lr=0,oi=0,eu=Ns(0),Fn=0,Ld=null,jl=0,c0=0,zE=0,Jh=null,Hr=null,HE=0,Du=1/0,Ko=null,_v=!1,C1=null,cs=null,Nm=!1,Za=null,xv=0,ed=0,R1=null,Fg=-1,Vg=0;function Fr(){return Nt&6?wn():Fg!==-1?Fg:Fg=wn()}function us(t){return t.mode&1?Nt&2&&lr!==0?lr&-lr:m9.transition!==null?(Vg===0&&(Vg=Kk()),Vg):(t=Bt,t!==0||(t=window.event,t=t===void 0?16:n3(t.type)),t):1}function oo(t,e,n,r){if(50<ed)throw ed=0,R1=null,Error(we(185));jp(t,n,r),(!(Nt&2)||t!==Jn)&&(t===Jn&&(!(Nt&2)&&(c0|=n),Fn===4&&Ka(t,lr)),Yr(t,r),n===1&&Nt===0&&!(e.mode&1)&&(Du=wn()+500,o0&&Ds()))}function Yr(t,e){var n=t.callbackNode;m6(t,e);var r=rv(t,t===Jn?lr:0);if(r===0)n!==null&&yP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&yP(n),e===1)t.tag===0?p9(uC.bind(null,t)):b3(uC.bind(null,t)),u9(function(){!(Nt&6)&&Ds()}),n=null;else{switch(Yk(r)){case 1:n=gE;break;case 4:n=qk;break;case 16:n=nv;break;case 536870912:n=Xk;break;default:n=nv}n=_j(n,hj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function hj(t,e){if(Fg=-1,Vg=0,Nt&6)throw Error(we(327));var n=t.callbackNode;if(_u()&&t.callbackNode!==n)return null;var r=rv(t,t===Jn?lr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=bv(t,r);else{e=r;var i=Nt;Nt|=2;var o=pj();(Jn!==t||lr!==e)&&(Ko=null,Du=wn()+500,El(t,e));do try{L9();break}catch(s){dj(t,s)}while(!0);CE(),yv.current=o,Nt=i,Rn!==null?e=0:(Jn=null,lr=0,e=Fn)}if(e!==0){if(e===2&&(i=r1(t),i!==0&&(r=i,e=O1(t,i))),e===1)throw n=Ld,El(t,0),Ka(t,r),Yr(t,wn()),n;if(e===6)Ka(t,r);else{if(i=t.current.alternate,!(r&30)&&!N9(i)&&(e=bv(t,r),e===2&&(o=r1(t),o!==0&&(r=o,e=O1(t,o))),e===1))throw n=Ld,El(t,0),Ka(t,r),Yr(t,wn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(we(345));case 2:tl(t,Hr,Ko);break;case 3:if(Ka(t,r),(r&130023424)===r&&(e=HE+500-wn(),10<e)){if(rv(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Fr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=f1(tl.bind(null,t,Hr,Ko),e);break}tl(t,Hr,Ko);break;case 4:if(Ka(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-io(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=wn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*I9(r/1960))-r,10<r){t.timeoutHandle=f1(tl.bind(null,t,Hr,Ko),r);break}tl(t,Hr,Ko);break;case 5:tl(t,Hr,Ko);break;default:throw Error(we(329))}}}return Yr(t,wn()),t.callbackNode===n?hj.bind(null,t):null}function O1(t,e){var n=Jh;return t.current.memoizedState.isDehydrated&&(El(t,e).flags|=256),t=bv(t,e),t!==2&&(e=Hr,Hr=n,e!==null&&I1(e)),t}function I1(t){Hr===null?Hr=t:Hr.push.apply(Hr,t)}function N9(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!lo(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ka(t,e){for(e&=~zE,e&=~c0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-io(e),r=1<<n;t[n]=-1,e&=~r}}function uC(t){if(Nt&6)throw Error(we(327));_u();var e=rv(t,0);if(!(e&1))return Yr(t,wn()),null;var n=bv(t,e);if(t.tag!==0&&n===2){var r=r1(t);r!==0&&(e=r,n=O1(t,r))}if(n===1)throw n=Ld,El(t,0),Ka(t,e),Yr(t,wn()),n;if(n===6)throw Error(we(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,tl(t,Hr,Ko),Yr(t,wn()),null}function GE(t,e){var n=Nt;Nt|=1;try{return t(e)}finally{Nt=n,Nt===0&&(Du=wn()+500,o0&&Ds())}}function Ul(t){Za!==null&&Za.tag===0&&!(Nt&6)&&_u();var e=Nt;Nt|=1;var n=Ni.transition,r=Bt;try{if(Ni.transition=null,Bt=1,t)return t()}finally{Bt=r,Ni.transition=n,Nt=e,!(Nt&6)&&Ds()}}function WE(){oi=eu.current,an(eu)}function El(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,c9(n)),Rn!==null)for(n=Rn.return;n!==null;){var r=n;switch(AE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lv();break;case 3:Iu(),an(Xr),an(Pr),LE();break;case 5:DE(r);break;case 4:Iu();break;case 13:an(un);break;case 19:an(un);break;case 10:RE(r.type._context);break;case 22:case 23:WE()}n=n.return}if(Jn=t,Rn=t=fs(t.current,null),lr=oi=e,Fn=0,Ld=null,zE=c0=jl=0,Hr=Jh=null,dl!==null){for(e=0;e<dl.length;e++)if(n=dl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}dl=null}return t}function dj(t,e){do{var n=Rn;try{if(CE(),kg.current=vv,gv){for(var r=hn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}gv=!1}if(kl=0,Yn=kn=hn=null,Qh=!1,Id=0,$E.current=null,n===null||n.return===null){Fn=1,Ld=e,Rn=null;break}e:{var o=t,a=n.return,s=n,l=e;if(e=lr,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=s,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var d=QP(a);if(d!==null){d.flags&=-257,ZP(d,a,s,o,e),d.mode&1&&YP(o,c,e),e=d,l=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){YP(o,c,e),qE();break e}l=Error(we(426))}}else if(ln&&s.mode&1){var g=QP(a);if(g!==null){!(g.flags&65536)&&(g.flags|=256),ZP(g,a,s,o,e),ME(Nu(l,s));break e}}o=l=Nu(l,s),Fn!==4&&(Fn=2),Jh===null?Jh=[o]:Jh.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var p=Y3(o,l,e);HP(o,p);break e;case 1:s=l;var x=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(cs===null||!cs.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e;var T=Q3(o,s,e);HP(o,T);break e}}o=o.return}while(o!==null)}gj(n)}catch(w){e=w,Rn===n&&n!==null&&(Rn=n=n.return);continue}break}while(!0)}function pj(){var t=yv.current;return yv.current=vv,t===null?vv:t}function qE(){(Fn===0||Fn===3||Fn===2)&&(Fn=4),Jn===null||!(jl&268435455)&&!(c0&268435455)||Ka(Jn,lr)}function bv(t,e){var n=Nt;Nt|=2;var r=pj();(Jn!==t||lr!==e)&&(Ko=null,El(t,e));do try{D9();break}catch(i){dj(t,i)}while(!0);if(CE(),Nt=n,yv.current=r,Rn!==null)throw Error(we(261));return Jn=null,lr=0,Fn}function D9(){for(;Rn!==null;)mj(Rn)}function L9(){for(;Rn!==null&&!a6();)mj(Rn)}function mj(t){var e=yj(t.alternate,t,oi);t.memoizedProps=t.pendingProps,e===null?gj(t):Rn=e,$E.current=null}function gj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=P9(n,e),n!==null){n.flags&=32767,Rn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fn=6,Rn=null;return}}else if(n=M9(n,e,oi),n!==null){Rn=n;return}if(e=e.sibling,e!==null){Rn=e;return}Rn=e=t}while(e!==null);Fn===0&&(Fn=5)}function tl(t,e,n){var r=Bt,i=Ni.transition;try{Ni.transition=null,Bt=1,k9(t,e,n,r)}finally{Ni.transition=i,Bt=r}return null}function k9(t,e,n,r){do _u();while(Za!==null);if(Nt&6)throw Error(we(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(we(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(g6(t,o),t===Jn&&(Rn=Jn=null,lr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nm||(Nm=!0,_j(nv,function(){return _u(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ni.transition,Ni.transition=null;var a=Bt;Bt=1;var s=Nt;Nt|=4,$E.current=null,R9(t,n),uj(n,t),n9(c1),iv=!!l1,c1=l1=null,t.current=n,O9(n),s6(),Nt=s,Bt=a,Ni.transition=o}else t.current=n;if(Nm&&(Nm=!1,Za=t,xv=i),o=t.pendingLanes,o===0&&(cs=null),u6(n.stateNode),Yr(t,wn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(_v)throw _v=!1,t=C1,C1=null,t;return xv&1&&t.tag!==0&&_u(),o=t.pendingLanes,o&1?t===R1?ed++:(ed=0,R1=t):ed=0,Ds(),null}function _u(){if(Za!==null){var t=Yk(xv),e=Ni.transition,n=Bt;try{if(Ni.transition=null,Bt=16>t?16:t,Za===null)var r=!1;else{if(t=Za,Za=null,xv=0,Nt&6)throw Error(we(331));var i=Nt;for(Nt|=4,$e=t.current;$e!==null;){var o=$e,a=o.child;if($e.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for($e=c;$e!==null;){var u=$e;switch(u.tag){case 0:case 11:case 15:Zh(8,u,o)}var f=u.child;if(f!==null)f.return=u,$e=f;else for(;$e!==null;){u=$e;var h=u.sibling,d=u.return;if(sj(u),u===c){$e=null;break}if(h!==null){h.return=d,$e=h;break}$e=d}}}var v=o.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var g=y.sibling;y.sibling=null,y=g}while(y!==null)}}$e=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,$e=a;else e:for(;$e!==null;){if(o=$e,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Zh(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,$e=p;break e}$e=o.return}}var x=t.current;for($e=x;$e!==null;){a=$e;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,$e=_;else e:for(a=x;$e!==null;){if(s=$e,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:l0(9,s)}}catch(w){vn(s,s.return,w)}if(s===a){$e=null;break e}var T=s.sibling;if(T!==null){T.return=s.return,$e=T;break e}$e=s.return}}if(Nt=i,Ds(),wo&&typeof wo.onPostCommitFiberRoot=="function")try{wo.onPostCommitFiberRoot(e0,t)}catch{}r=!0}return r}finally{Bt=n,Ni.transition=e}}return!1}function fC(t,e,n){e=Nu(n,e),e=Y3(t,e,1),t=ls(t,e,1),e=Fr(),t!==null&&(jp(t,1,e),Yr(t,e))}function vn(t,e,n){if(t.tag===3)fC(t,t,n);else for(;e!==null;){if(e.tag===3){fC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cs===null||!cs.has(r))){t=Nu(n,t),t=Q3(e,t,1),e=ls(e,t,1),t=Fr(),e!==null&&(jp(e,1,t),Yr(e,t));break}}e=e.return}}function j9(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Fr(),t.pingedLanes|=t.suspendedLanes&n,Jn===t&&(lr&n)===n&&(Fn===4||Fn===3&&(lr&130023424)===lr&&500>wn()-HE?El(t,0):zE|=n),Yr(t,e)}function vj(t,e){e===0&&(t.mode&1?(e=Sm,Sm<<=1,!(Sm&130023424)&&(Sm=4194304)):e=1);var n=Fr();t=va(t,e),t!==null&&(jp(t,e,n),Yr(t,n))}function U9(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vj(t,n)}function F9(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(we(314))}r!==null&&r.delete(e),vj(t,n)}var yj;yj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xr.current)Wr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Wr=!1,A9(t,e,n);Wr=!!(t.flags&131072)}else Wr=!1,ln&&e.flags&1048576&&w3(e,fv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ug(t,e),t=e.pendingProps;var i=Cu(e,Pr.current);yu(e,n),i=jE(null,e,r,t,i,n);var o=UE();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Kr(r)?(o=!0,cv(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,IE(e),i.updater=s0,e.stateNode=i,i._reactInternals=e,y1(e,r,t,n),e=b1(null,e,r,!0,o,n)):(e.tag=0,ln&&o&&TE(e),Nr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ug(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=B9(r),t=Xi(r,t),i){case 0:e=x1(null,e,r,t,n);break e;case 1:e=tC(null,e,r,t,n);break e;case 11:e=JP(null,e,r,t,n);break e;case 14:e=eC(null,e,r,Xi(r.type,t),n);break e}throw Error(we(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xi(r,i),x1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xi(r,i),tC(t,e,r,i,n);case 3:e:{if(tj(e),t===null)throw Error(we(387));r=e.pendingProps,o=e.memoizedState,i=o.element,P3(t,e),pv(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Nu(Error(we(423)),e),e=nC(t,e,r,n,i);break e}else if(r!==i){i=Nu(Error(we(424)),e),e=nC(t,e,r,n,i);break e}else for(ci=ss(e.stateNode.containerInfo.firstChild),ui=e,ln=!0,Zi=null,n=A3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ru(),r===i){e=ya(t,e,n);break e}Nr(t,e,r,n)}e=e.child}return e;case 5:return C3(e),t===null&&m1(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,u1(r,i)?a=null:o!==null&&u1(r,o)&&(e.flags|=32),ej(t,e),Nr(t,e,a,n),e.child;case 6:return t===null&&m1(e),null;case 13:return nj(t,e,n);case 4:return NE(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ou(e,null,r,n):Nr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xi(r,i),JP(t,e,r,i,n);case 7:return Nr(t,e,e.pendingProps,n),e.child;case 8:return Nr(t,e,e.pendingProps.children,n),e.child;case 12:return Nr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,Yt(hv,r._currentValue),r._currentValue=a,o!==null)if(lo(o.value,a)){if(o.children===i.children&&!Xr.current){e=ya(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=aa(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),g1(o.return,n,e),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(we(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),g1(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Nr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,yu(e,n),i=ji(i),r=r(i),e.flags|=1,Nr(t,e,r,n),e.child;case 14:return r=e.type,i=Xi(r,e.pendingProps),i=Xi(r.type,i),eC(t,e,r,i,n);case 15:return Z3(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xi(r,i),Ug(t,e),e.tag=1,Kr(r)?(t=!0,cv(e)):t=!1,yu(e,n),K3(e,r,i),y1(e,r,i,n),b1(null,e,r,!0,t,n);case 19:return rj(t,e,n);case 22:return J3(t,e,n)}throw Error(we(156,e.tag))};function _j(t,e){return Wk(t,e)}function V9(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oi(t,e,n,r){return new V9(t,e,n,r)}function XE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function B9(t){if(typeof t=="function")return XE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===dE)return 11;if(t===pE)return 14}return 2}function fs(t,e){var n=t.alternate;return n===null?(n=Oi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Bg(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")XE(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Hc:return Tl(n.children,i,o,e);case hE:a=8,i|=8;break;case $b:return t=Oi(12,n,e,i|2),t.elementType=$b,t.lanes=o,t;case zb:return t=Oi(13,n,e,i),t.elementType=zb,t.lanes=o,t;case Hb:return t=Oi(19,n,e,i),t.elementType=Hb,t.lanes=o,t;case Ck:return u0(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Mk:a=10;break e;case Pk:a=9;break e;case dE:a=11;break e;case pE:a=14;break e;case za:a=16,r=null;break e}throw Error(we(130,t==null?t:typeof t,""))}return e=Oi(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Tl(t,e,n,r){return t=Oi(7,t,r,e),t.lanes=n,t}function u0(t,e,n,r){return t=Oi(22,t,r,e),t.elementType=Ck,t.lanes=n,t.stateNode={isHidden:!1},t}function lx(t,e,n){return t=Oi(6,t,null,e),t.lanes=n,t}function cx(t,e,n){return e=Oi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $9(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=z_(0),this.expirationTimes=z_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function KE(t,e,n,r,i,o,a,s,l){return t=new $9(t,e,n,s,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Oi(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},IE(o),t}function z9(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function xj(t){if(!t)return bs;t=t._reactInternals;e:{if(Kl(t)!==t||t.tag!==1)throw Error(we(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Kr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(we(171))}if(t.tag===1){var n=t.type;if(Kr(n))return x3(t,n,e)}return e}function bj(t,e,n,r,i,o,a,s,l){return t=KE(n,r,!0,t,i,o,a,s,l),t.context=xj(null),n=t.current,r=Fr(),i=us(n),o=aa(r,i),o.callback=e??null,ls(n,o,i),t.current.lanes=i,jp(t,i,r),Yr(t,r),t}function f0(t,e,n,r){var i=e.current,o=Fr(),a=us(i);return n=xj(n),e.context===null?e.context=n:e.pendingContext=n,e=aa(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ls(i,e,a),t!==null&&(oo(t,i,a,o),Lg(t,i,a)),a}function wv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function YE(t,e){hC(t,e),(t=t.alternate)&&hC(t,e)}function H9(){return null}var wj=typeof reportError=="function"?reportError:function(t){console.error(t)};function QE(t){this._internalRoot=t}h0.prototype.render=QE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(we(409));f0(t,e,null,null)};h0.prototype.unmount=QE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ul(function(){f0(null,t,null,null)}),e[ga]=null}};function h0(t){this._internalRoot=t}h0.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xa.length&&e!==0&&e<Xa[n].priority;n++);Xa.splice(n,0,t),n===0&&t3(t)}};function ZE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dC(){}function G9(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=wv(a);o.call(c)}}var a=bj(e,r,t,0,null,!1,!1,"",dC);return t._reactRootContainer=a,t[ga]=a.current,Md(t.nodeType===8?t.parentNode:t),Ul(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var c=wv(l);s.call(c)}}var l=KE(t,0,!1,null,null,!1,!1,"",dC);return t._reactRootContainer=l,t[ga]=l.current,Md(t.nodeType===8?t.parentNode:t),Ul(function(){f0(e,l,n,r)}),l}function p0(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=wv(a);s.call(l)}}f0(e,a,t,i)}else a=G9(n,e,t,i,r);return wv(a)}Qk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Lh(e.pendingLanes);n!==0&&(vE(e,n|1),Yr(e,wn()),!(Nt&6)&&(Du=wn()+500,Ds()))}break;case 13:Ul(function(){var r=va(t,1);if(r!==null){var i=Fr();oo(r,t,1,i)}}),YE(t,1)}};yE=function(t){if(t.tag===13){var e=va(t,134217728);if(e!==null){var n=Fr();oo(e,t,134217728,n)}YE(t,134217728)}};Zk=function(t){if(t.tag===13){var e=us(t),n=va(t,e);if(n!==null){var r=Fr();oo(n,t,e,r)}YE(t,e)}};Jk=function(){return Bt};e3=function(t,e){var n=Bt;try{return Bt=t,e()}finally{Bt=n}};e1=function(t,e,n){switch(e){case"input":if(qb(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=i0(r);if(!i)throw Error(we(90));Ok(r),qb(r,i)}}}break;case"textarea":Nk(t,n);break;case"select":e=n.value,e!=null&&pu(t,!!n.multiple,e,!1)}};Vk=GE;Bk=Ul;var W9={usingClientEntryPoint:!1,Events:[Fp,Xc,i0,Uk,Fk,GE]},vh={findFiberByHostInstance:hl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},q9={bundleType:vh.bundleType,version:vh.version,rendererPackageName:vh.rendererPackageName,rendererConfig:vh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ma.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hk(t),t===null?null:t.stateNode},findFiberByHostInstance:vh.findFiberByHostInstance||H9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dm.isDisabled&&Dm.supportsFiber)try{e0=Dm.inject(q9),wo=Dm}catch{}}mi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W9;mi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ZE(e))throw Error(we(200));return z9(t,e,null,n)};mi.createRoot=function(t,e){if(!ZE(t))throw Error(we(299));var n=!1,r="",i=wj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=KE(t,1,!1,null,null,n,!1,r,i),t[ga]=e.current,Md(t.nodeType===8?t.parentNode:t),new QE(e)};mi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(we(188)):(t=Object.keys(t).join(","),Error(we(268,t)));return t=Hk(e),t=t===null?null:t.stateNode,t};mi.flushSync=function(t){return Ul(t)};mi.hydrate=function(t,e,n){if(!d0(e))throw Error(we(200));return p0(null,t,e,!0,n)};mi.hydrateRoot=function(t,e,n){if(!ZE(t))throw Error(we(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=wj;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=bj(e,null,t,1,n??null,i,!1,o,a),t[ga]=e.current,Md(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new h0(e)};mi.render=function(t,e,n){if(!d0(e))throw Error(we(200));return p0(null,t,e,!1,n)};mi.unmountComponentAtNode=function(t){if(!d0(t))throw Error(we(40));return t._reactRootContainer?(Ul(function(){p0(null,null,t,!1,function(){t._reactRootContainer=null,t[ga]=null})}),!0):!1};mi.unstable_batchedUpdates=GE;mi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!d0(n))throw Error(we(200));if(t==null||t._reactInternals===void 0)throw Error(we(38));return p0(t,e,n,!1,r)};mi.version="18.3.1-next-f1338f8080-20240426";function Sj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sj)}catch(t){console.error(t)}}Sj(),Sk.exports=mi;var X9=Sk.exports,pC=X9;Vb.createRoot=pC.createRoot,Vb.hydrateRoot=pC.hydrateRoot;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const JE="158",mc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ga={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},K9=0,mC=1,Y9=2,Ej=1,Q9=2,Xo=3,ws=0,Vr=1,Zo=2,hs=0,xu=1,N1=2,gC=3,vC=4,Z9=5,cl=100,J9=101,eH=102,yC=103,_C=104,tH=200,nH=201,rH=202,iH=203,D1=204,L1=205,oH=206,aH=207,sH=208,lH=209,cH=210,uH=211,fH=212,hH=213,dH=214,pH=0,mH=1,gH=2,Sv=3,vH=4,yH=5,_H=6,xH=7,eT=0,bH=1,wH=2,ds=0,SH=1,EH=2,TH=3,AH=4,MH=5,Tj=300,Lu=301,ku=302,k1=303,j1=304,m0=306,U1=1e3,eo=1001,F1=1002,Dr=1003,xC=1004,ux=1005,Mi=1006,PH=1007,kd=1008,ps=1009,CH=1010,RH=1011,tT=1012,Aj=1013,Ja=1014,es=1015,jd=1016,Mj=1017,Pj=1018,Al=1020,OH=1021,to=1023,IH=1024,NH=1025,Ml=1026,ju=1027,DH=1028,Cj=1029,LH=1030,Rj=1031,Oj=1033,fx=33776,hx=33777,dx=33778,px=33779,bC=35840,wC=35841,SC=35842,EC=35843,kH=36196,TC=37492,AC=37496,MC=37808,PC=37809,CC=37810,RC=37811,OC=37812,IC=37813,NC=37814,DC=37815,LC=37816,kC=37817,jC=37818,UC=37819,FC=37820,VC=37821,mx=36492,BC=36494,$C=36495,jH=36283,zC=36284,HC=36285,GC=36286,Ij=3e3,Pl=3001,UH=3200,FH=3201,Nj=0,VH=1,Pi="",jn="srgb",_a="srgb-linear",nT="display-p3",g0="display-p3-linear",Ev="linear",tn="srgb",Tv="rec709",Av="p3",gc=7680,WC=519,BH=512,$H=513,zH=514,HH=515,GH=516,WH=517,qH=518,XH=519,qC=35044,XC="300 es",V1=1035,ta=2e3,Mv=2001;class Yl{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,a=i.length;o<a;o++)i[o].call(this,e);e.target=null}}}const gr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let KC=1234567;const td=Math.PI/180,Ud=180/Math.PI;function Pf(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(gr[t&255]+gr[t>>8&255]+gr[t>>16&255]+gr[t>>24&255]+"-"+gr[e&255]+gr[e>>8&255]+"-"+gr[e>>16&15|64]+gr[e>>24&255]+"-"+gr[n&63|128]+gr[n>>8&255]+"-"+gr[n>>16&255]+gr[n>>24&255]+gr[r&255]+gr[r>>8&255]+gr[r>>16&255]+gr[r>>24&255]).toLowerCase()}function Sr(t,e,n){return Math.max(e,Math.min(n,t))}function rT(t,e){return(t%e+e)%e}function KH(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function YH(t,e,n){return t!==e?(n-t)/(e-t):0}function nd(t,e,n){return(1-n)*t+n*e}function QH(t,e,n,r){return nd(t,e,1-Math.exp(-n*r))}function ZH(t,e=1){return e-Math.abs(rT(t,e*2)-e)}function JH(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function eG(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function tG(t,e){return t+Math.floor(Math.random()*(e-t+1))}function nG(t,e){return t+Math.random()*(e-t)}function rG(t){return t*(.5-Math.random())}function iG(t){t!==void 0&&(KC=t);let e=KC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function oG(t){return t*td}function aG(t){return t*Ud}function B1(t){return(t&t-1)===0&&t!==0}function sG(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Pv(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function lG(t,e,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((e+r)/2),u=a((e+r)/2),f=o((e-r)/2),h=a((e-r)/2),d=o((r-e)/2),v=a((r-e)/2);switch(i){case"XYX":t.set(s*u,l*f,l*h,s*c);break;case"YZY":t.set(l*h,s*u,l*f,s*c);break;case"ZXZ":t.set(l*f,l*h,s*u,s*c);break;case"XZX":t.set(s*u,l*v,l*d,s*c);break;case"YXY":t.set(l*d,s*u,l*v,s*c);break;case"ZYZ":t.set(l*v,l*d,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Uc(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Rr(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Dj={DEG2RAD:td,RAD2DEG:Ud,generateUUID:Pf,clamp:Sr,euclideanModulo:rT,mapLinear:KH,inverseLerp:YH,lerp:nd,damp:QH,pingpong:ZH,smoothstep:JH,smootherstep:eG,randInt:tG,randFloat:nG,randFloatSpread:rG,seededRandom:iG,degToRad:oG,radToDeg:aG,isPowerOfTwo:B1,ceilPowerOfTwo:sG,floorPowerOfTwo:Pv,setQuaternionFromProperEuler:lG,normalize:Rr,denormalize:Uc};class gt{constructor(e=0,n=0){gt.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Sr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),o=this.x-e.x,a=this.y-e.y;return this.x=o*r-a*i+e.x,this.y=o*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class wt{constructor(e,n,r,i,o,a,s,l,c){wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,a,s,l,c)}set(e,n,r,i,o,a,s,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=s,u[3]=n,u[4]=o,u[5]=l,u[6]=r,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,a=r[0],s=r[3],l=r[6],c=r[1],u=r[4],f=r[7],h=r[2],d=r[5],v=r[8],y=i[0],g=i[3],p=i[6],x=i[1],_=i[4],T=i[7],w=i[2],M=i[5],b=i[8];return o[0]=a*y+s*x+l*w,o[3]=a*g+s*_+l*M,o[6]=a*p+s*T+l*b,o[1]=c*y+u*x+f*w,o[4]=c*g+u*_+f*M,o[7]=c*p+u*T+f*b,o[2]=h*y+d*x+v*w,o[5]=h*g+d*_+v*M,o[8]=h*p+d*T+v*b,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8];return n*a*u-n*s*c-r*o*u+r*s*l+i*o*c-i*a*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=u*a-s*c,h=s*l-u*o,d=c*o-a*l,v=n*f+r*h+i*d;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/v;return e[0]=f*y,e[1]=(i*c-u*r)*y,e[2]=(s*r-i*a)*y,e[3]=h*y,e[4]=(u*n-i*l)*y,e[5]=(i*o-s*n)*y,e[6]=d*y,e[7]=(r*l-c*n)*y,e[8]=(a*n-r*o)*y,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,o,a,s){const l=Math.cos(o),c=Math.sin(o);return this.set(r*l,r*c,-r*(l*a+c*s)+a+e,-i*c,i*l,-i*(-c*a+l*s)+s+n,0,0,1),this}scale(e,n){return this.premultiply(gx.makeScale(e,n)),this}rotate(e){return this.premultiply(gx.makeRotation(-e)),this}translate(e,n){return this.premultiply(gx.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const gx=new wt;function Lj(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function Fd(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function cG(){const t=Fd("canvas");return t.style.display="block",t}const YC={};function rd(t){t in YC||(YC[t]=!0,console.warn(t))}const QC=new wt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),ZC=new wt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Lm={[_a]:{transfer:Ev,primaries:Tv,toReference:t=>t,fromReference:t=>t},[jn]:{transfer:tn,primaries:Tv,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[g0]:{transfer:Ev,primaries:Av,toReference:t=>t.applyMatrix3(ZC),fromReference:t=>t.applyMatrix3(QC)},[nT]:{transfer:tn,primaries:Av,toReference:t=>t.convertSRGBToLinear().applyMatrix3(ZC),fromReference:t=>t.applyMatrix3(QC).convertLinearToSRGB()}},uG=new Set([_a,g0]),zt={enabled:!0,_workingColorSpace:_a,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!uG.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=Lm[e].toReference,i=Lm[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return Lm[t].primaries},getTransfer:function(t){return t===Pi?Ev:Lm[t].transfer}};function bu(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function vx(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let vc;class kj{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{vc===void 0&&(vc=Fd("canvas")),vc.width=e.width,vc.height=e.height;const r=vc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=vc}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Fd("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let a=0;a<o.length;a++)o[a]=bu(o[a]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(bu(n[r]/255)*255):n[r]=bu(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let fG=0;class jj{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:fG++}),this.uuid=Pf(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let a=0,s=i.length;a<s;a++)i[a].isDataTexture?o.push(yx(i[a].image)):o.push(yx(i[a]))}else o=yx(i);r.url=o}return n||(e.images[this.uuid]=r),r}}function yx(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?kj.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let hG=0;class Qr extends Yl{constructor(e=Qr.DEFAULT_IMAGE,n=Qr.DEFAULT_MAPPING,r=eo,i=eo,o=Mi,a=kd,s=to,l=ps,c=Qr.DEFAULT_ANISOTROPY,u=Pi){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:hG++}),this.uuid=Pf(),this.name="",this.source=new jj(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=a,this.anisotropy=c,this.format=s,this.internalFormat=null,this.type=l,this.offset=new gt(0,0),this.repeat=new gt(1,1),this.center=new gt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(rd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===Pl?jn:Pi),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Tj)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case U1:e.x=e.x-Math.floor(e.x);break;case eo:e.x=e.x<0?0:1;break;case F1:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case U1:e.y=e.y-Math.floor(e.y);break;case eo:e.y=e.y<0?0:1;break;case F1:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return rd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===jn?Pl:Ij}set encoding(e){rd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Pl?jn:Pi}}Qr.DEFAULT_IMAGE=null;Qr.DEFAULT_MAPPING=Tj;Qr.DEFAULT_ANISOTROPY=1;class Zn{constructor(e=0,n=0,r=0,i=1){Zn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=this.w,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i+a[12]*o,this.y=a[1]*n+a[5]*r+a[9]*i+a[13]*o,this.z=a[2]*n+a[6]*r+a[10]*i+a[14]*o,this.w=a[3]*n+a[7]*r+a[11]*i+a[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,o;const l=e.elements,c=l[0],u=l[4],f=l[8],h=l[1],d=l[5],v=l[9],y=l[2],g=l[6],p=l[10];if(Math.abs(u-h)<.01&&Math.abs(f-y)<.01&&Math.abs(v-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(f+y)<.1&&Math.abs(v+g)<.1&&Math.abs(c+d+p-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const _=(c+1)/2,T=(d+1)/2,w=(p+1)/2,M=(u+h)/4,b=(f+y)/4,A=(v+g)/4;return _>T&&_>w?_<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(_),i=M/r,o=b/r):T>w?T<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(T),r=M/i,o=A/i):w<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(w),r=b/o,i=A/o),this.set(r,i,o,n),this}let x=Math.sqrt((g-v)*(g-v)+(f-y)*(f-y)+(h-u)*(h-u));return Math.abs(x)<.001&&(x=1),this.x=(g-v)/x,this.y=(f-y)/x,this.z=(h-u)/x,this.w=Math.acos((c+d+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class dG extends Yl{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Zn(0,0,e,n),this.scissorTest=!1,this.viewport=new Zn(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&(rd("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Pl?jn:Pi),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Mi,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new Qr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new jj(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Fl extends dG{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class Uj extends Qr{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Dr,this.minFilter=Dr,this.wrapR=eo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class pG extends Qr{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Dr,this.minFilter=Dr,this.wrapR=eo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Vl{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,o,a,s){let l=r[i+0],c=r[i+1],u=r[i+2],f=r[i+3];const h=o[a+0],d=o[a+1],v=o[a+2],y=o[a+3];if(s===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f;return}if(s===1){e[n+0]=h,e[n+1]=d,e[n+2]=v,e[n+3]=y;return}if(f!==y||l!==h||c!==d||u!==v){let g=1-s;const p=l*h+c*d+u*v+f*y,x=p>=0?1:-1,_=1-p*p;if(_>Number.EPSILON){const w=Math.sqrt(_),M=Math.atan2(w,p*x);g=Math.sin(g*M)/w,s=Math.sin(s*M)/w}const T=s*x;if(l=l*g+h*T,c=c*g+d*T,u=u*g+v*T,f=f*g+y*T,g===1-s){const w=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=w,c*=w,u*=w,f*=w}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f}static multiplyQuaternionsFlat(e,n,r,i,o,a){const s=r[i],l=r[i+1],c=r[i+2],u=r[i+3],f=o[a],h=o[a+1],d=o[a+2],v=o[a+3];return e[n]=s*v+u*f+l*d-c*h,e[n+1]=l*v+u*h+c*f-s*d,e[n+2]=c*v+u*d+s*h-l*f,e[n+3]=u*v-s*f-l*h-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const r=e._x,i=e._y,o=e._z,a=e._order,s=Math.cos,l=Math.sin,c=s(r/2),u=s(i/2),f=s(o/2),h=l(r/2),d=l(i/2),v=l(o/2);switch(a){case"XYZ":this._x=h*u*f+c*d*v,this._y=c*d*f-h*u*v,this._z=c*u*v+h*d*f,this._w=c*u*f-h*d*v;break;case"YXZ":this._x=h*u*f+c*d*v,this._y=c*d*f-h*u*v,this._z=c*u*v-h*d*f,this._w=c*u*f+h*d*v;break;case"ZXY":this._x=h*u*f-c*d*v,this._y=c*d*f+h*u*v,this._z=c*u*v+h*d*f,this._w=c*u*f-h*d*v;break;case"ZYX":this._x=h*u*f-c*d*v,this._y=c*d*f+h*u*v,this._z=c*u*v-h*d*f,this._w=c*u*f+h*d*v;break;case"YZX":this._x=h*u*f+c*d*v,this._y=c*d*f+h*u*v,this._z=c*u*v-h*d*f,this._w=c*u*f-h*d*v;break;case"XZY":this._x=h*u*f-c*d*v,this._y=c*d*f-h*u*v,this._z=c*u*v+h*d*f,this._w=c*u*f+h*d*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],l=n[9],c=n[2],u=n[6],f=n[10],h=r+s+f;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(u-l)*d,this._y=(o-c)*d,this._z=(a-i)*d}else if(r>s&&r>f){const d=2*Math.sqrt(1+r-s-f);this._w=(u-l)/d,this._x=.25*d,this._y=(i+a)/d,this._z=(o+c)/d}else if(s>f){const d=2*Math.sqrt(1+s-r-f);this._w=(o-c)/d,this._x=(i+a)/d,this._y=.25*d,this._z=(l+u)/d}else{const d=2*Math.sqrt(1+f-r-s);this._w=(a-i)/d,this._x=(o+c)/d,this._y=(l+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Sr(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,o=e._z,a=e._w,s=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+a*s+i*c-o*l,this._y=i*u+a*l+o*s-r*c,this._z=o*u+a*c+r*l-i*s,this._w=a*u-r*s-i*l-o*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,a=this._w;let s=a*e._w+r*e._x+i*e._y+o*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=r,this._y=i,this._z=o,this;const l=1-s*s;if(l<=Number.EPSILON){const d=1-n;return this._w=d*a+n*this._w,this._x=d*r+n*this._x,this._y=d*i+n*this._y,this._z=d*o+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,s),f=Math.sin((1-n)*u)/c,h=Math.sin(n*u)/c;return this._w=a*f+this._w*h,this._x=r*f+this._x*h,this._y=i*f+this._y*h,this._z=o*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(o),r*Math.cos(o),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class te{constructor(e=0,n=0,r=0){te.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(JC.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(JC.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=e.elements,a=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*a,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*a,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*a,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,o=e.x,a=e.y,s=e.z,l=e.w,c=2*(a*i-s*r),u=2*(s*n-o*i),f=2*(o*r-a*n);return this.x=n+l*c+a*f-s*u,this.y=r+l*u+s*c-o*f,this.z=i+l*f+o*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,o=e.z,a=n.x,s=n.y,l=n.z;return this.x=i*l-o*s,this.y=o*a-r*l,this.z=r*s-i*a,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return _x.copy(this).projectOnVector(e),this.sub(_x)}reflect(e){return this.sub(_x.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Sr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _x=new te,JC=new Vl;class Bp{constructor(e=new te(1/0,1/0,1/0),n=new te(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Hi.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Hi.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Hi.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let a=0,s=o.count;a<s;a++)e.isMesh===!0?e.getVertexPosition(a,Hi):Hi.fromBufferAttribute(o,a),Hi.applyMatrix4(e.matrixWorld),this.expandByPoint(Hi);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),km.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),km.copy(r.boundingBox)),km.applyMatrix4(e.matrixWorld),this.union(km)}const i=e.children;for(let o=0,a=i.length;o<a;o++)this.expandByObject(i[o],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Hi),Hi.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(yh),jm.subVectors(this.max,yh),yc.subVectors(e.a,yh),_c.subVectors(e.b,yh),xc.subVectors(e.c,yh),ka.subVectors(_c,yc),ja.subVectors(xc,_c),Ws.subVectors(yc,xc);let n=[0,-ka.z,ka.y,0,-ja.z,ja.y,0,-Ws.z,Ws.y,ka.z,0,-ka.x,ja.z,0,-ja.x,Ws.z,0,-Ws.x,-ka.y,ka.x,0,-ja.y,ja.x,0,-Ws.y,Ws.x,0];return!xx(n,yc,_c,xc,jm)||(n=[1,0,0,0,1,0,0,0,1],!xx(n,yc,_c,xc,jm))?!1:(Um.crossVectors(ka,ja),n=[Um.x,Um.y,Um.z],xx(n,yc,_c,xc,jm))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Hi).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Hi).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:($o[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),$o[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),$o[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),$o[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),$o[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),$o[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),$o[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),$o[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints($o),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const $o=[new te,new te,new te,new te,new te,new te,new te,new te],Hi=new te,km=new Bp,yc=new te,_c=new te,xc=new te,ka=new te,ja=new te,Ws=new te,yh=new te,jm=new te,Um=new te,qs=new te;function xx(t,e,n,r,i){for(let o=0,a=t.length-3;o<=a;o+=3){qs.fromArray(t,o);const s=i.x*Math.abs(qs.x)+i.y*Math.abs(qs.y)+i.z*Math.abs(qs.z),l=e.dot(qs),c=n.dot(qs),u=r.dot(qs);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>s)return!1}return!0}const mG=new Bp,_h=new te,bx=new te;class v0{constructor(e=new te,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):mG.setFromPoints(e).getCenter(r);let i=0;for(let o=0,a=e.length;o<a;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;_h.subVectors(e,this.center);const n=_h.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(_h,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(bx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(_h.copy(e.center).add(bx)),this.expandByPoint(_h.copy(e.center).sub(bx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const zo=new te,wx=new te,Fm=new te,Ua=new te,Sx=new te,Vm=new te,Ex=new te;class y0{constructor(e=new te,n=new te(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,zo)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=zo.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(zo.copy(this.origin).addScaledVector(this.direction,n),zo.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){wx.copy(e).add(n).multiplyScalar(.5),Fm.copy(n).sub(e).normalize(),Ua.copy(this.origin).sub(wx);const o=e.distanceTo(n)*.5,a=-this.direction.dot(Fm),s=Ua.dot(this.direction),l=-Ua.dot(Fm),c=Ua.lengthSq(),u=Math.abs(1-a*a);let f,h,d,v;if(u>0)if(f=a*l-s,h=a*s-l,v=o*u,f>=0)if(h>=-v)if(h<=v){const y=1/u;f*=y,h*=y,d=f*(f+a*h+2*s)+h*(a*f+h+2*l)+c}else h=o,f=Math.max(0,-(a*h+s)),d=-f*f+h*(h+2*l)+c;else h=-o,f=Math.max(0,-(a*h+s)),d=-f*f+h*(h+2*l)+c;else h<=-v?(f=Math.max(0,-(-a*o+s)),h=f>0?-o:Math.min(Math.max(-o,-l),o),d=-f*f+h*(h+2*l)+c):h<=v?(f=0,h=Math.min(Math.max(-o,-l),o),d=h*(h+2*l)+c):(f=Math.max(0,-(a*o+s)),h=f>0?o:Math.min(Math.max(-o,-l),o),d=-f*f+h*(h+2*l)+c);else h=a>0?-o:o,f=Math.max(0,-(a*h+s)),d=-f*f+h*(h+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(wx).addScaledVector(Fm,h),d}intersectSphere(e,n){zo.subVectors(e.center,this.origin);const r=zo.dot(this.direction),i=zo.dot(zo)-r*r,o=e.radius*e.radius;if(i>o)return null;const a=Math.sqrt(o-i),s=r-a,l=r+a;return l<0?null:s<0?this.at(l,n):this.at(s,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,o,a,s,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),u>=0?(o=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(o=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),r>a||o>i||((o>r||isNaN(r))&&(r=o),(a<i||isNaN(i))&&(i=a),f>=0?(s=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(s=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),r>l||s>i)||((s>r||r!==r)&&(r=s),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,zo)!==null}intersectTriangle(e,n,r,i,o){Sx.subVectors(n,e),Vm.subVectors(r,e),Ex.crossVectors(Sx,Vm);let a=this.direction.dot(Ex),s;if(a>0){if(i)return null;s=1}else if(a<0)s=-1,a=-a;else return null;Ua.subVectors(this.origin,e);const l=s*this.direction.dot(Vm.crossVectors(Ua,Vm));if(l<0)return null;const c=s*this.direction.dot(Sx.cross(Ua));if(c<0||l+c>a)return null;const u=-s*Ua.dot(Ex);return u<0?null:this.at(u/a,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class In{constructor(e,n,r,i,o,a,s,l,c,u,f,h,d,v,y,g){In.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,a,s,l,c,u,f,h,d,v,y,g)}set(e,n,r,i,o,a,s,l,c,u,f,h,d,v,y,g){const p=this.elements;return p[0]=e,p[4]=n,p[8]=r,p[12]=i,p[1]=o,p[5]=a,p[9]=s,p[13]=l,p[2]=c,p[6]=u,p[10]=f,p[14]=h,p[3]=d,p[7]=v,p[11]=y,p[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new In().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/bc.setFromMatrixColumn(e,0).length(),o=1/bc.setFromMatrixColumn(e,1).length(),a=1/bc.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,o=e.z,a=Math.cos(r),s=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(o),f=Math.sin(o);if(e.order==="XYZ"){const h=a*u,d=a*f,v=s*u,y=s*f;n[0]=l*u,n[4]=-l*f,n[8]=c,n[1]=d+v*c,n[5]=h-y*c,n[9]=-s*l,n[2]=y-h*c,n[6]=v+d*c,n[10]=a*l}else if(e.order==="YXZ"){const h=l*u,d=l*f,v=c*u,y=c*f;n[0]=h+y*s,n[4]=v*s-d,n[8]=a*c,n[1]=a*f,n[5]=a*u,n[9]=-s,n[2]=d*s-v,n[6]=y+h*s,n[10]=a*l}else if(e.order==="ZXY"){const h=l*u,d=l*f,v=c*u,y=c*f;n[0]=h-y*s,n[4]=-a*f,n[8]=v+d*s,n[1]=d+v*s,n[5]=a*u,n[9]=y-h*s,n[2]=-a*c,n[6]=s,n[10]=a*l}else if(e.order==="ZYX"){const h=a*u,d=a*f,v=s*u,y=s*f;n[0]=l*u,n[4]=v*c-d,n[8]=h*c+y,n[1]=l*f,n[5]=y*c+h,n[9]=d*c-v,n[2]=-c,n[6]=s*l,n[10]=a*l}else if(e.order==="YZX"){const h=a*l,d=a*c,v=s*l,y=s*c;n[0]=l*u,n[4]=y-h*f,n[8]=v*f+d,n[1]=f,n[5]=a*u,n[9]=-s*u,n[2]=-c*u,n[6]=d*f+v,n[10]=h-y*f}else if(e.order==="XZY"){const h=a*l,d=a*c,v=s*l,y=s*c;n[0]=l*u,n[4]=-f,n[8]=c*u,n[1]=h*f+y,n[5]=a*u,n[9]=d*f-v,n[2]=v*f-d,n[6]=s*u,n[10]=y*f+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(gG,e,vG)}lookAt(e,n,r){const i=this.elements;return ti.subVectors(e,n),ti.lengthSq()===0&&(ti.z=1),ti.normalize(),Fa.crossVectors(r,ti),Fa.lengthSq()===0&&(Math.abs(r.z)===1?ti.x+=1e-4:ti.z+=1e-4,ti.normalize(),Fa.crossVectors(r,ti)),Fa.normalize(),Bm.crossVectors(ti,Fa),i[0]=Fa.x,i[4]=Bm.x,i[8]=ti.x,i[1]=Fa.y,i[5]=Bm.y,i[9]=ti.y,i[2]=Fa.z,i[6]=Bm.z,i[10]=ti.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,a=r[0],s=r[4],l=r[8],c=r[12],u=r[1],f=r[5],h=r[9],d=r[13],v=r[2],y=r[6],g=r[10],p=r[14],x=r[3],_=r[7],T=r[11],w=r[15],M=i[0],b=i[4],A=i[8],E=i[12],P=i[1],R=i[5],N=i[9],O=i[13],D=i[2],L=i[6],W=i[10],$=i[14],B=i[3],X=i[7],K=i[11],z=i[15];return o[0]=a*M+s*P+l*D+c*B,o[4]=a*b+s*R+l*L+c*X,o[8]=a*A+s*N+l*W+c*K,o[12]=a*E+s*O+l*$+c*z,o[1]=u*M+f*P+h*D+d*B,o[5]=u*b+f*R+h*L+d*X,o[9]=u*A+f*N+h*W+d*K,o[13]=u*E+f*O+h*$+d*z,o[2]=v*M+y*P+g*D+p*B,o[6]=v*b+y*R+g*L+p*X,o[10]=v*A+y*N+g*W+p*K,o[14]=v*E+y*O+g*$+p*z,o[3]=x*M+_*P+T*D+w*B,o[7]=x*b+_*R+T*L+w*X,o[11]=x*A+_*N+T*W+w*K,o[15]=x*E+_*O+T*$+w*z,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],o=e[12],a=e[1],s=e[5],l=e[9],c=e[13],u=e[2],f=e[6],h=e[10],d=e[14],v=e[3],y=e[7],g=e[11],p=e[15];return v*(+o*l*f-i*c*f-o*s*h+r*c*h+i*s*d-r*l*d)+y*(+n*l*d-n*c*h+o*a*h-i*a*d+i*c*u-o*l*u)+g*(+n*c*f-n*s*d-o*a*f+r*a*d+o*s*u-r*c*u)+p*(-i*s*u-n*l*f+n*s*h+i*a*f-r*a*h+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],d=e[11],v=e[12],y=e[13],g=e[14],p=e[15],x=f*g*c-y*h*c+y*l*d-s*g*d-f*l*p+s*h*p,_=v*h*c-u*g*c-v*l*d+a*g*d+u*l*p-a*h*p,T=u*y*c-v*f*c+v*s*d-a*y*d-u*s*p+a*f*p,w=v*f*l-u*y*l-v*s*h+a*y*h+u*s*g-a*f*g,M=n*x+r*_+i*T+o*w;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const b=1/M;return e[0]=x*b,e[1]=(y*h*o-f*g*o-y*i*d+r*g*d+f*i*p-r*h*p)*b,e[2]=(s*g*o-y*l*o+y*i*c-r*g*c-s*i*p+r*l*p)*b,e[3]=(f*l*o-s*h*o-f*i*c+r*h*c+s*i*d-r*l*d)*b,e[4]=_*b,e[5]=(u*g*o-v*h*o+v*i*d-n*g*d-u*i*p+n*h*p)*b,e[6]=(v*l*o-a*g*o-v*i*c+n*g*c+a*i*p-n*l*p)*b,e[7]=(a*h*o-u*l*o+u*i*c-n*h*c-a*i*d+n*l*d)*b,e[8]=T*b,e[9]=(v*f*o-u*y*o-v*r*d+n*y*d+u*r*p-n*f*p)*b,e[10]=(a*y*o-v*s*o+v*r*c-n*y*c-a*r*p+n*s*p)*b,e[11]=(u*s*o-a*f*o-u*r*c+n*f*c+a*r*d-n*s*d)*b,e[12]=w*b,e[13]=(u*y*i-v*f*i+v*r*h-n*y*h-u*r*g+n*f*g)*b,e[14]=(v*s*i-a*y*i-v*r*l+n*y*l+a*r*g-n*s*g)*b,e[15]=(a*f*i-u*s*i+u*r*l-n*f*l-a*r*h+n*s*h)*b,this}scale(e){const n=this.elements,r=e.x,i=e.y,o=e.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),o=1-r,a=e.x,s=e.y,l=e.z,c=o*a,u=o*s;return this.set(c*a+r,c*s-i*l,c*l+i*s,0,c*s+i*l,u*s+r,u*l-i*a,0,c*l-i*s,u*l+i*a,o*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,o,a){return this.set(1,r,o,0,e,1,a,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,o=n._x,a=n._y,s=n._z,l=n._w,c=o+o,u=a+a,f=s+s,h=o*c,d=o*u,v=o*f,y=a*u,g=a*f,p=s*f,x=l*c,_=l*u,T=l*f,w=r.x,M=r.y,b=r.z;return i[0]=(1-(y+p))*w,i[1]=(d+T)*w,i[2]=(v-_)*w,i[3]=0,i[4]=(d-T)*M,i[5]=(1-(h+p))*M,i[6]=(g+x)*M,i[7]=0,i[8]=(v+_)*b,i[9]=(g-x)*b,i[10]=(1-(h+y))*b,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let o=bc.set(i[0],i[1],i[2]).length();const a=bc.set(i[4],i[5],i[6]).length(),s=bc.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],Gi.copy(this);const c=1/o,u=1/a,f=1/s;return Gi.elements[0]*=c,Gi.elements[1]*=c,Gi.elements[2]*=c,Gi.elements[4]*=u,Gi.elements[5]*=u,Gi.elements[6]*=u,Gi.elements[8]*=f,Gi.elements[9]*=f,Gi.elements[10]*=f,n.setFromRotationMatrix(Gi),r.x=o,r.y=a,r.z=s,this}makePerspective(e,n,r,i,o,a,s=ta){const l=this.elements,c=2*o/(n-e),u=2*o/(r-i),f=(n+e)/(n-e),h=(r+i)/(r-i);let d,v;if(s===ta)d=-(a+o)/(a-o),v=-2*a*o/(a-o);else if(s===Mv)d=-a/(a-o),v=-a*o/(a-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,o,a,s=ta){const l=this.elements,c=1/(n-e),u=1/(r-i),f=1/(a-o),h=(n+e)*c,d=(r+i)*u;let v,y;if(s===ta)v=(a+o)*f,y=-2*f;else if(s===Mv)v=o*f,y=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=y,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const bc=new te,Gi=new In,gG=new te(0,0,0),vG=new te(1,1,1),Fa=new te,Bm=new te,ti=new te,e2=new In,t2=new Vl;class _0{constructor(e=0,n=0,r=0,i=_0.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,o=i[0],a=i[4],s=i[8],l=i[1],c=i[5],u=i[9],f=i[2],h=i[6],d=i[10];switch(n){case"XYZ":this._y=Math.asin(Sr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Sr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(Sr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-Sr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Sr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-Sr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return e2.makeRotationFromQuaternion(e),this.setFromRotationMatrix(e2,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return t2.setFromEuler(this),this.setFromQuaternion(t2,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}_0.DEFAULT_ORDER="XYZ";class iT{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let yG=0;const n2=new te,wc=new Vl,Ho=new In,$m=new te,xh=new te,_G=new te,xG=new Vl,r2=new te(1,0,0),i2=new te(0,1,0),o2=new te(0,0,1),bG={type:"added"},wG={type:"removed"};class cr extends Yl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:yG++}),this.uuid=Pf(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=cr.DEFAULT_UP.clone();const e=new te,n=new _0,r=new Vl,i=new te(1,1,1);function o(){r.setFromEuler(n,!1)}function a(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new In},normalMatrix:{value:new wt}}),this.matrix=new In,this.matrixWorld=new In,this.matrixAutoUpdate=cr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new iT,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return wc.setFromAxisAngle(e,n),this.quaternion.multiply(wc),this}rotateOnWorldAxis(e,n){return wc.setFromAxisAngle(e,n),this.quaternion.premultiply(wc),this}rotateX(e){return this.rotateOnAxis(r2,e)}rotateY(e){return this.rotateOnAxis(i2,e)}rotateZ(e){return this.rotateOnAxis(o2,e)}translateOnAxis(e,n){return n2.copy(e).applyQuaternion(this.quaternion),this.position.add(n2.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(r2,e)}translateY(e){return this.translateOnAxis(i2,e)}translateZ(e){return this.translateOnAxis(o2,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ho.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?$m.copy(e):$m.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),xh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ho.lookAt(xh,$m,this.up):Ho.lookAt($m,xh,this.up),this.quaternion.setFromRotationMatrix(Ho),i&&(Ho.extractRotation(i.matrixWorld),wc.setFromRotationMatrix(Ho),this.quaternion.premultiply(wc.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(bG)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(wG)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ho.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ho.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ho),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,n);if(a!==void 0)return a}}getObjectsByProperty(e,n){let r=[];this[e]===n&&r.push(this);for(let i=0,o=this.children.length;i<o;i++){const a=this.children[i].getObjectsByProperty(e,n);a.length>0&&(r=r.concat(a))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xh,e,_G),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xh,xG,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const o=n[r];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let o=0,a=i.length;o<a;o++){const s=i[o];s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function o(s,l){return s[l.uuid]===void 0&&(s[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const l=s.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];o(e.shapes,f)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let l=0,c=this.material.length;l<c;l++)s.push(o(e.materials,this.material[l]));i.material=s}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++){const l=this.animations[s];i.animations.push(o(e.animations,l))}}if(n){const s=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),f=a(e.shapes),h=a(e.skeletons),d=a(e.animations),v=a(e.nodes);s.length>0&&(r.geometries=s),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),f.length>0&&(r.shapes=f),h.length>0&&(r.skeletons=h),d.length>0&&(r.animations=d),v.length>0&&(r.nodes=v)}return r.object=i,r;function a(s){const l=[];for(const c in s){const u=s[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}cr.DEFAULT_UP=new te(0,1,0);cr.DEFAULT_MATRIX_AUTO_UPDATE=!0;cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Wi=new te,Go=new te,Tx=new te,Wo=new te,Sc=new te,Ec=new te,a2=new te,Ax=new te,Mx=new te,Px=new te;let zm=!1;class Ji{constructor(e=new te,n=new te,r=new te){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Wi.subVectors(e,n),i.cross(Wi);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,n,r,i,o){Wi.subVectors(i,n),Go.subVectors(r,n),Tx.subVectors(e,n);const a=Wi.dot(Wi),s=Wi.dot(Go),l=Wi.dot(Tx),c=Go.dot(Go),u=Go.dot(Tx),f=a*c-s*s;if(f===0)return o.set(-2,-1,-1);const h=1/f,d=(c*l-s*u)*h,v=(a*u-s*l)*h;return o.set(1-d-v,v,d)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Wo),Wo.x>=0&&Wo.y>=0&&Wo.x+Wo.y<=1}static getUV(e,n,r,i,o,a,s,l){return zm===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),zm=!0),this.getInterpolation(e,n,r,i,o,a,s,l)}static getInterpolation(e,n,r,i,o,a,s,l){return this.getBarycoord(e,n,r,i,Wo),l.setScalar(0),l.addScaledVector(o,Wo.x),l.addScaledVector(a,Wo.y),l.addScaledVector(s,Wo.z),l}static isFrontFacing(e,n,r,i){return Wi.subVectors(r,n),Go.subVectors(e,n),Wi.cross(Go).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Wi.subVectors(this.c,this.b),Go.subVectors(this.a,this.b),Wi.cross(Go).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ji.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Ji.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,o){return zm===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),zm=!0),Ji.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}getInterpolation(e,n,r,i,o){return Ji.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}containsPoint(e){return Ji.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ji.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,o=this.c;let a,s;Sc.subVectors(i,r),Ec.subVectors(o,r),Ax.subVectors(e,r);const l=Sc.dot(Ax),c=Ec.dot(Ax);if(l<=0&&c<=0)return n.copy(r);Mx.subVectors(e,i);const u=Sc.dot(Mx),f=Ec.dot(Mx);if(u>=0&&f<=u)return n.copy(i);const h=l*f-u*c;if(h<=0&&l>=0&&u<=0)return a=l/(l-u),n.copy(r).addScaledVector(Sc,a);Px.subVectors(e,o);const d=Sc.dot(Px),v=Ec.dot(Px);if(v>=0&&d<=v)return n.copy(o);const y=d*c-l*v;if(y<=0&&c>=0&&v<=0)return s=c/(c-v),n.copy(r).addScaledVector(Ec,s);const g=u*v-d*f;if(g<=0&&f-u>=0&&d-v>=0)return a2.subVectors(o,i),s=(f-u)/(f-u+(d-v)),n.copy(i).addScaledVector(a2,s);const p=1/(g+y+h);return a=y*p,s=h*p,n.copy(r).addScaledVector(Sc,a).addScaledVector(Ec,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Fj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Va={h:0,s:0,l:0},Hm={h:0,s:0,l:0};function Cx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}let Rt=class{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=jn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,zt.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=zt.workingColorSpace){return this.r=e,this.g=n,this.b=r,zt.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=zt.workingColorSpace){if(e=rT(e,1),n=Sr(n,0,1),r=Sr(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,a=2*r-o;this.r=Cx(a,o,e+1/3),this.g=Cx(a,o,e),this.b=Cx(a,o,e-1/3)}return zt.toWorkingColorSpace(this,i),this}setStyle(e,n=jn){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const a=i[1],s=i[2];switch(a){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],a=o.length;if(a===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(a===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=jn){const r=Fj[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=bu(e.r),this.g=bu(e.g),this.b=bu(e.b),this}copyLinearToSRGB(e){return this.r=vx(e.r),this.g=vx(e.g),this.b=vx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=jn){return zt.fromWorkingColorSpace(vr.copy(this),e),Math.round(Sr(vr.r*255,0,255))*65536+Math.round(Sr(vr.g*255,0,255))*256+Math.round(Sr(vr.b*255,0,255))}getHexString(e=jn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=zt.workingColorSpace){zt.fromWorkingColorSpace(vr.copy(this),n);const r=vr.r,i=vr.g,o=vr.b,a=Math.max(r,i,o),s=Math.min(r,i,o);let l,c;const u=(s+a)/2;if(s===a)l=0,c=0;else{const f=a-s;switch(c=u<=.5?f/(a+s):f/(2-a-s),a){case r:l=(i-o)/f+(i<o?6:0);break;case i:l=(o-r)/f+2;break;case o:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=zt.workingColorSpace){return zt.fromWorkingColorSpace(vr.copy(this),n),e.r=vr.r,e.g=vr.g,e.b=vr.b,e}getStyle(e=jn){zt.fromWorkingColorSpace(vr.copy(this),e);const n=vr.r,r=vr.g,i=vr.b;return e!==jn?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Va),this.setHSL(Va.h+e,Va.s+n,Va.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Va),e.getHSL(Hm);const r=nd(Va.h,Hm.h,n),i=nd(Va.s,Hm.s,n),o=nd(Va.l,Hm.l,n);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*n+o[3]*r+o[6]*i,this.g=o[1]*n+o[4]*r+o[7]*i,this.b=o[2]*n+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const vr=new Rt;Rt.NAMES=Fj;let SG=0;class Cf extends Yl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:SG++}),this.uuid=Pf(),this.name="",this.type="Material",this.blending=xu,this.side=ws,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=D1,this.blendDst=L1,this.blendEquation=cl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Rt(0,0,0),this.blendAlpha=0,this.depthFunc=Sv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=WC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=gc,this.stencilZFail=gc,this.stencilZPass=gc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==xu&&(r.blending=this.blending),this.side!==ws&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==D1&&(r.blendSrc=this.blendSrc),this.blendDst!==L1&&(r.blendDst=this.blendDst),this.blendEquation!==cl&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Sv&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==WC&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==gc&&(r.stencilFail=this.stencilFail),this.stencilZFail!==gc&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==gc&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const a=[];for(const s in o){const l=o[s];delete l.metadata,a.push(l)}return a}if(n){const o=i(e.textures),a=i(e.images);o.length>0&&(r.textures=o),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class oT extends Cf{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=eT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Mn=new te,Gm=new gt;class Eo{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=qC,this.updateRange={offset:0,count:-1},this.gpuType=es,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)Gm.fromBufferAttribute(this,n),Gm.applyMatrix3(e),this.setXY(n,Gm.x,Gm.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Mn.fromBufferAttribute(this,n),Mn.applyMatrix3(e),this.setXYZ(n,Mn.x,Mn.y,Mn.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Mn.fromBufferAttribute(this,n),Mn.applyMatrix4(e),this.setXYZ(n,Mn.x,Mn.y,Mn.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Mn.fromBufferAttribute(this,n),Mn.applyNormalMatrix(e),this.setXYZ(n,Mn.x,Mn.y,Mn.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Mn.fromBufferAttribute(this,n),Mn.transformDirection(e),this.setXYZ(n,Mn.x,Mn.y,Mn.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=Uc(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Rr(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Uc(n,this.array)),n}setX(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Uc(n,this.array)),n}setY(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Uc(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Uc(n,this.array)),n}setW(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array),o=Rr(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==qC&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class Vj extends Eo{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class Bj extends Eo{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Di extends Eo{constructor(e,n,r){super(new Float32Array(e),n,r)}}let EG=0;const _i=new In,Rx=new cr,Tc=new te,ni=new Bp,bh=new Bp,qn=new te;class ko extends Yl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:EG++}),this.uuid=Pf(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Lj(e)?Bj:Vj)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new wt().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return _i.makeRotationFromQuaternion(e),this.applyMatrix4(_i),this}rotateX(e){return _i.makeRotationX(e),this.applyMatrix4(_i),this}rotateY(e){return _i.makeRotationY(e),this.applyMatrix4(_i),this}rotateZ(e){return _i.makeRotationZ(e),this.applyMatrix4(_i),this}translate(e,n,r){return _i.makeTranslation(e,n,r),this.applyMatrix4(_i),this}scale(e,n,r){return _i.makeScale(e,n,r),this.applyMatrix4(_i),this}lookAt(e){return Rx.lookAt(e),Rx.updateMatrix(),this.applyMatrix4(Rx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Tc).negate(),this.translate(Tc.x,Tc.y,Tc.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Di(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Bp);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new te(-1/0,-1/0,-1/0),new te(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const o=n[r];ni.setFromBufferAttribute(o),this.morphTargetsRelative?(qn.addVectors(this.boundingBox.min,ni.min),this.boundingBox.expandByPoint(qn),qn.addVectors(this.boundingBox.max,ni.max),this.boundingBox.expandByPoint(qn)):(this.boundingBox.expandByPoint(ni.min),this.boundingBox.expandByPoint(ni.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new v0);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new te,1/0);return}if(e){const r=this.boundingSphere.center;if(ni.setFromBufferAttribute(e),n)for(let o=0,a=n.length;o<a;o++){const s=n[o];bh.setFromBufferAttribute(s),this.morphTargetsRelative?(qn.addVectors(ni.min,bh.min),ni.expandByPoint(qn),qn.addVectors(ni.max,bh.max),ni.expandByPoint(qn)):(ni.expandByPoint(bh.min),ni.expandByPoint(bh.max))}ni.getCenter(r);let i=0;for(let o=0,a=e.count;o<a;o++)qn.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(qn));if(n)for(let o=0,a=n.length;o<a;o++){const s=n[o],l=this.morphTargetsRelative;for(let c=0,u=s.count;c<u;c++)qn.fromBufferAttribute(s,c),l&&(Tc.fromBufferAttribute(e,c),qn.add(Tc)),i=Math.max(i,r.distanceToSquared(qn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,o=n.normal.array,a=n.uv.array,s=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Eo(new Float32Array(4*s),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let P=0;P<s;P++)c[P]=new te,u[P]=new te;const f=new te,h=new te,d=new te,v=new gt,y=new gt,g=new gt,p=new te,x=new te;function _(P,R,N){f.fromArray(i,P*3),h.fromArray(i,R*3),d.fromArray(i,N*3),v.fromArray(a,P*2),y.fromArray(a,R*2),g.fromArray(a,N*2),h.sub(f),d.sub(f),y.sub(v),g.sub(v);const O=1/(y.x*g.y-g.x*y.y);isFinite(O)&&(p.copy(h).multiplyScalar(g.y).addScaledVector(d,-y.y).multiplyScalar(O),x.copy(d).multiplyScalar(y.x).addScaledVector(h,-g.x).multiplyScalar(O),c[P].add(p),c[R].add(p),c[N].add(p),u[P].add(x),u[R].add(x),u[N].add(x))}let T=this.groups;T.length===0&&(T=[{start:0,count:r.length}]);for(let P=0,R=T.length;P<R;++P){const N=T[P],O=N.start,D=N.count;for(let L=O,W=O+D;L<W;L+=3)_(r[L+0],r[L+1],r[L+2])}const w=new te,M=new te,b=new te,A=new te;function E(P){b.fromArray(o,P*3),A.copy(b);const R=c[P];w.copy(R),w.sub(b.multiplyScalar(b.dot(R))).normalize(),M.crossVectors(A,R);const O=M.dot(u[P])<0?-1:1;l[P*4]=w.x,l[P*4+1]=w.y,l[P*4+2]=w.z,l[P*4+3]=O}for(let P=0,R=T.length;P<R;++P){const N=T[P],O=N.start,D=N.count;for(let L=O,W=O+D;L<W;L+=3)E(r[L+0]),E(r[L+1]),E(r[L+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Eo(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let h=0,d=r.count;h<d;h++)r.setXYZ(h,0,0,0);const i=new te,o=new te,a=new te,s=new te,l=new te,c=new te,u=new te,f=new te;if(e)for(let h=0,d=e.count;h<d;h+=3){const v=e.getX(h+0),y=e.getX(h+1),g=e.getX(h+2);i.fromBufferAttribute(n,v),o.fromBufferAttribute(n,y),a.fromBufferAttribute(n,g),u.subVectors(a,o),f.subVectors(i,o),u.cross(f),s.fromBufferAttribute(r,v),l.fromBufferAttribute(r,y),c.fromBufferAttribute(r,g),s.add(u),l.add(u),c.add(u),r.setXYZ(v,s.x,s.y,s.z),r.setXYZ(y,l.x,l.y,l.z),r.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,d=n.count;h<d;h+=3)i.fromBufferAttribute(n,h+0),o.fromBufferAttribute(n,h+1),a.fromBufferAttribute(n,h+2),u.subVectors(a,o),f.subVectors(i,o),u.cross(f),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)qn.fromBufferAttribute(e,n),qn.normalize(),e.setXYZ(n,qn.x,qn.y,qn.z)}toNonIndexed(){function e(s,l){const c=s.array,u=s.itemSize,f=s.normalized,h=new c.constructor(l.length*u);let d=0,v=0;for(let y=0,g=l.length;y<g;y++){s.isInterleavedBufferAttribute?d=l[y]*s.data.stride+s.offset:d=l[y]*u;for(let p=0;p<u;p++)h[v++]=c[d++]}return new Eo(h,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new ko,r=this.index.array,i=this.attributes;for(const s in i){const l=i[s],c=e(l,r);n.setAttribute(s,c)}const o=this.morphAttributes;for(const s in o){const l=[],c=o[s];for(let u=0,f=c.length;u<f;u++){const h=c[u],d=e(h,r);l.push(d)}n.morphAttributes[s]=l}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let s=0,l=a.length;s<l;s++){const c=a[s];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let o=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,h=c.length;f<h;f++){const d=c[f];u.push(d.toJSON(e.data))}u.length>0&&(i[l]=u,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return s!==null&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const o=e.morphAttributes;for(const c in o){const u=[],f=o[c];for(let h=0,d=f.length;h<d;h++)u.push(f[h].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const f=a[c];this.addGroup(f.start,f.count,f.materialIndex)}const s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const s2=new In,Xs=new y0,Wm=new v0,l2=new te,Ac=new te,Mc=new te,Pc=new te,Ox=new te,qm=new te,Xm=new gt,Km=new gt,Ym=new gt,c2=new te,u2=new te,f2=new te,Qm=new te,Zm=new te;class Gr extends cr{constructor(e=new ko,n=new oT){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,a=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const s=this.morphTargetInfluences;if(o&&s){qm.set(0,0,0);for(let l=0,c=o.length;l<c;l++){const u=s[l],f=o[l];u!==0&&(Ox.fromBufferAttribute(f,e),a?qm.addScaledVector(Ox,u):qm.addScaledVector(Ox.sub(n),u))}n.add(qm)}return n}raycast(e,n){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Wm.copy(r.boundingSphere),Wm.applyMatrix4(o),Xs.copy(e.ray).recast(e.near),!(Wm.containsPoint(Xs.origin)===!1&&(Xs.intersectSphere(Wm,l2)===null||Xs.origin.distanceToSquared(l2)>(e.far-e.near)**2))&&(s2.copy(o).invert(),Xs.copy(e.ray).applyMatrix4(s2),!(r.boundingBox!==null&&Xs.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Xs)))}_computeIntersections(e,n,r){let i;const o=this.geometry,a=this.material,s=o.index,l=o.attributes.position,c=o.attributes.uv,u=o.attributes.uv1,f=o.attributes.normal,h=o.groups,d=o.drawRange;if(s!==null)if(Array.isArray(a))for(let v=0,y=h.length;v<y;v++){const g=h[v],p=a[g.materialIndex],x=Math.max(g.start,d.start),_=Math.min(s.count,Math.min(g.start+g.count,d.start+d.count));for(let T=x,w=_;T<w;T+=3){const M=s.getX(T),b=s.getX(T+1),A=s.getX(T+2);i=Jm(this,p,e,r,c,u,f,M,b,A),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const v=Math.max(0,d.start),y=Math.min(s.count,d.start+d.count);for(let g=v,p=y;g<p;g+=3){const x=s.getX(g),_=s.getX(g+1),T=s.getX(g+2);i=Jm(this,a,e,r,c,u,f,x,_,T),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let v=0,y=h.length;v<y;v++){const g=h[v],p=a[g.materialIndex],x=Math.max(g.start,d.start),_=Math.min(l.count,Math.min(g.start+g.count,d.start+d.count));for(let T=x,w=_;T<w;T+=3){const M=T,b=T+1,A=T+2;i=Jm(this,p,e,r,c,u,f,M,b,A),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const v=Math.max(0,d.start),y=Math.min(l.count,d.start+d.count);for(let g=v,p=y;g<p;g+=3){const x=g,_=g+1,T=g+2;i=Jm(this,a,e,r,c,u,f,x,_,T),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}}}function TG(t,e,n,r,i,o,a,s){let l;if(e.side===Vr?l=r.intersectTriangle(a,o,i,!0,s):l=r.intersectTriangle(i,o,a,e.side===ws,s),l===null)return null;Zm.copy(s),Zm.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Zm);return c<n.near||c>n.far?null:{distance:c,point:Zm.clone(),object:t}}function Jm(t,e,n,r,i,o,a,s,l,c){t.getVertexPosition(s,Ac),t.getVertexPosition(l,Mc),t.getVertexPosition(c,Pc);const u=TG(t,e,n,r,Ac,Mc,Pc,Qm);if(u){i&&(Xm.fromBufferAttribute(i,s),Km.fromBufferAttribute(i,l),Ym.fromBufferAttribute(i,c),u.uv=Ji.getInterpolation(Qm,Ac,Mc,Pc,Xm,Km,Ym,new gt)),o&&(Xm.fromBufferAttribute(o,s),Km.fromBufferAttribute(o,l),Ym.fromBufferAttribute(o,c),u.uv1=Ji.getInterpolation(Qm,Ac,Mc,Pc,Xm,Km,Ym,new gt),u.uv2=u.uv1),a&&(c2.fromBufferAttribute(a,s),u2.fromBufferAttribute(a,l),f2.fromBufferAttribute(a,c),u.normal=Ji.getInterpolation(Qm,Ac,Mc,Pc,c2,u2,f2,new te),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const f={a:s,b:l,c,normal:new te,materialIndex:0};Ji.getNormal(Ac,Mc,Pc,f.normal),u.face=f}return u}class $p extends ko{constructor(e=1,n=1,r=1,i=1,o=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:a};const s=this;i=Math.floor(i),o=Math.floor(o),a=Math.floor(a);const l=[],c=[],u=[],f=[];let h=0,d=0;v("z","y","x",-1,-1,r,n,e,a,o,0),v("z","y","x",1,-1,r,n,-e,a,o,1),v("x","z","y",1,1,e,r,n,i,a,2),v("x","z","y",1,-1,e,r,-n,i,a,3),v("x","y","z",1,-1,e,n,r,i,o,4),v("x","y","z",-1,-1,e,n,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new Di(c,3)),this.setAttribute("normal",new Di(u,3)),this.setAttribute("uv",new Di(f,2));function v(y,g,p,x,_,T,w,M,b,A,E){const P=T/b,R=w/A,N=T/2,O=w/2,D=M/2,L=b+1,W=A+1;let $=0,B=0;const X=new te;for(let K=0;K<W;K++){const z=K*R-O;for(let q=0;q<L;q++){const ee=q*P-N;X[y]=ee*x,X[g]=z*_,X[p]=D,c.push(X.x,X.y,X.z),X[y]=0,X[g]=0,X[p]=M>0?1:-1,u.push(X.x,X.y,X.z),f.push(q/b),f.push(1-K/A),$+=1}}for(let K=0;K<A;K++)for(let z=0;z<b;z++){const q=h+z+L*K,ee=h+z+L*(K+1),me=h+(z+1)+L*(K+1),_e=h+(z+1)+L*K;l.push(q,ee,_e),l.push(ee,me,_e),B+=6}s.addGroup(d,B,E),d+=B,h+=$}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $p(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Uu(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Or(t){const e={};for(let n=0;n<t.length;n++){const r=Uu(t[n]);for(const i in r)e[i]=r[i]}return e}function AG(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function $j(t){return t.getRenderTarget()===null?t.outputColorSpace:zt.workingColorSpace}const MG={clone:Uu,merge:Or};var PG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,CG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class xa extends Cf{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=PG,this.fragmentShader=CG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Uu(e.uniforms),this.uniformsGroups=AG(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?n.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?n.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[i]={type:"m4",value:a.toArray()}:n.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class zj extends cr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new In,this.projectionMatrix=new In,this.projectionMatrixInverse=new In,this.coordinateSystem=ta}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class si extends zj{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Ud*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(td*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ud*2*Math.atan(Math.tan(td*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,o,a){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(td*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;o+=a.offsetX*i/l,n-=a.offsetY*r/c,i*=a.width/l,r*=a.height/c}const s=this.filmOffset;s!==0&&(o+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Cc=-90,Rc=1;class RG extends cr{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new si(Cc,Rc,e,n);i.layers=this.layers,this.add(i);const o=new si(Cc,Rc,e,n);o.layers=this.layers,this.add(o);const a=new si(Cc,Rc,e,n);a.layers=this.layers,this.add(a);const s=new si(Cc,Rc,e,n);s.layers=this.layers,this.add(s);const l=new si(Cc,Rc,e,n);l.layers=this.layers,this.add(l);const c=new si(Cc,Rc,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,o,a,s,l]=n;for(const c of n)this.remove(c);if(e===ta)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Mv)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,a,s,l,c,u]=this.children,f=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const y=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,o),e.setRenderTarget(r,1,i),e.render(n,a),e.setRenderTarget(r,2,i),e.render(n,s),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=y,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(f,h,d),e.xr.enabled=v,r.texture.needsPMREMUpdate=!0}}class Hj extends Qr{constructor(e,n,r,i,o,a,s,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:Lu,super(e,n,r,i,o,a,s,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class OG extends Fl{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&(rd("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Pl?jn:Pi),this.texture=new Hj(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Mi}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new $p(5,5,5),o=new xa({name:"CubemapFromEquirect",uniforms:Uu(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Vr,blending:hs});o.uniforms.tEquirect.value=n;const a=new Gr(i,o),s=n.minFilter;return n.minFilter===kd&&(n.minFilter=Mi),new RG(1,10,this).update(e,a),n.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,n,r,i){const o=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(n,r,i);e.setRenderTarget(o)}}const Ix=new te,IG=new te,NG=new wt;class Wa{constructor(e=new te(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=Ix.subVectors(r,n).cross(IG.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(Ix),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:n.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||NG.getNormalMatrix(e),i=this.coplanarPoint(Ix).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ks=new v0,eg=new te;class aT{constructor(e=new Wa,n=new Wa,r=new Wa,i=new Wa,o=new Wa,a=new Wa){this.planes=[e,n,r,i,o,a]}set(e,n,r,i,o,a){const s=this.planes;return s[0].copy(e),s[1].copy(n),s[2].copy(r),s[3].copy(i),s[4].copy(o),s[5].copy(a),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=ta){const r=this.planes,i=e.elements,o=i[0],a=i[1],s=i[2],l=i[3],c=i[4],u=i[5],f=i[6],h=i[7],d=i[8],v=i[9],y=i[10],g=i[11],p=i[12],x=i[13],_=i[14],T=i[15];if(r[0].setComponents(l-o,h-c,g-d,T-p).normalize(),r[1].setComponents(l+o,h+c,g+d,T+p).normalize(),r[2].setComponents(l+a,h+u,g+v,T+x).normalize(),r[3].setComponents(l-a,h-u,g-v,T-x).normalize(),r[4].setComponents(l-s,h-f,g-y,T-_).normalize(),n===ta)r[5].setComponents(l+s,h+f,g+y,T+_).normalize();else if(n===Mv)r[5].setComponents(s,f,y,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ks.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Ks.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ks)}intersectsSprite(e){return Ks.center.set(0,0,0),Ks.radius=.7071067811865476,Ks.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ks)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(eg.x=i.normal.x>0?e.max.x:e.min.x,eg.y=i.normal.y>0?e.max.y:e.min.y,eg.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(eg)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Gj(){let t=null,e=!1,n=null,r=null;function i(o,a){n(o,a),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function DG(t,e){const n=e.isWebGL2,r=new WeakMap;function i(c,u){const f=c.array,h=c.usage,d=t.createBuffer();t.bindBuffer(u,d),t.bufferData(u,f,h),c.onUploadCallback();let v;if(f instanceof Float32Array)v=t.FLOAT;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)v=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=t.UNSIGNED_SHORT;else if(f instanceof Int16Array)v=t.SHORT;else if(f instanceof Uint32Array)v=t.UNSIGNED_INT;else if(f instanceof Int32Array)v=t.INT;else if(f instanceof Int8Array)v=t.BYTE;else if(f instanceof Uint8Array)v=t.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)v=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:d,type:v,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}function o(c,u,f){const h=u.array,d=u.updateRange;t.bindBuffer(f,c),d.count===-1?t.bufferSubData(f,0,h):(n?t.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count):t.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h.subarray(d.offset,d.offset+d.count)),d.count=-1),u.onUploadCallback()}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function s(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(t.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const h=r.get(c);(!h||h.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=r.get(c);f===void 0?r.set(c,i(c,u)):f.version<c.version&&(o(f.buffer,c,u),f.version=c.version)}return{get:a,remove:s,update:l}}class sT extends ko{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const o=e/2,a=n/2,s=Math.floor(r),l=Math.floor(i),c=s+1,u=l+1,f=e/s,h=n/l,d=[],v=[],y=[],g=[];for(let p=0;p<u;p++){const x=p*h-a;for(let _=0;_<c;_++){const T=_*f-o;v.push(T,-x,0),y.push(0,0,1),g.push(_/s),g.push(1-p/l)}}for(let p=0;p<l;p++)for(let x=0;x<s;x++){const _=x+c*p,T=x+c*(p+1),w=x+1+c*(p+1),M=x+1+c*p;d.push(_,T,M),d.push(T,w,M)}this.setIndex(d),this.setAttribute("position",new Di(v,3)),this.setAttribute("normal",new Di(y,3)),this.setAttribute("uv",new Di(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sT(e.width,e.height,e.widthSegments,e.heightSegments)}}var LG=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,kG=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,jG=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,UG=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,FG=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,VG=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,BG=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,$G=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,zG=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,HG=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,GG=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,WG=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,qG=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,XG=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,KG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,YG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,QG=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,ZG=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,JG=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,e8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,t8=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,n8=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,r8=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,i8=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,o8=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,a8=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,s8=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,l8=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,c8="gl_FragColor = linearToOutputTexel( gl_FragColor );",u8=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,f8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,h8=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,d8=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,p8=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,m8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,g8=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,v8=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,y8=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,_8=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,x8=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,b8=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,w8=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,S8=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,E8=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,T8=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,A8=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,M8=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,P8=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,C8=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,R8=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,O8=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,I8=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,N8=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,D8=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,L8=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,k8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,j8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,U8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,F8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,V8=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,B8=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,$8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,z8=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,H8=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,G8=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,W8=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,q8=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,X8=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,K8=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Y8=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Q8=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Z8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,J8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,eW=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,tW=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,nW=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,rW=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,iW=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,oW=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,aW=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,sW=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,lW=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,cW=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,uW=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,fW=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,hW=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,dW=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,pW=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,mW=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,gW=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,vW=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,yW=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,_W=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,xW=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,bW=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,wW=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,SW=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,EW=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,TW=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,AW=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,MW=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,PW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,CW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,RW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,OW=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const IW=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,NW=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,DW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,LW=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,kW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,jW=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,UW=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,FW=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,VW=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,BW=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,$W=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,zW=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,HW=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,GW=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,WW=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,qW=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XW=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KW=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YW=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,QW=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZW=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,JW=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,e7=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,t7=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,n7=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,r7=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,i7=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,o7=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,a7=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,s7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,l7=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,c7=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,u7=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,f7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,xt={alphahash_fragment:LG,alphahash_pars_fragment:kG,alphamap_fragment:jG,alphamap_pars_fragment:UG,alphatest_fragment:FG,alphatest_pars_fragment:VG,aomap_fragment:BG,aomap_pars_fragment:$G,begin_vertex:zG,beginnormal_vertex:HG,bsdfs:GG,iridescence_fragment:WG,bumpmap_pars_fragment:qG,clipping_planes_fragment:XG,clipping_planes_pars_fragment:KG,clipping_planes_pars_vertex:YG,clipping_planes_vertex:QG,color_fragment:ZG,color_pars_fragment:JG,color_pars_vertex:e8,color_vertex:t8,common:n8,cube_uv_reflection_fragment:r8,defaultnormal_vertex:i8,displacementmap_pars_vertex:o8,displacementmap_vertex:a8,emissivemap_fragment:s8,emissivemap_pars_fragment:l8,colorspace_fragment:c8,colorspace_pars_fragment:u8,envmap_fragment:f8,envmap_common_pars_fragment:h8,envmap_pars_fragment:d8,envmap_pars_vertex:p8,envmap_physical_pars_fragment:A8,envmap_vertex:m8,fog_vertex:g8,fog_pars_vertex:v8,fog_fragment:y8,fog_pars_fragment:_8,gradientmap_pars_fragment:x8,lightmap_fragment:b8,lightmap_pars_fragment:w8,lights_lambert_fragment:S8,lights_lambert_pars_fragment:E8,lights_pars_begin:T8,lights_toon_fragment:M8,lights_toon_pars_fragment:P8,lights_phong_fragment:C8,lights_phong_pars_fragment:R8,lights_physical_fragment:O8,lights_physical_pars_fragment:I8,lights_fragment_begin:N8,lights_fragment_maps:D8,lights_fragment_end:L8,logdepthbuf_fragment:k8,logdepthbuf_pars_fragment:j8,logdepthbuf_pars_vertex:U8,logdepthbuf_vertex:F8,map_fragment:V8,map_pars_fragment:B8,map_particle_fragment:$8,map_particle_pars_fragment:z8,metalnessmap_fragment:H8,metalnessmap_pars_fragment:G8,morphcolor_vertex:W8,morphnormal_vertex:q8,morphtarget_pars_vertex:X8,morphtarget_vertex:K8,normal_fragment_begin:Y8,normal_fragment_maps:Q8,normal_pars_fragment:Z8,normal_pars_vertex:J8,normal_vertex:eW,normalmap_pars_fragment:tW,clearcoat_normal_fragment_begin:nW,clearcoat_normal_fragment_maps:rW,clearcoat_pars_fragment:iW,iridescence_pars_fragment:oW,opaque_fragment:aW,packing:sW,premultiplied_alpha_fragment:lW,project_vertex:cW,dithering_fragment:uW,dithering_pars_fragment:fW,roughnessmap_fragment:hW,roughnessmap_pars_fragment:dW,shadowmap_pars_fragment:pW,shadowmap_pars_vertex:mW,shadowmap_vertex:gW,shadowmask_pars_fragment:vW,skinbase_vertex:yW,skinning_pars_vertex:_W,skinning_vertex:xW,skinnormal_vertex:bW,specularmap_fragment:wW,specularmap_pars_fragment:SW,tonemapping_fragment:EW,tonemapping_pars_fragment:TW,transmission_fragment:AW,transmission_pars_fragment:MW,uv_pars_fragment:PW,uv_pars_vertex:CW,uv_vertex:RW,worldpos_vertex:OW,background_vert:IW,background_frag:NW,backgroundCube_vert:DW,backgroundCube_frag:LW,cube_vert:kW,cube_frag:jW,depth_vert:UW,depth_frag:FW,distanceRGBA_vert:VW,distanceRGBA_frag:BW,equirect_vert:$W,equirect_frag:zW,linedashed_vert:HW,linedashed_frag:GW,meshbasic_vert:WW,meshbasic_frag:qW,meshlambert_vert:XW,meshlambert_frag:KW,meshmatcap_vert:YW,meshmatcap_frag:QW,meshnormal_vert:ZW,meshnormal_frag:JW,meshphong_vert:e7,meshphong_frag:t7,meshphysical_vert:n7,meshphysical_frag:r7,meshtoon_vert:i7,meshtoon_frag:o7,points_vert:a7,points_frag:s7,shadow_vert:l7,shadow_frag:c7,sprite_vert:u7,sprite_frag:f7},Oe={common:{diffuse:{value:new Rt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new wt},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new wt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new wt},normalScale:{value:new gt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Rt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Rt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0},uvTransform:{value:new wt}},sprite:{diffuse:{value:new Rt(16777215)},opacity:{value:1},center:{value:new gt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new wt},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0}}},yo={basic:{uniforms:Or([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.fog]),vertexShader:xt.meshbasic_vert,fragmentShader:xt.meshbasic_frag},lambert:{uniforms:Or([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,Oe.lights,{emissive:{value:new Rt(0)}}]),vertexShader:xt.meshlambert_vert,fragmentShader:xt.meshlambert_frag},phong:{uniforms:Or([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,Oe.lights,{emissive:{value:new Rt(0)},specular:{value:new Rt(1118481)},shininess:{value:30}}]),vertexShader:xt.meshphong_vert,fragmentShader:xt.meshphong_frag},standard:{uniforms:Or([Oe.common,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.roughnessmap,Oe.metalnessmap,Oe.fog,Oe.lights,{emissive:{value:new Rt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xt.meshphysical_vert,fragmentShader:xt.meshphysical_frag},toon:{uniforms:Or([Oe.common,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.gradientmap,Oe.fog,Oe.lights,{emissive:{value:new Rt(0)}}]),vertexShader:xt.meshtoon_vert,fragmentShader:xt.meshtoon_frag},matcap:{uniforms:Or([Oe.common,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,{matcap:{value:null}}]),vertexShader:xt.meshmatcap_vert,fragmentShader:xt.meshmatcap_frag},points:{uniforms:Or([Oe.points,Oe.fog]),vertexShader:xt.points_vert,fragmentShader:xt.points_frag},dashed:{uniforms:Or([Oe.common,Oe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xt.linedashed_vert,fragmentShader:xt.linedashed_frag},depth:{uniforms:Or([Oe.common,Oe.displacementmap]),vertexShader:xt.depth_vert,fragmentShader:xt.depth_frag},normal:{uniforms:Or([Oe.common,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,{opacity:{value:1}}]),vertexShader:xt.meshnormal_vert,fragmentShader:xt.meshnormal_frag},sprite:{uniforms:Or([Oe.sprite,Oe.fog]),vertexShader:xt.sprite_vert,fragmentShader:xt.sprite_frag},background:{uniforms:{uvTransform:{value:new wt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:xt.background_vert,fragmentShader:xt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:xt.backgroundCube_vert,fragmentShader:xt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xt.cube_vert,fragmentShader:xt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xt.equirect_vert,fragmentShader:xt.equirect_frag},distanceRGBA:{uniforms:Or([Oe.common,Oe.displacementmap,{referencePosition:{value:new te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xt.distanceRGBA_vert,fragmentShader:xt.distanceRGBA_frag},shadow:{uniforms:Or([Oe.lights,Oe.fog,{color:{value:new Rt(0)},opacity:{value:1}}]),vertexShader:xt.shadow_vert,fragmentShader:xt.shadow_frag}};yo.physical={uniforms:Or([yo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new wt},clearcoatNormalScale:{value:new gt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new wt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new wt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new wt},sheen:{value:0},sheenColor:{value:new Rt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new wt},transmissionSamplerSize:{value:new gt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new wt},attenuationDistance:{value:0},attenuationColor:{value:new Rt(0)},specularColor:{value:new Rt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new wt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new wt},anisotropyVector:{value:new gt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new wt}}]),vertexShader:xt.meshphysical_vert,fragmentShader:xt.meshphysical_frag};const tg={r:0,b:0,g:0};function h7(t,e,n,r,i,o,a){const s=new Rt(0);let l=o===!0?0:1,c,u,f=null,h=0,d=null;function v(g,p){let x=!1,_=p.isScene===!0?p.background:null;_&&_.isTexture&&(_=(p.backgroundBlurriness>0?n:e).get(_)),_===null?y(s,l):_&&_.isColor&&(y(_,1),x=!0);const T=t.xr.getEnvironmentBlendMode();T==="additive"?r.buffers.color.setClear(0,0,0,1,a):T==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(t.autoClear||x)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),_&&(_.isCubeTexture||_.mapping===m0)?(u===void 0&&(u=new Gr(new $p(1,1,1),new xa({name:"BackgroundCubeMaterial",uniforms:Uu(yo.backgroundCube.uniforms),vertexShader:yo.backgroundCube.vertexShader,fragmentShader:yo.backgroundCube.fragmentShader,side:Vr,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(w,M,b){this.matrixWorld.copyPosition(b.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=_,u.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=p.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,u.material.toneMapped=zt.getTransfer(_.colorSpace)!==tn,(f!==_||h!==_.version||d!==t.toneMapping)&&(u.material.needsUpdate=!0,f=_,h=_.version,d=t.toneMapping),u.layers.enableAll(),g.unshift(u,u.geometry,u.material,0,0,null)):_&&_.isTexture&&(c===void 0&&(c=new Gr(new sT(2,2),new xa({name:"BackgroundMaterial",uniforms:Uu(yo.background.uniforms),vertexShader:yo.background.vertexShader,fragmentShader:yo.background.fragmentShader,side:ws,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=_,c.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,c.material.toneMapped=zt.getTransfer(_.colorSpace)!==tn,_.matrixAutoUpdate===!0&&_.updateMatrix(),c.material.uniforms.uvTransform.value.copy(_.matrix),(f!==_||h!==_.version||d!==t.toneMapping)&&(c.material.needsUpdate=!0,f=_,h=_.version,d=t.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null))}function y(g,p){g.getRGB(tg,$j(t)),r.buffers.color.setClear(tg.r,tg.g,tg.b,p,a)}return{getClearColor:function(){return s},setClearColor:function(g,p=1){s.set(g),l=p,y(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,y(s,l)},render:v}}function d7(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||o!==null,s={},l=g(null);let c=l,u=!1;function f(D,L,W,$,B){let X=!1;if(a){const K=y($,W,L);c!==K&&(c=K,d(c.object)),X=p(D,$,W,B),X&&x(D,$,W,B)}else{const K=L.wireframe===!0;(c.geometry!==$.id||c.program!==W.id||c.wireframe!==K)&&(c.geometry=$.id,c.program=W.id,c.wireframe=K,X=!0)}B!==null&&n.update(B,t.ELEMENT_ARRAY_BUFFER),(X||u)&&(u=!1,A(D,L,W,$),B!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(B).buffer))}function h(){return r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}function d(D){return r.isWebGL2?t.bindVertexArray(D):o.bindVertexArrayOES(D)}function v(D){return r.isWebGL2?t.deleteVertexArray(D):o.deleteVertexArrayOES(D)}function y(D,L,W){const $=W.wireframe===!0;let B=s[D.id];B===void 0&&(B={},s[D.id]=B);let X=B[L.id];X===void 0&&(X={},B[L.id]=X);let K=X[$];return K===void 0&&(K=g(h()),X[$]=K),K}function g(D){const L=[],W=[],$=[];for(let B=0;B<i;B++)L[B]=0,W[B]=0,$[B]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:W,attributeDivisors:$,object:D,attributes:{},index:null}}function p(D,L,W,$){const B=c.attributes,X=L.attributes;let K=0;const z=W.getAttributes();for(const q in z)if(z[q].location>=0){const me=B[q];let _e=X[q];if(_e===void 0&&(q==="instanceMatrix"&&D.instanceMatrix&&(_e=D.instanceMatrix),q==="instanceColor"&&D.instanceColor&&(_e=D.instanceColor)),me===void 0||me.attribute!==_e||_e&&me.data!==_e.data)return!0;K++}return c.attributesNum!==K||c.index!==$}function x(D,L,W,$){const B={},X=L.attributes;let K=0;const z=W.getAttributes();for(const q in z)if(z[q].location>=0){let me=X[q];me===void 0&&(q==="instanceMatrix"&&D.instanceMatrix&&(me=D.instanceMatrix),q==="instanceColor"&&D.instanceColor&&(me=D.instanceColor));const _e={};_e.attribute=me,me&&me.data&&(_e.data=me.data),B[q]=_e,K++}c.attributes=B,c.attributesNum=K,c.index=$}function _(){const D=c.newAttributes;for(let L=0,W=D.length;L<W;L++)D[L]=0}function T(D){w(D,0)}function w(D,L){const W=c.newAttributes,$=c.enabledAttributes,B=c.attributeDivisors;W[D]=1,$[D]===0&&(t.enableVertexAttribArray(D),$[D]=1),B[D]!==L&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](D,L),B[D]=L)}function M(){const D=c.newAttributes,L=c.enabledAttributes;for(let W=0,$=L.length;W<$;W++)L[W]!==D[W]&&(t.disableVertexAttribArray(W),L[W]=0)}function b(D,L,W,$,B,X,K){K===!0?t.vertexAttribIPointer(D,L,W,B,X):t.vertexAttribPointer(D,L,W,$,B,X)}function A(D,L,W,$){if(r.isWebGL2===!1&&(D.isInstancedMesh||$.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const B=$.attributes,X=W.getAttributes(),K=L.defaultAttributeValues;for(const z in X){const q=X[z];if(q.location>=0){let ee=B[z];if(ee===void 0&&(z==="instanceMatrix"&&D.instanceMatrix&&(ee=D.instanceMatrix),z==="instanceColor"&&D.instanceColor&&(ee=D.instanceColor)),ee!==void 0){const me=ee.normalized,_e=ee.itemSize,Ne=n.get(ee);if(Ne===void 0)continue;const We=Ne.buffer,Ue=Ne.type,fe=Ne.bytesPerElement,Re=r.isWebGL2===!0&&(Ue===t.INT||Ue===t.UNSIGNED_INT||ee.gpuType===Aj);if(ee.isInterleavedBufferAttribute){const Ee=ee.data,H=Ee.stride,lt=ee.offset;if(Ee.isInstancedInterleavedBuffer){for(let be=0;be<q.locationSize;be++)w(q.location+be,Ee.meshPerAttribute);D.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=Ee.meshPerAttribute*Ee.count)}else for(let be=0;be<q.locationSize;be++)T(q.location+be);t.bindBuffer(t.ARRAY_BUFFER,We);for(let be=0;be<q.locationSize;be++)b(q.location+be,_e/q.locationSize,Ue,me,H*fe,(lt+_e/q.locationSize*be)*fe,Re)}else{if(ee.isInstancedBufferAttribute){for(let Ee=0;Ee<q.locationSize;Ee++)w(q.location+Ee,ee.meshPerAttribute);D.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let Ee=0;Ee<q.locationSize;Ee++)T(q.location+Ee);t.bindBuffer(t.ARRAY_BUFFER,We);for(let Ee=0;Ee<q.locationSize;Ee++)b(q.location+Ee,_e/q.locationSize,Ue,me,_e*fe,_e/q.locationSize*Ee*fe,Re)}}else if(K!==void 0){const me=K[z];if(me!==void 0)switch(me.length){case 2:t.vertexAttrib2fv(q.location,me);break;case 3:t.vertexAttrib3fv(q.location,me);break;case 4:t.vertexAttrib4fv(q.location,me);break;default:t.vertexAttrib1fv(q.location,me)}}}}M()}function E(){N();for(const D in s){const L=s[D];for(const W in L){const $=L[W];for(const B in $)v($[B].object),delete $[B];delete L[W]}delete s[D]}}function P(D){if(s[D.id]===void 0)return;const L=s[D.id];for(const W in L){const $=L[W];for(const B in $)v($[B].object),delete $[B];delete L[W]}delete s[D.id]}function R(D){for(const L in s){const W=s[L];if(W[D.id]===void 0)continue;const $=W[D.id];for(const B in $)v($[B].object),delete $[B];delete W[D.id]}}function N(){O(),u=!0,c!==l&&(c=l,d(c.object))}function O(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:N,resetDefaultState:O,dispose:E,releaseStatesOfGeometry:P,releaseStatesOfProgram:R,initAttributes:_,enableAttribute:T,disableUnusedAttributes:M}}function p7(t,e,n,r){const i=r.isWebGL2;let o;function a(c){o=c}function s(c,u){t.drawArrays(o,c,u),n.update(u,o,1)}function l(c,u,f){if(f===0)return;let h,d;if(i)h=t,d="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[d](o,c,u,f),n.update(u,o,f)}this.setMode=a,this.render=s,this.renderInstances=l}function m7(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const b=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(b){if(b==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";b="mediump"}return b==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let s=n.precision!==void 0?n.precision:"highp";const l=o(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);const c=a||e.has("WEBGL_draw_buffers"),u=n.logarithmicDepthBuffer===!0,f=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=t.getParameter(t.MAX_TEXTURE_SIZE),v=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),y=t.getParameter(t.MAX_VERTEX_ATTRIBS),g=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),p=t.getParameter(t.MAX_VARYING_VECTORS),x=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),_=h>0,T=a||e.has("OES_texture_float"),w=_&&T,M=a?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:v,maxAttributes:y,maxVertexUniforms:g,maxVaryings:p,maxFragmentUniforms:x,vertexTextures:_,floatFragmentTextures:T,floatVertexTextures:w,maxSamples:M}}function g7(t){const e=this;let n=null,r=0,i=!1,o=!1;const a=new Wa,s=new wt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const d=f.length!==0||h||r!==0||i;return i=h,r=f.length,d},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(f,h){n=u(f,h,0)},this.setState=function(f,h,d){const v=f.clippingPlanes,y=f.clipIntersection,g=f.clipShadows,p=t.get(f);if(!i||v===null||v.length===0||o&&!g)o?u(null):c();else{const x=o?0:r,_=x*4;let T=p.clippingState||null;l.value=T,T=u(v,h,_,d);for(let w=0;w!==_;++w)T[w]=n[w];p.clippingState=T,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=x}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(f,h,d,v){const y=f!==null?f.length:0;let g=null;if(y!==0){if(g=l.value,v!==!0||g===null){const p=d+y*4,x=h.matrixWorldInverse;s.getNormalMatrix(x),(g===null||g.length<p)&&(g=new Float32Array(p));for(let _=0,T=d;_!==y;++_,T+=4)a.copy(f[_]).applyMatrix4(x,s),a.normal.toArray(g,T),g[T+3]=a.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,g}}function v7(t){let e=new WeakMap;function n(a,s){return s===k1?a.mapping=Lu:s===j1&&(a.mapping=ku),a}function r(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const s=a.mapping;if(s===k1||s===j1)if(e.has(a)){const l=e.get(a).texture;return n(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new OG(l.height/2);return c.fromEquirectangularTexture(t,a),e.set(a,c),a.addEventListener("dispose",i),n(c.texture,a.mapping)}else return null}}return a}function i(a){const s=a.target;s.removeEventListener("dispose",i);const l=e.get(s);l!==void 0&&(e.delete(s),l.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class Wj extends zj{constructor(e=-1,n=1,r=1,i=-1,o=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=o,this.far=a,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,o,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,a=r+e,s=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,a=o+c*this.view.width,s-=u*this.view.offsetY,l=s-u*this.view.height}this.projectionMatrix.makeOrthographic(o,a,s,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const tu=4,h2=[.125,.215,.35,.446,.526,.582],ul=20,Nx=new Wj,d2=new Rt;let Dx=null,Lx=0,kx=0;const nl=(1+Math.sqrt(5))/2,Oc=1/nl,p2=[new te(1,1,1),new te(-1,1,1),new te(1,1,-1),new te(-1,1,-1),new te(0,nl,Oc),new te(0,nl,-Oc),new te(Oc,0,nl),new te(-Oc,0,nl),new te(nl,Oc,0),new te(-nl,Oc,0)];class m2{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){Dx=this._renderer.getRenderTarget(),Lx=this._renderer.getActiveCubeFace(),kx=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=y2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=v2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Dx,Lx,kx),e.scissorTest=!1,ng(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Lu||e.mapping===ku?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Dx=this._renderer.getRenderTarget(),Lx=this._renderer.getActiveCubeFace(),kx=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Mi,minFilter:Mi,generateMipmaps:!1,type:jd,format:to,colorSpace:_a,depthBuffer:!1},i=g2(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=g2(e,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=y7(o)),this._blurMaterial=_7(o,e,n)}return i}_compileMaterial(e){const n=new Gr(this._lodPlanes[0],e);this._renderer.compile(n,Nx)}_sceneToCubeUV(e,n,r,i){const s=new si(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,h=u.toneMapping;u.getClearColor(d2),u.toneMapping=ds,u.autoClear=!1;const d=new oT({name:"PMREM.Background",side:Vr,depthWrite:!1,depthTest:!1}),v=new Gr(new $p,d);let y=!1;const g=e.background;g?g.isColor&&(d.color.copy(g),e.background=null,y=!0):(d.color.copy(d2),y=!0);for(let p=0;p<6;p++){const x=p%3;x===0?(s.up.set(0,l[p],0),s.lookAt(c[p],0,0)):x===1?(s.up.set(0,0,l[p]),s.lookAt(0,c[p],0)):(s.up.set(0,l[p],0),s.lookAt(0,0,c[p]));const _=this._cubeSize;ng(i,x*_,p>2?_:0,_,_),u.setRenderTarget(i),y&&u.render(v,s),u.render(e,s)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=h,u.autoClear=f,e.background=g}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Lu||e.mapping===ku;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=y2()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=v2());const o=i?this._cubemapMaterial:this._equirectMaterial,a=new Gr(this._lodPlanes[0],o),s=o.uniforms;s.envMap.value=e;const l=this._cubeSize;ng(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(a,Nx)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=p2[(i-1)%p2.length];this._blur(e,i-1,i,o,a)}n.autoClear=r}_blur(e,n,r,i,o){const a=this._pingPongRenderTarget;this._halfBlur(e,a,n,r,i,"latitudinal",o),this._halfBlur(a,e,r,r,i,"longitudinal",o)}_halfBlur(e,n,r,i,o,a,s){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new Gr(this._lodPlanes[i],c),h=c.uniforms,d=this._sizeLods[r]-1,v=isFinite(o)?Math.PI/(2*d):2*Math.PI/(2*ul-1),y=o/v,g=isFinite(o)?1+Math.floor(u*y):ul;g>ul&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${ul}`);const p=[];let x=0;for(let b=0;b<ul;++b){const A=b/y,E=Math.exp(-A*A/2);p.push(E),b===0?x+=E:b<g&&(x+=2*E)}for(let b=0;b<p.length;b++)p[b]=p[b]/x;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=p,h.latitudinal.value=a==="latitudinal",s&&(h.poleAxis.value=s);const{_lodMax:_}=this;h.dTheta.value=v,h.mipInt.value=_-r;const T=this._sizeLods[i],w=3*T*(i>_-tu?i-_+tu:0),M=4*(this._cubeSize-T);ng(n,w,M,3*T,2*T),l.setRenderTarget(n),l.render(f,Nx)}}function y7(t){const e=[],n=[],r=[];let i=t;const o=t-tu+1+h2.length;for(let a=0;a<o;a++){const s=Math.pow(2,i);n.push(s);let l=1/s;a>t-tu?l=h2[a-t+tu-1]:a===0&&(l=0),r.push(l);const c=1/(s-2),u=-c,f=1+c,h=[u,u,f,u,f,f,u,u,f,f,u,f],d=6,v=6,y=3,g=2,p=1,x=new Float32Array(y*v*d),_=new Float32Array(g*v*d),T=new Float32Array(p*v*d);for(let M=0;M<d;M++){const b=M%3*2/3-1,A=M>2?0:-1,E=[b,A,0,b+2/3,A,0,b+2/3,A+1,0,b,A,0,b+2/3,A+1,0,b,A+1,0];x.set(E,y*v*M),_.set(h,g*v*M);const P=[M,M,M,M,M,M];T.set(P,p*v*M)}const w=new ko;w.setAttribute("position",new Eo(x,y)),w.setAttribute("uv",new Eo(_,g)),w.setAttribute("faceIndex",new Eo(T,p)),e.push(w),i>tu&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function g2(t,e,n){const r=new Fl(t,e,n);return r.texture.mapping=m0,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function ng(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function _7(t,e,n){const r=new Float32Array(ul),i=new te(0,1,0);return new xa({name:"SphericalGaussianBlur",defines:{n:ul,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:lT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:hs,depthTest:!1,depthWrite:!1})}function v2(){return new xa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:lT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:hs,depthTest:!1,depthWrite:!1})}function y2(){return new xa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:lT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:hs,depthTest:!1,depthWrite:!1})}function lT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function x7(t){let e=new WeakMap,n=null;function r(s){if(s&&s.isTexture){const l=s.mapping,c=l===k1||l===j1,u=l===Lu||l===ku;if(c||u)if(s.isRenderTargetTexture&&s.needsPMREMUpdate===!0){s.needsPMREMUpdate=!1;let f=e.get(s);return n===null&&(n=new m2(t)),f=c?n.fromEquirectangular(s,f):n.fromCubemap(s,f),e.set(s,f),f.texture}else{if(e.has(s))return e.get(s).texture;{const f=s.image;if(c&&f&&f.height>0||u&&f&&i(f)){n===null&&(n=new m2(t));const h=c?n.fromEquirectangular(s):n.fromCubemap(s);return e.set(s,h),s.addEventListener("dispose",o),h.texture}else return null}}}return s}function i(s){let l=0;const c=6;for(let u=0;u<c;u++)s[u]!==void 0&&l++;return l===c}function o(s){const l=s.target;l.removeEventListener("dispose",o);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:a}}function b7(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function w7(t,e,n,r){const i={},o=new WeakMap;function a(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const v in h.attributes)e.remove(h.attributes[v]);for(const v in h.morphAttributes){const y=h.morphAttributes[v];for(let g=0,p=y.length;g<p;g++)e.remove(y[g])}h.removeEventListener("dispose",a),delete i[h.id];const d=o.get(h);d&&(e.remove(d),o.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function s(f,h){return i[h.id]===!0||(h.addEventListener("dispose",a),i[h.id]=!0,n.memory.geometries++),h}function l(f){const h=f.attributes;for(const v in h)e.update(h[v],t.ARRAY_BUFFER);const d=f.morphAttributes;for(const v in d){const y=d[v];for(let g=0,p=y.length;g<p;g++)e.update(y[g],t.ARRAY_BUFFER)}}function c(f){const h=[],d=f.index,v=f.attributes.position;let y=0;if(d!==null){const x=d.array;y=d.version;for(let _=0,T=x.length;_<T;_+=3){const w=x[_+0],M=x[_+1],b=x[_+2];h.push(w,M,M,b,b,w)}}else if(v!==void 0){const x=v.array;y=v.version;for(let _=0,T=x.length/3-1;_<T;_+=3){const w=_+0,M=_+1,b=_+2;h.push(w,M,M,b,b,w)}}else return;const g=new(Lj(h)?Bj:Vj)(h,1);g.version=y;const p=o.get(f);p&&e.remove(p),o.set(f,g)}function u(f){const h=o.get(f);if(h){const d=f.index;d!==null&&h.version<d.version&&c(f)}else c(f);return o.get(f)}return{get:s,update:l,getWireframeAttribute:u}}function S7(t,e,n,r){const i=r.isWebGL2;let o;function a(h){o=h}let s,l;function c(h){s=h.type,l=h.bytesPerElement}function u(h,d){t.drawElements(o,d,s,h*l),n.update(d,o,1)}function f(h,d,v){if(v===0)return;let y,g;if(i)y=t,g="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[g](o,d,s,h*l,v),n.update(d,o,v)}this.setMode=a,this.setIndex=c,this.render=u,this.renderInstances=f}function E7(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,a,s){switch(n.calls++,a){case t.TRIANGLES:n.triangles+=s*(o/3);break;case t.LINES:n.lines+=s*(o/2);break;case t.LINE_STRIP:n.lines+=s*(o-1);break;case t.LINE_LOOP:n.lines+=s*o;break;case t.POINTS:n.points+=s*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function T7(t,e){return t[0]-e[0]}function A7(t,e){return Math.abs(e[1])-Math.abs(t[1])}function M7(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,a=new Zn,s=[];for(let c=0;c<8;c++)s[c]=[c,0];function l(c,u,f){const h=c.morphTargetInfluences;if(e.isWebGL2===!0){const v=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,y=v!==void 0?v.length:0;let g=o.get(u);if(g===void 0||g.count!==y){let L=function(){O.dispose(),o.delete(u),u.removeEventListener("dispose",L)};var d=L;g!==void 0&&g.texture.dispose();const _=u.morphAttributes.position!==void 0,T=u.morphAttributes.normal!==void 0,w=u.morphAttributes.color!==void 0,M=u.morphAttributes.position||[],b=u.morphAttributes.normal||[],A=u.morphAttributes.color||[];let E=0;_===!0&&(E=1),T===!0&&(E=2),w===!0&&(E=3);let P=u.attributes.position.count*E,R=1;P>e.maxTextureSize&&(R=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const N=new Float32Array(P*R*4*y),O=new Uj(N,P,R,y);O.type=es,O.needsUpdate=!0;const D=E*4;for(let W=0;W<y;W++){const $=M[W],B=b[W],X=A[W],K=P*R*4*W;for(let z=0;z<$.count;z++){const q=z*D;_===!0&&(a.fromBufferAttribute($,z),N[K+q+0]=a.x,N[K+q+1]=a.y,N[K+q+2]=a.z,N[K+q+3]=0),T===!0&&(a.fromBufferAttribute(B,z),N[K+q+4]=a.x,N[K+q+5]=a.y,N[K+q+6]=a.z,N[K+q+7]=0),w===!0&&(a.fromBufferAttribute(X,z),N[K+q+8]=a.x,N[K+q+9]=a.y,N[K+q+10]=a.z,N[K+q+11]=X.itemSize===4?a.w:1)}}g={count:y,texture:O,size:new gt(P,R)},o.set(u,g),u.addEventListener("dispose",L)}let p=0;for(let _=0;_<h.length;_++)p+=h[_];const x=u.morphTargetsRelative?1:1-p;f.getUniforms().setValue(t,"morphTargetBaseInfluence",x),f.getUniforms().setValue(t,"morphTargetInfluences",h),f.getUniforms().setValue(t,"morphTargetsTexture",g.texture,n),f.getUniforms().setValue(t,"morphTargetsTextureSize",g.size)}else{const v=h===void 0?0:h.length;let y=r[u.id];if(y===void 0||y.length!==v){y=[];for(let T=0;T<v;T++)y[T]=[T,0];r[u.id]=y}for(let T=0;T<v;T++){const w=y[T];w[0]=T,w[1]=h[T]}y.sort(A7);for(let T=0;T<8;T++)T<v&&y[T][1]?(s[T][0]=y[T][0],s[T][1]=y[T][1]):(s[T][0]=Number.MAX_SAFE_INTEGER,s[T][1]=0);s.sort(T7);const g=u.morphAttributes.position,p=u.morphAttributes.normal;let x=0;for(let T=0;T<8;T++){const w=s[T],M=w[0],b=w[1];M!==Number.MAX_SAFE_INTEGER&&b?(g&&u.getAttribute("morphTarget"+T)!==g[M]&&u.setAttribute("morphTarget"+T,g[M]),p&&u.getAttribute("morphNormal"+T)!==p[M]&&u.setAttribute("morphNormal"+T,p[M]),i[T]=b,x+=b):(g&&u.hasAttribute("morphTarget"+T)===!0&&u.deleteAttribute("morphTarget"+T),p&&u.hasAttribute("morphNormal"+T)===!0&&u.deleteAttribute("morphNormal"+T),i[T]=0)}const _=u.morphTargetsRelative?1:1-x;f.getUniforms().setValue(t,"morphTargetBaseInfluence",_),f.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function P7(t,e,n,r){let i=new WeakMap;function o(l){const c=r.render.frame,u=l.geometry,f=e.get(l,u);if(i.get(f)!==c&&(e.update(f),i.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;i.get(h)!==c&&(h.update(),i.set(h,c))}return f}function a(){i=new WeakMap}function s(l){const c=l.target;c.removeEventListener("dispose",s),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:o,dispose:a}}const qj=new Qr,Xj=new Uj,Kj=new pG,Yj=new Hj,_2=[],x2=[],b2=new Float32Array(16),w2=new Float32Array(9),S2=new Float32Array(4);function Rf(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=_2[i];if(o===void 0&&(o=new Float32Array(i),_2[i]=o),e!==0){r.toArray(o,0);for(let a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function zn(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Hn(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function x0(t,e){let n=x2[e];n===void 0&&(n=new Int32Array(e),x2[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function C7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function R7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(zn(n,e))return;t.uniform2fv(this.addr,e),Hn(n,e)}}function O7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(zn(n,e))return;t.uniform3fv(this.addr,e),Hn(n,e)}}function I7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(zn(n,e))return;t.uniform4fv(this.addr,e),Hn(n,e)}}function N7(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(zn(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Hn(n,e)}else{if(zn(n,r))return;S2.set(r),t.uniformMatrix2fv(this.addr,!1,S2),Hn(n,r)}}function D7(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(zn(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Hn(n,e)}else{if(zn(n,r))return;w2.set(r),t.uniformMatrix3fv(this.addr,!1,w2),Hn(n,r)}}function L7(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(zn(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Hn(n,e)}else{if(zn(n,r))return;b2.set(r),t.uniformMatrix4fv(this.addr,!1,b2),Hn(n,r)}}function k7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function j7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(zn(n,e))return;t.uniform2iv(this.addr,e),Hn(n,e)}}function U7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(zn(n,e))return;t.uniform3iv(this.addr,e),Hn(n,e)}}function F7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(zn(n,e))return;t.uniform4iv(this.addr,e),Hn(n,e)}}function V7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function B7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(zn(n,e))return;t.uniform2uiv(this.addr,e),Hn(n,e)}}function $7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(zn(n,e))return;t.uniform3uiv(this.addr,e),Hn(n,e)}}function z7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(zn(n,e))return;t.uniform4uiv(this.addr,e),Hn(n,e)}}function H7(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||qj,i)}function G7(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Kj,i)}function W7(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Yj,i)}function q7(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Xj,i)}function X7(t){switch(t){case 5126:return C7;case 35664:return R7;case 35665:return O7;case 35666:return I7;case 35674:return N7;case 35675:return D7;case 35676:return L7;case 5124:case 35670:return k7;case 35667:case 35671:return j7;case 35668:case 35672:return U7;case 35669:case 35673:return F7;case 5125:return V7;case 36294:return B7;case 36295:return $7;case 36296:return z7;case 35678:case 36198:case 36298:case 36306:case 35682:return H7;case 35679:case 36299:case 36307:return G7;case 35680:case 36300:case 36308:case 36293:return W7;case 36289:case 36303:case 36311:case 36292:return q7}}function K7(t,e){t.uniform1fv(this.addr,e)}function Y7(t,e){const n=Rf(e,this.size,2);t.uniform2fv(this.addr,n)}function Q7(t,e){const n=Rf(e,this.size,3);t.uniform3fv(this.addr,n)}function Z7(t,e){const n=Rf(e,this.size,4);t.uniform4fv(this.addr,n)}function J7(t,e){const n=Rf(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function eq(t,e){const n=Rf(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function tq(t,e){const n=Rf(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function nq(t,e){t.uniform1iv(this.addr,e)}function rq(t,e){t.uniform2iv(this.addr,e)}function iq(t,e){t.uniform3iv(this.addr,e)}function oq(t,e){t.uniform4iv(this.addr,e)}function aq(t,e){t.uniform1uiv(this.addr,e)}function sq(t,e){t.uniform2uiv(this.addr,e)}function lq(t,e){t.uniform3uiv(this.addr,e)}function cq(t,e){t.uniform4uiv(this.addr,e)}function uq(t,e,n){const r=this.cache,i=e.length,o=x0(n,i);zn(r,o)||(t.uniform1iv(this.addr,o),Hn(r,o));for(let a=0;a!==i;++a)n.setTexture2D(e[a]||qj,o[a])}function fq(t,e,n){const r=this.cache,i=e.length,o=x0(n,i);zn(r,o)||(t.uniform1iv(this.addr,o),Hn(r,o));for(let a=0;a!==i;++a)n.setTexture3D(e[a]||Kj,o[a])}function hq(t,e,n){const r=this.cache,i=e.length,o=x0(n,i);zn(r,o)||(t.uniform1iv(this.addr,o),Hn(r,o));for(let a=0;a!==i;++a)n.setTextureCube(e[a]||Yj,o[a])}function dq(t,e,n){const r=this.cache,i=e.length,o=x0(n,i);zn(r,o)||(t.uniform1iv(this.addr,o),Hn(r,o));for(let a=0;a!==i;++a)n.setTexture2DArray(e[a]||Xj,o[a])}function pq(t){switch(t){case 5126:return K7;case 35664:return Y7;case 35665:return Q7;case 35666:return Z7;case 35674:return J7;case 35675:return eq;case 35676:return tq;case 5124:case 35670:return nq;case 35667:case 35671:return rq;case 35668:case 35672:return iq;case 35669:case 35673:return oq;case 5125:return aq;case 36294:return sq;case 36295:return lq;case 36296:return cq;case 35678:case 36198:case 36298:case 36306:case 35682:return uq;case 35679:case 36299:case 36307:return fq;case 35680:case 36300:case 36308:case 36293:return hq;case 36289:case 36303:case 36311:case 36292:return dq}}class mq{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.setValue=X7(n.type)}}class gq{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.size=n.size,this.setValue=pq(n.type)}}class vq{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let o=0,a=i.length;o!==a;++o){const s=i[o];s.setValue(e,n[s.id],r)}}}const jx=/(\w+)(\])?(\[|\.)?/g;function E2(t,e){t.seq.push(e),t.map[e.id]=e}function yq(t,e,n){const r=t.name,i=r.length;for(jx.lastIndex=0;;){const o=jx.exec(r),a=jx.lastIndex;let s=o[1];const l=o[2]==="]",c=o[3];if(l&&(s=s|0),c===void 0||c==="["&&a+2===i){E2(n,c===void 0?new mq(s,t,e):new gq(s,t,e));break}else{let f=n.map[s];f===void 0&&(f=new vq(s),E2(n,f)),n=f}}}class $g{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(n,i),a=e.getUniformLocation(n,o.name);yq(o,a,this)}}setValue(e,n,r,i){const o=this.map[n];o!==void 0&&o.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let o=0,a=n.length;o!==a;++o){const s=n[o],l=r[s.id];l.needsUpdate!==!1&&s.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,o=e.length;i!==o;++i){const a=e[i];a.id in n&&r.push(a)}return r}}function T2(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const _q=37297;let xq=0;function bq(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let a=i;a<o;a++){const s=a+1;r.push(`${s===e?">":" "} ${s}: ${n[a]}`)}return r.join(`
`)}function wq(t){const e=zt.getPrimaries(zt.workingColorSpace),n=zt.getPrimaries(t);let r;switch(e===n?r="":e===Av&&n===Tv?r="LinearDisplayP3ToLinearSRGB":e===Tv&&n===Av&&(r="LinearSRGBToLinearDisplayP3"),t){case _a:case g0:return[r,"LinearTransferOETF"];case jn:case nT:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function A2(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const a=parseInt(o[1]);return n.toUpperCase()+`

`+i+`

`+bq(t.getShaderSource(e),a)}else return i}function Sq(t,e){const n=wq(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function Eq(t,e){let n;switch(e){case SH:n="Linear";break;case EH:n="Reinhard";break;case TH:n="OptimizedCineon";break;case AH:n="ACESFilmic";break;case MH:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Tq(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(jh).join(`
`)}function Aq(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function Mq(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=t.getActiveAttrib(e,i),a=o.name;let s=1;o.type===t.FLOAT_MAT2&&(s=2),o.type===t.FLOAT_MAT3&&(s=3),o.type===t.FLOAT_MAT4&&(s=4),n[a]={type:o.type,location:t.getAttribLocation(e,a),locationSize:s}}return n}function jh(t){return t!==""}function M2(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function P2(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Pq=/^[ \t]*#include +<([\w\d./]+)>/gm;function $1(t){return t.replace(Pq,Rq)}const Cq=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Rq(t,e){let n=xt[e];if(n===void 0){const r=Cq.get(e);if(r!==void 0)n=xt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return $1(n)}const Oq=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function C2(t){return t.replace(Oq,Iq)}function Iq(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function R2(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Nq(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Ej?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Q9?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Xo&&(e="SHADOWMAP_TYPE_VSM"),e}function Dq(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Lu:case ku:e="ENVMAP_TYPE_CUBE";break;case m0:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Lq(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case ku:e="ENVMAP_MODE_REFRACTION";break}return e}function kq(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case eT:e="ENVMAP_BLENDING_MULTIPLY";break;case bH:e="ENVMAP_BLENDING_MIX";break;case wH:e="ENVMAP_BLENDING_ADD";break}return e}function jq(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function Uq(t,e,n,r){const i=t.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=Nq(n),c=Dq(n),u=Lq(n),f=kq(n),h=jq(n),d=n.isWebGL2?"":Tq(n),v=Aq(o),y=i.createProgram();let g,p,x=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(jh).join(`
`),g.length>0&&(g+=`
`),p=[d,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(jh).join(`
`),p.length>0&&(p+=`
`)):(g=[R2(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(jh).join(`
`),p=[d,R2(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ds?"#define TONE_MAPPING":"",n.toneMapping!==ds?xt.tonemapping_pars_fragment:"",n.toneMapping!==ds?Eq("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",xt.colorspace_pars_fragment,Sq("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(jh).join(`
`)),a=$1(a),a=M2(a,n),a=P2(a,n),s=$1(s),s=M2(s,n),s=P2(s,n),a=C2(a),s=C2(s),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,p=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===XC?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===XC?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);const _=x+g+a,T=x+p+s,w=T2(i,i.VERTEX_SHADER,_),M=T2(i,i.FRAGMENT_SHADER,T);i.attachShader(y,w),i.attachShader(y,M),n.index0AttributeName!==void 0?i.bindAttribLocation(y,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);function b(R){if(t.debug.checkShaderErrors){const N=i.getProgramInfoLog(y).trim(),O=i.getShaderInfoLog(w).trim(),D=i.getShaderInfoLog(M).trim();let L=!0,W=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(L=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,y,w,M);else{const $=A2(i,w,"vertex"),B=A2(i,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Program Info Log: `+N+`
`+$+`
`+B)}else N!==""?console.warn("THREE.WebGLProgram: Program Info Log:",N):(O===""||D==="")&&(W=!1);W&&(R.diagnostics={runnable:L,programLog:N,vertexShader:{log:O,prefix:g},fragmentShader:{log:D,prefix:p}})}i.deleteShader(w),i.deleteShader(M),A=new $g(i,y),E=Mq(i,y)}let A;this.getUniforms=function(){return A===void 0&&b(this),A};let E;this.getAttributes=function(){return E===void 0&&b(this),E};let P=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=i.getProgramParameter(y,_q)),P},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=xq++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=w,this.fragmentShader=M,this}let Fq=0;class Vq{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),o=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(o)===!1&&(a.add(o),o.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new Bq(e),n.set(e,r)),r}}class Bq{constructor(e){this.id=Fq++,this.code=e,this.usedTimes=0}}function $q(t,e,n,r,i,o,a){const s=new iT,l=new Vq,c=[],u=i.isWebGL2,f=i.logarithmicDepthBuffer,h=i.vertexTextures;let d=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(E){return E===0?"uv":`uv${E}`}function g(E,P,R,N,O){const D=N.fog,L=O.geometry,W=E.isMeshStandardMaterial?N.environment:null,$=(E.isMeshStandardMaterial?n:e).get(E.envMap||W),B=$&&$.mapping===m0?$.image.height:null,X=v[E.type];E.precision!==null&&(d=i.getMaxPrecision(E.precision),d!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",d,"instead."));const K=L.morphAttributes.position||L.morphAttributes.normal||L.morphAttributes.color,z=K!==void 0?K.length:0;let q=0;L.morphAttributes.position!==void 0&&(q=1),L.morphAttributes.normal!==void 0&&(q=2),L.morphAttributes.color!==void 0&&(q=3);let ee,me,_e,Ne;if(X){const Ot=yo[X];ee=Ot.vertexShader,me=Ot.fragmentShader}else ee=E.vertexShader,me=E.fragmentShader,l.update(E),_e=l.getVertexShaderID(E),Ne=l.getFragmentShaderID(E);const We=t.getRenderTarget(),Ue=O.isInstancedMesh===!0,fe=!!E.map,Re=!!E.matcap,Ee=!!$,H=!!E.aoMap,lt=!!E.lightMap,be=!!E.bumpMap,Le=!!E.normalMap,ke=!!E.displacementMap,mt=!!E.emissiveMap,Ye=!!E.metalnessMap,Ze=!!E.roughnessMap,ht=E.anisotropy>0,Mt=E.clearcoat>0,jt=E.iridescence>0,F=E.sheen>0,k=E.transmission>0,re=ht&&!!E.anisotropyMap,ye=Mt&&!!E.clearcoatMap,he=Mt&&!!E.clearcoatNormalMap,xe=Mt&&!!E.clearcoatRoughnessMap,Ce=jt&&!!E.iridescenceMap,Te=jt&&!!E.iridescenceThicknessMap,Pe=F&&!!E.sheenColorMap,Y=F&&!!E.sheenRoughnessMap,Se=!!E.specularMap,de=!!E.specularColorMap,Qe=!!E.specularIntensityMap,Ge=k&&!!E.transmissionMap,qe=k&&!!E.thicknessMap,Ve=!!E.gradientMap,De=!!E.alphaMap,vt=E.alphaTest>0,Q=!!E.alphaHash,le=!!E.extensions,ue=!!L.attributes.uv1,ne=!!L.attributes.uv2,ge=!!L.attributes.uv3;let Ie=ds;return E.toneMapped&&(We===null||We.isXRRenderTarget===!0)&&(Ie=t.toneMapping),{isWebGL2:u,shaderID:X,shaderType:E.type,shaderName:E.name,vertexShader:ee,fragmentShader:me,defines:E.defines,customVertexShaderID:_e,customFragmentShaderID:Ne,isRawShaderMaterial:E.isRawShaderMaterial===!0,glslVersion:E.glslVersion,precision:d,instancing:Ue,instancingColor:Ue&&O.instanceColor!==null,supportsVertexTextures:h,outputColorSpace:We===null?t.outputColorSpace:We.isXRRenderTarget===!0?We.texture.colorSpace:_a,map:fe,matcap:Re,envMap:Ee,envMapMode:Ee&&$.mapping,envMapCubeUVHeight:B,aoMap:H,lightMap:lt,bumpMap:be,normalMap:Le,displacementMap:h&&ke,emissiveMap:mt,normalMapObjectSpace:Le&&E.normalMapType===VH,normalMapTangentSpace:Le&&E.normalMapType===Nj,metalnessMap:Ye,roughnessMap:Ze,anisotropy:ht,anisotropyMap:re,clearcoat:Mt,clearcoatMap:ye,clearcoatNormalMap:he,clearcoatRoughnessMap:xe,iridescence:jt,iridescenceMap:Ce,iridescenceThicknessMap:Te,sheen:F,sheenColorMap:Pe,sheenRoughnessMap:Y,specularMap:Se,specularColorMap:de,specularIntensityMap:Qe,transmission:k,transmissionMap:Ge,thicknessMap:qe,gradientMap:Ve,opaque:E.transparent===!1&&E.blending===xu,alphaMap:De,alphaTest:vt,alphaHash:Q,combine:E.combine,mapUv:fe&&y(E.map.channel),aoMapUv:H&&y(E.aoMap.channel),lightMapUv:lt&&y(E.lightMap.channel),bumpMapUv:be&&y(E.bumpMap.channel),normalMapUv:Le&&y(E.normalMap.channel),displacementMapUv:ke&&y(E.displacementMap.channel),emissiveMapUv:mt&&y(E.emissiveMap.channel),metalnessMapUv:Ye&&y(E.metalnessMap.channel),roughnessMapUv:Ze&&y(E.roughnessMap.channel),anisotropyMapUv:re&&y(E.anisotropyMap.channel),clearcoatMapUv:ye&&y(E.clearcoatMap.channel),clearcoatNormalMapUv:he&&y(E.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:xe&&y(E.clearcoatRoughnessMap.channel),iridescenceMapUv:Ce&&y(E.iridescenceMap.channel),iridescenceThicknessMapUv:Te&&y(E.iridescenceThicknessMap.channel),sheenColorMapUv:Pe&&y(E.sheenColorMap.channel),sheenRoughnessMapUv:Y&&y(E.sheenRoughnessMap.channel),specularMapUv:Se&&y(E.specularMap.channel),specularColorMapUv:de&&y(E.specularColorMap.channel),specularIntensityMapUv:Qe&&y(E.specularIntensityMap.channel),transmissionMapUv:Ge&&y(E.transmissionMap.channel),thicknessMapUv:qe&&y(E.thicknessMap.channel),alphaMapUv:De&&y(E.alphaMap.channel),vertexTangents:!!L.attributes.tangent&&(Le||ht),vertexColors:E.vertexColors,vertexAlphas:E.vertexColors===!0&&!!L.attributes.color&&L.attributes.color.itemSize===4,vertexUv1s:ue,vertexUv2s:ne,vertexUv3s:ge,pointsUvs:O.isPoints===!0&&!!L.attributes.uv&&(fe||De),fog:!!D,useFog:E.fog===!0,fogExp2:D&&D.isFogExp2,flatShading:E.flatShading===!0,sizeAttenuation:E.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:O.isSkinnedMesh===!0,morphTargets:L.morphAttributes.position!==void 0,morphNormals:L.morphAttributes.normal!==void 0,morphColors:L.morphAttributes.color!==void 0,morphTargetsCount:z,morphTextureStride:q,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:E.dithering,shadowMapEnabled:t.shadowMap.enabled&&R.length>0,shadowMapType:t.shadowMap.type,toneMapping:Ie,useLegacyLights:t._useLegacyLights,decodeVideoTexture:fe&&E.map.isVideoTexture===!0&&zt.getTransfer(E.map.colorSpace)===tn,premultipliedAlpha:E.premultipliedAlpha,doubleSided:E.side===Zo,flipSided:E.side===Vr,useDepthPacking:E.depthPacking>=0,depthPacking:E.depthPacking||0,index0AttributeName:E.index0AttributeName,extensionDerivatives:le&&E.extensions.derivatives===!0,extensionFragDepth:le&&E.extensions.fragDepth===!0,extensionDrawBuffers:le&&E.extensions.drawBuffers===!0,extensionShaderTextureLOD:le&&E.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:E.customProgramCacheKey()}}function p(E){const P=[];if(E.shaderID?P.push(E.shaderID):(P.push(E.customVertexShaderID),P.push(E.customFragmentShaderID)),E.defines!==void 0)for(const R in E.defines)P.push(R),P.push(E.defines[R]);return E.isRawShaderMaterial===!1&&(x(P,E),_(P,E),P.push(t.outputColorSpace)),P.push(E.customProgramCacheKey),P.join()}function x(E,P){E.push(P.precision),E.push(P.outputColorSpace),E.push(P.envMapMode),E.push(P.envMapCubeUVHeight),E.push(P.mapUv),E.push(P.alphaMapUv),E.push(P.lightMapUv),E.push(P.aoMapUv),E.push(P.bumpMapUv),E.push(P.normalMapUv),E.push(P.displacementMapUv),E.push(P.emissiveMapUv),E.push(P.metalnessMapUv),E.push(P.roughnessMapUv),E.push(P.anisotropyMapUv),E.push(P.clearcoatMapUv),E.push(P.clearcoatNormalMapUv),E.push(P.clearcoatRoughnessMapUv),E.push(P.iridescenceMapUv),E.push(P.iridescenceThicknessMapUv),E.push(P.sheenColorMapUv),E.push(P.sheenRoughnessMapUv),E.push(P.specularMapUv),E.push(P.specularColorMapUv),E.push(P.specularIntensityMapUv),E.push(P.transmissionMapUv),E.push(P.thicknessMapUv),E.push(P.combine),E.push(P.fogExp2),E.push(P.sizeAttenuation),E.push(P.morphTargetsCount),E.push(P.morphAttributeCount),E.push(P.numDirLights),E.push(P.numPointLights),E.push(P.numSpotLights),E.push(P.numSpotLightMaps),E.push(P.numHemiLights),E.push(P.numRectAreaLights),E.push(P.numDirLightShadows),E.push(P.numPointLightShadows),E.push(P.numSpotLightShadows),E.push(P.numSpotLightShadowsWithMaps),E.push(P.numLightProbes),E.push(P.shadowMapType),E.push(P.toneMapping),E.push(P.numClippingPlanes),E.push(P.numClipIntersection),E.push(P.depthPacking)}function _(E,P){s.disableAll(),P.isWebGL2&&s.enable(0),P.supportsVertexTextures&&s.enable(1),P.instancing&&s.enable(2),P.instancingColor&&s.enable(3),P.matcap&&s.enable(4),P.envMap&&s.enable(5),P.normalMapObjectSpace&&s.enable(6),P.normalMapTangentSpace&&s.enable(7),P.clearcoat&&s.enable(8),P.iridescence&&s.enable(9),P.alphaTest&&s.enable(10),P.vertexColors&&s.enable(11),P.vertexAlphas&&s.enable(12),P.vertexUv1s&&s.enable(13),P.vertexUv2s&&s.enable(14),P.vertexUv3s&&s.enable(15),P.vertexTangents&&s.enable(16),P.anisotropy&&s.enable(17),P.alphaHash&&s.enable(18),E.push(s.mask),s.disableAll(),P.fog&&s.enable(0),P.useFog&&s.enable(1),P.flatShading&&s.enable(2),P.logarithmicDepthBuffer&&s.enable(3),P.skinning&&s.enable(4),P.morphTargets&&s.enable(5),P.morphNormals&&s.enable(6),P.morphColors&&s.enable(7),P.premultipliedAlpha&&s.enable(8),P.shadowMapEnabled&&s.enable(9),P.useLegacyLights&&s.enable(10),P.doubleSided&&s.enable(11),P.flipSided&&s.enable(12),P.useDepthPacking&&s.enable(13),P.dithering&&s.enable(14),P.transmission&&s.enable(15),P.sheen&&s.enable(16),P.opaque&&s.enable(17),P.pointsUvs&&s.enable(18),P.decodeVideoTexture&&s.enable(19),E.push(s.mask)}function T(E){const P=v[E.type];let R;if(P){const N=yo[P];R=MG.clone(N.uniforms)}else R=E.uniforms;return R}function w(E,P){let R;for(let N=0,O=c.length;N<O;N++){const D=c[N];if(D.cacheKey===P){R=D,++R.usedTimes;break}}return R===void 0&&(R=new Uq(t,P,E,o),c.push(R)),R}function M(E){if(--E.usedTimes===0){const P=c.indexOf(E);c[P]=c[c.length-1],c.pop(),E.destroy()}}function b(E){l.remove(E)}function A(){l.dispose()}return{getParameters:g,getProgramCacheKey:p,getUniforms:T,acquireProgram:w,releaseProgram:M,releaseShaderCache:b,programs:c,dispose:A}}function zq(){let t=new WeakMap;function e(o){let a=t.get(o);return a===void 0&&(a={},t.set(o,a)),a}function n(o){t.delete(o)}function r(o,a,s){t.get(o)[a]=s}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function Hq(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function O2(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function I2(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function a(f,h,d,v,y,g){let p=t[e];return p===void 0?(p={id:f.id,object:f,geometry:h,material:d,groupOrder:v,renderOrder:f.renderOrder,z:y,group:g},t[e]=p):(p.id=f.id,p.object=f,p.geometry=h,p.material=d,p.groupOrder=v,p.renderOrder=f.renderOrder,p.z=y,p.group=g),e++,p}function s(f,h,d,v,y,g){const p=a(f,h,d,v,y,g);d.transmission>0?r.push(p):d.transparent===!0?i.push(p):n.push(p)}function l(f,h,d,v,y,g){const p=a(f,h,d,v,y,g);d.transmission>0?r.unshift(p):d.transparent===!0?i.unshift(p):n.unshift(p)}function c(f,h){n.length>1&&n.sort(f||Hq),r.length>1&&r.sort(h||O2),i.length>1&&i.sort(h||O2)}function u(){for(let f=e,h=t.length;f<h;f++){const d=t[f];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:s,unshift:l,finish:u,sort:c}}function Gq(){let t=new WeakMap;function e(r,i){const o=t.get(r);let a;return o===void 0?(a=new I2,t.set(r,[a])):i>=o.length?(a=new I2,o.push(a)):a=o[i],a}function n(){t=new WeakMap}return{get:e,dispose:n}}function Wq(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new te,color:new Rt};break;case"SpotLight":n={position:new te,direction:new te,color:new Rt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new te,color:new Rt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new te,skyColor:new Rt,groundColor:new Rt};break;case"RectAreaLight":n={color:new Rt,position:new te,halfWidth:new te,halfHeight:new te};break}return t[e.id]=n,n}}}function qq(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Xq=0;function Kq(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Yq(t,e){const n=new Wq,r=qq(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new te);const o=new te,a=new In,s=new In;function l(u,f){let h=0,d=0,v=0;for(let N=0;N<9;N++)i.probe[N].set(0,0,0);let y=0,g=0,p=0,x=0,_=0,T=0,w=0,M=0,b=0,A=0,E=0;u.sort(Kq);const P=f===!0?Math.PI:1;for(let N=0,O=u.length;N<O;N++){const D=u[N],L=D.color,W=D.intensity,$=D.distance,B=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)h+=L.r*W*P,d+=L.g*W*P,v+=L.b*W*P;else if(D.isLightProbe){for(let X=0;X<9;X++)i.probe[X].addScaledVector(D.sh.coefficients[X],W);E++}else if(D.isDirectionalLight){const X=n.get(D);if(X.color.copy(D.color).multiplyScalar(D.intensity*P),D.castShadow){const K=D.shadow,z=r.get(D);z.shadowBias=K.bias,z.shadowNormalBias=K.normalBias,z.shadowRadius=K.radius,z.shadowMapSize=K.mapSize,i.directionalShadow[y]=z,i.directionalShadowMap[y]=B,i.directionalShadowMatrix[y]=D.shadow.matrix,T++}i.directional[y]=X,y++}else if(D.isSpotLight){const X=n.get(D);X.position.setFromMatrixPosition(D.matrixWorld),X.color.copy(L).multiplyScalar(W*P),X.distance=$,X.coneCos=Math.cos(D.angle),X.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),X.decay=D.decay,i.spot[p]=X;const K=D.shadow;if(D.map&&(i.spotLightMap[b]=D.map,b++,K.updateMatrices(D),D.castShadow&&A++),i.spotLightMatrix[p]=K.matrix,D.castShadow){const z=r.get(D);z.shadowBias=K.bias,z.shadowNormalBias=K.normalBias,z.shadowRadius=K.radius,z.shadowMapSize=K.mapSize,i.spotShadow[p]=z,i.spotShadowMap[p]=B,M++}p++}else if(D.isRectAreaLight){const X=n.get(D);X.color.copy(L).multiplyScalar(W),X.halfWidth.set(D.width*.5,0,0),X.halfHeight.set(0,D.height*.5,0),i.rectArea[x]=X,x++}else if(D.isPointLight){const X=n.get(D);if(X.color.copy(D.color).multiplyScalar(D.intensity*P),X.distance=D.distance,X.decay=D.decay,D.castShadow){const K=D.shadow,z=r.get(D);z.shadowBias=K.bias,z.shadowNormalBias=K.normalBias,z.shadowRadius=K.radius,z.shadowMapSize=K.mapSize,z.shadowCameraNear=K.camera.near,z.shadowCameraFar=K.camera.far,i.pointShadow[g]=z,i.pointShadowMap[g]=B,i.pointShadowMatrix[g]=D.shadow.matrix,w++}i.point[g]=X,g++}else if(D.isHemisphereLight){const X=n.get(D);X.skyColor.copy(D.color).multiplyScalar(W*P),X.groundColor.copy(D.groundColor).multiplyScalar(W*P),i.hemi[_]=X,_++}}x>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Oe.LTC_FLOAT_1,i.rectAreaLTC2=Oe.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Oe.LTC_HALF_1,i.rectAreaLTC2=Oe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=d,i.ambient[2]=v;const R=i.hash;(R.directionalLength!==y||R.pointLength!==g||R.spotLength!==p||R.rectAreaLength!==x||R.hemiLength!==_||R.numDirectionalShadows!==T||R.numPointShadows!==w||R.numSpotShadows!==M||R.numSpotMaps!==b||R.numLightProbes!==E)&&(i.directional.length=y,i.spot.length=p,i.rectArea.length=x,i.point.length=g,i.hemi.length=_,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=M,i.spotShadowMap.length=M,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=M+b-A,i.spotLightMap.length=b,i.numSpotLightShadowsWithMaps=A,i.numLightProbes=E,R.directionalLength=y,R.pointLength=g,R.spotLength=p,R.rectAreaLength=x,R.hemiLength=_,R.numDirectionalShadows=T,R.numPointShadows=w,R.numSpotShadows=M,R.numSpotMaps=b,R.numLightProbes=E,i.version=Xq++)}function c(u,f){let h=0,d=0,v=0,y=0,g=0;const p=f.matrixWorldInverse;for(let x=0,_=u.length;x<_;x++){const T=u[x];if(T.isDirectionalLight){const w=i.directional[h];w.direction.setFromMatrixPosition(T.matrixWorld),o.setFromMatrixPosition(T.target.matrixWorld),w.direction.sub(o),w.direction.transformDirection(p),h++}else if(T.isSpotLight){const w=i.spot[v];w.position.setFromMatrixPosition(T.matrixWorld),w.position.applyMatrix4(p),w.direction.setFromMatrixPosition(T.matrixWorld),o.setFromMatrixPosition(T.target.matrixWorld),w.direction.sub(o),w.direction.transformDirection(p),v++}else if(T.isRectAreaLight){const w=i.rectArea[y];w.position.setFromMatrixPosition(T.matrixWorld),w.position.applyMatrix4(p),s.identity(),a.copy(T.matrixWorld),a.premultiply(p),s.extractRotation(a),w.halfWidth.set(T.width*.5,0,0),w.halfHeight.set(0,T.height*.5,0),w.halfWidth.applyMatrix4(s),w.halfHeight.applyMatrix4(s),y++}else if(T.isPointLight){const w=i.point[d];w.position.setFromMatrixPosition(T.matrixWorld),w.position.applyMatrix4(p),d++}else if(T.isHemisphereLight){const w=i.hemi[g];w.direction.setFromMatrixPosition(T.matrixWorld),w.direction.transformDirection(p),g++}}}return{setup:l,setupView:c,state:i}}function N2(t,e){const n=new Yq(t,e),r=[],i=[];function o(){r.length=0,i.length=0}function a(f){r.push(f)}function s(f){i.push(f)}function l(f){n.setup(r,f)}function c(f){n.setupView(r,f)}return{init:o,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:c,pushLight:a,pushShadow:s}}function Qq(t,e){let n=new WeakMap;function r(o,a=0){const s=n.get(o);let l;return s===void 0?(l=new N2(t,e),n.set(o,[l])):a>=s.length?(l=new N2(t,e),s.push(l)):l=s[a],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class Zq extends Cf{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=UH,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Jq extends Cf{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const eX=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,tX=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function nX(t,e,n){let r=new aT;const i=new gt,o=new gt,a=new Zn,s=new Zq({depthPacking:FH}),l=new Jq,c={},u=n.maxTextureSize,f={[ws]:Vr,[Vr]:ws,[Zo]:Zo},h=new xa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new gt},radius:{value:4}},vertexShader:eX,fragmentShader:tX}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const v=new ko;v.setAttribute("position",new Eo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Gr(v,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ej;let p=this.type;this.render=function(w,M,b){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||w.length===0)return;const A=t.getRenderTarget(),E=t.getActiveCubeFace(),P=t.getActiveMipmapLevel(),R=t.state;R.setBlending(hs),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);const N=p!==Xo&&this.type===Xo,O=p===Xo&&this.type!==Xo;for(let D=0,L=w.length;D<L;D++){const W=w[D],$=W.shadow;if($===void 0){console.warn("THREE.WebGLShadowMap:",W,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;i.copy($.mapSize);const B=$.getFrameExtents();if(i.multiply(B),o.copy($.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/B.x),i.x=o.x*B.x,$.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/B.y),i.y=o.y*B.y,$.mapSize.y=o.y)),$.map===null||N===!0||O===!0){const K=this.type!==Xo?{minFilter:Dr,magFilter:Dr}:{};$.map!==null&&$.map.dispose(),$.map=new Fl(i.x,i.y,K),$.map.texture.name=W.name+".shadowMap",$.camera.updateProjectionMatrix()}t.setRenderTarget($.map),t.clear();const X=$.getViewportCount();for(let K=0;K<X;K++){const z=$.getViewport(K);a.set(o.x*z.x,o.y*z.y,o.x*z.z,o.y*z.w),R.viewport(a),$.updateMatrices(W,K),r=$.getFrustum(),T(M,b,$.camera,W,this.type)}$.isPointLightShadow!==!0&&this.type===Xo&&x($,b),$.needsUpdate=!1}p=this.type,g.needsUpdate=!1,t.setRenderTarget(A,E,P)};function x(w,M){const b=e.update(y);h.defines.VSM_SAMPLES!==w.blurSamples&&(h.defines.VSM_SAMPLES=w.blurSamples,d.defines.VSM_SAMPLES=w.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new Fl(i.x,i.y)),h.uniforms.shadow_pass.value=w.map.texture,h.uniforms.resolution.value=w.mapSize,h.uniforms.radius.value=w.radius,t.setRenderTarget(w.mapPass),t.clear(),t.renderBufferDirect(M,null,b,h,y,null),d.uniforms.shadow_pass.value=w.mapPass.texture,d.uniforms.resolution.value=w.mapSize,d.uniforms.radius.value=w.radius,t.setRenderTarget(w.map),t.clear(),t.renderBufferDirect(M,null,b,d,y,null)}function _(w,M,b,A){let E=null;const P=b.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(P!==void 0)E=P;else if(E=b.isPointLight===!0?l:s,t.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const R=E.uuid,N=M.uuid;let O=c[R];O===void 0&&(O={},c[R]=O);let D=O[N];D===void 0&&(D=E.clone(),O[N]=D),E=D}if(E.visible=M.visible,E.wireframe=M.wireframe,A===Xo?E.side=M.shadowSide!==null?M.shadowSide:M.side:E.side=M.shadowSide!==null?M.shadowSide:f[M.side],E.alphaMap=M.alphaMap,E.alphaTest=M.alphaTest,E.map=M.map,E.clipShadows=M.clipShadows,E.clippingPlanes=M.clippingPlanes,E.clipIntersection=M.clipIntersection,E.displacementMap=M.displacementMap,E.displacementScale=M.displacementScale,E.displacementBias=M.displacementBias,E.wireframeLinewidth=M.wireframeLinewidth,E.linewidth=M.linewidth,b.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const R=t.properties.get(E);R.light=b}return E}function T(w,M,b,A,E){if(w.visible===!1)return;if(w.layers.test(M.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&E===Xo)&&(!w.frustumCulled||r.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,w.matrixWorld);const N=e.update(w),O=w.material;if(Array.isArray(O)){const D=N.groups;for(let L=0,W=D.length;L<W;L++){const $=D[L],B=O[$.materialIndex];if(B&&B.visible){const X=_(w,B,A,E);t.renderBufferDirect(b,null,N,X,w,$)}}}else if(O.visible){const D=_(w,O,A,E);t.renderBufferDirect(b,null,N,D,w,null)}}const R=w.children;for(let N=0,O=R.length;N<O;N++)T(R[N],M,b,A,E)}}function rX(t,e,n){const r=n.isWebGL2;function i(){let Q=!1;const le=new Zn;let ue=null;const ne=new Zn(0,0,0,0);return{setMask:function(ge){ue!==ge&&!Q&&(t.colorMask(ge,ge,ge,ge),ue=ge)},setLocked:function(ge){Q=ge},setClear:function(ge,Ie,rt,Ot,En){En===!0&&(ge*=Ot,Ie*=Ot,rt*=Ot),le.set(ge,Ie,rt,Ot),ne.equals(le)===!1&&(t.clearColor(ge,Ie,rt,Ot),ne.copy(le))},reset:function(){Q=!1,ue=null,ne.set(-1,0,0,0)}}}function o(){let Q=!1,le=null,ue=null,ne=null;return{setTest:function(ge){ge?fe(t.DEPTH_TEST):Re(t.DEPTH_TEST)},setMask:function(ge){le!==ge&&!Q&&(t.depthMask(ge),le=ge)},setFunc:function(ge){if(ue!==ge){switch(ge){case pH:t.depthFunc(t.NEVER);break;case mH:t.depthFunc(t.ALWAYS);break;case gH:t.depthFunc(t.LESS);break;case Sv:t.depthFunc(t.LEQUAL);break;case vH:t.depthFunc(t.EQUAL);break;case yH:t.depthFunc(t.GEQUAL);break;case _H:t.depthFunc(t.GREATER);break;case xH:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}ue=ge}},setLocked:function(ge){Q=ge},setClear:function(ge){ne!==ge&&(t.clearDepth(ge),ne=ge)},reset:function(){Q=!1,le=null,ue=null,ne=null}}}function a(){let Q=!1,le=null,ue=null,ne=null,ge=null,Ie=null,rt=null,Ot=null,En=null;return{setTest:function(dt){Q||(dt?fe(t.STENCIL_TEST):Re(t.STENCIL_TEST))},setMask:function(dt){le!==dt&&!Q&&(t.stencilMask(dt),le=dt)},setFunc:function(dt,Tn,Dn){(ue!==dt||ne!==Tn||ge!==Dn)&&(t.stencilFunc(dt,Tn,Dn),ue=dt,ne=Tn,ge=Dn)},setOp:function(dt,Tn,Dn){(Ie!==dt||rt!==Tn||Ot!==Dn)&&(t.stencilOp(dt,Tn,Dn),Ie=dt,rt=Tn,Ot=Dn)},setLocked:function(dt){Q=dt},setClear:function(dt){En!==dt&&(t.clearStencil(dt),En=dt)},reset:function(){Q=!1,le=null,ue=null,ne=null,ge=null,Ie=null,rt=null,Ot=null,En=null}}}const s=new i,l=new o,c=new a,u=new WeakMap,f=new WeakMap;let h={},d={},v=new WeakMap,y=[],g=null,p=!1,x=null,_=null,T=null,w=null,M=null,b=null,A=null,E=new Rt(0,0,0),P=0,R=!1,N=null,O=null,D=null,L=null,W=null;const $=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let B=!1,X=0;const K=t.getParameter(t.VERSION);K.indexOf("WebGL")!==-1?(X=parseFloat(/^WebGL (\d)/.exec(K)[1]),B=X>=1):K.indexOf("OpenGL ES")!==-1&&(X=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),B=X>=2);let z=null,q={};const ee=t.getParameter(t.SCISSOR_BOX),me=t.getParameter(t.VIEWPORT),_e=new Zn().fromArray(ee),Ne=new Zn().fromArray(me);function We(Q,le,ue,ne){const ge=new Uint8Array(4),Ie=t.createTexture();t.bindTexture(Q,Ie),t.texParameteri(Q,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Q,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let rt=0;rt<ue;rt++)r&&(Q===t.TEXTURE_3D||Q===t.TEXTURE_2D_ARRAY)?t.texImage3D(le,0,t.RGBA,1,1,ne,0,t.RGBA,t.UNSIGNED_BYTE,ge):t.texImage2D(le+rt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,ge);return Ie}const Ue={};Ue[t.TEXTURE_2D]=We(t.TEXTURE_2D,t.TEXTURE_2D,1),Ue[t.TEXTURE_CUBE_MAP]=We(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Ue[t.TEXTURE_2D_ARRAY]=We(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Ue[t.TEXTURE_3D]=We(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),s.setClear(0,0,0,1),l.setClear(1),c.setClear(0),fe(t.DEPTH_TEST),l.setFunc(Sv),Ye(!1),Ze(mC),fe(t.CULL_FACE),ke(hs);function fe(Q){h[Q]!==!0&&(t.enable(Q),h[Q]=!0)}function Re(Q){h[Q]!==!1&&(t.disable(Q),h[Q]=!1)}function Ee(Q,le){return d[Q]!==le?(t.bindFramebuffer(Q,le),d[Q]=le,r&&(Q===t.DRAW_FRAMEBUFFER&&(d[t.FRAMEBUFFER]=le),Q===t.FRAMEBUFFER&&(d[t.DRAW_FRAMEBUFFER]=le)),!0):!1}function H(Q,le){let ue=y,ne=!1;if(Q)if(ue=v.get(le),ue===void 0&&(ue=[],v.set(le,ue)),Q.isWebGLMultipleRenderTargets){const ge=Q.texture;if(ue.length!==ge.length||ue[0]!==t.COLOR_ATTACHMENT0){for(let Ie=0,rt=ge.length;Ie<rt;Ie++)ue[Ie]=t.COLOR_ATTACHMENT0+Ie;ue.length=ge.length,ne=!0}}else ue[0]!==t.COLOR_ATTACHMENT0&&(ue[0]=t.COLOR_ATTACHMENT0,ne=!0);else ue[0]!==t.BACK&&(ue[0]=t.BACK,ne=!0);ne&&(n.isWebGL2?t.drawBuffers(ue):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ue))}function lt(Q){return g!==Q?(t.useProgram(Q),g=Q,!0):!1}const be={[cl]:t.FUNC_ADD,[J9]:t.FUNC_SUBTRACT,[eH]:t.FUNC_REVERSE_SUBTRACT};if(r)be[yC]=t.MIN,be[_C]=t.MAX;else{const Q=e.get("EXT_blend_minmax");Q!==null&&(be[yC]=Q.MIN_EXT,be[_C]=Q.MAX_EXT)}const Le={[tH]:t.ZERO,[nH]:t.ONE,[rH]:t.SRC_COLOR,[D1]:t.SRC_ALPHA,[cH]:t.SRC_ALPHA_SATURATE,[sH]:t.DST_COLOR,[oH]:t.DST_ALPHA,[iH]:t.ONE_MINUS_SRC_COLOR,[L1]:t.ONE_MINUS_SRC_ALPHA,[lH]:t.ONE_MINUS_DST_COLOR,[aH]:t.ONE_MINUS_DST_ALPHA,[uH]:t.CONSTANT_COLOR,[fH]:t.ONE_MINUS_CONSTANT_COLOR,[hH]:t.CONSTANT_ALPHA,[dH]:t.ONE_MINUS_CONSTANT_ALPHA};function ke(Q,le,ue,ne,ge,Ie,rt,Ot,En,dt){if(Q===hs){p===!0&&(Re(t.BLEND),p=!1);return}if(p===!1&&(fe(t.BLEND),p=!0),Q!==Z9){if(Q!==x||dt!==R){if((_!==cl||M!==cl)&&(t.blendEquation(t.FUNC_ADD),_=cl,M=cl),dt)switch(Q){case xu:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case N1:t.blendFunc(t.ONE,t.ONE);break;case gC:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case vC:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}else switch(Q){case xu:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case N1:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case gC:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case vC:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}T=null,w=null,b=null,A=null,E.set(0,0,0),P=0,x=Q,R=dt}return}ge=ge||le,Ie=Ie||ue,rt=rt||ne,(le!==_||ge!==M)&&(t.blendEquationSeparate(be[le],be[ge]),_=le,M=ge),(ue!==T||ne!==w||Ie!==b||rt!==A)&&(t.blendFuncSeparate(Le[ue],Le[ne],Le[Ie],Le[rt]),T=ue,w=ne,b=Ie,A=rt),(Ot.equals(E)===!1||En!==P)&&(t.blendColor(Ot.r,Ot.g,Ot.b,En),E.copy(Ot),P=En),x=Q,R=!1}function mt(Q,le){Q.side===Zo?Re(t.CULL_FACE):fe(t.CULL_FACE);let ue=Q.side===Vr;le&&(ue=!ue),Ye(ue),Q.blending===xu&&Q.transparent===!1?ke(hs):ke(Q.blending,Q.blendEquation,Q.blendSrc,Q.blendDst,Q.blendEquationAlpha,Q.blendSrcAlpha,Q.blendDstAlpha,Q.blendColor,Q.blendAlpha,Q.premultipliedAlpha),l.setFunc(Q.depthFunc),l.setTest(Q.depthTest),l.setMask(Q.depthWrite),s.setMask(Q.colorWrite);const ne=Q.stencilWrite;c.setTest(ne),ne&&(c.setMask(Q.stencilWriteMask),c.setFunc(Q.stencilFunc,Q.stencilRef,Q.stencilFuncMask),c.setOp(Q.stencilFail,Q.stencilZFail,Q.stencilZPass)),Mt(Q.polygonOffset,Q.polygonOffsetFactor,Q.polygonOffsetUnits),Q.alphaToCoverage===!0?fe(t.SAMPLE_ALPHA_TO_COVERAGE):Re(t.SAMPLE_ALPHA_TO_COVERAGE)}function Ye(Q){N!==Q&&(Q?t.frontFace(t.CW):t.frontFace(t.CCW),N=Q)}function Ze(Q){Q!==K9?(fe(t.CULL_FACE),Q!==O&&(Q===mC?t.cullFace(t.BACK):Q===Y9?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Re(t.CULL_FACE),O=Q}function ht(Q){Q!==D&&(B&&t.lineWidth(Q),D=Q)}function Mt(Q,le,ue){Q?(fe(t.POLYGON_OFFSET_FILL),(L!==le||W!==ue)&&(t.polygonOffset(le,ue),L=le,W=ue)):Re(t.POLYGON_OFFSET_FILL)}function jt(Q){Q?fe(t.SCISSOR_TEST):Re(t.SCISSOR_TEST)}function F(Q){Q===void 0&&(Q=t.TEXTURE0+$-1),z!==Q&&(t.activeTexture(Q),z=Q)}function k(Q,le,ue){ue===void 0&&(z===null?ue=t.TEXTURE0+$-1:ue=z);let ne=q[ue];ne===void 0&&(ne={type:void 0,texture:void 0},q[ue]=ne),(ne.type!==Q||ne.texture!==le)&&(z!==ue&&(t.activeTexture(ue),z=ue),t.bindTexture(Q,le||Ue[Q]),ne.type=Q,ne.texture=le)}function re(){const Q=q[z];Q!==void 0&&Q.type!==void 0&&(t.bindTexture(Q.type,null),Q.type=void 0,Q.texture=void 0)}function ye(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function he(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function xe(){try{t.texSubImage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Ce(){try{t.texSubImage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Te(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Pe(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Y(){try{t.texStorage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Se(){try{t.texStorage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function de(){try{t.texImage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Qe(){try{t.texImage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Ge(Q){_e.equals(Q)===!1&&(t.scissor(Q.x,Q.y,Q.z,Q.w),_e.copy(Q))}function qe(Q){Ne.equals(Q)===!1&&(t.viewport(Q.x,Q.y,Q.z,Q.w),Ne.copy(Q))}function Ve(Q,le){let ue=f.get(le);ue===void 0&&(ue=new WeakMap,f.set(le,ue));let ne=ue.get(Q);ne===void 0&&(ne=t.getUniformBlockIndex(le,Q.name),ue.set(Q,ne))}function De(Q,le){const ne=f.get(le).get(Q);u.get(le)!==ne&&(t.uniformBlockBinding(le,ne,Q.__bindingPointIndex),u.set(le,ne))}function vt(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),h={},z=null,q={},d={},v=new WeakMap,y=[],g=null,p=!1,x=null,_=null,T=null,w=null,M=null,b=null,A=null,E=new Rt(0,0,0),P=0,R=!1,N=null,O=null,D=null,L=null,W=null,_e.set(0,0,t.canvas.width,t.canvas.height),Ne.set(0,0,t.canvas.width,t.canvas.height),s.reset(),l.reset(),c.reset()}return{buffers:{color:s,depth:l,stencil:c},enable:fe,disable:Re,bindFramebuffer:Ee,drawBuffers:H,useProgram:lt,setBlending:ke,setMaterial:mt,setFlipSided:Ye,setCullFace:Ze,setLineWidth:ht,setPolygonOffset:Mt,setScissorTest:jt,activeTexture:F,bindTexture:k,unbindTexture:re,compressedTexImage2D:ye,compressedTexImage3D:he,texImage2D:de,texImage3D:Qe,updateUBOMapping:Ve,uniformBlockBinding:De,texStorage2D:Y,texStorage3D:Se,texSubImage2D:xe,texSubImage3D:Ce,compressedTexSubImage2D:Te,compressedTexSubImage3D:Pe,scissor:Ge,viewport:qe,reset:vt}}function iX(t,e,n,r,i,o,a){const s=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,f=i.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let y;const g=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(F,k){return p?new OffscreenCanvas(F,k):Fd("canvas")}function _(F,k,re,ye){let he=1;if((F.width>ye||F.height>ye)&&(he=ye/Math.max(F.width,F.height)),he<1||k===!0)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap){const xe=k?Pv:Math.floor,Ce=xe(he*F.width),Te=xe(he*F.height);y===void 0&&(y=x(Ce,Te));const Pe=re?x(Ce,Te):y;return Pe.width=Ce,Pe.height=Te,Pe.getContext("2d").drawImage(F,0,0,Ce,Te),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+Ce+"x"+Te+")."),Pe}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F;return F}function T(F){return B1(F.width)&&B1(F.height)}function w(F){return s?!1:F.wrapS!==eo||F.wrapT!==eo||F.minFilter!==Dr&&F.minFilter!==Mi}function M(F,k){return F.generateMipmaps&&k&&F.minFilter!==Dr&&F.minFilter!==Mi}function b(F){t.generateMipmap(F)}function A(F,k,re,ye,he=!1){if(s===!1)return k;if(F!==null){if(t[F]!==void 0)return t[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let xe=k;if(k===t.RED&&(re===t.FLOAT&&(xe=t.R32F),re===t.HALF_FLOAT&&(xe=t.R16F),re===t.UNSIGNED_BYTE&&(xe=t.R8)),k===t.RED_INTEGER&&(re===t.UNSIGNED_BYTE&&(xe=t.R8UI),re===t.UNSIGNED_SHORT&&(xe=t.R16UI),re===t.UNSIGNED_INT&&(xe=t.R32UI),re===t.BYTE&&(xe=t.R8I),re===t.SHORT&&(xe=t.R16I),re===t.INT&&(xe=t.R32I)),k===t.RG&&(re===t.FLOAT&&(xe=t.RG32F),re===t.HALF_FLOAT&&(xe=t.RG16F),re===t.UNSIGNED_BYTE&&(xe=t.RG8)),k===t.RGBA){const Ce=he?Ev:zt.getTransfer(ye);re===t.FLOAT&&(xe=t.RGBA32F),re===t.HALF_FLOAT&&(xe=t.RGBA16F),re===t.UNSIGNED_BYTE&&(xe=Ce===tn?t.SRGB8_ALPHA8:t.RGBA8),re===t.UNSIGNED_SHORT_4_4_4_4&&(xe=t.RGBA4),re===t.UNSIGNED_SHORT_5_5_5_1&&(xe=t.RGB5_A1)}return(xe===t.R16F||xe===t.R32F||xe===t.RG16F||xe===t.RG32F||xe===t.RGBA16F||xe===t.RGBA32F)&&e.get("EXT_color_buffer_float"),xe}function E(F,k,re){return M(F,re)===!0||F.isFramebufferTexture&&F.minFilter!==Dr&&F.minFilter!==Mi?Math.log2(Math.max(k.width,k.height))+1:F.mipmaps!==void 0&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?k.mipmaps.length:1}function P(F){return F===Dr||F===xC||F===ux?t.NEAREST:t.LINEAR}function R(F){const k=F.target;k.removeEventListener("dispose",R),O(k),k.isVideoTexture&&v.delete(k)}function N(F){const k=F.target;k.removeEventListener("dispose",N),L(k)}function O(F){const k=r.get(F);if(k.__webglInit===void 0)return;const re=F.source,ye=g.get(re);if(ye){const he=ye[k.__cacheKey];he.usedTimes--,he.usedTimes===0&&D(F),Object.keys(ye).length===0&&g.delete(re)}r.remove(F)}function D(F){const k=r.get(F);t.deleteTexture(k.__webglTexture);const re=F.source,ye=g.get(re);delete ye[k.__cacheKey],a.memory.textures--}function L(F){const k=F.texture,re=r.get(F),ye=r.get(k);if(ye.__webglTexture!==void 0&&(t.deleteTexture(ye.__webglTexture),a.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let he=0;he<6;he++){if(Array.isArray(re.__webglFramebuffer[he]))for(let xe=0;xe<re.__webglFramebuffer[he].length;xe++)t.deleteFramebuffer(re.__webglFramebuffer[he][xe]);else t.deleteFramebuffer(re.__webglFramebuffer[he]);re.__webglDepthbuffer&&t.deleteRenderbuffer(re.__webglDepthbuffer[he])}else{if(Array.isArray(re.__webglFramebuffer))for(let he=0;he<re.__webglFramebuffer.length;he++)t.deleteFramebuffer(re.__webglFramebuffer[he]);else t.deleteFramebuffer(re.__webglFramebuffer);if(re.__webglDepthbuffer&&t.deleteRenderbuffer(re.__webglDepthbuffer),re.__webglMultisampledFramebuffer&&t.deleteFramebuffer(re.__webglMultisampledFramebuffer),re.__webglColorRenderbuffer)for(let he=0;he<re.__webglColorRenderbuffer.length;he++)re.__webglColorRenderbuffer[he]&&t.deleteRenderbuffer(re.__webglColorRenderbuffer[he]);re.__webglDepthRenderbuffer&&t.deleteRenderbuffer(re.__webglDepthRenderbuffer)}if(F.isWebGLMultipleRenderTargets)for(let he=0,xe=k.length;he<xe;he++){const Ce=r.get(k[he]);Ce.__webglTexture&&(t.deleteTexture(Ce.__webglTexture),a.memory.textures--),r.remove(k[he])}r.remove(k),r.remove(F)}let W=0;function $(){W=0}function B(){const F=W;return F>=l&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+l),W+=1,F}function X(F){const k=[];return k.push(F.wrapS),k.push(F.wrapT),k.push(F.wrapR||0),k.push(F.magFilter),k.push(F.minFilter),k.push(F.anisotropy),k.push(F.internalFormat),k.push(F.format),k.push(F.type),k.push(F.generateMipmaps),k.push(F.premultiplyAlpha),k.push(F.flipY),k.push(F.unpackAlignment),k.push(F.colorSpace),k.join()}function K(F,k){const re=r.get(F);if(F.isVideoTexture&&Mt(F),F.isRenderTargetTexture===!1&&F.version>0&&re.__version!==F.version){const ye=F.image;if(ye===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ye.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{fe(re,F,k);return}}n.bindTexture(t.TEXTURE_2D,re.__webglTexture,t.TEXTURE0+k)}function z(F,k){const re=r.get(F);if(F.version>0&&re.__version!==F.version){fe(re,F,k);return}n.bindTexture(t.TEXTURE_2D_ARRAY,re.__webglTexture,t.TEXTURE0+k)}function q(F,k){const re=r.get(F);if(F.version>0&&re.__version!==F.version){fe(re,F,k);return}n.bindTexture(t.TEXTURE_3D,re.__webglTexture,t.TEXTURE0+k)}function ee(F,k){const re=r.get(F);if(F.version>0&&re.__version!==F.version){Re(re,F,k);return}n.bindTexture(t.TEXTURE_CUBE_MAP,re.__webglTexture,t.TEXTURE0+k)}const me={[U1]:t.REPEAT,[eo]:t.CLAMP_TO_EDGE,[F1]:t.MIRRORED_REPEAT},_e={[Dr]:t.NEAREST,[xC]:t.NEAREST_MIPMAP_NEAREST,[ux]:t.NEAREST_MIPMAP_LINEAR,[Mi]:t.LINEAR,[PH]:t.LINEAR_MIPMAP_NEAREST,[kd]:t.LINEAR_MIPMAP_LINEAR},Ne={[BH]:t.NEVER,[XH]:t.ALWAYS,[$H]:t.LESS,[HH]:t.LEQUAL,[zH]:t.EQUAL,[qH]:t.GEQUAL,[GH]:t.GREATER,[WH]:t.NOTEQUAL};function We(F,k,re){if(re?(t.texParameteri(F,t.TEXTURE_WRAP_S,me[k.wrapS]),t.texParameteri(F,t.TEXTURE_WRAP_T,me[k.wrapT]),(F===t.TEXTURE_3D||F===t.TEXTURE_2D_ARRAY)&&t.texParameteri(F,t.TEXTURE_WRAP_R,me[k.wrapR]),t.texParameteri(F,t.TEXTURE_MAG_FILTER,_e[k.magFilter]),t.texParameteri(F,t.TEXTURE_MIN_FILTER,_e[k.minFilter])):(t.texParameteri(F,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(F,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(F===t.TEXTURE_3D||F===t.TEXTURE_2D_ARRAY)&&t.texParameteri(F,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(k.wrapS!==eo||k.wrapT!==eo)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(F,t.TEXTURE_MAG_FILTER,P(k.magFilter)),t.texParameteri(F,t.TEXTURE_MIN_FILTER,P(k.minFilter)),k.minFilter!==Dr&&k.minFilter!==Mi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),k.compareFunction&&(t.texParameteri(F,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(F,t.TEXTURE_COMPARE_FUNC,Ne[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const ye=e.get("EXT_texture_filter_anisotropic");if(k.magFilter===Dr||k.minFilter!==ux&&k.minFilter!==kd||k.type===es&&e.has("OES_texture_float_linear")===!1||s===!1&&k.type===jd&&e.has("OES_texture_half_float_linear")===!1)return;(k.anisotropy>1||r.get(k).__currentAnisotropy)&&(t.texParameterf(F,ye.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,i.getMaxAnisotropy())),r.get(k).__currentAnisotropy=k.anisotropy)}}function Ue(F,k){let re=!1;F.__webglInit===void 0&&(F.__webglInit=!0,k.addEventListener("dispose",R));const ye=k.source;let he=g.get(ye);he===void 0&&(he={},g.set(ye,he));const xe=X(k);if(xe!==F.__cacheKey){he[xe]===void 0&&(he[xe]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,re=!0),he[xe].usedTimes++;const Ce=he[F.__cacheKey];Ce!==void 0&&(he[F.__cacheKey].usedTimes--,Ce.usedTimes===0&&D(k)),F.__cacheKey=xe,F.__webglTexture=he[xe].texture}return re}function fe(F,k,re){let ye=t.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(ye=t.TEXTURE_2D_ARRAY),k.isData3DTexture&&(ye=t.TEXTURE_3D);const he=Ue(F,k),xe=k.source;n.bindTexture(ye,F.__webglTexture,t.TEXTURE0+re);const Ce=r.get(xe);if(xe.version!==Ce.__version||he===!0){n.activeTexture(t.TEXTURE0+re);const Te=zt.getPrimaries(zt.workingColorSpace),Pe=k.colorSpace===Pi?null:zt.getPrimaries(k.colorSpace),Y=k.colorSpace===Pi||Te===Pe?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,k.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,k.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Y);const Se=w(k)&&T(k.image)===!1;let de=_(k.image,Se,!1,u);de=jt(k,de);const Qe=T(de)||s,Ge=o.convert(k.format,k.colorSpace);let qe=o.convert(k.type),Ve=A(k.internalFormat,Ge,qe,k.colorSpace,k.isVideoTexture);We(ye,k,Qe);let De;const vt=k.mipmaps,Q=s&&k.isVideoTexture!==!0,le=Ce.__version===void 0||he===!0,ue=E(k,de,Qe);if(k.isDepthTexture)Ve=t.DEPTH_COMPONENT,s?k.type===es?Ve=t.DEPTH_COMPONENT32F:k.type===Ja?Ve=t.DEPTH_COMPONENT24:k.type===Al?Ve=t.DEPTH24_STENCIL8:Ve=t.DEPTH_COMPONENT16:k.type===es&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),k.format===Ml&&Ve===t.DEPTH_COMPONENT&&k.type!==tT&&k.type!==Ja&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),k.type=Ja,qe=o.convert(k.type)),k.format===ju&&Ve===t.DEPTH_COMPONENT&&(Ve=t.DEPTH_STENCIL,k.type!==Al&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),k.type=Al,qe=o.convert(k.type))),le&&(Q?n.texStorage2D(t.TEXTURE_2D,1,Ve,de.width,de.height):n.texImage2D(t.TEXTURE_2D,0,Ve,de.width,de.height,0,Ge,qe,null));else if(k.isDataTexture)if(vt.length>0&&Qe){Q&&le&&n.texStorage2D(t.TEXTURE_2D,ue,Ve,vt[0].width,vt[0].height);for(let ne=0,ge=vt.length;ne<ge;ne++)De=vt[ne],Q?n.texSubImage2D(t.TEXTURE_2D,ne,0,0,De.width,De.height,Ge,qe,De.data):n.texImage2D(t.TEXTURE_2D,ne,Ve,De.width,De.height,0,Ge,qe,De.data);k.generateMipmaps=!1}else Q?(le&&n.texStorage2D(t.TEXTURE_2D,ue,Ve,de.width,de.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,de.width,de.height,Ge,qe,de.data)):n.texImage2D(t.TEXTURE_2D,0,Ve,de.width,de.height,0,Ge,qe,de.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){Q&&le&&n.texStorage3D(t.TEXTURE_2D_ARRAY,ue,Ve,vt[0].width,vt[0].height,de.depth);for(let ne=0,ge=vt.length;ne<ge;ne++)De=vt[ne],k.format!==to?Ge!==null?Q?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,ne,0,0,0,De.width,De.height,de.depth,Ge,De.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,ne,Ve,De.width,De.height,de.depth,0,De.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Q?n.texSubImage3D(t.TEXTURE_2D_ARRAY,ne,0,0,0,De.width,De.height,de.depth,Ge,qe,De.data):n.texImage3D(t.TEXTURE_2D_ARRAY,ne,Ve,De.width,De.height,de.depth,0,Ge,qe,De.data)}else{Q&&le&&n.texStorage2D(t.TEXTURE_2D,ue,Ve,vt[0].width,vt[0].height);for(let ne=0,ge=vt.length;ne<ge;ne++)De=vt[ne],k.format!==to?Ge!==null?Q?n.compressedTexSubImage2D(t.TEXTURE_2D,ne,0,0,De.width,De.height,Ge,De.data):n.compressedTexImage2D(t.TEXTURE_2D,ne,Ve,De.width,De.height,0,De.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Q?n.texSubImage2D(t.TEXTURE_2D,ne,0,0,De.width,De.height,Ge,qe,De.data):n.texImage2D(t.TEXTURE_2D,ne,Ve,De.width,De.height,0,Ge,qe,De.data)}else if(k.isDataArrayTexture)Q?(le&&n.texStorage3D(t.TEXTURE_2D_ARRAY,ue,Ve,de.width,de.height,de.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,de.width,de.height,de.depth,Ge,qe,de.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Ve,de.width,de.height,de.depth,0,Ge,qe,de.data);else if(k.isData3DTexture)Q?(le&&n.texStorage3D(t.TEXTURE_3D,ue,Ve,de.width,de.height,de.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,de.width,de.height,de.depth,Ge,qe,de.data)):n.texImage3D(t.TEXTURE_3D,0,Ve,de.width,de.height,de.depth,0,Ge,qe,de.data);else if(k.isFramebufferTexture){if(le)if(Q)n.texStorage2D(t.TEXTURE_2D,ue,Ve,de.width,de.height);else{let ne=de.width,ge=de.height;for(let Ie=0;Ie<ue;Ie++)n.texImage2D(t.TEXTURE_2D,Ie,Ve,ne,ge,0,Ge,qe,null),ne>>=1,ge>>=1}}else if(vt.length>0&&Qe){Q&&le&&n.texStorage2D(t.TEXTURE_2D,ue,Ve,vt[0].width,vt[0].height);for(let ne=0,ge=vt.length;ne<ge;ne++)De=vt[ne],Q?n.texSubImage2D(t.TEXTURE_2D,ne,0,0,Ge,qe,De):n.texImage2D(t.TEXTURE_2D,ne,Ve,Ge,qe,De);k.generateMipmaps=!1}else Q?(le&&n.texStorage2D(t.TEXTURE_2D,ue,Ve,de.width,de.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ge,qe,de)):n.texImage2D(t.TEXTURE_2D,0,Ve,Ge,qe,de);M(k,Qe)&&b(ye),Ce.__version=xe.version,k.onUpdate&&k.onUpdate(k)}F.__version=k.version}function Re(F,k,re){if(k.image.length!==6)return;const ye=Ue(F,k),he=k.source;n.bindTexture(t.TEXTURE_CUBE_MAP,F.__webglTexture,t.TEXTURE0+re);const xe=r.get(he);if(he.version!==xe.__version||ye===!0){n.activeTexture(t.TEXTURE0+re);const Ce=zt.getPrimaries(zt.workingColorSpace),Te=k.colorSpace===Pi?null:zt.getPrimaries(k.colorSpace),Pe=k.colorSpace===Pi||Ce===Te?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,k.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,k.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Pe);const Y=k.isCompressedTexture||k.image[0].isCompressedTexture,Se=k.image[0]&&k.image[0].isDataTexture,de=[];for(let ne=0;ne<6;ne++)!Y&&!Se?de[ne]=_(k.image[ne],!1,!0,c):de[ne]=Se?k.image[ne].image:k.image[ne],de[ne]=jt(k,de[ne]);const Qe=de[0],Ge=T(Qe)||s,qe=o.convert(k.format,k.colorSpace),Ve=o.convert(k.type),De=A(k.internalFormat,qe,Ve,k.colorSpace),vt=s&&k.isVideoTexture!==!0,Q=xe.__version===void 0||ye===!0;let le=E(k,Qe,Ge);We(t.TEXTURE_CUBE_MAP,k,Ge);let ue;if(Y){vt&&Q&&n.texStorage2D(t.TEXTURE_CUBE_MAP,le,De,Qe.width,Qe.height);for(let ne=0;ne<6;ne++){ue=de[ne].mipmaps;for(let ge=0;ge<ue.length;ge++){const Ie=ue[ge];k.format!==to?qe!==null?vt?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge,0,0,Ie.width,Ie.height,qe,Ie.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge,De,Ie.width,Ie.height,0,Ie.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):vt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge,0,0,Ie.width,Ie.height,qe,Ve,Ie.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge,De,Ie.width,Ie.height,0,qe,Ve,Ie.data)}}}else{ue=k.mipmaps,vt&&Q&&(ue.length>0&&le++,n.texStorage2D(t.TEXTURE_CUBE_MAP,le,De,de[0].width,de[0].height));for(let ne=0;ne<6;ne++)if(Se){vt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,0,0,de[ne].width,de[ne].height,qe,Ve,de[ne].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,De,de[ne].width,de[ne].height,0,qe,Ve,de[ne].data);for(let ge=0;ge<ue.length;ge++){const rt=ue[ge].image[ne].image;vt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge+1,0,0,rt.width,rt.height,qe,Ve,rt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge+1,De,rt.width,rt.height,0,qe,Ve,rt.data)}}else{vt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,0,0,qe,Ve,de[ne]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,De,qe,Ve,de[ne]);for(let ge=0;ge<ue.length;ge++){const Ie=ue[ge];vt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge+1,0,0,qe,Ve,Ie.image[ne]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge+1,De,qe,Ve,Ie.image[ne])}}}M(k,Ge)&&b(t.TEXTURE_CUBE_MAP),xe.__version=he.version,k.onUpdate&&k.onUpdate(k)}F.__version=k.version}function Ee(F,k,re,ye,he,xe){const Ce=o.convert(re.format,re.colorSpace),Te=o.convert(re.type),Pe=A(re.internalFormat,Ce,Te,re.colorSpace);if(!r.get(k).__hasExternalTextures){const Se=Math.max(1,k.width>>xe),de=Math.max(1,k.height>>xe);he===t.TEXTURE_3D||he===t.TEXTURE_2D_ARRAY?n.texImage3D(he,xe,Pe,Se,de,k.depth,0,Ce,Te,null):n.texImage2D(he,xe,Pe,Se,de,0,Ce,Te,null)}n.bindFramebuffer(t.FRAMEBUFFER,F),ht(k)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,ye,he,r.get(re).__webglTexture,0,Ze(k)):(he===t.TEXTURE_2D||he>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&he<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,ye,he,r.get(re).__webglTexture,xe),n.bindFramebuffer(t.FRAMEBUFFER,null)}function H(F,k,re){if(t.bindRenderbuffer(t.RENDERBUFFER,F),k.depthBuffer&&!k.stencilBuffer){let ye=s===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(re||ht(k)){const he=k.depthTexture;he&&he.isDepthTexture&&(he.type===es?ye=t.DEPTH_COMPONENT32F:he.type===Ja&&(ye=t.DEPTH_COMPONENT24));const xe=Ze(k);ht(k)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,xe,ye,k.width,k.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,xe,ye,k.width,k.height)}else t.renderbufferStorage(t.RENDERBUFFER,ye,k.width,k.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,F)}else if(k.depthBuffer&&k.stencilBuffer){const ye=Ze(k);re&&ht(k)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,ye,t.DEPTH24_STENCIL8,k.width,k.height):ht(k)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ye,t.DEPTH24_STENCIL8,k.width,k.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,k.width,k.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,F)}else{const ye=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let he=0;he<ye.length;he++){const xe=ye[he],Ce=o.convert(xe.format,xe.colorSpace),Te=o.convert(xe.type),Pe=A(xe.internalFormat,Ce,Te,xe.colorSpace),Y=Ze(k);re&&ht(k)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Y,Pe,k.width,k.height):ht(k)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Y,Pe,k.width,k.height):t.renderbufferStorage(t.RENDERBUFFER,Pe,k.width,k.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function lt(F,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,F),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(k.depthTexture).__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),K(k.depthTexture,0);const ye=r.get(k.depthTexture).__webglTexture,he=Ze(k);if(k.depthTexture.format===Ml)ht(k)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ye,0,he):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ye,0);else if(k.depthTexture.format===ju)ht(k)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ye,0,he):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ye,0);else throw new Error("Unknown depthTexture format")}function be(F){const k=r.get(F),re=F.isWebGLCubeRenderTarget===!0;if(F.depthTexture&&!k.__autoAllocateDepthBuffer){if(re)throw new Error("target.depthTexture not supported in Cube render targets");lt(k.__webglFramebuffer,F)}else if(re){k.__webglDepthbuffer=[];for(let ye=0;ye<6;ye++)n.bindFramebuffer(t.FRAMEBUFFER,k.__webglFramebuffer[ye]),k.__webglDepthbuffer[ye]=t.createRenderbuffer(),H(k.__webglDepthbuffer[ye],F,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer=t.createRenderbuffer(),H(k.__webglDepthbuffer,F,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function Le(F,k,re){const ye=r.get(F);k!==void 0&&Ee(ye.__webglFramebuffer,F,F.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),re!==void 0&&be(F)}function ke(F){const k=F.texture,re=r.get(F),ye=r.get(k);F.addEventListener("dispose",N),F.isWebGLMultipleRenderTargets!==!0&&(ye.__webglTexture===void 0&&(ye.__webglTexture=t.createTexture()),ye.__version=k.version,a.memory.textures++);const he=F.isWebGLCubeRenderTarget===!0,xe=F.isWebGLMultipleRenderTargets===!0,Ce=T(F)||s;if(he){re.__webglFramebuffer=[];for(let Te=0;Te<6;Te++)if(s&&k.mipmaps&&k.mipmaps.length>0){re.__webglFramebuffer[Te]=[];for(let Pe=0;Pe<k.mipmaps.length;Pe++)re.__webglFramebuffer[Te][Pe]=t.createFramebuffer()}else re.__webglFramebuffer[Te]=t.createFramebuffer()}else{if(s&&k.mipmaps&&k.mipmaps.length>0){re.__webglFramebuffer=[];for(let Te=0;Te<k.mipmaps.length;Te++)re.__webglFramebuffer[Te]=t.createFramebuffer()}else re.__webglFramebuffer=t.createFramebuffer();if(xe)if(i.drawBuffers){const Te=F.texture;for(let Pe=0,Y=Te.length;Pe<Y;Pe++){const Se=r.get(Te[Pe]);Se.__webglTexture===void 0&&(Se.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&F.samples>0&&ht(F)===!1){const Te=xe?k:[k];re.__webglMultisampledFramebuffer=t.createFramebuffer(),re.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,re.__webglMultisampledFramebuffer);for(let Pe=0;Pe<Te.length;Pe++){const Y=Te[Pe];re.__webglColorRenderbuffer[Pe]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,re.__webglColorRenderbuffer[Pe]);const Se=o.convert(Y.format,Y.colorSpace),de=o.convert(Y.type),Qe=A(Y.internalFormat,Se,de,Y.colorSpace,F.isXRRenderTarget===!0),Ge=Ze(F);t.renderbufferStorageMultisample(t.RENDERBUFFER,Ge,Qe,F.width,F.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Pe,t.RENDERBUFFER,re.__webglColorRenderbuffer[Pe])}t.bindRenderbuffer(t.RENDERBUFFER,null),F.depthBuffer&&(re.__webglDepthRenderbuffer=t.createRenderbuffer(),H(re.__webglDepthRenderbuffer,F,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(he){n.bindTexture(t.TEXTURE_CUBE_MAP,ye.__webglTexture),We(t.TEXTURE_CUBE_MAP,k,Ce);for(let Te=0;Te<6;Te++)if(s&&k.mipmaps&&k.mipmaps.length>0)for(let Pe=0;Pe<k.mipmaps.length;Pe++)Ee(re.__webglFramebuffer[Te][Pe],F,k,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Pe);else Ee(re.__webglFramebuffer[Te],F,k,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0);M(k,Ce)&&b(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(xe){const Te=F.texture;for(let Pe=0,Y=Te.length;Pe<Y;Pe++){const Se=Te[Pe],de=r.get(Se);n.bindTexture(t.TEXTURE_2D,de.__webglTexture),We(t.TEXTURE_2D,Se,Ce),Ee(re.__webglFramebuffer,F,Se,t.COLOR_ATTACHMENT0+Pe,t.TEXTURE_2D,0),M(Se,Ce)&&b(t.TEXTURE_2D)}n.unbindTexture()}else{let Te=t.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(s?Te=F.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Te,ye.__webglTexture),We(Te,k,Ce),s&&k.mipmaps&&k.mipmaps.length>0)for(let Pe=0;Pe<k.mipmaps.length;Pe++)Ee(re.__webglFramebuffer[Pe],F,k,t.COLOR_ATTACHMENT0,Te,Pe);else Ee(re.__webglFramebuffer,F,k,t.COLOR_ATTACHMENT0,Te,0);M(k,Ce)&&b(Te),n.unbindTexture()}F.depthBuffer&&be(F)}function mt(F){const k=T(F)||s,re=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let ye=0,he=re.length;ye<he;ye++){const xe=re[ye];if(M(xe,k)){const Ce=F.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Te=r.get(xe).__webglTexture;n.bindTexture(Ce,Te),b(Ce),n.unbindTexture()}}}function Ye(F){if(s&&F.samples>0&&ht(F)===!1){const k=F.isWebGLMultipleRenderTargets?F.texture:[F.texture],re=F.width,ye=F.height;let he=t.COLOR_BUFFER_BIT;const xe=[],Ce=F.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Te=r.get(F),Pe=F.isWebGLMultipleRenderTargets===!0;if(Pe)for(let Y=0;Y<k.length;Y++)n.bindFramebuffer(t.FRAMEBUFFER,Te.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Y,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Te.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Y,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Te.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Te.__webglFramebuffer);for(let Y=0;Y<k.length;Y++){xe.push(t.COLOR_ATTACHMENT0+Y),F.depthBuffer&&xe.push(Ce);const Se=Te.__ignoreDepthValues!==void 0?Te.__ignoreDepthValues:!1;if(Se===!1&&(F.depthBuffer&&(he|=t.DEPTH_BUFFER_BIT),F.stencilBuffer&&(he|=t.STENCIL_BUFFER_BIT)),Pe&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Te.__webglColorRenderbuffer[Y]),Se===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[Ce]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Ce])),Pe){const de=r.get(k[Y]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,de,0)}t.blitFramebuffer(0,0,re,ye,0,0,re,ye,he,t.NEAREST),d&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,xe)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Pe)for(let Y=0;Y<k.length;Y++){n.bindFramebuffer(t.FRAMEBUFFER,Te.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Y,t.RENDERBUFFER,Te.__webglColorRenderbuffer[Y]);const Se=r.get(k[Y]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Te.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Y,t.TEXTURE_2D,Se,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Te.__webglMultisampledFramebuffer)}}function Ze(F){return Math.min(f,F.samples)}function ht(F){const k=r.get(F);return s&&F.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function Mt(F){const k=a.render.frame;v.get(F)!==k&&(v.set(F,k),F.update())}function jt(F,k){const re=F.colorSpace,ye=F.format,he=F.type;return F.isCompressedTexture===!0||F.isVideoTexture===!0||F.format===V1||re!==_a&&re!==Pi&&(zt.getTransfer(re)===tn?s===!1?e.has("EXT_sRGB")===!0&&ye===to?(F.format=V1,F.minFilter=Mi,F.generateMipmaps=!1):k=kj.sRGBToLinear(k):(ye!==to||he!==ps)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",re)),k}this.allocateTextureUnit=B,this.resetTextureUnits=$,this.setTexture2D=K,this.setTexture2DArray=z,this.setTexture3D=q,this.setTextureCube=ee,this.rebindTextures=Le,this.setupRenderTarget=ke,this.updateRenderTargetMipmap=mt,this.updateMultisampleRenderTarget=Ye,this.setupDepthRenderbuffer=be,this.setupFrameBufferTexture=Ee,this.useMultisampledRTT=ht}function oX(t,e,n){const r=n.isWebGL2;function i(o,a=Pi){let s;const l=zt.getTransfer(a);if(o===ps)return t.UNSIGNED_BYTE;if(o===Mj)return t.UNSIGNED_SHORT_4_4_4_4;if(o===Pj)return t.UNSIGNED_SHORT_5_5_5_1;if(o===CH)return t.BYTE;if(o===RH)return t.SHORT;if(o===tT)return t.UNSIGNED_SHORT;if(o===Aj)return t.INT;if(o===Ja)return t.UNSIGNED_INT;if(o===es)return t.FLOAT;if(o===jd)return r?t.HALF_FLOAT:(s=e.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(o===OH)return t.ALPHA;if(o===to)return t.RGBA;if(o===IH)return t.LUMINANCE;if(o===NH)return t.LUMINANCE_ALPHA;if(o===Ml)return t.DEPTH_COMPONENT;if(o===ju)return t.DEPTH_STENCIL;if(o===V1)return s=e.get("EXT_sRGB"),s!==null?s.SRGB_ALPHA_EXT:null;if(o===DH)return t.RED;if(o===Cj)return t.RED_INTEGER;if(o===LH)return t.RG;if(o===Rj)return t.RG_INTEGER;if(o===Oj)return t.RGBA_INTEGER;if(o===fx||o===hx||o===dx||o===px)if(l===tn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(o===fx)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===hx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===dx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===px)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(o===fx)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===hx)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===dx)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===px)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===bC||o===wC||o===SC||o===EC)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(o===bC)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===wC)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===SC)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===EC)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===kH)return s=e.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===TC||o===AC)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(o===TC)return l===tn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(o===AC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===MC||o===PC||o===CC||o===RC||o===OC||o===IC||o===NC||o===DC||o===LC||o===kC||o===jC||o===UC||o===FC||o===VC)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(o===MC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===PC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===CC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===RC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===OC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===IC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===NC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===DC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===LC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===kC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===jC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===UC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===FC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===VC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===mx||o===BC||o===$C)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(o===mx)return l===tn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===BC)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===$C)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===jH||o===zC||o===HC||o===GC)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(o===mx)return s.COMPRESSED_RED_RGTC1_EXT;if(o===zC)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===HC)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===GC)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===Al?r?t.UNSIGNED_INT_24_8:(s=e.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null):t[o]!==void 0?t[o]:null}return{convert:i}}class aX extends si{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let Uh=class extends cr{constructor(){super(),this.isGroup=!0,this.type="Group"}};const sX={type:"move"};class Ux{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Uh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Uh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new te),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Uh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new te),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,o=null,a=null;const s=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const y of e.hand.values()){const g=n.getJointPose(y,r),p=this._getHandJoint(c,y);g!==null&&(p.matrix.fromArray(g.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,p.jointRadius=g.radius),p.visible=g!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],h=u.position.distanceTo(f.position),d=.02,v=.005;c.inputState.pinching&&h>d+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=d-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,r),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));s!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(sX)))}return s!==null&&(s.visible=i!==null),l!==null&&(l.visible=o!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Uh;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class lX extends Qr{constructor(e,n,r,i,o,a,s,l,c,u){if(u=u!==void 0?u:Ml,u!==Ml&&u!==ju)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Ml&&(r=Ja),r===void 0&&u===ju&&(r=Al),super(null,i,o,a,s,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=s!==void 0?s:Dr,this.minFilter=l!==void 0?l:Dr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class cX extends Yl{constructor(e,n){super();const r=this;let i=null,o=1,a=null,s="local-floor",l=1,c=null,u=null,f=null,h=null,d=null,v=null;const y=n.getContextAttributes();let g=null,p=null;const x=[],_=[],T=new si;T.layers.enable(1),T.viewport=new Zn;const w=new si;w.layers.enable(2),w.viewport=new Zn;const M=[T,w],b=new aX;b.layers.enable(1),b.layers.enable(2);let A=null,E=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(z){let q=x[z];return q===void 0&&(q=new Ux,x[z]=q),q.getTargetRaySpace()},this.getControllerGrip=function(z){let q=x[z];return q===void 0&&(q=new Ux,x[z]=q),q.getGripSpace()},this.getHand=function(z){let q=x[z];return q===void 0&&(q=new Ux,x[z]=q),q.getHandSpace()};function P(z){const q=_.indexOf(z.inputSource);if(q===-1)return;const ee=x[q];ee!==void 0&&(ee.update(z.inputSource,z.frame,c||a),ee.dispatchEvent({type:z.type,data:z.inputSource}))}function R(){i.removeEventListener("select",P),i.removeEventListener("selectstart",P),i.removeEventListener("selectend",P),i.removeEventListener("squeeze",P),i.removeEventListener("squeezestart",P),i.removeEventListener("squeezeend",P),i.removeEventListener("end",R),i.removeEventListener("inputsourceschange",N);for(let z=0;z<x.length;z++){const q=_[z];q!==null&&(_[z]=null,x[z].disconnect(q))}A=null,E=null,e.setRenderTarget(g),d=null,h=null,f=null,i=null,p=null,K.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(z){o=z,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(z){s=z,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(z){c=z},this.getBaseLayer=function(){return h!==null?h:d},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(z){if(i=z,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",P),i.addEventListener("selectstart",P),i.addEventListener("selectend",P),i.addEventListener("squeeze",P),i.addEventListener("squeezestart",P),i.addEventListener("squeezeend",P),i.addEventListener("end",R),i.addEventListener("inputsourceschange",N),y.xrCompatible!==!0&&await n.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const q={antialias:i.renderState.layers===void 0?y.antialias:!0,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(i,n,q),i.updateRenderState({baseLayer:d}),p=new Fl(d.framebufferWidth,d.framebufferHeight,{format:to,type:ps,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let q=null,ee=null,me=null;y.depth&&(me=y.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,q=y.stencil?ju:Ml,ee=y.stencil?Al:Ja);const _e={colorFormat:n.RGBA8,depthFormat:me,scaleFactor:o};f=new XRWebGLBinding(i,n),h=f.createProjectionLayer(_e),i.updateRenderState({layers:[h]}),p=new Fl(h.textureWidth,h.textureHeight,{format:to,type:ps,depthTexture:new lX(h.textureWidth,h.textureHeight,ee,void 0,void 0,void 0,void 0,void 0,void 0,q),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0});const Ne=e.properties.get(p);Ne.__ignoreDepthValues=h.ignoreDepthValues}p.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await i.requestReferenceSpace(s),K.setContext(i),K.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function N(z){for(let q=0;q<z.removed.length;q++){const ee=z.removed[q],me=_.indexOf(ee);me>=0&&(_[me]=null,x[me].disconnect(ee))}for(let q=0;q<z.added.length;q++){const ee=z.added[q];let me=_.indexOf(ee);if(me===-1){for(let Ne=0;Ne<x.length;Ne++)if(Ne>=_.length){_.push(ee),me=Ne;break}else if(_[Ne]===null){_[Ne]=ee,me=Ne;break}if(me===-1)break}const _e=x[me];_e&&_e.connect(ee)}}const O=new te,D=new te;function L(z,q,ee){O.setFromMatrixPosition(q.matrixWorld),D.setFromMatrixPosition(ee.matrixWorld);const me=O.distanceTo(D),_e=q.projectionMatrix.elements,Ne=ee.projectionMatrix.elements,We=_e[14]/(_e[10]-1),Ue=_e[14]/(_e[10]+1),fe=(_e[9]+1)/_e[5],Re=(_e[9]-1)/_e[5],Ee=(_e[8]-1)/_e[0],H=(Ne[8]+1)/Ne[0],lt=We*Ee,be=We*H,Le=me/(-Ee+H),ke=Le*-Ee;q.matrixWorld.decompose(z.position,z.quaternion,z.scale),z.translateX(ke),z.translateZ(Le),z.matrixWorld.compose(z.position,z.quaternion,z.scale),z.matrixWorldInverse.copy(z.matrixWorld).invert();const mt=We+Le,Ye=Ue+Le,Ze=lt-ke,ht=be+(me-ke),Mt=fe*Ue/Ye*mt,jt=Re*Ue/Ye*mt;z.projectionMatrix.makePerspective(Ze,ht,Mt,jt,mt,Ye),z.projectionMatrixInverse.copy(z.projectionMatrix).invert()}function W(z,q){q===null?z.matrixWorld.copy(z.matrix):z.matrixWorld.multiplyMatrices(q.matrixWorld,z.matrix),z.matrixWorldInverse.copy(z.matrixWorld).invert()}this.updateCamera=function(z){if(i===null)return;b.near=w.near=T.near=z.near,b.far=w.far=T.far=z.far,(A!==b.near||E!==b.far)&&(i.updateRenderState({depthNear:b.near,depthFar:b.far}),A=b.near,E=b.far);const q=z.parent,ee=b.cameras;W(b,q);for(let me=0;me<ee.length;me++)W(ee[me],q);ee.length===2?L(b,T,w):b.projectionMatrix.copy(T.projectionMatrix),$(z,b,q)};function $(z,q,ee){ee===null?z.matrix.copy(q.matrixWorld):(z.matrix.copy(ee.matrixWorld),z.matrix.invert(),z.matrix.multiply(q.matrixWorld)),z.matrix.decompose(z.position,z.quaternion,z.scale),z.updateMatrixWorld(!0),z.projectionMatrix.copy(q.projectionMatrix),z.projectionMatrixInverse.copy(q.projectionMatrixInverse),z.isPerspectiveCamera&&(z.fov=Ud*2*Math.atan(1/z.projectionMatrix.elements[5]),z.zoom=1)}this.getCamera=function(){return b},this.getFoveation=function(){if(!(h===null&&d===null))return l},this.setFoveation=function(z){l=z,h!==null&&(h.fixedFoveation=z),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=z)};let B=null;function X(z,q){if(u=q.getViewerPose(c||a),v=q,u!==null){const ee=u.views;d!==null&&(e.setRenderTargetFramebuffer(p,d.framebuffer),e.setRenderTarget(p));let me=!1;ee.length!==b.cameras.length&&(b.cameras.length=0,me=!0);for(let _e=0;_e<ee.length;_e++){const Ne=ee[_e];let We=null;if(d!==null)We=d.getViewport(Ne);else{const fe=f.getViewSubImage(h,Ne);We=fe.viewport,_e===0&&(e.setRenderTargetTextures(p,fe.colorTexture,h.ignoreDepthValues?void 0:fe.depthStencilTexture),e.setRenderTarget(p))}let Ue=M[_e];Ue===void 0&&(Ue=new si,Ue.layers.enable(_e),Ue.viewport=new Zn,M[_e]=Ue),Ue.matrix.fromArray(Ne.transform.matrix),Ue.matrix.decompose(Ue.position,Ue.quaternion,Ue.scale),Ue.projectionMatrix.fromArray(Ne.projectionMatrix),Ue.projectionMatrixInverse.copy(Ue.projectionMatrix).invert(),Ue.viewport.set(We.x,We.y,We.width,We.height),_e===0&&(b.matrix.copy(Ue.matrix),b.matrix.decompose(b.position,b.quaternion,b.scale)),me===!0&&b.cameras.push(Ue)}}for(let ee=0;ee<x.length;ee++){const me=_[ee],_e=x[ee];me!==null&&_e!==void 0&&_e.update(me,q,c||a)}B&&B(z,q),q.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:q}),v=null}const K=new Gj;K.setAnimationLoop(X),this.setAnimationLoop=function(z){B=z},this.dispose=function(){}}}function uX(t,e){function n(g,p){g.matrixAutoUpdate===!0&&g.updateMatrix(),p.value.copy(g.matrix)}function r(g,p){p.color.getRGB(g.fogColor.value,$j(t)),p.isFog?(g.fogNear.value=p.near,g.fogFar.value=p.far):p.isFogExp2&&(g.fogDensity.value=p.density)}function i(g,p,x,_,T){p.isMeshBasicMaterial||p.isMeshLambertMaterial?o(g,p):p.isMeshToonMaterial?(o(g,p),f(g,p)):p.isMeshPhongMaterial?(o(g,p),u(g,p)):p.isMeshStandardMaterial?(o(g,p),h(g,p),p.isMeshPhysicalMaterial&&d(g,p,T)):p.isMeshMatcapMaterial?(o(g,p),v(g,p)):p.isMeshDepthMaterial?o(g,p):p.isMeshDistanceMaterial?(o(g,p),y(g,p)):p.isMeshNormalMaterial?o(g,p):p.isLineBasicMaterial?(a(g,p),p.isLineDashedMaterial&&s(g,p)):p.isPointsMaterial?l(g,p,x,_):p.isSpriteMaterial?c(g,p):p.isShadowMaterial?(g.color.value.copy(p.color),g.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function o(g,p){g.opacity.value=p.opacity,p.color&&g.diffuse.value.copy(p.color),p.emissive&&g.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(g.map.value=p.map,n(p.map,g.mapTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,n(p.alphaMap,g.alphaMapTransform)),p.bumpMap&&(g.bumpMap.value=p.bumpMap,n(p.bumpMap,g.bumpMapTransform),g.bumpScale.value=p.bumpScale,p.side===Vr&&(g.bumpScale.value*=-1)),p.normalMap&&(g.normalMap.value=p.normalMap,n(p.normalMap,g.normalMapTransform),g.normalScale.value.copy(p.normalScale),p.side===Vr&&g.normalScale.value.negate()),p.displacementMap&&(g.displacementMap.value=p.displacementMap,n(p.displacementMap,g.displacementMapTransform),g.displacementScale.value=p.displacementScale,g.displacementBias.value=p.displacementBias),p.emissiveMap&&(g.emissiveMap.value=p.emissiveMap,n(p.emissiveMap,g.emissiveMapTransform)),p.specularMap&&(g.specularMap.value=p.specularMap,n(p.specularMap,g.specularMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest);const x=e.get(p).envMap;if(x&&(g.envMap.value=x,g.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=p.reflectivity,g.ior.value=p.ior,g.refractionRatio.value=p.refractionRatio),p.lightMap){g.lightMap.value=p.lightMap;const _=t._useLegacyLights===!0?Math.PI:1;g.lightMapIntensity.value=p.lightMapIntensity*_,n(p.lightMap,g.lightMapTransform)}p.aoMap&&(g.aoMap.value=p.aoMap,g.aoMapIntensity.value=p.aoMapIntensity,n(p.aoMap,g.aoMapTransform))}function a(g,p){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,p.map&&(g.map.value=p.map,n(p.map,g.mapTransform))}function s(g,p){g.dashSize.value=p.dashSize,g.totalSize.value=p.dashSize+p.gapSize,g.scale.value=p.scale}function l(g,p,x,_){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,g.size.value=p.size*x,g.scale.value=_*.5,p.map&&(g.map.value=p.map,n(p.map,g.uvTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,n(p.alphaMap,g.alphaMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest)}function c(g,p){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,g.rotation.value=p.rotation,p.map&&(g.map.value=p.map,n(p.map,g.mapTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,n(p.alphaMap,g.alphaMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest)}function u(g,p){g.specular.value.copy(p.specular),g.shininess.value=Math.max(p.shininess,1e-4)}function f(g,p){p.gradientMap&&(g.gradientMap.value=p.gradientMap)}function h(g,p){g.metalness.value=p.metalness,p.metalnessMap&&(g.metalnessMap.value=p.metalnessMap,n(p.metalnessMap,g.metalnessMapTransform)),g.roughness.value=p.roughness,p.roughnessMap&&(g.roughnessMap.value=p.roughnessMap,n(p.roughnessMap,g.roughnessMapTransform)),e.get(p).envMap&&(g.envMapIntensity.value=p.envMapIntensity)}function d(g,p,x){g.ior.value=p.ior,p.sheen>0&&(g.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),g.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(g.sheenColorMap.value=p.sheenColorMap,n(p.sheenColorMap,g.sheenColorMapTransform)),p.sheenRoughnessMap&&(g.sheenRoughnessMap.value=p.sheenRoughnessMap,n(p.sheenRoughnessMap,g.sheenRoughnessMapTransform))),p.clearcoat>0&&(g.clearcoat.value=p.clearcoat,g.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(g.clearcoatMap.value=p.clearcoatMap,n(p.clearcoatMap,g.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,n(p.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(g.clearcoatNormalMap.value=p.clearcoatNormalMap,n(p.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===Vr&&g.clearcoatNormalScale.value.negate())),p.iridescence>0&&(g.iridescence.value=p.iridescence,g.iridescenceIOR.value=p.iridescenceIOR,g.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(g.iridescenceMap.value=p.iridescenceMap,n(p.iridescenceMap,g.iridescenceMapTransform)),p.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=p.iridescenceThicknessMap,n(p.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),p.transmission>0&&(g.transmission.value=p.transmission,g.transmissionSamplerMap.value=x.texture,g.transmissionSamplerSize.value.set(x.width,x.height),p.transmissionMap&&(g.transmissionMap.value=p.transmissionMap,n(p.transmissionMap,g.transmissionMapTransform)),g.thickness.value=p.thickness,p.thicknessMap&&(g.thicknessMap.value=p.thicknessMap,n(p.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=p.attenuationDistance,g.attenuationColor.value.copy(p.attenuationColor)),p.anisotropy>0&&(g.anisotropyVector.value.set(p.anisotropy*Math.cos(p.anisotropyRotation),p.anisotropy*Math.sin(p.anisotropyRotation)),p.anisotropyMap&&(g.anisotropyMap.value=p.anisotropyMap,n(p.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=p.specularIntensity,g.specularColor.value.copy(p.specularColor),p.specularColorMap&&(g.specularColorMap.value=p.specularColorMap,n(p.specularColorMap,g.specularColorMapTransform)),p.specularIntensityMap&&(g.specularIntensityMap.value=p.specularIntensityMap,n(p.specularIntensityMap,g.specularIntensityMapTransform))}function v(g,p){p.matcap&&(g.matcap.value=p.matcap)}function y(g,p){const x=e.get(p).light;g.referencePosition.value.setFromMatrixPosition(x.matrixWorld),g.nearDistance.value=x.shadow.camera.near,g.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function fX(t,e,n,r){let i={},o={},a=[];const s=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(x,_){const T=_.program;r.uniformBlockBinding(x,T)}function c(x,_){let T=i[x.id];T===void 0&&(v(x),T=u(x),i[x.id]=T,x.addEventListener("dispose",g));const w=_.program;r.updateUBOMapping(x,w);const M=e.render.frame;o[x.id]!==M&&(h(x),o[x.id]=M)}function u(x){const _=f();x.__bindingPointIndex=_;const T=t.createBuffer(),w=x.__size,M=x.usage;return t.bindBuffer(t.UNIFORM_BUFFER,T),t.bufferData(t.UNIFORM_BUFFER,w,M),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,_,T),T}function f(){for(let x=0;x<s;x++)if(a.indexOf(x)===-1)return a.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(x){const _=i[x.id],T=x.uniforms,w=x.__cache;t.bindBuffer(t.UNIFORM_BUFFER,_);for(let M=0,b=T.length;M<b;M++){const A=T[M];if(d(A,M,w)===!0){const E=A.__offset,P=Array.isArray(A.value)?A.value:[A.value];let R=0;for(let N=0;N<P.length;N++){const O=P[N],D=y(O);typeof O=="number"?(A.__data[0]=O,t.bufferSubData(t.UNIFORM_BUFFER,E+R,A.__data)):O.isMatrix3?(A.__data[0]=O.elements[0],A.__data[1]=O.elements[1],A.__data[2]=O.elements[2],A.__data[3]=O.elements[0],A.__data[4]=O.elements[3],A.__data[5]=O.elements[4],A.__data[6]=O.elements[5],A.__data[7]=O.elements[0],A.__data[8]=O.elements[6],A.__data[9]=O.elements[7],A.__data[10]=O.elements[8],A.__data[11]=O.elements[0]):(O.toArray(A.__data,R),R+=D.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,E,A.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function d(x,_,T){const w=x.value;if(T[_]===void 0){if(typeof w=="number")T[_]=w;else{const M=Array.isArray(w)?w:[w],b=[];for(let A=0;A<M.length;A++)b.push(M[A].clone());T[_]=b}return!0}else if(typeof w=="number"){if(T[_]!==w)return T[_]=w,!0}else{const M=Array.isArray(T[_])?T[_]:[T[_]],b=Array.isArray(w)?w:[w];for(let A=0;A<M.length;A++){const E=M[A];if(E.equals(b[A])===!1)return E.copy(b[A]),!0}}return!1}function v(x){const _=x.uniforms;let T=0;const w=16;let M=0;for(let b=0,A=_.length;b<A;b++){const E=_[b],P={boundary:0,storage:0},R=Array.isArray(E.value)?E.value:[E.value];for(let N=0,O=R.length;N<O;N++){const D=R[N],L=y(D);P.boundary+=L.boundary,P.storage+=L.storage}if(E.__data=new Float32Array(P.storage/Float32Array.BYTES_PER_ELEMENT),E.__offset=T,b>0){M=T%w;const N=w-M;M!==0&&N-P.boundary<0&&(T+=w-M,E.__offset=T)}T+=P.storage}return M=T%w,M>0&&(T+=w-M),x.__size=T,x.__cache={},this}function y(x){const _={boundary:0,storage:0};return typeof x=="number"?(_.boundary=4,_.storage=4):x.isVector2?(_.boundary=8,_.storage=8):x.isVector3||x.isColor?(_.boundary=16,_.storage=12):x.isVector4?(_.boundary=16,_.storage=16):x.isMatrix3?(_.boundary=48,_.storage=48):x.isMatrix4?(_.boundary=64,_.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),_}function g(x){const _=x.target;_.removeEventListener("dispose",g);const T=a.indexOf(_.__bindingPointIndex);a.splice(T,1),t.deleteBuffer(i[_.id]),delete i[_.id],delete o[_.id]}function p(){for(const x in i)t.deleteBuffer(i[x]);a=[],i={},o={}}return{bind:l,update:c,dispose:p}}class cT{constructor(e={}){const{canvas:n=cG(),context:r=null,depth:i=!0,stencil:o=!0,alpha:a=!1,antialias:s=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let h;r!==null?h=r.getContextAttributes().alpha:h=a;const d=new Uint32Array(4),v=new Int32Array(4);let y=null,g=null;const p=[],x=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=jn,this._useLegacyLights=!1,this.toneMapping=ds,this.toneMappingExposure=1;const _=this;let T=!1,w=0,M=0,b=null,A=-1,E=null;const P=new Zn,R=new Zn;let N=null;const O=new Rt(0);let D=0,L=n.width,W=n.height,$=1,B=null,X=null;const K=new Zn(0,0,L,W),z=new Zn(0,0,L,W);let q=!1;const ee=new aT;let me=!1,_e=!1,Ne=null;const We=new In,Ue=new gt,fe=new te,Re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ee(){return b===null?$:1}let H=r;function lt(U,J){for(let ie=0;ie<U.length;ie++){const oe=U[ie],ae=n.getContext(oe,J);if(ae!==null)return ae}return null}try{const U={alpha:!0,depth:i,stencil:o,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${JE}`),n.addEventListener("webglcontextlost",vt,!1),n.addEventListener("webglcontextrestored",Q,!1),n.addEventListener("webglcontextcreationerror",le,!1),H===null){const J=["webgl2","webgl","experimental-webgl"];if(_.isWebGL1Renderer===!0&&J.shift(),H=lt(J,U),H===null)throw lt(J)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&H instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),H.getShaderPrecisionFormat===void 0&&(H.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let be,Le,ke,mt,Ye,Ze,ht,Mt,jt,F,k,re,ye,he,xe,Ce,Te,Pe,Y,Se,de,Qe,Ge,qe;function Ve(){be=new b7(H),Le=new m7(H,be,e),be.init(Le),Qe=new oX(H,be,Le),ke=new rX(H,be,Le),mt=new E7(H),Ye=new zq,Ze=new iX(H,be,ke,Ye,Le,Qe,mt),ht=new v7(_),Mt=new x7(_),jt=new DG(H,Le),Ge=new d7(H,be,jt,Le),F=new w7(H,jt,mt,Ge),k=new P7(H,F,jt,mt),Y=new M7(H,Le,Ze),Ce=new g7(Ye),re=new $q(_,ht,Mt,be,Le,Ge,Ce),ye=new uX(_,Ye),he=new Gq,xe=new Qq(be,Le),Pe=new h7(_,ht,Mt,ke,k,h,l),Te=new nX(_,k,Le),qe=new fX(H,mt,Le,ke),Se=new p7(H,be,mt,Le),de=new S7(H,be,mt,Le),mt.programs=re.programs,_.capabilities=Le,_.extensions=be,_.properties=Ye,_.renderLists=he,_.shadowMap=Te,_.state=ke,_.info=mt}Ve();const De=new cX(_,H);this.xr=De,this.getContext=function(){return H},this.getContextAttributes=function(){return H.getContextAttributes()},this.forceContextLoss=function(){const U=be.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=be.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return $},this.setPixelRatio=function(U){U!==void 0&&($=U,this.setSize(L,W,!1))},this.getSize=function(U){return U.set(L,W)},this.setSize=function(U,J,ie=!0){if(De.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}L=U,W=J,n.width=Math.floor(U*$),n.height=Math.floor(J*$),ie===!0&&(n.style.width=U+"px",n.style.height=J+"px"),this.setViewport(0,0,U,J)},this.getDrawingBufferSize=function(U){return U.set(L*$,W*$).floor()},this.setDrawingBufferSize=function(U,J,ie){L=U,W=J,$=ie,n.width=Math.floor(U*ie),n.height=Math.floor(J*ie),this.setViewport(0,0,U,J)},this.getCurrentViewport=function(U){return U.copy(P)},this.getViewport=function(U){return U.copy(K)},this.setViewport=function(U,J,ie,oe){U.isVector4?K.set(U.x,U.y,U.z,U.w):K.set(U,J,ie,oe),ke.viewport(P.copy(K).multiplyScalar($).floor())},this.getScissor=function(U){return U.copy(z)},this.setScissor=function(U,J,ie,oe){U.isVector4?z.set(U.x,U.y,U.z,U.w):z.set(U,J,ie,oe),ke.scissor(R.copy(z).multiplyScalar($).floor())},this.getScissorTest=function(){return q},this.setScissorTest=function(U){ke.setScissorTest(q=U)},this.setOpaqueSort=function(U){B=U},this.setTransparentSort=function(U){X=U},this.getClearColor=function(U){return U.copy(Pe.getClearColor())},this.setClearColor=function(){Pe.setClearColor.apply(Pe,arguments)},this.getClearAlpha=function(){return Pe.getClearAlpha()},this.setClearAlpha=function(){Pe.setClearAlpha.apply(Pe,arguments)},this.clear=function(U=!0,J=!0,ie=!0){let oe=0;if(U){let ae=!1;if(b!==null){const Fe=b.texture.format;ae=Fe===Oj||Fe===Rj||Fe===Cj}if(ae){const Fe=b.texture.type,Xe=Fe===ps||Fe===Ja||Fe===tT||Fe===Al||Fe===Mj||Fe===Pj,et=Pe.getClearColor(),tt=Pe.getClearAlpha(),yt=et.r,ct=et.g,at=et.b;Xe?(d[0]=yt,d[1]=ct,d[2]=at,d[3]=tt,H.clearBufferuiv(H.COLOR,0,d)):(v[0]=yt,v[1]=ct,v[2]=at,v[3]=tt,H.clearBufferiv(H.COLOR,0,v))}else oe|=H.COLOR_BUFFER_BIT}J&&(oe|=H.DEPTH_BUFFER_BIT),ie&&(oe|=H.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),H.clear(oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",vt,!1),n.removeEventListener("webglcontextrestored",Q,!1),n.removeEventListener("webglcontextcreationerror",le,!1),he.dispose(),xe.dispose(),Ye.dispose(),ht.dispose(),Mt.dispose(),k.dispose(),Ge.dispose(),qe.dispose(),re.dispose(),De.dispose(),De.removeEventListener("sessionstart",En),De.removeEventListener("sessionend",dt),Ne&&(Ne.dispose(),Ne=null),Tn.stop()};function vt(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function Q(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;const U=mt.autoReset,J=Te.enabled,ie=Te.autoUpdate,oe=Te.needsUpdate,ae=Te.type;Ve(),mt.autoReset=U,Te.enabled=J,Te.autoUpdate=ie,Te.needsUpdate=oe,Te.type=ae}function le(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function ue(U){const J=U.target;J.removeEventListener("dispose",ue),ne(J)}function ne(U){ge(U),Ye.remove(U)}function ge(U){const J=Ye.get(U).programs;J!==void 0&&(J.forEach(function(ie){re.releaseProgram(ie)}),U.isShaderMaterial&&re.releaseShaderCache(U))}this.renderBufferDirect=function(U,J,ie,oe,ae,Fe){J===null&&(J=Re);const Xe=ae.isMesh&&ae.matrixWorld.determinant()<0,et=sm(U,J,ie,oe,ae);ke.setMaterial(oe,Xe);let tt=ie.index,yt=1;if(oe.wireframe===!0){if(tt=F.getWireframeAttribute(ie),tt===void 0)return;yt=2}const ct=ie.drawRange,at=ie.attributes.position;let Vt=ct.start*yt,tr=(ct.start+ct.count)*yt;Fe!==null&&(Vt=Math.max(Vt,Fe.start*yt),tr=Math.min(tr,(Fe.start+Fe.count)*yt)),tt!==null?(Vt=Math.max(Vt,0),tr=Math.min(tr,tt.count)):at!=null&&(Vt=Math.max(Vt,0),tr=Math.min(tr,at.count));const An=tr-Vt;if(An<0||An===1/0)return;Ge.setup(ae,oe,et,ie,tt);let yi,Zt=Se;if(tt!==null&&(yi=jt.get(tt),Zt=de,Zt.setIndex(yi)),ae.isMesh)oe.wireframe===!0?(ke.setLineWidth(oe.wireframeLinewidth*Ee()),Zt.setMode(H.LINES)):Zt.setMode(H.TRIANGLES);else if(ae.isLine){let bt=oe.linewidth;bt===void 0&&(bt=1),ke.setLineWidth(bt*Ee()),ae.isLineSegments?Zt.setMode(H.LINES):ae.isLineLoop?Zt.setMode(H.LINE_LOOP):Zt.setMode(H.LINE_STRIP)}else ae.isPoints?Zt.setMode(H.POINTS):ae.isSprite&&Zt.setMode(H.TRIANGLES);if(ae.isInstancedMesh)Zt.renderInstances(Vt,An,ae.count);else if(ie.isInstancedBufferGeometry){const bt=ie._maxInstanceCount!==void 0?ie._maxInstanceCount:1/0,$s=Math.min(ie.instanceCount,bt);Zt.renderInstances(Vt,An,$s)}else Zt.render(Vt,An)};function Ie(U,J,ie){U.transparent===!0&&U.side===Zo&&U.forceSinglePass===!1?(U.side=Vr,U.needsUpdate=!0,lc(U,J,ie),U.side=ws,U.needsUpdate=!0,lc(U,J,ie),U.side=Zo):lc(U,J,ie)}this.compile=function(U,J,ie=null){ie===null&&(ie=U),g=xe.get(ie),g.init(),x.push(g),ie.traverseVisible(function(ae){ae.isLight&&ae.layers.test(J.layers)&&(g.pushLight(ae),ae.castShadow&&g.pushShadow(ae))}),U!==ie&&U.traverseVisible(function(ae){ae.isLight&&ae.layers.test(J.layers)&&(g.pushLight(ae),ae.castShadow&&g.pushShadow(ae))}),g.setupLights(_._useLegacyLights);const oe=new Set;return U.traverse(function(ae){const Fe=ae.material;if(Fe)if(Array.isArray(Fe))for(let Xe=0;Xe<Fe.length;Xe++){const et=Fe[Xe];Ie(et,ie,ae),oe.add(et)}else Ie(Fe,ie,ae),oe.add(Fe)}),x.pop(),g=null,oe},this.compileAsync=function(U,J,ie=null){const oe=this.compile(U,J,ie);return new Promise(ae=>{function Fe(){if(oe.forEach(function(Xe){Ye.get(Xe).currentProgram.isReady()&&oe.delete(Xe)}),oe.size===0){ae(U);return}setTimeout(Fe,10)}be.get("KHR_parallel_shader_compile")!==null?Fe():setTimeout(Fe,10)})};let rt=null;function Ot(U){rt&&rt(U)}function En(){Tn.stop()}function dt(){Tn.start()}const Tn=new Gj;Tn.setAnimationLoop(Ot),typeof self<"u"&&Tn.setContext(self),this.setAnimationLoop=function(U){rt=U,De.setAnimationLoop(U),U===null?Tn.stop():Tn.start()},De.addEventListener("sessionstart",En),De.addEventListener("sessionend",dt),this.render=function(U,J){if(J!==void 0&&J.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(T===!0)return;U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),J.parent===null&&J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),De.enabled===!0&&De.isPresenting===!0&&(De.cameraAutoUpdate===!0&&De.updateCamera(J),J=De.getCamera()),U.isScene===!0&&U.onBeforeRender(_,U,J,b),g=xe.get(U,x.length),g.init(),x.push(g),We.multiplyMatrices(J.projectionMatrix,J.matrixWorldInverse),ee.setFromProjectionMatrix(We),_e=this.localClippingEnabled,me=Ce.init(this.clippingPlanes,_e),y=he.get(U,p.length),y.init(),p.push(y),Dn(U,J,0,_.sortObjects),y.finish(),_.sortObjects===!0&&y.sort(B,X),this.info.render.frame++,me===!0&&Ce.beginShadows();const ie=g.state.shadowsArray;if(Te.render(ie,U,J),me===!0&&Ce.endShadows(),this.info.autoReset===!0&&this.info.reset(),Pe.render(y,U),g.setupLights(_._useLegacyLights),J.isArrayCamera){const oe=J.cameras;for(let ae=0,Fe=oe.length;ae<Fe;ae++){const Xe=oe[ae];vi(y,U,Xe,Xe.viewport)}}else vi(y,U,J);b!==null&&(Ze.updateMultisampleRenderTarget(b),Ze.updateRenderTargetMipmap(b)),U.isScene===!0&&U.onAfterRender(_,U,J),Ge.resetDefaultState(),A=-1,E=null,x.pop(),x.length>0?g=x[x.length-1]:g=null,p.pop(),p.length>0?y=p[p.length-1]:y=null};function Dn(U,J,ie,oe){if(U.visible===!1)return;if(U.layers.test(J.layers)){if(U.isGroup)ie=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(J);else if(U.isLight)g.pushLight(U),U.castShadow&&g.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||ee.intersectsSprite(U)){oe&&fe.setFromMatrixPosition(U.matrixWorld).applyMatrix4(We);const Xe=k.update(U),et=U.material;et.visible&&y.push(U,Xe,et,ie,fe.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(!U.frustumCulled||ee.intersectsObject(U))){const Xe=k.update(U),et=U.material;if(oe&&(U.boundingSphere!==void 0?(U.boundingSphere===null&&U.computeBoundingSphere(),fe.copy(U.boundingSphere.center)):(Xe.boundingSphere===null&&Xe.computeBoundingSphere(),fe.copy(Xe.boundingSphere.center)),fe.applyMatrix4(U.matrixWorld).applyMatrix4(We)),Array.isArray(et)){const tt=Xe.groups;for(let yt=0,ct=tt.length;yt<ct;yt++){const at=tt[yt],Vt=et[at.materialIndex];Vt&&Vt.visible&&y.push(U,Xe,Vt,ie,fe.z,at)}}else et.visible&&y.push(U,Xe,et,ie,fe.z,null)}}const Fe=U.children;for(let Xe=0,et=Fe.length;Xe<et;Xe++)Dn(Fe[Xe],J,ie,oe)}function vi(U,J,ie,oe){const ae=U.opaque,Fe=U.transmissive,Xe=U.transparent;g.setupLightsView(ie),me===!0&&Ce.setGlobalState(_.clippingPlanes,ie),Fe.length>0&&I_(ae,Fe,J,ie),oe&&ke.viewport(P.copy(oe)),ae.length>0&&sc(ae,J,ie),Fe.length>0&&sc(Fe,J,ie),Xe.length>0&&sc(Xe,J,ie),ke.buffers.depth.setTest(!0),ke.buffers.depth.setMask(!0),ke.buffers.color.setMask(!0),ke.setPolygonOffset(!1)}function I_(U,J,ie,oe){if((ie.isScene===!0?ie.overrideMaterial:null)!==null)return;const Fe=Le.isWebGL2;Ne===null&&(Ne=new Fl(1,1,{generateMipmaps:!0,type:be.has("EXT_color_buffer_half_float")?jd:ps,minFilter:kd,samples:Fe?4:0})),_.getDrawingBufferSize(Ue),Fe?Ne.setSize(Ue.x,Ue.y):Ne.setSize(Pv(Ue.x),Pv(Ue.y));const Xe=_.getRenderTarget();_.setRenderTarget(Ne),_.getClearColor(O),D=_.getClearAlpha(),D<1&&_.setClearColor(16777215,.5),_.clear();const et=_.toneMapping;_.toneMapping=ds,sc(U,ie,oe),Ze.updateMultisampleRenderTarget(Ne),Ze.updateRenderTargetMipmap(Ne);let tt=!1;for(let yt=0,ct=J.length;yt<ct;yt++){const at=J[yt],Vt=at.object,tr=at.geometry,An=at.material,yi=at.group;if(An.side===Zo&&Vt.layers.test(oe.layers)){const Zt=An.side;An.side=Vr,An.needsUpdate=!0,Vo(Vt,ie,oe,tr,An,yi),An.side=Zt,An.needsUpdate=!0,tt=!0}}tt===!0&&(Ze.updateMultisampleRenderTarget(Ne),Ze.updateRenderTargetMipmap(Ne)),_.setRenderTarget(Xe),_.setClearColor(O,D),_.toneMapping=et}function sc(U,J,ie){const oe=J.isScene===!0?J.overrideMaterial:null;for(let ae=0,Fe=U.length;ae<Fe;ae++){const Xe=U[ae],et=Xe.object,tt=Xe.geometry,yt=oe===null?Xe.material:oe,ct=Xe.group;et.layers.test(ie.layers)&&Vo(et,J,ie,tt,yt,ct)}}function Vo(U,J,ie,oe,ae,Fe){U.onBeforeRender(_,J,ie,oe,ae,Fe),U.modelViewMatrix.multiplyMatrices(ie.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),ae.onBeforeRender(_,J,ie,oe,U,Fe),ae.transparent===!0&&ae.side===Zo&&ae.forceSinglePass===!1?(ae.side=Vr,ae.needsUpdate=!0,_.renderBufferDirect(ie,J,oe,ae,U,Fe),ae.side=ws,ae.needsUpdate=!0,_.renderBufferDirect(ie,J,oe,ae,U,Fe),ae.side=Zo):_.renderBufferDirect(ie,J,oe,ae,U,Fe),U.onAfterRender(_,J,ie,oe,ae,Fe)}function lc(U,J,ie){J.isScene!==!0&&(J=Re);const oe=Ye.get(U),ae=g.state.lights,Fe=g.state.shadowsArray,Xe=ae.state.version,et=re.getParameters(U,ae.state,Fe,J,ie),tt=re.getProgramCacheKey(et);let yt=oe.programs;oe.environment=U.isMeshStandardMaterial?J.environment:null,oe.fog=J.fog,oe.envMap=(U.isMeshStandardMaterial?Mt:ht).get(U.envMap||oe.environment),yt===void 0&&(U.addEventListener("dispose",ue),yt=new Map,oe.programs=yt);let ct=yt.get(tt);if(ct!==void 0){if(oe.currentProgram===ct&&oe.lightsStateVersion===Xe)return Bs(U,et),ct}else et.uniforms=re.getUniforms(U),U.onBuild(ie,et,_),U.onBeforeCompile(et,_),ct=re.acquireProgram(et,tt),yt.set(tt,ct),oe.uniforms=et.uniforms;const at=oe.uniforms;return(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(at.clippingPlanes=Ce.uniform),Bs(U,et),oe.needsLights=cc(U),oe.lightsStateVersion=Xe,oe.needsLights&&(at.ambientLightColor.value=ae.state.ambient,at.lightProbe.value=ae.state.probe,at.directionalLights.value=ae.state.directional,at.directionalLightShadows.value=ae.state.directionalShadow,at.spotLights.value=ae.state.spot,at.spotLightShadows.value=ae.state.spotShadow,at.rectAreaLights.value=ae.state.rectArea,at.ltc_1.value=ae.state.rectAreaLTC1,at.ltc_2.value=ae.state.rectAreaLTC2,at.pointLights.value=ae.state.point,at.pointLightShadows.value=ae.state.pointShadow,at.hemisphereLights.value=ae.state.hemi,at.directionalShadowMap.value=ae.state.directionalShadowMap,at.directionalShadowMatrix.value=ae.state.directionalShadowMatrix,at.spotShadowMap.value=ae.state.spotShadowMap,at.spotLightMatrix.value=ae.state.spotLightMatrix,at.spotLightMap.value=ae.state.spotLightMap,at.pointShadowMap.value=ae.state.pointShadowMap,at.pointShadowMatrix.value=ae.state.pointShadowMatrix),oe.currentProgram=ct,oe.uniformsList=null,ct}function am(U){if(U.uniformsList===null){const J=U.currentProgram.getUniforms();U.uniformsList=$g.seqWithValue(J.seq,U.uniforms)}return U.uniformsList}function Bs(U,J){const ie=Ye.get(U);ie.outputColorSpace=J.outputColorSpace,ie.instancing=J.instancing,ie.instancingColor=J.instancingColor,ie.skinning=J.skinning,ie.morphTargets=J.morphTargets,ie.morphNormals=J.morphNormals,ie.morphColors=J.morphColors,ie.morphTargetsCount=J.morphTargetsCount,ie.numClippingPlanes=J.numClippingPlanes,ie.numIntersection=J.numClipIntersection,ie.vertexAlphas=J.vertexAlphas,ie.vertexTangents=J.vertexTangents,ie.toneMapping=J.toneMapping}function sm(U,J,ie,oe,ae){J.isScene!==!0&&(J=Re),Ze.resetTextureUnits();const Fe=J.fog,Xe=oe.isMeshStandardMaterial?J.environment:null,et=b===null?_.outputColorSpace:b.isXRRenderTarget===!0?b.texture.colorSpace:_a,tt=(oe.isMeshStandardMaterial?Mt:ht).get(oe.envMap||Xe),yt=oe.vertexColors===!0&&!!ie.attributes.color&&ie.attributes.color.itemSize===4,ct=!!ie.attributes.tangent&&(!!oe.normalMap||oe.anisotropy>0),at=!!ie.morphAttributes.position,Vt=!!ie.morphAttributes.normal,tr=!!ie.morphAttributes.color;let An=ds;oe.toneMapped&&(b===null||b.isXRRenderTarget===!0)&&(An=_.toneMapping);const yi=ie.morphAttributes.position||ie.morphAttributes.normal||ie.morphAttributes.color,Zt=yi!==void 0?yi.length:0,bt=Ye.get(oe),$s=g.state.lights;if(me===!0&&(_e===!0||U!==E)){const _n=U===E&&oe.id===A;Ce.setState(oe,U,_n)}let sn=!1;oe.version===bt.__version?(bt.needsLights&&bt.lightsStateVersion!==$s.state.version||bt.outputColorSpace!==et||ae.isInstancedMesh&&bt.instancing===!1||!ae.isInstancedMesh&&bt.instancing===!0||ae.isSkinnedMesh&&bt.skinning===!1||!ae.isSkinnedMesh&&bt.skinning===!0||ae.isInstancedMesh&&bt.instancingColor===!0&&ae.instanceColor===null||ae.isInstancedMesh&&bt.instancingColor===!1&&ae.instanceColor!==null||bt.envMap!==tt||oe.fog===!0&&bt.fog!==Fe||bt.numClippingPlanes!==void 0&&(bt.numClippingPlanes!==Ce.numPlanes||bt.numIntersection!==Ce.numIntersection)||bt.vertexAlphas!==yt||bt.vertexTangents!==ct||bt.morphTargets!==at||bt.morphNormals!==Vt||bt.morphColors!==tr||bt.toneMapping!==An||Le.isWebGL2===!0&&bt.morphTargetsCount!==Zt)&&(sn=!0):(sn=!0,bt.__version=oe.version);let po=bt.currentProgram;sn===!0&&(po=lc(oe,J,ae));let eh=!1,zs=!1,th=!1;const Wn=po.getUniforms(),mo=bt.uniforms;if(ke.useProgram(po.program)&&(eh=!0,zs=!0,th=!0),oe.id!==A&&(A=oe.id,zs=!0),eh||E!==U){Wn.setValue(H,"projectionMatrix",U.projectionMatrix),Wn.setValue(H,"viewMatrix",U.matrixWorldInverse);const _n=Wn.map.cameraPosition;_n!==void 0&&_n.setValue(H,fe.setFromMatrixPosition(U.matrixWorld)),Le.logarithmicDepthBuffer&&Wn.setValue(H,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial)&&Wn.setValue(H,"isOrthographic",U.isOrthographicCamera===!0),E!==U&&(E=U,zs=!0,th=!0)}if(ae.isSkinnedMesh){Wn.setOptional(H,ae,"bindMatrix"),Wn.setOptional(H,ae,"bindMatrixInverse");const _n=ae.skeleton;_n&&(Le.floatVertexTextures?(_n.boneTexture===null&&_n.computeBoneTexture(),Wn.setValue(H,"boneTexture",_n.boneTexture,Ze),Wn.setValue(H,"boneTextureSize",_n.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const nh=ie.morphAttributes;if((nh.position!==void 0||nh.normal!==void 0||nh.color!==void 0&&Le.isWebGL2===!0)&&Y.update(ae,ie,po),(zs||bt.receiveShadow!==ae.receiveShadow)&&(bt.receiveShadow=ae.receiveShadow,Wn.setValue(H,"receiveShadow",ae.receiveShadow)),oe.isMeshGouraudMaterial&&oe.envMap!==null&&(mo.envMap.value=tt,mo.flipEnvMap.value=tt.isCubeTexture&&tt.isRenderTargetTexture===!1?-1:1),zs&&(Wn.setValue(H,"toneMappingExposure",_.toneMappingExposure),bt.needsLights&&Jf(mo,th),Fe&&oe.fog===!0&&ye.refreshFogUniforms(mo,Fe),ye.refreshMaterialUniforms(mo,oe,$,W,Ne),$g.upload(H,am(bt),mo,Ze)),oe.isShaderMaterial&&oe.uniformsNeedUpdate===!0&&($g.upload(H,am(bt),mo,Ze),oe.uniformsNeedUpdate=!1),oe.isSpriteMaterial&&Wn.setValue(H,"center",ae.center),Wn.setValue(H,"modelViewMatrix",ae.modelViewMatrix),Wn.setValue(H,"normalMatrix",ae.normalMatrix),Wn.setValue(H,"modelMatrix",ae.matrixWorld),oe.isShaderMaterial||oe.isRawShaderMaterial){const _n=oe.uniformsGroups;for(let Jr=0,uc=_n.length;Jr<uc;Jr++)if(Le.isWebGL2){const Hs=_n[Jr];qe.update(Hs,po),qe.bind(Hs,po)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return po}function Jf(U,J){U.ambientLightColor.needsUpdate=J,U.lightProbe.needsUpdate=J,U.directionalLights.needsUpdate=J,U.directionalLightShadows.needsUpdate=J,U.pointLights.needsUpdate=J,U.pointLightShadows.needsUpdate=J,U.spotLights.needsUpdate=J,U.spotLightShadows.needsUpdate=J,U.rectAreaLights.needsUpdate=J,U.hemisphereLights.needsUpdate=J}function cc(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(U,J,ie){Ye.get(U.texture).__webglTexture=J,Ye.get(U.depthTexture).__webglTexture=ie;const oe=Ye.get(U);oe.__hasExternalTextures=!0,oe.__hasExternalTextures&&(oe.__autoAllocateDepthBuffer=ie===void 0,oe.__autoAllocateDepthBuffer||be.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),oe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(U,J){const ie=Ye.get(U);ie.__webglFramebuffer=J,ie.__useDefaultFramebuffer=J===void 0},this.setRenderTarget=function(U,J=0,ie=0){b=U,w=J,M=ie;let oe=!0,ae=null,Fe=!1,Xe=!1;if(U){const tt=Ye.get(U);tt.__useDefaultFramebuffer!==void 0?(ke.bindFramebuffer(H.FRAMEBUFFER,null),oe=!1):tt.__webglFramebuffer===void 0?Ze.setupRenderTarget(U):tt.__hasExternalTextures&&Ze.rebindTextures(U,Ye.get(U.texture).__webglTexture,Ye.get(U.depthTexture).__webglTexture);const yt=U.texture;(yt.isData3DTexture||yt.isDataArrayTexture||yt.isCompressedArrayTexture)&&(Xe=!0);const ct=Ye.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(Array.isArray(ct[J])?ae=ct[J][ie]:ae=ct[J],Fe=!0):Le.isWebGL2&&U.samples>0&&Ze.useMultisampledRTT(U)===!1?ae=Ye.get(U).__webglMultisampledFramebuffer:Array.isArray(ct)?ae=ct[ie]:ae=ct,P.copy(U.viewport),R.copy(U.scissor),N=U.scissorTest}else P.copy(K).multiplyScalar($).floor(),R.copy(z).multiplyScalar($).floor(),N=q;if(ke.bindFramebuffer(H.FRAMEBUFFER,ae)&&Le.drawBuffers&&oe&&ke.drawBuffers(U,ae),ke.viewport(P),ke.scissor(R),ke.setScissorTest(N),Fe){const tt=Ye.get(U.texture);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_CUBE_MAP_POSITIVE_X+J,tt.__webglTexture,ie)}else if(Xe){const tt=Ye.get(U.texture),yt=J||0;H.framebufferTextureLayer(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,tt.__webglTexture,ie||0,yt)}A=-1},this.readRenderTargetPixels=function(U,J,ie,oe,ae,Fe,Xe){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let et=Ye.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&Xe!==void 0&&(et=et[Xe]),et){ke.bindFramebuffer(H.FRAMEBUFFER,et);try{const tt=U.texture,yt=tt.format,ct=tt.type;if(yt!==to&&Qe.convert(yt)!==H.getParameter(H.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const at=ct===jd&&(be.has("EXT_color_buffer_half_float")||Le.isWebGL2&&be.has("EXT_color_buffer_float"));if(ct!==ps&&Qe.convert(ct)!==H.getParameter(H.IMPLEMENTATION_COLOR_READ_TYPE)&&!(ct===es&&(Le.isWebGL2||be.has("OES_texture_float")||be.has("WEBGL_color_buffer_float")))&&!at){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}J>=0&&J<=U.width-oe&&ie>=0&&ie<=U.height-ae&&H.readPixels(J,ie,oe,ae,Qe.convert(yt),Qe.convert(ct),Fe)}finally{const tt=b!==null?Ye.get(b).__webglFramebuffer:null;ke.bindFramebuffer(H.FRAMEBUFFER,tt)}}},this.copyFramebufferToTexture=function(U,J,ie=0){const oe=Math.pow(2,-ie),ae=Math.floor(J.image.width*oe),Fe=Math.floor(J.image.height*oe);Ze.setTexture2D(J,0),H.copyTexSubImage2D(H.TEXTURE_2D,ie,0,0,U.x,U.y,ae,Fe),ke.unbindTexture()},this.copyTextureToTexture=function(U,J,ie,oe=0){const ae=J.image.width,Fe=J.image.height,Xe=Qe.convert(ie.format),et=Qe.convert(ie.type);Ze.setTexture2D(ie,0),H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,ie.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,ie.unpackAlignment),J.isDataTexture?H.texSubImage2D(H.TEXTURE_2D,oe,U.x,U.y,ae,Fe,Xe,et,J.image.data):J.isCompressedTexture?H.compressedTexSubImage2D(H.TEXTURE_2D,oe,U.x,U.y,J.mipmaps[0].width,J.mipmaps[0].height,Xe,J.mipmaps[0].data):H.texSubImage2D(H.TEXTURE_2D,oe,U.x,U.y,Xe,et,J.image),oe===0&&ie.generateMipmaps&&H.generateMipmap(H.TEXTURE_2D),ke.unbindTexture()},this.copyTextureToTexture3D=function(U,J,ie,oe,ae=0){if(_.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Fe=U.max.x-U.min.x+1,Xe=U.max.y-U.min.y+1,et=U.max.z-U.min.z+1,tt=Qe.convert(oe.format),yt=Qe.convert(oe.type);let ct;if(oe.isData3DTexture)Ze.setTexture3D(oe,0),ct=H.TEXTURE_3D;else if(oe.isDataArrayTexture)Ze.setTexture2DArray(oe,0),ct=H.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,oe.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,oe.unpackAlignment);const at=H.getParameter(H.UNPACK_ROW_LENGTH),Vt=H.getParameter(H.UNPACK_IMAGE_HEIGHT),tr=H.getParameter(H.UNPACK_SKIP_PIXELS),An=H.getParameter(H.UNPACK_SKIP_ROWS),yi=H.getParameter(H.UNPACK_SKIP_IMAGES),Zt=ie.isCompressedTexture?ie.mipmaps[0]:ie.image;H.pixelStorei(H.UNPACK_ROW_LENGTH,Zt.width),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,Zt.height),H.pixelStorei(H.UNPACK_SKIP_PIXELS,U.min.x),H.pixelStorei(H.UNPACK_SKIP_ROWS,U.min.y),H.pixelStorei(H.UNPACK_SKIP_IMAGES,U.min.z),ie.isDataTexture||ie.isData3DTexture?H.texSubImage3D(ct,ae,J.x,J.y,J.z,Fe,Xe,et,tt,yt,Zt.data):ie.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),H.compressedTexSubImage3D(ct,ae,J.x,J.y,J.z,Fe,Xe,et,tt,Zt.data)):H.texSubImage3D(ct,ae,J.x,J.y,J.z,Fe,Xe,et,tt,yt,Zt),H.pixelStorei(H.UNPACK_ROW_LENGTH,at),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,Vt),H.pixelStorei(H.UNPACK_SKIP_PIXELS,tr),H.pixelStorei(H.UNPACK_SKIP_ROWS,An),H.pixelStorei(H.UNPACK_SKIP_IMAGES,yi),ae===0&&oe.generateMipmaps&&H.generateMipmap(ct),ke.unbindTexture()},this.initTexture=function(U){U.isCubeTexture?Ze.setTextureCube(U,0):U.isData3DTexture?Ze.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?Ze.setTexture2DArray(U,0):Ze.setTexture2D(U,0),ke.unbindTexture()},this.resetState=function(){w=0,M=0,b=null,ke.reset(),Ge.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ta}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===nT?"display-p3":"srgb",n.unpackColorSpace=zt.workingColorSpace===g0?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===jn?Pl:Ij}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Pl?jn:_a}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class hX extends cT{}hX.prototype.isWebGL1Renderer=!0;class Qj extends cr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class Zj extends Cf{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Rt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const D2=new In,z1=new y0,rg=new v0,ig=new te;class dX extends cr{constructor(e=new ko,n=new Zj){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),rg.copy(r.boundingSphere),rg.applyMatrix4(i),rg.radius+=o,e.ray.intersectsSphere(rg)===!1)return;D2.copy(i).invert(),z1.copy(e.ray).applyMatrix4(D2);const s=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,c=r.index,f=r.attributes.position;if(c!==null){const h=Math.max(0,a.start),d=Math.min(c.count,a.start+a.count);for(let v=h,y=d;v<y;v++){const g=c.getX(v);ig.fromBufferAttribute(f,g),L2(ig,g,l,i,e,n,this)}}else{const h=Math.max(0,a.start),d=Math.min(f.count,a.start+a.count);for(let v=h,y=d;v<y;v++)ig.fromBufferAttribute(f,v),L2(ig,v,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}}function L2(t,e,n,r,i,o,a){const s=z1.distanceSqToPoint(t);if(s<n){const l=new te;z1.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,object:a})}}class ml extends ko{constructor(e=1,n=32,r=16,i=0,o=Math.PI*2,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:o,thetaStart:a,thetaLength:s},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(a+s,Math.PI);let c=0;const u=[],f=new te,h=new te,d=[],v=[],y=[],g=[];for(let p=0;p<=r;p++){const x=[],_=p/r;let T=0;p===0&&a===0?T=.5/n:p===r&&l===Math.PI&&(T=-.5/n);for(let w=0;w<=n;w++){const M=w/n;f.x=-e*Math.cos(i+M*o)*Math.sin(a+_*s),f.y=e*Math.cos(a+_*s),f.z=e*Math.sin(i+M*o)*Math.sin(a+_*s),v.push(f.x,f.y,f.z),h.copy(f).normalize(),y.push(h.x,h.y,h.z),g.push(M+T,1-_),x.push(c++)}u.push(x)}for(let p=0;p<r;p++)for(let x=0;x<n;x++){const _=u[p][x+1],T=u[p][x],w=u[p+1][x],M=u[p+1][x+1];(p!==0||a>0)&&d.push(_,T,M),(p!==r-1||l<Math.PI)&&d.push(T,w,M)}this.setIndex(d),this.setAttribute("position",new Di(v,3)),this.setAttribute("normal",new Di(y,3)),this.setAttribute("uv",new Di(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ml(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class k2 extends Cf{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Rt(16777215),this.specular=new Rt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nj,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=eT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}const j2={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Jj{constructor(e,n,r){const i=this;let o=!1,a=0,s=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(u){s++,o===!1&&i.onStart!==void 0&&i.onStart(u,a,s),o=!0},this.itemEnd=function(u){a++,i.onProgress!==void 0&&i.onProgress(u,a,s),a===s&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,h=c.length;f<h;f+=2){const d=c[f],v=c[f+1];if(d.global&&(d.lastIndex=0),d.test(u))return v}return null}}}const pX=new Jj;class uT{constructor(e){this.manager=e!==void 0?e:pX,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,o){r.load(e,i,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}uT.DEFAULT_MATERIAL_NAME="__DEFAULT";class mX extends uT{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,a=j2.get(e);if(a!==void 0)return o.manager.itemStart(e),setTimeout(function(){n&&n(a),o.manager.itemEnd(e)},0),a;const s=Fd("img");function l(){u(),j2.add(e,this),n&&n(this),o.manager.itemEnd(e)}function c(f){u(),i&&i(f),o.manager.itemError(e),o.manager.itemEnd(e)}function u(){s.removeEventListener("load",l,!1),s.removeEventListener("error",c,!1)}return s.addEventListener("load",l,!1),s.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),o.manager.itemStart(e),s.src=e,s}}class gX extends uT{constructor(e){super(e)}load(e,n,r,i){const o=new Qr,a=new mX(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(s){o.image=s,o.needsUpdate=!0,n!==void 0&&n(o)},r,i),o}}class eU extends cr{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Rt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}const Fx=new In,U2=new te,F2=new te;class vX{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new gt(512,512),this.map=null,this.mapPass=null,this.matrix=new In,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new aT,this._frameExtents=new gt(1,1),this._viewportCount=1,this._viewports=[new Zn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;U2.setFromMatrixPosition(e.matrixWorld),n.position.copy(U2),F2.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(F2),n.updateMatrixWorld(),Fx.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Fx),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Fx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class yX extends vX{constructor(){super(new Wj(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class _X extends eU{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(cr.DEFAULT_UP),this.updateMatrix(),this.target=new cr,this.shadow=new yX}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class xX extends eU{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class bX{constructor(e,n,r=0,i=1/0){this.ray=new y0(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new iT,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return H1(e,this,r,n),r.sort(V2),r}intersectObjects(e,n=!0,r=[]){for(let i=0,o=e.length;i<o;i++)H1(e[i],this,r,n);return r.sort(V2),r}}function V2(t,e){return t.distance-e.distance}function H1(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let o=0,a=i.length;o<a;o++)H1(i[o],e,n,!0)}}class B2{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Sr(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:JE}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=JE);const $2={type:"change"},Vx={type:"start"},z2={type:"end"},og=new y0,H2=new Wa,wX=Math.cos(70*Dj.DEG2RAD);class tU extends Yl{constructor(e,n){super(),this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new te,this.cursor=new te,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:mc.ROTATE,MIDDLE:mc.DOLLY,RIGHT:mc.PAN},this.touches={ONE:Ga.ROTATE,TWO:Ga.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return s.phi},this.getAzimuthalAngle=function(){return s.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Y){Y.addEventListener("keydown",k),this._domElementKeyEvents=Y},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",k),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent($2),r.update(),o=i.NONE},this.update=function(){const Y=new te,Se=new Vl().setFromUnitVectors(e.up,new te(0,1,0)),de=Se.clone().invert(),Qe=new te,Ge=new Vl,qe=new te,Ve=2*Math.PI;return function(vt=null){const Q=r.object.position;Y.copy(Q).sub(r.target),Y.applyQuaternion(Se),s.setFromVector3(Y),r.autoRotate&&o===i.NONE&&R(E(vt)),r.enableDamping?(s.theta+=l.theta*r.dampingFactor,s.phi+=l.phi*r.dampingFactor):(s.theta+=l.theta,s.phi+=l.phi);let le=r.minAzimuthAngle,ue=r.maxAzimuthAngle;isFinite(le)&&isFinite(ue)&&(le<-Math.PI?le+=Ve:le>Math.PI&&(le-=Ve),ue<-Math.PI?ue+=Ve:ue>Math.PI&&(ue-=Ve),le<=ue?s.theta=Math.max(le,Math.min(ue,s.theta)):s.theta=s.theta>(le+ue)/2?Math.max(le,s.theta):Math.min(ue,s.theta)),s.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,s.phi)),s.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(u,r.dampingFactor):r.target.add(u),r.target.sub(r.cursor),r.target.clampLength(r.minTargetRadius,r.maxTargetRadius),r.target.add(r.cursor),r.zoomToCursor&&M||r.object.isOrthographicCamera?s.radius=X(s.radius):s.radius=X(s.radius*c),Y.setFromSpherical(s),Y.applyQuaternion(de),Q.copy(r.target).add(Y),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,u.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),u.set(0,0,0));let ne=!1;if(r.zoomToCursor&&M){let ge=null;if(r.object.isPerspectiveCamera){const Ie=Y.length();ge=X(Ie*c);const rt=Ie-ge;r.object.position.addScaledVector(T,rt),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Ie=new te(w.x,w.y,0);Ie.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/c)),r.object.updateProjectionMatrix(),ne=!0;const rt=new te(w.x,w.y,0);rt.unproject(r.object),r.object.position.sub(rt).add(Ie),r.object.updateMatrixWorld(),ge=Y.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;ge!==null&&(this.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(ge).add(r.object.position):(og.origin.copy(r.object.position),og.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(og.direction))<wX?e.lookAt(r.target):(H2.setFromNormalAndCoplanarPoint(r.object.up,r.target),og.intersectPlane(H2,r.target))))}else r.object.isOrthographicCamera&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/c)),r.object.updateProjectionMatrix(),ne=!0);return c=1,M=!1,ne||Qe.distanceToSquared(r.object.position)>a||8*(1-Ge.dot(r.object.quaternion))>a||qe.distanceToSquared(r.target)>0?(r.dispatchEvent($2),Qe.copy(r.object.position),Ge.copy(r.object.quaternion),qe.copy(r.target),ne=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",he),r.domElement.removeEventListener("pointerdown",Ye),r.domElement.removeEventListener("pointercancel",ht),r.domElement.removeEventListener("wheel",F),r.domElement.removeEventListener("pointermove",Ze),r.domElement.removeEventListener("pointerup",ht),r._domElementKeyEvents!==null&&(r._domElementKeyEvents.removeEventListener("keydown",k),r._domElementKeyEvents=null)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=i.NONE;const a=1e-6,s=new B2,l=new B2;let c=1;const u=new te,f=new gt,h=new gt,d=new gt,v=new gt,y=new gt,g=new gt,p=new gt,x=new gt,_=new gt,T=new te,w=new gt;let M=!1;const b=[],A={};function E(Y){return Y!==null?2*Math.PI/60*r.autoRotateSpeed*Y:2*Math.PI/60/60*r.autoRotateSpeed}function P(){return Math.pow(.95,r.zoomSpeed)}function R(Y){l.theta-=Y}function N(Y){l.phi-=Y}const O=function(){const Y=new te;return function(de,Qe){Y.setFromMatrixColumn(Qe,0),Y.multiplyScalar(-de),u.add(Y)}}(),D=function(){const Y=new te;return function(de,Qe){r.screenSpacePanning===!0?Y.setFromMatrixColumn(Qe,1):(Y.setFromMatrixColumn(Qe,0),Y.crossVectors(r.object.up,Y)),Y.multiplyScalar(de),u.add(Y)}}(),L=function(){const Y=new te;return function(de,Qe){const Ge=r.domElement;if(r.object.isPerspectiveCamera){const qe=r.object.position;Y.copy(qe).sub(r.target);let Ve=Y.length();Ve*=Math.tan(r.object.fov/2*Math.PI/180),O(2*de*Ve/Ge.clientHeight,r.object.matrix),D(2*Qe*Ve/Ge.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(O(de*(r.object.right-r.object.left)/r.object.zoom/Ge.clientWidth,r.object.matrix),D(Qe*(r.object.top-r.object.bottom)/r.object.zoom/Ge.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function W(Y){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?c/=Y:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function $(Y){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?c*=Y:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function B(Y){if(!r.zoomToCursor)return;M=!0;const Se=r.domElement.getBoundingClientRect(),de=Y.clientX-Se.left,Qe=Y.clientY-Se.top,Ge=Se.width,qe=Se.height;w.x=de/Ge*2-1,w.y=-(Qe/qe)*2+1,T.set(w.x,w.y,1).unproject(r.object).sub(r.object.position).normalize()}function X(Y){return Math.max(r.minDistance,Math.min(r.maxDistance,Y))}function K(Y){f.set(Y.clientX,Y.clientY)}function z(Y){B(Y),p.set(Y.clientX,Y.clientY)}function q(Y){v.set(Y.clientX,Y.clientY)}function ee(Y){h.set(Y.clientX,Y.clientY),d.subVectors(h,f).multiplyScalar(r.rotateSpeed);const Se=r.domElement;R(2*Math.PI*d.x/Se.clientHeight),N(2*Math.PI*d.y/Se.clientHeight),f.copy(h),r.update()}function me(Y){x.set(Y.clientX,Y.clientY),_.subVectors(x,p),_.y>0?W(P()):_.y<0&&$(P()),p.copy(x),r.update()}function _e(Y){y.set(Y.clientX,Y.clientY),g.subVectors(y,v).multiplyScalar(r.panSpeed),L(g.x,g.y),v.copy(y),r.update()}function Ne(Y){B(Y),Y.deltaY<0?$(P()):Y.deltaY>0&&W(P()),r.update()}function We(Y){let Se=!1;switch(Y.code){case r.keys.UP:Y.ctrlKey||Y.metaKey||Y.shiftKey?N(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):L(0,r.keyPanSpeed),Se=!0;break;case r.keys.BOTTOM:Y.ctrlKey||Y.metaKey||Y.shiftKey?N(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):L(0,-r.keyPanSpeed),Se=!0;break;case r.keys.LEFT:Y.ctrlKey||Y.metaKey||Y.shiftKey?R(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):L(r.keyPanSpeed,0),Se=!0;break;case r.keys.RIGHT:Y.ctrlKey||Y.metaKey||Y.shiftKey?R(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):L(-r.keyPanSpeed,0),Se=!0;break}Se&&(Y.preventDefault(),r.update())}function Ue(){if(b.length===1)f.set(b[0].pageX,b[0].pageY);else{const Y=.5*(b[0].pageX+b[1].pageX),Se=.5*(b[0].pageY+b[1].pageY);f.set(Y,Se)}}function fe(){if(b.length===1)v.set(b[0].pageX,b[0].pageY);else{const Y=.5*(b[0].pageX+b[1].pageX),Se=.5*(b[0].pageY+b[1].pageY);v.set(Y,Se)}}function Re(){const Y=b[0].pageX-b[1].pageX,Se=b[0].pageY-b[1].pageY,de=Math.sqrt(Y*Y+Se*Se);p.set(0,de)}function Ee(){r.enableZoom&&Re(),r.enablePan&&fe()}function H(){r.enableZoom&&Re(),r.enableRotate&&Ue()}function lt(Y){if(b.length==1)h.set(Y.pageX,Y.pageY);else{const de=Pe(Y),Qe=.5*(Y.pageX+de.x),Ge=.5*(Y.pageY+de.y);h.set(Qe,Ge)}d.subVectors(h,f).multiplyScalar(r.rotateSpeed);const Se=r.domElement;R(2*Math.PI*d.x/Se.clientHeight),N(2*Math.PI*d.y/Se.clientHeight),f.copy(h)}function be(Y){if(b.length===1)y.set(Y.pageX,Y.pageY);else{const Se=Pe(Y),de=.5*(Y.pageX+Se.x),Qe=.5*(Y.pageY+Se.y);y.set(de,Qe)}g.subVectors(y,v).multiplyScalar(r.panSpeed),L(g.x,g.y),v.copy(y)}function Le(Y){const Se=Pe(Y),de=Y.pageX-Se.x,Qe=Y.pageY-Se.y,Ge=Math.sqrt(de*de+Qe*Qe);x.set(0,Ge),_.set(0,Math.pow(x.y/p.y,r.zoomSpeed)),W(_.y),p.copy(x)}function ke(Y){r.enableZoom&&Le(Y),r.enablePan&&be(Y)}function mt(Y){r.enableZoom&&Le(Y),r.enableRotate&&lt(Y)}function Ye(Y){r.enabled!==!1&&(b.length===0&&(r.domElement.setPointerCapture(Y.pointerId),r.domElement.addEventListener("pointermove",Ze),r.domElement.addEventListener("pointerup",ht)),xe(Y),Y.pointerType==="touch"?re(Y):Mt(Y))}function Ze(Y){r.enabled!==!1&&(Y.pointerType==="touch"?ye(Y):jt(Y))}function ht(Y){Ce(Y),b.length===0&&(r.domElement.releasePointerCapture(Y.pointerId),r.domElement.removeEventListener("pointermove",Ze),r.domElement.removeEventListener("pointerup",ht)),r.dispatchEvent(z2),o=i.NONE}function Mt(Y){let Se;switch(Y.button){case 0:Se=r.mouseButtons.LEFT;break;case 1:Se=r.mouseButtons.MIDDLE;break;case 2:Se=r.mouseButtons.RIGHT;break;default:Se=-1}switch(Se){case mc.DOLLY:if(r.enableZoom===!1)return;z(Y),o=i.DOLLY;break;case mc.ROTATE:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(r.enablePan===!1)return;q(Y),o=i.PAN}else{if(r.enableRotate===!1)return;K(Y),o=i.ROTATE}break;case mc.PAN:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(r.enableRotate===!1)return;K(Y),o=i.ROTATE}else{if(r.enablePan===!1)return;q(Y),o=i.PAN}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(Vx)}function jt(Y){switch(o){case i.ROTATE:if(r.enableRotate===!1)return;ee(Y);break;case i.DOLLY:if(r.enableZoom===!1)return;me(Y);break;case i.PAN:if(r.enablePan===!1)return;_e(Y);break}}function F(Y){r.enabled===!1||r.enableZoom===!1||o!==i.NONE||(Y.preventDefault(),r.dispatchEvent(Vx),Ne(Y),r.dispatchEvent(z2))}function k(Y){r.enabled===!1||r.enablePan===!1||We(Y)}function re(Y){switch(Te(Y),b.length){case 1:switch(r.touches.ONE){case Ga.ROTATE:if(r.enableRotate===!1)return;Ue(),o=i.TOUCH_ROTATE;break;case Ga.PAN:if(r.enablePan===!1)return;fe(),o=i.TOUCH_PAN;break;default:o=i.NONE}break;case 2:switch(r.touches.TWO){case Ga.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ee(),o=i.TOUCH_DOLLY_PAN;break;case Ga.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;H(),o=i.TOUCH_DOLLY_ROTATE;break;default:o=i.NONE}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(Vx)}function ye(Y){switch(Te(Y),o){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;lt(Y),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;be(Y),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ke(Y),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;mt(Y),r.update();break;default:o=i.NONE}}function he(Y){r.enabled!==!1&&Y.preventDefault()}function xe(Y){b.push(Y)}function Ce(Y){delete A[Y.pointerId];for(let Se=0;Se<b.length;Se++)if(b[Se].pointerId==Y.pointerId){b.splice(Se,1);return}}function Te(Y){let Se=A[Y.pointerId];Se===void 0&&(Se=new gt,A[Y.pointerId]=Se),Se.set(Y.pageX,Y.pageY)}function Pe(Y){const Se=Y.pointerId===b[0].pointerId?b[1]:b[0];return A[Se.pointerId]}r.domElement.addEventListener("contextmenu",he),r.domElement.addEventListener("pointerdown",Ye),r.domElement.addEventListener("pointercancel",ht),r.domElement.addEventListener("wheel",F,{passive:!1}),this.update()}}var wu=Object.freeze({Linear:Object.freeze({None:function(t){return t},In:function(t){return t},Out:function(t){return t},InOut:function(t){return t}}),Quadratic:Object.freeze({In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}}),Cubic:Object.freeze({In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}}),Quartic:Object.freeze({In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}}),Quintic:Object.freeze({In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}}),Sinusoidal:Object.freeze({In:function(t){return 1-Math.sin((1-t)*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return .5*(1-Math.sin(Math.PI*(.5-t)))}}),Exponential:Object.freeze({In:function(t){return t===0?0:Math.pow(1024,t-1)},Out:function(t){return t===1?1:1-Math.pow(2,-10*t)},InOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}}),Circular:Object.freeze({In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}}),Elastic:Object.freeze({In:function(t){return t===0?0:t===1?1:-Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI)},Out:function(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t-.1)*5*Math.PI)+1},InOut:function(t){return t===0?0:t===1?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin((t-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(t){var e=1.70158;return t===1?1:t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return t===0?0:--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}}),Bounce:Object.freeze({In:function(t){return 1-wu.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?wu.Bounce.In(t*2)*.5:wu.Bounce.Out(t*2-1)*.5+.5}}),generatePow:function(t){return t===void 0&&(t=4),t=t<Number.EPSILON?Number.EPSILON:t,t=t>1e4?1e4:t,{In:function(e){return Math.pow(e,t)},Out:function(e){return 1-Math.pow(1-e,t)},InOut:function(e){return e<.5?Math.pow(e*2,t)/2:(1-Math.pow(2-e*2,t))/2+.5}}}}),Fh=function(){return performance.now()},SX=function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return t.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(n){return e._tweens[n]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},t.prototype.remove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},t.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},t.prototype.update=function(e,n){e===void 0&&(e=Fh()),n===void 0&&(n=!0);var r=Object.keys(this._tweens);if(r.length!==0)for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<r.length;i++){var o=this._tweens[r[i]],a=!n;o&&o.update(e,a)===!1&&!n&&this.remove(o)}r=Object.keys(this._tweensAddedDuringUpdate)}},t}(),nu={Linear:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=nu.Utils.Linear;return e<0?o(t[0],t[1],r):e>1?o(t[n],t[n-1],n-r):o(t[i],t[i+1>n?n:i+1],r-i)},Bezier:function(t,e){for(var n=0,r=t.length-1,i=Math.pow,o=nu.Utils.Bernstein,a=0;a<=r;a++)n+=i(1-e,r-a)*i(e,a)*t[a]*o(r,a);return n},CatmullRom:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=nu.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(i=Math.floor(r=n*(1+e))),o(t[(i-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],r-i)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[n]-(o(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):o(t[i?i-1:0],t[i],t[n<i+1?n:i+1],t[n<i+2?n:i+2],r-i)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=nu.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var r=e;r>1;r--)n*=r;return t[e]=n,n}}(),CatmullRom:function(t,e,n,r,i){var o=(n-t)*.5,a=(r-e)*.5,s=i*i,l=i*s;return(2*e-2*n+o+a)*l+(-3*e+3*n-2*o-a)*s+o*i+e}}},EX=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),G1=new SX,TX=function(){function t(e,n){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=wu.Linear.None,this._interpolationFunction=nu.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=EX.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof n=="object"?(this._group=n,n.add(this)):n===!0&&(this._group=G1,G1.add(this))}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.getDuration=function(){return this._duration},t.prototype.to=function(e,n){if(n===void 0&&(n=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=n<0?0:n,this},t.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},t.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},t.prototype.start=function(e,n){if(e===void 0&&(e=Fh()),n===void 0&&(n=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var r in this._valuesStartRepeat)this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||n){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var o in this._valuesEnd)i[o]=this._valuesEnd[o];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n)}return this},t.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},t.prototype._setupProperties=function(e,n,r,i,o){for(var a in r){var s=e[a],l=Array.isArray(s),c=l?"array":typeof s,u=!l&&Array.isArray(r[a]);if(!(c==="undefined"||c==="function")){if(u){var f=r[a];if(f.length===0)continue;for(var h=[s],d=0,v=f.length;d<v;d+=1){var y=this._handleRelativeValue(s,f[d]);if(isNaN(y)){u=!1,console.warn("Found invalid interpolation list. Skipping.");break}h.push(y)}u&&(r[a]=h)}if((c==="object"||l)&&s&&!u){n[a]=l?[]:{};var g=s;for(var p in g)n[a][p]=g[p];i[a]=l?[]:{};var f=r[a];if(!this._isDynamic){var x={};for(var p in f)x[p]=f[p];r[a]=f=x}this._setupProperties(g,n[a],f,i[a],o)}else(typeof n[a]>"u"||o)&&(n[a]=s),l||(n[a]*=1),u?i[a]=r[a].slice().reverse():i[a]=n[a]||0}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},t.prototype.pause=function(e){return e===void 0&&(e=Fh()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},t.prototype.resume=function(e){return e===void 0&&(e=Fh()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},t.prototype.stopChainedTweens=function(){for(var e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this},t.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},t.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},t.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},t.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},t.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},t.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},t.prototype.easing=function(e){return e===void 0&&(e=wu.Linear.None),this._easingFunction=e,this},t.prototype.interpolation=function(e){return e===void 0&&(e=nu.Linear),this._interpolationFunction=e,this},t.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._chainedTweens=e,this},t.prototype.onStart=function(e){return this._onStartCallback=e,this},t.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},t.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},t.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},t.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},t.prototype.onStop=function(e){return this._onStopCallback=e,this},t.prototype.update=function(e,n){var r=this,i;if(e===void 0&&(e=Fh()),n===void 0&&(n=t.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(n)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,s=this._duration+((i=this._repeatDelayTime)!==null&&i!==void 0?i:this._delayTime),l=this._duration+this._repeat*s,c=function(){if(r._duration===0||a>l)return 1;var y=Math.trunc(a/s),g=a-y*s,p=Math.min(g/r._duration,1);return p===0&&a===r._duration?1:p},u=c(),f=this._easingFunction(u);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,f),this._onUpdateCallback&&this._onUpdateCallback(this._object,u),this._duration===0||a>=this._duration)if(this._repeat>0){var h=Math.min(Math.trunc((a-this._duration)/s)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=h);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=s*h,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var d=0,v=this._chainedTweens.length;d<v;d++)this._chainedTweens[d].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(e,n,r,i){for(var o in r)if(n[o]!==void 0){var a=n[o]||0,s=r[o],l=Array.isArray(e[o]),c=Array.isArray(s),u=!l&&c;u?e[o]=this._interpolationFunction(s,i):typeof s=="object"&&s?this._updateProperties(e[o],a,s,i):(s=this._handleRelativeValue(a,s),typeof s=="number"&&(e[o]=a+(s-a)*i))}},t.prototype._handleRelativeValue=function(e,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?e+parseFloat(n):parseFloat(n)},t.prototype._swapEndStartRepeatValues=function(e){var n=this._valuesStartRepeat[e],r=this._valuesEnd[e];typeof r=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(r):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n},t.autoStartOnUpdate=!1,t}(),Io=G1;Io.getAll.bind(Io);Io.removeAll.bind(Io);Io.add.bind(Io);Io.remove.bind(Io);var AX=Io.update.bind(Io),fT={};fT.match=IX;fT.parse=nU;var MX=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,PX=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,CX=/^(?:(min|max)-)?(.+)/,RX=/(em|rem|px|cm|mm|in|pt|pc)?$/,OX=/(dpi|dpcm|dppx)?$/;function IX(t,e){return nU(t).some(function(n){var r=n.inverse,i=n.type==="all"||e.type===n.type;if(i&&r||!(i||r))return!1;var o=n.expressions.every(function(a){var s=a.feature,l=a.modifier,c=a.value,u=e[s];if(!u)return!1;switch(s){case"orientation":case"scan":return u.toLowerCase()===c.toLowerCase();case"width":case"height":case"device-width":case"device-height":c=q2(c),u=q2(u);break;case"resolution":c=W2(c),u=W2(u);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":c=G2(c),u=G2(u);break;case"grid":case"color":case"color-index":case"monochrome":c=parseInt(c,10)||1,u=parseInt(u,10)||0;break}switch(l){case"min":return u>=c;case"max":return u<=c;default:return u===c}});return o&&!r||!o&&r})}function nU(t){return t.split(",").map(function(e){e=e.trim();var n=e.match(MX),r=n[1],i=n[2],o=n[3]||"",a={};return a.inverse=!!r&&r.toLowerCase()==="not",a.type=i?i.toLowerCase():"all",o=o.match(/\([^\)]+\)/g)||[],a.expressions=o.map(function(s){var l=s.match(PX),c=l[1].toLowerCase().match(CX);return{modifier:c[1],feature:c[2],value:l[2]}}),a})}function G2(t){var e=Number(t),n;return e||(n=t.match(/^(\d+)\s*\/\s*(\d+)$/),e=n[1]/n[2]),e}function W2(t){var e=parseFloat(t),n=String(t).match(OX)[1];switch(n){case"dpcm":return e/2.54;case"dppx":return e*96;default:return e}}function q2(t){var e=parseFloat(t),n=String(t).match(RX)[1];switch(n){case"em":return e*16;case"rem":return e*16;case"cm":return e*96/2.54;case"mm":return e*96/2.54/10;case"in":return e*96;case"pt":return e*72;case"pc":return e*72/12;default:return e}}var NX=fT.match,X2=typeof window<"u"?window.matchMedia:null;function DX(t,e,n){var r=this,i;X2&&!n&&(i=X2.call(window,t)),i?(this.matches=i.matches,this.media=i.media,i.addListener(s)):(this.matches=NX(t,e),this.media=t),this.addListener=o,this.removeListener=a,this.dispose=l;function o(c){i&&i.addListener(c)}function a(c){i&&i.removeListener(c)}function s(c){r.matches=c.matches,r.media=c.media}function l(){i&&i.removeListener(s)}}function LX(t,e,n){return new DX(t,e,n)}var kX=LX;const jX=Ft(kX);var UX=/[A-Z]/g,FX=/^ms-/,Bx={};function VX(t){return"-"+t.toLowerCase()}function rU(t){if(Bx.hasOwnProperty(t))return Bx[t];var e=t.replace(UX,VX);return Bx[t]=FX.test(e)?"-"+e:e}function BX(t,e){if(t===e)return!0;if(!t||!e)return!1;const n=Object.keys(t),r=Object.keys(e),i=n.length;if(r.length!==i)return!1;for(let o=0;o<i;o++){const a=n[o];if(t[a]!==e[a]||!Object.prototype.hasOwnProperty.call(e,a))return!1}return!0}var iU={exports:{}},$X="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",zX=$X,HX=zX;function oU(){}function aU(){}aU.resetWarningCache=oU;var GX=function(){function t(r,i,o,a,s,l){if(l!==HX){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:aU,resetWarningCache:oU};return n.PropTypes=n,n};iU.exports=GX();var WX=iU.exports;const je=Ft(WX),Ir=je.oneOfType([je.string,je.number]),hT={all:je.bool,grid:je.bool,aural:je.bool,braille:je.bool,handheld:je.bool,print:je.bool,projection:je.bool,screen:je.bool,tty:je.bool,tv:je.bool,embossed:je.bool},sU={orientation:je.oneOf(["portrait","landscape"]),scan:je.oneOf(["progressive","interlace"]),aspectRatio:je.string,deviceAspectRatio:je.string,height:Ir,deviceHeight:Ir,width:Ir,deviceWidth:Ir,color:je.bool,colorIndex:je.bool,monochrome:je.bool,resolution:Ir,type:Object.keys(hT)},{type:qRe,...qX}=sU,lU={minAspectRatio:je.string,maxAspectRatio:je.string,minDeviceAspectRatio:je.string,maxDeviceAspectRatio:je.string,minHeight:Ir,maxHeight:Ir,minDeviceHeight:Ir,maxDeviceHeight:Ir,minWidth:Ir,maxWidth:Ir,minDeviceWidth:Ir,maxDeviceWidth:Ir,minColor:je.number,maxColor:je.number,minColorIndex:je.number,maxColorIndex:je.number,minMonochrome:je.number,maxMonochrome:je.number,minResolution:Ir,maxResolution:Ir,...qX},XX={...hT,...lU};var KX={all:XX,types:hT,matchers:sU,features:lU};const YX=t=>`not ${t}`,QX=(t,e)=>{const n=rU(t);return typeof e=="number"&&(e=`${e}px`),e===!0?n:e===!1?YX(n):`(${n}: ${e})`},ZX=t=>t.join(" and "),JX=t=>{const e=[];return Object.keys(KX.all).forEach(n=>{const r=t[n];r!=null&&e.push(QX(n,r))}),ZX(e)},eK=V.createContext(void 0),tK=t=>t.query||JX(t),K2=t=>t?Object.keys(t).reduce((n,r)=>(n[rU(r)]=t[r],n),{}):void 0,cU=()=>{const t=V.useRef(!1);return V.useEffect(()=>{t.current=!0},[]),t.current},nK=t=>{const e=V.useContext(eK),n=()=>K2(t)||K2(e),[r,i]=V.useState(n);return V.useEffect(()=>{const o=n();BX(r,o)||i(o)},[t,e]),r},rK=t=>{const e=()=>tK(t),[n,r]=V.useState(e);return V.useEffect(()=>{const i=e();n!==i&&r(i)},[t]),n},iK=(t,e)=>{const n=()=>jX(t,e||{},!!e),[r,i]=V.useState(n),o=cU();return V.useEffect(()=>{if(o){const a=n();return i(a),()=>{a&&a.dispose()}}},[t,e]),r},oK=t=>{const[e,n]=V.useState(t.matches);return V.useEffect(()=>{const r=i=>{n(i.matches)};return t.addListener(r),n(t.matches),()=>{t.removeListener(r)}},[t]),e},Li=(t,e,n)=>{const r=nK(e),i=rK(t);if(!i)throw new Error("Invalid or missing MediaQuery!");const o=iK(i,r),a=oK(o),s=cU();return V.useEffect(()=>{s&&n&&n(a)},[a]),V.useEffect(()=>()=>{o&&o.dispose()},[]),a},aK=[{name:"UAE",lat:23.4241,lng:53.8478,code:"AE"},{name:"India",lat:20.5937,lng:78.9629,code:"IN"},{name:"Indonesia",lat:-.7893,lng:113.9213,code:"ID"},{name:"USA",lat:37.0902,lng:-95.7129,code:"US"},{name:"UK",lat:55.3781,lng:-3.436,code:"GB"},{name:"Thailand",lat:15.87,lng:100.9925,code:"TH"},{name:"Bahrain",lat:26.0667,lng:50.5577,code:"BH"},{name:"Germany",lat:51.1657,lng:10.4515,code:"DE"},{name:"Australia",lat:-25.2744,lng:133.7751,code:"AU"},{name:"Canada",lat:56.1304,lng:-106.3468,code:"CA"},{name:"Mexico",lat:23.6345,lng:-102.5528,code:"MX"},{name:"China",lat:35.8617,lng:104.1954,code:"CN"},{name:"Ireland",lat:53.1424,lng:-7.6921,code:"IE"},{name:"Cyprus",lat:35.1264,lng:33.4299,code:"CY"},{name:"Czechia",lat:49.8175,lng:15.473,code:"CZ"},{name:"Russia",lat:61.524,lng:105.3188,code:"RU"},{name:"Colombia",lat:4.5709,lng:-74.2973,code:"CO"},{name:"Egypt",lat:26.8206,lng:30.8025,code:"EG"},{name:"Italy",lat:41.8719,lng:12.5674,code:"IT"},{name:"Norway",lat:60.472,lng:8.4689,code:"NO"},{name:"South Africa",lat:-30.5595,lng:22.9375,code:"ZA"},{name:"Switzerland",lat:46.8182,lng:8.2275,code:"CH"},{name:"Japan",lat:36.2048,lng:138.2529,code:"JP"},{name:"Iraq",lat:33.2232,lng:43.6793,code:"IQ"},{name:"Kazakhstan",lat:48.0196,lng:66.9237,code:"KZ"},{name:"Kuwait",lat:29.3759,lng:47.9774,code:"KW"},{name:"Libya",lat:26.3351,lng:17.2283,code:"LY"},{name:"Ukraine",lat:48.3794,lng:31.1656,code:"UA"},{name:"Iran",lat:32.4279,lng:53.688,code:"IR"},{name:"Nigeria",lat:9.082,lng:8.6753,code:"NG"},{name:"Korea",lat:35.9078,lng:127.7669,code:"KR"},{name:"Austria",lat:47.5162,lng:14.5501,code:"AT"},{name:"Poland",lat:51.9194,lng:19.1451,code:"PL"},{name:"Brazil",lat:-14.235,lng:-51.9253,code:"BR"},{name:"Ecuador",lat:-1.8312,lng:-78.1834,code:"EC"},{name:"Venezuela",lat:6.4238,lng:-66.5897,code:"VE"},{name:"Oman",lat:21.4735,lng:55.9754,code:"OM"},{name:"Malaysia",lat:4.2105,lng:101.9758,code:"MY"},{name:"Qatar",lat:25.3548,lng:51.1839,code:"QA"},{name:"Spain",lat:40.4637,lng:-3.7492,code:"ES"},{name:"Saudi Arabia",lat:23.8859,lng:45.0792,code:"SA"},{name:"Slovakia",lat:48.669,lng:19.699,code:"SK"},{name:"Angola",lat:-11.2027,lng:17.8739,code:"AO"},{name:"Algeria",lat:28.0339,lng:1.6596,code:"DZ"},{name:"Syria",lat:34.8021,lng:38.9968,code:"SY"},{name:"France",lat:46.2276,lng:2.2137,code:"FR"},{name:"Turkmenistan",lat:38.9697,lng:59.5563,code:"TM"},{name:"Argentina",lat:-38.4161,lng:-63.6167,code:"AR"},{name:"Netherlands",lat:52.1326,lng:5.2913,code:"NL"}],sK={countries:aK};function lK(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function b0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const W1=t=>Array.isArray(t);function uU(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Vd(t){return typeof t=="string"||Array.isArray(t)}function Y2(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function dT(t,e,n,r){if(typeof e=="function"){const[i,o]=Y2(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=Y2(r);e=e(n!==void 0?n:t.custom,i,o)}return e}function w0(t,e,n){const r=t.getProps();return dT(r,e,n!==void 0?n:r.custom,t)}const pT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],mT=["initial",...pT],zp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ql=new Set(zp),sa=t=>t*1e3,la=t=>t/1e3,cK={type:"spring",stiffness:500,damping:25,restSpeed:10},uK=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),fK={type:"keyframes",duration:.8},hK={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},dK=(t,{keyframes:e})=>e.length>2?fK:Ql.has(t)?t.startsWith("scale")?uK(e[1]):cK:hK;function gT(t,e){return t?t[e]||t.default||t:void 0}const pK={skipAnimations:!1,useManualTiming:!1},mK=t=>t!==null;function S0(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(mK),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const Mr=t=>t;function gK(t){let e=new Set,n=new Set,r=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function s(c){o.has(c)&&(l.schedule(c),t()),c(a)}const l={schedule:(c,u=!1,f=!1)=>{const d=f&&r?e:n;return u&&o.add(c),d.has(c)||d.add(c),c},cancel:c=>{n.delete(c),o.delete(c)},process:c=>{if(a=c,r){i=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(s),r=!1,i&&(i=!1,l.process(c))}};return l}const ag=["read","resolveKeyframes","update","preRender","render","postRender"],vK=40;function fU(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=ag.reduce((p,x)=>(p[x]=gK(o),p),{}),{read:s,resolveKeyframes:l,update:c,preRender:u,render:f,postRender:h}=a,d=()=>{const p=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(p-i.timestamp,vK),1),i.timestamp=p,i.isProcessing=!0,s.process(i),l.process(i),c.process(i),u.process(i),f.process(i),h.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(d))},v=()=>{n=!0,r=!0,i.isProcessing||t(d)};return{schedule:ag.reduce((p,x)=>{const _=a[x];return p[x]=(T,w=!1,M=!1)=>(n||v(),_.schedule(T,w,M)),p},{}),cancel:p=>{for(let x=0;x<ag.length;x++)a[ag[x]].cancel(p)},state:i,steps:a}}const{schedule:Gt,cancel:Ss,state:or,steps:$x}=fU(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mr,!0),hU=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,yK=1e-7,_K=12;function xK(t,e,n,r,i){let o,a,s=0;do a=e+(n-e)/2,o=hU(a,r,i)-t,o>0?n=a:e=a;while(Math.abs(o)>yK&&++s<_K);return a}function Hp(t,e,n,r){if(t===e&&n===r)return Mr;const i=o=>xK(o,0,1,t,n);return o=>o===0||o===1?o:hU(i(o),e,r)}const dU=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,pU=t=>e=>1-t(1-e),mU=Hp(.33,1.53,.69,.99),vT=pU(mU),gU=dU(vT),vU=t=>(t*=2)<1?.5*vT(t):.5*(2-Math.pow(2,-10*(t-1))),yT=t=>1-Math.sin(Math.acos(t)),yU=pU(yT),_U=dU(yT),xU=t=>/^0[^.\s]+$/u.test(t);function bK(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||xU(t):!0}let q1=Mr;const bU=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),wU=t=>e=>typeof e=="string"&&e.startsWith(t),SU=wU("--"),wK=wU("var(--"),_T=t=>wK(t)?SK.test(t.split("/*")[0].trim()):!1,SK=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,EK=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function TK(t){const e=EK.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function EU(t,e,n=1){const[r,i]=TK(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const a=o.trim();return bU(a)?parseFloat(a):a}return _T(i)?EU(i,e,n+1):i}const Es=(t,e,n)=>n>e?e:n<t?t:n,Of={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Bd={...Of,transform:t=>Es(0,1,t)},sg={...Of,default:1},Gp=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ba=Gp("deg"),To=Gp("%"),nt=Gp("px"),AK=Gp("vh"),MK=Gp("vw"),Q2={...To,parse:t=>To.parse(t)/100,transform:t=>To.transform(t*100)},PK=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Z2=t=>t===Of||t===nt,J2=(t,e)=>parseFloat(t.split(", ")[e]),eR=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return J2(i[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?J2(o[1],t):0}},CK=new Set(["x","y","z"]),RK=zp.filter(t=>!CK.has(t));function OK(t){const e=[];return RK.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Fu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:eR(4,13),y:eR(5,14)};Fu.translateX=Fu.x;Fu.translateY=Fu.y;const TU=t=>e=>e.test(t),IK={test:t=>t==="auto",parse:t=>t},AU=[Of,nt,To,Ba,MK,AK,IK],tR=t=>AU.find(TU(t)),Cl=new Set;let X1=!1,K1=!1;function MU(){if(K1){const t=Array.from(Cl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=OK(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,a])=>{var s;(s=r.getValue(o))===null||s===void 0||s.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}K1=!1,X1=!1,Cl.forEach(t=>t.complete()),Cl.clear()}function PU(){Cl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(K1=!0)})}function NK(){PU(),MU()}class xT{constructor(e,n,r,i,o,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Cl.add(this),X1||(X1=!0,Gt.read(PU),Gt.resolveKeyframes(MU))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const a=i==null?void 0:i.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const l=r.readValue(n,s);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Cl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Cl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const id=t=>Math.round(t*1e5)/1e5,bT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function DK(t){return t==null}const LK=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,wT=(t,e)=>n=>!!(typeof n=="string"&&LK.test(n)&&n.startsWith(t)||e&&!DK(n)&&Object.prototype.hasOwnProperty.call(n,e)),CU=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,a,s]=r.match(bT);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(a),alpha:s!==void 0?parseFloat(s):1}},kK=t=>Es(0,255,t),zx={...Of,transform:t=>Math.round(kK(t))},gl={test:wT("rgb","red"),parse:CU("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+zx.transform(t)+", "+zx.transform(e)+", "+zx.transform(n)+", "+id(Bd.transform(r))+")"};function jK(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Y1={test:wT("#"),parse:jK,transform:gl.transform},ru={test:wT("hsl","hue"),parse:CU("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+To.transform(id(e))+", "+To.transform(id(n))+", "+id(Bd.transform(r))+")"},_r={test:t=>gl.test(t)||Y1.test(t)||ru.test(t),parse:t=>gl.test(t)?gl.parse(t):ru.test(t)?ru.parse(t):Y1.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?gl.transform(t):ru.transform(t)},UK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function FK(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(bT))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(UK))===null||n===void 0?void 0:n.length)||0)>0}const RU="number",OU="color",VK="var",BK="var(",nR="${}",$K=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $d(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const s=e.replace($K,l=>(_r.test(l)?(r.color.push(o),i.push(OU),n.push(_r.parse(l))):l.startsWith(BK)?(r.var.push(o),i.push(VK),n.push(l)):(r.number.push(o),i.push(RU),n.push(parseFloat(l))),++o,nR)).split(nR);return{values:n,split:s,indexes:r,types:i}}function IU(t){return $d(t).values}function NU(t){const{split:e,types:n}=$d(t),r=e.length;return i=>{let o="";for(let a=0;a<r;a++)if(o+=e[a],i[a]!==void 0){const s=n[a];s===RU?o+=id(i[a]):s===OU?o+=_r.transform(i[a]):o+=i[a]}return o}}const zK=t=>typeof t=="number"?0:t;function HK(t){const e=IU(t);return NU(t)(e.map(zK))}const Ts={test:FK,parse:IU,createTransformer:NU,getAnimatableNone:HK},GK=new Set(["brightness","contrast","saturate","opacity"]);function WK(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(bT)||[];if(!r)return t;const i=n.replace(r,"");let o=GK.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const qK=/\b([a-z-]*)\(.*?\)/gu,Q1={...Ts,getAnimatableNone:t=>{const e=t.match(qK);return e?e.map(WK).join(" "):t}},XK={borderWidth:nt,borderTopWidth:nt,borderRightWidth:nt,borderBottomWidth:nt,borderLeftWidth:nt,borderRadius:nt,radius:nt,borderTopLeftRadius:nt,borderTopRightRadius:nt,borderBottomRightRadius:nt,borderBottomLeftRadius:nt,width:nt,maxWidth:nt,height:nt,maxHeight:nt,top:nt,right:nt,bottom:nt,left:nt,padding:nt,paddingTop:nt,paddingRight:nt,paddingBottom:nt,paddingLeft:nt,margin:nt,marginTop:nt,marginRight:nt,marginBottom:nt,marginLeft:nt,backgroundPositionX:nt,backgroundPositionY:nt},KK={rotate:Ba,rotateX:Ba,rotateY:Ba,rotateZ:Ba,scale:sg,scaleX:sg,scaleY:sg,scaleZ:sg,skew:Ba,skewX:Ba,skewY:Ba,distance:nt,translateX:nt,translateY:nt,translateZ:nt,x:nt,y:nt,z:nt,perspective:nt,transformPerspective:nt,opacity:Bd,originX:Q2,originY:Q2,originZ:nt},rR={...Of,transform:Math.round},ST={...XK,...KK,zIndex:rR,size:nt,fillOpacity:Bd,strokeOpacity:Bd,numOctaves:rR},YK={...ST,color:_r,backgroundColor:_r,outlineColor:_r,fill:_r,stroke:_r,borderColor:_r,borderTopColor:_r,borderRightColor:_r,borderBottomColor:_r,borderLeftColor:_r,filter:Q1,WebkitFilter:Q1},ET=t=>YK[t];function DU(t,e){let n=ET(t);return n!==Q1&&(n=Ts),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const QK=new Set(["auto","none","0"]);function ZK(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!QK.has(o)&&$d(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=DU(n,i)}class LU extends xT{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),_T(c))){const u=EU(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!PK.has(r)||e.length!==2)return;const[i,o]=e,a=tR(i),s=tR(o);if(a!==s)if(Z2(a)&&Z2(s))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)bK(e[i])&&r.push(i);r.length&&ZK(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fu[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const o=n.getValue(r);o&&o.jump(this.measuredOrigin,!1);const a=i.length-1,s=i[a];i[a]=Fu[r](n.measureViewportBox(),window.getComputedStyle(n.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function TT(t){return typeof t=="function"}let zg;function JK(){zg=void 0}const Ao={now:()=>(zg===void 0&&Ao.set(or.isProcessing||pK.useManualTiming?or.timestamp:performance.now()),zg),set:t=>{zg=t,queueMicrotask(JK)}},iR=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ts.test(t)||t==="0")&&!t.startsWith("url("));function eY(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function tY(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=iR(i,e),s=iR(o,e);return!a||!s?!1:eY(t)||(n==="spring"||TT(n))&&r}const nY=40;class kU{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",...s}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ao.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:a,...s},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>nY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&NK(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Ao.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:o,delay:a,onComplete:s,onUpdate:l,isGenerator:c}=this.options;if(!c&&!tY(e,r,i,o))if(a)this.options.duration=0;else{l==null||l(S0(e,this.options,n)),s==null||s(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function jU(t,e){return e?t*(1e3/e):0}const rY=5;function UU(t,e,n){const r=Math.max(e-rY,0);return jU(n-t(r),e-r)}const Hx=.001,iY=.01,oY=10,aY=.05,sY=1;function lY({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,o,a=1-e;a=Es(aY,sY,a),t=Es(iY,oY,la(t)),a<1?(i=c=>{const u=c*a,f=u*t,h=u-n,d=Z1(c,a),v=Math.exp(-f);return Hx-h/d*v},o=c=>{const f=c*a*t,h=f*n+n,d=Math.pow(a,2)*Math.pow(c,2)*t,v=Math.exp(-f),y=Z1(Math.pow(c,2),a);return(-i(c)+Hx>0?-1:1)*((h-d)*v)/y}):(i=c=>{const u=Math.exp(-c*t),f=(c-n)*t+1;return-Hx+u*f},o=c=>{const u=Math.exp(-c*t),f=(n-c)*(t*t);return u*f});const s=5/t,l=uY(i,o,s);if(t=sa(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:t}}}const cY=12;function uY(t,e,n){let r=n;for(let i=1;i<cY;i++)r=r-t(r)/e(r);return r}function Z1(t,e){return t*Math.sqrt(1-e*e)}const fY=["duration","bounce"],hY=["stiffness","damping","mass"];function oR(t,e){return e.some(n=>t[n]!==void 0)}function dY(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!oR(t,hY)&&oR(t,fY)){const n=lY(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function FU({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],o=t[t.length-1],a={done:!1,value:i},{stiffness:s,damping:l,mass:c,duration:u,velocity:f,isResolvedFromDuration:h}=dY({...r,velocity:-la(r.velocity||0)}),d=f||0,v=l/(2*Math.sqrt(s*c)),y=o-i,g=la(Math.sqrt(s/c)),p=Math.abs(y)<5;n||(n=p?.01:2),e||(e=p?.005:.5);let x;if(v<1){const _=Z1(g,v);x=T=>{const w=Math.exp(-v*g*T);return o-w*((d+v*g*y)/_*Math.sin(_*T)+y*Math.cos(_*T))}}else if(v===1)x=_=>o-Math.exp(-g*_)*(y+(d+g*y)*_);else{const _=g*Math.sqrt(v*v-1);x=T=>{const w=Math.exp(-v*g*T),M=Math.min(_*T,300);return o-w*((d+v*g*y)*Math.sinh(M)+_*y*Math.cosh(M))/_}}return{calculatedDuration:h&&u||null,next:_=>{const T=x(_);if(h)a.done=_>=u;else{let w=0;v<1&&(w=_===0?sa(d):UU(x,_,T));const M=Math.abs(w)<=n,b=Math.abs(o-T)<=e;a.done=M&&b}return a.value=a.done?o:T,a}}}function aR({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:s,max:l,restDelta:c=.5,restSpeed:u}){const f=t[0],h={done:!1,value:f},d=A=>s!==void 0&&A<s||l!==void 0&&A>l,v=A=>s===void 0?l:l===void 0||Math.abs(s-A)<Math.abs(l-A)?s:l;let y=n*e;const g=f+y,p=a===void 0?g:a(g);p!==g&&(y=p-f);const x=A=>-y*Math.exp(-A/r),_=A=>p+x(A),T=A=>{const E=x(A),P=_(A);h.done=Math.abs(E)<=c,h.value=h.done?p:P};let w,M;const b=A=>{d(h.value)&&(w=A,M=FU({keyframes:[h.value,v(h.value)],velocity:UU(_,A,h.value),damping:i,stiffness:o,restDelta:c,restSpeed:u}))};return b(0),{calculatedDuration:null,next:A=>{let E=!1;return!M&&w===void 0&&(E=!0,T(A),b(A)),w!==void 0&&A>=w?M.next(A-w):(!E&&T(A),h)}}}const pY=Hp(.42,0,1,1),mY=Hp(0,0,.58,1),VU=Hp(.42,0,.58,1),gY=t=>Array.isArray(t)&&typeof t[0]!="number",AT=t=>Array.isArray(t)&&typeof t[0]=="number",sR={linear:Mr,easeIn:pY,easeInOut:VU,easeOut:mY,circIn:yT,circInOut:_U,circOut:yU,backIn:vT,backInOut:gU,backOut:mU,anticipate:vU},lR=t=>{if(AT(t)){q1(t.length===4);const[e,n,r,i]=t;return Hp(e,n,r,i)}else if(typeof t=="string")return q1(sR[t]!==void 0),sR[t];return t},vY=(t,e)=>n=>e(t(n)),ca=(...t)=>t.reduce(vY),Vu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},fn=(t,e,n)=>t+(e-t)*n;function Gx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function yY({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,a=0;if(!e)i=o=a=n;else{const s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;i=Gx(l,s,t+1/3),o=Gx(l,s,t),a=Gx(l,s,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}function Cv(t,e){return n=>n>0?e:t}const Wx=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},_Y=[Y1,gl,ru],xY=t=>_Y.find(e=>e.test(t));function cR(t){const e=xY(t);if(!e)return!1;let n=e.parse(t);return e===ru&&(n=yY(n)),n}const uR=(t,e)=>{const n=cR(t),r=cR(e);if(!n||!r)return Cv(t,e);const i={...n};return o=>(i.red=Wx(n.red,r.red,o),i.green=Wx(n.green,r.green,o),i.blue=Wx(n.blue,r.blue,o),i.alpha=fn(n.alpha,r.alpha,o),gl.transform(i))},J1=new Set(["none","hidden"]);function bY(t,e){return J1.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function wY(t,e){return n=>fn(t,e,n)}function MT(t){return typeof t=="number"?wY:typeof t=="string"?_T(t)?Cv:_r.test(t)?uR:TY:Array.isArray(t)?BU:typeof t=="object"?_r.test(t)?uR:SY:Cv}function BU(t,e){const n=[...t],r=n.length,i=t.map((o,a)=>MT(o)(o,e[a]));return o=>{for(let a=0;a<r;a++)n[a]=i[a](o);return n}}function SY(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=MT(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function EY(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const a=e.types[o],s=t.indexes[a][i[a]],l=(n=t.values[s])!==null&&n!==void 0?n:0;r[o]=l,i[a]++}return r}const TY=(t,e)=>{const n=Ts.createTransformer(e),r=$d(t),i=$d(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?J1.has(t)&&!i.values.length||J1.has(e)&&!r.values.length?bY(t,e):ca(BU(EY(r,i),i.values),n):Cv(t,e)};function $U(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?fn(t,e,n):MT(t)(t,e)}function AY(t,e,n){const r=[],i=n||$U,o=t.length-1;for(let a=0;a<o;a++){let s=i(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Mr:e;s=ca(l,s)}r.push(s)}return r}function MY(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(q1(o===e.length),o===1)return()=>e[0];if(o===2&&t[0]===t[1])return()=>e[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=AY(e,r,i),s=a.length,l=c=>{let u=0;if(s>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const f=Vu(t[u],t[u+1],c);return a[u](f)};return n?c=>l(Es(t[0],t[o-1],c)):l}function PY(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Vu(0,e,r);t.push(fn(n,1,i))}}function CY(t){const e=[0];return PY(e,t.length-1),e}function RY(t,e){return t.map(n=>n*e)}function OY(t,e){return t.map(()=>e||VU).splice(0,t.length-1)}function Rv({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=gY(r)?r.map(lR):lR(r),o={done:!1,value:e[0]},a=RY(n&&n.length===e.length?n:CY(e),t),s=MY(a,e,{ease:Array.isArray(i)?i:OY(e,i)});return{calculatedDuration:t,next:l=>(o.value=s(l),o.done=l>=t,o)}}const fR=2e4;function IY(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<fR;)e+=n,r=t.next(e);return e>=fR?1/0:e}const NY=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Gt.update(e,!0),stop:()=>Ss(e),now:()=>or.isProcessing?or.timestamp:Ao.now()}},DY={decay:aR,inertia:aR,tween:Rv,keyframes:Rv,spring:FU},LY=t=>t/100;class PT extends kU{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:o}=this.options,a=(i==null?void 0:i.KeyframeResolver)||xT,s=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new a(o,s,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:a=0}=this.options,s=TT(n)?n:DY[n]||Rv;let l,c;s!==Rv&&typeof e[0]!="number"&&(l=ca(LY,$U(e[0],e[1])),e=[0,100]);const u=s({...this.options,keyframes:e});o==="mirror"&&(c=s({...this.options,keyframes:[...e].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=IY(u));const{calculatedDuration:f}=u,h=f+i,d=h*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:h,totalDuration:d}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:A}=this.options;return{done:!0,value:A[A.length-1]}}const{finalKeyframe:i,generator:o,mirroredGenerator:a,mapPercentToKeyframes:s,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:f}=r;if(this.startTime===null)return o.next(0);const{delay:h,repeat:d,repeatType:v,repeatDelay:y,onUpdate:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const p=this.currentTime-h*(this.speed>=0?1:-1),x=this.speed>=0?p<0:p>u;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let _=this.currentTime,T=o;if(d){const A=Math.min(this.currentTime,u)/f;let E=Math.floor(A),P=A%1;!P&&A>=1&&(P=1),P===1&&E--,E=Math.min(E,d+1),!!(E%2)&&(v==="reverse"?(P=1-P,y&&(P-=y/f)):v==="mirror"&&(T=a)),_=Es(0,1,P)*f}const w=x?{done:!1,value:l[0]}:T.next(_);s&&(w.value=s(w.value));let{done:M}=w;!x&&c!==null&&(M=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const b=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return b&&i!==void 0&&(w.value=S0(l,this.options,i)),g&&g(w.value),b&&this.finish(),w}get duration(){const{resolved:e}=this;return e?la(e.calculatedDuration):0}get time(){return la(this.currentTime)}set time(e){e=sa(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=la(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=NY,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const kY=new Set(["opacity","clipPath","filter","transform"]),jY=10,UY=(t,e)=>{let n="";const r=Math.max(Math.round(e/jY),2);for(let i=0;i<r;i++)n+=t(Vu(0,r-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function CT(t){let e;return()=>(e===void 0&&(e=t()),e)}const FY={linearEasing:void 0};function VY(t,e){const n=CT(t);return()=>{var r;return(r=FY[e])!==null&&r!==void 0?r:n()}}const Ov=VY(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function zU(t){return!!(typeof t=="function"&&Ov()||!t||typeof t=="string"&&(t in ew||Ov())||AT(t)||Array.isArray(t)&&t.every(zU))}const Vh=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,ew={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vh([0,.65,.55,1]),circOut:Vh([.55,0,1,.45]),backIn:Vh([.31,.01,.66,-.59]),backOut:Vh([.33,1.53,.69,.99])};function HU(t,e){if(t)return typeof t=="function"&&Ov()?UY(t,e):AT(t)?Vh(t):Array.isArray(t)?t.map(n=>HU(n,e)||ew.easeOut):ew[t]}function BY(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:a="loop",ease:s="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=HU(s,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function hR(t,e){t.timeline=e,t.onfinish=null}const $Y=CT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Iv=10,zY=2e4;function HY(t){return TT(t.type)||t.type==="spring"||!zU(t.ease)}function GY(t,e){const n=new PT({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let o=0;for(;!r.done&&o<zY;)r=n.sample(o),i.push(r.value),o+=Iv;return{times:void 0,keyframes:i,duration:o-Iv,ease:"linear"}}const GU={anticipate:vU,backInOut:gU,circInOut:_U};function WY(t){return t in GU}class dR extends kU{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:o}=this.options;this.resolver=new LU(o,(a,s)=>this.onKeyframesResolved(a,s),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:o,ease:a,type:s,motionValue:l,name:c,startTime:u}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof a=="string"&&Ov()&&WY(a)&&(a=GU[a]),HY(this.options)){const{onComplete:h,onUpdate:d,motionValue:v,element:y,...g}=this.options,p=GY(e,g);e=p.keyframes,e.length===1&&(e[1]=e[0]),i=p.duration,o=p.times,a=p.ease,s="keyframes"}const f=BY(l.owner.current,c,e,{...this.options,duration:i,times:o,ease:a});return f.startTime=u??this.calcStartTime(),this.pendingTimeline?(hR(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:h}=this.options;l.set(S0(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:i,times:o,type:s,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return la(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return la(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=sa(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Mr;const{animation:r}=n;hR(r,e)}return Mr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:o,ease:a,times:s}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:f,element:h,...d}=this.options,v=new PT({...d,keyframes:r,duration:i,type:o,ease:a,times:s,isGenerator:!0}),y=sa(this.time);c.setWithVelocity(v.sample(y-Iv).value,v.sample(y).value,Iv)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:o,damping:a,type:s}=e;return $Y()&&r&&kY.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&o!=="mirror"&&a!==0&&s!=="inertia"}}const qY=CT(()=>window.ScrollTimeline!==void 0);class XY{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>qY()&&i.attachTimeline?i.attachTimeline(e):n(i));return()=>{r.forEach((i,o)=>{i&&i(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function KY({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:s,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const RT=(t,e,n,r={},i,o)=>a=>{const s=gT(r,t)||{},l=s.delay||r.delay||0;let{elapsed:c=0}=r;c=c-sa(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...s,delay:-c,onUpdate:h=>{e.set(h),s.onUpdate&&s.onUpdate(h)},onComplete:()=>{a(),s.onComplete&&s.onComplete()},name:t,motionValue:e,element:o?void 0:i};KY(s)||(u={...u,...dK(t,u)}),u.duration&&(u.duration=sa(u.duration)),u.repeatDelay&&(u.repeatDelay=sa(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(f=!0)),f&&!o&&e.get()!==void 0){const h=S0(u.keyframes,s);if(h!==void 0)return Gt.update(()=>{u.onUpdate(h),u.onComplete()}),new XY([])}return!o&&dR.supports(u)?new dR(u):new PT(u)},YY=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),QY=t=>W1(t)?t[t.length-1]||0:t;function OT(t,e){t.indexOf(e)===-1&&t.push(e)}function IT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class NT{constructor(){this.subscriptions=[]}add(e){return OT(this.subscriptions,e),()=>IT(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const a=this.subscriptions[o];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pR=30,ZY=t=>!isNaN(parseFloat(t));class JY{constructor(e,n={}){this.version="11.11.17",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const o=Ao.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ao.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ZY(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new NT);const r=this.events[e].add(n);return e==="change"?()=>{r(),Gt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ao.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>pR)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,pR);return jU(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function zd(t,e){return new JY(t,e)}function eQ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,zd(n))}function tQ(t,e){const n=w0(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const a in o){const s=QY(o[a]);eQ(t,a,s)}}const DT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nQ="framerAppearId",WU="data-"+DT(nQ);function qU(t){return t.props[WU]}const Ar=t=>!!(t&&t.getVelocity);function rQ(t){return!!(Ar(t)&&t.add)}function tw(t,e){const n=t.getValue("willChange");if(rQ(n))return n.add(e)}function iQ({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function XU(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var o;let{transition:a=t.getDefaultTransition(),transitionEnd:s,...l}=e;r&&(a=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const h=t.getValue(f,(o=t.latestValues[f])!==null&&o!==void 0?o:null),d=l[f];if(d===void 0||u&&iQ(u,f))continue;const v={delay:n,...gT(a||{},f)};let y=!1;if(window.MotionHandoffAnimation){const p=qU(t);if(p){const x=window.MotionHandoffAnimation(p,f,Gt);x!==null&&(v.startTime=x,y=!0)}}tw(t,f),h.start(RT(f,h,d,t.shouldReduceMotion&&Ql.has(f)?{type:!1}:v,t,y));const g=h.animation;g&&c.push(g)}return s&&Promise.all(c).then(()=>{Gt.update(()=>{s&&tQ(t,s)})}),c}function nw(t,e,n={}){var r;const i=w0(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const a=i?()=>Promise.all(XU(t,i,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=o;return oQ(t,e,u+c,f,h,n)}:()=>Promise.resolve(),{when:l}=o;if(l){const[c,u]=l==="beforeChildren"?[a,s]:[s,a];return c().then(()=>u())}else return Promise.all([a(),s(n.delay)])}function oQ(t,e,n=0,r=0,i=1,o){const a=[],s=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>s-c*r;return Array.from(t.variantChildren).sort(aQ).forEach((c,u)=>{c.notify("AnimationStart",e),a.push(nw(c,e,{...o,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(a)}function aQ(t,e){return t.sortNodePosition(e)}function sQ(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>nw(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=nw(t,e,n);else{const i=typeof e=="function"?w0(t,e,n.custom):e;r=Promise.all(XU(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const lQ=mT.length;function KU(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?KU(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<lQ;n++){const r=mT[n],i=t.props[r];(Vd(i)||i===!1)&&(e[r]=i)}return e}const cQ=[...pT].reverse(),uQ=pT.length;function fQ(t){return e=>Promise.all(e.map(({animation:n,options:r})=>sQ(t,n,r)))}function hQ(t){let e=fQ(t),n=mR(),r=!0;const i=l=>(c,u)=>{var f;const h=w0(t,u,l==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(h){const{transition:d,transitionEnd:v,...y}=h;c={...c,...y,...v}}return c};function o(l){e=l(t)}function a(l){const{props:c}=t,u=KU(t.parent)||{},f=[],h=new Set;let d={},v=1/0;for(let g=0;g<uQ;g++){const p=cQ[g],x=n[p],_=c[p]!==void 0?c[p]:u[p],T=Vd(_),w=p===l?x.isActive:null;w===!1&&(v=g);let M=_===u[p]&&_!==c[p]&&T;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),x.protectedKeys={...d},!x.isActive&&w===null||!_&&!x.prevProp||b0(_)||typeof _=="boolean")continue;const b=dQ(x.prevProp,_);let A=b||p===l&&x.isActive&&!M&&T||g>v&&T,E=!1;const P=Array.isArray(_)?_:[_];let R=P.reduce(i(p),{});w===!1&&(R={});const{prevResolvedValues:N={}}=x,O={...N,...R},D=$=>{A=!0,h.has($)&&(E=!0,h.delete($)),x.needsAnimating[$]=!0;const B=t.getValue($);B&&(B.liveStyle=!1)};for(const $ in O){const B=R[$],X=N[$];if(d.hasOwnProperty($))continue;let K=!1;W1(B)&&W1(X)?K=!uU(B,X):K=B!==X,K?B!=null?D($):h.add($):B!==void 0&&h.has($)?D($):x.protectedKeys[$]=!0}x.prevProp=_,x.prevResolvedValues=R,x.isActive&&(d={...d,...R}),r&&t.blockInitialAnimation&&(A=!1),A&&(!(M&&b)||E)&&f.push(...P.map($=>({animation:$,options:{type:p}})))}if(h.size){const g={};h.forEach(p=>{const x=t.getBaseTarget(p),_=t.getValue(p);_&&(_.liveStyle=!0),g[p]=x??null}),f.push({animation:g})}let y=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(f):Promise.resolve()}function s(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(h=>{var d;return(d=h.animationState)===null||d===void 0?void 0:d.setActive(l,c)}),n[l].isActive=c;const f=a(l);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:a,setActive:s,setAnimateFunction:o,getState:()=>n,reset:()=>{n=mR(),r=!0}}}function dQ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!uU(e,t):!1}function Ys(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function mR(){return{animate:Ys(!0),whileInView:Ys(),whileHover:Ys(),whileTap:Ys(),whileDrag:Ys(),whileFocus:Ys(),exit:Ys()}}class Ls{constructor(e){this.isMounted=!1,this.node=e}update(){}}class pQ extends Ls{constructor(e){super(e),e.animationState||(e.animationState=hQ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();b0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let mQ=0;class gQ extends Ls{constructor(){super(...arguments),this.id=mQ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const vQ={animation:{Feature:pQ},exit:{Feature:gQ}},YU=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function E0(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const yQ=t=>e=>YU(e)&&t(e,E0(e));function na(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ua(t,e,n,r){return na(t,e,yQ(n),r)}const gR=(t,e)=>Math.abs(t-e);function _Q(t,e){const n=gR(t.x,e.x),r=gR(t.y,e.y);return Math.sqrt(n**2+r**2)}class QU{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Xx(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,d=_Q(f.offset,{x:0,y:0})>=3;if(!h&&!d)return;const{point:v}=f,{timestamp:y}=or;this.history.push({...v,timestamp:y});const{onStart:g,onMove:p}=this.handlers;h||(g&&g(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=qx(h,this.transformPagePoint),Gt.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:d,onSessionEnd:v,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Xx(f.type==="pointercancel"?this.lastMoveEventInfo:qx(h,this.transformPagePoint),this.history);this.startEvent&&d&&d(f,g),v&&v(f,g)},!YU(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=E0(e),s=qx(a,this.transformPagePoint),{point:l}=s,{timestamp:c}=or;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,Xx(s,this.history)),this.removeListeners=ca(ua(this.contextWindow,"pointermove",this.handlePointerMove),ua(this.contextWindow,"pointerup",this.handlePointerUp),ua(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ss(this.updatePoint)}}function qx(t,e){return e?{point:e(t.point)}:t}function vR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Xx({point:t},e){return{point:t,delta:vR(t,ZU(e)),offset:vR(t,xQ(e)),velocity:bQ(e,.1)}}function xQ(t){return t[0]}function ZU(t){return t[t.length-1]}function bQ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=ZU(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>sa(e)));)n--;if(!r)return{x:0,y:0};const o=la(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function JU(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const yR=JU("dragHorizontal"),_R=JU("dragVertical");function eF(t){let e=!1;if(t==="y")e=_R();else if(t==="x")e=yR();else{const n=yR(),r=_R();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function tF(){const t=eF(!0);return t?(t(),!1):!0}function iu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const nF=1e-4,wQ=1-nF,SQ=1+nF,rF=.01,EQ=0-rF,TQ=0+rF;function pi(t){return t.max-t.min}function AQ(t,e,n){return Math.abs(t-e)<=n}function xR(t,e,n,r=.5){t.origin=r,t.originPoint=fn(e.min,e.max,t.origin),t.scale=pi(n)/pi(e),t.translate=fn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=wQ&&t.scale<=SQ||isNaN(t.scale))&&(t.scale=1),(t.translate>=EQ&&t.translate<=TQ||isNaN(t.translate))&&(t.translate=0)}function od(t,e,n,r){xR(t.x,e.x,n.x,r?r.originX:void 0),xR(t.y,e.y,n.y,r?r.originY:void 0)}function bR(t,e,n){t.min=n.min+e.min,t.max=t.min+pi(e)}function MQ(t,e,n){bR(t.x,e.x,n.x),bR(t.y,e.y,n.y)}function wR(t,e,n){t.min=e.min-n.min,t.max=t.min+pi(e)}function ad(t,e,n){wR(t.x,e.x,n.x),wR(t.y,e.y,n.y)}function PQ(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?fn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?fn(n,t,r.max):Math.min(t,n)),t}function SR(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function CQ(t,{top:e,left:n,bottom:r,right:i}){return{x:SR(t.x,n,i),y:SR(t.y,e,r)}}function ER(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function RQ(t,e){return{x:ER(t.x,e.x),y:ER(t.y,e.y)}}function OQ(t,e){let n=.5;const r=pi(t),i=pi(e);return i>r?n=Vu(e.min,e.max-r,t.min):r>i&&(n=Vu(t.min,t.max-i,e.min)),Es(0,1,n)}function IQ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const rw=.35;function NQ(t=rw){return t===!1?t=0:t===!0&&(t=rw),{x:TR(t,"left","right"),y:TR(t,"top","bottom")}}function TR(t,e,n){return{min:AR(t,e),max:AR(t,n)}}function AR(t,e){return typeof t=="number"?t:t[e]||0}const MR=()=>({translate:0,scale:1,origin:0,originPoint:0}),ou=()=>({x:MR(),y:MR()}),PR=()=>({min:0,max:0}),xn=()=>({x:PR(),y:PR()});function Ei(t){return[t("x"),t("y")]}function iF({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function DQ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function LQ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Kx(t){return t===void 0||t===1}function iw({scale:t,scaleX:e,scaleY:n}){return!Kx(t)||!Kx(e)||!Kx(n)}function rl(t){return iw(t)||oF(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function oF(t){return CR(t.x)||CR(t.y)}function CR(t){return t&&t!=="0%"}function Nv(t,e,n){const r=t-n,i=e*r;return n+i}function RR(t,e,n,r,i){return i!==void 0&&(t=Nv(t,i,r)),Nv(t,n,r)+e}function ow(t,e=0,n=1,r,i){t.min=RR(t.min,e,n,r,i),t.max=RR(t.max,e,n,r,i)}function aF(t,{x:e,y:n}){ow(t.x,e.translate,e.scale,e.originPoint),ow(t.y,n.translate,n.scale,n.originPoint)}const OR=.999999999999,IR=1.0000000000001;function kQ(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,a;for(let s=0;s<i;s++){o=n[s],a=o.projectionDelta;const{visualElement:l}=o.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&su(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,aF(t,a)),r&&rl(o.latestValues)&&su(t,o.latestValues))}e.x<IR&&e.x>OR&&(e.x=1),e.y<IR&&e.y>OR&&(e.y=1)}function au(t,e){t.min=t.min+e,t.max=t.max+e}function NR(t,e,n,r,i=.5){const o=fn(t.min,t.max,i);ow(t,e,n,o,r)}function su(t,e){NR(t.x,e.x,e.scaleX,e.scale,e.originX),NR(t.y,e.y,e.scaleY,e.scale,e.originY)}function sF(t,e){return iF(LQ(t.getBoundingClientRect(),e))}function jQ(t,e,n){const r=sF(t,n),{scroll:i}=e;return i&&(au(r.x,i.offset.x),au(r.y,i.offset.y)),r}const lF=({current:t})=>t?t.ownerDocument.defaultView:null,UQ=new WeakMap;class FQ{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(E0(u,"page").point)},o=(u,f)=>{const{drag:h,dragPropagation:d,onDragStart:v}=this.getProps();if(h&&!d&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=eF(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ei(g=>{let p=this.getAxisMotionValue(g).get()||0;if(To.test(p)){const{projection:x}=this.visualElement;if(x&&x.layout){const _=x.layout.layoutBox[g];_&&(p=pi(_)*(parseFloat(p)/100))}}this.originPoint[g]=p}),v&&Gt.postRender(()=>v(u,f)),tw(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},a=(u,f)=>{const{dragPropagation:h,dragDirectionLock:d,onDirectionLock:v,onDrag:y}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:g}=f;if(d&&this.currentDirection===null){this.currentDirection=VQ(g),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,g),this.updateAxis("y",f.point,g),this.visualElement.render(),y&&y(u,f)},s=(u,f)=>this.stop(u,f),l=()=>Ei(u=>{var f;return this.getAnimationState(u)==="paused"&&((f=this.getAxisMotionValue(u).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new QU(e,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:s,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:lF(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Gt.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!lg(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=PQ(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&iu(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=CQ(i.layoutBox,n):this.constraints=!1,this.elastic=NQ(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ei(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=IQ(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!iu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=jQ(r,i.root,this.visualElement.getTransformPagePoint());let a=RQ(i.layout.layoutBox,o);if(n){const s=n(DQ(a));this.hasMutatedConstraints=!!s,s&&(a=iF(s))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:s}=this.getProps(),l=this.constraints||{},c=Ei(u=>{if(!lg(u,n,this.currentDirection))return;let f=l&&l[u]||{};a&&(f={min:0,max:0});const h=i?200:1e6,d=i?40:1e7,v={type:"inertia",velocity:r?e[u]:0,bounceStiffness:h,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(u,v)});return Promise.all(c).then(s)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return tw(this.visualElement,e),r.start(RT(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ei(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ei(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ei(n=>{const{drag:r}=this.getProps();if(!lg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:s}=i.layout.layoutBox[n];o.set(e[n]-fn(a,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!iu(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ei(a=>{const s=this.getAxisMotionValue(a);if(s&&this.constraints!==!1){const l=s.get();i[a]=OQ({min:l,max:l},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ei(a=>{if(!lg(a,e,null))return;const s=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];s.set(fn(l,c,i[a]))})}addListeners(){if(!this.visualElement.current)return;UQ.set(this.visualElement,this);const e=this.visualElement.current,n=ua(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();iu(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Gt.read(r);const a=na(window,"resize",()=>this.scalePositionWithinConstraints()),s=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ei(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:a=rw,dragMomentum:s=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:a,dragMomentum:s}}}function lg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function VQ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class BQ extends Ls{constructor(e){super(e),this.removeGroupControls=Mr,this.removeListeners=Mr,this.controls=new FQ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mr}unmount(){this.removeGroupControls(),this.removeListeners()}}const DR=t=>(e,n)=>{t&&Gt.postRender(()=>t(e,n))};class $Q extends Ls{constructor(){super(...arguments),this.removePointerDownListener=Mr}onPointerDown(e){this.session=new QU(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:lF(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:DR(e),onStart:DR(n),onMove:r,onEnd:(o,a)=>{delete this.session,i&&Gt.postRender(()=>i(o,a))}}}mount(){this.removePointerDownListener=ua(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const T0=V.createContext(null);function zQ(){const t=V.useContext(T0);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=V.useId();V.useEffect(()=>r(i),[]);const o=V.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,o]:[!0]}const LT=V.createContext({}),cF=V.createContext({}),Hg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function LR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const wh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(nt.test(t))t=parseFloat(t);else return t;const n=LR(t,e.target.x),r=LR(t,e.target.y);return`${n}% ${r}%`}},HQ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Ts.parse(t);if(i.length>5)return r;const o=Ts.createTransformer(t),a=typeof i[0]!="number"?1:0,s=n.x.scale*e.x,l=n.y.scale*e.y;i[0+a]/=s,i[1+a]/=l;const c=fn(s,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),o(i)}},Dv={};function GQ(t){Object.assign(Dv,t)}const{schedule:kT,cancel:XRe}=fU(queueMicrotask,!1);class WQ extends V.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;GQ(qQ),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Hg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,a=r.projection;return a&&(a.isPresent=o,i||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Gt.postRender(()=>{const s=a.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),kT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function uF(t){const[e,n]=zQ(),r=V.useContext(LT);return S.jsx(WQ,{...t,layoutGroup:r,switchLayoutGroup:V.useContext(cF),isPresent:e,safeToRemove:n})}const qQ={borderRadius:{...wh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:wh,borderTopRightRadius:wh,borderBottomLeftRadius:wh,borderBottomRightRadius:wh,boxShadow:HQ},fF=["TopLeft","TopRight","BottomLeft","BottomRight"],XQ=fF.length,kR=t=>typeof t=="string"?parseFloat(t):t,jR=t=>typeof t=="number"||nt.test(t);function KQ(t,e,n,r,i,o){i?(t.opacity=fn(0,n.opacity!==void 0?n.opacity:1,YQ(r)),t.opacityExit=fn(e.opacity!==void 0?e.opacity:1,0,QQ(r))):o&&(t.opacity=fn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<XQ;a++){const s=`border${fF[a]}Radius`;let l=UR(e,s),c=UR(n,s);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||jR(l)===jR(c)?(t[s]=Math.max(fn(kR(l),kR(c),r),0),(To.test(c)||To.test(l))&&(t[s]+="%")):t[s]=c}(e.rotate||n.rotate)&&(t.rotate=fn(e.rotate||0,n.rotate||0,r))}function UR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const YQ=hF(0,.5,yU),QQ=hF(.5,.95,Mr);function hF(t,e,n){return r=>r<t?0:r>e?1:n(Vu(t,e,r))}function FR(t,e){t.min=e.min,t.max=e.max}function xi(t,e){FR(t.x,e.x),FR(t.y,e.y)}function VR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function BR(t,e,n,r,i){return t-=e,t=Nv(t,1/n,r),i!==void 0&&(t=Nv(t,1/i,r)),t}function ZQ(t,e=0,n=1,r=.5,i,o=t,a=t){if(To.test(e)&&(e=parseFloat(e),e=fn(a.min,a.max,e/100)-a.min),typeof e!="number")return;let s=fn(o.min,o.max,r);t===o&&(s-=e),t.min=BR(t.min,e,n,s,i),t.max=BR(t.max,e,n,s,i)}function $R(t,e,[n,r,i],o,a){ZQ(t,e[n],e[r],e[i],e.scale,o,a)}const JQ=["x","scaleX","originX"],eZ=["y","scaleY","originY"];function zR(t,e,n,r){$R(t.x,e,JQ,n?n.x:void 0,r?r.x:void 0),$R(t.y,e,eZ,n?n.y:void 0,r?r.y:void 0)}function HR(t){return t.translate===0&&t.scale===1}function dF(t){return HR(t.x)&&HR(t.y)}function GR(t,e){return t.min===e.min&&t.max===e.max}function tZ(t,e){return GR(t.x,e.x)&&GR(t.y,e.y)}function WR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function pF(t,e){return WR(t.x,e.x)&&WR(t.y,e.y)}function qR(t){return pi(t.x)/pi(t.y)}function XR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class nZ{constructor(){this.members=[]}add(e){OT(this.members,e),e.scheduleRender()}remove(e){if(IT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function rZ(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||o||a)&&(r=`translate3d(${i}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:h,skewX:d,skewY:v}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),d&&(r+=`skewX(${d}deg) `),v&&(r+=`skewY(${v}deg) `)}const s=t.x.scale*e.x,l=t.y.scale*e.y;return(s!==1||l!==1)&&(r+=`scale(${s}, ${l})`),r||"none"}const iZ=(t,e)=>t.depth-e.depth;class oZ{constructor(){this.children=[],this.isDirty=!1}add(e){OT(this.children,e),this.isDirty=!0}remove(e){IT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(iZ),this.isDirty=!1,this.children.forEach(e)}}function Gg(t){const e=Ar(t)?t.get():t;return YY(e)?e.toValue():e}function aZ(t,e){const n=Ao.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(Ss(r),t(o-e))};return Gt.read(r,!0),()=>Ss(r)}function sZ(t){return t instanceof SVGElement&&t.tagName!=="svg"}function lZ(t,e,n){const r=Ar(t)?t:zd(t);return r.start(RT("",r,e,n)),r.animation}const il={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Bh=typeof window<"u"&&window.MotionDebug!==void 0,Yx=["","X","Y","Z"],cZ={visibility:"hidden"},KR=1e3;let uZ=0;function Qx(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function mF(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=qU(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Gt,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&mF(r)}function gF({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},s=e==null?void 0:e()){this.id=uZ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Bh&&(il.totalNodes=il.resolvedTargetDeltas=il.recalculatedProjection=0),this.nodes.forEach(dZ),this.nodes.forEach(yZ),this.nodes.forEach(_Z),this.nodes.forEach(pZ),Bh&&window.MotionDebug.record(il)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new oZ)}addEventListener(a,s){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new NT),this.eventHandlers.get(a).add(s)}notifyListeners(a,...s){const l=this.eventHandlers.get(a);l&&l.notify(...s)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,s=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=sZ(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),s&&(c||l)&&(this.isLayoutDirty=!0),t){let f;const h=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=aZ(h,250),Hg.hasAnimatedSinceResize&&(Hg.hasAnimatedSinceResize=!1,this.nodes.forEach(QR))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:d,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||EZ,{onLayoutAnimationStart:g,onLayoutAnimationComplete:p}=u.getProps(),x=!this.targetLayout||!pF(this.targetLayout,v)||d,_=!h&&d;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,_);const T={...gT(y,"layout"),onPlay:g,onComplete:p};(u.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else h||QR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ss(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xZ),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&mF(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:s,layout:l}=this.options;if(s===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(YR);return}this.isUpdating||this.nodes.forEach(gZ),this.isUpdating=!1,this.nodes.forEach(vZ),this.nodes.forEach(fZ),this.nodes.forEach(hZ),this.clearAllSnapshots();const s=Ao.now();or.delta=Es(0,1e3/60,s-or.timestamp),or.timestamp=s,or.isProcessing=!0,$x.update.process(or),$x.preRender.process(or),$x.render.process(or),or.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,kT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(mZ),this.sharedNodes.forEach(bZ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let s=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(s=!1),s){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,s=this.projectionDelta&&!dF(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;a&&(s||rl(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const s=this.measurePageBox();let l=this.removeElementScroll(s);return a&&(l=this.removeTransform(l)),TZ(l),{animationId:this.root.animationId,measuredBox:s,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:s}=this.options;if(!s)return xn();const l=s.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(AZ))){const{scroll:u}=this.root;u&&(au(l.x,u.offset.x),au(l.y,u.offset.y))}return l}removeElementScroll(a){var s;const l=xn();if(xi(l,a),!((s=this.scroll)===null||s===void 0)&&s.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:h}=u;u!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&xi(l,a),au(l.x,f.offset.x),au(l.y,f.offset.y))}return l}applyTransform(a,s=!1){const l=xn();xi(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];!s&&u.options.layoutScroll&&u.scroll&&u!==u.root&&su(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),rl(u.latestValues)&&su(l,u.latestValues)}return rl(this.latestValues)&&su(l,this.latestValues),l}removeTransform(a){const s=xn();xi(s,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!rl(c.latestValues))continue;iw(c.latestValues)&&c.updateSnapshot();const u=xn(),f=c.measurePageBox();xi(u,f),zR(s,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return rl(this.latestValues)&&zR(s,this.latestValues),s}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==or.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var s;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=or.timestamp,!this.targetDelta&&!this.relativeTarget){const d=this.getClosestProjectingParent();d&&d.layout&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xn(),this.relativeTargetOrigin=xn(),ad(this.relativeTargetOrigin,this.layout.layoutBox,d.layout.layoutBox),xi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=xn(),this.targetWithTransforms=xn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),MQ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xi(this.target,this.layout.layoutBox),aF(this.target,this.targetDelta)):xi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const d=this.getClosestProjectingParent();d&&!!d.resumingFrom==!!this.resumingFrom&&!d.options.layoutScroll&&d.target&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xn(),this.relativeTargetOrigin=xn(),ad(this.relativeTargetOrigin,this.target,d.target),xi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Bh&&il.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||iw(this.parent.latestValues)||oF(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const s=this.getLead(),l=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===or.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;xi(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,d=this.treeScale.y;kQ(this.layoutCorrected,this.treeScale,this.path,l),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=xn());const{target:v}=s;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(VR(this.prevProjectionDelta.x,this.projectionDelta.x),VR(this.prevProjectionDelta.y,this.projectionDelta.y)),od(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==d||!XR(this.projectionDelta.x,this.prevProjectionDelta.x)||!XR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Bh&&il.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var s;if((s=this.options.visualElement)===null||s===void 0||s.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ou(),this.projectionDelta=ou(),this.projectionDeltaWithTransform=ou()}setAnimationOrigin(a,s=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=ou();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const h=xn(),d=l?l.source:void 0,v=this.layout?this.layout.source:void 0,y=d!==v,g=this.getStack(),p=!g||g.members.length<=1,x=!!(y&&!p&&this.options.crossfade===!0&&!this.path.some(SZ));this.animationProgress=0;let _;this.mixTargetDelta=T=>{const w=T/1e3;ZR(f.x,a.x,w),ZR(f.y,a.y,w),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ad(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wZ(this.relativeTarget,this.relativeTargetOrigin,h,w),_&&tZ(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=xn()),xi(_,this.relativeTarget)),y&&(this.animationValues=u,KQ(u,c,this.latestValues,w,x,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ss(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gt.update(()=>{Hg.hasAnimatedSinceResize=!0,this.currentAnimation=lZ(0,KR,{...a,onUpdate:s=>{this.mixTargetDelta(s),a.onUpdate&&a.onUpdate(s)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(KR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:s,target:l,layout:c,latestValues:u}=a;if(!(!s||!l||!c)){if(this!==a&&this.layout&&c&&vF(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||xn();const f=pi(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+f;const h=pi(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+h}xi(s,l),su(s,u),od(this.projectionDeltaWithTransform,this.layoutCorrected,s,u)}}registerSharedNode(a,s){this.sharedNodes.has(a)||this.sharedNodes.set(a,new nZ),this.sharedNodes.get(a).add(s);const c=s.options.initialPromotionConfig;s.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(s):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:s}=this.options;return s?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:s}=this.options;return s?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:s,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let s=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(s=!0),!s)return;const c={};l.z&&Qx("z",a,c,this.animationValues);for(let u=0;u<Yx.length;u++)Qx(`rotate${Yx[u]}`,a,c,this.animationValues),Qx(`skew${Yx[u]}`,a,c,this.animationValues);a.render();for(const u in c)a.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);a.scheduleRender()}getProjectionStyles(a){var s,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return cZ;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Gg(a==null?void 0:a.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Gg(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!rl(this.latestValues)&&(y.transform=u?u({},""):"none",this.hasProjected=!1),y}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=rZ(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x:d,y:v}=this.projectionDelta;c.transformOrigin=`${d.origin*100}% ${v.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(s=h.opacity)!==null&&s!==void 0?s:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const y in Dv){if(h[y]===void 0)continue;const{correct:g,applyTo:p}=Dv[y],x=c.transform==="none"?h[y]:g(h[y],f);if(p){const _=p.length;for(let T=0;T<_;T++)c[p[T]]=x}else c[y]=x}return this.options.layoutId&&(c.pointerEvents=f===this?Gg(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var s;return(s=a.currentAnimation)===null||s===void 0?void 0:s.stop()}),this.root.nodes.forEach(YR),this.root.sharedNodes.clear()}}}function fZ(t){t.updateLayout()}function hZ(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?Ei(f=>{const h=a?n.measuredBox[f]:n.layoutBox[f],d=pi(h);h.min=r[f].min,h.max=h.min+d}):vF(o,n.layoutBox,r)&&Ei(f=>{const h=a?n.measuredBox[f]:n.layoutBox[f],d=pi(r[f]);h.max=h.min+d,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+d)});const s=ou();od(s,r,n.layoutBox);const l=ou();a?od(l,t.applyTransform(i,!0),n.measuredBox):od(l,r,n.layoutBox);const c=!dF(s);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:d}=f;if(h&&d){const v=xn();ad(v,n.layoutBox,h.layoutBox);const y=xn();ad(y,r,d.layoutBox),pF(v,y)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=v,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:s,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function dZ(t){Bh&&il.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function pZ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function mZ(t){t.clearSnapshot()}function YR(t){t.clearMeasurements()}function gZ(t){t.isLayoutDirty=!1}function vZ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function QR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function yZ(t){t.resolveTargetDelta()}function _Z(t){t.calcProjection()}function xZ(t){t.resetSkewAndRotation()}function bZ(t){t.removeLeadSnapshot()}function ZR(t,e,n){t.translate=fn(e.translate,0,n),t.scale=fn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function JR(t,e,n,r){t.min=fn(e.min,n.min,r),t.max=fn(e.max,n.max,r)}function wZ(t,e,n,r){JR(t.x,e.x,n.x,r),JR(t.y,e.y,n.y,r)}function SZ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const EZ={duration:.45,ease:[.4,0,.1,1]},eO=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),tO=eO("applewebkit/")&&!eO("chrome/")?Math.round:Mr;function nO(t){t.min=tO(t.min),t.max=tO(t.max)}function TZ(t){nO(t.x),nO(t.y)}function vF(t,e,n){return t==="position"||t==="preserve-aspect"&&!AQ(qR(e),qR(n),.2)}function AZ(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const MZ=gF({attachResizeListener:(t,e)=>na(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zx={current:void 0},yF=gF({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Zx.current){const t=new MZ({});t.mount(window),t.setOptions({layoutScroll:!0}),Zx.current=t}return Zx.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),PZ={pan:{Feature:$Q},drag:{Feature:BQ,ProjectionNode:yF,MeasureLayout:uF}};function rO(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(o,a)=>{if(o.pointerType==="touch"||tF())return;const s=t.getProps();t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",e);const l=s[r];l&&Gt.postRender(()=>l(o,a))};return ua(t.current,n,i,{passive:!t.getProps()[r]})}class CZ extends Ls{mount(){this.unmount=ca(rO(this.node,!0),rO(this.node,!1))}unmount(){}}class RZ extends Ls{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ca(na(this.node.current,"focus",()=>this.onFocus()),na(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const _F=(t,e)=>e?t===e?!0:_F(t,e.parentElement):!1;function Jx(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,E0(n))}class OZ extends Ls{constructor(){super(...arguments),this.removeStartListeners=Mr,this.removeEndListeners=Mr,this.removeAccessibleListeners=Mr,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),o=ua(window,"pointerup",(s,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:f}=this.node.getProps(),h=!f&&!_F(this.node.current,s.target)?u:c;h&&Gt.update(()=>h(s,l))},{passive:!(r.onTap||r.onPointerUp)}),a=ua(window,"pointercancel",(s,l)=>this.cancelPress(s,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ca(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=s=>{s.key!=="Enter"||!this.checkPressEnd()||Jx("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&Gt.postRender(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=na(this.node.current,"keyup",a),Jx("down",(s,l)=>{this.startPress(s,l)})},n=na(this.node.current,"keydown",e),r=()=>{this.isPressing&&Jx("cancel",(o,a)=>this.cancelPress(o,a))},i=na(this.node.current,"blur",r);this.removeAccessibleListeners=ca(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Gt.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!tF()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Gt.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=ua(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=na(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ca(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const aw=new WeakMap,eb=new WeakMap,IZ=t=>{const e=aw.get(t.target);e&&e(t)},NZ=t=>{t.forEach(IZ)};function DZ({root:t,...e}){const n=t||document;eb.has(n)||eb.set(n,{});const r=eb.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(NZ,{root:t,...e})),r[i]}function LZ(t,e,n){const r=DZ(e);return aw.set(t,n),r.observe(t),()=>{aw.delete(t),r.unobserve(t)}}const kZ={some:0,all:1};class jZ extends Ls{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:kZ[i]},s=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,o&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),h=c?u:f;h&&h(l)};return LZ(this.node.current,a,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(UZ(e,n))&&this.startObserver()}unmount(){}}function UZ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const FZ={inView:{Feature:jZ},tap:{Feature:OZ},focus:{Feature:RZ},hover:{Feature:CZ}},VZ={layout:{ProjectionNode:yF,MeasureLayout:uF}},jT=V.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),A0=V.createContext({}),UT=typeof window<"u",xF=UT?V.useLayoutEffect:V.useEffect,bF=V.createContext({strict:!1});function BZ(t,e,n,r,i){var o,a;const{visualElement:s}=V.useContext(A0),l=V.useContext(bF),c=V.useContext(T0),u=V.useContext(jT).reducedMotion,f=V.useRef();r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:s,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=f.current,d=V.useContext(cF);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&$Z(f.current,n,i,d);const v=V.useRef(!1);V.useInsertionEffect(()=>{h&&v.current&&h.update(n,c)});const y=n[WU],g=V.useRef(!!y&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,y))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,y)));return xF(()=>{h&&(v.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),kT.render(h.render),g.current&&h.animationState&&h.animationState.animateChanges())}),V.useEffect(()=>{h&&(!g.current&&h.animationState&&h.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var p;(p=window.MotionHandoffMarkAsComplete)===null||p===void 0||p.call(window,y)}),g.current=!1))}),h}function $Z(t,e,n,r){const{layoutId:i,layout:o,drag:a,dragConstraints:s,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:wF(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!a||s&&iu(s),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function wF(t){if(t)return t.options.allowProjection!==!1?t.projection:wF(t.parent)}function zZ(t,e,n){return V.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):iu(n)&&(n.current=r))},[e])}function M0(t){return b0(t.animate)||mT.some(e=>Vd(t[e]))}function SF(t){return!!(M0(t)||t.variants)}function HZ(t,e){if(M0(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Vd(n)?n:void 0,animate:Vd(r)?r:void 0}}return t.inherit!==!1?e:{}}function GZ(t){const{initial:e,animate:n}=HZ(t,V.useContext(A0));return V.useMemo(()=>({initial:e,animate:n}),[iO(e),iO(n)])}function iO(t){return Array.isArray(t)?t.join(" "):t}const oO={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bu={};for(const t in oO)Bu[t]={isEnabled:e=>oO[t].some(n=>!!e[n])};function WZ(t){for(const e in t)Bu[e]={...Bu[e],...t[e]}}const qZ=Symbol.for("motionComponentSymbol");function XZ({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&WZ(t);function o(s,l){let c;const u={...V.useContext(jT),...s,layoutId:KZ(s)},{isStatic:f}=u,h=GZ(s),d=r(s,f);if(!f&&UT){YZ();const v=QZ(u);c=v.MeasureLayout,h.visualElement=BZ(i,d,u,e,v.ProjectionNode)}return S.jsxs(A0.Provider,{value:h,children:[c&&h.visualElement?S.jsx(c,{visualElement:h.visualElement,...u}):null,n(i,s,zZ(d,h.visualElement,l),d,f,h.visualElement)]})}const a=V.forwardRef(o);return a[qZ]=i,a}function KZ({layoutId:t}){const e=V.useContext(LT).id;return e&&t!==void 0?e+"-"+t:t}function YZ(t,e){V.useContext(bF).strict}function QZ(t){const{drag:e,layout:n}=Bu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const ZZ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function FT(t){return typeof t!="string"||t.includes("-")?!1:!!(ZZ.indexOf(t)>-1||/[A-Z]/u.test(t))}function EF(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const TF=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function AF(t,e,n,r){EF(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(TF.has(i)?i:DT(i),e.attrs[i])}function MF(t,{layout:e,layoutId:n}){return Ql.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Dv[t]||t==="opacity")}function VT(t,e,n){var r;const{style:i}=t,o={};for(const a in i)(Ar(i[a])||e.style&&Ar(e.style[a])||MF(a,t)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[a]=i[a]);return o}function PF(t,e,n){const r=VT(t,e,n);for(const i in t)if(Ar(t[i])||Ar(e[i])){const o=zp.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}function BT(t){const e=V.useRef(null);return e.current===null&&(e.current=t()),e.current}function JZ({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,o){const a={latestValues:eJ(r,i,o,t),renderState:e()};return n&&(a.mount=s=>n(r,s,a)),a}const CF=t=>(e,n)=>{const r=V.useContext(A0),i=V.useContext(T0),o=()=>JZ(t,e,r,i);return n?o():BT(o)};function eJ(t,e,n,r){const i={},o=r(t,{});for(const h in o)i[h]=Gg(o[h]);let{initial:a,animate:s}=t;const l=M0(t),c=SF(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),s===void 0&&(s=e.animate));let u=n?n.initial===!1:!1;u=u||a===!1;const f=u?s:a;if(f&&typeof f!="boolean"&&!b0(f)){const h=Array.isArray(f)?f:[f];for(let d=0;d<h.length;d++){const v=dT(t,h[d]);if(v){const{transitionEnd:y,transition:g,...p}=v;for(const x in p){let _=p[x];if(Array.isArray(_)){const T=u?_.length-1:0;_=_[T]}_!==null&&(i[x]=_)}for(const x in y)i[x]=y[x]}}}return i}const $T=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),RF=()=>({...$T(),attrs:{}}),OF=(t,e)=>e&&typeof t=="number"?e.transform(t):t,tJ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},nJ=zp.length;function rJ(t,e,n){let r="",i=!0;for(let o=0;o<nJ;o++){const a=zp[o],s=t[a];if(s===void 0)continue;let l=!0;if(typeof s=="number"?l=s===(a.startsWith("scale")?1:0):l=parseFloat(s)===0,!l||n){const c=OF(s,ST[a]);if(!l){i=!1;const u=tJ[a]||a;r+=`${u}(${c}) `}n&&(e[a]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function zT(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let a=!1,s=!1;for(const l in e){const c=e[l];if(Ql.has(l)){a=!0;continue}else if(SU(l)){i[l]=c;continue}else{const u=OF(c,ST[l]);l.startsWith("origin")?(s=!0,o[l]=u):r[l]=u}}if(e.transform||(a||n?r.transform=rJ(e,t.transform,n):r.transform&&(r.transform="none")),s){const{originX:l="50%",originY:c="50%",originZ:u=0}=o;r.transformOrigin=`${l} ${c} ${u}`}}function aO(t,e,n){return typeof t=="string"?t:nt.transform(e+n*t)}function iJ(t,e,n){const r=aO(e,t.x,t.width),i=aO(n,t.y,t.height);return`${r} ${i}`}const oJ={offset:"stroke-dashoffset",array:"stroke-dasharray"},aJ={offset:"strokeDashoffset",array:"strokeDasharray"};function sJ(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?oJ:aJ;t[o.offset]=nt.transform(-r);const a=nt.transform(e),s=nt.transform(n);t[o.array]=`${a} ${s}`}function HT(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:o,pathLength:a,pathSpacing:s=1,pathOffset:l=0,...c},u,f){if(zT(t,c,f),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:d,dimensions:v}=t;h.transform&&(v&&(d.transform=h.transform),delete h.transform),v&&(i!==void 0||o!==void 0||d.transform)&&(d.transformOrigin=iJ(v,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),a!==void 0&&sJ(h,a,s,l,!1)}const GT=t=>typeof t=="string"&&t.toLowerCase()==="svg",lJ={useVisualState:CF({scrapeMotionValuesFromProps:PF,createRenderState:RF,onMount:(t,e,{renderState:n,latestValues:r})=>{Gt.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Gt.render(()=>{HT(n,r,GT(e.tagName),t.transformTemplate),AF(e,n)})}})},cJ={useVisualState:CF({scrapeMotionValuesFromProps:VT,createRenderState:$T})};function IF(t,e,n){for(const r in e)!Ar(e[r])&&!MF(r,n)&&(t[r]=e[r])}function uJ({transformTemplate:t},e){return V.useMemo(()=>{const n=$T();return zT(n,e,t),Object.assign({},n.vars,n.style)},[e])}function fJ(t,e){const n=t.style||{},r={};return IF(r,n,t),Object.assign(r,uJ(t,e)),r}function hJ(t,e){const n={},r=fJ(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const dJ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lv(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||dJ.has(t)}let NF=t=>!Lv(t);function pJ(t){t&&(NF=e=>e.startsWith("on")?!Lv(e):t(e))}try{pJ(require("@emotion/is-prop-valid").default)}catch{}function mJ(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(NF(i)||n===!0&&Lv(i)||!e&&!Lv(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function gJ(t,e,n,r){const i=V.useMemo(()=>{const o=RF();return HT(o,e,GT(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};IF(o,t.style,t),i.style={...o,...i.style}}return i}function vJ(t=!1){return(n,r,i,{latestValues:o},a)=>{const l=(FT(n)?gJ:hJ)(r,o,a,n),c=mJ(r,typeof n=="string",t),u=n!==V.Fragment?{...c,...l,ref:i}:{},{children:f}=r,h=V.useMemo(()=>Ar(f)?f.get():f,[f]);return V.createElement(n,{...u,children:h})}}function yJ(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...FT(r)?lJ:cJ,preloadedFeatures:t,useRender:vJ(i),createVisualElement:e,Component:r};return XZ(a)}}const sw={current:null},DF={current:!1};function _J(){if(DF.current=!0,!!UT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>sw.current=t.matches;t.addListener(e),e()}else sw.current=!1}function xJ(t,e,n){for(const r in e){const i=e[r],o=n[r];if(Ar(i))t.addValue(r,i);else if(Ar(o))t.addValue(r,zd(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,zd(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const sO=new WeakMap,bJ=[...AU,_r,Ts],wJ=t=>bJ.find(TU(t)),lO=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class SJ{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:a},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=xT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Ao.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Gt.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.blockInitialAnimation=!!o,this.isControllingVariants=M0(n),this.isVariantNode=SF(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const d=f[h];l[h]!==void 0&&Ar(d)&&d.set(l[h],!1)}}mount(e){this.current=e,sO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),DF.current||_J(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){sO.delete(this.current),this.projection&&this.projection.unmount(),Ss(this.notifyUpdate),Ss(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ql.has(e),i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&Gt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Bu){const n=Bu[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<lO.length;r++){const i=lO[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,a=e[o];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=xJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=zd(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(bU(i)||xU(i))?i=parseFloat(i):!wJ(i)&&Ts.test(n)&&(i=DU(e,n)),this.setBaseTarget(e,Ar(i)?i.get():i)),Ar(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=dT(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Ar(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new NT),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class LF extends SJ{constructor(){super(...arguments),this.KeyframeResolver=LU}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function EJ(t){return window.getComputedStyle(t)}class TJ extends LF{constructor(){super(...arguments),this.type="html",this.renderInstance=EF}readValueFromInstance(e,n){if(Ql.has(n)){const r=ET(n);return r&&r.default||0}else{const r=EJ(e),i=(SU(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return sF(e,n)}build(e,n,r){zT(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return VT(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ar(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class AJ extends LF{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ql.has(n)){const r=ET(n);return r&&r.default||0}return n=TF.has(n)?n:DT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return PF(e,n,r)}build(e,n,r){HT(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){AF(e,n,r,i)}mount(e){this.isSVGTag=GT(e.tagName),super.mount(e)}}const MJ=(t,e)=>FT(t)?new AJ(e):new TJ(e,{allowProjection:t!==V.Fragment}),PJ=yJ({...vQ,...FZ,...PZ,...VZ},MJ),It=lK(PJ);class CJ extends V.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function RJ({children:t,isPresent:e}){const n=V.useId(),r=V.useRef(null),i=V.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=V.useContext(jT);return V.useInsertionEffect(()=>{const{width:a,height:s,top:l,left:c}=i.current;if(e||!r.current||!a||!s)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return o&&(u.nonce=o),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${s}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),S.jsx(CJ,{isPresent:e,childRef:r,sizeRef:i,children:V.cloneElement(t,{ref:r})})}const OJ=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:a})=>{const s=BT(IJ),l=V.useId(),c=V.useCallback(f=>{s.set(f,!0);for(const h of s.values())if(!h)return;r&&r()},[s,r]),u=V.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:f=>(s.set(f,!1),()=>s.delete(f))}),o?[Math.random(),c]:[n,c]);return V.useMemo(()=>{s.forEach((f,h)=>s.set(h,!1))},[n]),V.useEffect(()=>{!n&&!s.size&&r&&r()},[n]),a==="popLayout"&&(t=S.jsx(RJ,{isPresent:n,children:t})),S.jsx(T0.Provider,{value:u,children:t})};function IJ(){return new Map}const cg=t=>t.key||"";function cO(t){const e=[];return V.Children.forEach(t,n=>{V.isValidElement(n)&&e.push(n)}),e}const kv=({children:t,exitBeforeEnter:e,custom:n,initial:r=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const s=V.useMemo(()=>cO(t),[t]),l=s.map(cg),c=V.useRef(!0),u=V.useRef(s),f=BT(()=>new Map),[h,d]=V.useState(s),[v,y]=V.useState(s);xF(()=>{c.current=!1,u.current=s;for(let x=0;x<v.length;x++){const _=cg(v[x]);l.includes(_)?f.delete(_):f.get(_)!==!0&&f.set(_,!1)}},[v,l.length,l.join("-")]);const g=[];if(s!==h){let x=[...s];for(let _=0;_<v.length;_++){const T=v[_],w=cg(T);l.includes(w)||(x.splice(_,0,T),g.push(T))}a==="wait"&&g.length&&(x=g),y(cO(x)),d(s);return}const{forceRender:p}=V.useContext(LT);return S.jsx(S.Fragment,{children:v.map(x=>{const _=cg(x),T=s===v||l.includes(_),w=()=>{if(f.has(_))f.set(_,!0);else return;let M=!0;f.forEach(b=>{b||(M=!1)}),M&&(p==null||p(),y(u.current),i&&i())};return S.jsx(OJ,{isPresent:T,initial:!c.current||r?void 0:!1,custom:T?void 0:n,presenceAffectsLayout:o,mode:a,onExitComplete:T?void 0:w,children:x},_)})})};var NJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const DJ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LJ=(t,e)=>{const n=V.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,children:s,...l},c)=>V.createElement("svg",{ref:c,...NJ,width:i,height:i,stroke:r,strokeWidth:a?Number(o)*24/Number(i):o,className:`lucide lucide-${DJ(t)}`,...l},[...e.map(([u,f])=>V.createElement(u,f)),...(Array.isArray(s)?s:[s])||[]]));return n.displayName=`${t}`,n};var kt=LJ;const $u=kt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Wp=kt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),kJ=kt("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),jJ=kt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),UJ=kt("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),FJ=kt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),sd=kt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),vl=kt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),tb=kt("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]),uO=kt("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),Hd=kt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),VJ=kt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),BJ=kt("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]),$J=kt("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),zJ=kt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),HJ=kt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),GJ=kt("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),WJ=kt("Mouse",[["rect",{x:"5",y:"2",width:"14",height:"20",rx:"7",key:"11ol66"}],["path",{d:"M12 6v4",key:"16clxf"}]]),qJ=kt("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),kF=kt("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),XJ=kt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),KJ=kt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),lw=kt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),lu=kt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),YJ=kt("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),QJ=kt("Touchpad",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"M2 14h20",key:"myj16y"}],["path",{d:"M12 20v-6",key:"1rm09r"}]]),jF=kt("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]),ZJ=kt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),cw=kt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),UF=kt("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]),Pa=kt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),JJ=({onPause:t,isPlaying:e})=>{const n=[{icon:WJ,text:"Arrastrar",color:"from-blue-500/30 to-cyan-500/30"},{icon:QJ,text:"Seleccionar",color:"from-purple-500/30 to-pink-500/30"},{icon:zJ,text:"Acercar",color:"from-green-500/30 to-emerald-500/30"},{icon:GJ,text:"Alejar",color:"from-orange-500/30 to-red-500/30"}];return S.jsx("div",{className:"fixed inset-x-0 bottom-22 flex justify-center items-center",children:S.jsx(It.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:260,damping:20},className:"w-auto",children:S.jsxs(It.div,{className:"bg-gradient-to-t from-black/95 via-black/90 to-black/80 backdrop-blur-lg rounded-2xl p-3 shadow-lg border border-white/10 relative overflow-hidden min-w-[240px]",whileHover:{scale:1.02},transition:{type:"spring",stiffness:400,damping:30},children:[S.jsx("div",{className:"absolute -top-4 -left-4 w-24 h-24 bg-blue-500/10 rounded-full blur-2xl"}),S.jsx("div",{className:"absolute -bottom-4 -right-4 w-24 h-24 bg-purple-500/10 rounded-full blur-2xl"}),S.jsx("div",{className:"flex justify-center mb-3",children:S.jsxs(It.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(),className:"p-2 rounded-full bg-gradient-to-br from-white to-gray-200 hover:from-gray-100 hover:to-gray-300 transition-all text-black shadow-lg relative group",title:e?"Pausar":"Reproducir",children:[S.jsx("div",{className:"absolute inset-0 rounded-full bg-white/30 blur-md group-hover:blur-lg transition-all"}),S.jsx(It.div,{className:"relative",animate:{rotate:e?0:360},transition:{duration:.5},children:e?S.jsx(qJ,{size:15}):S.jsx(XJ,{size:15})})]})}),S.jsx("div",{className:"grid grid-cols-4 gap-2 px-2",children:S.jsx(kv,{children:n.map((r,i)=>S.jsxs(It.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{delay:i*.1,type:"spring",stiffness:200,damping:20},className:"flex flex-col items-center gap-1 group bg-black/20 rounded-lg p-1.5 hover:bg-black/30 transition-colors",whileHover:{scale:1.02},children:[S.jsx(It.div,{className:`p-1.5 rounded-md bg-gradient-to-br ${r.color} group-hover:shadow-sm transition-all duration-300 flex-shrink-0`,whileHover:{rotate:[0,-10,10,0]},transition:{duration:.5},children:S.jsx(r.icon,{size:10,className:"text-white"})}),S.jsx("span",{className:"text-xs text-white/90 font-medium text-center",children:r.text})]},r.text))})})]})})})},eee="/EmissionsPage/assets/logo-uni-C7alZO-b.png",tee=({isMobile:t})=>{const[e,n]=V.useState(!1);return V.useEffect(()=>{const r=()=>{n(window.scrollY>20)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]),S.jsxs("header",{className:`
        fixed top-0 w-full z-50
        transition-all duration-500 ease-in-out
        ${e?"bg-white/10":"bg-transparent"}
        backdrop-blur-md
      `,children:[S.jsxs("div",{className:`
        max-w-7xl mx-auto
        ${t?"px-4 py-2":"px-8 py-4"}
        flex ${t?"flex-col":"flex-row"}
        items-center gap-4
      `,children:[S.jsxs("div",{className:`
          flex-grow
          ${t?"order-2":"order-1"}
        `,children:[S.jsx("h1",{className:`
            font-['Exo_2'] font-light
            ${t?"text-lg":"text-2xl md:text-3xl"}
            text-white
            transition-all duration-500
            animate-slide-up-fade
          `,children:S.jsx("span",{className:"inline-block animate-fade-in opacity-0 [animation-delay:200ms]",children:"EMISIONES DE CARBONO GLOBALES"})}),S.jsxs("p",{className:`
            mt-2 font-['Exo_2'] 
            ${t?"text-xs":"text-sm md:text-base"}
            text-zinc-300/90
            animate-fade-in opacity-0 [animation-delay:600ms]
          `,children:["Modelado Predictivo de Emisiones de Carbono:",S.jsxs("span",{className:"hidden sm:inline",children:[" ","Enfoque Comparativo entre Sectores Empresariales y Públicos"]})]})]}),S.jsx("div",{className:`
          flex-shrink-0
          ${t?"order-1 -mb-2":"order-2 ml-4"}
        `,children:S.jsx("img",{src:eee,alt:"Logo Universidad",className:`
              object-contain
              transition-all duration-500
              ${t?"h-16":"h-20 md:h-24"}
              animate-fade-in opacity-0 [animation-delay:800ms]
              hover:scale-102
            `})})]}),S.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px",children:S.jsx("div",{className:`\r
          h-full mx-auto\r
          bg-gradient-radial from-white/20 to-transparent\r
          animate-gradient\r
        `})})]})},nee=({isMobile:t})=>{const[e,n]=V.useState(!1),r=["Luis Angel Cordova Gil","Jose Lopez Mercado","Raul Romo Alonso"];return S.jsxs(S.Fragment,{children:[S.jsxs(It.button,{onClick:()=>n(!e),className:`
          fixed z-50 bottom-4 right-4 md:bottom-8 md:right-8
          flex items-center gap-2 px-4 py-3
          bg-gradient-to-r from-indigo-500/90 to-purple-600/90
          hover:from-indigo-500 hover:to-purple-600
          rounded-xl shadow-lg backdrop-blur-sm
          border border-white/10 transition-all duration-300
          text-white group
        `,whileHover:{scale:1.05},whileTap:{scale:.95},children:[S.jsx(cw,{className:"w-6 h-6"}),S.jsx("span",{className:"text-sm font-medium",children:"Equipo 25-1"}),S.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),S.jsxs("div",{className:"absolute -top-1 -right-1 w-3 h-3",children:[S.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-purple-400 opacity-75 animate-ping"}),S.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-purple-500"})]})]}),S.jsx(kv,{children:e&&S.jsxs(It.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:`
              fixed z-40 
              ${t?"bottom-20 right-4 left-4":"bottom-24 right-8 max-w-sm"}
              bg-gradient-to-br from-zinc-900/95 to-black/95 
              backdrop-blur-md rounded-2xl p-4 sm:p-6
              shadow-2xl border border-zinc-800/50
              transition-all duration-300 ease-in-out
            `,children:[S.jsx("div",{className:"absolute -top-3 -left-3 w-16 h-16 bg-blue-500 rounded-2xl -z-10 blur-2xl opacity-20"}),S.jsx("div",{className:"absolute -bottom-3 -right-3 w-16 h-16 bg-purple-500 rounded-2xl -z-10 blur-2xl opacity-20"}),S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[S.jsx(cw,{className:`${t?"w-5 h-5":"w-6 h-6"} text-blue-400`}),S.jsx("h2",{className:`
                  font-['Exo'] font-thin tracking-widest text-white
                  ${t?"text-xl":"text-2xl sm:text-3xl"}
                `,children:"Equipo 25-1-0015"})]}),S.jsx("button",{onClick:()=>n(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors duration-200",children:S.jsx(Pa,{className:"w-5 h-5 text-zinc-400"})})]}),S.jsx("ul",{className:`space-y-2 ${t?"text-sm":"text-base"}`,children:r.map((i,o)=>S.jsxs(It.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.1},className:`
                    p-2 sm:p-3 
                    hover:bg-white/5 rounded-xl 
                    transition-all duration-300 
                    font-['Exo'] text-zinc-300 tracking-wider 
                    cursor-pointer group relative overflow-hidden
                  `,children:[S.jsx("div",{className:`\r
                    absolute inset-0 \r
                    bg-gradient-to-r from-blue-500/10 to-purple-500/10 \r
                    translate-x-[-100%] group-hover:translate-x-0 \r
                    transition-transform duration-300\r
                  `}),S.jsx("span",{className:"relative",children:i})]},i))})]})})]})};function FF(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=FF(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function _t(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=FF(t))&&(r&&(r+=" "),r+=e);return r}var ree=Array.isArray,Zr=ree,iee=typeof vm=="object"&&vm&&vm.Object===Object&&vm,VF=iee,oee=VF,aee=typeof self=="object"&&self&&self.Object===Object&&self,see=oee||aee||Function("return this")(),jo=see,lee=jo,cee=lee.Symbol,qp=cee,fO=qp,BF=Object.prototype,uee=BF.hasOwnProperty,fee=BF.toString,Sh=fO?fO.toStringTag:void 0;function hee(t){var e=uee.call(t,Sh),n=t[Sh];try{t[Sh]=void 0;var r=!0}catch{}var i=fee.call(t);return r&&(e?t[Sh]=n:delete t[Sh]),i}var dee=hee,pee=Object.prototype,mee=pee.toString;function gee(t){return mee.call(t)}var vee=gee,hO=qp,yee=dee,_ee=vee,xee="[object Null]",bee="[object Undefined]",dO=hO?hO.toStringTag:void 0;function wee(t){return t==null?t===void 0?bee:xee:dO&&dO in Object(t)?yee(t):_ee(t)}var Ca=wee;function See(t){return t!=null&&typeof t=="object"}var Ra=See,Eee=Ca,Tee=Ra,Aee="[object Symbol]";function Mee(t){return typeof t=="symbol"||Tee(t)&&Eee(t)==Aee}var If=Mee,Pee=Zr,Cee=If,Ree=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oee=/^\w*$/;function Iee(t,e){if(Pee(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Cee(t)?!0:Oee.test(t)||!Ree.test(t)||e!=null&&t in Object(e)}var WT=Iee;function Nee(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ks=Nee;const Nf=Ft(ks);var Dee=Ca,Lee=ks,kee="[object AsyncFunction]",jee="[object Function]",Uee="[object GeneratorFunction]",Fee="[object Proxy]";function Vee(t){if(!Lee(t))return!1;var e=Dee(t);return e==jee||e==Uee||e==kee||e==Fee}var qT=Vee;const ot=Ft(qT);var Bee=jo,$ee=Bee["__core-js_shared__"],zee=$ee,nb=zee,pO=function(){var t=/[^.]+$/.exec(nb&&nb.keys&&nb.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Hee(t){return!!pO&&pO in t}var Gee=Hee,Wee=Function.prototype,qee=Wee.toString;function Xee(t){if(t!=null){try{return qee.call(t)}catch{}try{return t+""}catch{}}return""}var $F=Xee,Kee=qT,Yee=Gee,Qee=ks,Zee=$F,Jee=/[\\^$.*+?()[\]{}|]/g,ete=/^\[object .+?Constructor\]$/,tte=Function.prototype,nte=Object.prototype,rte=tte.toString,ite=nte.hasOwnProperty,ote=RegExp("^"+rte.call(ite).replace(Jee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ate(t){if(!Qee(t)||Yee(t))return!1;var e=Kee(t)?ote:ete;return e.test(Zee(t))}var ste=ate;function lte(t,e){return t==null?void 0:t[e]}var cte=lte,ute=ste,fte=cte;function hte(t,e){var n=fte(t,e);return ute(n)?n:void 0}var Zl=hte,dte=Zl,pte=dte(Object,"create"),P0=pte,mO=P0;function mte(){this.__data__=mO?mO(null):{},this.size=0}var gte=mte;function vte(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var yte=vte,_te=P0,xte="__lodash_hash_undefined__",bte=Object.prototype,wte=bte.hasOwnProperty;function Ste(t){var e=this.__data__;if(_te){var n=e[t];return n===xte?void 0:n}return wte.call(e,t)?e[t]:void 0}var Ete=Ste,Tte=P0,Ate=Object.prototype,Mte=Ate.hasOwnProperty;function Pte(t){var e=this.__data__;return Tte?e[t]!==void 0:Mte.call(e,t)}var Cte=Pte,Rte=P0,Ote="__lodash_hash_undefined__";function Ite(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Rte&&e===void 0?Ote:e,this}var Nte=Ite,Dte=gte,Lte=yte,kte=Ete,jte=Cte,Ute=Nte;function Df(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Df.prototype.clear=Dte;Df.prototype.delete=Lte;Df.prototype.get=kte;Df.prototype.has=jte;Df.prototype.set=Ute;var Fte=Df;function Vte(){this.__data__=[],this.size=0}var Bte=Vte;function $te(t,e){return t===e||t!==t&&e!==e}var XT=$te,zte=XT;function Hte(t,e){for(var n=t.length;n--;)if(zte(t[n][0],e))return n;return-1}var C0=Hte,Gte=C0,Wte=Array.prototype,qte=Wte.splice;function Xte(t){var e=this.__data__,n=Gte(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():qte.call(e,n,1),--this.size,!0}var Kte=Xte,Yte=C0;function Qte(t){var e=this.__data__,n=Yte(e,t);return n<0?void 0:e[n][1]}var Zte=Qte,Jte=C0;function ene(t){return Jte(this.__data__,t)>-1}var tne=ene,nne=C0;function rne(t,e){var n=this.__data__,r=nne(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var ine=rne,one=Bte,ane=Kte,sne=Zte,lne=tne,cne=ine;function Lf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Lf.prototype.clear=one;Lf.prototype.delete=ane;Lf.prototype.get=sne;Lf.prototype.has=lne;Lf.prototype.set=cne;var R0=Lf,une=Zl,fne=jo,hne=une(fne,"Map"),KT=hne,gO=Fte,dne=R0,pne=KT;function mne(){this.size=0,this.__data__={hash:new gO,map:new(pne||dne),string:new gO}}var gne=mne;function vne(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var yne=vne,_ne=yne;function xne(t,e){var n=t.__data__;return _ne(e)?n[typeof e=="string"?"string":"hash"]:n.map}var O0=xne,bne=O0;function wne(t){var e=bne(this,t).delete(t);return this.size-=e?1:0,e}var Sne=wne,Ene=O0;function Tne(t){return Ene(this,t).get(t)}var Ane=Tne,Mne=O0;function Pne(t){return Mne(this,t).has(t)}var Cne=Pne,Rne=O0;function One(t,e){var n=Rne(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Ine=One,Nne=gne,Dne=Sne,Lne=Ane,kne=Cne,jne=Ine;function kf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}kf.prototype.clear=Nne;kf.prototype.delete=Dne;kf.prototype.get=Lne;kf.prototype.has=kne;kf.prototype.set=jne;var YT=kf,zF=YT,Une="Expected a function";function QT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Une);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(QT.Cache||zF),n}QT.Cache=zF;var HF=QT;const Fne=Ft(HF);var Vne=HF,Bne=500;function $ne(t){var e=Vne(t,function(r){return n.size===Bne&&n.clear(),r}),n=e.cache;return e}var zne=$ne,Hne=zne,Gne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wne=/\\(\\)?/g,qne=Hne(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Gne,function(n,r,i,o){e.push(i?o.replace(Wne,"$1"):r||n)}),e}),Xne=qne;function Kne(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var ZT=Kne,vO=qp,Yne=ZT,Qne=Zr,Zne=If,Jne=1/0,yO=vO?vO.prototype:void 0,_O=yO?yO.toString:void 0;function GF(t){if(typeof t=="string")return t;if(Qne(t))return Yne(t,GF)+"";if(Zne(t))return _O?_O.call(t):"";var e=t+"";return e=="0"&&1/t==-Jne?"-0":e}var ere=GF,tre=ere;function nre(t){return t==null?"":tre(t)}var WF=nre,rre=Zr,ire=WT,ore=Xne,are=WF;function sre(t,e){return rre(t)?t:ire(t,e)?[t]:ore(are(t))}var qF=sre,lre=If,cre=1/0;function ure(t){if(typeof t=="string"||lre(t))return t;var e=t+"";return e=="0"&&1/t==-cre?"-0":e}var I0=ure,fre=qF,hre=I0;function dre(t,e){e=fre(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[hre(e[n++])];return n&&n==r?t:void 0}var JT=dre,pre=JT;function mre(t,e,n){var r=t==null?void 0:pre(t,e);return r===void 0?n:r}var XF=mre;const fi=Ft(XF);function gre(t){return t==null}var vre=gre;const ft=Ft(vre);var yre=Ca,_re=Zr,xre=Ra,bre="[object String]";function wre(t){return typeof t=="string"||!_re(t)&&xre(t)&&yre(t)==bre}var Sre=wre;const Xp=Ft(Sre);var KF={exports:{}},$t={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eA=Symbol.for("react.element"),tA=Symbol.for("react.portal"),N0=Symbol.for("react.fragment"),D0=Symbol.for("react.strict_mode"),L0=Symbol.for("react.profiler"),k0=Symbol.for("react.provider"),j0=Symbol.for("react.context"),Ere=Symbol.for("react.server_context"),U0=Symbol.for("react.forward_ref"),F0=Symbol.for("react.suspense"),V0=Symbol.for("react.suspense_list"),B0=Symbol.for("react.memo"),$0=Symbol.for("react.lazy"),Tre=Symbol.for("react.offscreen"),YF;YF=Symbol.for("react.module.reference");function Vi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case eA:switch(t=t.type,t){case N0:case L0:case D0:case F0:case V0:return t;default:switch(t=t&&t.$$typeof,t){case Ere:case j0:case U0:case $0:case B0:case k0:return t;default:return e}}case tA:return e}}}$t.ContextConsumer=j0;$t.ContextProvider=k0;$t.Element=eA;$t.ForwardRef=U0;$t.Fragment=N0;$t.Lazy=$0;$t.Memo=B0;$t.Portal=tA;$t.Profiler=L0;$t.StrictMode=D0;$t.Suspense=F0;$t.SuspenseList=V0;$t.isAsyncMode=function(){return!1};$t.isConcurrentMode=function(){return!1};$t.isContextConsumer=function(t){return Vi(t)===j0};$t.isContextProvider=function(t){return Vi(t)===k0};$t.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===eA};$t.isForwardRef=function(t){return Vi(t)===U0};$t.isFragment=function(t){return Vi(t)===N0};$t.isLazy=function(t){return Vi(t)===$0};$t.isMemo=function(t){return Vi(t)===B0};$t.isPortal=function(t){return Vi(t)===tA};$t.isProfiler=function(t){return Vi(t)===L0};$t.isStrictMode=function(t){return Vi(t)===D0};$t.isSuspense=function(t){return Vi(t)===F0};$t.isSuspenseList=function(t){return Vi(t)===V0};$t.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===N0||t===L0||t===D0||t===F0||t===V0||t===Tre||typeof t=="object"&&t!==null&&(t.$$typeof===$0||t.$$typeof===B0||t.$$typeof===k0||t.$$typeof===j0||t.$$typeof===U0||t.$$typeof===YF||t.getModuleId!==void 0)};$t.typeOf=Vi;KF.exports=$t;var Are=KF.exports,Mre=Ca,Pre=Ra,Cre="[object Number]";function Rre(t){return typeof t=="number"||Pre(t)&&Mre(t)==Cre}var QF=Rre;const Ore=Ft(QF);var Ire=QF;function Nre(t){return Ire(t)&&t!=+t}var Dre=Nre;const jf=Ft(Dre);var kr=function(e){return e===0?0:e>0?1:-1},yl=function(e){return Xp(e)&&e.indexOf("%")===e.length-1},Ae=function(e){return Ore(e)&&!jf(e)},Vn=function(e){return Ae(e)||Xp(e)},Lre=0,Jl=function(e){var n=++Lre;return"".concat(e||"").concat(n)},jr=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ae(e)&&!Xp(e))return r;var o;if(yl(e)){var a=e.indexOf("%");o=n*parseFloat(e.slice(0,a))/100}else o=+e;return jf(o)&&(o=r),i&&o>n&&(o=n),o},Ya=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},kre=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Un=function(e,n){return Ae(e)&&Ae(n)?function(r){return e+r*(n-e)}:function(){return n}};function jv(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):fi(r,e))===n})}function Su(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function uw(t){"@babel/helpers - typeof";return uw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uw(t)}var jre=["viewBox","children"],Ure=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],xO=["points","pathLength"],rb={svg:jre,polygon:xO,polyline:xO},nA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Uv=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(V.isValidElement(e)&&(r=e.props),!Nf(r))return null;var i={};return Object.keys(r).forEach(function(o){nA.includes(o)&&(i[o]=n||function(a){return r[o](r,a)})}),i},Fre=function(e,n,r){return function(i){return e(n,r,i),null}},Bl=function(e,n,r){if(!Nf(e)||uw(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var a=e[o];nA.includes(o)&&typeof a=="function"&&(i||(i={}),i[o]=Fre(a,n,r))}),i},Vre=["children"],Bre=["children"];function bO(t,e){if(t==null)return{};var n=$re(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $re(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function fw(t){"@babel/helpers - typeof";return fw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fw(t)}var wO={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},fa=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},SO=null,ib=null,rA=function t(e){if(e===SO&&Array.isArray(ib))return ib;var n=[];return V.Children.forEach(e,function(r){ft(r)||(Are.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),ib=n,SO=e,n};function hi(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return fa(i)}):r=[fa(e)],rA(t).forEach(function(i){var o=fi(i,"type.displayName")||fi(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}function ai(t,e){var n=hi(t,e);return n&&n[0]}var EO=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Ae(r)||r<=0||!Ae(i)||i<=0)},zre=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Hre=function(e){return e&&e.type&&Xp(e.type)&&zre.indexOf(e.type)>=0},ZF=function(e){return e&&fw(e)==="object"&&"clipDot"in e},Gre=function(e,n,r,i){var o,a=(o=rb==null?void 0:rb[i])!==null&&o!==void 0?o:[];return!ot(e)&&(i&&a.includes(n)||Ure.includes(n))||r&&nA.includes(n)},Ke=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(V.isValidElement(e)&&(i=e.props),!Nf(i))return null;var o={};return Object.keys(i).forEach(function(a){var s;Gre((s=i)===null||s===void 0?void 0:s[a],a,n,r)&&(o[a]=i[a])}),o},hw=function t(e,n){if(e===n)return!0;var r=V.Children.count(e);if(r!==V.Children.count(n))return!1;if(r===0)return!0;if(r===1)return TO(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=e[i],a=n[i];if(Array.isArray(o)||Array.isArray(a)){if(!t(o,a))return!1}else if(!TO(o,a))return!1}return!0},TO=function(e,n){if(ft(e)&&ft(n))return!0;if(!ft(e)&&!ft(n)){var r=e.props||{},i=r.children,o=bO(r,Vre),a=n.props||{},s=a.children,l=bO(a,Bre);return i&&s?Su(o,l)&&hw(i,s):!i&&!s?Su(o,l):!1}return!1},AO=function(e,n){var r=[],i={};return rA(e).forEach(function(o,a){if(Hre(o))r.push(o);else if(o){var s=fa(o.type),l=n[s]||{},c=l.handler,u=l.once;if(c&&(!u||!i[s])){var f=c(o,s,a);r.push(f),i[s]=!0}}}),r},Wre=function(e){var n=e&&e.type;return n&&wO[n]?wO[n]:null},qre=function(e,n){return rA(n).indexOf(e)},Xre=["children","width","height","viewBox","className","style","title","desc"];function dw(){return dw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dw.apply(this,arguments)}function Kre(t,e){if(t==null)return{};var n=Yre(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Yre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function pw(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,o=t.className,a=t.style,s=t.title,l=t.desc,c=Kre(t,Xre),u=i||{width:n,height:r,x:0,y:0},f=_t("recharts-surface",o);return G.createElement("svg",dw({},Ke(c,!0,"svg"),{className:f,width:n,height:r,style:a,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),G.createElement("title",null,s),G.createElement("desc",null,l),e)}var Qre=["children","className"];function mw(){return mw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mw.apply(this,arguments)}function Zre(t,e){if(t==null)return{};var n=Jre(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var St=G.forwardRef(function(t,e){var n=t.children,r=t.className,i=Zre(t,Qre),o=_t("recharts-layer",r);return G.createElement("g",mw({className:o},Ke(i,!0),{ref:e}),n)}),ao=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function eie(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var tie=eie,nie=tie;function rie(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:nie(t,e,n)}var iie=rie,oie="\\ud800-\\udfff",aie="\\u0300-\\u036f",sie="\\ufe20-\\ufe2f",lie="\\u20d0-\\u20ff",cie=aie+sie+lie,uie="\\ufe0e\\ufe0f",fie="\\u200d",hie=RegExp("["+fie+oie+cie+uie+"]");function die(t){return hie.test(t)}var JF=die;function pie(t){return t.split("")}var mie=pie,e4="\\ud800-\\udfff",gie="\\u0300-\\u036f",vie="\\ufe20-\\ufe2f",yie="\\u20d0-\\u20ff",_ie=gie+vie+yie,xie="\\ufe0e\\ufe0f",bie="["+e4+"]",gw="["+_ie+"]",vw="\\ud83c[\\udffb-\\udfff]",wie="(?:"+gw+"|"+vw+")",t4="[^"+e4+"]",n4="(?:\\ud83c[\\udde6-\\uddff]){2}",r4="[\\ud800-\\udbff][\\udc00-\\udfff]",Sie="\\u200d",i4=wie+"?",o4="["+xie+"]?",Eie="(?:"+Sie+"(?:"+[t4,n4,r4].join("|")+")"+o4+i4+")*",Tie=o4+i4+Eie,Aie="(?:"+[t4+gw+"?",gw,n4,r4,bie].join("|")+")",Mie=RegExp(vw+"(?="+vw+")|"+Aie+Tie,"g");function Pie(t){return t.match(Mie)||[]}var Cie=Pie,Rie=mie,Oie=JF,Iie=Cie;function Nie(t){return Oie(t)?Iie(t):Rie(t)}var Die=Nie,Lie=iie,kie=JF,jie=Die,Uie=WF;function Fie(t){return function(e){e=Uie(e);var n=kie(e)?jie(e):void 0,r=n?n[0]:e.charAt(0),i=n?Lie(n,1).join(""):e.slice(1);return r[t]()+i}}var Vie=Fie,Bie=Vie,$ie=Bie("toUpperCase"),zie=$ie;const z0=Ft(zie);function Kt(t){return function(){return t}}const a4=Math.cos,Fv=Math.sin,ho=Math.sqrt,Vv=Math.PI,H0=2*Vv,yw=Math.PI,_w=2*yw,ol=1e-6,Hie=_w-ol;function s4(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Gie(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return s4;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Wie{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?s4:Gie(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=r-e,c=i-n,u=a-e,f=s-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>ol)if(!(Math.abs(f*l-c*u)>ol)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-a,v=i-s,y=l*l+c*c,g=d*d+v*v,p=Math.sqrt(y),x=Math.sqrt(h),_=o*Math.tan((yw-Math.acos((y+h-g)/(2*p*x)))/2),T=_/x,w=_/p;Math.abs(T-1)>ol&&this._append`L${e+T*u},${n+T*f}`,this._append`A${o},${o},0,0,${+(f*d>u*v)},${this._x1=e+w*l},${this._y1=n+w*c}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),c=e+s,u=n+l,f=1^a,h=a?i-o:o-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>ol||Math.abs(this._y1-u)>ol)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%_w+_w),h>Hie?this._append`A${r},${r},0,1,${f},${e-s},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:h>ol&&this._append`A${r},${r},0,${+(h>=yw)},${f},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function iA(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Wie(e)}function oA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function l4(t){this._context=t}l4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function G0(t){return new l4(t)}function c4(t){return t[0]}function u4(t){return t[1]}function f4(t,e){var n=Kt(!0),r=null,i=G0,o=null,a=iA(s);t=typeof t=="function"?t:t===void 0?c4:Kt(t),e=typeof e=="function"?e:e===void 0?u4:Kt(e);function s(l){var c,u=(l=oA(l)).length,f,h=!1,d;for(r==null&&(o=i(d=a())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(f,c,l),+e(f,c,l));if(d)return o=null,d+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:Kt(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:Kt(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Kt(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),s):r},s}function ug(t,e,n){var r=null,i=Kt(!0),o=null,a=G0,s=null,l=iA(c);t=typeof t=="function"?t:t===void 0?c4:Kt(+t),e=typeof e=="function"?e:Kt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?u4:Kt(+n);function c(f){var h,d,v,y=(f=oA(f)).length,g,p=!1,x,_=new Array(y),T=new Array(y);for(o==null&&(s=a(x=l())),h=0;h<=y;++h){if(!(h<y&&i(g=f[h],h,f))===p)if(p=!p)d=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),v=h-1;v>=d;--v)s.point(_[v],T[v]);s.lineEnd(),s.areaEnd()}p&&(_[h]=+t(g,h,f),T[h]=+e(g,h,f),s.point(r?+r(g,h,f):_[h],n?+n(g,h,f):T[h]))}if(x)return s=null,x+""||null}function u(){return f4().defined(i).curve(a).context(o)}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:Kt(+f),r=null,c):t},c.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Kt(+f),c):t},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Kt(+f),c):r},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:Kt(+f),n=null,c):e},c.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Kt(+f),c):e},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Kt(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Kt(!!f),c):i},c.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),c):a},c.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),c):o},c}class h4{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function qie(t){return new h4(t,!0)}function Xie(t){return new h4(t,!1)}const aA={draw(t,e){const n=ho(e/Vv);t.moveTo(n,0),t.arc(0,0,n,0,H0)}},Kie={draw(t,e){const n=ho(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},d4=ho(1/3),Yie=d4*2,Qie={draw(t,e){const n=ho(e/Yie),r=n*d4;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Zie={draw(t,e){const n=ho(e),r=-n/2;t.rect(r,r,n,n)}},Jie=.8908130915292852,p4=Fv(Vv/10)/Fv(7*Vv/10),eoe=Fv(H0/10)*p4,toe=-a4(H0/10)*p4,noe={draw(t,e){const n=ho(e*Jie),r=eoe*n,i=toe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const a=H0*o/5,s=a4(a),l=Fv(a);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},ob=ho(3),roe={draw(t,e){const n=-ho(e/(ob*3));t.moveTo(0,n*2),t.lineTo(-ob*n,-n),t.lineTo(ob*n,-n),t.closePath()}},bi=-.5,wi=ho(3)/2,xw=1/ho(12),ioe=(xw/2+1)*3,ooe={draw(t,e){const n=ho(e/ioe),r=n/2,i=n*xw,o=r,a=n*xw+n,s=-o,l=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,l),t.lineTo(bi*r-wi*i,wi*r+bi*i),t.lineTo(bi*o-wi*a,wi*o+bi*a),t.lineTo(bi*s-wi*l,wi*s+bi*l),t.lineTo(bi*r+wi*i,bi*i-wi*r),t.lineTo(bi*o+wi*a,bi*a-wi*o),t.lineTo(bi*s+wi*l,bi*l-wi*s),t.closePath()}};function aoe(t,e){let n=null,r=iA(i);t=typeof t=="function"?t:Kt(t||aA),e=typeof e=="function"?e:Kt(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Kt(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Kt(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function Bv(){}function $v(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function m4(t){this._context=t}m4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$v(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$v(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function soe(t){return new m4(t)}function g4(t){this._context=t}g4.prototype={areaStart:Bv,areaEnd:Bv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:$v(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function loe(t){return new g4(t)}function v4(t){this._context=t}v4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:$v(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function coe(t){return new v4(t)}function y4(t){this._context=t}y4.prototype={areaStart:Bv,areaEnd:Bv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function uoe(t){return new y4(t)}function MO(t){return t<0?-1:1}function PO(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(MO(o)+MO(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function CO(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ab(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function zv(t){this._context=t}zv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ab(this,this._t0,CO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ab(this,CO(this,n=PO(this,t,e)),n);break;default:ab(this,this._t0,n=PO(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function _4(t){this._context=new x4(t)}(_4.prototype=Object.create(zv.prototype)).point=function(t,e){zv.prototype.point.call(this,e,t)};function x4(t){this._context=t}x4.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function foe(t){return new zv(t)}function hoe(t){return new _4(t)}function b4(t){this._context=t}b4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=RO(t),i=RO(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function RO(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function doe(t){return new b4(t)}function W0(t,e){this._context=t,this._t=e}W0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function poe(t){return new W0(t,.5)}function moe(t){return new W0(t,0)}function goe(t){return new W0(t,1)}function zu(t,e){if((a=t.length)>1)for(var n=1,r,i,o=t[e[0]],a,s=o.length;n<a;++n)for(i=o,o=t[e[n]],r=0;r<s;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function bw(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function voe(t,e){return t[e]}function yoe(t){const e=[];return e.key=t,e}function _oe(){var t=Kt([]),e=bw,n=zu,r=voe;function i(o){var a=Array.from(t.apply(this,arguments),yoe),s,l=a.length,c=-1,u;for(const f of o)for(s=0,++c;s<l;++s)(a[s][c]=[0,+r(f,a[s].key,c,o)]).data=f;for(s=0,u=oA(e(a));s<l;++s)a[u[s]].index=s;return n(a,u),a}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Kt(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Kt(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?bw:typeof o=="function"?o:Kt(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??zu,i):n},i}function xoe(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,a;i<o;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}zu(t,e)}}function boe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var a=0,s=0;a<i;++a)s+=t[a][n][1]||0;r[n][1]+=r[n][0]=-s/2}zu(t,e)}}function woe(t,e){if(!(!((a=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,a;r<o;++r){for(var s=0,l=0,c=0;s<a;++s){for(var u=t[e[s]],f=u[r][1]||0,h=u[r-1][1]||0,d=(f-h)/2,v=0;v<s;++v){var y=t[e[v]],g=y[r][1]||0,p=y[r-1][1]||0;d+=g-p}l+=f,c+=d*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,zu(t,e)}}function Gd(t){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gd(t)}var Soe=["type","size","sizeType"];function ww(){return ww=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ww.apply(this,arguments)}function OO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OO(Object(n),!0).forEach(function(r){Eoe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eoe(t,e,n){return e=Toe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Toe(t){var e=Aoe(t,"string");return Gd(e)=="symbol"?e:e+""}function Aoe(t,e){if(Gd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Moe(t,e){if(t==null)return{};var n=Poe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Poe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var w4={symbolCircle:aA,symbolCross:Kie,symbolDiamond:Qie,symbolSquare:Zie,symbolStar:noe,symbolTriangle:roe,symbolWye:ooe},Coe=Math.PI/180,Roe=function(e){var n="symbol".concat(z0(e));return w4[n]||aA},Ooe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Coe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Ioe=function(e,n){w4["symbol".concat(z0(e))]=n},sA=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,o=i===void 0?64:i,a=e.sizeType,s=a===void 0?"area":a,l=Moe(e,Soe),c=IO(IO({},l),{},{type:r,size:o,sizeType:s}),u=function(){var g=Roe(r),p=aoe().type(g).size(Ooe(o,s,r));return p()},f=c.className,h=c.cx,d=c.cy,v=Ke(c,!0);return h===+h&&d===+d&&o===+o?G.createElement("path",ww({},v,{className:_t("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(d,")"),d:u()})):null};sA.registerSymbol=Ioe;function Hu(t){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hu(t)}function Sw(){return Sw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sw.apply(this,arguments)}function NO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Noe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NO(Object(n),!0).forEach(function(r){Wd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Doe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Loe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,E4(r.key),r)}}function koe(t,e,n){return e&&Loe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function joe(t,e,n){return e=Hv(e),Uoe(t,S4()?Reflect.construct(e,n||[],Hv(t).constructor):e.apply(t,n))}function Uoe(t,e){if(e&&(Hu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Foe(t)}function Foe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S4=function(){return!!t})()}function Hv(t){return Hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hv(t)}function Voe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ew(t,e)}function Ew(t,e){return Ew=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ew(t,e)}function Wd(t,e,n){return e=E4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E4(t){var e=Boe(t,"string");return Hu(e)=="symbol"?e:e+""}function Boe(t,e){if(Hu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Si=32,lA=function(t){function e(){return Doe(this,e),joe(this,e,arguments)}return Voe(e,t),koe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,o=Si/2,a=Si/6,s=Si/3,l=r.inactive?i:r.color;if(r.type==="plainline")return G.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:o,x2:Si,y2:o,className:"recharts-legend-icon"});if(r.type==="line")return G.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(o,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(o,`
            H`).concat(Si,"M").concat(2*s,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(o),className:"recharts-legend-icon"});if(r.type==="rect")return G.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Si/8,"h").concat(Si,"v").concat(Si*3/4,"h").concat(-Si,"z"),className:"recharts-legend-icon"});if(G.isValidElement(r.legendIcon)){var c=Noe({},r);return delete c.legendIcon,G.cloneElement(r.legendIcon,c)}return G.createElement(sA,{fill:l,cx:o,cy:o,size:Si,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,o=i.payload,a=i.iconSize,s=i.layout,l=i.formatter,c=i.inactiveColor,u={x:0,y:0,width:Si,height:Si},f={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(d,v){var y=d.formatter||l,g=_t(Wd(Wd({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",d.inactive));if(d.type==="none")return null;var p=ot(d.value)?null:d.value;ao(!ot(d.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=d.inactive?c:d.color;return G.createElement("li",Sw({className:g,style:f,key:"legend-item-".concat(v)},Bl(r.props,d,v)),G.createElement(pw,{width:a,height:a,viewBox:u,style:h},r.renderIcon(d)),G.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},y?y(p,d,v):p))})}},{key:"render",value:function(){var r=this.props,i=r.payload,o=r.layout,a=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return G.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(V.PureComponent);Wd(lA,"displayName","Legend");Wd(lA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var $oe=R0;function zoe(){this.__data__=new $oe,this.size=0}var Hoe=zoe;function Goe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var Woe=Goe;function qoe(t){return this.__data__.get(t)}var Xoe=qoe;function Koe(t){return this.__data__.has(t)}var Yoe=Koe,Qoe=R0,Zoe=KT,Joe=YT,eae=200;function tae(t,e){var n=this.__data__;if(n instanceof Qoe){var r=n.__data__;if(!Zoe||r.length<eae-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Joe(r)}return n.set(t,e),this.size=n.size,this}var nae=tae,rae=R0,iae=Hoe,oae=Woe,aae=Xoe,sae=Yoe,lae=nae;function Uf(t){var e=this.__data__=new rae(t);this.size=e.size}Uf.prototype.clear=iae;Uf.prototype.delete=oae;Uf.prototype.get=aae;Uf.prototype.has=sae;Uf.prototype.set=lae;var T4=Uf,cae="__lodash_hash_undefined__";function uae(t){return this.__data__.set(t,cae),this}var fae=uae;function hae(t){return this.__data__.has(t)}var dae=hae,pae=YT,mae=fae,gae=dae;function Gv(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new pae;++e<n;)this.add(t[e])}Gv.prototype.add=Gv.prototype.push=mae;Gv.prototype.has=gae;var A4=Gv;function vae(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var M4=vae;function yae(t,e){return t.has(e)}var P4=yae,_ae=A4,xae=M4,bae=P4,wae=1,Sae=2;function Eae(t,e,n,r,i,o){var a=n&wae,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var f=-1,h=!0,d=n&Sae?new _ae:void 0;for(o.set(t,e),o.set(e,t);++f<s;){var v=t[f],y=e[f];if(r)var g=a?r(y,v,f,e,t,o):r(v,y,f,t,e,o);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!xae(e,function(p,x){if(!bae(d,x)&&(v===p||i(v,p,n,r,o)))return d.push(x)})){h=!1;break}}else if(!(v===y||i(v,y,n,r,o))){h=!1;break}}return o.delete(t),o.delete(e),h}var C4=Eae,Tae=jo,Aae=Tae.Uint8Array,Mae=Aae;function Pae(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var Cae=Pae;function Rae(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var cA=Rae,DO=qp,LO=Mae,Oae=XT,Iae=C4,Nae=Cae,Dae=cA,Lae=1,kae=2,jae="[object Boolean]",Uae="[object Date]",Fae="[object Error]",Vae="[object Map]",Bae="[object Number]",$ae="[object RegExp]",zae="[object Set]",Hae="[object String]",Gae="[object Symbol]",Wae="[object ArrayBuffer]",qae="[object DataView]",kO=DO?DO.prototype:void 0,sb=kO?kO.valueOf:void 0;function Xae(t,e,n,r,i,o,a){switch(n){case qae:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Wae:return!(t.byteLength!=e.byteLength||!o(new LO(t),new LO(e)));case jae:case Uae:case Bae:return Oae(+t,+e);case Fae:return t.name==e.name&&t.message==e.message;case $ae:case Hae:return t==e+"";case Vae:var s=Nae;case zae:var l=r&Lae;if(s||(s=Dae),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=kae,a.set(t,e);var u=Iae(s(t),s(e),r,i,o,a);return a.delete(t),u;case Gae:if(sb)return sb.call(t)==sb.call(e)}return!1}var Kae=Xae;function Yae(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var R4=Yae,Qae=R4,Zae=Zr;function Jae(t,e,n){var r=e(t);return Zae(t)?r:Qae(r,n(t))}var ese=Jae;function tse(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}var nse=tse;function rse(){return[]}var ise=rse,ose=nse,ase=ise,sse=Object.prototype,lse=sse.propertyIsEnumerable,jO=Object.getOwnPropertySymbols,cse=jO?function(t){return t==null?[]:(t=Object(t),ose(jO(t),function(e){return lse.call(t,e)}))}:ase,use=cse;function fse(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var hse=fse,dse=Ca,pse=Ra,mse="[object Arguments]";function gse(t){return pse(t)&&dse(t)==mse}var vse=gse,UO=vse,yse=Ra,O4=Object.prototype,_se=O4.hasOwnProperty,xse=O4.propertyIsEnumerable,bse=UO(function(){return arguments}())?UO:function(t){return yse(t)&&_se.call(t,"callee")&&!xse.call(t,"callee")},uA=bse,Wv={exports:{}};function wse(){return!1}var Sse=wse;Wv.exports;(function(t,e){var n=jo,r=Sse,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a?n.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||r;t.exports=c})(Wv,Wv.exports);var I4=Wv.exports,Ese=9007199254740991,Tse=/^(?:0|[1-9]\d*)$/;function Ase(t,e){var n=typeof t;return e=e??Ese,!!e&&(n=="number"||n!="symbol"&&Tse.test(t))&&t>-1&&t%1==0&&t<e}var fA=Ase,Mse=9007199254740991;function Pse(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Mse}var hA=Pse,Cse=Ca,Rse=hA,Ose=Ra,Ise="[object Arguments]",Nse="[object Array]",Dse="[object Boolean]",Lse="[object Date]",kse="[object Error]",jse="[object Function]",Use="[object Map]",Fse="[object Number]",Vse="[object Object]",Bse="[object RegExp]",$se="[object Set]",zse="[object String]",Hse="[object WeakMap]",Gse="[object ArrayBuffer]",Wse="[object DataView]",qse="[object Float32Array]",Xse="[object Float64Array]",Kse="[object Int8Array]",Yse="[object Int16Array]",Qse="[object Int32Array]",Zse="[object Uint8Array]",Jse="[object Uint8ClampedArray]",ele="[object Uint16Array]",tle="[object Uint32Array]",nn={};nn[qse]=nn[Xse]=nn[Kse]=nn[Yse]=nn[Qse]=nn[Zse]=nn[Jse]=nn[ele]=nn[tle]=!0;nn[Ise]=nn[Nse]=nn[Gse]=nn[Dse]=nn[Wse]=nn[Lse]=nn[kse]=nn[jse]=nn[Use]=nn[Fse]=nn[Vse]=nn[Bse]=nn[$se]=nn[zse]=nn[Hse]=!1;function nle(t){return Ose(t)&&Rse(t.length)&&!!nn[Cse(t)]}var rle=nle;function ile(t){return function(e){return t(e)}}var N4=ile,qv={exports:{}};qv.exports;(function(t,e){var n=VF,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,a=o&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=s})(qv,qv.exports);var ole=qv.exports,ale=rle,sle=N4,FO=ole,VO=FO&&FO.isTypedArray,lle=VO?sle(VO):ale,D4=lle,cle=hse,ule=uA,fle=Zr,hle=I4,dle=fA,ple=D4,mle=Object.prototype,gle=mle.hasOwnProperty;function vle(t,e){var n=fle(t),r=!n&&ule(t),i=!n&&!r&&hle(t),o=!n&&!r&&!i&&ple(t),a=n||r||i||o,s=a?cle(t.length,String):[],l=s.length;for(var c in t)(e||gle.call(t,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||dle(c,l)))&&s.push(c);return s}var yle=vle,_le=Object.prototype;function xle(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||_le;return t===n}var ble=xle;function wle(t,e){return function(n){return t(e(n))}}var L4=wle,Sle=L4,Ele=Sle(Object.keys,Object),Tle=Ele,Ale=ble,Mle=Tle,Ple=Object.prototype,Cle=Ple.hasOwnProperty;function Rle(t){if(!Ale(t))return Mle(t);var e=[];for(var n in Object(t))Cle.call(t,n)&&n!="constructor"&&e.push(n);return e}var Ole=Rle,Ile=qT,Nle=hA;function Dle(t){return t!=null&&Nle(t.length)&&!Ile(t)}var Kp=Dle,Lle=yle,kle=Ole,jle=Kp;function Ule(t){return jle(t)?Lle(t):kle(t)}var q0=Ule,Fle=ese,Vle=use,Ble=q0;function $le(t){return Fle(t,Ble,Vle)}var zle=$le,BO=zle,Hle=1,Gle=Object.prototype,Wle=Gle.hasOwnProperty;function qle(t,e,n,r,i,o){var a=n&Hle,s=BO(t),l=s.length,c=BO(e),u=c.length;if(l!=u&&!a)return!1;for(var f=l;f--;){var h=s[f];if(!(a?h in e:Wle.call(e,h)))return!1}var d=o.get(t),v=o.get(e);if(d&&v)return d==e&&v==t;var y=!0;o.set(t,e),o.set(e,t);for(var g=a;++f<l;){h=s[f];var p=t[h],x=e[h];if(r)var _=a?r(x,p,h,e,t,o):r(p,x,h,t,e,o);if(!(_===void 0?p===x||i(p,x,n,r,o):_)){y=!1;break}g||(g=h=="constructor")}if(y&&!g){var T=t.constructor,w=e.constructor;T!=w&&"constructor"in t&&"constructor"in e&&!(typeof T=="function"&&T instanceof T&&typeof w=="function"&&w instanceof w)&&(y=!1)}return o.delete(t),o.delete(e),y}var Xle=qle,Kle=Zl,Yle=jo,Qle=Kle(Yle,"DataView"),Zle=Qle,Jle=Zl,ece=jo,tce=Jle(ece,"Promise"),nce=tce,rce=Zl,ice=jo,oce=rce(ice,"Set"),k4=oce,ace=Zl,sce=jo,lce=ace(sce,"WeakMap"),cce=lce,Tw=Zle,Aw=KT,Mw=nce,Pw=k4,Cw=cce,j4=Ca,Ff=$F,$O="[object Map]",uce="[object Object]",zO="[object Promise]",HO="[object Set]",GO="[object WeakMap]",WO="[object DataView]",fce=Ff(Tw),hce=Ff(Aw),dce=Ff(Mw),pce=Ff(Pw),mce=Ff(Cw),al=j4;(Tw&&al(new Tw(new ArrayBuffer(1)))!=WO||Aw&&al(new Aw)!=$O||Mw&&al(Mw.resolve())!=zO||Pw&&al(new Pw)!=HO||Cw&&al(new Cw)!=GO)&&(al=function(t){var e=j4(t),n=e==uce?t.constructor:void 0,r=n?Ff(n):"";if(r)switch(r){case fce:return WO;case hce:return $O;case dce:return zO;case pce:return HO;case mce:return GO}return e});var gce=al,lb=T4,vce=C4,yce=Kae,_ce=Xle,qO=gce,XO=Zr,KO=I4,xce=D4,bce=1,YO="[object Arguments]",QO="[object Array]",fg="[object Object]",wce=Object.prototype,ZO=wce.hasOwnProperty;function Sce(t,e,n,r,i,o){var a=XO(t),s=XO(e),l=a?QO:qO(t),c=s?QO:qO(e);l=l==YO?fg:l,c=c==YO?fg:c;var u=l==fg,f=c==fg,h=l==c;if(h&&KO(t)){if(!KO(e))return!1;a=!0,u=!1}if(h&&!u)return o||(o=new lb),a||xce(t)?vce(t,e,n,r,i,o):yce(t,e,l,n,r,i,o);if(!(n&bce)){var d=u&&ZO.call(t,"__wrapped__"),v=f&&ZO.call(e,"__wrapped__");if(d||v){var y=d?t.value():t,g=v?e.value():e;return o||(o=new lb),i(y,g,n,r,o)}}return h?(o||(o=new lb),_ce(t,e,n,r,i,o)):!1}var Ece=Sce,Tce=Ece,JO=Ra;function U4(t,e,n,r,i){return t===e?!0:t==null||e==null||!JO(t)&&!JO(e)?t!==t&&e!==e:Tce(t,e,n,r,U4,i)}var dA=U4,Ace=T4,Mce=dA,Pce=1,Cce=2;function Rce(t,e,n,r){var i=n.length,o=i,a=!r;if(t==null)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var l=s[0],c=t[l],u=s[1];if(a&&s[2]){if(c===void 0&&!(l in t))return!1}else{var f=new Ace;if(r)var h=r(c,u,l,t,e,f);if(!(h===void 0?Mce(u,c,Pce|Cce,r,f):h))return!1}}return!0}var Oce=Rce,Ice=ks;function Nce(t){return t===t&&!Ice(t)}var F4=Nce,Dce=F4,Lce=q0;function kce(t){for(var e=Lce(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Dce(i)]}return e}var jce=kce;function Uce(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var V4=Uce,Fce=Oce,Vce=jce,Bce=V4;function $ce(t){var e=Vce(t);return e.length==1&&e[0][2]?Bce(e[0][0],e[0][1]):function(n){return n===t||Fce(n,t,e)}}var zce=$ce;function Hce(t,e){return t!=null&&e in Object(t)}var Gce=Hce,Wce=qF,qce=uA,Xce=Zr,Kce=fA,Yce=hA,Qce=I0;function Zce(t,e,n){e=Wce(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=Qce(e[r]);if(!(o=t!=null&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&Yce(i)&&Kce(a,i)&&(Xce(t)||qce(t)))}var Jce=Zce,eue=Gce,tue=Jce;function nue(t,e){return t!=null&&tue(t,e,eue)}var rue=nue,iue=dA,oue=XF,aue=rue,sue=WT,lue=F4,cue=V4,uue=I0,fue=1,hue=2;function due(t,e){return sue(t)&&lue(e)?cue(uue(t),e):function(n){var r=oue(n,t);return r===void 0&&r===e?aue(n,t):iue(e,r,fue|hue)}}var pue=due;function mue(t){return t}var Vf=mue;function gue(t){return function(e){return e==null?void 0:e[t]}}var vue=gue,yue=JT;function _ue(t){return function(e){return yue(e,t)}}var xue=_ue,bue=vue,wue=xue,Sue=WT,Eue=I0;function Tue(t){return Sue(t)?bue(Eue(t)):wue(t)}var Aue=Tue,Mue=zce,Pue=pue,Cue=Vf,Rue=Zr,Oue=Aue;function Iue(t){return typeof t=="function"?t:t==null?Cue:typeof t=="object"?Rue(t)?Pue(t[0],t[1]):Mue(t):Oue(t)}var Uo=Iue;function Nue(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var B4=Nue;function Due(t){return t!==t}var Lue=Due;function kue(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var jue=kue,Uue=B4,Fue=Lue,Vue=jue;function Bue(t,e,n){return e===e?Vue(t,e,n):Uue(t,Fue,n)}var $ue=Bue,zue=$ue;function Hue(t,e){var n=t==null?0:t.length;return!!n&&zue(t,e,0)>-1}var Gue=Hue;function Wue(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var que=Wue;function Xue(){}var Kue=Xue,cb=k4,Yue=Kue,Que=cA,Zue=1/0,Jue=cb&&1/Que(new cb([,-0]))[1]==Zue?function(t){return new cb(t)}:Yue,efe=Jue,tfe=A4,nfe=Gue,rfe=que,ife=P4,ofe=efe,afe=cA,sfe=200;function lfe(t,e,n){var r=-1,i=nfe,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=rfe;else if(o>=sfe){var c=e?null:ofe(t);if(c)return afe(c);a=!1,i=ife,l=new tfe}else l=e?[]:s;e:for(;++r<o;){var u=t[r],f=e?e(u):u;if(u=n||u!==0?u:0,a&&f===f){for(var h=l.length;h--;)if(l[h]===f)continue e;e&&l.push(f),s.push(u)}else i(l,f,n)||(l!==s&&l.push(f),s.push(u))}return s}var cfe=lfe,ufe=Uo,ffe=cfe;function hfe(t,e){return t&&t.length?ffe(t,ufe(e)):[]}var dfe=hfe;const eI=Ft(dfe);function $4(t,e,n){return e===!0?eI(t,n):ot(e)?eI(t,e):t}function Gu(t){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gu(t)}var pfe=["ref"];function tI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tI(Object(n),!0).forEach(function(r){X0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,H4(r.key),r)}}function gfe(t,e,n){return e&&nI(t.prototype,e),n&&nI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vfe(t,e,n){return e=Xv(e),yfe(t,z4()?Reflect.construct(e,n||[],Xv(t).constructor):e.apply(t,n))}function yfe(t,e){if(e&&(Gu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _fe(t)}function _fe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z4=function(){return!!t})()}function Xv(t){return Xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xv(t)}function xfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rw(t,e)}function Rw(t,e){return Rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Rw(t,e)}function X0(t,e,n){return e=H4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H4(t){var e=bfe(t,"string");return Gu(e)=="symbol"?e:e+""}function bfe(t,e){if(Gu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wfe(t,e){if(t==null)return{};var n=Sfe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Sfe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Efe(t){return t.value}function Tfe(t,e){if(G.isValidElement(t))return G.cloneElement(t,e);if(typeof t=="function")return G.createElement(t,e);e.ref;var n=wfe(e,pfe);return G.createElement(lA,n)}var rI=1,ha=function(t){function e(){var n;mfe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=vfe(this,e,[].concat(i)),X0(n,"lastBoundingBox",{width:-1,height:-1}),n}return xfe(e,t),gfe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>rI||Math.abs(i.height-this.lastBoundingBox.height)>rI)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?qo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,o=i.layout,a=i.align,s=i.verticalAlign,l=i.margin,c=i.chartWidth,u=i.chartHeight,f,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&o==="vertical"){var d=this.getBBoxSnapshot();f={left:((c||0)-d.width)/2}}else f=a==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var v=this.getBBoxSnapshot();h={top:((u||0)-v.height)/2}}else h=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return qo(qo({},f),h)}},{key:"render",value:function(){var r=this,i=this.props,o=i.content,a=i.width,s=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,u=i.payload,f=qo(qo({position:"absolute",width:a||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return G.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(d){r.wrapperNode=d}},Tfe(o,qo(qo({},this.props),{},{payload:$4(u,c,Efe)})))}}],[{key:"getWithHeight",value:function(r,i){var o=qo(qo({},this.defaultProps),r.props),a=o.layout;return a==="vertical"&&Ae(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(V.PureComponent);X0(ha,"displayName","Legend");X0(ha,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var iI=qp,Afe=uA,Mfe=Zr,oI=iI?iI.isConcatSpreadable:void 0;function Pfe(t){return Mfe(t)||Afe(t)||!!(oI&&t&&t[oI])}var Cfe=Pfe,Rfe=R4,Ofe=Cfe;function G4(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Ofe),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?G4(s,e-1,n,r,i):Rfe(i,s):r||(i[i.length]=s)}return i}var W4=G4;function Ife(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(n(o[l],l,o)===!1)break}return e}}var Nfe=Ife,Dfe=Nfe,Lfe=Dfe(),kfe=Lfe,jfe=kfe,Ufe=q0;function Ffe(t,e){return t&&jfe(t,e,Ufe)}var q4=Ffe,Vfe=Kp;function Bfe(t,e){return function(n,r){if(n==null)return n;if(!Vfe(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}var $fe=Bfe,zfe=q4,Hfe=$fe,Gfe=Hfe(zfe),pA=Gfe,Wfe=pA,qfe=Kp;function Xfe(t,e){var n=-1,r=qfe(t)?Array(t.length):[];return Wfe(t,function(i,o,a){r[++n]=e(i,o,a)}),r}var X4=Xfe;function Kfe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var Yfe=Kfe,aI=If;function Qfe(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,o=aI(t),a=e!==void 0,s=e===null,l=e===e,c=aI(e);if(!s&&!c&&!o&&t>e||o&&a&&l&&!s&&!c||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}var Zfe=Qfe,Jfe=Zfe;function ehe(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var l=Jfe(i[r],o[r]);if(l){if(r>=s)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var the=ehe,ub=ZT,nhe=JT,rhe=Uo,ihe=X4,ohe=Yfe,ahe=N4,she=the,lhe=Vf,che=Zr;function uhe(t,e,n){e.length?e=ub(e,function(o){return che(o)?function(a){return nhe(a,o.length===1?o[0]:o)}:o}):e=[lhe];var r=-1;e=ub(e,ahe(rhe));var i=ihe(t,function(o,a,s){var l=ub(e,function(c){return c(o)});return{criteria:l,index:++r,value:o}});return ohe(i,function(o,a){return she(o,a,n)})}var fhe=uhe;function hhe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var dhe=hhe,phe=dhe,sI=Math.max;function mhe(t,e,n){return e=sI(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=sI(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),phe(t,this,s)}}var ghe=mhe;function vhe(t){return function(){return t}}var yhe=vhe,_he=Zl,xhe=function(){try{var t=_he(Object,"defineProperty");return t({},"",{}),t}catch{}}(),K4=xhe,bhe=yhe,lI=K4,whe=Vf,She=lI?function(t,e){return lI(t,"toString",{configurable:!0,enumerable:!1,value:bhe(e),writable:!0})}:whe,Ehe=She,The=800,Ahe=16,Mhe=Date.now;function Phe(t){var e=0,n=0;return function(){var r=Mhe(),i=Ahe-(r-n);if(n=r,i>0){if(++e>=The)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Che=Phe,Rhe=Ehe,Ohe=Che,Ihe=Ohe(Rhe),Nhe=Ihe,Dhe=Vf,Lhe=ghe,khe=Nhe;function jhe(t,e){return khe(Lhe(t,e,Dhe),t+"")}var Uhe=jhe,Fhe=XT,Vhe=Kp,Bhe=fA,$he=ks;function zhe(t,e,n){if(!$he(n))return!1;var r=typeof e;return(r=="number"?Vhe(n)&&Bhe(e,n.length):r=="string"&&e in n)?Fhe(n[e],t):!1}var K0=zhe,Hhe=W4,Ghe=fhe,Whe=Uhe,cI=K0,qhe=Whe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&cI(t,e[0],e[1])?e=[]:n>2&&cI(e[0],e[1],e[2])&&(e=[e[0]]),Ghe(t,Hhe(e,1),[])}),Xhe=qhe;const mA=Ft(Xhe);function qd(t){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qd(t)}function Ow(){return Ow=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ow.apply(this,arguments)}function Khe(t,e){return Jhe(t)||Zhe(t,e)||Qhe(t,e)||Yhe()}function Yhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qhe(t,e){if(t){if(typeof t=="string")return uI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uI(t,e)}}function uI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zhe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Jhe(t){if(Array.isArray(t))return t}function fI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fI(Object(n),!0).forEach(function(r){ede(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ede(t,e,n){return e=tde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tde(t){var e=nde(t,"string");return qd(e)=="symbol"?e:e+""}function nde(t,e){if(qd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rde(t){return Array.isArray(t)&&Vn(t[0])&&Vn(t[1])?t.join(" ~ "):t}var ide=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,o=i===void 0?{}:i,a=e.itemStyle,s=a===void 0?{}:a,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,f=e.formatter,h=e.itemSorter,d=e.wrapperClassName,v=e.labelClassName,y=e.label,g=e.labelFormatter,p=e.accessibilityLayer,x=p===void 0?!1:p,_=function(){if(u&&u.length){var N={padding:0,margin:0},O=(h?mA(u,h):u).map(function(D,L){if(D.type==="none")return null;var W=fb({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},s),$=D.formatter||f||rde,B=D.value,X=D.name,K=B,z=X;if($&&K!=null&&z!=null){var q=$(B,X,D,L,u);if(Array.isArray(q)){var ee=Khe(q,2);K=ee[0],z=ee[1]}else K=q}return G.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:W},Vn(z)?G.createElement("span",{className:"recharts-tooltip-item-name"},z):null,Vn(z)?G.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,G.createElement("span",{className:"recharts-tooltip-item-value"},K),G.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return G.createElement("ul",{className:"recharts-tooltip-item-list",style:N},O)}return null},T=fb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),w=fb({margin:0},c),M=!ft(y),b=M?y:"",A=_t("recharts-default-tooltip",d),E=_t("recharts-tooltip-label",v);M&&g&&u!==void 0&&u!==null&&(b=g(y,u));var P=x?{role:"status","aria-live":"assertive"}:{};return G.createElement("div",Ow({className:A,style:T},P),G.createElement("p",{className:E,style:w},G.isValidElement(b)?b:"".concat(b)),_())};function Xd(t){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xd(t)}function hg(t,e,n){return e=ode(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ode(t){var e=ade(t,"string");return Xd(e)=="symbol"?e:e+""}function ade(t,e){if(Xd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Eh="recharts-tooltip-wrapper",sde={visibility:"hidden"};function lde(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return _t(Eh,hg(hg(hg(hg({},"".concat(Eh,"-right"),Ae(n)&&e&&Ae(e.x)&&n>=e.x),"".concat(Eh,"-left"),Ae(n)&&e&&Ae(e.x)&&n<e.x),"".concat(Eh,"-bottom"),Ae(r)&&e&&Ae(e.y)&&r>=e.y),"".concat(Eh,"-top"),Ae(r)&&e&&Ae(e.y)&&r<e.y))}function hI(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,a=t.reverseDirection,s=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(o&&Ae(o[r]))return o[r];var u=n[r]-s-i,f=n[r]+i;if(e[r])return a[r]?u:f;if(a[r]){var h=u,d=l[r];return h<d?Math.max(f,l[r]):Math.max(u,l[r])}var v=f+s,y=l[r]+c;return v>y?Math.max(u,l[r]):Math.max(f,l[r])}function cde(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function ude(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,o=t.reverseDirection,a=t.tooltipBox,s=t.useTranslate3d,l=t.viewBox,c,u,f;return a.height>0&&a.width>0&&n?(u=hI({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),f=hI({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),c=cde({translateX:u,translateY:f,useTranslate3d:s})):c=sde,{cssProperties:c,cssClasses:lde({translateX:u,translateY:f,coordinate:n})}}function Wu(t){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wu(t)}function dI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dI(Object(n),!0).forEach(function(r){Nw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q4(r.key),r)}}function dde(t,e,n){return e&&hde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function pde(t,e,n){return e=Kv(e),mde(t,Y4()?Reflect.construct(e,n||[],Kv(t).constructor):e.apply(t,n))}function mde(t,e){if(e&&(Wu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gde(t)}function gde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y4=function(){return!!t})()}function Kv(t){return Kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kv(t)}function vde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Iw(t,e)}function Iw(t,e){return Iw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Iw(t,e)}function Nw(t,e,n){return e=Q4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q4(t){var e=yde(t,"string");return Wu(e)=="symbol"?e:e+""}function yde(t,e){if(Wu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mI=1,_de=function(t){function e(){var n;fde(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=pde(this,e,[].concat(i)),Nw(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Nw(n,"handleKeyDown",function(a){if(a.key==="Escape"){var s,l,c,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(c=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),n}return vde(e,t),dde(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>mI||Math.abs(r.height-this.state.lastBoundingBox.height)>mI)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.children,u=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,d=i.offset,v=i.position,y=i.reverseDirection,g=i.useTranslate3d,p=i.viewBox,x=i.wrapperStyle,_=ude({allowEscapeViewBox:a,coordinate:u,offsetTopLeft:d,position:v,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:p}),T=_.cssClasses,w=_.cssProperties,M=pI(pI({transition:h&&o?"transform ".concat(s,"ms ").concat(l):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&f?"visible":"hidden",position:"absolute",top:0,left:0},x);return G.createElement("div",{tabIndex:-1,className:T,style:M,ref:function(A){r.wrapperNode=A}},c)}}])}(V.PureComponent),xde=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},so={isSsr:xde(),get:function(e){return so[e]},set:function(e,n){if(typeof e=="string")so[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(i){so[i]=e[i]})}}};function qu(t){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qu(t)}function gI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gI(Object(n),!0).forEach(function(r){gA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,J4(r.key),r)}}function Sde(t,e,n){return e&&wde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ede(t,e,n){return e=Yv(e),Tde(t,Z4()?Reflect.construct(e,n||[],Yv(t).constructor):e.apply(t,n))}function Tde(t,e){if(e&&(qu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ade(t)}function Ade(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z4=function(){return!!t})()}function Yv(t){return Yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yv(t)}function Mde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dw(t,e)}function Dw(t,e){return Dw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Dw(t,e)}function gA(t,e,n){return e=J4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J4(t){var e=Pde(t,"string");return qu(e)=="symbol"?e:e+""}function Pde(t,e){if(qu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cde(t){return t.dataKey}function Rde(t,e){return G.isValidElement(t)?G.cloneElement(t,e):typeof t=="function"?G.createElement(t,e):G.createElement(ide,e)}var Lr=function(t){function e(){return bde(this,e),Ede(this,e,arguments)}return Mde(e,t),Sde(e,[{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.content,u=i.coordinate,f=i.filterNull,h=i.isAnimationActive,d=i.offset,v=i.payload,y=i.payloadUniqBy,g=i.position,p=i.reverseDirection,x=i.useTranslate3d,_=i.viewBox,T=i.wrapperStyle,w=v??[];f&&w.length&&(w=$4(v.filter(function(b){return b.value!=null&&(b.hide!==!0||r.props.includeHidden)}),y,Cde));var M=w.length>0;return G.createElement(_de,{allowEscapeViewBox:a,animationDuration:s,animationEasing:l,isAnimationActive:h,active:o,coordinate:u,hasPayload:M,offset:d,position:g,reverseDirection:p,useTranslate3d:x,viewBox:_,wrapperStyle:T},Rde(c,vI(vI({},this.props),{},{payload:w})))}}])}(V.PureComponent);gA(Lr,"displayName","Tooltip");gA(Lr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!so.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Ode=jo,Ide=function(){return Ode.Date.now()},Nde=Ide,Dde=/\s/;function Lde(t){for(var e=t.length;e--&&Dde.test(t.charAt(e)););return e}var kde=Lde,jde=kde,Ude=/^\s+/;function Fde(t){return t&&t.slice(0,jde(t)+1).replace(Ude,"")}var Vde=Fde,Bde=Vde,yI=ks,$de=If,_I=NaN,zde=/^[-+]0x[0-9a-f]+$/i,Hde=/^0b[01]+$/i,Gde=/^0o[0-7]+$/i,Wde=parseInt;function qde(t){if(typeof t=="number")return t;if($de(t))return _I;if(yI(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=yI(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Bde(t);var n=Hde.test(t);return n||Gde.test(t)?Wde(t.slice(2),n?2:8):zde.test(t)?_I:+t}var eV=qde,Xde=ks,hb=Nde,xI=eV,Kde="Expected a function",Yde=Math.max,Qde=Math.min;function Zde(t,e,n){var r,i,o,a,s,l,c=0,u=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(Kde);e=xI(e)||0,Xde(n)&&(u=!!n.leading,f="maxWait"in n,o=f?Yde(xI(n.maxWait)||0,e):o,h="trailing"in n?!!n.trailing:h);function d(M){var b=r,A=i;return r=i=void 0,c=M,a=t.apply(A,b),a}function v(M){return c=M,s=setTimeout(p,e),u?d(M):a}function y(M){var b=M-l,A=M-c,E=e-b;return f?Qde(E,o-A):E}function g(M){var b=M-l,A=M-c;return l===void 0||b>=e||b<0||f&&A>=o}function p(){var M=hb();if(g(M))return x(M);s=setTimeout(p,y(M))}function x(M){return s=void 0,h&&r?d(M):(r=i=void 0,a)}function _(){s!==void 0&&clearTimeout(s),c=0,r=l=i=s=void 0}function T(){return s===void 0?a:x(hb())}function w(){var M=hb(),b=g(M);if(r=arguments,i=this,l=M,b){if(s===void 0)return v(l);if(f)return clearTimeout(s),s=setTimeout(p,e),d(l)}return s===void 0&&(s=setTimeout(p,e)),a}return w.cancel=_,w.flush=T,w}var Jde=Zde,epe=Jde,tpe=ks,npe="Expected a function";function rpe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(npe);return tpe(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),epe(t,e,{leading:r,maxWait:e,trailing:i})}var ipe=rpe;const tV=Ft(ipe);function Kd(t){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kd(t)}function bI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bI(Object(n),!0).forEach(function(r){ope(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ope(t,e,n){return e=ape(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ape(t){var e=spe(t,"string");return Kd(e)=="symbol"?e:e+""}function spe(t,e){if(Kd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lpe(t,e){return hpe(t)||fpe(t,e)||upe(t,e)||cpe()}function cpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function upe(t,e){if(t){if(typeof t=="string")return wI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wI(t,e)}}function wI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fpe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function hpe(t){if(Array.isArray(t))return t}var Xu=V.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=t.width,a=o===void 0?"100%":o,s=t.height,l=s===void 0?"100%":s,c=t.minWidth,u=c===void 0?0:c,f=t.minHeight,h=t.maxHeight,d=t.children,v=t.debounce,y=v===void 0?0:v,g=t.id,p=t.className,x=t.onResize,_=t.style,T=_===void 0?{}:_,w=V.useRef(null),M=V.useRef();M.current=x,V.useImperativeHandle(e,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var b=V.useState({containerWidth:i.width,containerHeight:i.height}),A=lpe(b,2),E=A[0],P=A[1],R=V.useCallback(function(O,D){P(function(L){var W=Math.round(O),$=Math.round(D);return L.containerWidth===W&&L.containerHeight===$?L:{containerWidth:W,containerHeight:$}})},[]);V.useEffect(function(){var O=function(X){var K,z=X[0].contentRect,q=z.width,ee=z.height;R(q,ee),(K=M.current)===null||K===void 0||K.call(M,q,ee)};y>0&&(O=tV(O,y,{trailing:!0,leading:!1}));var D=new ResizeObserver(O),L=w.current.getBoundingClientRect(),W=L.width,$=L.height;return R(W,$),D.observe(w.current),function(){D.disconnect()}},[R,y]);var N=V.useMemo(function(){var O=E.containerWidth,D=E.containerHeight;if(O<0||D<0)return null;ao(yl(a)||yl(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),ao(!n||n>0,"The aspect(%s) must be greater than zero.",n);var L=yl(a)?O:a,W=yl(l)?D:l;n&&n>0&&(L?W=L/n:W&&(L=W*n),h&&W>h&&(W=h)),ao(L>0||W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,L,W,a,l,u,f,n);var $=!Array.isArray(d)&&fa(d.type).endsWith("Chart");return G.Children.map(d,function(B){return G.isValidElement(B)?V.cloneElement(B,dg({width:L,height:W},$?{style:dg({height:"100%",width:"100%",maxHeight:W,maxWidth:L},B.props.style)}:{})):B})},[n,d,l,h,f,u,E,a]);return G.createElement("div",{id:g?"".concat(g):void 0,className:_t("recharts-responsive-container",p),style:dg(dg({},T),{},{width:a,height:l,minWidth:u,minHeight:f,maxHeight:h}),ref:w},N)}),Yd=function(e){return null};Yd.displayName="Cell";function Qd(t){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qd(t)}function SI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SI(Object(n),!0).forEach(function(r){dpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dpe(t,e,n){return e=ppe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ppe(t){var e=mpe(t,"string");return Qd(e)=="symbol"?e:e+""}function mpe(t,e){if(Qd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ic={widthCache:{},cacheCount:0},gpe=2e3,vpe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},EI="recharts_measurement_span";function ype(t){var e=Lw({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var ld=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||so.isSsr)return{width:0,height:0};var r=ype(n),i=JSON.stringify({text:e,copyStyle:r});if(Ic.widthCache[i])return Ic.widthCache[i];try{var o=document.getElementById(EI);o||(o=document.createElement("span"),o.setAttribute("id",EI),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=Lw(Lw({},vpe),r);Object.assign(o.style,a),o.textContent="".concat(e);var s=o.getBoundingClientRect(),l={width:s.width,height:s.height};return Ic.widthCache[i]=l,++Ic.cacheCount>gpe&&(Ic.cacheCount=0,Ic.widthCache={}),l}catch{return{width:0,height:0}}},_pe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Zd(t){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zd(t)}function Qv(t,e){return Spe(t)||wpe(t,e)||bpe(t,e)||xpe()}function xpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bpe(t,e){if(t){if(typeof t=="string")return TI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TI(t,e)}}function TI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wpe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Spe(t){if(Array.isArray(t))return t}function Epe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ape(r.key),r)}}function Tpe(t,e,n){return e&&AI(t.prototype,e),n&&AI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ape(t){var e=Mpe(t,"string");return Zd(e)=="symbol"?e:e+""}function Mpe(t,e){if(Zd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var MI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,PI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ppe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Cpe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,nV={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Rpe=Object.keys(nV),cu="NaN";function Ope(t,e){return t*nV[e]}var pg=function(){function t(e,n){Epe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!Ppe.test(n)&&(this.num=NaN,this.unit=""),Rpe.includes(n)&&(this.num=Ope(e,n),this.unit="px")}return Tpe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Cpe.exec(n))!==null&&r!==void 0?r:[],o=Qv(i,3),a=o[1],s=o[2];return new t(parseFloat(a),s??"")}}])}();function rV(t){if(t.includes(cu))return cu;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=MI.exec(e))!==null&&n!==void 0?n:[],i=Qv(r,4),o=i[1],a=i[2],s=i[3],l=pg.parse(o??""),c=pg.parse(s??""),u=a==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return cu;e=e.replace(MI,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=PI.exec(e))!==null&&f!==void 0?f:[],d=Qv(h,4),v=d[1],y=d[2],g=d[3],p=pg.parse(v??""),x=pg.parse(g??""),_=y==="+"?p.add(x):p.subtract(x);if(_.isNaN())return cu;e=e.replace(PI,_.toString())}return e}var CI=/\(([^()]*)\)/;function Ipe(t){for(var e=t;e.includes("(");){var n=CI.exec(e),r=Qv(n,2),i=r[1];e=e.replace(CI,rV(i))}return e}function Npe(t){var e=t.replace(/\s+/g,"");return e=Ipe(e),e=rV(e),e}function Dpe(t){try{return Npe(t)}catch{return cu}}function db(t){var e=Dpe(t.slice(5,-1));return e===cu?"":e}var Lpe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],kpe=["dx","dy","angle","className","breakAll"];function kw(){return kw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kw.apply(this,arguments)}function RI(t,e){if(t==null)return{};var n=jpe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function OI(t,e){return Bpe(t)||Vpe(t,e)||Fpe(t,e)||Upe()}function Upe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fpe(t,e){if(t){if(typeof t=="string")return II(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return II(t,e)}}function II(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Vpe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Bpe(t){if(Array.isArray(t))return t}var iV=/[ \f\n\r\t\v\u2028\u2029]+/,oV=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var o=[];ft(n)||(r?o=n.toString().split(""):o=n.toString().split(iV));var a=o.map(function(l){return{word:l,width:ld(l,i).width}}),s=r?0:ld(" ",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}},$pe=function(e,n,r,i,o){var a=e.maxLines,s=e.children,l=e.style,c=e.breakAll,u=Ae(a),f=s,h=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce(function(W,$){var B=$.word,X=$.width,K=W[W.length-1];if(K&&(i==null||o||K.width+X+r<Number(i)))K.words.push(B),K.width+=X+r;else{var z={words:[B],width:X};W.push(z)}return W},[])},d=h(n),v=function(L){return L.reduce(function(W,$){return W.width>$.width?W:$})};if(!u)return d;for(var y="…",g=function(L){var W=f.slice(0,L),$=oV({breakAll:c,style:l,children:W+y}).wordsWithComputedWidth,B=h($),X=B.length>a||v(B).width>Number(i);return[X,B]},p=0,x=f.length-1,_=0,T;p<=x&&_<=f.length-1;){var w=Math.floor((p+x)/2),M=w-1,b=g(M),A=OI(b,2),E=A[0],P=A[1],R=g(w),N=OI(R,1),O=N[0];if(!E&&!O&&(p=w+1),E&&O&&(x=w-1),!E&&O){T=P;break}_++}return T||d},NI=function(e){var n=ft(e)?[]:e.toString().split(iV);return[{words:n}]},zpe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,o=e.style,a=e.breakAll,s=e.maxLines;if((n||r)&&!so.isSsr){var l,c,u=oV({breakAll:a,children:i,style:o});if(u){var f=u.wordsWithComputedWidth,h=u.spaceWidth;l=f,c=h}else return NI(i);return $pe({breakAll:a,children:i,maxLines:s,style:o},l,c,n,r)}return NI(i)},DI="#808080",$l=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.lineHeight,s=a===void 0?"1em":a,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,f=u===void 0?!1:u,h=e.textAnchor,d=h===void 0?"start":h,v=e.verticalAnchor,y=v===void 0?"end":v,g=e.fill,p=g===void 0?DI:g,x=RI(e,Lpe),_=V.useMemo(function(){return zpe({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:f,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,f,x.style,x.width]),T=x.dx,w=x.dy,M=x.angle,b=x.className,A=x.breakAll,E=RI(x,kpe);if(!Vn(r)||!Vn(o))return null;var P=r+(Ae(T)?T:0),R=o+(Ae(w)?w:0),N;switch(y){case"start":N=db("calc(".concat(c,")"));break;case"middle":N=db("calc(".concat((_.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:N=db("calc(".concat(_.length-1," * -").concat(s,")"));break}var O=[];if(f){var D=_[0].width,L=x.width;O.push("scale(".concat((Ae(L)?L/D:1)/D,")"))}return M&&O.push("rotate(".concat(M,", ").concat(P,", ").concat(R,")")),O.length&&(E.transform=O.join(" ")),G.createElement("text",kw({},Ke(E,!0),{x:P,y:R,className:_t("recharts-text",b),textAnchor:d,fill:p.includes("url")?DI:p}),_.map(function(W,$){var B=W.words.join(A?"":" ");return G.createElement("tspan",{x:P,dy:$===0?N:s,key:"".concat(B,"-").concat($)},B)}))};function ms(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Hpe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function vA(t){let e,n,r;t.length!==2?(e=ms,n=(s,l)=>ms(t(s),l),r=(s,l)=>t(s)-l):(e=t===ms||t===Hpe?t:Gpe,n=t,r=t);function i(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(s[f],l)<0?c=f+1:u=f}while(c<u)}return c}function o(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(s[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function a(s,l,c=0,u=s.length){const f=i(s,l,c,u-1);return f>c&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:a,right:o}}function Gpe(){return 0}function aV(t){return t===null?NaN:+t}function*Wpe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const qpe=vA(ms),Yp=qpe.right;vA(aV).center;class LI extends Map{constructor(e,n=Ype){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(kI(this,e))}has(e){return super.has(kI(this,e))}set(e,n){return super.set(Xpe(this,e),n)}delete(e){return super.delete(Kpe(this,e))}}function kI({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Xpe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Kpe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Ype(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Qpe(t=ms){if(t===ms)return sV;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function sV(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Zpe=Math.sqrt(50),Jpe=Math.sqrt(10),eme=Math.sqrt(2);function Zv(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Zpe?10:o>=Jpe?5:o>=eme?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/a,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?Zv(t,e,n*2):[s,l,c]}function jw(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?Zv(e,t,n):Zv(t,e,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let c=0;c<s;++c)l[c]=(o-c)/-a;else for(let c=0;c<s;++c)l[c]=(o-c)*a;else if(a<0)for(let c=0;c<s;++c)l[c]=(i+c)/-a;else for(let c=0;c<s;++c)l[c]=(i+c)*a;return l}function Uw(t,e,n){return e=+e,t=+t,n=+n,Zv(t,e,n)[2]}function Fw(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Uw(e,t,n):Uw(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function jI(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function UI(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function lV(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?sV:Qpe(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),d=Math.max(n,Math.floor(e-c*f/l+h)),v=Math.min(r,Math.floor(e+(l-c)*f/l+h));lV(t,e,d,v,i)}const o=t[e];let a=n,s=r;for(Th(t,n,e),i(t[r],o)>0&&Th(t,n,r);a<s;){for(Th(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}i(t[n],o)===0?Th(t,n,s):(++s,Th(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Th(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function tme(t,e,n){if(t=Float64Array.from(Wpe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return UI(t);if(e>=1)return jI(t);var r,i=(r-1)*e,o=Math.floor(i),a=jI(lV(t,o).subarray(0,o+1)),s=UI(t.subarray(o+1));return a+(s-a)*(i-o)}}function nme(t,e,n=aV){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}}function rme(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Bi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Oa(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Vw=Symbol("implicit");function yA(){var t=new LI,e=[],n=[],r=Vw;function i(o){let a=t.get(o);if(a===void 0){if(r!==Vw)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new LI;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return yA(e,n).unknown(r)},Bi.apply(i,arguments),i}function Jd(){var t=yA().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,s=!1,l=0,c=0,u=.5;delete t.unknown;function f(){var h=e().length,d=i<r,v=d?i:r,y=d?r:i;o=(y-v)/Math.max(1,h-l+c*2),s&&(o=Math.floor(o)),v+=(y-v-o*(h-l))*u,a=o*(1-l),s&&(v=Math.round(v),a=Math.round(a));var g=rme(h).map(function(p){return v+o*p});return n(d?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,f()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(h){return arguments.length?(s=!!h,f()):s},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),f()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},t.copy=function(){return Jd(e(),[r,i]).round(s).paddingInner(l).paddingOuter(c).align(u)},Bi.apply(f(),arguments)}function cV(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return cV(e())},t}function cd(){return cV(Jd.apply(null,arguments).paddingInner(1))}function _A(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function uV(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Qp(){}var ep=.7,Jv=1/ep,Eu="\\s*([+-]?\\d+)\\s*",tp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ime=/^#([0-9a-f]{3,8})$/,ome=new RegExp(`^rgb\\(${Eu},${Eu},${Eu}\\)$`),ame=new RegExp(`^rgb\\(${Mo},${Mo},${Mo}\\)$`),sme=new RegExp(`^rgba\\(${Eu},${Eu},${Eu},${tp}\\)$`),lme=new RegExp(`^rgba\\(${Mo},${Mo},${Mo},${tp}\\)$`),cme=new RegExp(`^hsl\\(${tp},${Mo},${Mo}\\)$`),ume=new RegExp(`^hsla\\(${tp},${Mo},${Mo},${tp}\\)$`),FI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_A(Qp,np,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:VI,formatHex:VI,formatHex8:fme,formatHsl:hme,formatRgb:BI,toString:BI});function VI(){return this.rgb().formatHex()}function fme(){return this.rgb().formatHex8()}function hme(){return fV(this).formatHsl()}function BI(){return this.rgb().formatRgb()}function np(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ime.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?$I(e):n===3?new qr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?mg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?mg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ome.exec(t))?new qr(e[1],e[2],e[3],1):(e=ame.exec(t))?new qr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=sme.exec(t))?mg(e[1],e[2],e[3],e[4]):(e=lme.exec(t))?mg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=cme.exec(t))?GI(e[1],e[2]/100,e[3]/100,1):(e=ume.exec(t))?GI(e[1],e[2]/100,e[3]/100,e[4]):FI.hasOwnProperty(t)?$I(FI[t]):t==="transparent"?new qr(NaN,NaN,NaN,0):null}function $I(t){return new qr(t>>16&255,t>>8&255,t&255,1)}function mg(t,e,n,r){return r<=0&&(t=e=n=NaN),new qr(t,e,n,r)}function dme(t){return t instanceof Qp||(t=np(t)),t?(t=t.rgb(),new qr(t.r,t.g,t.b,t.opacity)):new qr}function Bw(t,e,n,r){return arguments.length===1?dme(t):new qr(t,e,n,r??1)}function qr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}_A(qr,Bw,uV(Qp,{brighter(t){return t=t==null?Jv:Math.pow(Jv,t),new qr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ep:Math.pow(ep,t),new qr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new qr(Rl(this.r),Rl(this.g),Rl(this.b),ey(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zI,formatHex:zI,formatHex8:pme,formatRgb:HI,toString:HI}));function zI(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}`}function pme(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}${_l((isNaN(this.opacity)?1:this.opacity)*255)}`}function HI(){const t=ey(this.opacity);return`${t===1?"rgb(":"rgba("}${Rl(this.r)}, ${Rl(this.g)}, ${Rl(this.b)}${t===1?")":`, ${t})`}`}function ey(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Rl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _l(t){return t=Rl(t),(t<16?"0":"")+t.toString(16)}function GI(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new no(t,e,n,r)}function fV(t){if(t instanceof no)return new no(t.h,t.s,t.l,t.opacity);if(t instanceof Qp||(t=np(t)),!t)return new no;if(t instanceof no)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new no(a,s,l,t.opacity)}function mme(t,e,n,r){return arguments.length===1?fV(t):new no(t,e,n,r??1)}function no(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}_A(no,mme,uV(Qp,{brighter(t){return t=t==null?Jv:Math.pow(Jv,t),new no(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ep:Math.pow(ep,t),new no(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new qr(pb(t>=240?t-240:t+120,i,r),pb(t,i,r),pb(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new no(WI(this.h),gg(this.s),gg(this.l),ey(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ey(this.opacity);return`${t===1?"hsl(":"hsla("}${WI(this.h)}, ${gg(this.s)*100}%, ${gg(this.l)*100}%${t===1?")":`, ${t})`}`}}));function WI(t){return t=(t||0)%360,t<0?t+360:t}function gg(t){return Math.max(0,Math.min(1,t||0))}function pb(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const xA=t=>()=>t;function gme(t,e){return function(n){return t+n*e}}function vme(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function yme(t){return(t=+t)==1?hV:function(e,n){return n-e?vme(e,n,t):xA(isNaN(e)?n:e)}}function hV(t,e){var n=e-t;return n?gme(t,n):xA(isNaN(t)?e:t)}const qI=function t(e){var n=yme(e);function r(i,o){var a=n((i=Bw(i)).r,(o=Bw(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),c=hV(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function _me(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function xme(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function bme(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Bf(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function wme(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ty(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Sme(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Bf(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var $w=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mb=new RegExp($w.source,"g");function Eme(t){return function(){return t}}function Tme(t){return function(e){return t(e)+""}}function Ame(t,e){var n=$w.lastIndex=mb.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(t=t+"",e=e+"";(r=$w.exec(t))&&(i=mb.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:ty(r,i)})),n=mb.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?Tme(l[0].x):Eme(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)s[(f=l[u]).i]=f.x(c);return s.join("")})}function Bf(t,e){var n=typeof e,r;return e==null||n==="boolean"?xA(e):(n==="number"?ty:n==="string"?(r=np(e))?(e=r,qI):Ame:e instanceof np?qI:e instanceof Date?wme:xme(e)?_me:Array.isArray(e)?bme:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Sme:ty)(t,e)}function bA(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Mme(t,e){e===void 0&&(e=t,t=Bf);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function Pme(t){return function(){return t}}function ny(t){return+t}var XI=[0,1];function Ur(t){return t}function zw(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Pme(isNaN(e)?NaN:.5)}function Cme(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Rme(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=zw(i,r),o=n(a,o)):(r=zw(r,i),o=n(o,a)),function(s){return o(r(s))}}function Ome(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=zw(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var l=Yp(t,s,1,r)-1;return o[l](i[l](s))}}function Zp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Y0(){var t=XI,e=XI,n=Bf,r,i,o,a=Ur,s,l,c;function u(){var h=Math.min(t.length,e.length);return a!==Ur&&(a=Cme(t[0],t[h-1])),s=h>2?Ome:Rme,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?o:(l||(l=s(t.map(r),e,n)))(r(a(h)))}return f.invert=function(h){return a(i((c||(c=s(e,t.map(r),ty)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,ny),u()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=bA,u()},f.clamp=function(h){return arguments.length?(a=h?!0:Ur,u()):a!==Ur},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,d){return r=h,i=d,u()}}function wA(){return Y0()(Ur,Ur)}function Ime(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ry(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ku(t){return t=ry(Math.abs(t)),t?t[1]:NaN}function Nme(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function Dme(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Lme=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function rp(t){if(!(e=Lme.exec(t)))throw new Error("invalid format: "+t);var e;return new SA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}rp.prototype=SA.prototype;function SA(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}SA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kme(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var dV;function jme(t,e){var n=ry(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(dV=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ry(t,Math.max(0,e+o-1))[0]}function KI(t,e){var n=ry(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const YI={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ime,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>KI(t*100,e),r:KI,s:jme,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function QI(t){return t}var ZI=Array.prototype.map,JI=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ume(t){var e=t.grouping===void 0||t.thousands===void 0?QI:Nme(ZI.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?QI:Dme(ZI.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=rp(f);var h=f.fill,d=f.align,v=f.sign,y=f.symbol,g=f.zero,p=f.width,x=f.comma,_=f.precision,T=f.trim,w=f.type;w==="n"?(x=!0,w="g"):YI[w]||(_===void 0&&(_=12),T=!0,w="g"),(g||h==="0"&&d==="=")&&(g=!0,h="0",d="=");var M=y==="$"?n:y==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",b=y==="$"?r:/[%p]/.test(w)?a:"",A=YI[w],E=/[defgprs%]/.test(w);_=_===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function P(R){var N=M,O=b,D,L,W;if(w==="c")O=A(R)+O,R="";else{R=+R;var $=R<0||1/R<0;if(R=isNaN(R)?l:A(Math.abs(R),_),T&&(R=kme(R)),$&&+R==0&&v!=="+"&&($=!1),N=($?v==="("?v:s:v==="-"||v==="("?"":v)+N,O=(w==="s"?JI[8+dV/3]:"")+O+($&&v==="("?")":""),E){for(D=-1,L=R.length;++D<L;)if(W=R.charCodeAt(D),48>W||W>57){O=(W===46?i+R.slice(D+1):R.slice(D))+O,R=R.slice(0,D);break}}}x&&!g&&(R=e(R,1/0));var B=N.length+R.length+O.length,X=B<p?new Array(p-B+1).join(h):"";switch(x&&g&&(R=e(X+R,X.length?p-O.length:1/0),X=""),d){case"<":R=N+R+O+X;break;case"=":R=N+X+R+O;break;case"^":R=X.slice(0,B=X.length>>1)+N+R+O+X.slice(B);break;default:R=X+N+R+O;break}return o(R)}return P.toString=function(){return f+""},P}function u(f,h){var d=c((f=rp(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(Ku(h)/3)))*3,y=Math.pow(10,-v),g=JI[8+v/3];return function(p){return d(y*p)+g}}return{format:c,formatPrefix:u}}var vg,EA,pV;Fme({thousands:",",grouping:[3],currency:["$",""]});function Fme(t){return vg=Ume(t),EA=vg.format,pV=vg.formatPrefix,vg}function Vme(t){return Math.max(0,-Ku(Math.abs(t)))}function Bme(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ku(e)/3)))*3-Ku(Math.abs(t)))}function $me(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ku(e)-Ku(t))+1}function mV(t,e,n,r){var i=Fw(t,e,n),o;switch(r=rp(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Bme(i,a))&&(r.precision=o),pV(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=$me(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Vme(i))&&(r.precision=o-(r.type==="%")*2);break}}return EA(r)}function js(t){var e=t.domain;return t.ticks=function(n){var r=e();return jw(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return mV(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],l,c,u=10;for(s<a&&(c=a,a=s,s=c,c=i,i=o,o=c);u-- >0;){if(c=Uw(a,s,n),c===l)return r[i]=a,r[o]=s,e(r);if(c>0)a=Math.floor(a/c)*c,s=Math.ceil(s/c)*c;else if(c<0)a=Math.ceil(a*c)/c,s=Math.floor(s*c)/c;else break;l=c}return t},t}function iy(){var t=wA();return t.copy=function(){return Zp(t,iy())},Bi.apply(t,arguments),js(t)}function gV(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,ny),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return gV(t).unknown(e)},t=arguments.length?Array.from(t,ny):[0,1],js(n)}function vV(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function eN(t){return Math.log(t)}function tN(t){return Math.exp(t)}function zme(t){return-Math.log(-t)}function Hme(t){return-Math.exp(-t)}function Gme(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Wme(t){return t===10?Gme:t===Math.E?Math.exp:e=>Math.pow(t,e)}function qme(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function nN(t){return(e,n)=>-t(-e,n)}function TA(t){const e=t(eN,tN),n=e.domain;let r=10,i,o;function a(){return i=qme(r),o=Wme(r),n()[0]<0?(i=nN(i),o=nN(o),t(zme,Hme)):t(eN,tN),e}return e.base=function(s){return arguments.length?(r=+s,a()):r},e.domain=function(s){return arguments.length?(n(s),a()):n()},e.ticks=s=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=i(c),d=i(u),v,y;const g=s==null?10:+s;let p=[];if(!(r%1)&&d-h<g){if(h=Math.floor(h),d=Math.ceil(d),c>0){for(;h<=d;++h)for(v=1;v<r;++v)if(y=h<0?v/o(-h):v*o(h),!(y<c)){if(y>u)break;p.push(y)}}else for(;h<=d;++h)for(v=r-1;v>=1;--v)if(y=h>0?v/o(-h):v*o(h),!(y<c)){if(y>u)break;p.push(y)}p.length*2<g&&(p=jw(c,u,g))}else p=jw(h,d,Math.min(d-h,g)).map(o);return f?p.reverse():p},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=rp(l)).precision==null&&(l.trim=!0),l=EA(l)),s===1/0)return l;const c=Math.max(1,r*s/e.ticks().length);return u=>{let f=u/o(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},e.nice=()=>n(vV(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),e}function yV(){const t=TA(Y0()).domain([1,10]);return t.copy=()=>Zp(t,yV()).base(t.base()),Bi.apply(t,arguments),t}function rN(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function iN(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function AA(t){var e=1,n=t(rN(e),iN(e));return n.constant=function(r){return arguments.length?t(rN(e=+r),iN(e)):e},js(n)}function _V(){var t=AA(Y0());return t.copy=function(){return Zp(t,_V()).constant(t.constant())},Bi.apply(t,arguments)}function oN(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Xme(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Kme(t){return t<0?-t*t:t*t}function MA(t){var e=t(Ur,Ur),n=1;function r(){return n===1?t(Ur,Ur):n===.5?t(Xme,Kme):t(oN(n),oN(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},js(e)}function PA(){var t=MA(Y0());return t.copy=function(){return Zp(t,PA()).exponent(t.exponent())},Bi.apply(t,arguments),t}function Yme(){return PA.apply(null,arguments).exponent(.5)}function aN(t){return Math.sign(t)*t*t}function Qme(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function xV(){var t=wA(),e=[0,1],n=!1,r;function i(o){var a=Qme(t(o));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(o){return t.invert(aN(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,ny)).map(aN)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return xV(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Bi.apply(i,arguments),js(i)}function bV(){var t=[],e=[],n=[],r;function i(){var a=0,s=Math.max(1,e.length);for(n=new Array(s-1);++a<s;)n[a-1]=nme(t,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:e[Yp(n,a)]}return o.invertExtent=function(a){var s=e.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let s of a)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(ms),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return bV().domain(t).range(e).unknown(r)},Bi.apply(o,arguments)}function wV(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function a(l){return l!=null&&l<=l?i[Yp(r,l,0,n)]:o}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,s()):[t,e]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(o=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return wV().domain([t,e]).range(i).unknown(o)},Bi.apply(js(a),arguments)}function SV(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[Yp(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return SV().domain(t).range(e).unknown(n)},Bi.apply(i,arguments)}const gb=new Date,vb=new Date;function Gn(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const l=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;let c;do l.push(c=new Date(+o)),e(o,s),t(o);while(c<o&&o<a);return l},i.filter=o=>Gn(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(gb.setTime(+o),vb.setTime(+a),t(gb),t(vb),Math.floor(n(gb,vb))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const oy=Gn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);oy.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Gn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):oy);oy.range;const ra=1e3,Ii=ra*60,ia=Ii*60,ba=ia*24,CA=ba*7,sN=ba*30,yb=ba*365,xl=Gn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ra)},(t,e)=>(e-t)/ra,t=>t.getUTCSeconds());xl.range;const RA=Gn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ra)},(t,e)=>{t.setTime(+t+e*Ii)},(t,e)=>(e-t)/Ii,t=>t.getMinutes());RA.range;const OA=Gn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ii)},(t,e)=>(e-t)/Ii,t=>t.getUTCMinutes());OA.range;const IA=Gn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ra-t.getMinutes()*Ii)},(t,e)=>{t.setTime(+t+e*ia)},(t,e)=>(e-t)/ia,t=>t.getHours());IA.range;const NA=Gn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ia)},(t,e)=>(e-t)/ia,t=>t.getUTCHours());NA.range;const Jp=Gn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ii)/ba,t=>t.getDate()-1);Jp.range;const Q0=Gn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ba,t=>t.getUTCDate()-1);Q0.range;const EV=Gn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ba,t=>Math.floor(t/ba));EV.range;function ec(t){return Gn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ii)/CA)}const Z0=ec(0),ay=ec(1),Zme=ec(2),Jme=ec(3),Yu=ec(4),ege=ec(5),tge=ec(6);Z0.range;ay.range;Zme.range;Jme.range;Yu.range;ege.range;tge.range;function tc(t){return Gn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/CA)}const J0=tc(0),sy=tc(1),nge=tc(2),rge=tc(3),Qu=tc(4),ige=tc(5),oge=tc(6);J0.range;sy.range;nge.range;rge.range;Qu.range;ige.range;oge.range;const DA=Gn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());DA.range;const LA=Gn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());LA.range;const wa=Gn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());wa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Gn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});wa.range;const Sa=Gn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Sa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Gn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Sa.range;function TV(t,e,n,r,i,o){const a=[[xl,1,ra],[xl,5,5*ra],[xl,15,15*ra],[xl,30,30*ra],[o,1,Ii],[o,5,5*Ii],[o,15,15*Ii],[o,30,30*Ii],[i,1,ia],[i,3,3*ia],[i,6,6*ia],[i,12,12*ia],[r,1,ba],[r,2,2*ba],[n,1,CA],[e,1,sN],[e,3,3*sN],[t,1,yb]];function s(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const d=f&&typeof f.range=="function"?f:l(c,u,f),v=d?d.range(c,+u+1):[];return h?v.reverse():v}function l(c,u,f){const h=Math.abs(u-c)/f,d=vA(([,,g])=>g).right(a,h);if(d===a.length)return t.every(Fw(c/yb,u/yb,f));if(d===0)return oy.every(Math.max(Fw(c,u,f),1));const[v,y]=a[h/a[d-1][2]<a[d][2]/h?d-1:d];return v.every(y)}return[s,l]}const[age,sge]=TV(Sa,LA,J0,EV,NA,OA),[lge,cge]=TV(wa,DA,Z0,Jp,IA,RA);function _b(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function xb(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ah(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function uge(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,c=Mh(i),u=Ph(i),f=Mh(o),h=Ph(o),d=Mh(a),v=Ph(a),y=Mh(s),g=Ph(s),p=Mh(l),x=Ph(l),_={a:$,A:B,b:X,B:K,c:null,d:dN,e:dN,f:Nge,g:zge,G:Gge,H:Rge,I:Oge,j:Ige,L:AV,m:Dge,M:Lge,p:z,q,Q:gN,s:vN,S:kge,u:jge,U:Uge,V:Fge,w:Vge,W:Bge,x:null,X:null,y:$ge,Y:Hge,Z:Wge,"%":mN},T={a:ee,A:me,b:_e,B:Ne,c:null,d:pN,e:pN,f:Yge,g:ave,G:lve,H:qge,I:Xge,j:Kge,L:PV,m:Qge,M:Zge,p:We,q:Ue,Q:gN,s:vN,S:Jge,u:eve,U:tve,V:nve,w:rve,W:ive,x:null,X:null,y:ove,Y:sve,Z:cve,"%":mN},w={a:P,A:R,b:N,B:O,c:D,d:fN,e:fN,f:Age,g:uN,G:cN,H:hN,I:hN,j:wge,L:Tge,m:bge,M:Sge,p:E,q:xge,Q:Pge,s:Cge,S:Ege,u:mge,U:gge,V:vge,w:pge,W:yge,x:L,X:W,y:uN,Y:cN,Z:_ge,"%":Mge};_.x=M(n,_),_.X=M(r,_),_.c=M(e,_),T.x=M(n,T),T.X=M(r,T),T.c=M(e,T);function M(fe,Re){return function(Ee){var H=[],lt=-1,be=0,Le=fe.length,ke,mt,Ye;for(Ee instanceof Date||(Ee=new Date(+Ee));++lt<Le;)fe.charCodeAt(lt)===37&&(H.push(fe.slice(be,lt)),(mt=lN[ke=fe.charAt(++lt)])!=null?ke=fe.charAt(++lt):mt=ke==="e"?" ":"0",(Ye=Re[ke])&&(ke=Ye(Ee,mt)),H.push(ke),be=lt+1);return H.push(fe.slice(be,lt)),H.join("")}}function b(fe,Re){return function(Ee){var H=Ah(1900,void 0,1),lt=A(H,fe,Ee+="",0),be,Le;if(lt!=Ee.length)return null;if("Q"in H)return new Date(H.Q);if("s"in H)return new Date(H.s*1e3+("L"in H?H.L:0));if(Re&&!("Z"in H)&&(H.Z=0),"p"in H&&(H.H=H.H%12+H.p*12),H.m===void 0&&(H.m="q"in H?H.q:0),"V"in H){if(H.V<1||H.V>53)return null;"w"in H||(H.w=1),"Z"in H?(be=xb(Ah(H.y,0,1)),Le=be.getUTCDay(),be=Le>4||Le===0?sy.ceil(be):sy(be),be=Q0.offset(be,(H.V-1)*7),H.y=be.getUTCFullYear(),H.m=be.getUTCMonth(),H.d=be.getUTCDate()+(H.w+6)%7):(be=_b(Ah(H.y,0,1)),Le=be.getDay(),be=Le>4||Le===0?ay.ceil(be):ay(be),be=Jp.offset(be,(H.V-1)*7),H.y=be.getFullYear(),H.m=be.getMonth(),H.d=be.getDate()+(H.w+6)%7)}else("W"in H||"U"in H)&&("w"in H||(H.w="u"in H?H.u%7:"W"in H?1:0),Le="Z"in H?xb(Ah(H.y,0,1)).getUTCDay():_b(Ah(H.y,0,1)).getDay(),H.m=0,H.d="W"in H?(H.w+6)%7+H.W*7-(Le+5)%7:H.w+H.U*7-(Le+6)%7);return"Z"in H?(H.H+=H.Z/100|0,H.M+=H.Z%100,xb(H)):_b(H)}}function A(fe,Re,Ee,H){for(var lt=0,be=Re.length,Le=Ee.length,ke,mt;lt<be;){if(H>=Le)return-1;if(ke=Re.charCodeAt(lt++),ke===37){if(ke=Re.charAt(lt++),mt=w[ke in lN?Re.charAt(lt++):ke],!mt||(H=mt(fe,Ee,H))<0)return-1}else if(ke!=Ee.charCodeAt(H++))return-1}return H}function E(fe,Re,Ee){var H=c.exec(Re.slice(Ee));return H?(fe.p=u.get(H[0].toLowerCase()),Ee+H[0].length):-1}function P(fe,Re,Ee){var H=d.exec(Re.slice(Ee));return H?(fe.w=v.get(H[0].toLowerCase()),Ee+H[0].length):-1}function R(fe,Re,Ee){var H=f.exec(Re.slice(Ee));return H?(fe.w=h.get(H[0].toLowerCase()),Ee+H[0].length):-1}function N(fe,Re,Ee){var H=p.exec(Re.slice(Ee));return H?(fe.m=x.get(H[0].toLowerCase()),Ee+H[0].length):-1}function O(fe,Re,Ee){var H=y.exec(Re.slice(Ee));return H?(fe.m=g.get(H[0].toLowerCase()),Ee+H[0].length):-1}function D(fe,Re,Ee){return A(fe,e,Re,Ee)}function L(fe,Re,Ee){return A(fe,n,Re,Ee)}function W(fe,Re,Ee){return A(fe,r,Re,Ee)}function $(fe){return a[fe.getDay()]}function B(fe){return o[fe.getDay()]}function X(fe){return l[fe.getMonth()]}function K(fe){return s[fe.getMonth()]}function z(fe){return i[+(fe.getHours()>=12)]}function q(fe){return 1+~~(fe.getMonth()/3)}function ee(fe){return a[fe.getUTCDay()]}function me(fe){return o[fe.getUTCDay()]}function _e(fe){return l[fe.getUTCMonth()]}function Ne(fe){return s[fe.getUTCMonth()]}function We(fe){return i[+(fe.getUTCHours()>=12)]}function Ue(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var Re=M(fe+="",_);return Re.toString=function(){return fe},Re},parse:function(fe){var Re=b(fe+="",!1);return Re.toString=function(){return fe},Re},utcFormat:function(fe){var Re=M(fe+="",T);return Re.toString=function(){return fe},Re},utcParse:function(fe){var Re=b(fe+="",!0);return Re.toString=function(){return fe},Re}}}var lN={"-":"",_:" ",0:"0"},er=/^\s*\d+/,fge=/^%/,hge=/[\\^$*+?|[\]().{}]/g;function Lt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function dge(t){return t.replace(hge,"\\$&")}function Mh(t){return new RegExp("^(?:"+t.map(dge).join("|")+")","i")}function Ph(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function pge(t,e,n){var r=er.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function mge(t,e,n){var r=er.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function gge(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function vge(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function yge(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function cN(t,e,n){var r=er.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function uN(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _ge(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function xge(t,e,n){var r=er.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function bge(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function fN(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function wge(t,e,n){var r=er.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function hN(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Sge(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ege(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Tge(t,e,n){var r=er.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Age(t,e,n){var r=er.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Mge(t,e,n){var r=fge.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Pge(t,e,n){var r=er.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Cge(t,e,n){var r=er.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function dN(t,e){return Lt(t.getDate(),e,2)}function Rge(t,e){return Lt(t.getHours(),e,2)}function Oge(t,e){return Lt(t.getHours()%12||12,e,2)}function Ige(t,e){return Lt(1+Jp.count(wa(t),t),e,3)}function AV(t,e){return Lt(t.getMilliseconds(),e,3)}function Nge(t,e){return AV(t,e)+"000"}function Dge(t,e){return Lt(t.getMonth()+1,e,2)}function Lge(t,e){return Lt(t.getMinutes(),e,2)}function kge(t,e){return Lt(t.getSeconds(),e,2)}function jge(t){var e=t.getDay();return e===0?7:e}function Uge(t,e){return Lt(Z0.count(wa(t)-1,t),e,2)}function MV(t){var e=t.getDay();return e>=4||e===0?Yu(t):Yu.ceil(t)}function Fge(t,e){return t=MV(t),Lt(Yu.count(wa(t),t)+(wa(t).getDay()===4),e,2)}function Vge(t){return t.getDay()}function Bge(t,e){return Lt(ay.count(wa(t)-1,t),e,2)}function $ge(t,e){return Lt(t.getFullYear()%100,e,2)}function zge(t,e){return t=MV(t),Lt(t.getFullYear()%100,e,2)}function Hge(t,e){return Lt(t.getFullYear()%1e4,e,4)}function Gge(t,e){var n=t.getDay();return t=n>=4||n===0?Yu(t):Yu.ceil(t),Lt(t.getFullYear()%1e4,e,4)}function Wge(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Lt(e/60|0,"0",2)+Lt(e%60,"0",2)}function pN(t,e){return Lt(t.getUTCDate(),e,2)}function qge(t,e){return Lt(t.getUTCHours(),e,2)}function Xge(t,e){return Lt(t.getUTCHours()%12||12,e,2)}function Kge(t,e){return Lt(1+Q0.count(Sa(t),t),e,3)}function PV(t,e){return Lt(t.getUTCMilliseconds(),e,3)}function Yge(t,e){return PV(t,e)+"000"}function Qge(t,e){return Lt(t.getUTCMonth()+1,e,2)}function Zge(t,e){return Lt(t.getUTCMinutes(),e,2)}function Jge(t,e){return Lt(t.getUTCSeconds(),e,2)}function eve(t){var e=t.getUTCDay();return e===0?7:e}function tve(t,e){return Lt(J0.count(Sa(t)-1,t),e,2)}function CV(t){var e=t.getUTCDay();return e>=4||e===0?Qu(t):Qu.ceil(t)}function nve(t,e){return t=CV(t),Lt(Qu.count(Sa(t),t)+(Sa(t).getUTCDay()===4),e,2)}function rve(t){return t.getUTCDay()}function ive(t,e){return Lt(sy.count(Sa(t)-1,t),e,2)}function ove(t,e){return Lt(t.getUTCFullYear()%100,e,2)}function ave(t,e){return t=CV(t),Lt(t.getUTCFullYear()%100,e,2)}function sve(t,e){return Lt(t.getUTCFullYear()%1e4,e,4)}function lve(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Qu(t):Qu.ceil(t),Lt(t.getUTCFullYear()%1e4,e,4)}function cve(){return"+0000"}function mN(){return"%"}function gN(t){return+t}function vN(t){return Math.floor(+t/1e3)}var Nc,RV,OV;uve({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function uve(t){return Nc=uge(t),RV=Nc.format,Nc.parse,OV=Nc.utcFormat,Nc.utcParse,Nc}function fve(t){return new Date(t)}function hve(t){return t instanceof Date?+t:+new Date(+t)}function kA(t,e,n,r,i,o,a,s,l,c){var u=wA(),f=u.invert,h=u.domain,d=c(".%L"),v=c(":%S"),y=c("%I:%M"),g=c("%I %p"),p=c("%a %d"),x=c("%b %d"),_=c("%B"),T=c("%Y");function w(M){return(l(M)<M?d:s(M)<M?v:a(M)<M?y:o(M)<M?g:r(M)<M?i(M)<M?p:x:n(M)<M?_:T)(M)}return u.invert=function(M){return new Date(f(M))},u.domain=function(M){return arguments.length?h(Array.from(M,hve)):h().map(fve)},u.ticks=function(M){var b=h();return t(b[0],b[b.length-1],M??10)},u.tickFormat=function(M,b){return b==null?w:c(b)},u.nice=function(M){var b=h();return(!M||typeof M.range!="function")&&(M=e(b[0],b[b.length-1],M??10)),M?h(vV(b,M)):u},u.copy=function(){return Zp(u,kA(t,e,n,r,i,o,a,s,l,c))},u}function dve(){return Bi.apply(kA(lge,cge,wa,DA,Z0,Jp,IA,RA,xl,RV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function pve(){return Bi.apply(kA(age,sge,Sa,LA,J0,Q0,NA,OA,xl,OV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function e_(){var t=0,e=1,n,r,i,o,a=Ur,s=!1,l;function c(f){return f==null||isNaN(f=+f)?l:a(i===0?.5:(f=(o(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([t,e]=f,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(f){return arguments.length?(s=!!f,c):s},c.interpolator=function(f){return arguments.length?(a=f,c):a};function u(f){return function(h){var d,v;return arguments.length?([d,v]=h,a=f(d,v),c):[a(0),a(1)]}}return c.range=u(Bf),c.rangeRound=u(bA),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return o=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),c}}function Us(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function IV(){var t=js(e_()(Ur));return t.copy=function(){return Us(t,IV())},Oa.apply(t,arguments)}function NV(){var t=TA(e_()).domain([1,10]);return t.copy=function(){return Us(t,NV()).base(t.base())},Oa.apply(t,arguments)}function DV(){var t=AA(e_());return t.copy=function(){return Us(t,DV()).constant(t.constant())},Oa.apply(t,arguments)}function jA(){var t=MA(e_());return t.copy=function(){return Us(t,jA()).exponent(t.exponent())},Oa.apply(t,arguments)}function mve(){return jA.apply(null,arguments).exponent(.5)}function LV(){var t=[],e=Ur;function n(r){if(r!=null&&!isNaN(r=+r))return e((Yp(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ms),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>tme(t,o/r))},n.copy=function(){return LV(e).domain(t)},Oa.apply(n,arguments)}function t_(){var t=0,e=.5,n=1,r=1,i,o,a,s,l,c=Ur,u,f=!1,h;function d(y){return isNaN(y=+y)?h:(y=.5+((y=+u(y))-o)*(r*y<r*o?s:l),c(f?Math.max(0,Math.min(1,y)):y))}d.domain=function(y){return arguments.length?([t,e,n]=y,i=u(t=+t),o=u(e=+e),a=u(n=+n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,d):[t,e,n]},d.clamp=function(y){return arguments.length?(f=!!y,d):f},d.interpolator=function(y){return arguments.length?(c=y,d):c};function v(y){return function(g){var p,x,_;return arguments.length?([p,x,_]=g,c=Mme(y,[p,x,_]),d):[c(0),c(.5),c(1)]}}return d.range=v(Bf),d.rangeRound=v(bA),d.unknown=function(y){return arguments.length?(h=y,d):h},function(y){return u=y,i=y(t),o=y(e),a=y(n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,d}}function kV(){var t=js(t_()(Ur));return t.copy=function(){return Us(t,kV())},Oa.apply(t,arguments)}function jV(){var t=TA(t_()).domain([.1,1,10]);return t.copy=function(){return Us(t,jV()).base(t.base())},Oa.apply(t,arguments)}function UV(){var t=AA(t_());return t.copy=function(){return Us(t,UV()).constant(t.constant())},Oa.apply(t,arguments)}function UA(){var t=MA(t_());return t.copy=function(){return Us(t,UA()).exponent(t.exponent())},Oa.apply(t,arguments)}function gve(){return UA.apply(null,arguments).exponent(.5)}const yN=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Jd,scaleDiverging:kV,scaleDivergingLog:jV,scaleDivergingPow:UA,scaleDivergingSqrt:gve,scaleDivergingSymlog:UV,scaleIdentity:gV,scaleImplicit:Vw,scaleLinear:iy,scaleLog:yV,scaleOrdinal:yA,scalePoint:cd,scalePow:PA,scaleQuantile:bV,scaleQuantize:wV,scaleRadial:xV,scaleSequential:IV,scaleSequentialLog:NV,scaleSequentialPow:jA,scaleSequentialQuantile:LV,scaleSequentialSqrt:mve,scaleSequentialSymlog:DV,scaleSqrt:Yme,scaleSymlog:_V,scaleThreshold:SV,scaleTime:dve,scaleUtc:pve,tickFormat:mV},Symbol.toStringTag,{value:"Module"}));var vve=If;function yve(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(a!=null&&(s===void 0?a===a&&!vve(a):n(a,s)))var s=a,l=o}return l}var n_=yve;function _ve(t,e){return t>e}var FV=_ve,xve=n_,bve=FV,wve=Vf;function Sve(t){return t&&t.length?xve(t,wve,bve):void 0}var Eve=Sve;const ts=Ft(Eve);function Tve(t,e){return t<e}var VV=Tve,Ave=n_,Mve=VV,Pve=Vf;function Cve(t){return t&&t.length?Ave(t,Pve,Mve):void 0}var Rve=Cve;const r_=Ft(Rve);var Ove=ZT,Ive=Uo,Nve=X4,Dve=Zr;function Lve(t,e){var n=Dve(t)?Ove:Nve;return n(t,Ive(e))}var kve=Lve,jve=W4,Uve=kve;function Fve(t,e){return jve(Uve(t,e),1)}var Vve=Fve;const Bve=Ft(Vve);var $ve=dA;function zve(t,e){return $ve(t,e)}var Hve=zve;const zl=Ft(Hve);var $f=1e9,Gve={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},VA,cn=!0,Fi="[DecimalError] ",Ol=Fi+"Invalid argument: ",FA=Fi+"Exponent out of range: ",zf=Math.floor,sl=Math.pow,Wve=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,li,Xn=1e7,rn=7,BV=9007199254740991,ly=zf(BV/rn),ze={};ze.absoluteValue=ze.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ze.comparedTo=ze.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};ze.decimalPlaces=ze.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*rn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};ze.dividedBy=ze.div=function(t){return da(this,new this.constructor(t))};ze.dividedToIntegerBy=ze.idiv=function(t){var e=this,n=e.constructor;return qt(da(e,new n(t),0,1),n.precision)};ze.equals=ze.eq=function(t){return!this.cmp(t)};ze.exponent=function(){return Nn(this)};ze.greaterThan=ze.gt=function(t){return this.cmp(t)>0};ze.greaterThanOrEqualTo=ze.gte=function(t){return this.cmp(t)>=0};ze.isInteger=ze.isint=function(){return this.e>this.d.length-2};ze.isNegative=ze.isneg=function(){return this.s<0};ze.isPositive=ze.ispos=function(){return this.s>0};ze.isZero=function(){return this.s===0};ze.lessThan=ze.lt=function(t){return this.cmp(t)<0};ze.lessThanOrEqualTo=ze.lte=function(t){return this.cmp(t)<1};ze.logarithm=ze.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(li))throw Error(Fi+"NaN");if(n.s<1)throw Error(Fi+(n.s?"NaN":"-Infinity"));return n.eq(li)?new r(0):(cn=!1,e=da(ip(n,o),ip(t,o),o),cn=!0,qt(e,i))};ze.minus=ze.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?HV(e,t):$V(e,(t.s=-t.s,t))};ze.modulo=ze.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Fi+"NaN");return n.s?(cn=!1,e=da(n,t,0,1).times(t),cn=!0,n.minus(e)):qt(new r(n),i)};ze.naturalExponential=ze.exp=function(){return zV(this)};ze.naturalLogarithm=ze.ln=function(){return ip(this)};ze.negated=ze.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ze.plus=ze.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?$V(e,t):HV(e,(t.s=-t.s,t))};ze.precision=ze.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ol+t);if(e=Nn(i)+1,r=i.d.length-1,n=r*rn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};ze.squareRoot=ze.sqrt=function(){var t,e,n,r,i,o,a,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(Fi+"NaN")}for(t=Nn(s),cn=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=xo(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=zf((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=a=n+3;;)if(o=r,r=o.plus(da(s,o,a+2)).times(.5),xo(o.d).slice(0,a)===(e=xo(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(qt(o,n+1,0),o.times(o).eq(s)){r=o;break}}else if(e!="9999")break;a+=4}return cn=!0,qt(r,n)};ze.times=ze.mul=function(t){var e,n,r,i,o,a,s,l,c,u=this,f=u.constructor,h=u.d,d=(t=new f(t)).d;if(!u.s||!t.s)return new f(0);for(t.s*=u.s,n=u.e+t.e,l=h.length,c=d.length,l<c&&(o=h,h=d,d=o,a=l,l=c,c=a),o=[],a=l+c,r=a;r--;)o.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)s=o[i]+d[r]*h[i-r-1]+e,o[i--]=s%Xn|0,e=s/Xn|0;o[i]=(o[i]+e)%Xn|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,cn?qt(t,f.precision):t};ze.toDecimalPlaces=ze.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(No(t,0,$f),e===void 0?e=r.rounding:No(e,0,8),qt(n,t+Nn(n)+1,e))};ze.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Hl(r,!0):(No(t,0,$f),e===void 0?e=i.rounding:No(e,0,8),r=qt(new i(r),t+1,e),n=Hl(r,!0,t+1)),n};ze.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?Hl(i):(No(t,0,$f),e===void 0?e=o.rounding:No(e,0,8),r=qt(new o(i),t+Nn(i)+1,e),n=Hl(r.abs(),!1,t+Nn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};ze.toInteger=ze.toint=function(){var t=this,e=t.constructor;return qt(new e(t),Nn(t)+1,e.rounding)};ze.toNumber=function(){return+this};ze.toPower=ze.pow=function(t){var e,n,r,i,o,a,s=this,l=s.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(li);if(s=new l(s),!s.s){if(t.s<1)throw Error(Fi+"Infinity");return s}if(s.eq(li))return s;if(r=l.precision,t.eq(li))return qt(s,r);if(e=t.e,n=t.d.length-1,a=e>=n,o=s.s,a){if((n=u<0?-u:u)<=BV){for(i=new l(li),e=Math.ceil(r/rn+4),cn=!1;n%2&&(i=i.times(s),xN(i.d,e)),n=zf(n/2),n!==0;)s=s.times(s),xN(s.d,e);return cn=!0,t.s<0?new l(li).div(i):qt(i,r)}}else if(o<0)throw Error(Fi+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,s.s=1,cn=!1,i=t.times(ip(s,r+c)),cn=!0,i=zV(i),i.s=o,i};ze.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Nn(i),r=Hl(i,n<=o.toExpNeg||n>=o.toExpPos)):(No(t,1,$f),e===void 0?e=o.rounding:No(e,0,8),i=qt(new o(i),t,e),n=Nn(i),r=Hl(i,t<=n||n<=o.toExpNeg,t)),r};ze.toSignificantDigits=ze.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(No(t,1,$f),e===void 0?e=r.rounding:No(e,0,8)),qt(new r(n),t,e)};ze.toString=ze.valueOf=ze.val=ze.toJSON=ze[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Nn(t),n=t.constructor;return Hl(t,e<=n.toExpNeg||e>=n.toExpPos)};function $V(t,e){var n,r,i,o,a,s,l,c,u=t.constructor,f=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),cn?qt(e,f):e;if(l=t.d,c=e.d,a=t.e,i=e.e,l=l.slice(),o=a-i,o){for(o<0?(r=l,o=-o,s=c.length):(r=c,i=a,s=l.length),a=Math.ceil(f/rn),s=a>s?a+1:s+1,o>s&&(o=s,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(s=l.length,o=c.length,s-o<0&&(o=s,r=c,c=l,l=r),n=0;o;)n=(l[--o]=l[o]+c[o]+n)/Xn|0,l[o]%=Xn;for(n&&(l.unshift(n),++i),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=i,cn?qt(e,f):e}function No(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Ol+t)}function xo(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",n=rn-r.length,n&&(o+=qa(n)),o+=r;a=t[e],r=a+"",n=rn-r.length,n&&(o+=qa(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var da=function(){function t(r,i){var o,a=0,s=r.length;for(r=r.slice();s--;)o=r[s]*i+a,r[s]=o%Xn|0,a=o/Xn|0;return a&&r.unshift(a),r}function e(r,i,o,a){var s,l;if(o!=a)l=o>a?1:-1;else for(s=l=0;s<o;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function n(r,i,o){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*Xn+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,a){var s,l,c,u,f,h,d,v,y,g,p,x,_,T,w,M,b,A,E=r.constructor,P=r.s==i.s?1:-1,R=r.d,N=i.d;if(!r.s)return new E(r);if(!i.s)throw Error(Fi+"Division by zero");for(l=r.e-i.e,b=N.length,w=R.length,d=new E(P),v=d.d=[],c=0;N[c]==(R[c]||0);)++c;if(N[c]>(R[c]||0)&&--l,o==null?x=o=E.precision:a?x=o+(Nn(r)-Nn(i))+1:x=o,x<0)return new E(0);if(x=x/rn+2|0,c=0,b==1)for(u=0,N=N[0],x++;(c<w||u)&&x--;c++)_=u*Xn+(R[c]||0),v[c]=_/N|0,u=_%N|0;else{for(u=Xn/(N[0]+1)|0,u>1&&(N=t(N,u),R=t(R,u),b=N.length,w=R.length),T=b,y=R.slice(0,b),g=y.length;g<b;)y[g++]=0;A=N.slice(),A.unshift(0),M=N[0],N[1]>=Xn/2&&++M;do u=0,s=e(N,y,b,g),s<0?(p=y[0],b!=g&&(p=p*Xn+(y[1]||0)),u=p/M|0,u>1?(u>=Xn&&(u=Xn-1),f=t(N,u),h=f.length,g=y.length,s=e(f,y,h,g),s==1&&(u--,n(f,b<h?A:N,h))):(u==0&&(s=u=1),f=N.slice()),h=f.length,h<g&&f.unshift(0),n(y,f,g),s==-1&&(g=y.length,s=e(N,y,b,g),s<1&&(u++,n(y,b<g?A:N,g))),g=y.length):s===0&&(u++,y=[0]),v[c++]=u,s&&y[0]?y[g++]=R[T]||0:(y=[R[T]],g=1);while((T++<w||y[0]!==void 0)&&x--)}return v[0]||v.shift(),d.e=l,qt(d,a?o+Nn(d)+1:o)}}();function zV(t,e){var n,r,i,o,a,s,l=0,c=0,u=t.constructor,f=u.precision;if(Nn(t)>16)throw Error(FA+Nn(t));if(!t.s)return new u(li);for(e==null?(cn=!1,s=f):s=e,a=new u(.03125);t.abs().gte(.1);)t=t.times(a),c+=5;for(r=Math.log(sl(2,c))/Math.LN10*2+5|0,s+=r,n=i=o=new u(li),u.precision=s;;){if(i=qt(i.times(t),s),n=n.times(++l),a=o.plus(da(i,n,s)),xo(a.d).slice(0,s)===xo(o.d).slice(0,s)){for(;c--;)o=qt(o.times(o),s);return u.precision=f,e==null?(cn=!0,qt(o,f)):o}o=a}}function Nn(t){for(var e=t.e*rn,n=t.d[0];n>=10;n/=10)e++;return e}function bb(t,e,n){if(e>t.LN10.sd())throw cn=!0,n&&(t.precision=n),Error(Fi+"LN10 precision limit exceeded");return qt(new t(t.LN10),e)}function qa(t){for(var e="";t--;)e+="0";return e}function ip(t,e){var n,r,i,o,a,s,l,c,u,f=1,h=10,d=t,v=d.d,y=d.constructor,g=y.precision;if(d.s<1)throw Error(Fi+(d.s?"NaN":"-Infinity"));if(d.eq(li))return new y(0);if(e==null?(cn=!1,c=g):c=e,d.eq(10))return e==null&&(cn=!0),bb(y,c);if(c+=h,y.precision=c,n=xo(v),r=n.charAt(0),o=Nn(d),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)d=d.times(t),n=xo(d.d),r=n.charAt(0),f++;o=Nn(d),r>1?(d=new y("0."+n),o++):d=new y(r+"."+n.slice(1))}else return l=bb(y,c+2,g).times(o+""),d=ip(new y(r+"."+n.slice(1)),c-h).plus(l),y.precision=g,e==null?(cn=!0,qt(d,g)):d;for(s=a=d=da(d.minus(li),d.plus(li),c),u=qt(d.times(d),c),i=3;;){if(a=qt(a.times(u),c),l=s.plus(da(a,new y(i),c)),xo(l.d).slice(0,c)===xo(s.d).slice(0,c))return s=s.times(2),o!==0&&(s=s.plus(bb(y,c+2,g).times(o+""))),s=da(s,new y(f),c),y.precision=g,e==null?(cn=!0,qt(s,g)):s;s=l,i+=2}}function _N(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=zf(n/rn),t.d=[],r=(n+1)%rn,n<0&&(r+=rn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=rn;r<i;)t.d.push(+e.slice(r,r+=rn));e=e.slice(r),r=rn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),cn&&(t.e>ly||t.e<-ly))throw Error(FA+n)}else t.s=0,t.e=0,t.d=[0];return t}function qt(t,e,n){var r,i,o,a,s,l,c,u,f=t.d;for(a=1,o=f[0];o>=10;o/=10)a++;if(r=e-a,r<0)r+=rn,i=e,c=f[u=0];else{if(u=Math.ceil((r+1)/rn),o=f.length,u>=o)return t;for(c=o=f[u],a=1;o>=10;o/=10)a++;r%=rn,i=r-rn+a}if(n!==void 0&&(o=sl(10,a-i-1),s=c/o%10|0,l=e<0||f[u+1]!==void 0||c%o,l=n<4?(s||l)&&(n==0||n==(t.s<0?3:2)):s>5||s==5&&(n==4||l||n==6&&(r>0?i>0?c/sl(10,a-i):0:f[u-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return l?(o=Nn(t),f.length=1,e=e-o-1,f[0]=sl(10,(rn-e%rn)%rn),t.e=zf(-e/rn)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=u,o=1,u--):(f.length=u+1,o=sl(10,rn-r),f[u]=i>0?(c/sl(10,a-i)%sl(10,i)|0)*o:0),l)for(;;)if(u==0){(f[0]+=o)==Xn&&(f[0]=1,++t.e);break}else{if(f[u]+=o,f[u]!=Xn)break;f[u--]=0,o=1}for(r=f.length;f[--r]===0;)f.pop();if(cn&&(t.e>ly||t.e<-ly))throw Error(FA+Nn(t));return t}function HV(t,e){var n,r,i,o,a,s,l,c,u,f,h=t.constructor,d=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),cn?qt(e,d):e;if(l=t.d,f=e.d,r=e.e,c=t.e,l=l.slice(),a=c-r,a){for(u=a<0,u?(n=l,a=-a,s=f.length):(n=f,r=c,s=l.length),i=Math.max(Math.ceil(d/rn),s)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=l.length,s=f.length,u=i<s,u&&(s=i),i=0;i<s;i++)if(l[i]!=f[i]){u=l[i]<f[i];break}a=0}for(u&&(n=l,l=f,f=n,e.s=-e.s),s=l.length,i=f.length-s;i>0;--i)l[s++]=0;for(i=f.length;i>a;){if(l[--i]<f[i]){for(o=i;o&&l[--o]===0;)l[o]=Xn-1;--l[o],l[i]+=Xn}l[i]-=f[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,cn?qt(e,d):e):new h(0)}function Hl(t,e,n){var r,i=Nn(t),o=xo(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+qa(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+qa(-i-1)+o,n&&(r=n-a)>0&&(o+=qa(r))):i>=a?(o+=qa(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+qa(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=qa(r))),t.s<0?"-"+o:o}function xN(t,e){if(t.length>e)return t.length=e,!0}function GV(t){var e,n,r;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Ol+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return _N(a,o.toString())}else if(typeof o!="string")throw Error(Ol+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,Wve.test(o))_N(a,o);else throw Error(Ol+o)}if(i.prototype=ze,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=GV,i.config=i.set=qve,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function qve(t){if(!t||typeof t!="object")throw Error(Fi+"Object expected");var e,n,r,i=["precision",1,$f,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(zf(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Ol+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ol+n+": "+r);return this}var VA=GV(Gve);li=new VA(1);const Ht=VA;function Xve(t){return Zve(t)||Qve(t)||Yve(t)||Kve()}function Kve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yve(t,e){if(t){if(typeof t=="string")return Hw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hw(t,e)}}function Qve(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Zve(t){if(Array.isArray(t))return Hw(t)}function Hw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Jve=function(e){return e},WV={"@@functional/placeholder":!0},qV=function(e){return e===WV},bN=function(e){return function n(){return arguments.length===0||arguments.length===1&&qV(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},eye=function t(e,n){return e===1?n:bN(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter(function(s){return s!==WV}).length;return a>=e?n.apply(void 0,i):t(e-a,bN(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var u=i.map(function(f){return qV(f)?l.shift():f});return n.apply(void 0,Xve(u).concat(l))}))})},i_=function(e){return eye(e.length,e)},Gw=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},tye=i_(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),nye=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Jve;var i=n.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce(function(s,l){return l(s)},o.apply(void 0,arguments))}},Ww=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},XV=function(e){var n=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n&&o.every(function(s,l){return s===n[l]})||(n=o,r=e.apply(void 0,o)),r}};function rye(t){var e;return t===0?e=1:e=Math.floor(new Ht(t).abs().log(10).toNumber())+1,e}function iye(t,e,n){for(var r=new Ht(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var oye=i_(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),aye=i_(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),sye=i_(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const o_={rangeStep:iye,getDigitCount:rye,interpolateNumber:oye,uninterpolateNumber:aye,uninterpolateTruncation:sye};function qw(t){return uye(t)||cye(t)||KV(t)||lye()}function lye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cye(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function uye(t){if(Array.isArray(t))return Xw(t)}function op(t,e){return dye(t)||hye(t,e)||KV(t,e)||fye()}function fye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KV(t,e){if(t){if(typeof t=="string")return Xw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xw(t,e)}}function Xw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hye(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw o}}return n}}function dye(t){if(Array.isArray(t))return t}function YV(t){var e=op(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function QV(t,e,n){if(t.lte(0))return new Ht(0);var r=o_.getDigitCount(t.toNumber()),i=new Ht(10).pow(r),o=t.div(i),a=r!==1?.05:.1,s=new Ht(Math.ceil(o.div(a).toNumber())).add(n).mul(a),l=s.mul(i);return e?l:new Ht(Math.ceil(l))}function pye(t,e,n){var r=1,i=new Ht(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new Ht(10).pow(o_.getDigitCount(t)-1),i=new Ht(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Ht(Math.floor(t)))}else t===0?i=new Ht(Math.floor((e-1)/2)):n||(i=new Ht(Math.floor(t)));var a=Math.floor((e-1)/2),s=nye(tye(function(l){return i.add(new Ht(l-a).mul(r)).toNumber()}),Gw);return s(0,e)}function ZV(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Ht(0),tickMin:new Ht(0),tickMax:new Ht(0)};var o=QV(new Ht(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new Ht(0):(a=new Ht(t).add(e).div(2),a=a.sub(new Ht(a).mod(o)));var s=Math.ceil(a.sub(t).div(o).toNumber()),l=Math.ceil(new Ht(e).sub(a).div(o).toNumber()),c=s+l+1;return c>n?ZV(t,e,n,r,i+1):(c<n&&(l=e>0?l+(n-c):l,s=e>0?s:s+(n-c)),{step:o,tickMin:a.sub(new Ht(s).mul(o)),tickMax:a.add(new Ht(l).mul(o))})}function mye(t){var e=op(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),s=YV([n,r]),l=op(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var f=u===1/0?[c].concat(qw(Gw(0,i-1).map(function(){return 1/0}))):[].concat(qw(Gw(0,i-1).map(function(){return-1/0})),[u]);return n>r?Ww(f):f}if(c===u)return pye(c,i,o);var h=ZV(c,u,a,o),d=h.step,v=h.tickMin,y=h.tickMax,g=o_.rangeStep(v,y.add(new Ht(.1).mul(d)),d);return n>r?Ww(g):g}function gye(t,e){var n=op(t,2),r=n[0],i=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=YV([r,i]),s=op(a,2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var u=Math.max(e,2),f=QV(new Ht(c).sub(l).div(u-1),o,0),h=[].concat(qw(o_.rangeStep(new Ht(l),new Ht(c).sub(new Ht(.99).mul(f)),f)),[c]);return r>i?Ww(h):h}var vye=XV(mye),yye=XV(gye),_ye="Invariant failed";function Gl(t,e){throw new Error(_ye)}var xye=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Zu(t){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zu(t)}function cy(){return cy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cy.apply(this,arguments)}function bye(t,e){return Tye(t)||Eye(t,e)||Sye(t,e)||wye()}function wye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sye(t,e){if(t){if(typeof t=="string")return wN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wN(t,e)}}function wN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Eye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Tye(t){if(Array.isArray(t))return t}function Aye(t,e){if(t==null)return{};var n=Mye(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Mye(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Pye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tB(r.key),r)}}function Rye(t,e,n){return e&&Cye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Oye(t,e,n){return e=uy(e),Iye(t,JV()?Reflect.construct(e,n||[],uy(t).constructor):e.apply(t,n))}function Iye(t,e){if(e&&(Zu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nye(t)}function Nye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JV=function(){return!!t})()}function uy(t){return uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uy(t)}function Dye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kw(t,e)}function Kw(t,e){return Kw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Kw(t,e)}function eB(t,e,n){return e=tB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tB(t){var e=Lye(t,"string");return Zu(e)=="symbol"?e:e+""}function Lye(t,e){if(Zu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Zu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var em=function(t){function e(){return Pye(this,e),Oye(this,e,arguments)}return Dye(e,t),Rye(e,[{key:"render",value:function(){var r=this.props,i=r.offset,o=r.layout,a=r.width,s=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,f=r.yAxis,h=Aye(r,xye),d=Ke(h,!1);this.props.direction==="x"&&u.type!=="number"&&Gl();var v=l.map(function(y){var g=c(y,s),p=g.x,x=g.y,_=g.value,T=g.errorVal;if(!T)return null;var w=[],M,b;if(Array.isArray(T)){var A=bye(T,2);M=A[0],b=A[1]}else M=b=T;if(o==="vertical"){var E=u.scale,P=x+i,R=P+a,N=P-a,O=E(_-M),D=E(_+b);w.push({x1:D,y1:R,x2:D,y2:N}),w.push({x1:O,y1:P,x2:D,y2:P}),w.push({x1:O,y1:R,x2:O,y2:N})}else if(o==="horizontal"){var L=f.scale,W=p+i,$=W-a,B=W+a,X=L(_-M),K=L(_+b);w.push({x1:$,y1:K,x2:B,y2:K}),w.push({x1:W,y1:X,x2:W,y2:K}),w.push({x1:$,y1:X,x2:B,y2:X})}return G.createElement(St,cy({className:"recharts-errorBar",key:"bar-".concat(w.map(function(z){return"".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))},d),w.map(function(z){return G.createElement("line",cy({},z,{key:"line-".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))}))});return G.createElement(St,{className:"recharts-errorBars"},v)}}])}(G.Component);eB(em,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});eB(em,"displayName","ErrorBar");function ap(t){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ap(t)}function SN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SN(Object(n),!0).forEach(function(r){kye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kye(t,e,n){return e=jye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jye(t){var e=Uye(t,"string");return ap(e)=="symbol"?e:e+""}function Uye(t,e){if(ap(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nB=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=ai(n,ha);if(!a)return null;var s=ha.defaultProps,l=s!==void 0?Qs(Qs({},s),a.props):{},c;return a.props&&a.props.payload?c=a.props&&a.props.payload:o==="children"?c=(r||[]).reduce(function(u,f){var h=f.item,d=f.props,v=d.sectors||d.data||[];return u.concat(v.map(function(y){return{type:a.props.iconType||h.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):c=(r||[]).map(function(u){var f=u.item,h=f.type.defaultProps,d=h!==void 0?Qs(Qs({},h),f.props):{},v=d.dataKey,y=d.name,g=d.legendType,p=d.hide;return{inactive:p,dataKey:v,type:l.iconType||g||"square",color:BA(f),value:y||v,payload:d}}),Qs(Qs(Qs({},l),ha.getWithHeight(a,i)),{},{payload:c,item:a})};function sp(t){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sp(t)}function EN(t){return $ye(t)||Bye(t)||Vye(t)||Fye()}function Fye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vye(t,e){if(t){if(typeof t=="string")return Yw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yw(t,e)}}function Bye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $ye(t){if(Array.isArray(t))return Yw(t)}function Yw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function TN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TN(Object(n),!0).forEach(function(r){Tu(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tu(t,e,n){return e=zye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zye(t){var e=Hye(t,"string");return sp(e)=="symbol"?e:e+""}function Hye(t,e){if(sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sn(t,e,n){return ft(t)||ft(e)?n:Vn(e)?fi(t,e,n):ot(e)?e(t):n}function ud(t,e,n,r){var i=Bve(t,function(s){return Sn(s,e)});if(n==="number"){var o=i.filter(function(s){return Ae(s)||parseFloat(s)});return o.length?[r_(o),ts(o)]:[1/0,-1/0]}var a=r?i.filter(function(s){return!ft(s)}):i;return a.map(function(s){return Vn(s)||s instanceof Date?s:""})}var Gye=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,s=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(s<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,c=0;c<s;c++){var u=c>0?i[c-1].coordinate:i[s-1].coordinate,f=i[c].coordinate,h=c>=s-1?i[0].coordinate:i[c+1].coordinate,d=void 0;if(kr(f-u)!==kr(h-f)){var v=[];if(kr(h-f)===kr(l[1]-l[0])){d=h;var y=f+l[1]-l[0];v[0]=Math.min(y,(y+u)/2),v[1]=Math.max(y,(y+u)/2)}else{d=u;var g=h+l[1]-l[0];v[0]=Math.min(f,(g+f)/2),v[1]=Math.max(f,(g+f)/2)}var p=[Math.min(f,(d+f)/2),Math.max(f,(d+f)/2)];if(e>p[0]&&e<=p[1]||e>=v[0]&&e<=v[1]){a=i[c].index;break}}else{var x=Math.min(u,h),_=Math.max(u,h);if(e>(x+f)/2&&e<=(_+f)/2){a=i[c].index;break}}}else for(var T=0;T<s;T++)if(T===0&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T>0&&T<s-1&&e>(r[T].coordinate+r[T-1].coordinate)/2&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T===s-1&&e>(r[T].coordinate+r[T-1].coordinate)/2){a=r[T].index;break}return a},BA=function(e){var n,r=e,i=r.type.displayName,o=(n=e.type)!==null&&n!==void 0&&n.defaultProps?yn(yn({},e.type.defaultProps),e.props):e.props,a=o.stroke,s=o.fill,l;switch(i){case"Line":l=a;break;case"Area":case"Radar":l=a&&a!=="none"?a:s;break;default:l=s;break}return l},Wye=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var a={},s=Object.keys(o),l=0,c=s.length;l<c;l++)for(var u=o[s[l]].stackGroups,f=Object.keys(u),h=0,d=f.length;h<d;h++){var v=u[f[h]],y=v.items,g=v.cateAxisId,p=y.filter(function(b){return fa(b.type).indexOf("Bar")>=0});if(p&&p.length){var x=p[0].type.defaultProps,_=x!==void 0?yn(yn({},x),p[0].props):p[0].props,T=_.barSize,w=_[g];a[w]||(a[w]=[]);var M=ft(T)?n:T;a[w].push({item:p[0],stackList:p.slice(1),barSize:ft(M)?void 0:jr(M,r,0)})}}return a},qye=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,s=e.maxBarSize,l=a.length;if(l<1)return null;var c=jr(n,i,0,!0),u,f=[];if(a[0].barSize===+a[0].barSize){var h=!1,d=i/l,v=a.reduce(function(T,w){return T+w.barSize||0},0);v+=(l-1)*c,v>=i&&(v-=(l-1)*c,c=0),v>=i&&d>0&&(h=!0,d*=.9,v=l*d);var y=(i-v)/2>>0,g={offset:y-c,size:0};u=a.reduce(function(T,w){var M={item:w.item,position:{offset:g.offset+g.size+c,size:h?d:w.barSize}},b=[].concat(EN(T),[M]);return g=b[b.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(A){b.push({item:A,position:g})}),b},f)}else{var p=jr(r,i,0,!0);i-2*p-(l-1)*c<=0&&(c=0);var x=(i-2*p-(l-1)*c)/l;x>1&&(x>>=0);var _=s===+s?Math.min(x,s):x;u=a.reduce(function(T,w,M){var b=[].concat(EN(T),[{item:w.item,position:{offset:p+(x+c)*M+(x-_)/2,size:_}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(A){b.push({item:A,position:b[b.length-1].position})}),b},f)}return u},Xye=function(e,n,r,i){var o=r.children,a=r.width,s=r.margin,l=a-(s.left||0)-(s.right||0),c=nB({children:o,legendWidth:l});if(c){var u=i||{},f=u.width,h=u.height,d=c.align,v=c.verticalAlign,y=c.layout;if((y==="vertical"||y==="horizontal"&&v==="middle")&&d!=="center"&&Ae(e[d]))return yn(yn({},e),{},Tu({},d,e[d]+(f||0)));if((y==="horizontal"||y==="vertical"&&d==="center")&&v!=="middle"&&Ae(e[v]))return yn(yn({},e),{},Tu({},v,e[v]+(h||0)))}return e},Kye=function(e,n,r){return ft(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},rB=function(e,n,r,i,o){var a=n.props.children,s=hi(a,em).filter(function(c){return Kye(i,o,c.props.direction)});if(s&&s.length){var l=s.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var f=Sn(u,r);if(ft(f))return c;var h=Array.isArray(f)?[r_(f),ts(f)]:[f,f],d=l.reduce(function(v,y){var g=Sn(u,y,0),p=h[0]-Math.abs(Array.isArray(g)?g[0]:g),x=h[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(p,v[0]),Math.max(x,v[1])]},[1/0,-1/0]);return[Math.min(d[0],c[0]),Math.max(d[1],c[1])]},[1/0,-1/0])}return null},Yye=function(e,n,r,i,o){var a=n.map(function(s){return rB(e,s,r,o,i)}).filter(function(s){return!ft(s)});return a&&a.length?a.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},iB=function(e,n,r,i,o){var a=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&rB(e,l,c,i)||ud(e,c,r,o)});if(r==="number")return a.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var s={};return a.reduce(function(l,c){for(var u=0,f=c.length;u<f;u++)s[c[u]]||(s[c[u]]=!0,l.push(c[u]));return l},[])},oB=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},aB=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var o,a,s=e.map(function(l){return l.coordinate===n&&(o=!0),l.coordinate===r&&(a=!0),l.coordinate});return o||s.push(n),a||s.push(r),s},oa=function(e,n,r){if(!e)return null;var i=e.scale,o=e.duplicateDomain,a=e.type,s=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?kr(s[0]-s[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(f){var h=o?o.indexOf(f):f;return{coordinate:i(h)+c,value:f,offset:c}});return u.filter(function(f){return!jf(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:i(f)+c,value:f,index:h,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+c,value:f,offset:c}}):i.domain().map(function(f,h){return{coordinate:i(f)+c,value:o?o[f]:f,index:h,offset:c}})},wb=new WeakMap,yg=function(e,n){if(typeof n!="function")return e;wb.has(e)||wb.set(e,new WeakMap);var r=wb.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},sB=function(e,n,r){var i=e.scale,o=e.type,a=e.layout,s=e.axisType;if(i==="auto")return a==="radial"&&s==="radiusAxis"?{scale:Jd(),realScaleType:"band"}:a==="radial"&&s==="angleAxis"?{scale:iy(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:cd(),realScaleType:"point"}:o==="category"?{scale:Jd(),realScaleType:"band"}:{scale:iy(),realScaleType:"linear"};if(Xp(i)){var l="scale".concat(z0(i));return{scale:(yN[l]||cd)(),realScaleType:yN[l]?l:"point"}}return ot(i)?{scale:i}:{scale:cd(),realScaleType:"point"}},AN=1e-4,lB=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),o=Math.min(i[0],i[1])-AN,a=Math.max(i[0],i[1])+AN,s=e(n[0]),l=e(n[r-1]);(s<o||s>a||l<o||l>a)&&e.domain([n[0],n[r-1]])}},Qye=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Zye=function(e,n){if(!n||n.length!==2||!Ae(n[0])||!Ae(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),o=[e[0],e[1]];return(!Ae(e[0])||e[0]<r)&&(o[0]=r),(!Ae(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},Jye=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0,s=0;s<n;++s){var l=jf(e[s][r][1])?e[s][r][0]:e[s][r][1];l>=0?(e[s][r][0]=o,e[s][r][1]=o+l,o=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+l,a=e[s][r][1])}},e0e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0;a<n;++a){var s=jf(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=o,e[a][r][1]=o+s,o=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},t0e={sign:Jye,expand:xoe,none:zu,silhouette:boe,wiggle:woe,positive:e0e},n0e=function(e,n,r){var i=n.map(function(s){return s.props.dataKey}),o=t0e[r],a=_oe().keys(i).value(function(s,l){return+Sn(s,l,0)}).order(bw).offset(o);return a(e)},r0e=function(e,n,r,i,o,a){if(!e)return null;var s=a?n.reverse():n,l={},c=s.reduce(function(f,h){var d,v=(d=h.type)!==null&&d!==void 0&&d.defaultProps?yn(yn({},h.type.defaultProps),h.props):h.props,y=v.stackId,g=v.hide;if(g)return f;var p=v[r],x=f[p]||{hasStack:!1,stackGroups:{}};if(Vn(y)){var _=x.stackGroups[y]||{numericAxisId:r,cateAxisId:i,items:[]};_.items.push(h),x.hasStack=!0,x.stackGroups[y]=_}else x.stackGroups[Jl("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return yn(yn({},f),{},Tu({},p,x))},l),u={};return Object.keys(c).reduce(function(f,h){var d=c[h];if(d.hasStack){var v={};d.stackGroups=Object.keys(d.stackGroups).reduce(function(y,g){var p=d.stackGroups[g];return yn(yn({},y),{},Tu({},g,{numericAxisId:r,cateAxisId:i,items:p.items,stackedData:n0e(e,p.items,o)}))},v)}return yn(yn({},f),{},Tu({},h,d))},u)},cB=function(e,n){var r=n.realScaleType,i=n.type,o=n.tickCount,a=n.originalDomain,s=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=vye(c,o,s);return e.domain([r_(u),ts(u)]),{niceTicks:u}}if(o&&i==="number"){var f=e.domain(),h=yye(f,o,s);return{niceTicks:h}}return null};function fy(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,o=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!ft(i[e.dataKey])){var s=jv(n,"value",i[e.dataKey]);if(s)return s.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var l=Sn(i,ft(a)?e.dataKey:a);return ft(l)?null:e.scale(l)}var MN=function(e){var n=e.axis,r=e.ticks,i=e.offset,o=e.bandSize,a=e.entry,s=e.index;if(n.type==="category")return r[s]?r[s].coordinate+i:null;var l=Sn(a,n.dataKey,n.domain[s]);return ft(l)?null:n.scale(l)-o/2+i},i0e=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},o0e=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?yn(yn({},e.type.defaultProps),e.props):e.props,o=i.stackId;if(Vn(o)){var a=n[o];if(a){var s=a.items.indexOf(e);return s>=0?a.stackedData[s]:null}}return null},a0e=function(e){return e.reduce(function(n,r){return[r_(r.concat([n[0]]).filter(Ae)),ts(r.concat([n[1]]).filter(Ae))]},[1/0,-1/0])},uB=function(e,n,r){return Object.keys(e).reduce(function(i,o){var a=e[o],s=a.stackedData,l=s.reduce(function(c,u){var f=a0e(u.slice(n,r+1));return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},PN=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CN=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Qw=function(e,n,r){if(ot(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Ae(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(PN.test(e[0])){var o=+PN.exec(e[0])[1];i[0]=n[0]-o}else ot(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Ae(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(CN.test(e[1])){var a=+CN.exec(e[1])[1];i[1]=n[1]+a}else ot(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},hy=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var o=mA(n,function(f){return f.coordinate}),a=1/0,s=1,l=o.length;s<l;s++){var c=o[s],u=o[s-1];a=Math.min((c.coordinate||0)-(u.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},RN=function(e,n,r){return!e||!e.length||zl(e,fi(r,"type.defaultProps.domain"))?n:e},fB=function(e,n){var r=e.type.defaultProps?yn(yn({},e.type.defaultProps),e.props):e.props,i=r.dataKey,o=r.name,a=r.unit,s=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return yn(yn({},Ke(e,!1)),{},{dataKey:i,unit:a,formatter:s,name:o||i,color:BA(e),value:Sn(n,i),type:l,payload:n,chartType:c,hide:u})};function lp(t){"@babel/helpers - typeof";return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lp(t)}function ON(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ON(Object(n),!0).forEach(function(r){hB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ON(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hB(t,e,n){return e=s0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s0e(t){var e=l0e(t,"string");return lp(e)=="symbol"?e:e+""}function l0e(t,e){if(lp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c0e(t,e){return d0e(t)||h0e(t,e)||f0e(t,e)||u0e()}function u0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f0e(t,e){if(t){if(typeof t=="string")return IN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IN(t,e)}}function IN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function d0e(t){if(Array.isArray(t))return t}var dy=Math.PI/180,p0e=function(e){return e*180/Math.PI},Qt=function(e,n,r,i){return{x:e+Math.cos(-dy*i)*r,y:n+Math.sin(-dy*i)*r}},dB=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},m0e=function(e,n,r,i,o){var a=e.width,s=e.height,l=e.startAngle,c=e.endAngle,u=jr(e.cx,a,a/2),f=jr(e.cy,s,s/2),h=dB(a,s,r),d=jr(e.innerRadius,h,0),v=jr(e.outerRadius,h,h*.8),y=Object.keys(n);return y.reduce(function(g,p){var x=n[p],_=x.domain,T=x.reversed,w;if(ft(x.range))i==="angleAxis"?w=[l,c]:i==="radiusAxis"&&(w=[d,v]),T&&(w=[w[1],w[0]]);else{w=x.range;var M=w,b=c0e(M,2);l=b[0],c=b[1]}var A=sB(x,o),E=A.realScaleType,P=A.scale;P.domain(_).range(w),lB(P);var R=cB(P,Yo(Yo({},x),{},{realScaleType:E})),N=Yo(Yo(Yo({},x),R),{},{range:w,radius:v,realScaleType:E,scale:P,cx:u,cy:f,innerRadius:d,outerRadius:v,startAngle:l,endAngle:c});return Yo(Yo({},g),{},hB({},p,N))},{})},g0e=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-a,2))},v0e=function(e,n){var r=e.x,i=e.y,o=n.cx,a=n.cy,s=g0e({x:r,y:i},{x:o,y:a});if(s<=0)return{radius:s};var l=(r-o)/s,c=Math.acos(l);return i>a&&(c=2*Math.PI-c),{radius:s,angle:p0e(c),angleInRadian:c}},y0e=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360),a=Math.min(i,o);return{startAngle:n-a*360,endAngle:r-a*360}},_0e=function(e,n){var r=n.startAngle,i=n.endAngle,o=Math.floor(r/360),a=Math.floor(i/360),s=Math.min(o,a);return e+s*360},NN=function(e,n){var r=e.x,i=e.y,o=v0e({x:r,y:i},n),a=o.radius,s=o.angle,l=n.innerRadius,c=n.outerRadius;if(a<l||a>c)return!1;if(a===0)return!0;var u=y0e(n),f=u.startAngle,h=u.endAngle,d=s,v;if(f<=h){for(;d>h;)d-=360;for(;d<f;)d+=360;v=d>=f&&d<=h}else{for(;d>f;)d-=360;for(;d<h;)d+=360;v=d>=h&&d<=f}return v?Yo(Yo({},n),{},{radius:a,angle:_0e(d,n)}):null},pB=function(e){return!V.isValidElement(e)&&!ot(e)&&typeof e!="boolean"?e.className:""};function cp(t){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cp(t)}var x0e=["offset"];function b0e(t){return T0e(t)||E0e(t)||S0e(t)||w0e()}function w0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S0e(t,e){if(t){if(typeof t=="string")return Zw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zw(t,e)}}function E0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function T0e(t){if(Array.isArray(t))return Zw(t)}function Zw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A0e(t,e){if(t==null)return{};var n=M0e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function M0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function DN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ln(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DN(Object(n),!0).forEach(function(r){P0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P0e(t,e,n){return e=C0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C0e(t){var e=R0e(t,"string");return cp(e)=="symbol"?e:e+""}function R0e(t,e){if(cp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function up(){return up=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},up.apply(this,arguments)}var O0e=function(e){var n=e.value,r=e.formatter,i=ft(e.children)?n:e.children;return ot(r)?r(i):i},I0e=function(e,n){var r=kr(n-e),i=Math.min(Math.abs(n-e),360);return r*i},N0e=function(e,n,r){var i=e.position,o=e.viewBox,a=e.offset,s=e.className,l=o,c=l.cx,u=l.cy,f=l.innerRadius,h=l.outerRadius,d=l.startAngle,v=l.endAngle,y=l.clockWise,g=(f+h)/2,p=I0e(d,v),x=p>=0?1:-1,_,T;i==="insideStart"?(_=d+x*a,T=y):i==="insideEnd"?(_=v-x*a,T=!y):i==="end"&&(_=v+x*a,T=y),T=p<=0?T:!T;var w=Qt(c,u,g,_),M=Qt(c,u,g,_+(T?1:-1)*359),b="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(T?0:1,`,
    `).concat(M.x,",").concat(M.y),A=ft(e.id)?Jl("recharts-radial-line-"):e.id;return G.createElement("text",up({},r,{dominantBaseline:"central",className:_t("recharts-radial-bar-label",s)}),G.createElement("defs",null,G.createElement("path",{id:A,d:b})),G.createElement("textPath",{xlinkHref:"#".concat(A)},n))},D0e=function(e){var n=e.viewBox,r=e.offset,i=e.position,o=n,a=o.cx,s=o.cy,l=o.innerRadius,c=o.outerRadius,u=o.startAngle,f=o.endAngle,h=(u+f)/2;if(i==="outside"){var d=Qt(a,s,c+r,h),v=d.x,y=d.y;return{x:v,y,textAnchor:v>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var g=(l+c)/2,p=Qt(a,s,g,h),x=p.x,_=p.y;return{x,y:_,textAnchor:"middle",verticalAnchor:"middle"}},L0e=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,o=e.position,a=n,s=a.x,l=a.y,c=a.width,u=a.height,f=u>=0?1:-1,h=f*i,d=f>0?"end":"start",v=f>0?"start":"end",y=c>=0?1:-1,g=y*i,p=y>0?"end":"start",x=y>0?"start":"end";if(o==="top"){var _={x:s+c/2,y:l-f*i,textAnchor:"middle",verticalAnchor:d};return Ln(Ln({},_),r?{height:Math.max(l-r.y,0),width:c}:{})}if(o==="bottom"){var T={x:s+c/2,y:l+u+h,textAnchor:"middle",verticalAnchor:v};return Ln(Ln({},T),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(o==="left"){var w={x:s-g,y:l+u/2,textAnchor:p,verticalAnchor:"middle"};return Ln(Ln({},w),r?{width:Math.max(w.x-r.x,0),height:u}:{})}if(o==="right"){var M={x:s+c+g,y:l+u/2,textAnchor:x,verticalAnchor:"middle"};return Ln(Ln({},M),r?{width:Math.max(r.x+r.width-M.x,0),height:u}:{})}var b=r?{width:c,height:u}:{};return o==="insideLeft"?Ln({x:s+g,y:l+u/2,textAnchor:x,verticalAnchor:"middle"},b):o==="insideRight"?Ln({x:s+c-g,y:l+u/2,textAnchor:p,verticalAnchor:"middle"},b):o==="insideTop"?Ln({x:s+c/2,y:l+h,textAnchor:"middle",verticalAnchor:v},b):o==="insideBottom"?Ln({x:s+c/2,y:l+u-h,textAnchor:"middle",verticalAnchor:d},b):o==="insideTopLeft"?Ln({x:s+g,y:l+h,textAnchor:x,verticalAnchor:v},b):o==="insideTopRight"?Ln({x:s+c-g,y:l+h,textAnchor:p,verticalAnchor:v},b):o==="insideBottomLeft"?Ln({x:s+g,y:l+u-h,textAnchor:x,verticalAnchor:d},b):o==="insideBottomRight"?Ln({x:s+c-g,y:l+u-h,textAnchor:p,verticalAnchor:d},b):Nf(o)&&(Ae(o.x)||yl(o.x))&&(Ae(o.y)||yl(o.y))?Ln({x:s+jr(o.x,c),y:l+jr(o.y,u),textAnchor:"end",verticalAnchor:"end"},b):Ln({x:s+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},b)},k0e=function(e){return"cx"in e&&Ae(e.cx)};function Qn(t){var e=t.offset,n=e===void 0?5:e,r=A0e(t,x0e),i=Ln({offset:n},r),o=i.viewBox,a=i.position,s=i.value,l=i.children,c=i.content,u=i.className,f=u===void 0?"":u,h=i.textBreakAll;if(!o||ft(s)&&ft(l)&&!V.isValidElement(c)&&!ot(c))return null;if(V.isValidElement(c))return V.cloneElement(c,i);var d;if(ot(c)){if(d=V.createElement(c,i),V.isValidElement(d))return d}else d=O0e(i);var v=k0e(o),y=Ke(i,!0);if(v&&(a==="insideStart"||a==="insideEnd"||a==="end"))return N0e(i,d,y);var g=v?D0e(i):L0e(i);return G.createElement($l,up({className:_t("recharts-label",f)},y,g,{breakAll:h}),d)}Qn.displayName="Label";var mB=function(e){var n=e.cx,r=e.cy,i=e.angle,o=e.startAngle,a=e.endAngle,s=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,f=e.x,h=e.y,d=e.top,v=e.left,y=e.width,g=e.height,p=e.clockWise,x=e.labelViewBox;if(x)return x;if(Ae(y)&&Ae(g)){if(Ae(f)&&Ae(h))return{x:f,y:h,width:y,height:g};if(Ae(d)&&Ae(v))return{x:d,y:v,width:y,height:g}}return Ae(f)&&Ae(h)?{x:f,y:h,width:0,height:0}:Ae(n)&&Ae(r)?{cx:n,cy:r,startAngle:o||i||0,endAngle:a||i||0,innerRadius:c||0,outerRadius:u||l||s||0,clockWise:p}:e.viewBox?e.viewBox:{}},j0e=function(e,n){return e?e===!0?G.createElement(Qn,{key:"label-implicit",viewBox:n}):Vn(e)?G.createElement(Qn,{key:"label-implicit",viewBox:n,value:e}):V.isValidElement(e)?e.type===Qn?V.cloneElement(e,{key:"label-implicit",viewBox:n}):G.createElement(Qn,{key:"label-implicit",content:e,viewBox:n}):ot(e)?G.createElement(Qn,{key:"label-implicit",content:e,viewBox:n}):Nf(e)?G.createElement(Qn,up({viewBox:n},e,{key:"label-implicit"})):null:null},U0e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=mB(e),a=hi(i,Qn).map(function(l,c){return V.cloneElement(l,{viewBox:n||o,key:"label-".concat(c)})});if(!r)return a;var s=j0e(e.label,n||o);return[s].concat(b0e(a))};Qn.parseViewBox=mB;Qn.renderCallByParent=U0e;function F0e(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var V0e=F0e;const B0e=Ft(V0e);function fp(t){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fp(t)}var $0e=["valueAccessor"],z0e=["data","dataKey","clockWise","id","textBreakAll"];function H0e(t){return X0e(t)||q0e(t)||W0e(t)||G0e()}function G0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W0e(t,e){if(t){if(typeof t=="string")return Jw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jw(t,e)}}function q0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function X0e(t){if(Array.isArray(t))return Jw(t)}function Jw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function py(){return py=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},py.apply(this,arguments)}function LN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LN(Object(n),!0).forEach(function(r){K0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function K0e(t,e,n){return e=Y0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y0e(t){var e=Q0e(t,"string");return fp(e)=="symbol"?e:e+""}function Q0e(t,e){if(fp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jN(t,e){if(t==null)return{};var n=Z0e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Z0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var J0e=function(e){return Array.isArray(e.value)?B0e(e.value):e.value};function Po(t){var e=t.valueAccessor,n=e===void 0?J0e:e,r=jN(t,$0e),i=r.data,o=r.dataKey,a=r.clockWise,s=r.id,l=r.textBreakAll,c=jN(r,z0e);return!i||!i.length?null:G.createElement(St,{className:"recharts-label-list"},i.map(function(u,f){var h=ft(o)?n(u,f):Sn(u&&u.payload,o),d=ft(s)?{}:{id:"".concat(s,"-").concat(f)};return G.createElement(Qn,py({},Ke(u,!0),c,d,{parentViewBox:u.parentViewBox,value:h,textBreakAll:l,viewBox:Qn.parseViewBox(ft(a)?u:kN(kN({},u),{},{clockWise:a})),key:"label-".concat(f),index:f}))}))}Po.displayName="LabelList";function e_e(t,e){return t?t===!0?G.createElement(Po,{key:"labelList-implicit",data:e}):G.isValidElement(t)||ot(t)?G.createElement(Po,{key:"labelList-implicit",data:e,content:t}):Nf(t)?G.createElement(Po,py({data:e},t,{key:"labelList-implicit"})):null:null}function t_e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=hi(r,Po).map(function(a,s){return V.cloneElement(a,{data:e,key:"labelList-".concat(s)})});if(!n)return i;var o=e_e(t.label,e);return[o].concat(H0e(i))}Po.renderCallByParent=t_e;function hp(t){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hp(t)}function eS(){return eS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eS.apply(this,arguments)}function UN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UN(Object(n),!0).forEach(function(r){n_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n_e(t,e,n){return e=r_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r_e(t){var e=i_e(t,"string");return hp(e)=="symbol"?e:e+""}function i_e(t,e){if(hp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var o_e=function(e,n){var r=kr(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},_g=function(e){var n=e.cx,r=e.cy,i=e.radius,o=e.angle,a=e.sign,s=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(s?1:-1)+i,f=Math.asin(l/u)/dy,h=c?o:o+a*f,d=Qt(n,r,u,h),v=Qt(n,r,i,h),y=c?o-a*f:o,g=Qt(n,r,u*Math.cos(f*dy),y);return{center:d,circleTangency:v,lineTangency:g,theta:f}},gB=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.startAngle,s=e.endAngle,l=o_e(a,s),c=a+l,u=Qt(n,r,o,a),f=Qt(n,r,o,c),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>c),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var d=Qt(n,r,i,a),v=Qt(n,r,i,c);h+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=c),`,
            `).concat(d.x,",").concat(d.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},a_e=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,s=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,f=kr(u-c),h=_g({cx:n,cy:r,radius:o,angle:c,sign:f,cornerRadius:a,cornerIsExternal:l}),d=h.circleTangency,v=h.lineTangency,y=h.theta,g=_g({cx:n,cy:r,radius:o,angle:u,sign:-f,cornerRadius:a,cornerIsExternal:l}),p=g.circleTangency,x=g.lineTangency,_=g.theta,T=l?Math.abs(c-u):Math.abs(c-u)-y-_;if(T<0)return s?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):gB({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:c,endAngle:u});var w="M ".concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(d.x,",").concat(d.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(T>180),",").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
  `);if(i>0){var M=_g({cx:n,cy:r,radius:i,angle:c,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),b=M.circleTangency,A=M.lineTangency,E=M.theta,P=_g({cx:n,cy:r,radius:i,angle:u,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),R=P.circleTangency,N=P.lineTangency,O=P.theta,D=l?Math.abs(c-u):Math.abs(c-u)-E-O;if(D<0&&a===0)return"".concat(w,"L").concat(n,",").concat(r,"Z");w+="L".concat(N.x,",").concat(N.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(R.x,",").concat(R.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(D>180),",").concat(+(f>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,"Z")}else w+="L".concat(n,",").concat(r,"Z");return w},s_e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},vB=function(e){var n=FN(FN({},s_e),e),r=n.cx,i=n.cy,o=n.innerRadius,a=n.outerRadius,s=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,u=n.startAngle,f=n.endAngle,h=n.className;if(a<o||u===f)return null;var d=_t("recharts-sector",h),v=a-o,y=jr(s,v,0,!0),g;return y>0&&Math.abs(u-f)<360?g=a_e({cx:r,cy:i,innerRadius:o,outerRadius:a,cornerRadius:Math.min(y,v/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:f}):g=gB({cx:r,cy:i,innerRadius:o,outerRadius:a,startAngle:u,endAngle:f}),G.createElement("path",eS({},Ke(n,!0),{className:d,d:g,role:"img"}))};function dp(t){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dp(t)}function tS(){return tS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tS.apply(this,arguments)}function VN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VN(Object(n),!0).forEach(function(r){l_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l_e(t,e,n){return e=c_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c_e(t){var e=u_e(t,"string");return dp(e)=="symbol"?e:e+""}function u_e(t,e){if(dp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $N={curveBasisClosed:loe,curveBasisOpen:coe,curveBasis:soe,curveBumpX:qie,curveBumpY:Xie,curveLinearClosed:uoe,curveLinear:G0,curveMonotoneX:foe,curveMonotoneY:hoe,curveNatural:doe,curveStep:poe,curveStepAfter:goe,curveStepBefore:moe},xg=function(e){return e.x===+e.x&&e.y===+e.y},Ch=function(e){return e.x},Rh=function(e){return e.y},f_e=function(e,n){if(ot(e))return e;var r="curve".concat(z0(e));return(r==="curveMonotone"||r==="curveBump")&&n?$N["".concat(r).concat(n==="vertical"?"Y":"X")]:$N[r]||G0},h_e=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,o=i===void 0?[]:i,a=e.baseLine,s=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=f_e(r,s),f=c?o.filter(function(y){return xg(y)}):o,h;if(Array.isArray(a)){var d=c?a.filter(function(y){return xg(y)}):a,v=f.map(function(y,g){return BN(BN({},y),{},{base:d[g]})});return s==="vertical"?h=ug().y(Rh).x1(Ch).x0(function(y){return y.base.x}):h=ug().x(Ch).y1(Rh).y0(function(y){return y.base.y}),h.defined(xg).curve(u),h(v)}return s==="vertical"&&Ae(a)?h=ug().y(Rh).x1(Ch).x0(a):Ae(a)?h=ug().x(Ch).y1(Rh).y0(a):h=f4().x(Ch).y(Rh),h.defined(xg).curve(u),h(f)},Il=function(e){var n=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?h_e(e):i;return G.createElement("path",tS({},Ke(e,!1),Uv(e),{className:_t("recharts-curve",n),d:a,ref:o}))},d_e=Object.getOwnPropertyNames,p_e=Object.getOwnPropertySymbols,m_e=Object.prototype.hasOwnProperty;function zN(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function bg(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var o=i.cache,a=o.get(n),s=o.get(r);if(a&&s)return a===r&&s===n;o.set(n,r),o.set(r,n);var l=t(n,r,i);return o.delete(n),o.delete(r),l}}function HN(t){return d_e(t).concat(p_e(t))}var yB=Object.hasOwn||function(t,e){return m_e.call(t,e)};function Hf(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var _B="_owner",GN=Object.getOwnPropertyDescriptor,WN=Object.keys;function g_e(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function v_e(t,e){return Hf(t.getTime(),e.getTime())}function qN(t,e,n){if(t.size!==e.size)return!1;for(var r={},i=t.entries(),o=0,a,s;(a=i.next())&&!a.done;){for(var l=e.entries(),c=!1,u=0;(s=l.next())&&!s.done;){var f=a.value,h=f[0],d=f[1],v=s.value,y=v[0],g=v[1];!c&&!r[u]&&(c=n.equals(h,y,o,u,t,e,n)&&n.equals(d,g,h,y,t,e,n))&&(r[u]=!0),u++}if(!c)return!1;o++}return!0}function y_e(t,e,n){var r=WN(t),i=r.length;if(WN(e).length!==i)return!1;for(var o;i-- >0;)if(o=r[i],o===_B&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!yB(e,o)||!n.equals(t[o],e[o],o,o,t,e,n))return!1;return!0}function Oh(t,e,n){var r=HN(t),i=r.length;if(HN(e).length!==i)return!1;for(var o,a,s;i-- >0;)if(o=r[i],o===_B&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!yB(e,o)||!n.equals(t[o],e[o],o,o,t,e,n)||(a=GN(t,o),s=GN(e,o),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable)))return!1;return!0}function __e(t,e){return Hf(t.valueOf(),e.valueOf())}function x_e(t,e){return t.source===e.source&&t.flags===e.flags}function XN(t,e,n){if(t.size!==e.size)return!1;for(var r={},i=t.values(),o,a;(o=i.next())&&!o.done;){for(var s=e.values(),l=!1,c=0;(a=s.next())&&!a.done;)!l&&!r[c]&&(l=n.equals(o.value,a.value,o.value,a.value,t,e,n))&&(r[c]=!0),c++;if(!l)return!1}return!0}function b_e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}var w_e="[object Arguments]",S_e="[object Boolean]",E_e="[object Date]",T_e="[object Map]",A_e="[object Number]",M_e="[object Object]",P_e="[object RegExp]",C_e="[object Set]",R_e="[object String]",O_e=Array.isArray,KN=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,YN=Object.assign,I_e=Object.prototype.toString.call.bind(Object.prototype.toString);function N_e(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,a=t.areRegExpsEqual,s=t.areSetsEqual,l=t.areTypedArraysEqual;return function(u,f,h){if(u===f)return!0;if(u==null||f==null||typeof u!="object"||typeof f!="object")return u!==u&&f!==f;var d=u.constructor;if(d!==f.constructor)return!1;if(d===Object)return i(u,f,h);if(O_e(u))return e(u,f,h);if(KN!=null&&KN(u))return l(u,f,h);if(d===Date)return n(u,f,h);if(d===RegExp)return a(u,f,h);if(d===Map)return r(u,f,h);if(d===Set)return s(u,f,h);var v=I_e(u);return v===E_e?n(u,f,h):v===P_e?a(u,f,h):v===T_e?r(u,f,h):v===C_e?s(u,f,h):v===M_e?typeof u.then!="function"&&typeof f.then!="function"&&i(u,f,h):v===w_e?i(u,f,h):v===S_e||v===A_e||v===R_e?o(u,f,h):!1}}function D_e(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Oh:g_e,areDatesEqual:v_e,areMapsEqual:r?zN(qN,Oh):qN,areObjectsEqual:r?Oh:y_e,arePrimitiveWrappersEqual:__e,areRegExpsEqual:x_e,areSetsEqual:r?zN(XN,Oh):XN,areTypedArraysEqual:r?Oh:b_e};if(n&&(i=YN({},i,n(i))),e){var o=bg(i.areArraysEqual),a=bg(i.areMapsEqual),s=bg(i.areObjectsEqual),l=bg(i.areSetsEqual);i=YN({},i,{areArraysEqual:o,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:l})}return i}function L_e(t){return function(e,n,r,i,o,a,s){return t(e,n,s)}}function k_e(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,o=t.strict;if(r)return function(l,c){var u=r(),f=u.cache,h=f===void 0?e?new WeakMap:void 0:f,d=u.meta;return n(l,c,{cache:h,equals:i,meta:d,strict:o})};if(e)return function(l,c){return n(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var a={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,c){return n(l,c,a)}}var j_e=Fs();Fs({strict:!0});Fs({circular:!0});Fs({circular:!0,strict:!0});Fs({createInternalComparator:function(){return Hf}});Fs({strict:!0,createInternalComparator:function(){return Hf}});Fs({circular:!0,createInternalComparator:function(){return Hf}});Fs({circular:!0,createInternalComparator:function(){return Hf},strict:!0});function Fs(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,o=t.strict,a=o===void 0?!1:o,s=D_e(t),l=N_e(s),c=r?r(l):L_e(l);return k_e({circular:n,comparator:l,createState:i,equals:c,strict:a})}function U_e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function QN(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(o){n<0&&(n=o),o-n>e?(t(o),n=-1):U_e(i)};requestAnimationFrame(r)}function nS(t){"@babel/helpers - typeof";return nS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nS(t)}function F_e(t){return z_e(t)||$_e(t)||B_e(t)||V_e()}function V_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B_e(t,e){if(t){if(typeof t=="string")return ZN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZN(t,e)}}function ZN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function z_e(t){if(Array.isArray(t))return t}function H_e(){var t={},e=function(){return null},n=!1,r=function i(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var a=o,s=F_e(a),l=s[0],c=s.slice(1);if(typeof l=="number"){QN(i.bind(null,c),l);return}i(l),QN(i.bind(null,c));return}nS(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function pp(t){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(t)}function JN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JN(Object(n),!0).forEach(function(r){xB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xB(t,e,n){return e=G_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G_e(t){var e=W_e(t,"string");return pp(e)==="symbol"?e:String(e)}function W_e(t,e){if(pp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(pp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var q_e=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},X_e=function(e){return e},K_e=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},fd=function(e,n){return Object.keys(n).reduce(function(r,i){return eD(eD({},r),{},xB({},i,e(i,n[i])))},{})},tD=function(e,n,r){return e.map(function(i){return"".concat(K_e(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Y_e(t,e){return J_e(t)||Z_e(t,e)||bB(t,e)||Q_e()}function Q_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z_e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function J_e(t){if(Array.isArray(t))return t}function exe(t){return rxe(t)||nxe(t)||bB(t)||txe()}function txe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bB(t,e){if(t){if(typeof t=="string")return rS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rS(t,e)}}function nxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rxe(t){if(Array.isArray(t))return rS(t)}function rS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var my=1e-4,wB=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},SB=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},nD=function(e,n){return function(r){var i=wB(e,n);return SB(i,r)}},ixe=function(e,n){return function(r){var i=wB(e,n),o=[].concat(exe(i.map(function(a,s){return a*s}).slice(1)),[0]);return SB(o,r)}},rD=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],a=n[2],s=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,o=0,a=1,s=1;break;case"ease":i=.25,o=.1,a=.25,s=1;break;case"ease-in":i=.42,o=0,a=1,s=1;break;case"ease-out":i=.42,o=0,a=.58,s=1;break;case"ease-in-out":i=0,o=0,a=.58,s=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=Y_e(c,4);i=u[0],o=u[1],a=u[2],s=u[3]}}}var f=nD(i,a),h=nD(o,s),d=ixe(i,a),v=function(p){return p>1?1:p<0?0:p},y=function(p){for(var x=p>1?1:p,_=x,T=0;T<8;++T){var w=f(_)-x,M=d(_);if(Math.abs(w-x)<my||M<my)return h(_);_=v(_-w/M)}return h(_)};return y.isStepper=!1,y},oxe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,o=i===void 0?8:i,a=e.dt,s=a===void 0?17:a,l=function(u,f,h){var d=-(u-f)*r,v=h*o,y=h+(d-v)*s/1e3,g=h*s/1e3+u;return Math.abs(g-f)<my&&Math.abs(y)<my?[f,0]:[g,y]};return l.isStepper=!0,l.dt=s,l},axe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return rD(i);case"spring":return oxe();default:if(i.split("(")[0]==="cubic-bezier")return rD(i)}return typeof i=="function"?i:null};function mp(t){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mp(t)}function iD(t){return cxe(t)||lxe(t)||EB(t)||sxe()}function sxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cxe(t){if(Array.isArray(t))return oS(t)}function oD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(n),!0).forEach(function(r){iS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iS(t,e,n){return e=uxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uxe(t){var e=fxe(t,"string");return mp(e)==="symbol"?e:String(e)}function fxe(t,e){if(mp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hxe(t,e){return mxe(t)||pxe(t,e)||EB(t,e)||dxe()}function dxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EB(t,e){if(t){if(typeof t=="string")return oS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oS(t,e)}}function oS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pxe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function mxe(t){if(Array.isArray(t))return t}var gy=function(e,n,r){return e+(n-e)*r},aS=function(e){var n=e.from,r=e.to;return n!==r},gxe=function t(e,n,r){var i=fd(function(o,a){if(aS(a)){var s=e(a.from,a.to,a.velocity),l=hxe(s,2),c=l[0],u=l[1];return rr(rr({},a),{},{from:c,velocity:u})}return a},n);return r<1?fd(function(o,a){return aS(a)?rr(rr({},a),{},{velocity:gy(a.velocity,i[o].velocity,r),from:gy(a.from,i[o].from,r)}):a},n):t(e,i,r-1)};const vxe=function(t,e,n,r,i){var o=q_e(t,e),a=o.reduce(function(g,p){return rr(rr({},g),{},iS({},p,[t[p],e[p]]))},{}),s=o.reduce(function(g,p){return rr(rr({},g),{},iS({},p,{from:t[p],velocity:0,to:e[p]}))},{}),l=-1,c,u,f=function(){return null},h=function(){return fd(function(p,x){return x.from},s)},d=function(){return!Object.values(s).filter(aS).length},v=function(p){c||(c=p);var x=p-c,_=x/n.dt;s=gxe(n,s,_),i(rr(rr(rr({},t),e),h())),c=p,d()||(l=requestAnimationFrame(f))},y=function(p){u||(u=p);var x=(p-u)/r,_=fd(function(w,M){return gy.apply(void 0,iD(M).concat([n(x)]))},a);if(i(rr(rr(rr({},t),e),_)),x<1)l=requestAnimationFrame(f);else{var T=fd(function(w,M){return gy.apply(void 0,iD(M).concat([n(1)]))},a);i(rr(rr(rr({},t),e),T))}};return f=n.isStepper?v:y,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function Ju(t){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ju(t)}var yxe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function _xe(t,e){if(t==null)return{};var n=xxe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xxe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Sb(t){return Exe(t)||Sxe(t)||wxe(t)||bxe()}function bxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wxe(t,e){if(t){if(typeof t=="string")return sS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sS(t,e)}}function Sxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Exe(t){if(Array.isArray(t))return sS(t)}function sS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aD(Object(n),!0).forEach(function(r){$h(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $h(t,e,n){return e=TB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Txe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Axe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TB(r.key),r)}}function Mxe(t,e,n){return e&&Axe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function TB(t){var e=Pxe(t,"string");return Ju(e)==="symbol"?e:String(e)}function Pxe(t,e){if(Ju(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ju(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lS(t,e)}function lS(t,e){return lS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},lS(t,e)}function Rxe(t){var e=Oxe();return function(){var r=vy(t),i;if(e){var o=vy(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return cS(this,i)}}function cS(t,e){if(e&&(Ju(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uS(t)}function uS(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oxe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vy(t){return vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vy(t)}var co=function(t){Cxe(n,t);var e=Rxe(n);function n(r,i){var o;Txe(this,n),o=e.call(this,r,i);var a=o.props,s=a.isActive,l=a.attributeName,c=a.from,u=a.to,f=a.steps,h=a.children,d=a.duration;if(o.handleStyleChange=o.handleStyleChange.bind(uS(o)),o.changeStyle=o.changeStyle.bind(uS(o)),!s||d<=0)return o.state={style:{}},typeof h=="function"&&(o.state={style:u}),cS(o);if(f&&f.length)o.state={style:f[0].style};else if(c){if(typeof h=="function")return o.state={style:c},cS(o);o.state={style:l?$h({},l,c):c}}else o.state={style:{}};return o}return Mxe(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,a=i.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.isActive,s=o.canBegin,l=o.attributeName,c=o.shouldReAnimate,u=o.to,f=o.from,h=this.state.style;if(s){if(!a){var d={style:l?$h({},l,u):u};this.state&&h&&(l&&h[l]!==u||!l&&h!==u)&&this.setState(d);return}if(!(j_e(i.to,u)&&i.canBegin&&i.isActive)){var v=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=v||c?f:i.to;if(this.state&&h){var g={style:l?$h({},l,y):y};(l&&h[l]!==y||!l&&h!==y)&&this.setState(g)}this.runAnimation(qi(qi({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,a=i.from,s=i.to,l=i.duration,c=i.easing,u=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,d=vxe(a,s,axe(c),l,this.changeStyle),v=function(){o.stopJSAnimation=d()};this.manager.start([h,u,v,l,f])}},{key:"runStepAnimation",value:function(i){var o=this,a=i.steps,s=i.begin,l=i.onAnimationStart,c=a[0],u=c.style,f=c.duration,h=f===void 0?0:f,d=function(y,g,p){if(p===0)return y;var x=g.duration,_=g.easing,T=_===void 0?"ease":_,w=g.style,M=g.properties,b=g.onAnimationEnd,A=p>0?a[p-1]:g,E=M||Object.keys(w);if(typeof T=="function"||T==="spring")return[].concat(Sb(y),[o.runJSAnimation.bind(o,{from:A.style,to:w,duration:x,easing:T}),x]);var P=tD(E,x,T),R=qi(qi(qi({},A.style),w),{},{transition:P});return[].concat(Sb(y),[R,x,b]).filter(X_e)};return this.manager.start([l].concat(Sb(a.reduce(d,[u,Math.max(h,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=H_e());var o=i.begin,a=i.duration,s=i.attributeName,l=i.to,c=i.easing,u=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,d=i.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof c=="function"||typeof d=="function"||c==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var y=s?$h({},s,l):l,g=tD(Object.keys(y),a,c);v.start([u,o,qi(qi({},y),{},{transition:g}),a,f])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=_xe(i,yxe),c=V.Children.count(o),u=this.state.style;if(typeof o=="function")return o(u);if(!s||c===0||a<=0)return o;var f=function(d){var v=d.props,y=v.style,g=y===void 0?{}:y,p=v.className,x=V.cloneElement(d,qi(qi({},l),{},{style:qi(qi({},g),u),className:p}));return x};return c===1?f(V.Children.only(o)):G.createElement("div",null,V.Children.map(o,function(h){return f(h)}))}}]),n}(V.PureComponent);co.displayName="Animate";co.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};co.propTypes={from:je.oneOfType([je.object,je.string]),to:je.oneOfType([je.object,je.string]),attributeName:je.string,duration:je.number,begin:je.number,easing:je.oneOfType([je.string,je.func]),steps:je.arrayOf(je.shape({duration:je.number.isRequired,style:je.object.isRequired,easing:je.oneOfType([je.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),je.func]),properties:je.arrayOf("string"),onAnimationEnd:je.func})),children:je.oneOfType([je.node,je.func]),isActive:je.bool,canBegin:je.bool,onAnimationEnd:je.func,shouldReAnimate:je.bool,onAnimationStart:je.func,onAnimationReStart:je.func};je.object,je.object,je.object,je.element;je.object,je.object,je.object,je.oneOfType([je.array,je.element]),je.any;function gp(t){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gp(t)}function yy(){return yy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yy.apply(this,arguments)}function Ixe(t,e){return kxe(t)||Lxe(t,e)||Dxe(t,e)||Nxe()}function Nxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dxe(t,e){if(t){if(typeof t=="string")return sD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sD(t,e)}}function sD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Lxe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function kxe(t){if(Array.isArray(t))return t}function lD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lD(Object(n),!0).forEach(function(r){jxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jxe(t,e,n){return e=Uxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uxe(t){var e=Fxe(t,"string");return gp(e)=="symbol"?e:e+""}function Fxe(t,e){if(gp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uD=function(e,n,r,i,o){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,u;if(a>0&&o instanceof Array){for(var f=[0,0,0,0],h=0,d=4;h<d;h++)f[h]=o[h]>a?a:o[h];u="M".concat(e,",").concat(n+s*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(c,",").concat(e+l*f[0],",").concat(n)),u+="L ".concat(e+r-l*f[1],",").concat(n),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+s*f[1])),u+="L ".concat(e+r,",").concat(n+i-s*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(c,`,
        `).concat(e+r-l*f[2],",").concat(n+i)),u+="L ".concat(e+l*f[3],",").concat(n+i),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+i-s*f[3])),u+="Z"}else if(a>0&&o===+o&&o>0){var v=Math.min(a,o);u="M ".concat(e,",").concat(n+s*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(e+l*v,",").concat(n,`
            L `).concat(e+r-l*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(e+r,",").concat(n+s*v,`
            L `).concat(e+r,",").concat(n+i-s*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(e+r-l*v,",").concat(n+i,`
            L `).concat(e+l*v,",").concat(n+i,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(e,",").concat(n+i-s*v," Z")}else u="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return u},Vxe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,o=n.x,a=n.y,s=n.width,l=n.height;if(Math.abs(s)>0&&Math.abs(l)>0){var c=Math.min(o,o+s),u=Math.max(o,o+s),f=Math.min(a,a+l),h=Math.max(a,a+l);return r>=c&&r<=u&&i>=f&&i<=h}return!1},Bxe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$A=function(e){var n=cD(cD({},Bxe),e),r=V.useRef(),i=V.useState(-1),o=Ixe(i,2),a=o[0],s=o[1];V.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&s(T)}catch{}},[]);var l=n.x,c=n.y,u=n.width,f=n.height,h=n.radius,d=n.className,v=n.animationEasing,y=n.animationDuration,g=n.animationBegin,p=n.isAnimationActive,x=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||f!==+f||u===0||f===0)return null;var _=_t("recharts-rectangle",d);return x?G.createElement(co,{canBegin:a>0,from:{width:u,height:f,x:l,y:c},to:{width:u,height:f,x:l,y:c},duration:y,animationEasing:v,isActive:x},function(T){var w=T.width,M=T.height,b=T.x,A=T.y;return G.createElement(co,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:y,isActive:p,easing:v},G.createElement("path",yy({},Ke(n,!0),{className:_,d:uD(b,A,w,M,h),ref:r})))}):G.createElement("path",yy({},Ke(n,!0),{className:_,d:uD(l,c,u,f,h)}))},$xe=["points","className","baseLinePoints","connectNulls"];function uu(){return uu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uu.apply(this,arguments)}function zxe(t,e){if(t==null)return{};var n=Hxe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hxe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function fD(t){return Xxe(t)||qxe(t)||Wxe(t)||Gxe()}function Gxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wxe(t,e){if(t){if(typeof t=="string")return fS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fS(t,e)}}function qxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Xxe(t){if(Array.isArray(t))return fS(t)}function fS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var hD=function(e){return e&&e.x===+e.x&&e.y===+e.y},Kxe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){hD(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),hD(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},hd=function(e,n){var r=Kxe(e);n&&(r=[r.reduce(function(o,a){return[].concat(fD(o),fD(a))},[])]);var i=r.map(function(o){return o.reduce(function(a,s,l){return"".concat(a).concat(l===0?"M":"L").concat(s.x,",").concat(s.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},Yxe=function(e,n,r){var i=hd(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(hd(n.reverse(),r).slice(1))},Qxe=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,o=e.connectNulls,a=zxe(e,$xe);if(!n||!n.length)return null;var s=_t("recharts-polygon",r);if(i&&i.length){var l=a.stroke&&a.stroke!=="none",c=Yxe(n,i,o);return G.createElement("g",{className:s},G.createElement("path",uu({},Ke(a,!0),{fill:c.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:c})),l?G.createElement("path",uu({},Ke(a,!0),{fill:"none",d:hd(n,o)})):null,l?G.createElement("path",uu({},Ke(a,!0),{fill:"none",d:hd(i,o)})):null)}var u=hd(n,o);return G.createElement("path",uu({},Ke(a,!0),{fill:u.slice(-1)==="Z"?a.fill:"none",className:s,d:u}))};function hS(){return hS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hS.apply(this,arguments)}var tm=function(e){var n=e.cx,r=e.cy,i=e.r,o=e.className,a=_t("recharts-dot",o);return n===+n&&r===+r&&i===+i?G.createElement("circle",hS({},Ke(e,!1),Uv(e),{className:a,cx:n,cy:r,r:i})):null};function vp(t){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(t)}var Zxe=["x","y","top","left","width","height","className"];function dS(){return dS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dS.apply(this,arguments)}function dD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jxe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dD(Object(n),!0).forEach(function(r){ebe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ebe(t,e,n){return e=tbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tbe(t){var e=nbe(t,"string");return vp(e)=="symbol"?e:e+""}function nbe(t,e){if(vp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rbe(t,e){if(t==null)return{};var n=ibe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ibe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var obe=function(e,n,r,i,o,a){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},abe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.top,s=a===void 0?0:a,l=e.left,c=l===void 0?0:l,u=e.width,f=u===void 0?0:u,h=e.height,d=h===void 0?0:h,v=e.className,y=rbe(e,Zxe),g=Jxe({x:r,y:o,top:s,left:c,width:f,height:d},y);return!Ae(r)||!Ae(o)||!Ae(f)||!Ae(d)||!Ae(s)||!Ae(c)?null:G.createElement("path",dS({},Ke(g,!0),{className:_t("recharts-cross",v),d:obe(r,o,f,d,s,c)}))},sbe=n_,lbe=FV,cbe=Uo;function ube(t,e){return t&&t.length?sbe(t,cbe(e),lbe):void 0}var fbe=ube;const hbe=Ft(fbe);var dbe=n_,pbe=Uo,mbe=VV;function gbe(t,e){return t&&t.length?dbe(t,pbe(e),mbe):void 0}var vbe=gbe;const ybe=Ft(vbe);var _be=["cx","cy","angle","ticks","axisLine"],xbe=["ticks","tick","angle","tickFormatter","stroke"];function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dd.apply(this,arguments)}function pD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pD(Object(n),!0).forEach(function(r){a_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mD(t,e){if(t==null)return{};var n=bbe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bbe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function wbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MB(r.key),r)}}function Sbe(t,e,n){return e&&gD(t.prototype,e),n&&gD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ebe(t,e,n){return e=_y(e),Tbe(t,AB()?Reflect.construct(e,n||[],_y(t).constructor):e.apply(t,n))}function Tbe(t,e){if(e&&(ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Abe(t)}function Abe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AB=function(){return!!t})()}function _y(t){return _y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_y(t)}function Mbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pS(t,e)}function pS(t,e){return pS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},pS(t,e)}function a_(t,e,n){return e=MB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MB(t){var e=Pbe(t,"string");return ef(e)=="symbol"?e:e+""}function Pbe(t,e){if(ef(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var s_=function(t){function e(){return wbe(this,e),Ebe(this,e,arguments)}return Mbe(e,t),Sbe(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,o=this.props,a=o.angle,s=o.cx,l=o.cy;return Qt(s,l,i,a)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,o=r.cy,a=r.angle,s=r.ticks,l=hbe(s,function(u){return u.coordinate||0}),c=ybe(s,function(u){return u.coordinate||0});return{cx:i,cy:o,startAngle:a,endAngle:a,innerRadius:c.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,a=r.angle,s=r.ticks,l=r.axisLine,c=mD(r,_be),u=s.reduce(function(v,y){return[Math.min(v[0],y.coordinate),Math.max(v[1],y.coordinate)]},[1/0,-1/0]),f=Qt(i,o,u[0],a),h=Qt(i,o,u[1],a),d=Zs(Zs(Zs({},Ke(c,!1)),{},{fill:"none"},Ke(l,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return G.createElement("line",dd({className:"recharts-polar-radius-axis-line"},d))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,a=i.tick,s=i.angle,l=i.tickFormatter,c=i.stroke,u=mD(i,xbe),f=this.getTickTextAnchor(),h=Ke(u,!1),d=Ke(a,!1),v=o.map(function(y,g){var p=r.getTickValueCoord(y),x=Zs(Zs(Zs(Zs({textAnchor:f,transform:"rotate(".concat(90-s,", ").concat(p.x,", ").concat(p.y,")")},h),{},{stroke:"none",fill:c},d),{},{index:g},p),{},{payload:y});return G.createElement(St,dd({className:_t("recharts-polar-radius-axis-tick",pB(a)),key:"tick-".concat(y.coordinate)},Bl(r.props,y,g)),e.renderTickItem(a,x,l?l(y.value,g):y.value))});return G.createElement(St,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.axisLine,a=r.tick;return!i||!i.length?null:G.createElement(St,{className:_t("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),a&&this.renderTicks(),Qn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,o){var a;return G.isValidElement(r)?a=G.cloneElement(r,i):ot(r)?a=r(i):a=G.createElement($l,dd({},i,{className:"recharts-polar-radius-axis-tick-value"}),o),a}}])}(V.PureComponent);a_(s_,"displayName","PolarRadiusAxis");a_(s_,"axisType","radiusAxis");a_(s_,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function tf(t){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tf(t)}function fl(){return fl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fl.apply(this,arguments)}function vD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Js(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vD(Object(n),!0).forEach(function(r){l_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CB(r.key),r)}}function Rbe(t,e,n){return e&&yD(t.prototype,e),n&&yD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Obe(t,e,n){return e=xy(e),Ibe(t,PB()?Reflect.construct(e,n||[],xy(t).constructor):e.apply(t,n))}function Ibe(t,e){if(e&&(tf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nbe(t)}function Nbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PB=function(){return!!t})()}function xy(t){return xy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xy(t)}function Dbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mS(t,e)}function mS(t,e){return mS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mS(t,e)}function l_(t,e,n){return e=CB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CB(t){var e=Lbe(t,"string");return tf(e)=="symbol"?e:e+""}function Lbe(t,e){if(tf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kbe=Math.PI/180,_D=1e-5,c_=function(t){function e(){return Cbe(this,e),Obe(this,e,arguments)}return Dbe(e,t),Rbe(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.cx,a=i.cy,s=i.radius,l=i.orientation,c=i.tickSize,u=c||8,f=Qt(o,a,s,r.coordinate),h=Qt(o,a,s+(l==="inner"?-1:1)*u,r.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,o=Math.cos(-r.coordinate*kbe),a;return o>_D?a=i==="outer"?"start":"end":o<-_D?a=i==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,a=r.radius,s=r.axisLine,l=r.axisLineType,c=Js(Js({},Ke(this.props,!1)),{},{fill:"none"},Ke(s,!1));if(l==="circle")return G.createElement(tm,fl({className:"recharts-polar-angle-axis-line"},c,{cx:i,cy:o,r:a}));var u=this.props.ticks,f=u.map(function(h){return Qt(i,o,a,h.coordinate)});return G.createElement(Qxe,fl({className:"recharts-polar-angle-axis-line"},c,{points:f}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,a=i.tick,s=i.tickLine,l=i.tickFormatter,c=i.stroke,u=Ke(this.props,!1),f=Ke(a,!1),h=Js(Js({},u),{},{fill:"none"},Ke(s,!1)),d=o.map(function(v,y){var g=r.getTickLineCoord(v),p=r.getTickTextAnchor(v),x=Js(Js(Js({textAnchor:p},u),{},{stroke:"none",fill:c},f),{},{index:y,payload:v,x:g.x2,y:g.y2});return G.createElement(St,fl({className:_t("recharts-polar-angle-axis-tick",pB(a)),key:"tick-".concat(v.coordinate)},Bl(r.props,v,y)),s&&G.createElement("line",fl({className:"recharts-polar-angle-axis-tick-line"},h,g)),a&&e.renderTickItem(a,x,l?l(v.value,y):v.value))});return G.createElement(St,{className:"recharts-polar-angle-axis-ticks"},d)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.radius,a=r.axisLine;return o<=0||!i||!i.length?null:G.createElement(St,{className:_t("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,o){var a;return G.isValidElement(r)?a=G.cloneElement(r,i):ot(r)?a=r(i):a=G.createElement($l,fl({},i,{className:"recharts-polar-angle-axis-tick-value"}),o),a}}])}(V.PureComponent);l_(c_,"displayName","PolarAngleAxis");l_(c_,"axisType","angleAxis");l_(c_,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var jbe=L4,Ube=jbe(Object.getPrototypeOf,Object),Fbe=Ube,Vbe=Ca,Bbe=Fbe,$be=Ra,zbe="[object Object]",Hbe=Function.prototype,Gbe=Object.prototype,RB=Hbe.toString,Wbe=Gbe.hasOwnProperty,qbe=RB.call(Object);function Xbe(t){if(!$be(t)||Vbe(t)!=zbe)return!1;var e=Bbe(t);if(e===null)return!0;var n=Wbe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&RB.call(n)==qbe}var Kbe=Xbe;const Ybe=Ft(Kbe);var Qbe=Ca,Zbe=Ra,Jbe="[object Boolean]";function e1e(t){return t===!0||t===!1||Zbe(t)&&Qbe(t)==Jbe}var t1e=e1e;const n1e=Ft(t1e);function yp(t){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yp(t)}function by(){return by=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},by.apply(this,arguments)}function r1e(t,e){return s1e(t)||a1e(t,e)||o1e(t,e)||i1e()}function i1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o1e(t,e){if(t){if(typeof t=="string")return xD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xD(t,e)}}function xD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a1e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function s1e(t){if(Array.isArray(t))return t}function bD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bD(Object(n),!0).forEach(function(r){l1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l1e(t,e,n){return e=c1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c1e(t){var e=u1e(t,"string");return yp(e)=="symbol"?e:e+""}function u1e(t,e){if(yp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SD=function(e,n,r,i,o){var a=r-i,s;return s="M ".concat(e,",").concat(n),s+="L ".concat(e+r,",").concat(n),s+="L ".concat(e+r-a/2,",").concat(n+o),s+="L ".concat(e+r-a/2-i,",").concat(n+o),s+="L ".concat(e,",").concat(n," Z"),s},f1e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},h1e=function(e){var n=wD(wD({},f1e),e),r=V.useRef(),i=V.useState(-1),o=r1e(i,2),a=o[0],s=o[1];V.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&s(_)}catch{}},[]);var l=n.x,c=n.y,u=n.upperWidth,f=n.lowerWidth,h=n.height,d=n.className,v=n.animationEasing,y=n.animationDuration,g=n.animationBegin,p=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||f!==+f||h!==+h||u===0&&f===0||h===0)return null;var x=_t("recharts-trapezoid",d);return p?G.createElement(co,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:c},to:{upperWidth:u,lowerWidth:f,height:h,x:l,y:c},duration:y,animationEasing:v,isActive:p},function(_){var T=_.upperWidth,w=_.lowerWidth,M=_.height,b=_.x,A=_.y;return G.createElement(co,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:y,easing:v},G.createElement("path",by({},Ke(n,!0),{className:x,d:SD(b,A,T,w,M),ref:r})))}):G.createElement("g",null,G.createElement("path",by({},Ke(n,!0),{className:x,d:SD(l,c,u,f,h)})))},d1e=["option","shapeType","propTransformer","activeClassName","isActive"];function _p(t){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_p(t)}function p1e(t,e){if(t==null)return{};var n=m1e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function m1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ED(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ED(Object(n),!0).forEach(function(r){g1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ED(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g1e(t,e,n){return e=v1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v1e(t){var e=y1e(t,"string");return _p(e)=="symbol"?e:e+""}function y1e(t,e){if(_p(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_p(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _1e(t,e){return wy(wy({},e),t)}function x1e(t,e){return t==="symbols"}function TD(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return G.createElement($A,n);case"trapezoid":return G.createElement(h1e,n);case"sector":return G.createElement(vB,n);case"symbols":if(x1e(e))return G.createElement(sA,n);break;default:return null}}function b1e(t){return V.isValidElement(t)?t.props:t}function OB(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?_1e:r,o=t.activeClassName,a=o===void 0?"recharts-active-shape":o,s=t.isActive,l=p1e(t,d1e),c;if(V.isValidElement(e))c=V.cloneElement(e,wy(wy({},l),b1e(e)));else if(ot(e))c=e(l);else if(Ybe(e)&&!n1e(e)){var u=i(e,l);c=G.createElement(TD,{shapeType:n,elementProps:u})}else{var f=l;c=G.createElement(TD,{shapeType:n,elementProps:f})}return s?G.createElement(St,{className:a},c):c}function u_(t,e){return e!=null&&"trapezoids"in t.props}function f_(t,e){return e!=null&&"sectors"in t.props}function xp(t,e){return e!=null&&"points"in t.props}function w1e(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,o=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&o}function S1e(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function E1e(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function T1e(t,e){var n;return u_(t,e)?n=w1e:f_(t,e)?n=S1e:xp(t,e)&&(n=E1e),n}function A1e(t,e){var n;return u_(t,e)?n="trapezoids":f_(t,e)?n="sectors":xp(t,e)&&(n="points"),n}function M1e(t,e){if(u_(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(f_(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return xp(t,e)?e.payload:{}}function P1e(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=A1e(n,e),o=M1e(n,e),a=r.filter(function(l,c){var u=zl(o,l),f=n.props[i].filter(function(v){var y=T1e(n,e);return y(v,e)}),h=n.props[i].indexOf(f[f.length-1]),d=c===h;return u&&d}),s=r.indexOf(a[a.length-1]);return s}var Wg;function nf(t){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nf(t)}function fu(){return fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fu.apply(this,arguments)}function AD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AD(Object(n),!0).forEach(function(r){Ci(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function C1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,NB(r.key),r)}}function R1e(t,e,n){return e&&MD(t.prototype,e),n&&MD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function O1e(t,e,n){return e=Sy(e),I1e(t,IB()?Reflect.construct(e,n||[],Sy(t).constructor):e.apply(t,n))}function I1e(t,e){if(e&&(nf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N1e(t)}function N1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IB=function(){return!!t})()}function Sy(t){return Sy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sy(t)}function D1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gS(t,e)}function gS(t,e){return gS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},gS(t,e)}function Ci(t,e,n){return e=NB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NB(t){var e=L1e(t,"string");return nf(e)=="symbol"?e:e+""}function L1e(t,e){if(nf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ia=function(t){function e(n){var r;return C1e(this,e),r=O1e(this,e,[n]),Ci(r,"pieRef",null),Ci(r,"sectorRefs",[]),Ci(r,"id",Jl("recharts-pie-")),Ci(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),ot(i)&&i()}),Ci(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),ot(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return D1e(e,t),R1e(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.label,s=o.labelLine,l=o.dataKey,c=o.valueKey,u=Ke(this.props,!1),f=Ke(a,!1),h=Ke(s,!1),d=a&&a.offsetRadius||20,v=r.map(function(y,g){var p=(y.startAngle+y.endAngle)/2,x=Qt(y.cx,y.cy,y.outerRadius+d,p),_=Xt(Xt(Xt(Xt({},u),y),{},{stroke:"none"},f),{},{index:g,textAnchor:e.getTextAnchor(x.x,y.cx)},x),T=Xt(Xt(Xt(Xt({},u),y),{},{fill:"none",stroke:y.fill},h),{},{index:g,points:[Qt(y.cx,y.cy,y.outerRadius,p),x]}),w=l;return ft(l)&&ft(c)?w="value":ft(l)&&(w=c),G.createElement(St,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(g)},s&&e.renderLabelLineItem(s,T,"line"),e.renderLabelItem(a,_,Sn(y,w)))});return G.createElement(St,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(r){var i=this,o=this.props,a=o.activeShape,s=o.blendStroke,l=o.inactiveShape;return r.map(function(c,u){if((c==null?void 0:c.startAngle)===0&&(c==null?void 0:c.endAngle)===0&&r.length!==1)return null;var f=i.isActiveIndex(u),h=l&&i.hasActiveIndex()?l:null,d=f?a:h,v=Xt(Xt({},c),{},{stroke:s?c.fill:c.stroke,tabIndex:-1});return G.createElement(St,fu({ref:function(g){g&&!i.sectorRefs.includes(g)&&i.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},Bl(i.props,c,u),{key:"sector-".concat(c==null?void 0:c.startAngle,"-").concat(c==null?void 0:c.endAngle,"-").concat(c.midAngle,"-").concat(u)}),G.createElement(OB,fu({option:d,isActive:f,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,o=i.sectors,a=i.isAnimationActive,s=i.animationBegin,l=i.animationDuration,c=i.animationEasing,u=i.animationId,f=this.state,h=f.prevSectors,d=f.prevIsAnimationActive;return G.createElement(co,{begin:s,duration:l,isActive:a,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(d),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var y=v.t,g=[],p=o&&o[0],x=p.startAngle;return o.forEach(function(_,T){var w=h&&h[T],M=T>0?fi(_,"paddingAngle",0):0;if(w){var b=Un(w.endAngle-w.startAngle,_.endAngle-_.startAngle),A=Xt(Xt({},_),{},{startAngle:x+M,endAngle:x+b(y)+M});g.push(A),x=A.endAngle}else{var E=_.endAngle,P=_.startAngle,R=Un(0,E-P),N=R(y),O=Xt(Xt({},_),{},{startAngle:x+M,endAngle:x+N+M});g.push(O),x=O.endAngle}}),G.createElement(St,null,r.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var a=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"ArrowRight":{var s=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,o=r.isAnimationActive,a=this.state.prevSectors;return o&&i&&i.length&&(!a||!zl(a,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,o=i.hide,a=i.sectors,s=i.className,l=i.label,c=i.cx,u=i.cy,f=i.innerRadius,h=i.outerRadius,d=i.isAnimationActive,v=this.state.isAnimationFinished;if(o||!a||!a.length||!Ae(c)||!Ae(u)||!Ae(f)||!Ae(h))return null;var y=_t("recharts-pie",s);return G.createElement(St,{tabIndex:this.props.rootTabIndex,className:y,ref:function(p){r.pieRef=p}},this.renderSectors(),l&&this.renderLabels(a),Qn.renderCallByParent(this.props,null,!1),(!d||v)&&Po.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,o){if(G.isValidElement(r))return G.cloneElement(r,i);if(ot(r))return r(i);var a=_t("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return G.createElement(Il,fu({},i,{key:o,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(r,i,o){if(G.isValidElement(r))return G.cloneElement(r,i);var a=o;if(ot(r)&&(a=r(i),G.isValidElement(a)))return a;var s=_t("recharts-pie-label-text",typeof r!="boolean"&&!ot(r)?r.className:"");return G.createElement($l,fu({},i,{alignmentBaseline:"middle",className:s}),a)}}])}(V.PureComponent);Wg=Ia;Ci(Ia,"displayName","Pie");Ci(Ia,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!so.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ci(Ia,"parseDeltaAngle",function(t,e){var n=kr(e-t),r=Math.min(Math.abs(e-t),360);return n*r});Ci(Ia,"getRealPieData",function(t){var e=t.data,n=t.children,r=Ke(t,!1),i=hi(n,Yd);return e&&e.length?e.map(function(o,a){return Xt(Xt(Xt({payload:o},r),o),i&&i[a]&&i[a].props)}):i&&i.length?i.map(function(o){return Xt(Xt({},r),o.props)}):[]});Ci(Ia,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,o=e.height,a=dB(i,o),s=r+jr(t.cx,i,i/2),l=n+jr(t.cy,o,o/2),c=jr(t.innerRadius,a,0),u=jr(t.outerRadius,a,a*.8),f=t.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:s,cy:l,innerRadius:c,outerRadius:u,maxRadius:f}});Ci(Ia,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?Xt(Xt({},e.type.defaultProps),e.props):e.props,i=Wg.getRealPieData(r);if(!i||!i.length)return null;var o=r.cornerRadius,a=r.startAngle,s=r.endAngle,l=r.paddingAngle,c=r.dataKey,u=r.nameKey,f=r.valueKey,h=r.tooltipType,d=Math.abs(r.minAngle),v=Wg.parseCoordinateOfPie(r,n),y=Wg.parseDeltaAngle(a,s),g=Math.abs(y),p=c;ft(c)&&ft(f)?(ao(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),p="value"):ft(c)&&(ao(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),p=f);var x=i.filter(function(A){return Sn(A,p,0)!==0}).length,_=(g>=360?x:x-1)*l,T=g-x*d-_,w=i.reduce(function(A,E){var P=Sn(E,p,0);return A+(Ae(P)?P:0)},0),M;if(w>0){var b;M=i.map(function(A,E){var P=Sn(A,p,0),R=Sn(A,u,E),N=(Ae(P)?P:0)/w,O;E?O=b.endAngle+kr(y)*l*(P!==0?1:0):O=a;var D=O+kr(y)*((P!==0?d:0)+N*T),L=(O+D)/2,W=(v.innerRadius+v.outerRadius)/2,$=[{name:R,value:P,payload:A,dataKey:p,type:h}],B=Qt(v.cx,v.cy,W,L);return b=Xt(Xt(Xt({percent:N,cornerRadius:o,name:R,tooltipPayload:$,midAngle:L,middleRadius:W,tooltipPosition:B},A),v),{},{value:Sn(A,p),startAngle:O,endAngle:D,payload:A,paddingAngle:kr(y)*l}),b})}return Xt(Xt({},v),{},{sectors:M,data:i})});var k1e=Math.ceil,j1e=Math.max;function U1e(t,e,n,r){for(var i=-1,o=j1e(k1e((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}var F1e=U1e,V1e=eV,PD=1/0,B1e=17976931348623157e292;function $1e(t){if(!t)return t===0?t:0;if(t=V1e(t),t===PD||t===-PD){var e=t<0?-1:1;return e*B1e}return t===t?t:0}var DB=$1e,z1e=F1e,H1e=K0,Eb=DB;function G1e(t){return function(e,n,r){return r&&typeof r!="number"&&H1e(e,n,r)&&(n=r=void 0),e=Eb(e),n===void 0?(n=e,e=0):n=Eb(n),r=r===void 0?e<n?1:-1:Eb(r),z1e(e,n,r,t)}}var W1e=G1e,q1e=W1e,X1e=q1e(),K1e=X1e;const Ey=Ft(K1e);function bp(t){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp(t)}function CD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CD(Object(n),!0).forEach(function(r){LB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LB(t,e,n){return e=Y1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y1e(t){var e=Q1e(t,"string");return bp(e)=="symbol"?e:e+""}function Q1e(t,e){if(bp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Z1e=["Webkit","Moz","O","ms"],J1e=function(e,n){var r=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=Z1e.reduce(function(o,a){return RD(RD({},o),{},LB({},a+r,n))},{});return i[e]=n,i};function rf(t){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rf(t)}function Ty(){return Ty=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ty.apply(this,arguments)}function OD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OD(Object(n),!0).forEach(function(r){ii(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ewe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ID(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jB(r.key),r)}}function twe(t,e,n){return e&&ID(t.prototype,e),n&&ID(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nwe(t,e,n){return e=Ay(e),rwe(t,kB()?Reflect.construct(e,n||[],Ay(t).constructor):e.apply(t,n))}function rwe(t,e){if(e&&(rf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iwe(t)}function iwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kB=function(){return!!t})()}function Ay(t){return Ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ay(t)}function owe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vS(t,e)}function vS(t,e){return vS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vS(t,e)}function ii(t,e,n){return e=jB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jB(t){var e=awe(t,"string");return rf(e)=="symbol"?e:e+""}function awe(t,e){if(rf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var swe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,o=e.x,a=e.width,s=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=cd().domain(Ey(0,l)).range([o,o+a-s]),u=c.domain().map(function(f){return c(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:u}},ND=function(e){return e.changedTouches&&!!e.changedTouches.length},of=function(t){function e(n){var r;return ewe(this,e),r=nwe(this,e,[n]),ii(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),ii(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),ii(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,o=i.endIndex,a=i.onDragEnd,s=i.startIndex;a==null||a({endIndex:o,startIndex:s})}),r.detachDragEndListener()}),ii(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),ii(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),ii(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),ii(r,"handleSlideDragStart",function(i){var o=ND(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return owe(e,t),twe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,o=r.endX,a=this.state.scaleValues,s=this.props,l=s.gap,c=s.data,u=c.length-1,f=Math.min(i,o),h=Math.max(i,o),d=e.getIndexInRange(a,f),v=e.getIndexInRange(a,h);return{startIndex:d-d%l,endIndex:v===u?u:v-v%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,o=i.data,a=i.tickFormatter,s=i.dataKey,l=Sn(o[r],s,r);return ot(a)?a(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,o=i.slideMoveStartX,a=i.startX,s=i.endX,l=this.props,c=l.x,u=l.width,f=l.travellerWidth,h=l.startIndex,d=l.endIndex,v=l.onChange,y=r.pageX-o;y>0?y=Math.min(y,c+u-f-s,c+u-f-a):y<0&&(y=Math.max(y,c-a,c-s));var g=this.getIndex({startX:a+y,endX:s+y});(g.startIndex!==h||g.endIndex!==d)&&v&&v(g),this.setState({startX:a+y,endX:s+y,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var o=ND(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,o=i.brushMoveStartX,a=i.movingTravellerId,s=i.endX,l=i.startX,c=this.state[a],u=this.props,f=u.x,h=u.width,d=u.travellerWidth,v=u.onChange,y=u.gap,g=u.data,p={startX:this.state.startX,endX:this.state.endX},x=r.pageX-o;x>0?x=Math.min(x,f+h-d-c):x<0&&(x=Math.max(x,f-c)),p[a]=c+x;var _=this.getIndex(p),T=_.startIndex,w=_.endIndex,M=function(){var A=g.length-1;return a==="startX"&&(s>l?T%y===0:w%y===0)||s<l&&w===A||a==="endX"&&(s>l?w%y===0:T%y===0)||s>l&&w===A};this.setState(ii(ii({},a,c+x),"brushMoveStartX",r.pageX),function(){v&&M()&&v(_)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var o=this,a=this.state,s=a.scaleValues,l=a.startX,c=a.endX,u=this.state[i],f=s.indexOf(u);if(f!==-1){var h=f+r;if(!(h===-1||h>=s.length)){var d=s[h];i==="startX"&&d>=c||i==="endX"&&d<=l||this.setState(ii({},i,d),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.fill,c=r.stroke;return G.createElement("rect",{stroke:c,fill:l,x:i,y:o,width:a,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.data,c=r.children,u=r.padding,f=V.Children.only(c);return f?G.cloneElement(f,{x:i,y:o,width:a,height:s,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var o,a,s=this,l=this.props,c=l.y,u=l.travellerWidth,f=l.height,h=l.traveller,d=l.ariaLabel,v=l.data,y=l.startIndex,g=l.endIndex,p=Math.max(r,this.props.x),x=Tb(Tb({},Ke(this.props,!1)),{},{x:p,y:c,width:u,height:f}),_=d||"Min value: ".concat((o=v[y])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=v[g])===null||a===void 0?void 0:a.name);return G.createElement(St,{tabIndex:0,role:"slider","aria-label":_,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),s.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,x))}},{key:"renderSlide",value:function(r,i){var o=this.props,a=o.y,s=o.height,l=o.stroke,c=o.travellerWidth,u=Math.min(r,i)+c,f=Math.max(Math.abs(i-r)-c,0);return G.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:a,width:f,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,o=r.endIndex,a=r.y,s=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,f=u.startX,h=u.endX,d=5,v={pointerEvents:"none",fill:c};return G.createElement(St,{className:"recharts-brush-texts"},G.createElement($l,Ty({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-d,y:a+s/2},v),this.getTextOfTick(i)),G.createElement($l,Ty({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+l+d,y:a+s/2},v),this.getTextOfTick(o)))}},{key:"render",value:function(){var r=this.props,i=r.data,o=r.className,a=r.children,s=r.x,l=r.y,c=r.width,u=r.height,f=r.alwaysShowText,h=this.state,d=h.startX,v=h.endX,y=h.isTextActive,g=h.isSlideMoving,p=h.isTravellerMoving,x=h.isTravellerFocused;if(!i||!i.length||!Ae(s)||!Ae(l)||!Ae(c)||!Ae(u)||c<=0||u<=0)return null;var _=_t("recharts-brush",o),T=G.Children.count(a)===1,w=J1e("userSelect","none");return G.createElement(St,{className:_,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),T&&this.renderPanorama(),this.renderSlide(d,v),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(v,"endX"),(y||g||p||x||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,o=r.y,a=r.width,s=r.height,l=r.stroke,c=Math.floor(o+s/2)-1;return G.createElement(G.Fragment,null,G.createElement("rect",{x:i,y:o,width:a,height:s,fill:l,stroke:"none"}),G.createElement("line",{x1:i+1,y1:c,x2:i+a-1,y2:c,fill:"none",stroke:"#fff"}),G.createElement("line",{x1:i+1,y1:c+2,x2:i+a-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var o;return G.isValidElement(r)?o=G.cloneElement(r,i):ot(r)?o=r(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(r,i){var o=r.data,a=r.width,s=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,f=r.endIndex;if(o!==i.prevData||c!==i.prevUpdateId)return Tb({prevData:o,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:a},o&&o.length?swe({data:o,width:a,x:s,travellerWidth:l,startIndex:u,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||s!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([s,s+a-l]);var h=i.scale.domain().map(function(d){return i.scale(d)});return{prevData:o,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var o=r.length,a=0,s=o-1;s-a>1;){var l=Math.floor((a+s)/2);r[l]>i?s=l:a=l}return i>=r[s]?s:a}}])}(V.PureComponent);ii(of,"displayName","Brush");ii(of,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var lwe=pA;function cwe(t,e){var n;return lwe(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}var uwe=cwe,fwe=M4,hwe=Uo,dwe=uwe,pwe=Zr,mwe=K0;function gwe(t,e,n){var r=pwe(t)?fwe:dwe;return n&&mwe(t,e,n)&&(e=void 0),r(t,hwe(e))}var vwe=gwe;const ywe=Ft(vwe);var Co=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},DD=K4;function _we(t,e,n){e=="__proto__"&&DD?DD(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var xwe=_we,bwe=xwe,wwe=q4,Swe=Uo;function Ewe(t,e){var n={};return e=Swe(e),wwe(t,function(r,i,o){bwe(n,i,e(r,i,o))}),n}var Twe=Ewe;const Awe=Ft(Twe);function Mwe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var Pwe=Mwe,Cwe=pA;function Rwe(t,e){var n=!0;return Cwe(t,function(r,i,o){return n=!!e(r,i,o),n}),n}var Owe=Rwe,Iwe=Pwe,Nwe=Owe,Dwe=Uo,Lwe=Zr,kwe=K0;function jwe(t,e,n){var r=Lwe(t)?Iwe:Nwe;return n&&kwe(t,e,n)&&(e=void 0),r(t,Dwe(e))}var Uwe=jwe;const UB=Ft(Uwe);var Fwe=["x","y"];function wp(t){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wp(t)}function yS(){return yS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yS.apply(this,arguments)}function LD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ih(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LD(Object(n),!0).forEach(function(r){Vwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vwe(t,e,n){return e=Bwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bwe(t){var e=$we(t,"string");return wp(e)=="symbol"?e:e+""}function $we(t,e){if(wp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zwe(t,e){if(t==null)return{};var n=Hwe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hwe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Gwe(t,e){var n=t.x,r=t.y,i=zwe(t,Fwe),o="".concat(n),a=parseInt(o,10),s="".concat(r),l=parseInt(s,10),c="".concat(e.height||i.height),u=parseInt(c,10),f="".concat(e.width||i.width),h=parseInt(f,10);return Ih(Ih(Ih(Ih(Ih({},e),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:u,width:h,name:e.name,radius:e.radius})}function kD(t){return G.createElement(OB,yS({shapeType:"rectangle",propTransformer:Gwe,activeClassName:"recharts-active-bar"},t))}var Wwe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var o=typeof r=="number";return o?e(r,i):(o||Gl(),n)}},qwe=["value","background"],FB;function af(t){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},af(t)}function Xwe(t,e){if(t==null)return{};var n=Kwe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Kwe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function My(){return My=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},My.apply(this,arguments)}function jD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jD(Object(n),!0).forEach(function(r){ns(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ywe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BB(r.key),r)}}function Qwe(t,e,n){return e&&UD(t.prototype,e),n&&UD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zwe(t,e,n){return e=Py(e),Jwe(t,VB()?Reflect.construct(e,n||[],Py(t).constructor):e.apply(t,n))}function Jwe(t,e){if(e&&(af(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eSe(t)}function eSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VB=function(){return!!t})()}function Py(t){return Py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Py(t)}function tSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_S(t,e)}function _S(t,e){return _S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_S(t,e)}function ns(t,e,n){return e=BB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BB(t){var e=nSe(t,"string");return af(e)=="symbol"?e:e+""}function nSe(t,e){if(af(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nc=function(t){function e(){var n;Ywe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Zwe(this,e,[].concat(i)),ns(n,"state",{isAnimationFinished:!1}),ns(n,"id",Jl("recharts-bar-")),ns(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),ns(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return tSe(e,t),Qwe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,o=this.props,a=o.shape,s=o.dataKey,l=o.activeIndex,c=o.activeBar,u=Ke(this.props,!1);return r&&r.map(function(f,h){var d=h===l,v=d?c:a,y=Cn(Cn(Cn({},u),f),{},{isActive:d,option:v,index:h,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return G.createElement(St,My({className:"recharts-bar-rectangle"},Bl(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value)}),G.createElement(kD,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,o=i.data,a=i.layout,s=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,f=i.animationId,h=this.state.prevData;return G.createElement(co,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(d){var v=d.t,y=o.map(function(g,p){var x=h&&h[p];if(x){var _=Un(x.x,g.x),T=Un(x.y,g.y),w=Un(x.width,g.width),M=Un(x.height,g.height);return Cn(Cn({},g),{},{x:_(v),y:T(v),width:w(v),height:M(v)})}if(a==="horizontal"){var b=Un(0,g.height),A=b(v);return Cn(Cn({},g),{},{y:g.y+g.height-A,height:A})}var E=Un(0,g.width),P=E(v);return Cn(Cn({},g),{},{width:P})});return G.createElement(St,null,r.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,o=r.isAnimationActive,a=this.state.prevData;return o&&i&&i.length&&(!a||!zl(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,o=i.data,a=i.dataKey,s=i.activeIndex,l=Ke(this.props.background,!1);return o.map(function(c,u){c.value;var f=c.background,h=Xwe(c,qwe);if(!f)return null;var d=Cn(Cn(Cn(Cn(Cn({},h),{},{fill:"#eee"},f),l),Bl(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:u,className:"recharts-bar-background-rectangle"});return G.createElement(kD,My({key:"background-bar-".concat(u),option:r.props.background,isActive:u===s},d))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,s=o.xAxis,l=o.yAxis,c=o.layout,u=o.children,f=hi(u,em);if(!f)return null;var h=c==="vertical"?a[0].height/2:a[0].width/2,d=function(g,p){var x=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:x,errorVal:Sn(g,p)}},v={clipPath:r?"url(#clipPath-".concat(i,")"):null};return G.createElement(St,v,f.map(function(y){return G.cloneElement(y,{key:"error-bar-".concat(i,"-").concat(y.props.dataKey),data:a,xAxis:s,yAxis:l,layout:c,offset:h,dataPointFormatter:d})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.data,a=r.className,s=r.xAxis,l=r.yAxis,c=r.left,u=r.top,f=r.width,h=r.height,d=r.isAnimationActive,v=r.background,y=r.id;if(i||!o||!o.length)return null;var g=this.state.isAnimationFinished,p=_t("recharts-bar",a),x=s&&s.allowDataOverflow,_=l&&l.allowDataOverflow,T=x||_,w=ft(y)?this.id:y;return G.createElement(St,{className:p},x||_?G.createElement("defs",null,G.createElement("clipPath",{id:"clipPath-".concat(w)},G.createElement("rect",{x:x?c:c-f/2,y:_?u:u-h/2,width:x?f:f*2,height:_?h:h*2}))):null,G.createElement(St,{className:"recharts-bar-rectangles",clipPath:T?"url(#clipPath-".concat(w,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(T,w),(!d||g)&&Po.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(V.PureComponent);FB=nc;ns(nc,"displayName","Bar");ns(nc,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!so.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ns(nc,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,a=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,f=t.displayedData,h=t.offset,d=Qye(r,n);if(!d)return null;var v=e.layout,y=n.type.defaultProps,g=y!==void 0?Cn(Cn({},y),n.props):n.props,p=g.dataKey,x=g.children,_=g.minPointSize,T=v==="horizontal"?a:o,w=c?T.scale.domain():null,M=i0e({numericAxis:T}),b=hi(x,Yd),A=f.map(function(E,P){var R,N,O,D,L,W;c?R=Zye(c[u+P],w):(R=Sn(E,p),Array.isArray(R)||(R=[M,R]));var $=Wwe(_,FB.defaultProps.minPointSize)(R[1],P);if(v==="horizontal"){var B,X=[a.scale(R[0]),a.scale(R[1])],K=X[0],z=X[1];N=MN({axis:o,ticks:s,bandSize:i,offset:d.offset,entry:E,index:P}),O=(B=z??K)!==null&&B!==void 0?B:void 0,D=d.size;var q=K-z;if(L=Number.isNaN(q)?0:q,W={x:N,y:a.y,width:D,height:a.height},Math.abs($)>0&&Math.abs(L)<Math.abs($)){var ee=kr(L||$)*(Math.abs($)-Math.abs(L));O-=ee,L+=ee}}else{var me=[o.scale(R[0]),o.scale(R[1])],_e=me[0],Ne=me[1];if(N=_e,O=MN({axis:a,ticks:l,bandSize:i,offset:d.offset,entry:E,index:P}),D=Ne-_e,L=d.size,W={x:o.x,y:O,width:o.width,height:L},Math.abs($)>0&&Math.abs(D)<Math.abs($)){var We=kr(D||$)*(Math.abs($)-Math.abs(D));D+=We}}return Cn(Cn(Cn({},E),{},{x:N,y:O,width:D,height:L,value:c?R:R[1],payload:E,background:W},b&&b[P]&&b[P].props),{},{tooltipPayload:[fB(n,E)],tooltipPosition:{x:N+D/2,y:O+L/2}})});return Cn({data:A,layout:v},h)});function Sp(t){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sp(t)}function rSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$B(r.key),r)}}function iSe(t,e,n){return e&&FD(t.prototype,e),n&&FD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function VD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VD(Object(n),!0).forEach(function(r){h_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function h_(t,e,n){return e=$B(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $B(t){var e=oSe(t,"string");return Sp(e)=="symbol"?e:e+""}function oSe(t,e){if(Sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zA=function(e,n,r,i,o){var a=e.width,s=e.height,l=e.layout,c=e.children,u=Object.keys(n),f={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},h=!!ai(c,nc);return u.reduce(function(d,v){var y=n[v],g=y.orientation,p=y.domain,x=y.padding,_=x===void 0?{}:x,T=y.mirror,w=y.reversed,M="".concat(g).concat(T?"Mirror":""),b,A,E,P,R;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var N=p[1]-p[0],O=1/0,D=y.categoricalDomain.sort();if(D.forEach(function(me,_e){_e>0&&(O=Math.min((me||0)-(D[_e-1]||0),O))}),Number.isFinite(O)){var L=O/N,W=y.layout==="vertical"?r.height:r.width;if(y.padding==="gap"&&(b=L*W/2),y.padding==="no-gap"){var $=jr(e.barCategoryGap,L*W),B=L*W/2;b=B-$-(B-$)/W*$}}}i==="xAxis"?A=[r.left+(_.left||0)+(b||0),r.left+r.width-(_.right||0)-(b||0)]:i==="yAxis"?A=l==="horizontal"?[r.top+r.height-(_.bottom||0),r.top+(_.top||0)]:[r.top+(_.top||0)+(b||0),r.top+r.height-(_.bottom||0)-(b||0)]:A=y.range,w&&(A=[A[1],A[0]]);var X=sB(y,o,h),K=X.scale,z=X.realScaleType;K.domain(p).range(A),lB(K);var q=cB(K,Yi(Yi({},y),{},{realScaleType:z}));i==="xAxis"?(R=g==="top"&&!T||g==="bottom"&&T,E=r.left,P=f[M]-R*y.height):i==="yAxis"&&(R=g==="left"&&!T||g==="right"&&T,E=f[M]-R*y.width,P=r.top);var ee=Yi(Yi(Yi({},y),q),{},{realScaleType:z,x:E,y:P,scale:K,width:i==="xAxis"?r.width:y.width,height:i==="yAxis"?r.height:y.height});return ee.bandSize=hy(ee,q),!y.hide&&i==="xAxis"?f[M]+=(R?-1:1)*ee.height:y.hide||(f[M]+=(R?-1:1)*ee.width),Yi(Yi({},d),{},h_({},v,ee))},{})},zB=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return{x:Math.min(r,o),y:Math.min(i,a),width:Math.abs(o-r),height:Math.abs(a-i)}},aSe=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2;return zB({x:n,y:r},{x:i,y:o})},HB=function(){function t(e){rSe(this,t),this.scale=e}return iSe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(n)+s}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?n>=i&&n<=o:n>=o&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();h_(HB,"EPS",1e-4);var HA=function(e){var n=Object.keys(e).reduce(function(r,i){return Yi(Yi({},r),{},h_({},i,HB.create(e[i])))},{});return Yi(Yi({},n),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.bandAware,s=o.position;return Awe(i,function(l,c){return n[c].apply(l,{bandAware:a,position:s})})},isInRange:function(i){return UB(i,function(o,a){return n[a].isInRange(o)})}})};function sSe(t){return(t%180+180)%180}var lSe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=sSe(i),a=o*Math.PI/180,s=Math.atan(r/n),l=a>s&&a<Math.PI-s?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)},cSe=Uo,uSe=Kp,fSe=q0;function hSe(t){return function(e,n,r){var i=Object(e);if(!uSe(e)){var o=cSe(n);e=fSe(e),n=function(s){return o(i[s],s,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}var dSe=hSe,pSe=DB;function mSe(t){var e=pSe(t),n=e%1;return e===e?n?e-n:e:0}var gSe=mSe,vSe=B4,ySe=Uo,_Se=gSe,xSe=Math.max;function bSe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:_Se(n);return i<0&&(i=xSe(r+i,0)),vSe(t,ySe(e),i)}var wSe=bSe,SSe=dSe,ESe=wSe,TSe=SSe(ESe),ASe=TSe;const MSe=Ft(ASe);var PSe=Fne(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),GA=V.createContext(void 0),WA=V.createContext(void 0),GB=V.createContext(void 0),WB=V.createContext({}),qB=V.createContext(void 0),XB=V.createContext(0),KB=V.createContext(0),BD=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,o=n.offset,a=e.clipPathId,s=e.children,l=e.width,c=e.height,u=PSe(o);return G.createElement(GA.Provider,{value:r},G.createElement(WA.Provider,{value:i},G.createElement(WB.Provider,{value:o},G.createElement(GB.Provider,{value:u},G.createElement(qB.Provider,{value:a},G.createElement(XB.Provider,{value:c},G.createElement(KB.Provider,{value:l},s)))))))},CSe=function(){return V.useContext(qB)},YB=function(e){var n=V.useContext(GA);n==null&&Gl();var r=n[e];return r==null&&Gl(),r},RSe=function(){var e=V.useContext(GA);return Ya(e)},OSe=function(){var e=V.useContext(WA),n=MSe(e,function(r){return UB(r.domain,Number.isFinite)});return n||Ya(e)},QB=function(e){var n=V.useContext(WA);n==null&&Gl();var r=n[e];return r==null&&Gl(),r},ISe=function(){var e=V.useContext(GB);return e},NSe=function(){return V.useContext(WB)},qA=function(){return V.useContext(KB)},XA=function(){return V.useContext(XB)};function sf(t){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sf(t)}function DSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JB(r.key),r)}}function kSe(t,e,n){return e&&LSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jSe(t,e,n){return e=Cy(e),USe(t,ZB()?Reflect.construct(e,n||[],Cy(t).constructor):e.apply(t,n))}function USe(t,e){if(e&&(sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FSe(t)}function FSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZB=function(){return!!t})()}function Cy(t){return Cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cy(t)}function VSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xS(t,e)}function xS(t,e){return xS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xS(t,e)}function $D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$D(Object(n),!0).forEach(function(r){KA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$D(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KA(t,e,n){return e=JB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JB(t){var e=BSe(t,"string");return sf(e)=="symbol"?e:e+""}function BSe(t,e){if(sf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Se(t,e){return WSe(t)||GSe(t,e)||HSe(t,e)||zSe()}function zSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HSe(t,e){if(t){if(typeof t=="string")return HD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HD(t,e)}}function HD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function GSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function WSe(t){if(Array.isArray(t))return t}function bS(){return bS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bS.apply(this,arguments)}var qSe=function(e,n){var r;return G.isValidElement(e)?r=G.cloneElement(e,n):ot(e)?r=e(n):r=G.createElement("line",bS({},n,{className:"recharts-reference-line-line"})),r},XSe=function(e,n,r,i,o,a,s,l,c){var u=o.x,f=o.y,h=o.width,d=o.height;if(r){var v=c.y,y=e.y.apply(v,{position:a});if(Co(c,"discard")&&!e.y.isInRange(y))return null;var g=[{x:u+h,y},{x:u,y}];return l==="left"?g.reverse():g}if(n){var p=c.x,x=e.x.apply(p,{position:a});if(Co(c,"discard")&&!e.x.isInRange(x))return null;var _=[{x,y:f+d},{x,y:f}];return s==="top"?_.reverse():_}if(i){var T=c.segment,w=T.map(function(M){return e.apply(M,{position:a})});return Co(c,"discard")&&ywe(w,function(M){return!e.isInRange(M)})?null:w}return null};function KSe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,o=t.yAxisId,a=t.shape,s=t.className,l=t.alwaysShow,c=CSe(),u=YB(i),f=QB(o),h=ISe();if(!c||!h)return null;ao(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=HA({x:u.scale,y:f.scale}),v=Vn(e),y=Vn(n),g=r&&r.length===2,p=XSe(d,v,y,g,h,t.position,u.orientation,f.orientation,t);if(!p)return null;var x=$Se(p,2),_=x[0],T=_.x,w=_.y,M=x[1],b=M.x,A=M.y,E=Co(t,"hidden")?"url(#".concat(c,")"):void 0,P=zD(zD({clipPath:E},Ke(t,!0)),{},{x1:T,y1:w,x2:b,y2:A});return G.createElement(St,{className:_t("recharts-reference-line",s)},qSe(a,P),Qn.renderCallByParent(t,aSe({x1:T,y1:w,x2:b,y2:A})))}var YA=function(t){function e(){return DSe(this,e),jSe(this,e,arguments)}return VSe(e,t),kSe(e,[{key:"render",value:function(){return G.createElement(KSe,this.props)}}])}(G.Component);KA(YA,"displayName","ReferenceLine");KA(YA,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function wS(){return wS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wS.apply(this,arguments)}function lf(t){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(t)}function GD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GD(Object(n),!0).forEach(function(r){d_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,t5(r.key),r)}}function ZSe(t,e,n){return e&&QSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function JSe(t,e,n){return e=Ry(e),eEe(t,e5()?Reflect.construct(e,n||[],Ry(t).constructor):e.apply(t,n))}function eEe(t,e){if(e&&(lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tEe(t)}function tEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e5=function(){return!!t})()}function Ry(t){return Ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ry(t)}function nEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SS(t,e)}function SS(t,e){return SS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},SS(t,e)}function d_(t,e,n){return e=t5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t5(t){var e=rEe(t,"string");return lf(e)=="symbol"?e:e+""}function rEe(t,e){if(lf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iEe=function(e){var n=e.x,r=e.y,i=e.xAxis,o=e.yAxis,a=HA({x:i.scale,y:o.scale}),s=a.apply({x:n,y:r},{bandAware:!0});return Co(e,"discard")&&!a.isInRange(s)?null:s},p_=function(t){function e(){return YSe(this,e),JSe(this,e,arguments)}return nEe(e,t),ZSe(e,[{key:"render",value:function(){var r=this.props,i=r.x,o=r.y,a=r.r,s=r.alwaysShow,l=r.clipPathId,c=Vn(i),u=Vn(o);if(ao(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var f=iEe(this.props);if(!f)return null;var h=f.x,d=f.y,v=this.props,y=v.shape,g=v.className,p=Co(this.props,"hidden")?"url(#".concat(l,")"):void 0,x=WD(WD({clipPath:p},Ke(this.props,!0)),{},{cx:h,cy:d});return G.createElement(St,{className:_t("recharts-reference-dot",g)},e.renderDot(y,x),Qn.renderCallByParent(this.props,{x:h-a,y:d-a,width:2*a,height:2*a}))}}])}(G.Component);d_(p_,"displayName","ReferenceDot");d_(p_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});d_(p_,"renderDot",function(t,e){var n;return G.isValidElement(t)?n=G.cloneElement(t,e):ot(t)?n=t(e):n=G.createElement(tm,wS({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function ES(){return ES=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ES.apply(this,arguments)}function cf(t){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(t)}function qD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qD(Object(n),!0).forEach(function(r){m_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aEe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r5(r.key),r)}}function sEe(t,e,n){return e&&aEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lEe(t,e,n){return e=Oy(e),cEe(t,n5()?Reflect.construct(e,n||[],Oy(t).constructor):e.apply(t,n))}function cEe(t,e){if(e&&(cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uEe(t)}function uEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n5=function(){return!!t})()}function Oy(t){return Oy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Oy(t)}function fEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TS(t,e)}function TS(t,e){return TS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},TS(t,e)}function m_(t,e,n){return e=r5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r5(t){var e=hEe(t,"string");return cf(e)=="symbol"?e:e+""}function hEe(t,e){if(cf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dEe=function(e,n,r,i,o){var a=o.x1,s=o.x2,l=o.y1,c=o.y2,u=o.xAxis,f=o.yAxis;if(!u||!f)return null;var h=HA({x:u.scale,y:f.scale}),d={x:e?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(l,{position:"start"}):h.y.rangeMin},v={x:n?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(c,{position:"end"}):h.y.rangeMax};return Co(o,"discard")&&(!h.isInRange(d)||!h.isInRange(v))?null:zB(d,v)},g_=function(t){function e(){return oEe(this,e),lEe(this,e,arguments)}return fEe(e,t),sEe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,o=r.x2,a=r.y1,s=r.y2,l=r.className,c=r.alwaysShow,u=r.clipPathId;ao(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Vn(i),h=Vn(o),d=Vn(a),v=Vn(s),y=this.props.shape;if(!f&&!h&&!d&&!v&&!y)return null;var g=dEe(f,h,d,v,this.props);if(!g&&!y)return null;var p=Co(this.props,"hidden")?"url(#".concat(u,")"):void 0;return G.createElement(St,{className:_t("recharts-reference-area",l)},e.renderRect(y,XD(XD({clipPath:p},Ke(this.props,!0)),g)),Qn.renderCallByParent(this.props,g))}}])}(G.Component);m_(g_,"displayName","ReferenceArea");m_(g_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});m_(g_,"renderRect",function(t,e){var n;return G.isValidElement(t)?n=G.cloneElement(t,e):ot(t)?n=t(e):n=G.createElement($A,ES({},e,{className:"recharts-reference-area-rect"})),n});function i5(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function pEe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return lSe(r,n)}function mEe(t,e,n){var r=n==="width",i=t.x,o=t.y,a=t.width,s=t.height;return e===1?{start:r?i:o,end:r?i+a:o+s}:{start:r?i+a:o+s,end:r?i:o}}function Iy(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function gEe(t,e){return i5(t,e+1)}function vEe(t,e,n,r,i){for(var o=(r||[]).slice(),a=e.start,s=e.end,l=0,c=1,u=a,f=function(){var v=r==null?void 0:r[l];if(v===void 0)return{v:i5(r,c)};var y=l,g,p=function(){return g===void 0&&(g=n(v,y)),g},x=v.coordinate,_=l===0||Iy(t,x,p,u,s);_||(l=0,u=a,c+=1),_&&(u=x+t*(p()/2+i),l+=c)},h;c<=o.length;)if(h=f(),h)return h.v;return[]}function Ep(t){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(t)}function KD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KD(Object(n),!0).forEach(function(r){yEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yEe(t,e,n){return e=_Ee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Ee(t){var e=xEe(t,"string");return Ep(e)=="symbol"?e:e+""}function xEe(t,e){if(Ep(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bEe(t,e,n,r,i){for(var o=(r||[]).slice(),a=o.length,s=e.start,l=e.end,c=function(h){var d=o[h],v,y=function(){return v===void 0&&(v=n(d,h)),v};if(h===a-1){var g=t*(d.coordinate+t*y()/2-l);o[h]=d=xr(xr({},d),{},{tickCoord:g>0?d.coordinate-g*t:d.coordinate})}else o[h]=d=xr(xr({},d),{},{tickCoord:d.coordinate});var p=Iy(t,d.tickCoord,y,s,l);p&&(l=d.tickCoord-t*(y()/2+i),o[h]=xr(xr({},d),{},{isShow:!0}))},u=a-1;u>=0;u--)c(u);return o}function wEe(t,e,n,r,i,o){var a=(r||[]).slice(),s=a.length,l=e.start,c=e.end;if(o){var u=r[s-1],f=n(u,s-1),h=t*(u.coordinate+t*f/2-c);a[s-1]=u=xr(xr({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate});var d=Iy(t,u.tickCoord,function(){return f},l,c);d&&(c=u.tickCoord-t*(f/2+i),a[s-1]=xr(xr({},u),{},{isShow:!0}))}for(var v=o?s-1:s,y=function(x){var _=a[x],T,w=function(){return T===void 0&&(T=n(_,x)),T};if(x===0){var M=t*(_.coordinate-t*w()/2-l);a[x]=_=xr(xr({},_),{},{tickCoord:M<0?_.coordinate-M*t:_.coordinate})}else a[x]=_=xr(xr({},_),{},{tickCoord:_.coordinate});var b=Iy(t,_.tickCoord,w,l,c);b&&(l=_.tickCoord+t*(w()/2+i),a[x]=xr(xr({},_),{},{isShow:!0}))},g=0;g<v;g++)y(g);return a}function QA(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,a=t.minTickGap,s=t.orientation,l=t.interval,c=t.tickFormatter,u=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(Ae(l)||so.isSsr)return gEe(i,typeof l=="number"&&Ae(l)?l:0);var h=[],d=s==="top"||s==="bottom"?"width":"height",v=u&&d==="width"?ld(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},y=function(_,T){var w=ot(c)?c(_.value,T):_.value;return d==="width"?pEe(ld(w,{fontSize:e,letterSpacing:n}),v,f):ld(w,{fontSize:e,letterSpacing:n})[d]},g=i.length>=2?kr(i[1].coordinate-i[0].coordinate):1,p=mEe(o,g,d);return l==="equidistantPreserveStart"?vEe(g,p,y,i,a):(l==="preserveStart"||l==="preserveStartEnd"?h=wEe(g,p,y,i,a,l==="preserveStartEnd"):h=bEe(g,p,y,i,a),h.filter(function(x){return x.isShow}))}var SEe=["viewBox"],EEe=["viewBox"],TEe=["ticks"];function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}function hu(){return hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hu.apply(this,arguments)}function YD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YD(Object(n),!0).forEach(function(r){ZA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ab(t,e){if(t==null)return{};var n=AEe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function AEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function MEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a5(r.key),r)}}function PEe(t,e,n){return e&&QD(t.prototype,e),n&&QD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function CEe(t,e,n){return e=Ny(e),REe(t,o5()?Reflect.construct(e,n||[],Ny(t).constructor):e.apply(t,n))}function REe(t,e){if(e&&(uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OEe(t)}function OEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o5=function(){return!!t})()}function Ny(t){return Ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ny(t)}function IEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AS(t,e)}function AS(t,e){return AS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},AS(t,e)}function ZA(t,e,n){return e=a5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a5(t){var e=NEe(t,"string");return uf(e)=="symbol"?e:e+""}function NEe(t,e){if(uf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gf=function(t){function e(n){var r;return MEe(this,e),r=CEe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return IEe(e,t),PEe(e,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,a=Ab(r,SEe),s=this.props,l=s.viewBox,c=Ab(s,EEe);return!Su(o,l)||!Su(a,c)||!Su(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,a=i.y,s=i.width,l=i.height,c=i.orientation,u=i.tickSize,f=i.mirror,h=i.tickMargin,d,v,y,g,p,x,_=f?-1:1,T=r.tickSize||u,w=Ae(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":d=v=r.coordinate,g=a+ +!f*l,y=g-_*T,x=y-_*h,p=w;break;case"left":y=g=r.coordinate,v=o+ +!f*s,d=v-_*T,p=d-_*h,x=w;break;case"right":y=g=r.coordinate,v=o+ +f*s,d=v+_*T,p=d+_*h,x=w;break;default:d=v=r.coordinate,g=a+ +f*l,y=g+_*T,x=y+_*h,p=w;break}return{line:{x1:d,y1:y,x2:v,y2:g},tick:{x:p,y:x}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a;switch(i){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,f=Cr(Cr(Cr({},Ke(this.props,!1)),Ke(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!c||l==="bottom"&&c);f=Cr(Cr({},f),{},{x1:i,y1:o+h*s,x2:i+a,y2:o+h*s})}else{var d=+(l==="left"&&!c||l==="right"&&c);f=Cr(Cr({},f),{},{x1:i+d*a,y1:o,x2:i+d*a,y2:o+s})}return G.createElement("line",hu({},f,{className:_t("recharts-cartesian-axis-line",fi(u,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var a=this,s=this.props,l=s.tickLine,c=s.stroke,u=s.tick,f=s.tickFormatter,h=s.unit,d=QA(Cr(Cr({},this.props),{},{ticks:r}),i,o),v=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),g=Ke(this.props,!1),p=Ke(u,!1),x=Cr(Cr({},g),{},{fill:"none"},Ke(l,!1)),_=d.map(function(T,w){var M=a.getTickLineCoord(T),b=M.line,A=M.tick,E=Cr(Cr(Cr(Cr({textAnchor:v,verticalAnchor:y},g),{},{stroke:"none",fill:c},p),A),{},{index:w,payload:T,visibleTicksCount:d.length,tickFormatter:f});return G.createElement(St,hu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},Bl(a.props,T,w)),l&&G.createElement("line",hu({},x,b,{className:_t("recharts-cartesian-axis-tick-line",fi(l,"className"))})),u&&e.renderTickItem(u,E,"".concat(ot(f)?f(T.value,w):T.value).concat(h||"")))});return G.createElement("g",{className:"recharts-cartesian-axis-ticks"},_)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,a=i.width,s=i.height,l=i.ticksGenerator,c=i.className,u=i.hide;if(u)return null;var f=this.props,h=f.ticks,d=Ab(f,TEe),v=h;return ot(l)&&(v=h&&h.length>0?l(this.props):l(d)),a<=0||s<=0||!v||!v.length?null:G.createElement(St,{className:_t("recharts-cartesian-axis",c),ref:function(g){r.layerReference=g}},o&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Qn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var a;return G.isValidElement(r)?a=G.cloneElement(r,i):ot(r)?a=r(i):a=G.createElement($l,hu({},i,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(V.Component);ZA(Gf,"displayName","CartesianAxis");ZA(Gf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var DEe=["x1","y1","x2","y2","key"],LEe=["offset"];function Wl(t){"@babel/helpers - typeof";return Wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wl(t)}function ZD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Er(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZD(Object(n),!0).forEach(function(r){kEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kEe(t,e,n){return e=jEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jEe(t){var e=UEe(t,"string");return Wl(e)=="symbol"?e:e+""}function UEe(t,e){if(Wl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bl(){return bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bl.apply(this,arguments)}function JD(t,e){if(t==null)return{};var n=FEe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function FEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var VEe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,o=e.y,a=e.width,s=e.height,l=e.ry;return G.createElement("rect",{x:i,y:o,ry:l,width:a,height:s,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function s5(t,e){var n;if(G.isValidElement(t))n=G.cloneElement(t,e);else if(ot(t))n=t(e);else{var r=e.x1,i=e.y1,o=e.x2,a=e.y2,s=e.key,l=JD(e,DEe),c=Ke(l,!1);c.offset;var u=JD(c,LEe);n=G.createElement("line",bl({},u,{x1:r,y1:i,x2:o,y2:a,fill:"none",key:s}))}return n}function BEe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,o=t.horizontalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,l){var c=Er(Er({},t),{},{x1:e,y1:s,x2:e+n,y2:s,key:"line-".concat(l),index:l});return s5(i,c)});return G.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function $Ee(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,o=t.verticalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,l){var c=Er(Er({},t),{},{x1:s,y1:e,x2:s,y2:e+n,key:"line-".concat(l),index:l});return s5(i,c)});return G.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function zEe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,o=t.width,a=t.height,s=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var u=s.map(function(h){return Math.round(h+i-i)}).sort(function(h,d){return h-d});i!==u[0]&&u.unshift(0);var f=u.map(function(h,d){var v=!u[d+1],y=v?i+a-h:u[d+1]-h;if(y<=0)return null;var g=d%e.length;return G.createElement("rect",{key:"react-".concat(d),y:h,x:r,height:y,width:o,stroke:"none",fill:e[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return G.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function HEe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,o=t.x,a=t.y,s=t.width,l=t.height,c=t.verticalPoints;if(!n||!r||!r.length)return null;var u=c.map(function(h){return Math.round(h+o-o)}).sort(function(h,d){return h-d});o!==u[0]&&u.unshift(0);var f=u.map(function(h,d){var v=!u[d+1],y=v?o+s-h:u[d+1]-h;if(y<=0)return null;var g=d%r.length;return G.createElement("rect",{key:"react-".concat(d),x:h,y:a,width:y,height:l,stroke:"none",fill:r[g],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return G.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var GEe=function(e,n){var r=e.xAxis,i=e.width,o=e.height,a=e.offset;return aB(QA(Er(Er(Er({},Gf.defaultProps),r),{},{ticks:oa(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.left,a.left+a.width,n)},WEe=function(e,n){var r=e.yAxis,i=e.width,o=e.height,a=e.offset;return aB(QA(Er(Er(Er({},Gf.defaultProps),r),{},{ticks:oa(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.top,a.top+a.height,n)},Dc={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Wf(t){var e,n,r,i,o,a,s=qA(),l=XA(),c=NSe(),u=Er(Er({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Dc.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Dc.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Dc.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Dc.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:Dc.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:Dc.verticalFill,x:Ae(t.x)?t.x:c.left,y:Ae(t.y)?t.y:c.top,width:Ae(t.width)?t.width:c.width,height:Ae(t.height)?t.height:c.height}),f=u.x,h=u.y,d=u.width,v=u.height,y=u.syncWithTicks,g=u.horizontalValues,p=u.verticalValues,x=RSe(),_=OSe();if(!Ae(d)||d<=0||!Ae(v)||v<=0||!Ae(f)||f!==+f||!Ae(h)||h!==+h)return null;var T=u.verticalCoordinatesGenerator||GEe,w=u.horizontalCoordinatesGenerator||WEe,M=u.horizontalPoints,b=u.verticalPoints;if((!M||!M.length)&&ot(w)){var A=g&&g.length,E=w({yAxis:_?Er(Er({},_),{},{ticks:A?g:_.ticks}):void 0,width:s,height:l,offset:c},A?!0:y);ao(Array.isArray(E),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Wl(E),"]")),Array.isArray(E)&&(M=E)}if((!b||!b.length)&&ot(T)){var P=p&&p.length,R=T({xAxis:x?Er(Er({},x),{},{ticks:P?p:x.ticks}):void 0,width:s,height:l,offset:c},P?!0:y);ao(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Wl(R),"]")),Array.isArray(R)&&(b=R)}return G.createElement("g",{className:"recharts-cartesian-grid"},G.createElement(VEe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),G.createElement(BEe,bl({},u,{offset:c,horizontalPoints:M,xAxis:x,yAxis:_})),G.createElement($Ee,bl({},u,{offset:c,verticalPoints:b,xAxis:x,yAxis:_})),G.createElement(zEe,bl({},u,{horizontalPoints:M})),G.createElement(HEe,bl({},u,{verticalPoints:b})))}Wf.displayName="CartesianGrid";var qEe=["type","layout","connectNulls","ref"],XEe=["key"];function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function eL(t,e){if(t==null)return{};var n=KEe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function KEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function pd(){return pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pd.apply(this,arguments)}function tL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ri(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tL(Object(n),!0).forEach(function(r){Qi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lc(t){return JEe(t)||ZEe(t)||QEe(t)||YEe()}function YEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QEe(t,e){if(t){if(typeof t=="string")return MS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MS(t,e)}}function ZEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function JEe(t){if(Array.isArray(t))return MS(t)}function MS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function eTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c5(r.key),r)}}function tTe(t,e,n){return e&&nL(t.prototype,e),n&&nL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nTe(t,e,n){return e=Dy(e),rTe(t,l5()?Reflect.construct(e,n||[],Dy(t).constructor):e.apply(t,n))}function rTe(t,e){if(e&&(ff(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iTe(t)}function iTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l5=function(){return!!t})()}function Dy(t){return Dy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dy(t)}function oTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PS(t,e)}function PS(t,e){return PS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PS(t,e)}function Qi(t,e,n){return e=c5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c5(t){var e=aTe(t,"string");return ff(e)=="symbol"?e:e+""}function aTe(t,e){if(ff(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var As=function(t){function e(){var n;eTe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=nTe(this,e,[].concat(i)),Qi(n,"state",{isAnimationFinished:!0,totalLength:0}),Qi(n,"generateSimpleStrokeDasharray",function(a,s){return"".concat(s,"px ").concat(a-s,"px")}),Qi(n,"getStrokeDasharray",function(a,s,l){var c=l.reduce(function(p,x){return p+x});if(!c)return n.generateSimpleStrokeDasharray(s,a);for(var u=Math.floor(a/c),f=a%c,h=s-a,d=[],v=0,y=0;v<l.length;y+=l[v],++v)if(y+l[v]>f){d=[].concat(Lc(l.slice(0,v)),[f-y]);break}var g=d.length%2===0?[0,h]:[h];return[].concat(Lc(e.repeat(l,u)),Lc(d),g).map(function(p){return"".concat(p,"px")}).join(", ")}),Qi(n,"id",Jl("recharts-line-")),Qi(n,"pathRef",function(a){n.mainCurve=a}),Qi(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Qi(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return oTe(e,t),tTe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.points,s=o.xAxis,l=o.yAxis,c=o.layout,u=o.children,f=hi(u,em);if(!f)return null;var h=function(y,g){return{x:y.x,y:y.y,value:y.value,errorVal:Sn(y.payload,g)}},d={clipPath:r?"url(#clipPath-".concat(i,")"):null};return G.createElement(St,d,f.map(function(v){return G.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:a,xAxis:s,yAxis:l,layout:c,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,i,o){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,c=s.points,u=s.dataKey,f=Ke(this.props,!1),h=Ke(l,!0),d=c.map(function(y,g){var p=ri(ri(ri({key:"dot-".concat(g),r:3},f),h),{},{value:y.value,dataKey:u,cx:y.x,cy:y.y,index:g,payload:y.payload});return e.renderDotItem(l,p)}),v={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return G.createElement(St,pd({className:"recharts-line-dots",key:"dots"},v),d)}},{key:"renderCurveStatically",value:function(r,i,o,a){var s=this.props,l=s.type,c=s.layout,u=s.connectNulls;s.ref;var f=eL(s,qEe),h=ri(ri(ri({},Ke(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:r},a),{},{type:l,layout:c,connectNulls:u});return G.createElement(Il,pd({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var o=this,a=this.props,s=a.points,l=a.strokeDasharray,c=a.isAnimationActive,u=a.animationBegin,f=a.animationDuration,h=a.animationEasing,d=a.animationId,v=a.animateNewValues,y=a.width,g=a.height,p=this.state,x=p.prevPoints,_=p.totalLength;return G.createElement(co,{begin:u,duration:f,isActive:c,easing:h,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(T){var w=T.t;if(x){var M=x.length/s.length,b=s.map(function(N,O){var D=Math.floor(O*M);if(x[D]){var L=x[D],W=Un(L.x,N.x),$=Un(L.y,N.y);return ri(ri({},N),{},{x:W(w),y:$(w)})}if(v){var B=Un(y*2,N.x),X=Un(g/2,N.y);return ri(ri({},N),{},{x:B(w),y:X(w)})}return ri(ri({},N),{},{x:N.x,y:N.y})});return o.renderCurveStatically(b,r,i)}var A=Un(0,_),E=A(w),P;if(l){var R="".concat(l).split(/[,\s]+/gim).map(function(N){return parseFloat(N)});P=o.getStrokeDasharray(E,_,R)}else P=o.generateSimpleStrokeDasharray(_,E);return o.renderCurveStatically(s,r,i,{strokeDasharray:P})})}},{key:"renderCurve",value:function(r,i){var o=this.props,a=o.points,s=o.isAnimationActive,l=this.state,c=l.prevPoints,u=l.totalLength;return s&&a&&a.length&&(!c&&u>0||!zl(c,a))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(a,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,a=i.dot,s=i.points,l=i.className,c=i.xAxis,u=i.yAxis,f=i.top,h=i.left,d=i.width,v=i.height,y=i.isAnimationActive,g=i.id;if(o||!s||!s.length)return null;var p=this.state.isAnimationFinished,x=s.length===1,_=_t("recharts-line",l),T=c&&c.allowDataOverflow,w=u&&u.allowDataOverflow,M=T||w,b=ft(g)?this.id:g,A=(r=Ke(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},E=A.r,P=E===void 0?3:E,R=A.strokeWidth,N=R===void 0?2:R,O=ZF(a)?a:{},D=O.clipDot,L=D===void 0?!0:D,W=P*2+N;return G.createElement(St,{className:_},T||w?G.createElement("defs",null,G.createElement("clipPath",{id:"clipPath-".concat(b)},G.createElement("rect",{x:T?h:h-d/2,y:w?f:f-v/2,width:T?d:d*2,height:w?v:v*2})),!L&&G.createElement("clipPath",{id:"clipPath-dots-".concat(b)},G.createElement("rect",{x:h-W/2,y:f-W/2,width:d+W,height:v+W}))):null,!x&&this.renderCurve(M,b),this.renderErrorBar(M,b),(x||a)&&this.renderDots(M,L,b),(!y||p)&&Po.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var o=r.length%2!==0?[].concat(Lc(r),[0]):r,a=[],s=0;s<i;++s)a=[].concat(Lc(a),Lc(o));return a}},{key:"renderDotItem",value:function(r,i){var o;if(G.isValidElement(r))o=G.cloneElement(r,i);else if(ot(r))o=r(i);else{var a=i.key,s=eL(i,XEe),l=_t("recharts-line-dot",typeof r!="boolean"?r.className:"");o=G.createElement(tm,pd({key:a},s,{className:l}))}return o}}])}(V.PureComponent);Qi(As,"displayName","Line");Qi(As,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!so.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Qi(As,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,a=t.dataKey,s=t.bandSize,l=t.displayedData,c=t.offset,u=e.layout,f=l.map(function(h,d){var v=Sn(h,a);return u==="horizontal"?{x:fy({axis:n,ticks:i,bandSize:s,entry:h,index:d}),y:ft(v)?null:r.scale(v),value:v,payload:h}:{x:ft(v)?null:n.scale(v),y:fy({axis:r,ticks:o,bandSize:s,entry:h,index:d}),value:v,payload:h}});return ri({points:f,layout:u},c)});var sTe=["layout","type","stroke","connectNulls","isRange","ref"],lTe=["key"],u5;function hf(t){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(t)}function f5(t,e){if(t==null)return{};var n=cTe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cTe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function wl(){return wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wl.apply(this,arguments)}function rL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rL(Object(n),!0).forEach(function(r){bo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d5(r.key),r)}}function fTe(t,e,n){return e&&iL(t.prototype,e),n&&iL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function hTe(t,e,n){return e=Ly(e),dTe(t,h5()?Reflect.construct(e,n||[],Ly(t).constructor):e.apply(t,n))}function dTe(t,e){if(e&&(hf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pTe(t)}function pTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h5=function(){return!!t})()}function Ly(t){return Ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ly(t)}function mTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CS(t,e)}function CS(t,e){return CS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},CS(t,e)}function bo(t,e,n){return e=d5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d5(t){var e=gTe(t,"string");return hf(e)=="symbol"?e:e+""}function gTe(t,e){if(hf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Do=function(t){function e(){var n;uTe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=hTe(this,e,[].concat(i)),bo(n,"state",{isAnimationFinished:!0}),bo(n,"id",Jl("recharts-area-")),bo(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ot(a)&&a()}),bo(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ot(a)&&a()}),n}return mTe(e,t),fTe(e,[{key:"renderDots",value:function(r,i,o){var a=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(a&&!s)return null;var l=this.props,c=l.dot,u=l.points,f=l.dataKey,h=Ke(this.props,!1),d=Ke(c,!0),v=u.map(function(g,p){var x=$a($a($a({key:"dot-".concat(p),r:3},h),d),{},{index:p,cx:g.x,cy:g.y,dataKey:f,value:g.value,payload:g.payload,points:u});return e.renderDotItem(c,x)}),y={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return G.createElement(St,wl({className:"recharts-area-dots"},y),v)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,o=i.baseLine,a=i.points,s=i.strokeWidth,l=a[0].x,c=a[a.length-1].x,u=r*Math.abs(l-c),f=ts(a.map(function(h){return h.y||0}));return Ae(o)&&typeof o=="number"?f=Math.max(o,f):o&&Array.isArray(o)&&o.length&&(f=Math.max(ts(o.map(function(h){return h.y||0})),f)),Ae(f)?G.createElement("rect",{x:l<c?l:l-u,y:0,width:u,height:Math.floor(f+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,o=i.baseLine,a=i.points,s=i.strokeWidth,l=a[0].y,c=a[a.length-1].y,u=r*Math.abs(l-c),f=ts(a.map(function(h){return h.x||0}));return Ae(o)&&typeof o=="number"?f=Math.max(o,f):o&&Array.isArray(o)&&o.length&&(f=Math.max(ts(o.map(function(h){return h.x||0})),f)),Ae(f)?G.createElement("rect",{x:0,y:l<c?l:l-u,width:f+(s?parseInt("".concat(s),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,o,a){var s=this.props,l=s.layout,c=s.type,u=s.stroke,f=s.connectNulls,h=s.isRange;s.ref;var d=f5(s,sTe);return G.createElement(St,{clipPath:o?"url(#clipPath-".concat(a,")"):null},G.createElement(Il,wl({},Ke(d,!0),{points:r,connectNulls:f,type:c,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),u!=="none"&&G.createElement(Il,wl({},Ke(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:f,fill:"none",points:r})),u!=="none"&&h&&G.createElement(Il,wl({},Ke(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var o=this,a=this.props,s=a.points,l=a.baseLine,c=a.isAnimationActive,u=a.animationBegin,f=a.animationDuration,h=a.animationEasing,d=a.animationId,v=this.state,y=v.prevPoints,g=v.prevBaseLine;return G.createElement(co,{begin:u,duration:f,isActive:c,easing:h,from:{t:0},to:{t:1},key:"area-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var x=p.t;if(y){var _=y.length/s.length,T=s.map(function(A,E){var P=Math.floor(E*_);if(y[P]){var R=y[P],N=Un(R.x,A.x),O=Un(R.y,A.y);return $a($a({},A),{},{x:N(x),y:O(x)})}return A}),w;if(Ae(l)&&typeof l=="number"){var M=Un(g,l);w=M(x)}else if(ft(l)||jf(l)){var b=Un(g,0);w=b(x)}else w=l.map(function(A,E){var P=Math.floor(E*_);if(g[P]){var R=g[P],N=Un(R.x,A.x),O=Un(R.y,A.y);return $a($a({},A),{},{x:N(x),y:O(x)})}return A});return o.renderAreaStatically(T,w,r,i)}return G.createElement(St,null,G.createElement("defs",null,G.createElement("clipPath",{id:"animationClipPath-".concat(i)},o.renderClipRect(x))),G.createElement(St,{clipPath:"url(#animationClipPath-".concat(i,")")},o.renderAreaStatically(s,l,r,i)))})}},{key:"renderArea",value:function(r,i){var o=this.props,a=o.points,s=o.baseLine,l=o.isAnimationActive,c=this.state,u=c.prevPoints,f=c.prevBaseLine,h=c.totalLength;return l&&a&&a.length&&(!u&&h>0||!zl(u,a)||!zl(f,s))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(a,s,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,a=i.dot,s=i.points,l=i.className,c=i.top,u=i.left,f=i.xAxis,h=i.yAxis,d=i.width,v=i.height,y=i.isAnimationActive,g=i.id;if(o||!s||!s.length)return null;var p=this.state.isAnimationFinished,x=s.length===1,_=_t("recharts-area",l),T=f&&f.allowDataOverflow,w=h&&h.allowDataOverflow,M=T||w,b=ft(g)?this.id:g,A=(r=Ke(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},E=A.r,P=E===void 0?3:E,R=A.strokeWidth,N=R===void 0?2:R,O=ZF(a)?a:{},D=O.clipDot,L=D===void 0?!0:D,W=P*2+N;return G.createElement(St,{className:_},T||w?G.createElement("defs",null,G.createElement("clipPath",{id:"clipPath-".concat(b)},G.createElement("rect",{x:T?u:u-d/2,y:w?c:c-v/2,width:T?d:d*2,height:w?v:v*2})),!L&&G.createElement("clipPath",{id:"clipPath-dots-".concat(b)},G.createElement("rect",{x:u-W/2,y:c-W/2,width:d+W,height:v+W}))):null,x?null:this.renderArea(M,b),(a||x)&&this.renderDots(M,L,b),(!y||p)&&Po.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(V.PureComponent);u5=Do;bo(Do,"displayName","Area");bo(Do,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!so.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});bo(Do,"getBaseValue",function(t,e,n,r){var i=t.layout,o=t.baseValue,a=e.props.baseValue,s=a??o;if(Ae(s)&&typeof s=="number")return s;var l=i==="horizontal"?r:n,c=l.scale.domain();if(l.type==="number"){var u=Math.max(c[0],c[1]),f=Math.min(c[0],c[1]);return s==="dataMin"?f:s==="dataMax"||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return s==="dataMin"?c[0]:s==="dataMax"?c[1]:c[0]});bo(Do,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,o=t.xAxisTicks,a=t.yAxisTicks,s=t.bandSize,l=t.dataKey,c=t.stackedData,u=t.dataStartIndex,f=t.displayedData,h=t.offset,d=e.layout,v=c&&c.length,y=u5.getBaseValue(e,n,r,i),g=d==="horizontal",p=!1,x=f.map(function(T,w){var M;v?M=c[u+w]:(M=Sn(T,l),Array.isArray(M)?p=!0:M=[y,M]);var b=M[1]==null||v&&Sn(T,l)==null;return g?{x:fy({axis:r,ticks:o,bandSize:s,entry:T,index:w}),y:b?null:i.scale(M[1]),value:M,payload:T}:{x:b?null:r.scale(M[1]),y:fy({axis:i,ticks:a,bandSize:s,entry:T,index:w}),value:M,payload:T}}),_;return v||p?_=x.map(function(T){var w=Array.isArray(T.value)?T.value[0]:null;return g?{x:T.x,y:w!=null&&T.y!=null?i.scale(w):null}:{x:w!=null?r.scale(w):null,y:T.y}}):_=g?i.scale(y):r.scale(y),$a({points:x,baseLine:_,layout:d,isRange:p},h)});bo(Do,"renderDotItem",function(t,e){var n;if(G.isValidElement(t))n=G.cloneElement(t,e);else if(ot(t))n=t(e);else{var r=_t("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,o=f5(e,lTe);n=G.createElement(tm,wl({},o,{key:i,className:r}))}return n});function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function vTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yTe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g5(r.key),r)}}function _Te(t,e,n){return e&&yTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xTe(t,e,n){return e=ky(e),bTe(t,p5()?Reflect.construct(e,n||[],ky(t).constructor):e.apply(t,n))}function bTe(t,e){if(e&&(df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wTe(t)}function wTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p5=function(){return!!t})()}function ky(t){return ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ky(t)}function STe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RS(t,e)}function RS(t,e){return RS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},RS(t,e)}function m5(t,e,n){return e=g5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g5(t){var e=ETe(t,"string");return df(e)=="symbol"?e:e+""}function ETe(t,e){if(df(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OS(){return OS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OS.apply(this,arguments)}function TTe(t){var e=t.xAxisId,n=qA(),r=XA(),i=YB(e);return i==null?null:G.createElement(Gf,OS({},i,{className:_t("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return oa(a,!0)}}))}var Fo=function(t){function e(){return vTe(this,e),xTe(this,e,arguments)}return STe(e,t),_Te(e,[{key:"render",value:function(){return G.createElement(TTe,this.props)}}])}(G.Component);m5(Fo,"displayName","XAxis");m5(Fo,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}function ATe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MTe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_5(r.key),r)}}function PTe(t,e,n){return e&&MTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function CTe(t,e,n){return e=jy(e),RTe(t,v5()?Reflect.construct(e,n||[],jy(t).constructor):e.apply(t,n))}function RTe(t,e){if(e&&(pf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OTe(t)}function OTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v5=function(){return!!t})()}function jy(t){return jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jy(t)}function ITe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IS(t,e)}function IS(t,e){return IS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},IS(t,e)}function y5(t,e,n){return e=_5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _5(t){var e=NTe(t,"string");return pf(e)=="symbol"?e:e+""}function NTe(t,e){if(pf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(pf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NS(){return NS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NS.apply(this,arguments)}var DTe=function(e){var n=e.yAxisId,r=qA(),i=XA(),o=QB(n);return o==null?null:G.createElement(Gf,NS({},o,{className:_t("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return oa(s,!0)}}))},uo=function(t){function e(){return ATe(this,e),CTe(this,e,arguments)}return ITe(e,t),PTe(e,[{key:"render",value:function(){return G.createElement(DTe,this.props)}}])}(G.Component);y5(uo,"displayName","YAxis");y5(uo,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function oL(t){return UTe(t)||jTe(t)||kTe(t)||LTe()}function LTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kTe(t,e){if(t){if(typeof t=="string")return DS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DS(t,e)}}function jTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function UTe(t){if(Array.isArray(t))return DS(t)}function DS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var LS=function(e,n,r,i,o){var a=hi(e,YA),s=hi(e,p_),l=[].concat(oL(a),oL(s)),c=hi(e,g_),u="".concat(i,"Id"),f=i[0],h=n;if(l.length&&(h=l.reduce(function(y,g){if(g.props[u]===r&&Co(g.props,"extendDomain")&&Ae(g.props[f])){var p=g.props[f];return[Math.min(y[0],p),Math.max(y[1],p)]}return y},h)),c.length){var d="".concat(f,"1"),v="".concat(f,"2");h=c.reduce(function(y,g){if(g.props[u]===r&&Co(g.props,"extendDomain")&&Ae(g.props[d])&&Ae(g.props[v])){var p=g.props[d],x=g.props[v];return[Math.min(y[0],p,x),Math.max(y[1],p,x)]}return y},h)}return o&&o.length&&(h=o.reduce(function(y,g){return Ae(g)?[Math.min(y[0],g),Math.max(y[1],g)]:y},h)),h},x5={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function o(l,c,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var d=new i(u,f||l,h),v=n?n+c:c;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],d]:l._events[v].push(d):(l._events[v]=d,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},s.prototype.listeners=function(c){var u=n?n+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,v=new Array(d);h<d;h++)v[h]=f[h].fn;return v},s.prototype.listenerCount=function(c){var u=n?n+c:c,f=this._events[u];return f?f.fn?1:f.length:0},s.prototype.emit=function(c,u,f,h,d,v){var y=n?n+c:c;if(!this._events[y])return!1;var g=this._events[y],p=arguments.length,x,_;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),p){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,f),!0;case 4:return g.fn.call(g.context,u,f,h),!0;case 5:return g.fn.call(g.context,u,f,h,d),!0;case 6:return g.fn.call(g.context,u,f,h,d,v),!0}for(_=1,x=new Array(p-1);_<p;_++)x[_-1]=arguments[_];g.fn.apply(g.context,x)}else{var T=g.length,w;for(_=0;_<T;_++)switch(g[_].once&&this.removeListener(c,g[_].fn,void 0,!0),p){case 1:g[_].fn.call(g[_].context);break;case 2:g[_].fn.call(g[_].context,u);break;case 3:g[_].fn.call(g[_].context,u,f);break;case 4:g[_].fn.call(g[_].context,u,f,h);break;default:if(!x)for(w=1,x=new Array(p-1);w<p;w++)x[w-1]=arguments[w];g[_].fn.apply(g[_].context,x)}}return!0},s.prototype.on=function(c,u,f){return o(this,c,u,f,!1)},s.prototype.once=function(c,u,f){return o(this,c,u,f,!0)},s.prototype.removeListener=function(c,u,f,h){var d=n?n+c:c;if(!this._events[d])return this;if(!u)return a(this,d),this;var v=this._events[d];if(v.fn)v.fn===u&&(!h||v.once)&&(!f||v.context===f)&&a(this,d);else{for(var y=0,g=[],p=v.length;y<p;y++)(v[y].fn!==u||h&&!v[y].once||f&&v[y].context!==f)&&g.push(v[y]);g.length?this._events[d]=g.length===1?g[0]:g:a(this,d)}return this},s.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})(x5);var FTe=x5.exports;const VTe=Ft(FTe);var Mb=new VTe,Pb="recharts.syncMouseEvents";function Tp(t){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tp(t)}function BTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $Te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b5(r.key),r)}}function zTe(t,e,n){return e&&$Te(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cb(t,e,n){return e=b5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b5(t){var e=HTe(t,"string");return Tp(e)=="symbol"?e:e+""}function HTe(t,e){if(Tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var GTe=function(){function t(){BTe(this,t),Cb(this,"activeIndex",0),Cb(this,"coordinateList",[]),Cb(this,"layout","horizontal")}return zTe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,o=i===void 0?null:i,a=n.container,s=a===void 0?null:a,l=n.layout,c=l===void 0?null:l,u=n.offset,f=u===void 0?null:u,h=n.mouseHandlerCallback,d=h===void 0?null:h;this.coordinateList=(r=o??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=c??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=d??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,a=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=o+l+c,h=a+this.offset.top+s/2+u;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function WTe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Ae(r)&&Ae(i))return!0}return!1}function qTe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function w5(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle,a=Qt(e,n,r,i),s=Qt(e,n,r,o);return{points:[a,s],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function XTe(t,e,n){var r,i,o,a;if(t==="horizontal")r=e.x,o=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,f=e.angle,h=Qt(s,l,c,f),d=Qt(s,l,u,f);r=h.x,i=h.y,o=d.x,a=d.y}else return w5(e);return[{x:r,y:i},{x:o,y:a}]}function Ap(t){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ap(t)}function aL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aL(Object(n),!0).forEach(function(r){KTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KTe(t,e,n){return e=YTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YTe(t){var e=QTe(t,"string");return Ap(e)=="symbol"?e:e+""}function QTe(t,e){if(Ap(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZTe(t){var e,n,r=t.element,i=t.tooltipEventType,o=t.isActive,a=t.activeCoordinate,s=t.activePayload,l=t.offset,c=t.activeTooltipIndex,u=t.tooltipAxisBandSize,f=t.layout,h=t.chartName,d=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!d||!o||!a||h!=="ScatterChart"&&i!=="axis")return null;var v,y=Il;if(h==="ScatterChart")v=a,y=abe;else if(h==="BarChart")v=qTe(f,a,l,u),y=$A;else if(f==="radial"){var g=w5(a),p=g.cx,x=g.cy,_=g.radius,T=g.startAngle,w=g.endAngle;v={cx:p,cy:x,startAngle:T,endAngle:w,innerRadius:_,outerRadius:_},y=vB}else v={points:XTe(f,a,l)},y=Il;var M=wg(wg(wg(wg({stroke:"#ccc",pointerEvents:"none"},l),v),Ke(d,!1)),{},{payload:s,payloadIndex:c,className:_t("recharts-tooltip-cursor",d.className)});return V.isValidElement(d)?V.cloneElement(d,M):V.createElement(y,M)}var JTe=["item"],eAe=["children","className","width","height","style","compact","title","desc"];function mf(t){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(t)}function du(){return du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},du.apply(this,arguments)}function sL(t,e){return rAe(t)||nAe(t,e)||E5(t,e)||tAe()}function tAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function rAe(t){if(Array.isArray(t))return t}function lL(t,e){if(t==null)return{};var n=iAe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iAe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function oAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aAe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T5(r.key),r)}}function sAe(t,e,n){return e&&aAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lAe(t,e,n){return e=Uy(e),cAe(t,S5()?Reflect.construct(e,n||[],Uy(t).constructor):e.apply(t,n))}function cAe(t,e){if(e&&(mf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uAe(t)}function uAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S5=function(){return!!t})()}function Uy(t){return Uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uy(t)}function fAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kS(t,e)}function kS(t,e){return kS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kS(t,e)}function gf(t){return pAe(t)||dAe(t)||E5(t)||hAe()}function hAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E5(t,e){if(t){if(typeof t=="string")return jS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jS(t,e)}}function dAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pAe(t){if(Array.isArray(t))return jS(t)}function jS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ce(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cL(Object(n),!0).forEach(function(r){it(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function it(t,e,n){return e=T5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T5(t){var e=mAe(t,"string");return mf(e)=="symbol"?e:e+""}function mAe(t,e){if(mf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gAe={xAxis:["bottom","top"],yAxis:["left","right"]},vAe={width:"100%",height:"100%"},A5={x:0,y:0};function Sg(t){return t}var yAe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},_Ae=function(e,n,r,i){var o=n.find(function(u){return u&&u.index===r});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,s=i.radius;return ce(ce(ce({},i),Qt(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var l=o.coordinate,c=i.angle;return ce(ce(ce({},i),Qt(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return A5},v_=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,a=(r??[]).reduce(function(s,l){var c=l.props.data;return c&&c.length?[].concat(gf(s),gf(c)):s},[]);return a.length>0?a:e&&e.length&&Ae(i)&&Ae(o)?e.slice(i,o+1):[]};function M5(t){return t==="number"?[0,"auto"]:void 0}var US=function(e,n,r,i){var o=e.graphicalItems,a=e.tooltipAxis,s=v_(n,e);return r<0||!o||!o.length||r>=s.length?null:o.reduce(function(l,c){var u,f=(u=c.props.data)!==null&&u!==void 0?u:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(a.dataKey&&!a.allowDuplicatedCategory){var d=f===void 0?s:f;h=jv(d,a.dataKey,i)}else h=f&&f[r]||s[r];return h?[].concat(gf(l),[fB(c,h)]):l},[])},uL=function(e,n,r,i){var o=i||{x:e.chartX,y:e.chartY},a=yAe(o,r),s=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=Gye(a,s,c,l);if(u>=0&&c){var f=c[u]&&c[u].value,h=US(e,n,u,f),d=_Ae(r,s,u,o);return{activeTooltipIndex:u,activeLabel:f,activePayload:h,activeCoordinate:d}}return null},xAe=function(e,n){var r=n.axes,i=n.graphicalItems,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,f=e.children,h=e.stackOffset,d=oB(u,o);return r.reduce(function(v,y){var g,p=y.type.defaultProps!==void 0?ce(ce({},y.type.defaultProps),y.props):y.props,x=p.type,_=p.dataKey,T=p.allowDataOverflow,w=p.allowDuplicatedCategory,M=p.scale,b=p.ticks,A=p.includeHidden,E=p[a];if(v[E])return v;var P=v_(e.data,{graphicalItems:i.filter(function(q){var ee,me=a in q.props?q.props[a]:(ee=q.type.defaultProps)===null||ee===void 0?void 0:ee[a];return me===E}),dataStartIndex:l,dataEndIndex:c}),R=P.length,N,O,D;WTe(p.domain,T,x)&&(N=Qw(p.domain,null,T),d&&(x==="number"||M!=="auto")&&(D=ud(P,_,"category")));var L=M5(x);if(!N||N.length===0){var W,$=(W=p.domain)!==null&&W!==void 0?W:L;if(_){if(N=ud(P,_,x),x==="category"&&d){var B=kre(N);w&&B?(O=N,N=Ey(0,R)):w||(N=RN($,N,y).reduce(function(q,ee){return q.indexOf(ee)>=0?q:[].concat(gf(q),[ee])},[]))}else if(x==="category")w?N=N.filter(function(q){return q!==""&&!ft(q)}):N=RN($,N,y).reduce(function(q,ee){return q.indexOf(ee)>=0||ee===""||ft(ee)?q:[].concat(gf(q),[ee])},[]);else if(x==="number"){var X=Yye(P,i.filter(function(q){var ee,me,_e=a in q.props?q.props[a]:(ee=q.type.defaultProps)===null||ee===void 0?void 0:ee[a],Ne="hide"in q.props?q.props.hide:(me=q.type.defaultProps)===null||me===void 0?void 0:me.hide;return _e===E&&(A||!Ne)}),_,o,u);X&&(N=X)}d&&(x==="number"||M!=="auto")&&(D=ud(P,_,"category"))}else d?N=Ey(0,R):s&&s[E]&&s[E].hasStack&&x==="number"?N=h==="expand"?[0,1]:uB(s[E].stackGroups,l,c):N=iB(P,i.filter(function(q){var ee=a in q.props?q.props[a]:q.type.defaultProps[a],me="hide"in q.props?q.props.hide:q.type.defaultProps.hide;return ee===E&&(A||!me)}),x,u,!0);if(x==="number")N=LS(f,N,E,o,b),$&&(N=Qw($,N,T));else if(x==="category"&&$){var K=$,z=N.every(function(q){return K.indexOf(q)>=0});z&&(N=K)}}return ce(ce({},v),{},it({},E,ce(ce({},p),{},{axisType:o,domain:N,categoricalDomain:D,duplicateDomain:O,originalDomain:(g=p.domain)!==null&&g!==void 0?g:L,isCategorical:d,layout:u})))},{})},bAe=function(e,n){var r=n.graphicalItems,i=n.Axis,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,f=e.children,h=v_(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),d=h.length,v=oB(u,o),y=-1;return r.reduce(function(g,p){var x=p.type.defaultProps!==void 0?ce(ce({},p.type.defaultProps),p.props):p.props,_=x[a],T=M5("number");if(!g[_]){y++;var w;return v?w=Ey(0,d):s&&s[_]&&s[_].hasStack?(w=uB(s[_].stackGroups,l,c),w=LS(f,w,_,o)):(w=Qw(T,iB(h,r.filter(function(M){var b,A,E=a in M.props?M.props[a]:(b=M.type.defaultProps)===null||b===void 0?void 0:b[a],P="hide"in M.props?M.props.hide:(A=M.type.defaultProps)===null||A===void 0?void 0:A.hide;return E===_&&!P}),"number",u),i.defaultProps.allowDataOverflow),w=LS(f,w,_,o)),ce(ce({},g),{},it({},_,ce(ce({axisType:o},i.defaultProps),{},{hide:!0,orientation:fi(gAe,"".concat(o,".").concat(y%2),null),domain:w,originalDomain:T,isCategorical:v,layout:u})))}return g},{})},wAe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,o=n.AxisComp,a=n.graphicalItems,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.children,f="".concat(i,"Id"),h=hi(u,o),d={};return h&&h.length?d=xAe(e,{axes:h,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:c}):a&&a.length&&(d=bAe(e,{Axis:o,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:c})),d},SAe=function(e){var n=Ya(e),r=oa(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:mA(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:hy(n,r)}},fL=function(e){var n=e.children,r=e.defaultShowTooltip,i=ai(n,of),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},EAe=function(e){return!e||!e.length?!1:e.some(function(n){var r=fa(n&&n.type);return r&&r.indexOf("Bar")>=0})},hL=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},TAe=function(e,n){var r=e.props,i=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,s=e.yAxisMap,l=s===void 0?{}:s,c=r.width,u=r.height,f=r.children,h=r.margin||{},d=ai(f,of),v=ai(f,ha),y=Object.keys(l).reduce(function(w,M){var b=l[M],A=b.orientation;return!b.mirror&&!b.hide?ce(ce({},w),{},it({},A,w[A]+b.width)):w},{left:h.left||0,right:h.right||0}),g=Object.keys(a).reduce(function(w,M){var b=a[M],A=b.orientation;return!b.mirror&&!b.hide?ce(ce({},w),{},it({},A,fi(w,"".concat(A))+b.height)):w},{top:h.top||0,bottom:h.bottom||0}),p=ce(ce({},g),y),x=p.bottom;d&&(p.bottom+=d.props.height||of.defaultProps.height),v&&n&&(p=Xye(p,i,r,n));var _=c-p.left-p.right,T=u-p.top-p.bottom;return ce(ce({brushBottom:x},p),{},{width:Math.max(_,0),height:Math.max(T,0)})},AAe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},y_=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,o=i===void 0?"axis":i,a=e.validateTooltipEventTypes,s=a===void 0?["axis"]:a,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,f=e.defaultProps,h=function(p,x){var _=x.graphicalItems,T=x.stackGroups,w=x.offset,M=x.updateId,b=x.dataStartIndex,A=x.dataEndIndex,E=p.barSize,P=p.layout,R=p.barGap,N=p.barCategoryGap,O=p.maxBarSize,D=hL(P),L=D.numericAxisName,W=D.cateAxisName,$=EAe(_),B=[];return _.forEach(function(X,K){var z=v_(p.data,{graphicalItems:[X],dataStartIndex:b,dataEndIndex:A}),q=X.type.defaultProps!==void 0?ce(ce({},X.type.defaultProps),X.props):X.props,ee=q.dataKey,me=q.maxBarSize,_e=q["".concat(L,"Id")],Ne=q["".concat(W,"Id")],We={},Ue=l.reduce(function(Mt,jt){var F=x["".concat(jt.axisType,"Map")],k=q["".concat(jt.axisType,"Id")];F&&F[k]||jt.axisType==="zAxis"||Gl();var re=F[k];return ce(ce({},Mt),{},it(it({},jt.axisType,re),"".concat(jt.axisType,"Ticks"),oa(re)))},We),fe=Ue[W],Re=Ue["".concat(W,"Ticks")],Ee=T&&T[_e]&&T[_e].hasStack&&o0e(X,T[_e].stackGroups),H=fa(X.type).indexOf("Bar")>=0,lt=hy(fe,Re),be=[],Le=$&&Wye({barSize:E,stackGroups:T,totalSize:AAe(Ue,W)});if(H){var ke,mt,Ye=ft(me)?O:me,Ze=(ke=(mt=hy(fe,Re,!0))!==null&&mt!==void 0?mt:Ye)!==null&&ke!==void 0?ke:0;be=qye({barGap:R,barCategoryGap:N,bandSize:Ze!==lt?Ze:lt,sizeList:Le[Ne],maxBarSize:Ye}),Ze!==lt&&(be=be.map(function(Mt){return ce(ce({},Mt),{},{position:ce(ce({},Mt.position),{},{offset:Mt.position.offset-Ze/2})})}))}var ht=X&&X.type&&X.type.getComposedData;ht&&B.push({props:ce(ce({},ht(ce(ce({},Ue),{},{displayedData:z,props:p,dataKey:ee,item:X,bandSize:lt,barPosition:be,offset:w,stackedData:Ee,layout:P,dataStartIndex:b,dataEndIndex:A}))),{},it(it(it({key:X.key||"item-".concat(K)},L,Ue[L]),W,Ue[W]),"animationId",M)),childIndex:qre(X,p.children),item:X})}),B},d=function(p,x){var _=p.props,T=p.dataStartIndex,w=p.dataEndIndex,M=p.updateId;if(!EO({props:_}))return null;var b=_.children,A=_.layout,E=_.stackOffset,P=_.data,R=_.reverseStackOrder,N=hL(A),O=N.numericAxisName,D=N.cateAxisName,L=hi(b,r),W=r0e(P,L,"".concat(O,"Id"),"".concat(D,"Id"),E,R),$=l.reduce(function(q,ee){var me="".concat(ee.axisType,"Map");return ce(ce({},q),{},it({},me,wAe(_,ce(ce({},ee),{},{graphicalItems:L,stackGroups:ee.axisType===O&&W,dataStartIndex:T,dataEndIndex:w}))))},{}),B=TAe(ce(ce({},$),{},{props:_,graphicalItems:L}),x==null?void 0:x.legendBBox);Object.keys($).forEach(function(q){$[q]=u(_,$[q],B,q.replace("Map",""),n)});var X=$["".concat(D,"Map")],K=SAe(X),z=h(_,ce(ce({},$),{},{dataStartIndex:T,dataEndIndex:w,updateId:M,graphicalItems:L,stackGroups:W,offset:B}));return ce(ce({formattedGraphicalItems:z,graphicalItems:L,offset:B,stackGroups:W},K),$)},v=function(g){function p(x){var _,T,w;return oAe(this,p),w=lAe(this,p,[x]),it(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),it(w,"accessibilityManager",new GTe),it(w,"handleLegendBBoxUpdate",function(M){if(M){var b=w.state,A=b.dataStartIndex,E=b.dataEndIndex,P=b.updateId;w.setState(ce({legendBBox:M},d({props:w.props,dataStartIndex:A,dataEndIndex:E,updateId:P},ce(ce({},w.state),{},{legendBBox:M}))))}}),it(w,"handleReceiveSyncEvent",function(M,b,A){if(w.props.syncId===M){if(A===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(b)}}),it(w,"handleBrushChange",function(M){var b=M.startIndex,A=M.endIndex;if(b!==w.state.dataStartIndex||A!==w.state.dataEndIndex){var E=w.state.updateId;w.setState(function(){return ce({dataStartIndex:b,dataEndIndex:A},d({props:w.props,dataStartIndex:b,dataEndIndex:A,updateId:E},w.state))}),w.triggerSyncEvent({dataStartIndex:b,dataEndIndex:A})}}),it(w,"handleMouseEnter",function(M){var b=w.getMouseInfo(M);if(b){var A=ce(ce({},b),{},{isTooltipActive:!0});w.setState(A),w.triggerSyncEvent(A);var E=w.props.onMouseEnter;ot(E)&&E(A,M)}}),it(w,"triggeredAfterMouseMove",function(M){var b=w.getMouseInfo(M),A=b?ce(ce({},b),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(A),w.triggerSyncEvent(A);var E=w.props.onMouseMove;ot(E)&&E(A,M)}),it(w,"handleItemMouseEnter",function(M){w.setState(function(){return{isTooltipActive:!0,activeItem:M,activePayload:M.tooltipPayload,activeCoordinate:M.tooltipPosition||{x:M.cx,y:M.cy}}})}),it(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),it(w,"handleMouseMove",function(M){M.persist(),w.throttleTriggeredAfterMouseMove(M)}),it(w,"handleMouseLeave",function(M){w.throttleTriggeredAfterMouseMove.cancel();var b={isTooltipActive:!1};w.setState(b),w.triggerSyncEvent(b);var A=w.props.onMouseLeave;ot(A)&&A(b,M)}),it(w,"handleOuterEvent",function(M){var b=Wre(M),A=fi(w.props,"".concat(b));if(b&&ot(A)){var E,P;/.*touch.*/i.test(b)?P=w.getMouseInfo(M.changedTouches[0]):P=w.getMouseInfo(M),A((E=P)!==null&&E!==void 0?E:{},M)}}),it(w,"handleClick",function(M){var b=w.getMouseInfo(M);if(b){var A=ce(ce({},b),{},{isTooltipActive:!0});w.setState(A),w.triggerSyncEvent(A);var E=w.props.onClick;ot(E)&&E(A,M)}}),it(w,"handleMouseDown",function(M){var b=w.props.onMouseDown;if(ot(b)){var A=w.getMouseInfo(M);b(A,M)}}),it(w,"handleMouseUp",function(M){var b=w.props.onMouseUp;if(ot(b)){var A=w.getMouseInfo(M);b(A,M)}}),it(w,"handleTouchMove",function(M){M.changedTouches!=null&&M.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(M.changedTouches[0])}),it(w,"handleTouchStart",function(M){M.changedTouches!=null&&M.changedTouches.length>0&&w.handleMouseDown(M.changedTouches[0])}),it(w,"handleTouchEnd",function(M){M.changedTouches!=null&&M.changedTouches.length>0&&w.handleMouseUp(M.changedTouches[0])}),it(w,"triggerSyncEvent",function(M){w.props.syncId!==void 0&&Mb.emit(Pb,w.props.syncId,M,w.eventEmitterSymbol)}),it(w,"applySyncEvent",function(M){var b=w.props,A=b.layout,E=b.syncMethod,P=w.state.updateId,R=M.dataStartIndex,N=M.dataEndIndex;if(M.dataStartIndex!==void 0||M.dataEndIndex!==void 0)w.setState(ce({dataStartIndex:R,dataEndIndex:N},d({props:w.props,dataStartIndex:R,dataEndIndex:N,updateId:P},w.state)));else if(M.activeTooltipIndex!==void 0){var O=M.chartX,D=M.chartY,L=M.activeTooltipIndex,W=w.state,$=W.offset,B=W.tooltipTicks;if(!$)return;if(typeof E=="function")L=E(B,M);else if(E==="value"){L=-1;for(var X=0;X<B.length;X++)if(B[X].value===M.activeLabel){L=X;break}}var K=ce(ce({},$),{},{x:$.left,y:$.top}),z=Math.min(O,K.x+K.width),q=Math.min(D,K.y+K.height),ee=B[L]&&B[L].value,me=US(w.state,w.props.data,L),_e=B[L]?{x:A==="horizontal"?B[L].coordinate:z,y:A==="horizontal"?q:B[L].coordinate}:A5;w.setState(ce(ce({},M),{},{activeLabel:ee,activeCoordinate:_e,activePayload:me,activeTooltipIndex:L}))}else w.setState(M)}),it(w,"renderCursor",function(M){var b,A=w.state,E=A.isTooltipActive,P=A.activeCoordinate,R=A.activePayload,N=A.offset,O=A.activeTooltipIndex,D=A.tooltipAxisBandSize,L=w.getTooltipEventType(),W=(b=M.props.active)!==null&&b!==void 0?b:E,$=w.props.layout,B=M.key||"_recharts-cursor";return G.createElement(ZTe,{key:B,activeCoordinate:P,activePayload:R,activeTooltipIndex:O,chartName:n,element:M,isActive:W,layout:$,offset:N,tooltipAxisBandSize:D,tooltipEventType:L})}),it(w,"renderPolarAxis",function(M,b,A){var E=fi(M,"type.axisType"),P=fi(w.state,"".concat(E,"Map")),R=M.type.defaultProps,N=R!==void 0?ce(ce({},R),M.props):M.props,O=P&&P[N["".concat(E,"Id")]];return V.cloneElement(M,ce(ce({},O),{},{className:_t(E,O.className),key:M.key||"".concat(b,"-").concat(A),ticks:oa(O,!0)}))}),it(w,"renderPolarGrid",function(M){var b=M.props,A=b.radialLines,E=b.polarAngles,P=b.polarRadius,R=w.state,N=R.radiusAxisMap,O=R.angleAxisMap,D=Ya(N),L=Ya(O),W=L.cx,$=L.cy,B=L.innerRadius,X=L.outerRadius;return V.cloneElement(M,{polarAngles:Array.isArray(E)?E:oa(L,!0).map(function(K){return K.coordinate}),polarRadius:Array.isArray(P)?P:oa(D,!0).map(function(K){return K.coordinate}),cx:W,cy:$,innerRadius:B,outerRadius:X,key:M.key||"polar-grid",radialLines:A})}),it(w,"renderLegend",function(){var M=w.state.formattedGraphicalItems,b=w.props,A=b.children,E=b.width,P=b.height,R=w.props.margin||{},N=E-(R.left||0)-(R.right||0),O=nB({children:A,formattedGraphicalItems:M,legendWidth:N,legendContent:c});if(!O)return null;var D=O.item,L=lL(O,JTe);return V.cloneElement(D,ce(ce({},L),{},{chartWidth:E,chartHeight:P,margin:R,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),it(w,"renderTooltip",function(){var M,b=w.props,A=b.children,E=b.accessibilityLayer,P=ai(A,Lr);if(!P)return null;var R=w.state,N=R.isTooltipActive,O=R.activeCoordinate,D=R.activePayload,L=R.activeLabel,W=R.offset,$=(M=P.props.active)!==null&&M!==void 0?M:N;return V.cloneElement(P,{viewBox:ce(ce({},W),{},{x:W.left,y:W.top}),active:$,label:L,payload:$?D:[],coordinate:O,accessibilityLayer:E})}),it(w,"renderBrush",function(M){var b=w.props,A=b.margin,E=b.data,P=w.state,R=P.offset,N=P.dataStartIndex,O=P.dataEndIndex,D=P.updateId;return V.cloneElement(M,{key:M.key||"_recharts-brush",onChange:yg(w.handleBrushChange,M.props.onChange),data:E,x:Ae(M.props.x)?M.props.x:R.left,y:Ae(M.props.y)?M.props.y:R.top+R.height+R.brushBottom-(A.bottom||0),width:Ae(M.props.width)?M.props.width:R.width,startIndex:N,endIndex:O,updateId:"brush-".concat(D)})}),it(w,"renderReferenceElement",function(M,b,A){if(!M)return null;var E=w,P=E.clipPathId,R=w.state,N=R.xAxisMap,O=R.yAxisMap,D=R.offset,L=M.type.defaultProps||{},W=M.props,$=W.xAxisId,B=$===void 0?L.xAxisId:$,X=W.yAxisId,K=X===void 0?L.yAxisId:X;return V.cloneElement(M,{key:M.key||"".concat(b,"-").concat(A),xAxis:N[B],yAxis:O[K],viewBox:{x:D.left,y:D.top,width:D.width,height:D.height},clipPathId:P})}),it(w,"renderActivePoints",function(M){var b=M.item,A=M.activePoint,E=M.basePoint,P=M.childIndex,R=M.isRange,N=[],O=b.props.key,D=b.item.type.defaultProps!==void 0?ce(ce({},b.item.type.defaultProps),b.item.props):b.item.props,L=D.activeDot,W=D.dataKey,$=ce(ce({index:P,dataKey:W,cx:A.x,cy:A.y,r:4,fill:BA(b.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},Ke(L,!1)),Uv(L));return N.push(p.renderActiveDot(L,$,"".concat(O,"-activePoint-").concat(P))),E?N.push(p.renderActiveDot(L,ce(ce({},$),{},{cx:E.x,cy:E.y}),"".concat(O,"-basePoint-").concat(P))):R&&N.push(null),N}),it(w,"renderGraphicChild",function(M,b,A){var E=w.filterFormatItem(M,b,A);if(!E)return null;var P=w.getTooltipEventType(),R=w.state,N=R.isTooltipActive,O=R.tooltipAxis,D=R.activeTooltipIndex,L=R.activeLabel,W=w.props.children,$=ai(W,Lr),B=E.props,X=B.points,K=B.isRange,z=B.baseLine,q=E.item.type.defaultProps!==void 0?ce(ce({},E.item.type.defaultProps),E.item.props):E.item.props,ee=q.activeDot,me=q.hide,_e=q.activeBar,Ne=q.activeShape,We=!!(!me&&N&&$&&(ee||_e||Ne)),Ue={};P!=="axis"&&$&&$.props.trigger==="click"?Ue={onClick:yg(w.handleItemMouseEnter,M.props.onClick)}:P!=="axis"&&(Ue={onMouseLeave:yg(w.handleItemMouseLeave,M.props.onMouseLeave),onMouseEnter:yg(w.handleItemMouseEnter,M.props.onMouseEnter)});var fe=V.cloneElement(M,ce(ce({},E.props),Ue));function Re(jt){return typeof O.dataKey=="function"?O.dataKey(jt.payload):null}if(We)if(D>=0){var Ee,H;if(O.dataKey&&!O.allowDuplicatedCategory){var lt=typeof O.dataKey=="function"?Re:"payload.".concat(O.dataKey.toString());Ee=jv(X,lt,L),H=K&&z&&jv(z,lt,L)}else Ee=X==null?void 0:X[D],H=K&&z&&z[D];if(Ne||_e){var be=M.props.activeIndex!==void 0?M.props.activeIndex:D;return[V.cloneElement(M,ce(ce(ce({},E.props),Ue),{},{activeIndex:be})),null,null]}if(!ft(Ee))return[fe].concat(gf(w.renderActivePoints({item:E,activePoint:Ee,basePoint:H,childIndex:D,isRange:K})))}else{var Le,ke=(Le=w.getItemByXY(w.state.activeCoordinate))!==null&&Le!==void 0?Le:{graphicalItem:fe},mt=ke.graphicalItem,Ye=mt.item,Ze=Ye===void 0?M:Ye,ht=mt.childIndex,Mt=ce(ce(ce({},E.props),Ue),{},{activeIndex:ht});return[V.cloneElement(Ze,Mt),null,null]}return K?[fe,null,null]:[fe,null]}),it(w,"renderCustomized",function(M,b,A){return V.cloneElement(M,ce(ce({key:"recharts-customized-".concat(A)},w.props),w.state))}),it(w,"renderMap",{CartesianGrid:{handler:Sg,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Sg},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Sg},YAxis:{handler:Sg},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((_=x.id)!==null&&_!==void 0?_:Jl("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=tV(w.triggeredAfterMouseMove,(T=x.throttleDelay)!==null&&T!==void 0?T:1e3/60),w.state={},w}return fAe(p,g),sAe(p,[{key:"componentDidMount",value:function(){var _,T;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var _=this.props,T=_.children,w=_.data,M=_.height,b=_.layout,A=ai(T,Lr);if(A){var E=A.props.defaultIndex;if(!(typeof E!="number"||E<0||E>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[E]&&this.state.tooltipTicks[E].value,R=US(this.state,w,E,P),N=this.state.tooltipTicks[E].coordinate,O=(this.state.offset.top+M)/2,D=b==="horizontal",L=D?{x:N,y:O}:{y:N,x:O},W=this.state.formattedGraphicalItems.find(function(B){var X=B.item;return X.type.name==="Scatter"});W&&(L=ce(ce({},L),W.props.points[E].tooltipPosition),R=W.props.points[E].tooltipPayload);var $={activeTooltipIndex:E,isTooltipActive:!0,activeLabel:P,activePayload:R,activeCoordinate:L};this.setState($),this.renderCursor(A),this.accessibilityManager.setIndex(E)}}}},{key:"getSnapshotBeforeUpdate",value:function(_,T){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==T.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==_.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==_.margin){var w,M;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(M=this.props.margin.top)!==null&&M!==void 0?M:0}})}return null}},{key:"componentDidUpdate",value:function(_){hw([ai(_.children,Lr)],[ai(this.props.children,Lr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var _=ai(this.props.children,Lr);if(_&&typeof _.props.shared=="boolean"){var T=_.props.shared?"axis":"item";return s.indexOf(T)>=0?T:o}return o}},{key:"getMouseInfo",value:function(_){if(!this.container)return null;var T=this.container,w=T.getBoundingClientRect(),M=_pe(w),b={chartX:Math.round(_.pageX-M.left),chartY:Math.round(_.pageY-M.top)},A=w.width/T.offsetWidth||1,E=this.inRange(b.chartX,b.chartY,A);if(!E)return null;var P=this.state,R=P.xAxisMap,N=P.yAxisMap,O=this.getTooltipEventType();if(O!=="axis"&&R&&N){var D=Ya(R).scale,L=Ya(N).scale,W=D&&D.invert?D.invert(b.chartX):null,$=L&&L.invert?L.invert(b.chartY):null;return ce(ce({},b),{},{xValue:W,yValue:$})}var B=uL(this.state,this.props.data,this.props.layout,E);return B?ce(ce({},b),B):null}},{key:"inRange",value:function(_,T){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,M=this.props.layout,b=_/w,A=T/w;if(M==="horizontal"||M==="vertical"){var E=this.state.offset,P=b>=E.left&&b<=E.left+E.width&&A>=E.top&&A<=E.top+E.height;return P?{x:b,y:A}:null}var R=this.state,N=R.angleAxisMap,O=R.radiusAxisMap;if(N&&O){var D=Ya(N);return NN({x:b,y:A},D)}return null}},{key:"parseEventsOfWrapper",value:function(){var _=this.props.children,T=this.getTooltipEventType(),w=ai(_,Lr),M={};w&&T==="axis"&&(w.props.trigger==="click"?M={onClick:this.handleClick}:M={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var b=Uv(this.props,this.handleOuterEvent);return ce(ce({},b),M)}},{key:"addListener",value:function(){Mb.on(Pb,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Mb.removeListener(Pb,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(_,T,w){for(var M=this.state.formattedGraphicalItems,b=0,A=M.length;b<A;b++){var E=M[b];if(E.item===_||E.props.key===_.key||T===fa(E.item.type)&&w===E.childIndex)return E}return null}},{key:"renderClipPath",value:function(){var _=this.clipPathId,T=this.state.offset,w=T.left,M=T.top,b=T.height,A=T.width;return G.createElement("defs",null,G.createElement("clipPath",{id:_},G.createElement("rect",{x:w,y:M,height:b,width:A})))}},{key:"getXScales",value:function(){var _=this.state.xAxisMap;return _?Object.entries(_).reduce(function(T,w){var M=sL(w,2),b=M[0],A=M[1];return ce(ce({},T),{},it({},b,A.scale))},{}):null}},{key:"getYScales",value:function(){var _=this.state.yAxisMap;return _?Object.entries(_).reduce(function(T,w){var M=sL(w,2),b=M[0],A=M[1];return ce(ce({},T),{},it({},b,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(_){var T;return(T=this.state.xAxisMap)===null||T===void 0||(T=T[_])===null||T===void 0?void 0:T.scale}},{key:"getYScaleByAxisId",value:function(_){var T;return(T=this.state.yAxisMap)===null||T===void 0||(T=T[_])===null||T===void 0?void 0:T.scale}},{key:"getItemByXY",value:function(_){var T=this.state,w=T.formattedGraphicalItems,M=T.activeItem;if(w&&w.length)for(var b=0,A=w.length;b<A;b++){var E=w[b],P=E.props,R=E.item,N=R.type.defaultProps!==void 0?ce(ce({},R.type.defaultProps),R.props):R.props,O=fa(R.type);if(O==="Bar"){var D=(P.data||[]).find(function(B){return Vxe(_,B)});if(D)return{graphicalItem:E,payload:D}}else if(O==="RadialBar"){var L=(P.data||[]).find(function(B){return NN(_,B)});if(L)return{graphicalItem:E,payload:L}}else if(u_(E,M)||f_(E,M)||xp(E,M)){var W=P1e({graphicalItem:E,activeTooltipItem:M,itemData:N.data}),$=N.activeIndex===void 0?W:N.activeIndex;return{graphicalItem:ce(ce({},E),{},{childIndex:$}),payload:xp(E,M)?N.data[W]:E.props.data[W]}}}return null}},{key:"render",value:function(){var _=this;if(!EO(this))return null;var T=this.props,w=T.children,M=T.className,b=T.width,A=T.height,E=T.style,P=T.compact,R=T.title,N=T.desc,O=lL(T,eAe),D=Ke(O,!1);if(P)return G.createElement(BD,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},G.createElement(pw,du({},D,{width:b,height:A,title:R,desc:N}),this.renderClipPath(),AO(w,this.renderMap)));if(this.props.accessibilityLayer){var L,W;D.tabIndex=(L=this.props.tabIndex)!==null&&L!==void 0?L:0,D.role=(W=this.props.role)!==null&&W!==void 0?W:"application",D.onKeyDown=function(B){_.accessibilityManager.keyboardEvent(B)},D.onFocus=function(){_.accessibilityManager.focus()}}var $=this.parseEventsOfWrapper();return G.createElement(BD,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},G.createElement("div",du({className:_t("recharts-wrapper",M),style:ce({position:"relative",cursor:"default",width:b,height:A},E)},$,{ref:function(X){_.container=X}}),G.createElement(pw,du({},D,{width:b,height:A,title:R,desc:N,style:vAe}),this.renderClipPath(),AO(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(V.Component);it(v,"displayName",n),it(v,"defaultProps",ce({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),it(v,"getDerivedStateFromProps",function(g,p){var x=g.dataKey,_=g.data,T=g.children,w=g.width,M=g.height,b=g.layout,A=g.stackOffset,E=g.margin,P=p.dataStartIndex,R=p.dataEndIndex;if(p.updateId===void 0){var N=fL(g);return ce(ce(ce({},N),{},{updateId:0},d(ce(ce({props:g},N),{},{updateId:0}),p)),{},{prevDataKey:x,prevData:_,prevWidth:w,prevHeight:M,prevLayout:b,prevStackOffset:A,prevMargin:E,prevChildren:T})}if(x!==p.prevDataKey||_!==p.prevData||w!==p.prevWidth||M!==p.prevHeight||b!==p.prevLayout||A!==p.prevStackOffset||!Su(E,p.prevMargin)){var O=fL(g),D={chartX:p.chartX,chartY:p.chartY,isTooltipActive:p.isTooltipActive},L=ce(ce({},uL(p,_,b)),{},{updateId:p.updateId+1}),W=ce(ce(ce({},O),D),L);return ce(ce(ce({},W),d(ce({props:g},W),p)),{},{prevDataKey:x,prevData:_,prevWidth:w,prevHeight:M,prevLayout:b,prevStackOffset:A,prevMargin:E,prevChildren:T})}if(!hw(T,p.prevChildren)){var $,B,X,K,z=ai(T,of),q=z&&($=(B=z.props)===null||B===void 0?void 0:B.startIndex)!==null&&$!==void 0?$:P,ee=z&&(X=(K=z.props)===null||K===void 0?void 0:K.endIndex)!==null&&X!==void 0?X:R,me=q!==P||ee!==R,_e=!ft(_),Ne=_e&&!me?p.updateId:p.updateId+1;return ce(ce({updateId:Ne},d(ce(ce({props:g},p),{},{updateId:Ne,dataStartIndex:q,dataEndIndex:ee}),p)),{},{prevChildren:T,dataStartIndex:q,dataEndIndex:ee})}return null}),it(v,"renderActiveDot",function(g,p,x){var _;return V.isValidElement(g)?_=V.cloneElement(g,p):ot(g)?_=g(p):_=G.createElement(tm,p),G.createElement(St,{className:"recharts-active-dot",key:x},_)});var y=V.forwardRef(function(p,x){return G.createElement(v,du({},p,{ref:x}))});return y.displayName=v.displayName,y},P5=y_({chartName:"LineChart",GraphicalChild:As,axisComponents:[{axisType:"xAxis",AxisComp:Fo},{axisType:"yAxis",AxisComp:uo}],formatAxisMap:zA}),MAe=y_({chartName:"BarChart",GraphicalChild:nc,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Fo},{axisType:"yAxis",AxisComp:uo}],formatAxisMap:zA}),PAe=y_({chartName:"PieChart",GraphicalChild:Ia,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:c_},{axisType:"radiusAxis",AxisComp:s_}],formatAxisMap:m0e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),C5=y_({chartName:"AreaChart",GraphicalChild:Do,axisComponents:[{axisType:"xAxis",AxisComp:Fo},{axisType:"yAxis",AxisComp:uo}],formatAxisMap:zA});const CAe=({country:t,onClose:e,controlsRef:n})=>{var O;const[r,i]=V.useState(null),[o,a]=V.useState(null),[s,l]=V.useState(null),[c,u]=V.useState(null),[f,h]=V.useState(null),[d,v]=V.useState(null),[y,g]=V.useState(!0),[p,x]=V.useState(!1),[_,T]=V.useState("resumen"),w="https://web-production-2cf89.up.railway.app",M={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},b=[{id:"resumen",label:"Resumen",icon:BJ},{id:"empresas",label:"Empresas",icon:sd},{id:"produccion",label:"Producción",icon:tb}];V.useEffect(()=>(n!=null&&n.current&&(n.current.autoRotate=!1),()=>{n!=null&&n.current&&(n.current.autoRotate=!0)}),[n]),V.useEffect(()=>{(async()=>{if(t!=null&&t.name){g(!0),v(null);try{const[L,W,$,B,X]=await Promise.all([fetch(`${w}/stats/country/${encodeURIComponent(t.name)}`),fetch(`${w}/stats/emissions_by_sector/${encodeURIComponent(t.name)}`),fetch(`${w}/stats/historical/${encodeURIComponent(t.name)}`),fetch(`${w}/stats/companies/${encodeURIComponent(t.name)}`),fetch(`${w}/stats/production/${encodeURIComponent(t.name)}`)]);if(!L.ok||!W.ok||!$.ok||!B.ok||!X.ok)throw new Error("Error al cargar los datos");const[K,z,q,ee,me]=await Promise.all([L.json(),W.json(),$.json(),B.json(),X.json()]);i(K),a(z),l(q),u(ee),h(me)}catch(L){console.error("Error al cargar datos:",L),v(L.message)}finally{g(!1)}}})()},[t]);const A=()=>{n!=null&&n.current&&(n.current.autoRotate=!0),e()},E=()=>{n!=null&&n.current&&(n.current.autoRotate=!n.current.autoRotate,x(n.current.autoRotate))},P=({title:D,value:L,icon:W,trend:$,description:B})=>S.jsxs(It.div,{className:"relative overflow-hidden bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-6 rounded-xl border border-gray-700 hover:border-green-500/30 transition-all duration-500",whileHover:{scale:1.02,y:-5},initial:"hidden",animate:"visible",variants:M,children:[S.jsx("div",{className:"relative z-10",children:S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsxs("div",{children:[S.jsxs("p",{className:"text-sm text-gray-400 flex items-center gap-2",children:[D,S.jsx(VJ,{size:14,className:"text-gray-500 hover:text-gray-300 cursor-help"})]}),S.jsx("p",{className:"text-3xl font-bold mt-2 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:S.jsx(It.span,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:L})}),B&&S.jsx("p",{className:"text-sm text-gray-400 mt-1",children:B}),$&&S.jsxs(It.span,{className:`inline-flex items-center gap-1 px-2 py-1 mt-2 text-sm rounded ${$>0?"bg-red-500/20 text-red-400 border border-red-500/30":"bg-green-500/20 text-green-400 border border-green-500/30"}`,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:[$>0?"↑":"↓"," ",Math.abs($),"%",S.jsx($u,{size:14})]})]}),S.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${$>0?"from-red-500/20 to-orange-500/20 border border-red-500/30":"from-green-500/20 to-blue-500/20 border border-green-500/30"}`,children:S.jsx(W,{className:"h-6 w-6 text-white"})})]})}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-500"})]}),R=({company:D,index:L})=>S.jsxs(It.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:L*.1},className:"group relative overflow-hidden",children:[S.jsxs("div",{className:"flex justify-between items-center p-4 bg-gradient-to-br from-gray-800/60 to-gray-700/60 hover:from-gray-700/60 hover:to-gray-600/60 rounded-lg transition-all duration-500",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"bg-gradient-to-br from-green-500/20 to-blue-500/20 p-3 rounded-lg border border-green-500/30",children:S.jsx(sd,{className:"h-6 w-6 text-white"})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-medium text-lg group-hover:text-green-400 transition-colors",children:D.name}),S.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[S.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-sm bg-gray-700/50 rounded",children:[S.jsx(tb,{size:14,className:"text-gray-400"}),D.sector]}),S.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-sm bg-gray-700/50 rounded",children:[S.jsx($J,{size:14,className:"text-gray-400"}),D.location||"Global"]})]})]})]}),S.jsxs("div",{className:"text-right",children:[S.jsxs("p",{className:"font-bold text-xl bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:[D.total_emissions.toFixed(2)," MtCO₂e"]}),S.jsxs("p",{className:"text-sm text-gray-400 flex items-center gap-1 justify-end",children:[S.jsx(uO,{size:14}),D.emissions_percentage.toFixed(1),"% del total",S.jsx(vl,{size:14,className:"transform group-hover:translate-x-1 transition-transform"})]})]})]}),S.jsx("div",{className:"absolute inset-0 border border-green-500/0 group-hover:border-green-500/50 rounded-lg transition-all duration-500"})]}),N=({data:D})=>S.jsxs(It.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-6 rounded-xl border border-gray-700",children:[S.jsxs("div",{className:"flex items-center justify-between mb-6",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-semibold bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:"Emisiones Históricas"}),S.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Evolución temporal de emisiones de CO₂"})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(UF,{className:"h-5 w-5 text-gray-400"}),S.jsx(jJ,{className:"h-5 w-5 text-gray-400"})," "]})]}),S.jsx(Xu,{width:"100%",height:300,children:S.jsxs(C5,{data:D,margin:{top:5,right:30,left:20,bottom:5},children:[S.jsx("defs",{children:S.jsxs("linearGradient",{id:"colorEmissions",x1:"0",y1:"0",x2:"0",y2:"1",children:[S.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.8}),S.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]})}),S.jsx(Wf,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),S.jsx(Fo,{dataKey:"year",stroke:"#fff",tick:{fill:"#9CA3AF"}}),S.jsx(uo,{stroke:"#fff",tick:{fill:"#9CA3AF"}}),S.jsx(Lr,{contentStyle:{backgroundColor:"rgba(0,0,0,0.8)",backdropFilter:"blur(12px)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}}),S.jsx(Do,{type:"monotone",dataKey:"total_emissions",stroke:"#10B981",strokeWidth:2,fillOpacity:1,fill:"url(#colorEmissions)",name:"Emisiones (MtCO₂e)"})]})})]});return t?S.jsxs(kv,{children:[S.jsx(It.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:A}),S.jsx(It.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"fixed inset-0 flex items-center justify-center z-50",onClick:D=>D.stopPropagation(),children:S.jsx("div",{className:"w-[90vw] max-w-[800px] h-[90vh] overflow-hidden backdrop-blur-xl bg-black/80 rounded-xl shadow-2xl border border-white/10",children:S.jsxs("div",{className:"relative z-50 h-full flex flex-col",children:[S.jsxs(It.div,{className:"sticky top-0 z-50 bg-black/80 backdrop-blur-xl p-6 pb-4 border-b border-white/10",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},children:[S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsxs("div",{className:"flex items-center space-x-4",children:[S.jsxs(It.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"relative group",children:[S.jsx("img",{src:`https://flagcdn.com/w40/${t.code.toLowerCase()}.png`,alt:`Bandera de ${t.name}`,className:"h-8 rounded shadow-lg transition-transform duration-300 group-hover:scale-110"}),S.jsx("div",{className:"absolute inset-0 bg-white/10 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),S.jsxs("div",{children:[S.jsxs(It.h2,{className:"text-3xl font-bold bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent flex items-center gap-2",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},children:[t.name,S.jsx(Hd,{className:"h-6 w-6 text-green-400"})]}),S.jsxs(It.p,{className:"text-gray-400 mt-1 flex items-center gap-2",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1},children:[S.jsx(YJ,{size:14}),"Panel de Control de Emisiones CO₂"]})]})]}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx(It.button,{whileHover:{scale:1.1,rotate:180},whileTap:{scale:.9},onClick:E,className:`p-3 rounded-lg backdrop-blur-md transition-all duration-300 ${p?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-gray-800/50 text-white hover:bg-gray-700/50"}`,children:S.jsx(KJ,{size:20})}),S.jsx(It.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:A,className:"p-3 rounded-lg bg-gray-800/50 backdrop-blur-md hover:bg-red-500/20 hover:text-red-400 transition-all duration-300",children:S.jsx(Pa,{size:20})})]})]}),S.jsx(It.div,{className:"flex gap-3 mt-4 bg-gray-900/50 p-1 rounded-lg",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:b.map((D,L)=>S.jsxs(It.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>T(D.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-300 ${_===D.id?"bg-gradient-to-r from-green-500/20 to-blue-500/20 text-white border border-green-500/30":"text-gray-400 hover:text-white hover:bg-gray-800/50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:L*.1},children:[S.jsx(D.icon,{size:18}),D.label]},D.id))})]}),S.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:y?S.jsx(It.div,{className:"space-y-4",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},children:[1,2,3].map(D=>S.jsx(It.div,{className:"h-24 w-full bg-gradient-to-r from-gray-800/50 to-gray-700/50 rounded-xl overflow-hidden",variants:M,children:S.jsx("div",{className:"h-full w-full animate-pulse bg-gradient-to-r from-transparent via-white/5 to-transparent"})},D))}):d?S.jsxs(It.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-red-900/50 border border-red-500/30 p-4 rounded-xl flex items-center gap-3",children:[S.jsx(Wp,{className:"h-5 w-5 text-red-400"}),S.jsx("p",{className:"text-red-200",children:d})]}):S.jsx(kv,{mode:"wait",children:S.jsxs(It.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"space-y-6",children:[_==="resumen"&&r&&S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[S.jsx(P,{title:"Emisiones Totales",value:`${(O=r.total_emissions)==null?void 0:O.toFixed(2)} MtCO₂e`,icon:$u,trend:-2.5,description:"Emisiones totales de CO₂ equivalente"}),S.jsx(P,{title:"Empresas Registradas",value:r.number_of_companies,icon:sd,description:"Total de empresas monitoreadas"}),S.jsx(P,{title:"Sectores Activos",value:r.number_of_sectors,icon:kF,description:"Sectores industriales principales"})]}),(s==null?void 0:s.timeline)&&S.jsx(N,{data:s.timeline})]}),_==="empresas"&&(c==null?void 0:c.companies)&&S.jsxs(It.div,{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-6 rounded-xl border border-gray-700",initial:{opacity:0},animate:{opacity:1},children:[S.jsx("h3",{className:"text-xl font-semibold mb-4 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:"Principales Empresas por Emisiones"}),S.jsx("div",{className:"space-y-4",children:c.companies.sort((D,L)=>L.total_emissions-D.total_emissions).slice(0,5).map((D,L)=>S.jsx(R,{company:D,index:L},D.name))})]}),_==="produccion"&&(f==null?void 0:f.products)&&S.jsxs(It.div,{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-6 rounded-xl border border-gray-700",initial:{opacity:0},animate:{opacity:1},children:[S.jsxs("h3",{className:"text-xl font-semibold mb-4 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent flex items-center gap-2",children:[S.jsx(tb,{className:"h-5 w-5"}),"Resumen de Producción"]}),S.jsx("div",{className:"grid grid-cols-2 gap-4",children:f.products.map((D,L)=>S.jsxs(It.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:L*.1},className:"group bg-gradient-to-br from-gray-800/60 to-gray-700/60 p-4 rounded-lg hover:from-gray-700/60 hover:to-gray-600/60 transition-all duration-500 border border-white/10 hover:border-green-500/30",children:[S.jsxs("p",{className:"text-lg font-bold flex items-center justify-between",children:[D.name,S.jsx(It.span,{initial:{scale:0},animate:{scale:1},transition:{delay:L*.1+.2},className:"bg-gradient-to-r from-green-500/20 to-blue-500/20 p-2 rounded-lg",children:S.jsx(uO,{className:"h-5 w-5 text-gray-400"})})]}),S.jsx("div",{className:"mt-2",children:S.jsxs(It.span,{className:"inline-block px-3 py-1.5 bg-gray-700/50 rounded text-sm border border-white/10",whileHover:{scale:1.05},children:[D.volume," ",D.unit]})})]},L))})]})]},_)})})]})})})]}):null},RAe=({isVisible:t,onClose:e})=>{const[n,r]=V.useState(null),[i,o]=V.useState(null),[a,s]=V.useState(!0),[l,c]=V.useState(null),[u,f]=V.useState("resumen"),h=Li({maxWidth:640}),d=Li({minWidth:641,maxWidth:1024});Li({minWidth:1025,maxWidth:1440});const v="https://web-production-2cf89.up.railway.app",y=V.useMemo(()=>({container:`fixed inset-0 z-50 w-full h-full overflow-y-auto bg-black/90 backdrop-blur-xl p-4 sm:p-6
                ${h?"top-0":d?"top-16":"top-20"} 
                text-white`,grid:`grid ${h?"grid-cols-1":"grid-cols-2"} gap-4`,chart:{height:h?250:d?300:350,margin:{top:20,right:h?10:20,left:h?10:20,bottom:h?80:60}}}),[h,d]);V.useEffect(()=>{let b=!0;return(async()=>{if(t){s(!0),c(null);try{const E=new AbortController,P=setTimeout(()=>E.abort(),1e4),[R,N]=await Promise.all([fetch(`${v}/stats/global`,{signal:E.signal}),fetch(`${v}/stats/companies/global`,{signal:E.signal})]);if(clearTimeout(P),!R.ok||!N.ok)throw new Error("Error al cargar los datos globales");const[O,D]=await Promise.all([R.json(),N.json()]);b&&(r(O),o(D))}catch(E){E.name==="AbortError"?c("Tiempo de espera agotado. Por favor, intente nuevamente."):(console.error("Error:",E),c(E.message))}finally{b&&s(!1)}}})(),()=>{b=!1}},[t,v]);const g=["#10B981","#F59E0B","#3B82F6","#EC4899","#8B5CF6","#06B6D4","#34D399","#FBBF24"],p={"Investor-owned Company":{icon:"💼",name:"Empresas Privadas",color:"#FF6B6B",hoverIcon:"💰",percentage:61.5,companies:75,emissions:"440.2K"},"State-owned Entity":{icon:"🏛️",name:"Empresas Estatales",color:"#4ECDC4",hoverIcon:"🏢",percentage:29.5,companies:36,emissions:"464.6K"},"Nation State":{icon:"🏴",name:"Estados Nacionales",color:"#45B7D1",hoverIcon:"🌐",percentage:9.02,companies:11,emissions:"516.2K"}},x=V.useMemo(()=>Object.entries(p).map(([b,A])=>({name:A.name,value:A.percentage,icon:A.icon,hoverIcon:A.hoverIcon,color:A.color,companies:A.companies,emissions:A.emissions})),[]),_=({title:b,value:A,icon:E,color:P,description:R})=>S.jsx("div",{className:"bg-white/5 backdrop-blur-lg p-4 sm:p-6 rounded-2xl border border-white/10 hover:border-white/20 transition-all duration-300 transform hover:-translate-y-1",children:S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsxs("div",{className:"flex-1",children:[S.jsx("p",{className:"text-sm text-gray-400 font-medium",children:b}),S.jsx("p",{className:"text-2xl sm:text-4xl font-bold mt-2 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:A}),R&&S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:R})]}),S.jsx("div",{className:`p-3 rounded-xl ${P} bg-opacity-10 hidden sm:block`,children:S.jsx(E,{className:`h-6 w-6 ${P}`})})]})}),T=b=>b>=1e6?`${(b/1e6).toFixed(1)}M`:b>=1e3?`${(b/1e3).toFixed(1)}K`:b.toFixed(1),w=[{id:"resumen",label:"Resumen",icon:lw},{id:"empresas",label:"Empresas",icon:sd},{id:"sectores",label:"Sectores",icon:kF}],M=({active:b,payload:A})=>{if(b&&A&&A.length){const E=A[0].payload;return S.jsxs("div",{className:"bg-black/90 backdrop-blur-xl p-4 rounded-xl border border-white/10 shadow-xl",children:[S.jsxs("p",{className:"text-base sm:text-lg font-bold mb-2",children:[E.icon," ",E.name," ",E.hoverIcon]}),S.jsxs("p",{className:"text-xs sm:text-sm text-gray-300",children:["📊 Porcentaje: ",E.value,"%"]}),S.jsxs("p",{className:"text-xs sm:text-sm text-gray-300",children:["🏢 Empresas: ",E.companies]}),S.jsxs("p",{className:"text-xs sm:text-sm text-gray-300",children:["📈 Emisiones: ",E.emissions," MtCO₂e"]})]})}return null};return t?S.jsxs("div",{className:y.container,children:[S.jsxs("div",{className:"flex justify-between items-center mb-6 sm:mb-8",children:[S.jsxs("div",{children:[S.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-3 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:[S.jsx(Hd,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-400"}),"Emisiones Globales"]}),S.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:"Panel de Control de Emisiones CO₂"})]}),S.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-white/10 transition-all duration-300","aria-label":"Cerrar panel",children:S.jsx(Pa,{size:20})})]}),S.jsx("div",{className:"flex gap-2 mb-6 bg-white/5 p-1 rounded-xl overflow-x-auto",children:w.map(b=>S.jsxs("button",{onClick:()=>f(b.id),className:`flex items-center gap-2 px-3 sm:px-4 py-2 rounded-lg transition-all duration-300 text-xs sm:text-sm whitespace-nowrap
              ${u===b.id?"bg-gradient-to-r from-green-400/20 to-blue-500/20 text-white shadow-lg border border-white/10":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[S.jsx(b.icon,{size:16}),b.label]},b.id))}),a?S.jsxs("div",{className:"text-center py-8",children:[S.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-green-400 mx-auto mb-3"}),S.jsx("p",{className:"text-sm text-gray-400",children:"Cargando datos globales..."})]}):l?S.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 p-4 rounded-xl flex items-center gap-3",children:[S.jsx(Wp,{className:"h-5 w-5 text-red-400"}),S.jsx("p",{className:"text-red-200",children:l})]}):S.jsxs("div",{className:"space-y-6",children:[u==="resumen"&&S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:y.grid,children:[S.jsx(_,{title:"Emisiones Globales Totales",value:`${T(n.total_emissions)} MtCO₂e`,icon:ZJ,color:"text-green-400"}),S.jsx(_,{title:"Empresas Globales",value:n.number_of_companies,icon:sd,color:"text-blue-400"})]}),S.jsxs("div",{className:"bg-white/5 p-4 sm:p-6 rounded-2xl border border-white/10",children:[S.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-6 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:"Top 10 Emisores Globales"}),S.jsx(Xu,{width:"100%",height:y.chart.height,children:S.jsxs(MAe,{data:i.companies,margin:y.chart.margin,children:[S.jsx(Wf,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),S.jsx(Fo,{dataKey:"name",stroke:"#fff",angle:-45,textAnchor:"end",height:60,tick:{fontSize:h?8:10}}),S.jsx(uo,{stroke:"#fff",tick:{fontSize:h?8:10},width:h?30:40}),S.jsx(Lr,{contentStyle:{backgroundColor:"rgba(0,0,0,0.8)",backdropFilter:"blur(12px)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",fontSize:h?"12px":"14px"},formatter:b=>[`${T(b)} MtCO₂e`,"Emisiones"]}),S.jsx(nc,{dataKey:"total_emissions",radius:[4,4,0,0],children:i.companies.map((b,A)=>S.jsx(Yd,{fill:g[A%g.length]},`cell-${A}`))})]})})]})]}),u==="sectores"&&S.jsxs("div",{className:"bg-white/5 p-4 sm:p-8 rounded-2xl border border-white/10",children:[S.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-2 text-center bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:"🌍 Distribución Global por Tipo de Entidad 📊"}),S.jsx("p",{className:"text-center text-gray-400 text-xs sm:text-sm mb-8",children:"✨ Análisis de la Estructura Empresarial Global 🔍"}),S.jsxs("div",{className:`grid ${h?"grid-cols-1":"grid-cols-2"} gap-8`,children:[S.jsxs("div",{className:"relative",children:[S.jsx(Xu,{width:"100%",height:300,children:S.jsxs(PAe,{children:[S.jsx(Ia,{data:x,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:h?"50%":"60%",outerRadius:h?"70%":"80%",paddingAngle:2,children:x.map((b,A)=>S.jsx(Yd,{fill:b.color,stroke:"rgba(255,255,255,0.1)",strokeWidth:2},`cell-${A}`))}),S.jsx(Lr,{content:M})]})}),S.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:S.jsxs("div",{className:"text-center",children:[S.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"Total"}),S.jsx("p",{className:"text-xl sm:text-2xl font-bold text-white",children:"120"}),S.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"Empresas"})]})})]}),S.jsx("div",{className:"space-y-4 overflow-y-auto max-h-[300px] pr-2",children:x.map(b=>S.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10 hover:border-white/20 transition-all duration-300",style:{borderLeft:`4px solid ${b.color}`},children:[S.jsxs("div",{className:"flex items-center justify-between mb-2",children:[S.jsxs("span",{className:"text-base sm:text-lg font-bold flex items-center gap-2",children:[b.icon," ",b.name]}),S.jsxs("span",{className:"text-xs sm:text-sm px-3 py-1.5 bg-white/5 rounded-lg font-medium",children:[b.value,"%"]})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[S.jsxs("div",{className:"bg-white/5 p-2 rounded-lg",children:[S.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"Empresas"}),S.jsxs("p",{className:"text-base sm:text-lg font-bold",children:[b.companies," 🏢"]})]}),S.jsxs("div",{className:"bg-white/5 p-2 rounded-lg",children:[S.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"Emisiones"}),S.jsxs("p",{className:"text-base sm:text-lg font-bold",children:[b.emissions," 📈"]})]})]})]},b.name))})]})]}),u==="empresas"&&S.jsxs("div",{className:"bg-white/5 p-4 sm:p-6 rounded-2xl border border-white/10",children:[S.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-4 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:"Principales Emisores Globales"}),S.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:i.companies.map((b,A)=>S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center p-4 bg-white/5 hover:bg-white/10 rounded-xl border border-white/10 hover:border-white/20 transition-all duration-300 cursor-pointer group gap-2 sm:gap-0",children:[S.jsxs("div",{children:[S.jsx("p",{className:"font-medium group-hover:text-green-400 transition-colors",children:b.name}),S.jsx("span",{className:"inline-block px-3 py-1 text-xs bg-white/5 rounded-lg mt-2",children:b.sector})]}),S.jsxs("div",{className:"text-left sm:text-right w-full sm:w-auto",children:[S.jsxs("p",{className:"font-bold",children:[T(b.total_emissions)," MtCO₂e"]}),S.jsxs("p",{className:"text-xs sm:text-sm text-gray-400",children:[(b.total_emissions/n.total_emissions*100).toFixed(1),"% del total"]})]})]},b.name))})]})]})]}):null},Rb="https://web-production-2cf89.up.railway.app",OAe=({isVisible:t,onClose:e})=>{const[n,r]=V.useState([]),[i,o]=V.useState([]),[a,s]=V.useState(null),[l,c]=V.useState(null),[u,f]=V.useState(null),[h,d]=V.useState(!1),[v,y]=V.useState(null),[g,p]=V.useState("country"),x=Li({maxWidth:640});Li({minWidth:641,maxWidth:1024}),Li({minWidth:1025,maxWidth:1440});const _={container:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 sm:p-6 md:p-8 animate-fadeIn z-[9999]",modal:`w-full max-w-[95vw] sm:max-w-[85vw] md:max-w-[900px] max-h-[90vh] overflow-y-auto 
        bg-gradient-to-br from-gray-900/95 to-black/95 rounded-2xl sm:rounded-3xl 
        p-4 sm:p-6 md:p-8 text-white shadow-2xl border border-gray-700/50 animate-slideUp relative z-[10000]`,title:`text-2xl sm:text-3xl font-bold flex items-center gap-2 sm:gap-3 
                text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-blue-600`,gridContainer:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4"};V.useEffect(()=>{t&&T()},[t]),V.useEffect(()=>{a&&w(a)},[a]);const T=async()=>{d(!0),y(null);try{const O=await fetch(`${Rb}/countries/list`);if(!O.ok)throw new Error(`Error fetching countries: ${O.statusText}`);const D=await O.json();r(Array.isArray(D.countries)?D.countries:[])}catch(O){console.error("Error:",O),y("Error loading countries")}finally{d(!1)}},w=async O=>{if(!(O!=null&&O.name)){y("Invalid country data");return}d(!0),y(null);try{const D=await fetch(`${Rb}/stats/production/${encodeURIComponent(O.name)}`);if(!D.ok)throw new Error(`Error fetching commodities for ${O.name}`);const L=await D.json();o(Array.isArray(L.products)?L.products:[])}catch(D){console.error("Error:",D),y(`Error loading commodities for ${O.name}`)}finally{d(!1)}},M=async(O,D)=>{if(!O||!D){y("Country or commodity not selected");return}d(!0),y(null);try{const L=await fetch(`${Rb}/model/simulation/${encodeURIComponent(O.name)}/${encodeURIComponent(D.name)}`);if(!L.ok)throw new Error("Error fetching simulation data");const W=await L.json();f(W),p("results")}catch(L){y(`Error fetching simulation: ${L.message}`)}finally{d(!1)}},b=O=>new Intl.NumberFormat("en-US",{maximumFractionDigits:2,minimumFractionDigits:2}).format(O),A=({metrics:O})=>S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[{label:"RMSE",value:O.rmse,desc:"Error Cuadrático Medio"},{label:"MAE",value:O.mae,desc:"Error Absoluto Medio"},{label:"R² Score",value:`${(O.r2_score*100).toFixed(2)}%`,desc:"Coeficiente de Determinación"}].map(D=>S.jsxs("div",{className:`bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-4 sm:p-6 rounded-xl \r
                              border border-gray-700/50 hover:border-blue-500/50 transition-all duration-300 \r
                              transform hover:-translate-y-1 hover:shadow-lg hover:shadow-blue-500/20`,children:[S.jsx("div",{className:"text-sm text-blue-400 font-medium",children:D.label}),S.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white mt-2 mb-1",children:b(D.value)}),S.jsx("div",{className:"text-xs text-gray-400",children:D.desc})]},D.label))}),E=()=>S.jsx("div",{className:"flex items-center justify-center p-8 sm:p-12",children:S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"w-12 sm:w-16 h-12 sm:h-16 border-4 border-blue-500/20 border-t-blue-500 rounded-full animate-spin"}),S.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:S.jsx("div",{className:"w-6 sm:w-8 h-6 sm:h-8 border-4 border-purple-500/20 border-t-purple-500 rounded-full animate-spin"})})]})}),P=({message:O})=>S.jsxs("div",{className:`bg-red-900/30 backdrop-blur-sm border border-red-500/50 p-4 sm:p-6 rounded-xl \r
                        flex items-center gap-3 animate-fadeIn`,children:[S.jsx(Wp,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-400"}),S.jsx("p",{className:"text-sm sm:text-base text-red-200",children:O})]}),R=({simulationResults:O})=>S.jsx("div",{className:"h-[300px] sm:h-[400px] w-full",children:S.jsx(Xu,{children:S.jsxs(P5,{data:O.simulation_results,children:[S.jsx(Wf,{strokeDasharray:"3 3",stroke:"#374151"}),S.jsx(Fo,{dataKey:"reduction_percentage",stroke:"#9CA3AF",label:x?null:{value:"Reducción (%)",position:"bottom",fill:"#9CA3AF"},tick:{fontSize:x?10:12}}),S.jsx(uo,{stroke:"#9CA3AF",yAxisId:"left",label:x?null:{value:"Emisiones (MtCO2e)",angle:-90,position:"insideLeft",fill:"#9CA3AF"},tick:{fontSize:x?10:12},width:x?40:60}),S.jsx(uo,{stroke:"#9CA3AF",yAxisId:"right",orientation:"right",label:x?null:{value:"Eficiencia",angle:90,position:"insideRight",fill:"#9CA3AF"},tick:{fontSize:x?10:12},width:x?40:60}),S.jsx(Lr,{contentStyle:{backgroundColor:"rgba(17, 24, 39, 0.9)",border:"1px solid rgba(59, 130, 246, 0.5)",borderRadius:"0.5rem",backdropFilter:"blur(4px)",fontSize:x?"12px":"14px"}}),S.jsx(ha,{wrapperStyle:{fontSize:x?"12px":"14px"}}),S.jsx(As,{yAxisId:"left",type:"monotone",dataKey:"predicted_emissions",stroke:"#3B82F6",strokeWidth:2,dot:{fill:"#3B82F6",r:x?3:4},activeDot:{r:x?5:6,fill:"#60A5FA"},name:"Emisiones Proyectadas"}),S.jsx(As,{yAxisId:"right",type:"monotone",dataKey:"reduction_efficiency",stroke:"#10B981",strokeWidth:2,dot:{fill:"#10B981",r:x?3:4},activeDot:{r:x?5:6,fill:"#34D399"},name:"Eficiencia de Reducción"})]})})}),N=()=>{if(h)return S.jsx(E,{});if(v)return S.jsx(P,{message:v});switch(g){case"country":return S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 animate-fadeIn",children:n.map((O,D)=>S.jsx("button",{onClick:()=>{s(O),p("commodity")},className:`group p-4 sm:p-6 bg-gradient-to-br from-gray-900/90 to-gray-800/90 rounded-xl\r
                                         border border-gray-700/50 hover:border-blue-500/50 transition-all duration-300\r
                                         transform hover:-translate-y-1 hover:shadow-lg hover:shadow-blue-500/20`,style:{animation:`fadeIn 0.5s ease-out ${D*.1}s backwards`},children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("span",{className:"text-base sm:text-lg font-medium",children:O.name}),S.jsx(vl,{className:"text-blue-400 transform group-hover:translate-x-1 transition-transform duration-300"})]})},O.name))});case"commodity":return S.jsxs("div",{className:"space-y-4 sm:space-y-6 animate-fadeIn",children:[S.jsxs("button",{onClick:()=>{p("country"),s(null)},className:"flex items-center gap-2 text-sm text-blue-400 hover:text-blue-300 transition-colors",children:[S.jsx(vl,{size:16,className:"rotate-180"}),"Volver a países"]}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:i.map((O,D)=>S.jsx("button",{onClick:()=>{c(O),M(a,O)},className:`group p-4 sm:p-6 bg-gradient-to-br from-gray-900/90 to-gray-800/90 rounded-xl\r
                                             border border-gray-700/50 hover:border-blue-500/50 transition-all duration-300\r
                                             transform hover:-translate-y-1 hover:shadow-lg hover:shadow-blue-500/20`,style:{animation:`fadeIn 0.5s ease-out ${D*.1}s backwards`},children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("span",{className:"text-base sm:text-lg font-medium",children:O.name}),S.jsx(vl,{className:"text-blue-400 transform group-hover:translate-x-1 transition-transform duration-300"})]})},D))})]});case"results":return S.jsxs("div",{className:"space-y-4 sm:space-y-6 animate-fadeIn",children:[S.jsxs("button",{onClick:()=>{p("commodity"),f(null)},className:"flex items-center gap-2 text-sm text-blue-400 hover:text-blue-300 transition-colors",children:[S.jsx(vl,{size:16,className:"rotate-180"}),"Volver a commodities"]}),S.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-4 sm:p-8 rounded-2xl border border-gray-700/50",children:[S.jsx("h3",{className:"text-xl font-semibold mb-6 text-blue-400",children:"Métricas del Modelo"}),S.jsx(A,{metrics:u.model_metrics})]}),S.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-4 sm:p-8 rounded-2xl border border-gray-700/50",children:[S.jsx("h3",{className:"text-xl font-semibold mb-6 text-blue-400",children:"Resultados de la Simulación"}),S.jsx(R,{simulationResults:u})]}),S.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-4 sm:p-8 rounded-2xl border border-gray-700/50",children:[S.jsx("h3",{className:"text-xl font-semibold mb-6 text-blue-400",children:"Recomendaciones"}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[{label:"Reducción Óptima",value:`${u.recommendations.optimal_reduction}%`},{label:"Reducción de Emisiones",value:`${b(u.recommendations.emissions_reduction)} MtCO2e`},{label:"Eficiencia",value:b(u.recommendations.reduction_efficiency)},{label:"Mejora Porcentual",value:`${b(u.recommendations.improvement_percentage)}%`}].map((O,D)=>S.jsxs("div",{className:"bg-gray-800/50 p-4 sm:p-6 rounded-xl border border-gray-700/50 hover:border-blue-500/50 transition-all duration-300",children:[S.jsx("p",{className:"text-sm text-gray-400 mb-2",children:O.label}),S.jsx("p",{className:"text-xl sm:text-2xl font-bold text-white",children:O.value})]},O.label))})]})]})}};return t?S.jsx("div",{className:_.container,children:S.jsxs("div",{className:_.modal,children:[S.jsxs("div",{className:_.header,children:[S.jsxs("div",{children:[S.jsxs("h2",{className:_.title,children:[S.jsx($u,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-500"}),"Simulador de Emisiones"]}),S.jsxs("p",{className:"text-xs sm:text-sm text-gray-400 mt-1 sm:mt-2",children:[g==="country"&&"Selecciona un país para comenzar",g==="commodity"&&`Commodities disponibles para ${a==null?void 0:a.name}`,g==="results"&&`${a==null?void 0:a.name} - ${l==null?void 0:l.name}`]})]}),S.jsx("button",{onClick:e,className:"p-2 rounded-xl hover:bg-gray-800/50 transition-all duration-300 group","aria-label":"Cerrar",children:S.jsx(Pa,{className:"h-5 w-5 sm:h-6 sm:w-6 text-gray-400 group-hover:text-red-400 transition-colors"})})]}),N()]})}):null},R5=document.createElement("style");R5.textContent=`
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    
    @keyframes slideUp {
        from { 
            opacity: 0;
            transform: translateY(20px);
        }
        to { 
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .animate-fadeIn {
        animation: fadeIn 0.5s ease-out;
    }
    
    .animate-slideUp {
        animation: slideUp 0.5s ease-out;
    }
    `;document.head.appendChild(R5);const dL="https://web-production-2cf89.up.railway.app",IAe=({isVisible:t,onClose:e})=>{const[n,r]=V.useState([]),[i,o]=V.useState(null),[a,s]=V.useState(null),[l,c]=V.useState(!1),[u,f]=V.useState(null),h=Li({maxWidth:640}),v={container:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 sm:p-6 md:p-8 animate-fadeIn",modal:`w-full max-w-[95vw] sm:max-w-[85vw] md:max-w-[900px] max-h-[90vh] overflow-y-auto 
                bg-gradient-to-br from-slate-900/95 to-black/95 rounded-2xl sm:rounded-3xl 
                p-4 sm:p-6 md:p-8 text-white shadow-2xl border border-cyan-900/50 animate-slideUp 
                backdrop-blur-xl relative z-[10000]`,header:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6 sm:mb-8",title:"text-2xl sm:text-3xl font-bold flex items-center gap-2 sm:gap-3 tracking-wider",gridContainer:`grid grid-cols-1 sm:grid-cols-2 ${Li({minWidth:641,maxWidth:1024})?"lg:grid-cols-3":""} gap-3 sm:gap-4`};V.useEffect(()=>{t&&y()},[t]);const y=async()=>{c(!0),f(null);try{const b=await fetch(`${dL}/countries/list`);if(!b.ok)throw new Error("Error fetching countries");const A=await b.json();r(A.countries)}catch{f("Error loading countries")}finally{c(!1)}},g=async b=>{c(!0),f(null);try{const A=await fetch(`${dL}/model/country_predictions/${encodeURIComponent(b.name)}`);if(!A.ok)throw new Error("Error fetching predictions");const E=await A.json();s(E)}catch{f(`Error loading predictions for ${b.name}`)}finally{c(!1)}},p=b=>new Intl.NumberFormat("en-US",{maximumFractionDigits:2,minimumFractionDigits:2}).format(b),x=({title:b,children:A})=>S.jsxs("div",{className:`bg-gradient-to-br from-slate-900/90 to-black/90 p-4 sm:p-8 rounded-2xl \r
                        border border-cyan-900/50 hover:border-cyan-500/50 transition-all duration-500 \r
                        mb-4 sm:mb-6 backdrop-blur-xl shadow-lg shadow-cyan-500/20`,children:[S.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6 text-cyan-400 tracking-wider",children:b}),A]}),_=({metrics:b})=>S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[{label:"RMSE",value:b.rmse,desc:"Error Cuadrático Medio"},{label:"R² Score",value:b.r2_score,desc:"Coeficiente de Determinación"},{label:"Tiempo",value:`${b.training_time.toFixed(2)}s`,desc:"Duración del Entrenamiento"}].map((A,E)=>S.jsxs("div",{className:`bg-gradient-to-br from-slate-900/90 to-black/90 p-4 sm:p-6 rounded-xl \r
                             border border-cyan-900/50 hover:border-cyan-500/50 transition-all duration-300 \r
                             backdrop-blur-xl`,style:{animation:`fadeIn 0.5s ease-out ${E*.1}s backwards`},children:[S.jsx("div",{className:"text-sm text-cyan-400 font-medium tracking-wider",children:A.label}),S.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white mt-2 mb-1 font-mono",children:p(A.value)}),S.jsx("div",{className:"text-xs text-gray-400",children:A.desc})]},A.label))}),T=({predictions:b})=>S.jsx("div",{className:"h-[300px] sm:h-[400px] w-full",children:S.jsx(Xu,{children:S.jsxs(P5,{data:b.predictions.historical.concat(b.predictions.forecast),children:[S.jsx(Wf,{strokeDasharray:"3 3",stroke:"#1e293b"}),S.jsx(Fo,{dataKey:"year",stroke:"#94a3b8",label:h?null:{value:"Año",position:"bottom",fill:"#94a3b8"},tick:{fontSize:h?10:12}}),S.jsx(uo,{stroke:"#94a3b8",label:h?null:{value:"Emisiones (MtCO2e)",angle:-90,position:"insideLeft",fill:"#94a3b8"},tick:{fontSize:h?10:12},width:h?40:60}),S.jsx(Lr,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.9)",border:"1px solid rgba(6, 182, 212, 0.5)",borderRadius:"0.5rem",backdropFilter:"blur(4px)",fontSize:h?"12px":"14px"}}),S.jsx(ha,{wrapperStyle:{fontSize:h?"12px":"14px"}}),S.jsx(As,{type:"monotone",dataKey:"emissions",stroke:"#06b6d4",strokeWidth:2,dot:{fill:"#06b6d4",r:h?3:4},activeDot:{r:h?5:6,fill:"#22d3ee"},name:"Emisiones Históricas"}),S.jsx(As,{type:"monotone",dataKey:"forecast",stroke:"#14b8a6",strokeWidth:2,dot:{fill:"#14b8a6",r:h?3:4},activeDot:{r:h?5:6,fill:"#2dd4bf"},name:"Predicciones",strokeDasharray:"5 5"})]})})}),w=b=>{switch(b){case"POSITIVO":return"#10b981";case"ALERTA":return"#ef4444";default:return"#f59e0b"}},M=()=>l?S.jsx("div",{className:"flex items-center justify-center p-8 sm:p-12",children:S.jsx("div",{className:"w-12 sm:w-16 h-12 sm:h-16 border-4 border-cyan-500/20 border-t-cyan-500 rounded-full animate-spin"})}):u?S.jsxs("div",{className:"bg-red-900/30 backdrop-blur-sm border border-red-500/50 p-4 sm:p-6 rounded-xl flex items-center gap-3",children:[S.jsx(Wp,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-400"}),S.jsx("p",{className:"text-sm sm:text-base text-red-200",children:u})]}):i?S.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[S.jsxs("button",{onClick:()=>{o(null),s(null)},className:"flex items-center gap-2 text-sm text-cyan-400 hover:text-cyan-300 transition-colors tracking-wider",children:[S.jsx(vl,{className:"rotate-180"}),"Volver a países"]}),a&&S.jsxs(S.Fragment,{children:[S.jsx(x,{title:"Métricas del Modelo",children:S.jsx(_,{metrics:a.metrics})}),S.jsx(x,{title:"Predicción de Emisiones",children:S.jsx(T,{predictions:a})}),S.jsxs(x,{title:"Estado y Recomendaciones",children:[S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 mb-4 sm:mb-6",children:S.jsxs("div",{className:"bg-slate-800/50 p-4 sm:p-6 rounded-xl border border-cyan-900/50 backdrop-blur-xl",children:[S.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-4 tracking-wider",style:{color:w(a.status.current_state)},children:["Estado: ",a.status.current_state]}),S.jsx("p",{className:"text-sm sm:text-base text-gray-300",children:a.status.message}),S.jsxs("div",{className:"mt-4 space-y-2",children:[S.jsxs("p",{className:"text-xs sm:text-sm text-gray-400",children:["Tendencia Anual: ",S.jsxs("span",{className:"text-cyan-400 font-mono",children:[a.status.annual_trend.toFixed(1),"%"]})]}),S.jsxs("p",{className:"text-xs sm:text-sm text-gray-400",children:["Cambio Reciente: ",S.jsxs("span",{className:"text-cyan-400 font-mono",children:[a.status.recent_change.toFixed(1),"%"]})]}),S.jsxs("p",{className:"text-xs sm:text-sm text-gray-400",children:["Cambio Proyectado: ",S.jsxs("span",{className:"text-cyan-400 font-mono",children:[a.status.forecast_change.toFixed(1),"%"]})]})]})]})}),S.jsxs("div",{className:"bg-slate-800/50 p-4 sm:p-6 rounded-xl border border-cyan-900/50 backdrop-blur-xl",children:[S.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-4 text-cyan-400 tracking-wider",children:"Recomendaciones"}),S.jsx("ul",{className:"space-y-2",children:a.recommendations.map((b,A)=>S.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-300 hover:text-cyan-300 transition-colors",children:[S.jsx("div",{className:"mt-1 text-cyan-400",children:"•"}),b]},A))})]})]})]})]}):S.jsx("div",{className:v.gridContainer,children:n.map((b,A)=>S.jsx("button",{onClick:()=>{o(b),g(b)},className:`group p-4 sm:p-6 bg-gradient-to-br from-slate-900/90 to-black/90 rounded-xl \r
                                     border border-cyan-900/50 hover:border-cyan-500/50 transition-all duration-300 \r
                                     transform hover:-translate-y-1 backdrop-blur-xl`,style:{animation:`fadeIn 0.5s ease-out ${A*.1}s backwards`},children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("span",{className:"text-base sm:text-lg font-medium tracking-wider",children:b.name}),S.jsx(vl,{className:"text-cyan-400 transform group-hover:translate-x-1 transition-transform duration-300"})]})},b.name))});return t?S.jsx("div",{className:v.container,children:S.jsxs("div",{className:v.modal,children:[S.jsxs("div",{className:v.header,children:[S.jsxs("div",{children:[S.jsxs("h2",{className:v.title,children:[S.jsx($u,{className:"h-6 w-6 sm:h-8 sm:w-8 text-cyan-500"}),S.jsx("span",{className:"bg-gradient-to-r from-cyan-400 to-teal-400 text-transparent bg-clip-text",children:"Predicción de Emisiones"})]}),S.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-1 sm:mt-2",children:i?i.name:"Selecciona un país para comenzar"})]}),S.jsx("button",{onClick:e,className:"p-2 rounded-xl hover:bg-slate-800/50 transition-all duration-300 group","aria-label":"Cerrar",children:S.jsx(Pa,{className:"h-5 w-5 sm:h-6 sm:w-6 text-gray-400 group-hover:text-red-400 transition-colors"})})]}),M()]})}):null},NAe="https://web-production-2cf89.up.railway.app",DAe=({isVisible:t,onClose:e})=>{const[n,r]=V.useState(null),[i,o]=V.useState(!1),[a,s]=V.useState(null),l=Li({maxWidth:640});Li({minWidth:641,maxWidth:1024});const c={container:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 sm:p-6 md:p-8 animate-fadeIn",modal:`w-full max-w-[95vw] sm:max-w-[85vw] md:max-w-[900px] max-h-[90vh] overflow-y-auto 
                bg-gradient-to-br from-slate-900/95 to-black/95 rounded-2xl sm:rounded-3xl 
                p-4 sm:p-6 md:p-8 text-white shadow-2xl border border-cyan-900/50 animate-slideUp relative z-[10000]`,header:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6 sm:mb-8",title:"text-2xl sm:text-3xl font-bold tracking-wider",gridContainer:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6"};V.useEffect(()=>{t&&u()},[t]);const u=async()=>{o(!0),s(null);try{const y=await fetch(`${NAe}/model/predictions`);if(!y.ok)throw new Error("Error fetching predictions");const g=await y.json();r(g)}catch{s("Error loading predictions")}finally{o(!1)}},f=({title:y,children:g})=>S.jsxs("div",{className:`bg-gradient-to-br from-slate-900/90 to-black/90 p-4 sm:p-8 rounded-2xl \r
                        border border-cyan-900/50 hover:border-cyan-500/50 transition-all duration-500 \r
                        mb-4 sm:mb-6 backdrop-blur-xl shadow-lg shadow-cyan-500/20`,children:[S.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6 text-cyan-400 tracking-wider",children:y}),g]}),h=({predictions:y})=>{var g,p;return S.jsx("div",{className:"h-[300px] sm:h-[400px] w-full",children:S.jsx(Xu,{children:S.jsxs(C5,{data:(p=y==null?void 0:y.predictions)==null?void 0:p.historical.concat((g=y==null?void 0:y.predictions)==null?void 0:g.forecast),children:[S.jsx("defs",{children:S.jsxs("linearGradient",{id:"colorGlobalEmissions",x1:"0",y1:"0",x2:"0",y2:"1",children:[S.jsx("stop",{offset:"5%",stopColor:"#06b6d4",stopOpacity:.3}),S.jsx("stop",{offset:"95%",stopColor:"#06b6d4",stopOpacity:0})]})}),S.jsx(Wf,{strokeDasharray:"3 3",stroke:"#1e293b"}),S.jsx(Fo,{dataKey:"year",stroke:"#94a3b8",label:l?null:{value:"Año",position:"bottom",fill:"#94a3b8"},tick:{fontSize:l?10:12}}),S.jsx(uo,{stroke:"#94a3b8",label:l?null:{value:"Emisiones (MtCO2e)",angle:-90,position:"insideLeft",fill:"#94a3b8"},tick:{fontSize:l?10:12},width:l?40:60}),S.jsx(Lr,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.9)",border:"1px solid rgba(6, 182, 212, 0.5)",borderRadius:"0.5rem",backdropFilter:"blur(4px)",fontSize:l?"12px":"14px"}}),S.jsx(ha,{wrapperStyle:{fontSize:l?"12px":"14px"}}),S.jsx(Do,{type:"monotone",dataKey:"emissions",stroke:"#06b6d4",strokeWidth:2,fillOpacity:1,fill:"url(#colorGlobalEmissions)",name:"Emisiones Históricas"}),S.jsx(Do,{type:"monotone",dataKey:"emissions",stroke:"#14b8a6",strokeWidth:2,fillOpacity:.3,fill:"url(#colorGlobalEmissions)",name:"Predicciones",strokeDasharray:"5 5"})]})})})},d=({metrics:y})=>S.jsx("div",{className:"bg-slate-800/50 p-4 sm:p-6 rounded-xl border border-cyan-900/50 backdrop-blur-xl",children:S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[S.jsxs("div",{children:[S.jsx("h4",{className:"text-xs sm:text-sm text-gray-400",children:"RMSE"}),S.jsx("div",{className:"text-xl sm:text-2xl font-bold text-cyan-400",children:y==null?void 0:y.rmse.toFixed(2)})]}),S.jsxs("div",{children:[S.jsx("h4",{className:"text-xs sm:text-sm text-gray-400",children:"R² Score"}),S.jsx("div",{className:"text-xl sm:text-2xl font-bold text-cyan-400",children:y==null?void 0:y.r2_score.toFixed(2)})]}),S.jsxs("div",{className:"sm:col-span-2",children:[S.jsx("h4",{className:"text-xs sm:text-sm text-gray-400",children:"Tiempo de Entrenamiento"}),S.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-cyan-400",children:[y==null?void 0:y.training_time.toFixed(2),"s"]})]})]})}),v=()=>{var y,g,p,x,_,T,w;return i?S.jsx("div",{className:"flex items-center justify-center p-8 sm:p-12",children:S.jsx("div",{className:"w-12 sm:w-16 h-12 sm:h-16 border-4 border-cyan-500/20 border-t-cyan-500 rounded-full animate-spin"})}):a?S.jsxs("div",{className:"bg-red-900/30 backdrop-blur-sm border border-red-500/50 p-4 sm:p-6 rounded-xl flex items-center gap-3",children:[S.jsx(Wp,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-400"}),S.jsx("p",{className:"text-sm sm:text-base text-red-200",children:a})]}):S.jsxs(S.Fragment,{children:[S.jsx(f,{title:"Emisiones Globales",children:S.jsx(h,{predictions:n})}),S.jsxs("div",{className:c.gridContainer,children:[S.jsx(f,{title:"Métricas del Modelo",children:S.jsx(d,{metrics:n==null?void 0:n.metrics})}),S.jsx(f,{title:"Proyecciones",children:S.jsx("div",{className:"bg-slate-800/50 p-4 sm:p-6 rounded-xl border border-cyan-900/50 backdrop-blur-xl",children:S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("h4",{className:"text-xs sm:text-sm text-gray-400",children:"Emisiones Futuras Estimadas"}),S.jsx("div",{className:"max-h-[200px] overflow-y-auto pr-2",children:(y=n==null?void 0:n.predictions)==null?void 0:y.forecast.map((M,b)=>S.jsxs("div",{className:"mt-2",children:[S.jsxs("span",{className:"text-sm sm:text-base text-gray-300",children:[M.year,": "]}),S.jsxs("span",{className:"text-sm sm:text-base text-cyan-400 font-mono",children:[M.emissions.toFixed(2)," MtCO2e"]})]},b))})]}),S.jsxs("div",{className:"mt-4",children:[S.jsx("h4",{className:"text-xs sm:text-sm text-gray-400",children:"Cambio Porcentual"}),S.jsxs("div",{className:"text-lg sm:text-xl font-bold text-cyan-400",children:[((((x=(p=n==null?void 0:n.predictions)==null?void 0:p.forecast[((g=n==null?void 0:n.predictions)==null?void 0:g.forecast.length)-1])==null?void 0:x.emissions)/((w=(T=n==null?void 0:n.predictions)==null?void 0:T.historical[((_=n==null?void 0:n.predictions)==null?void 0:_.historical.length)-1])==null?void 0:w.emissions)-1)*100).toFixed(2),"%"]})]})]})})})]})]})};return t?S.jsx("div",{className:c.container,children:S.jsxs("div",{className:c.modal,children:[S.jsxs("div",{className:c.header,children:[S.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[S.jsx(Hd,{className:"h-6 w-6 sm:h-8 sm:w-8 text-cyan-500"}),S.jsx("h2",{className:`${c.title} bg-gradient-to-r from-cyan-400 to-teal-400 text-transparent bg-clip-text`,children:"Predicciones Globales de CO2"})]}),S.jsx("button",{onClick:e,className:"p-2 rounded-xl hover:bg-slate-800/50 transition-all duration-300 group","aria-label":"Cerrar",children:S.jsx(Pa,{className:"h-5 w-5 sm:h-6 sm:w-6 text-gray-400 group-hover:text-red-400 transition-colors"})})]}),v()]})}):null},kc=({title:t,description:e,icon:n,className:r=""})=>{const[i,o]=V.useState(!1);return S.jsxs("div",{className:`
                relative overflow-hidden p-6 rounded-xl
                bg-gradient-to-br from-gray-900/80 to-black
                border border-gray-800 backdrop-blur-sm
                transform transition-all duration-500
                hover:scale-105 hover:shadow-2xl
                ${r}
            `,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-br opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),S.jsxs("div",{className:"relative z-10",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[S.jsx("div",{className:"p-2 rounded-lg bg-gray-800/50",children:S.jsx(n,{})}),S.jsx("h4",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-300",children:t})]}),S.jsx("p",{className:"text-gray-400 leading-relaxed",children:e})]}),i&&S.jsx("div",{className:"absolute inset-0 bg-white/5 rounded-xl animate-pulse-slow"})]})},jc=({title:t,description:e,icon:n})=>S.jsx("div",{className:"group p-4 bg-black/20 rounded-lg border border-gray-800 hover:border-blue-500/30 transition-all duration-300",children:S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"p-2 rounded-lg bg-blue-900/30 group-hover:bg-blue-900/50 transition-all",children:S.jsx(n,{})}),S.jsxs("div",{children:[S.jsx("h5",{className:"font-semibold text-blue-300",children:t}),S.jsx("p",{className:"text-gray-400 text-sm",children:e})]})]})}),Ob=({title:t,icon:e,demands:n})=>S.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-600/20 to-purple-900/20 rounded-xl border border-purple-500/30",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[S.jsx("div",{className:"p-2 rounded-lg bg-black/20",children:S.jsx(e,{})}),S.jsx("h4",{className:"text-xl font-bold text-purple-400",children:t})]}),S.jsx("ul",{className:"space-y-3",children:n.map((r,i)=>S.jsxs("li",{className:"flex items-center gap-2 text-gray-300",children:[S.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-purple-500"}),r]},i))})]}),gn={Earth:()=>S.jsxs("svg",{viewBox:"0 0 24 24",className:"w-8 h-8",children:[S.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"animate-pulse-slow",children:S.jsx("animate",{attributeName:"r",values:"10;9;10",dur:"3s",repeatCount:"indefinite"})}),S.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z",fill:"currentColor",className:"text-emerald-500",children:S.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 12 12",to:"360 12 12",dur:"20s",repeatCount:"indefinite"})})]}),Protest:()=>S.jsx("svg",{viewBox:"0 0 24 24",className:"w-8 h-8",children:S.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",className:"text-blue-500",children:S.jsx("animate",{attributeName:"stroke-dasharray",values:"1,150;150,1",dur:"2s",repeatCount:"indefinite"})})}),Warning:()=>S.jsxs("svg",{viewBox:"0 0 24 24",className:"w-8 h-8",children:[S.jsx("path",{d:"M12 2L2 22h20L12 2z",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-red-500",children:S.jsx("animate",{attributeName:"stroke-dasharray",values:"0,100;100,0",dur:"2s",repeatCount:"indefinite"})}),S.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"15",stroke:"currentColor",strokeWidth:"2",children:S.jsx("animate",{attributeName:"strokeOpacity",values:"0;1;1;0",dur:"1.5s",repeatCount:"indefinite"})})]}),Fire:()=>S.jsx("svg",{viewBox:"0 0 24 24",className:"w-8 h-8",children:S.jsx("path",{d:"M12 2c0 0-3 4-3 6c0 1.5 1 2 1 2s-1.5-0.5-1.5 1c0 1.5 1 2 1 2s-1.5-0.5-1.5 1c0 1.5 3 2 3 2s-1.5-0.5-1.5 1c0 1.5 1.5 2 1.5 2s-1.5-0.5-1.5 1c0 1.5 3 2 3 2",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-orange-500",children:S.jsx("animate",{attributeName:"d",values:"M12 2c0 0-3 4-3 6c0 1.5 1 2 1 2s-1.5-0.5-1.5 1c0 1.5 1 2 1 2s-1.5-0.5-1.5 1c0 1.5 3 2 3 2s-1.5-0.5-1.5 1c0 1.5 1.5 2 1.5 2s-1.5-0.5-1.5 1c0 1.5 3 2 3 2;M12 2c0 0-2 4-2 6c0 1.5 1.5 2 1.5 2s-1-0.5-1 1c0 1.5 1.5 2 1.5 2s-1-0.5-1 1c0 1.5 2 2 2 2s-1-0.5-1 1c0 1.5 1.5 2 1.5 2s-1-0.5-1 1c0 1.5 2 2 2 2",dur:"0.5s",repeatCount:"indefinite"})})}),Wave:()=>S.jsx("svg",{viewBox:"0 0 24 24",className:"w-8 h-8",children:S.jsx("path",{d:"M2 12s4-8 10-8 10 8 10 8-4 8-10 8-10-8-10-8z",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-blue-400",children:S.jsx("animate",{attributeName:"d",values:"M2 12s4-8 10-8 10 8 10 8-4 8-10 8-10-8-10-8z;M2 12s4-4 10-4 10 4 10 4-4 4-10 4-10-4-10-4z;M2 12s4-8 10-8 10 8 10 8-4 8-10 8-10-8-10-8z",dur:"3s",repeatCount:"indefinite"})})})},LAe=[{id:"purpose",icon:gn.Earth,label:"Misión Global",color:"from-emerald-600 to-green-800",gradient:"from-emerald-900/50 to-green-900/50"},{id:"crisis",icon:gn.Fire,label:"Crisis Climática",color:"from-red-600 to-orange-700",gradient:"from-red-900/50 to-orange-900/50"},{id:"action",icon:gn.Protest,label:"Acción Ciudadana",color:"from-blue-600 to-indigo-800",gradient:"from-blue-900/50 to-indigo-900/50"},{id:"demands",icon:gn.Warning,label:"Exigencias",color:"from-purple-600 to-pink-700",gradient:"from-purple-900/50 to-pink-900/50"}],kAe=({isVisible:t,onClose:e})=>{const[n,r]=V.useState("purpose"),[i,o]=V.useState(!1);return V.useEffect(()=>(t&&(o(!0),document.body.style.overflow="hidden"),()=>{document.body.style.overflow="unset"}),[t]),t?S.jsxs("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-lg z-50",children:[S.jsx("div",{className:"h-full overflow-y-auto",children:S.jsx("div",{className:"container mx-auto p-4",children:S.jsxs("div",{className:"w-full max-w-7xl mx-auto bg-gradient-to-br from-gray-900 to-black rounded-2xl overflow-hidden shadow-2xl border border-gray-800",children:[S.jsxs("div",{className:"sticky top-0 z-20 bg-gradient-to-br from-gray-900 to-black",children:[S.jsxs("div",{className:"relative p-8 overflow-hidden",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/10 to-blue-500/10 animate-pulse-slow"}),S.jsxs("div",{className:"relative z-10 flex justify-between items-center",children:[S.jsxs("div",{className:"flex items-center gap-6",children:[S.jsx(gn.Earth,{}),S.jsxs("div",{children:[S.jsx("h2",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-300 to-blue-300",children:"Acción por el Clima"}),S.jsx("p",{className:"text-gray-400 mt-2",children:"Unidos por un futuro sostenible"})]})]}),S.jsx("button",{onClick:()=>{document.body.style.overflow="unset",e()},className:"p-3 rounded-xl hover:bg-gray-800/50 transition-all duration-300 group",children:S.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-gray-400 group-hover:text-red-400",children:S.jsx("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]})]}),S.jsx("nav",{className:"flex gap-3 p-4 bg-black/50 overflow-x-auto",children:LAe.map(a=>S.jsxs("button",{onClick:()=>r(a.id),className:`
                                            relative group flex items-center gap-3 px-6 py-3 rounded-xl
                                            transition-all duration-500 whitespace-nowrap
                                            ${n===a.id?`bg-gradient-to-r ${a.color} shadow-lg scale-105`:"bg-gray-800/50 hover:bg-gray-700/50"}
                                        `,children:[S.jsx(a.icon,{}),S.jsx("span",{className:"font-medium",children:a.label}),n===a.id&&S.jsx("div",{className:"absolute inset-0 bg-white/10 rounded-xl animate-pulse-slow"})]},a.id))})]}),S.jsxs("div",{className:"p-6",children:[n==="purpose"&&S.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[S.jsx("h3",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-green-300",children:"Nuestra Misión por el Planeta"}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[S.jsx(kc,{title:"Visualización de Impacto",description:"Creamos consciencia sobre la crisis climática a través de datos visuales impactantes y análisis en tiempo real de las emisiones globales.",icon:gn.Earth,className:"border-emerald-500/20"}),S.jsx(kc,{title:"Educación Ambiental",description:"Proporcionamos información clara y actualizada sobre el cambio climático y sus efectos en nuestro planeta y sociedades.",icon:gn.Wave,className:"border-emerald-500/20"}),S.jsx(kc,{title:"Movilización Global",description:"Conectamos activistas y organizaciones para crear un movimiento global unificado por la justicia climática.",icon:gn.Protest,className:"border-emerald-500/20"}),S.jsx(kc,{title:"Soluciones Climáticas",description:"Proponemos y promovemos soluciones concretas para la reducción de emisiones y la transición hacia energías renovables.",icon:gn.Fire,className:"border-emerald-500/20"})]})]}),n==="crisis"&&S.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[S.jsx("h3",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-red-400 to-orange-300",children:"Crisis Climática: La Cuenta Regresiva"}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[S.jsx("div",{className:"lg:col-span-2",children:S.jsxs("div",{className:"bg-black/40 p-6 rounded-xl border border-red-500/30 space-y-4",children:[S.jsx("h4",{className:"text-2xl font-bold text-red-400",children:"Punto de No Retorno"}),S.jsx("div",{className:"relative overflow-hidden rounded-lg h-48 bg-gray-900/50",children:S.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"text-4xl font-bold text-red-500",children:"1.5°C"}),S.jsx("div",{className:"text-gray-400",children:"Límite crítico de calentamiento"})]})})}),S.jsx("p",{className:"text-gray-300",children:"Estamos peligrosamente cerca del punto de no retorno. Las emisiones actuales nos llevan a un calentamiento catastrófico si no actuamos ahora."})]})}),S.jsxs("div",{className:"space-y-6",children:[S.jsx(kc,{title:"Impacto Global",description:"Los efectos del cambio climático ya son evidentes: eventos extremos, pérdida de biodiversidad y riesgo para millones.",icon:gn.Warning,className:"border-red-500/20"}),S.jsx(kc,{title:"Tiempo Limitado",description:"Científicos advierten que tenemos menos de una década para realizar cambios drásticos y evitar daños irreversibles.",icon:gn.Fire,className:"border-red-500/20"})]})]})]}),n==="action"&&S.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[S.jsx("h3",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-indigo-300",children:"Acción Climática: El Momento es Ahora"}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[S.jsxs("div",{className:"bg-black/40 p-6 rounded-xl border border-blue-500/30",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[S.jsx(gn.Wave,{}),S.jsx("h4",{className:"text-2xl font-bold text-blue-400",children:"Acciones Individuales"})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx(jc,{title:"Reduce tu Huella de Carbono",description:"Calcula y reduce tu impacto personal en el planeta.",icon:gn.Earth}),S.jsx(jc,{title:"Transporte Sostenible",description:"Utiliza bicicleta, transporte público o vehículos eléctricos.",icon:gn.Wave}),S.jsx(jc,{title:"Consumo Consciente",description:"Elige productos locales y reduce el desperdicio.",icon:gn.Fire}),S.jsx("button",{className:"w-full py-3 mt-4 bg-blue-600/20 hover:bg-blue-600/40 rounded-lg border border-blue-500/30 transition-all duration-300",children:"Calcula tu Impacto →"})]})]}),S.jsxs("div",{className:"bg-black/40 p-6 rounded-xl border border-indigo-500/30",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[S.jsx(gn.Protest,{}),S.jsx("h4",{className:"text-2xl font-bold text-indigo-400",children:"Acción Comunitaria"})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx(jc,{title:"Únete a Movimientos",description:"Participa en organizaciones locales y globales por el clima.",icon:gn.Protest}),S.jsx(jc,{title:"Educa e Inspira",description:"Comparte conocimiento y motiva a otros a actuar.",icon:gn.Wave}),S.jsx(jc,{title:"Proyectos Locales",description:"Inicia o únete a proyectos de sostenibilidad en tu comunidad.",icon:gn.Earth}),S.jsx("button",{className:"w-full py-3 mt-4 bg-indigo-600/20 hover:bg-indigo-600/40 rounded-lg border border-indigo-500/30 transition-all duration-300",children:"Encuentra Grupos Locales →"})]})]})]}),S.jsxs("div",{className:"relative mt-8 p-6 bg-black/40 rounded-xl border border-blue-500/30",children:[S.jsx("h4",{className:"text-2xl font-bold text-blue-400 mb-4",children:"Impacto Global de la Acción Climática"}),S.jsx("div",{className:"aspect-video bg-gray-900/50 rounded-lg overflow-hidden relative",children:S.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"text-4xl font-bold text-blue-500",children:"2.1M+"}),S.jsx("div",{className:"text-gray-400",children:"Activistas Unidos Globalmente"})]})})})]})]}),n==="demands"&&S.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[S.jsx("h3",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-300",children:"Exigencias para el Cambio"}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[S.jsx(Ob,{title:"Para Gobiernos",icon:gn.Warning,demands:["Declaración de emergencia climática","100% energías renovables para 2035","Fin de subsidios a combustibles fósiles","Leyes estrictas de protección ambiental"]}),S.jsx(Ob,{title:"Para Empresas",icon:gn.Fire,demands:["Neutralidad de carbono para 2030","Transparencia en emisiones","Inversión en tecnologías limpias","Cadenas de suministro sostenibles"]}),S.jsx(Ob,{title:"Para Instituciones",icon:gn.Earth,demands:["Desinversión de combustibles fósiles","Educación climática obligatoria","Investigación en soluciones verdes","Políticas de cero residuos"]})]}),S.jsx("div",{className:"mt-8 p-8 bg-gradient-to-r from-purple-900/30 to-pink-900/30 rounded-xl border border-purple-500/30",children:S.jsxs("div",{className:"text-center space-y-4",children:[S.jsx("h4",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-300",children:"¡Únete al Movimiento!"}),S.jsx("p",{className:"text-gray-300 max-w-2xl mx-auto",children:"El tiempo de actuar es ahora. Cada voz cuenta, cada acción suma. Juntos podemos crear el cambio que nuestro planeta necesita."}),S.jsx("div",{className:"flex justify-center mt-6",children:S.jsx("button",{className:"px-6 py-3 bg-pink-600 hover:bg-pink-500 rounded-lg transition-all duration-300",children:"Comparte el Mensaje"})})]})})]})]})]})})}),S.jsx("style",{jsx:!0,children:`
                ::-webkit-scrollbar {
                    width: 8px;
                }

                ::-webkit-scrollbar-track {
                    background: rgba(0, 0, 0, 0.1);
                }

                ::-webkit-scrollbar-thumb {
                    background: rgba(255, 255, 255, 0.2);
                    border-radius: 4px;
                }

                ::-webkit-scrollbar-thumb:hover {
                    background: rgba(255, 255, 255, 0.3);
                }

                @keyframes fadeIn {
                    from {
                        opacity: 0;
                        transform: translateY(10px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }

                @keyframes pulse-slow {
                    0%, 100% {
                        opacity: 1;
                    }
                    50% {
                        opacity: 0.5;
                    }
                }

                .animate-fadeIn {
                    animation: fadeIn 0.5s ease-out forwards;
                }

                .animate-pulse-slow {
                    animation: pulse-slow 3s ease-in-out infinite;
                }
            `})]}):null},jAe=({isVisible:t,onClose:e})=>{var f;const[n,r]=V.useState("general"),[i,o]=V.useState(""),[a,s]=V.useState(!1);if(V.useEffect(()=>{t&&s(!0)},[t,n]),!t)return null;const l={Book:()=>S.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:S.jsx("path",{d:"M2 6s1.5-2 5-2 5 2 5 2v14s-1.5-1-5-1-5 1-5 1V6zm10 0s1.5-2 5-2 5 2 5 2v14s-1.5-1-5-1-5 1-5 1V6z",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:S.jsx("animate",{attributeName:"stroke-dasharray",from:"0 100",to:"100 100",dur:"1.5s",begin:"0s",fill:"freeze"})})}),Factory:()=>S.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:S.jsx("path",{d:"M12 16V4l-6 6v6m12 0V8l-6 4v4M2 20h20",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:S.jsx("animate",{attributeName:"stroke-dasharray",from:"0 100",to:"100 100",dur:"1.5s",begin:"0s",fill:"freeze"})})}),Data:()=>S.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:S.jsxs("g",{fill:"none",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("circle",{cx:"12",cy:"12",r:"8",children:S.jsx("animate",{attributeName:"r",values:"8;7;8",dur:"2s",repeatCount:"indefinite"})}),S.jsx("path",{d:"M12 4v16M4 12h16",children:S.jsx("animate",{attributeName:"stroke-dasharray",from:"0 100",to:"100 100",dur:"1.5s",begin:"0s",fill:"freeze"})})]})}),Emission:()=>S.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:S.jsx("path",{d:"M12 4c-3 0-6 2-6 6 0 4 6 10 6 10s6-6 6-10c0-4-3-6-6-6z",fill:"none",stroke:"currentColor",strokeWidth:"2",children:S.jsx("animate",{attributeName:"stroke-dasharray",from:"0 100",to:"100 100",dur:"1.5s",begin:"0s",fill:"freeze"})})}),Fuel:()=>S.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:S.jsx("path",{d:"M12 2l-6 12h12L12 2zm0 20l-3-6h6l-3 6z",fill:"none",stroke:"currentColor",strokeWidth:"2",children:S.jsx("animate",{attributeName:"stroke-dasharray",from:"0 100",to:"100 100",dur:"1.5s",begin:"0s",fill:"freeze"})})}),Search:()=>S.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[S.jsx("circle",{cx:"11",cy:"11",r:"7",fill:"none",stroke:"currentColor",strokeWidth:"2",children:S.jsx("animate",{attributeName:"r",values:"7;6.5;7",dur:"2s",repeatCount:"indefinite"})}),S.jsx("path",{d:"M21 21l-4.35-4.35",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:S.jsx("animate",{attributeName:"stroke-dasharray",from:"0 20",to:"20 20",dur:"1s",begin:"0s",fill:"freeze"})})]})},c={general:{icon:l.Book,title:"Conceptos Generales",bgGradient:"from-emerald-500 to-teal-700",items:[{title:"Carbon Majors Database",description:"Base de datos que rastrea las emisiones de gases de efecto invernadero desde 1854 hasta la actualidad, vinculándolas directamente con las empresas productoras.",icon:l.Data},{title:"Gases de Efecto Invernadero",description:"Gases atmosféricos que retienen el calor y contribuyen al cambio climático. Los principales son CO2, metano y óxido nitroso.",icon:l.Emission},{title:"MtCO2e",description:"Millones de toneladas de CO2 equivalente. Unidad estándar para medir las emisiones de gases de efecto invernadero.",icon:l.Data}]},empresas:{icon:l.Factory,title:"Tipos de Empresas",bgGradient:"from-blue-500 to-indigo-700",items:[{title:"Empresas Privadas",description:"Compañías de propiedad de inversores privados que producen combustibles fósiles.",icon:l.Factory},{title:"Empresas Estatales",description:"Compañías controladas en más del 50% por gobiernos nacionales.",icon:l.Factory},{title:"Productores Nacionales",description:"Producción directamente controlada por estados, común en el sector del carbón.",icon:l.Factory}]},datos:{icon:l.Data,title:"Fuentes de Datos",bgGradient:"from-purple-500 to-pink-700",items:[{title:"Datos Autorreportados",description:"Información proporcionada directamente por las empresas en informes anuales y documentos oficiales.",icon:l.Data},{title:"Fuentes Externas",description:"Datos de agencias como EIA, Oil & Gas Journal y otros cuando no hay datos directos disponibles.",icon:l.Data},{title:"Verificación",description:"Proceso de validación de datos usando múltiples fuentes y metodologías estandarizadas.",icon:l.Data}]},emisiones:{icon:l.Emission,title:"Tipos de Emisiones",bgGradient:"from-orange-500 to-red-700",items:[{title:"Emisiones Directas (Scope 1)",description:"Emisiones generadas directamente por las operaciones de la empresa.",icon:l.Emission},{title:"Emisiones Indirectas (Scope 3)",description:"Emisiones producidas por el uso final de los productos vendidos por la empresa.",icon:l.Emission},{title:"Emisiones Fugitivas",description:"Escapes no intencionales de gases durante la producción y transporte.",icon:l.Emission}]},combustibles:{icon:l.Fuel,title:"Combustibles",bgGradient:"from-yellow-500 to-orange-700",items:[{title:"Petróleo y GNL",description:"Medido en barriles. Incluye petróleo crudo y líquidos de gas natural.",icon:l.Fuel},{title:"Gas Natural",description:"Medido en pies cúbicos. Principal fuente de energía para generación eléctrica.",icon:l.Fuel},{title:"Carbón",description:"Medido en toneladas. Incluye diferentes tipos como térmico y metalúrgico.",icon:l.Fuel}]}},u=Object.entries(c).reduce((h,[d,v])=>{const y=v.items.filter(g=>g.title.toLowerCase().includes(i.toLowerCase())||g.description.toLowerCase().includes(i.toLowerCase()));return y.length>0&&(h[d]={...v,items:y}),h},{});return S.jsxs("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-md flex items-center justify-center p-4 z-50",children:[S.jsxs("div",{className:"w-full max-w-6xl max-h-[90vh] overflow-hidden rounded-2xl bg-gradient-to-br from-slate-50 to-slate-100 shadow-2xl transform transition-all duration-500 scale-100",children:[S.jsxs("div",{className:"relative p-6 backdrop-blur-sm bg-white/80 border-b border-slate-200",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-400 to-teal-600 rounded-xl shadow-lg text-white",children:S.jsx(l.Book,{})}),S.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-emerald-600 to-teal-800 bg-clip-text text-transparent",children:"Diccionario de Carbono"})]}),S.jsx("button",{onClick:e,className:"p-2 rounded-lg hover:bg-slate-200/50 transition-all duration-300",children:S.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-slate-600",children:S.jsx("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]}),S.jsxs("div",{className:"mt-6 relative group",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-200 to-teal-200 rounded-lg blur opacity-75 group-hover:opacity-100 transition duration-300"}),S.jsxs("div",{className:"relative flex items-center",children:[S.jsx("input",{type:"text",placeholder:"Buscar conceptos...",value:i,onChange:h=>o(h.target.value),className:"w-full px-12 py-3 bg-white rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 transition-all duration-300"}),S.jsx("div",{className:"absolute left-4 text-slate-400",children:S.jsx(l.Search,{})})]})]}),S.jsx("div",{className:"mt-6 flex gap-2 overflow-x-auto pb-2",children:Object.entries(c).map(([h,d])=>{const v=d.icon;return S.jsxs("button",{onClick:()=>r(h),className:`
                                        flex items-center gap-2 px-4 py-2 rounded-lg
                                        transition-all duration-300 whitespace-nowrap
                                        ${n===h?`bg-gradient-to-r ${d.bgGradient} text-white shadow-lg`:"bg-white hover:bg-slate-50 text-slate-700"}
                                    `,children:[S.jsx(v,{}),d.title]},h)})})]}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6 overflow-y-auto max-h-[calc(90vh-280px)]",children:(i?(f=u[n])==null?void 0:f.items:c[n].items).map((h,d)=>S.jsxs("div",{className:`
                                relative group p-6 bg-white rounded-xl shadow-lg
                                hover:shadow-2xl transition-all duration-500 transform
                                ${a?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}
                            `,style:{transitionDelay:`${d*100}ms`},children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/10 to-teal-500/10 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),S.jsxs("div",{className:"relative z-10",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[S.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-400/20 to-teal-400/20 rounded-lg",children:S.jsx(h.icon,{})}),S.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:h.title})]}),S.jsx("p",{className:"text-slate-600 leading-relaxed",children:h.description})]})]},d))}),S.jsx("div",{className:"p-4 bg-gradient-to-r from-emerald-50 to-teal-50 border-t border-slate-200",children:S.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-600",children:[S.jsxs("span",{className:"flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4 text-emerald-500",viewBox:"0 0 24 24",children:S.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"2",children:S.jsx("animate",{attributeName:"r",values:"10;9;10",dur:"3s",repeatCount:"indefinite"})})}),"Actualizado 2024"]}),S.jsx("span",{children:"Carbon Majors Database"})]})})]}),S.jsx("style",{jsx:!0,children:`
                ::-webkit-scrollbar {
                    width: 8px;
                    height: 8px;
                }
                
                ::-webkit-scrollbar-track {
                    background: transparent;
                }
                
                ::-webkit-scrollbar-thumb {
                    background: rgba(100, 116, 139, 0.5);
                    border-radius: 4px;
                }
                
                ::-webkit-scrollbar-thumb:hover {
                    background: rgba(100, 116, 139, 0.7);
                }

                @keyframes fadeIn {
                    from {
                        opacity: 0;
                        transform: translateY(20px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }

                .animate-fadeIn {
                    animation: fadeIn 0.5s ease-out forwards;
                }
            `})]})},UAe="/EmissionsPage/sounds/mixkit-relaxing-harp-sweep-2628.mp3",FAe=({onComplete:t})=>{const[e,n]=V.useState(!1),[r,i]=V.useState(!1),[o,a]=V.useState(!1),[s,l]=V.useState(!1),[c,u]=V.useState(!1),[f,h]=V.useState(!1),d=V.useRef(null),v=V.useRef(null),y=V.useRef(null),g=V.useRef(null),p=async()=>{try{const _=new Audio(UAe);g.current=_,_.preload="auto",_.volume=.5,_.onerror=T=>{var w,M;console.error("Error loading audio:",T),console.error("Error code:",(w=_.error)==null?void 0:w.code),console.error("Error message:",(M=_.error)==null?void 0:M.message),u(!0)},_.oncanplaythrough=async()=>{try{await _.play(),console.log("Audio playing successfully")}catch(T){if(console.error("Play error:",T),T.name==="NotAllowedError"){const w=async()=>{try{await _.play(),document.removeEventListener("click",w)}catch(M){console.error("Retry play error:",M)}};document.addEventListener("click",w)}}}}catch(_){console.error("Audio setup error:",_),u(!0)}},x=()=>{l(!0),n(!0),p().catch(console.error),setTimeout(()=>{i(!0)},1e3),setTimeout(()=>{a(!0),setTimeout(()=>{n(!1),t()},1e3)},5e3)};return V.useEffect(()=>()=>{g.current&&(g.current.pause(),g.current=null)},[]),V.useEffect(()=>{var L;if(!e)return;let _;const T=new Qj,w=new si(75,window.innerWidth/window.innerHeight,.1,1e3),M=new cT({alpha:!0,antialias:!0});M.setSize(window.innerWidth,window.innerHeight),M.setPixelRatio(Math.min(window.devicePixelRatio,2)),(L=d.current)==null||L.appendChild(M.domElement);const b=new xa({uniforms:{time:{value:0},progress:{value:0},noiseScale:{value:5}},vertexShader:`
        uniform float time;
        uniform float progress;
        varying vec2 vUv;
        varying vec3 vNormal;
        varying vec3 vPosition;
        
        vec3 mod289(vec3 x) {
          return x - floor(x * (1.0 / 289.0)) * 289.0;
        }
        vec4 mod289(vec4 x) {
          return x - floor(x * (1.0 / 289.0)) * 289.0;
        }
        vec4 permute(vec4 x) {
          return mod289(((x*34.0)+1.0)*x);
        }
        vec4 taylorInvSqrt(vec4 r) {
          return 1.79284291400159 - 0.85373472095314 * r;
        }
        vec3 fade(vec3 t) {
          return t*t*t*(t*(t*6.0-15.0)+10.0);
        }

        float noise(vec3 P) {
          vec3 i0 = mod289(floor(P));
          vec3 i1 = mod289(i0 + vec3(1.0));
          vec3 f0 = fract(P);
          vec3 f1 = f0 - vec3(1.0);
          vec3 f = fade(f0);
          vec4 ix = vec4(i0.x, i1.x, i0.x, i1.x);
          vec4 iy = vec4(i0.yy, i1.yy);
          vec4 iz0 = i0.zzzz;
          vec4 iz1 = i1.zzzz;
          vec4 ixy = permute(permute(ix) + iy);
          vec4 ixy0 = permute(ixy + iz0);
          vec4 ixy1 = permute(ixy + iz1);
          vec4 gx0 = ixy0 * (1.0 / 7.0);
          vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
          gx0 = fract(gx0);
          vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
          vec4 sz0 = step(gz0, vec4(0.0));
          gx0 -= sz0 * (step(0.0, gx0) - 0.5);
          gy0 -= sz0 * (step(0.0, gy0) - 0.5);
          vec4 gx1 = ixy1 * (1.0 / 7.0);
          vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
          gx1 = fract(gx1);
          vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
          vec4 sz1 = step(gz1, vec4(0.0));
          gx1 -= sz1 * (step(0.0, gx1) - 0.5);
          gy1 -= sz1 * (step(0.0, gy1) - 0.5);
          vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
          vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
          vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
          vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
          vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
          vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
          vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
          vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
          vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
          g000 *= norm0.x;
          g010 *= norm0.y;
          g100 *= norm0.z;
          g110 *= norm0.w;
          vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
          g001 *= norm1.x;
          g011 *= norm1.y;
          g101 *= norm1.z;
          g111 *= norm1.w;
          float n000 = dot(g000, f0);
          float n100 = dot(g100, vec3(f1.x, f0.yz));
          float n010 = dot(g010, vec3(f0.x, f1.y, f0.z));
          float n110 = dot(g110, vec3(f1.xy, f0.z));
          float n001 = dot(g001, vec3(f0.xy, f1.z));
          float n101 = dot(g101, vec3(f1.x, f0.y, f1.z));
          float n011 = dot(g011, vec3(f0.x, f1.yz));
          float n111 = dot(g111, f1);
          vec3 fade_xyz = fade(f0);
          vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
          vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
          float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
          return 2.2 * n_xyz;
        }
        
        void main() {
          vUv = uv;
          vNormal = normalize(normalMatrix * normal);
          vPosition = position;
          
          vec3 pos = position;
          float noiseValue = noise(pos * 0.1 + time * 0.2);
          
          float displacement = sin(time * 2.0 + noiseValue * 5.0) * 0.2;
          pos += normal * displacement * progress;
          
          float bounce = sin(progress * 3.14159) * (1.0 - progress) * 0.3;
          pos *= mix(0.0, 1.0 + bounce, progress);
          
          gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
        }
      `,fragmentShader:`
        uniform float time;
        uniform float progress;
        uniform float noiseScale;
        varying vec2 vUv;
        varying vec3 vNormal;
        varying vec3 vPosition;
        
        void main() {
          vec3 baseColor = vec3(0.133, 0.694, 0.298);
          vec3 highlightColor = vec3(0.831, 0.976, 0.839);
          vec3 accentColor = vec3(0.047, 0.416, 0.137);
          
          float fresnel = pow(1.0 - dot(vNormal, vec3(0.0, 0.0, 1.0)), 3.0);
          
          float pattern1 = sin(vPosition.x * noiseScale + time * 2.0) * 
                          sin(vPosition.y * noiseScale + time * 1.5) * 
                          sin(vPosition.z * noiseScale + time);
          
          float pattern2 = cos(vPosition.x * noiseScale * 0.5 - time) * 
                          cos(vPosition.y * noiseScale * 0.5 - time * 1.2);
          
          float pulse1 = (sin(time * 2.0) * 0.5 + 0.5) * 0.2;
          float pulse2 = (sin(time * 3.0 + pattern1) * 0.5 + 0.5) * 0.15;
          
          vec3 color1 = mix(baseColor, highlightColor, fresnel + pulse1);
          vec3 color2 = mix(color1, accentColor, pattern1 * 0.5 + pattern2 * 0.3);
          vec3 finalColor = mix(color2, highlightColor, fresnel * pulse2);
          
          float rainbow = sin(vPosition.x * 2.0 + time) * 0.1;
          finalColor += vec3(rainbow, rainbow * 0.5, -rainbow) * (1.0 - fresnel);
          
          float opacity = progress * (1.0 + fresnel * 0.5);
          
          gl_FragColor = vec4(finalColor, opacity);
        }
      `,transparent:!0}),A=new ml(5,128,128),E=new Gr(A,b);v.current=E,T.add(E),w.position.z=15;const P=new tU(w,M.domElement);y.current=P,P.enableDamping=!0,P.dampingFactor=.05,P.rotateSpeed=.5,P.enableZoom=!1,P.enablePan=!1,P.autoRotate=!0,P.autoRotateSpeed=1,E.rotation.x=.4;let R=0,N=0;const O=()=>{_=requestAnimationFrame(O),R+=.01,N<1&&(N+=.02,b.uniforms.progress.value=Dj.smoothstep(N,0,1)),b.uniforms.time.value=R,b.uniforms.noiseScale.value=5+Math.sin(R)*2,E.rotation.y+=.003,P.update(),M.render(T,w)};O();const D=()=>{w.aspect=window.innerWidth/window.innerHeight,w.updateProjectionMatrix(),M.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",D),()=>{var W;cancelAnimationFrame(_),window.removeEventListener("resize",D),(W=d.current)==null||W.removeChild(M.domElement)}},[e,t]),s?e?S.jsxs("div",{className:`fixed inset-0 z-50 bg-gradient-to-b from-[#E7F0DC]/90 to-[#597445]/90 
        transition-opacity duration-1000 ${o?"opacity-0":"opacity-100"}`,children:[S.jsx("div",{ref:d,className:"absolute inset-0"}),S.jsxs("div",{className:`absolute inset-0 flex flex-col items-center justify-center
          transition-all duration-1000 ease-out
          ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}
          ${o?"opacity-0 scale-95":""}`,children:[S.jsx("h1",{className:"text-6xl font-bold text-[#2A3B1F] mb-6 tracking-wide animate-float",children:"EcoSphere"}),S.jsx("p",{className:"text-2xl text-[#2A3B1F]/90 mb-12 max-w-md text-center animate-float-delayed",children:"Explora el impacto ambiental global"}),S.jsx("div",{className:"flex gap-8",children:[jF,$u,UF,lw].map((_,T)=>S.jsx(_,{className:`w-8 h-8 text-[#2A3B1F] transition-all duration-300
                hover:scale-110 hover:text-[#2A3B1F]/80
                animate-bounce-in
                ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,style:{transitionDelay:`${T*100}ms`,animationDelay:`${T*150}ms`}},T))})]})]}):null:S.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-b from-[#E7F0DC]/90 to-[#597445]/90",children:S.jsxs("button",{onClick:x,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),className:`
            group relative overflow-hidden
            flex items-center gap-3 px-8 py-4 
            text-xl font-bold text-white
            bg-[#2A3B1F] rounded-xl
            transition-all duration-500 ease-out
            transform hover:scale-105
            ${f?"shadow-lg shadow-[#2A3B1F]/30":""}
          `,children:[S.jsx("div",{className:`
            absolute inset-0 bg-gradient-to-r from-[#3da063] via-[#2A3B1F] to-[#3da063] opacity-0
            group-hover:opacity-100 transition-opacity duration-500
            bg-[length:200%_100%] animate-shimmer
          `}),S.jsxs("div",{className:"relative flex items-center gap-3",children:[S.jsx(lw,{className:`
              w-6 h-6 transition-transform duration-500
              ${f?"scale-110 rotate-12":""}
            `}),S.jsx("span",{className:`
              transform transition-all duration-500
              ${f?"translate-x-1":""}
            `,children:"Iniciar Experiencia"})]}),S.jsx("div",{className:`
            absolute inset-0 pointer-events-none
            opacity-0 group-hover:opacity-100
            transition-opacity duration-500
          `,children:[...Array(3)].map((_,T)=>S.jsx("div",{className:`
                  absolute w-1 h-1 bg-white rounded-full
                  animate-particle opacity-75
                `,style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${T*.2}s`}},T))})]})})};var pL={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},VAe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],a=t[n++],s=t[n++],l=((i&7)<<18|(o&63)<<12|(a&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},I5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],a=i+1<t.length,s=a?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=o>>2,f=(o&3)<<4|s>>4;let h=(s&15)<<2|c>>6,d=c&63;l||(d=64,a||(h=64)),r.push(n[u],n[f],n[h],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(O5(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VAe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||s==null||c==null||f==null)throw new BAe;const h=o<<2|s>>4;if(r.push(h),c!==64){const d=s<<4&240|c>>2;if(r.push(d),f!==64){const v=c<<6&192|f;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class BAe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $Ae=function(t){const e=O5(t);return I5.encodeByteArray(e,!0)},Fy=function(t){return $Ae(t).replace(/\./g,"")},zAe=function(t){try{return I5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HAe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GAe=()=>HAe().__FIREBASE_DEFAULTS__,WAe=()=>{if(typeof process>"u"||typeof pL>"u")return;const t=pL.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qAe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zAe(t[1]);return e&&JSON.parse(e)},JA=()=>{try{return GAe()||WAe()||qAe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},XAe=t=>{var e,n;return(n=(e=JA())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},KAe=t=>{const e=XAe(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},N5=()=>{var t;return(t=JA())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YAe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QAe(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fy(JSON.stringify(n)),Fy(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZAe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JAe(){var t;const e=(t=JA())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eMe(){return!JAe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tMe(){try{return typeof indexedDB=="object"}catch{return!1}}function nMe(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rMe="FirebaseError";class qf extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rMe,Object.setPrototypeOf(this,qf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D5.prototype.create)}}class D5{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?iMe(o,r):"Error",s=`${this.serviceName}: ${a} (${i}).`;return new qf(i,s,r)}}function iMe(t,e){return t.replace(oMe,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const oMe=/\{\$([^}]+)}/g;function FS(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],a=e[i];if(mL(o)&&mL(a)){if(!FS(o,a))return!1}else if(o!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function mL(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(t){return t&&t._delegate?t._delegate:t}class Mp{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aMe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new YAe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lMe(e))try{this.getOrInitializeService({instanceIdentifier:ll})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ll){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ll){return this.instances.has(e)}getOptions(e=ll){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(o);r===s&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sMe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ll){return this.component?this.component.multipleInstances?e:ll:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sMe(t){return t===ll?void 0:t}function lMe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cMe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aMe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ct||(Ct={}));const uMe={debug:Ct.DEBUG,verbose:Ct.VERBOSE,info:Ct.INFO,warn:Ct.WARN,error:Ct.ERROR,silent:Ct.SILENT},fMe=Ct.INFO,hMe={[Ct.DEBUG]:"log",[Ct.VERBOSE]:"log",[Ct.INFO]:"info",[Ct.WARN]:"warn",[Ct.ERROR]:"error"},dMe=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=hMe[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class L5{constructor(e){this.name=e,this._logLevel=fMe,this._logHandler=dMe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uMe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ct.DEBUG,...e),this._logHandler(this,Ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ct.VERBOSE,...e),this._logHandler(this,Ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ct.INFO,...e),this._logHandler(this,Ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ct.WARN,...e),this._logHandler(this,Ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ct.ERROR,...e),this._logHandler(this,Ct.ERROR,...e)}}const pMe=(t,e)=>e.some(n=>t instanceof n);let gL,vL;function mMe(){return gL||(gL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gMe(){return vL||(vL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const k5=new WeakMap,VS=new WeakMap,j5=new WeakMap,Ib=new WeakMap,eM=new WeakMap;function vMe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(gs(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&k5.set(n,t)}).catch(()=>{}),eM.set(e,t),e}function yMe(t){if(VS.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});VS.set(t,e)}let BS={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return VS.get(t);if(e==="objectStoreNames")return t.objectStoreNames||j5.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _Me(t){BS=t(BS)}function xMe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Nb(this),e,...n);return j5.set(r,e.sort?e.sort():[e]),gs(r)}:gMe().includes(t)?function(...e){return t.apply(Nb(this),e),gs(k5.get(this))}:function(...e){return gs(t.apply(Nb(this),e))}}function bMe(t){return typeof t=="function"?xMe(t):(t instanceof IDBTransaction&&yMe(t),pMe(t,mMe())?new Proxy(t,BS):t)}function gs(t){if(t instanceof IDBRequest)return vMe(t);if(Ib.has(t))return Ib.get(t);const e=bMe(t);return e!==t&&(Ib.set(t,e),eM.set(e,t)),e}const Nb=t=>eM.get(t);function wMe(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),s=gs(a);return r&&a.addEventListener("upgradeneeded",l=>{r(gs(a.result),l.oldVersion,l.newVersion,gs(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),s.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),s}const SMe=["get","getKey","getAll","getAllKeys","count"],EMe=["put","add","delete","clear"],Db=new Map;function yL(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Db.get(e))return Db.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=EMe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||SMe.includes(n)))return;const o=async function(a,...s){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(s.shift())),(await Promise.all([c[n](...s),i&&l.done]))[0]};return Db.set(e,o),o}_Me(t=>({...t,get:(e,n,r)=>yL(e,n)||t.get(e,n,r),has:(e,n)=>!!yL(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TMe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AMe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function AMe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $S="@firebase/app",_L="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new L5("@firebase/app"),MMe="@firebase/app-compat",PMe="@firebase/analytics-compat",CMe="@firebase/analytics",RMe="@firebase/app-check-compat",OMe="@firebase/app-check",IMe="@firebase/auth",NMe="@firebase/auth-compat",DMe="@firebase/database",LMe="@firebase/data-connect",kMe="@firebase/database-compat",jMe="@firebase/functions",UMe="@firebase/functions-compat",FMe="@firebase/installations",VMe="@firebase/installations-compat",BMe="@firebase/messaging",$Me="@firebase/messaging-compat",zMe="@firebase/performance",HMe="@firebase/performance-compat",GMe="@firebase/remote-config",WMe="@firebase/remote-config-compat",qMe="@firebase/storage",XMe="@firebase/storage-compat",KMe="@firebase/firestore",YMe="@firebase/vertexai",QMe="@firebase/firestore-compat",ZMe="firebase",JMe="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="[DEFAULT]",ePe={[$S]:"fire-core",[MMe]:"fire-core-compat",[CMe]:"fire-analytics",[PMe]:"fire-analytics-compat",[OMe]:"fire-app-check",[RMe]:"fire-app-check-compat",[IMe]:"fire-auth",[NMe]:"fire-auth-compat",[DMe]:"fire-rtdb",[LMe]:"fire-data-connect",[kMe]:"fire-rtdb-compat",[jMe]:"fire-fn",[UMe]:"fire-fn-compat",[FMe]:"fire-iid",[VMe]:"fire-iid-compat",[BMe]:"fire-fcm",[$Me]:"fire-fcm-compat",[zMe]:"fire-perf",[HMe]:"fire-perf-compat",[GMe]:"fire-rc",[WMe]:"fire-rc-compat",[qMe]:"fire-gcs",[XMe]:"fire-gcs-compat",[KMe]:"fire-fst",[QMe]:"fire-fst-compat",[YMe]:"fire-vertex","fire-js":"fire-js",[ZMe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=new Map,tPe=new Map,HS=new Map;function xL(t,e){try{t.container.addComponent(e)}catch(n){Ea.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function By(t){const e=t.name;if(HS.has(e))return Ea.debug(`There were multiple attempts to register component ${e}.`),!1;HS.set(e,t);for(const n of Vy.values())xL(n,t);for(const n of tPe.values())xL(n,t);return!0}function nPe(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rPe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vs=new D5("app","Firebase",rPe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iPe{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oPe=JMe;function U5(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:zS,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw vs.create("bad-app-name",{appName:String(i)});if(n||(n=N5()),!n)throw vs.create("no-options");const o=Vy.get(i);if(o){if(FS(n,o.options)&&FS(r,o.config))return o;throw vs.create("duplicate-app",{appName:i})}const a=new cMe(i);for(const l of HS.values())a.addComponent(l);const s=new iPe(n,r,a);return Vy.set(i,s),s}function aPe(t=zS){const e=Vy.get(t);if(!e&&t===zS&&N5())return U5();if(!e)throw vs.create("no-app",{appName:t});return e}function Au(t,e,n){var r;let i=(r=ePe[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const s=[`Unable to register library "${i}" with version "${e}":`];o&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ea.warn(s.join(" "));return}By(new Mp(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sPe="firebase-heartbeat-database",lPe=1,Pp="firebase-heartbeat-store";let Lb=null;function F5(){return Lb||(Lb=wMe(sPe,lPe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pp)}catch(n){console.warn(n)}}}}).catch(t=>{throw vs.create("idb-open",{originalErrorMessage:t.message})})),Lb}async function cPe(t){try{const n=(await F5()).transaction(Pp),r=await n.objectStore(Pp).get(V5(t));return await n.done,r}catch(e){if(e instanceof qf)Ea.warn(e.message);else{const n=vs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ea.warn(n.message)}}}async function bL(t,e){try{const r=(await F5()).transaction(Pp,"readwrite");await r.objectStore(Pp).put(e,V5(t)),await r.done}catch(n){if(n instanceof qf)Ea.warn(n.message);else{const r=vs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ea.warn(r.message)}}}function V5(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uPe=1024,fPe=30*24*60*60*1e3;class hPe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pPe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=wL();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const s=new Date(a.date).valueOf();return Date.now()-s<=fPe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ea.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wL(),{heartbeatsToSend:r,unsentEntries:i}=dPe(this._heartbeatsCache.heartbeats),o=Fy(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ea.warn(n),""}}}function wL(){return new Date().toISOString().substring(0,10)}function dPe(t,e=uPe){const n=[];let r=t.slice();for(const i of t){const o=n.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),SL(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),SL(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class pPe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tMe()?nMe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cPe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return bL(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return bL(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function SL(t){return Fy(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mPe(t){By(new Mp("platform-logger",e=>new TMe(e),"PRIVATE")),By(new Mp("heartbeat",e=>new hPe(e),"PRIVATE")),Au($S,_L,t),Au($S,_L,"esm2017"),Au("fire-js","")}mPe("");var gPe="firebase",vPe="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Au(gPe,vPe,"app");var EL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nl,B5;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,A){function E(){}E.prototype=A.prototype,b.D=A.prototype,b.prototype=new E,b.prototype.constructor=b,b.C=function(P,R,N){for(var O=Array(arguments.length-2),D=2;D<arguments.length;D++)O[D-2]=arguments[D];return A.prototype[R].apply(P,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,A,E){E||(E=0);var P=Array(16);if(typeof A=="string")for(var R=0;16>R;++R)P[R]=A.charCodeAt(E++)|A.charCodeAt(E++)<<8|A.charCodeAt(E++)<<16|A.charCodeAt(E++)<<24;else for(R=0;16>R;++R)P[R]=A[E++]|A[E++]<<8|A[E++]<<16|A[E++]<<24;A=b.g[0],E=b.g[1],R=b.g[2];var N=b.g[3],O=A+(N^E&(R^N))+P[0]+3614090360&4294967295;A=E+(O<<7&4294967295|O>>>25),O=N+(R^A&(E^R))+P[1]+3905402710&4294967295,N=A+(O<<12&4294967295|O>>>20),O=R+(E^N&(A^E))+P[2]+606105819&4294967295,R=N+(O<<17&4294967295|O>>>15),O=E+(A^R&(N^A))+P[3]+3250441966&4294967295,E=R+(O<<22&4294967295|O>>>10),O=A+(N^E&(R^N))+P[4]+4118548399&4294967295,A=E+(O<<7&4294967295|O>>>25),O=N+(R^A&(E^R))+P[5]+1200080426&4294967295,N=A+(O<<12&4294967295|O>>>20),O=R+(E^N&(A^E))+P[6]+2821735955&4294967295,R=N+(O<<17&4294967295|O>>>15),O=E+(A^R&(N^A))+P[7]+4249261313&4294967295,E=R+(O<<22&4294967295|O>>>10),O=A+(N^E&(R^N))+P[8]+1770035416&4294967295,A=E+(O<<7&4294967295|O>>>25),O=N+(R^A&(E^R))+P[9]+2336552879&4294967295,N=A+(O<<12&4294967295|O>>>20),O=R+(E^N&(A^E))+P[10]+4294925233&4294967295,R=N+(O<<17&4294967295|O>>>15),O=E+(A^R&(N^A))+P[11]+2304563134&4294967295,E=R+(O<<22&4294967295|O>>>10),O=A+(N^E&(R^N))+P[12]+1804603682&4294967295,A=E+(O<<7&4294967295|O>>>25),O=N+(R^A&(E^R))+P[13]+4254626195&4294967295,N=A+(O<<12&4294967295|O>>>20),O=R+(E^N&(A^E))+P[14]+2792965006&4294967295,R=N+(O<<17&4294967295|O>>>15),O=E+(A^R&(N^A))+P[15]+1236535329&4294967295,E=R+(O<<22&4294967295|O>>>10),O=A+(R^N&(E^R))+P[1]+4129170786&4294967295,A=E+(O<<5&4294967295|O>>>27),O=N+(E^R&(A^E))+P[6]+3225465664&4294967295,N=A+(O<<9&4294967295|O>>>23),O=R+(A^E&(N^A))+P[11]+643717713&4294967295,R=N+(O<<14&4294967295|O>>>18),O=E+(N^A&(R^N))+P[0]+3921069994&4294967295,E=R+(O<<20&4294967295|O>>>12),O=A+(R^N&(E^R))+P[5]+3593408605&4294967295,A=E+(O<<5&4294967295|O>>>27),O=N+(E^R&(A^E))+P[10]+38016083&4294967295,N=A+(O<<9&4294967295|O>>>23),O=R+(A^E&(N^A))+P[15]+3634488961&4294967295,R=N+(O<<14&4294967295|O>>>18),O=E+(N^A&(R^N))+P[4]+3889429448&4294967295,E=R+(O<<20&4294967295|O>>>12),O=A+(R^N&(E^R))+P[9]+568446438&4294967295,A=E+(O<<5&4294967295|O>>>27),O=N+(E^R&(A^E))+P[14]+3275163606&4294967295,N=A+(O<<9&4294967295|O>>>23),O=R+(A^E&(N^A))+P[3]+4107603335&4294967295,R=N+(O<<14&4294967295|O>>>18),O=E+(N^A&(R^N))+P[8]+1163531501&4294967295,E=R+(O<<20&4294967295|O>>>12),O=A+(R^N&(E^R))+P[13]+2850285829&4294967295,A=E+(O<<5&4294967295|O>>>27),O=N+(E^R&(A^E))+P[2]+4243563512&4294967295,N=A+(O<<9&4294967295|O>>>23),O=R+(A^E&(N^A))+P[7]+1735328473&4294967295,R=N+(O<<14&4294967295|O>>>18),O=E+(N^A&(R^N))+P[12]+2368359562&4294967295,E=R+(O<<20&4294967295|O>>>12),O=A+(E^R^N)+P[5]+4294588738&4294967295,A=E+(O<<4&4294967295|O>>>28),O=N+(A^E^R)+P[8]+2272392833&4294967295,N=A+(O<<11&4294967295|O>>>21),O=R+(N^A^E)+P[11]+1839030562&4294967295,R=N+(O<<16&4294967295|O>>>16),O=E+(R^N^A)+P[14]+4259657740&4294967295,E=R+(O<<23&4294967295|O>>>9),O=A+(E^R^N)+P[1]+2763975236&4294967295,A=E+(O<<4&4294967295|O>>>28),O=N+(A^E^R)+P[4]+1272893353&4294967295,N=A+(O<<11&4294967295|O>>>21),O=R+(N^A^E)+P[7]+4139469664&4294967295,R=N+(O<<16&4294967295|O>>>16),O=E+(R^N^A)+P[10]+3200236656&4294967295,E=R+(O<<23&4294967295|O>>>9),O=A+(E^R^N)+P[13]+681279174&4294967295,A=E+(O<<4&4294967295|O>>>28),O=N+(A^E^R)+P[0]+3936430074&4294967295,N=A+(O<<11&4294967295|O>>>21),O=R+(N^A^E)+P[3]+3572445317&4294967295,R=N+(O<<16&4294967295|O>>>16),O=E+(R^N^A)+P[6]+76029189&4294967295,E=R+(O<<23&4294967295|O>>>9),O=A+(E^R^N)+P[9]+3654602809&4294967295,A=E+(O<<4&4294967295|O>>>28),O=N+(A^E^R)+P[12]+3873151461&4294967295,N=A+(O<<11&4294967295|O>>>21),O=R+(N^A^E)+P[15]+530742520&4294967295,R=N+(O<<16&4294967295|O>>>16),O=E+(R^N^A)+P[2]+3299628645&4294967295,E=R+(O<<23&4294967295|O>>>9),O=A+(R^(E|~N))+P[0]+4096336452&4294967295,A=E+(O<<6&4294967295|O>>>26),O=N+(E^(A|~R))+P[7]+1126891415&4294967295,N=A+(O<<10&4294967295|O>>>22),O=R+(A^(N|~E))+P[14]+2878612391&4294967295,R=N+(O<<15&4294967295|O>>>17),O=E+(N^(R|~A))+P[5]+4237533241&4294967295,E=R+(O<<21&4294967295|O>>>11),O=A+(R^(E|~N))+P[12]+1700485571&4294967295,A=E+(O<<6&4294967295|O>>>26),O=N+(E^(A|~R))+P[3]+2399980690&4294967295,N=A+(O<<10&4294967295|O>>>22),O=R+(A^(N|~E))+P[10]+4293915773&4294967295,R=N+(O<<15&4294967295|O>>>17),O=E+(N^(R|~A))+P[1]+2240044497&4294967295,E=R+(O<<21&4294967295|O>>>11),O=A+(R^(E|~N))+P[8]+1873313359&4294967295,A=E+(O<<6&4294967295|O>>>26),O=N+(E^(A|~R))+P[15]+4264355552&4294967295,N=A+(O<<10&4294967295|O>>>22),O=R+(A^(N|~E))+P[6]+2734768916&4294967295,R=N+(O<<15&4294967295|O>>>17),O=E+(N^(R|~A))+P[13]+1309151649&4294967295,E=R+(O<<21&4294967295|O>>>11),O=A+(R^(E|~N))+P[4]+4149444226&4294967295,A=E+(O<<6&4294967295|O>>>26),O=N+(E^(A|~R))+P[11]+3174756917&4294967295,N=A+(O<<10&4294967295|O>>>22),O=R+(A^(N|~E))+P[2]+718787259&4294967295,R=N+(O<<15&4294967295|O>>>17),O=E+(N^(R|~A))+P[9]+3951481745&4294967295,b.g[0]=b.g[0]+A&4294967295,b.g[1]=b.g[1]+(R+(O<<21&4294967295|O>>>11))&4294967295,b.g[2]=b.g[2]+R&4294967295,b.g[3]=b.g[3]+N&4294967295}r.prototype.u=function(b,A){A===void 0&&(A=b.length);for(var E=A-this.blockSize,P=this.B,R=this.h,N=0;N<A;){if(R==0)for(;N<=E;)i(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<A;)if(P[R++]=b.charCodeAt(N++),R==this.blockSize){i(this,P),R=0;break}}else for(;N<A;)if(P[R++]=b[N++],R==this.blockSize){i(this,P),R=0;break}}this.h=R,this.o+=A},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var A=1;A<b.length-8;++A)b[A]=0;var E=8*this.o;for(A=b.length-8;A<b.length;++A)b[A]=E&255,E/=256;for(this.u(b),b=Array(16),A=E=0;4>A;++A)for(var P=0;32>P;P+=8)b[E++]=this.g[A]>>>P&255;return b};function o(b,A){var E=s;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=A(b)}function a(b,A){this.h=A;for(var E=[],P=!0,R=b.length-1;0<=R;R--){var N=b[R]|0;P&&N==A||(E[R]=N,P=!1)}this.g=E}var s={};function l(b){return-128<=b&&128>b?o(b,function(A){return new a([A|0],0>A?-1:0)}):new a([b|0],0>b?-1:0)}function c(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return g(c(-b));for(var A=[],E=1,P=0;b>=E;P++)A[P]=b/E|0,E*=4294967296;return new a(A,0)}function u(b,A){if(b.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(b.charAt(0)=="-")return g(u(b.substring(1),A));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(A,8)),P=f,R=0;R<b.length;R+=8){var N=Math.min(8,b.length-R),O=parseInt(b.substring(R,R+N),A);8>N?(N=c(Math.pow(A,N)),P=P.j(N).add(c(O))):(P=P.j(E),P=P.add(c(O)))}return P}var f=l(0),h=l(1),d=l(16777216);t=a.prototype,t.m=function(){if(y(this))return-g(this).m();for(var b=0,A=1,E=0;E<this.g.length;E++){var P=this.i(E);b+=(0<=P?P:4294967296+P)*A,A*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(v(this))return"0";if(y(this))return"-"+g(this).toString(b);for(var A=c(Math.pow(b,6)),E=this,P="";;){var R=T(E,A).g;E=p(E,R.j(A));var N=((0<E.g.length?E.g[0]:E.h)>>>0).toString(b);if(E=R,v(E))return N+P;for(;6>N.length;)N="0"+N;P=N+P}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function v(b){if(b.h!=0)return!1;for(var A=0;A<b.g.length;A++)if(b.g[A]!=0)return!1;return!0}function y(b){return b.h==-1}t.l=function(b){return b=p(this,b),y(b)?-1:v(b)?0:1};function g(b){for(var A=b.g.length,E=[],P=0;P<A;P++)E[P]=~b.g[P];return new a(E,~b.h).add(h)}t.abs=function(){return y(this)?g(this):this},t.add=function(b){for(var A=Math.max(this.g.length,b.g.length),E=[],P=0,R=0;R<=A;R++){var N=P+(this.i(R)&65535)+(b.i(R)&65535),O=(N>>>16)+(this.i(R)>>>16)+(b.i(R)>>>16);P=O>>>16,N&=65535,O&=65535,E[R]=O<<16|N}return new a(E,E[E.length-1]&-2147483648?-1:0)};function p(b,A){return b.add(g(A))}t.j=function(b){if(v(this)||v(b))return f;if(y(this))return y(b)?g(this).j(g(b)):g(g(this).j(b));if(y(b))return g(this.j(g(b)));if(0>this.l(d)&&0>b.l(d))return c(this.m()*b.m());for(var A=this.g.length+b.g.length,E=[],P=0;P<2*A;P++)E[P]=0;for(P=0;P<this.g.length;P++)for(var R=0;R<b.g.length;R++){var N=this.i(P)>>>16,O=this.i(P)&65535,D=b.i(R)>>>16,L=b.i(R)&65535;E[2*P+2*R]+=O*L,x(E,2*P+2*R),E[2*P+2*R+1]+=N*L,x(E,2*P+2*R+1),E[2*P+2*R+1]+=O*D,x(E,2*P+2*R+1),E[2*P+2*R+2]+=N*D,x(E,2*P+2*R+2)}for(P=0;P<A;P++)E[P]=E[2*P+1]<<16|E[2*P];for(P=A;P<2*A;P++)E[P]=0;return new a(E,0)};function x(b,A){for(;(b[A]&65535)!=b[A];)b[A+1]+=b[A]>>>16,b[A]&=65535,A++}function _(b,A){this.g=b,this.h=A}function T(b,A){if(v(A))throw Error("division by zero");if(v(b))return new _(f,f);if(y(b))return A=T(g(b),A),new _(g(A.g),g(A.h));if(y(A))return A=T(b,g(A)),new _(g(A.g),A.h);if(30<b.g.length){if(y(b)||y(A))throw Error("slowDivide_ only works with positive integers.");for(var E=h,P=A;0>=P.l(b);)E=w(E),P=w(P);var R=M(E,1),N=M(P,1);for(P=M(P,2),E=M(E,2);!v(P);){var O=N.add(P);0>=O.l(b)&&(R=R.add(E),N=O),P=M(P,1),E=M(E,1)}return A=p(b,R.j(A)),new _(R,A)}for(R=f;0<=b.l(A);){for(E=Math.max(1,Math.floor(b.m()/A.m())),P=Math.ceil(Math.log(E)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),N=c(E),O=N.j(A);y(O)||0<O.l(b);)E-=P,N=c(E),O=N.j(A);v(N)&&(N=h),R=R.add(N),b=p(b,O)}return new _(R,b)}t.A=function(b){return T(this,b).h},t.and=function(b){for(var A=Math.max(this.g.length,b.g.length),E=[],P=0;P<A;P++)E[P]=this.i(P)&b.i(P);return new a(E,this.h&b.h)},t.or=function(b){for(var A=Math.max(this.g.length,b.g.length),E=[],P=0;P<A;P++)E[P]=this.i(P)|b.i(P);return new a(E,this.h|b.h)},t.xor=function(b){for(var A=Math.max(this.g.length,b.g.length),E=[],P=0;P<A;P++)E[P]=this.i(P)^b.i(P);return new a(E,this.h^b.h)};function w(b){for(var A=b.g.length+1,E=[],P=0;P<A;P++)E[P]=b.i(P)<<1|b.i(P-1)>>>31;return new a(E,b.h)}function M(b,A){var E=A>>5;A%=32;for(var P=b.g.length-E,R=[],N=0;N<P;N++)R[N]=0<A?b.i(N+E)>>>A|b.i(N+E+1)<<32-A:b.i(N+E);return new a(R,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,B5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,Nl=a}).apply(typeof EL<"u"?EL:typeof self<"u"?self:typeof window<"u"?window:{});var Eg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $5,zh,z5,qg,GS,H5,G5,W5;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,C,I){return m==Array.prototype||m==Object.prototype||(m[C]=I.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Eg=="object"&&Eg];for(var C=0;C<m.length;++C){var I=m[C];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function i(m,C){if(C)e:{var I=r;m=m.split(".");for(var j=0;j<m.length-1;j++){var Z=m[j];if(!(Z in I))break e;I=I[Z]}m=m[m.length-1],j=I[m],C=C(j),C!=j&&C!=null&&e(I,m,{configurable:!0,writable:!0,value:C})}}function o(m,C){m instanceof String&&(m+="");var I=0,j=!1,Z={next:function(){if(!j&&I<m.length){var se=I++;return{value:C(se,m[se]),done:!1}}return j=!0,{done:!0,value:void 0}}};return Z[Symbol.iterator]=function(){return Z},Z}i("Array.prototype.values",function(m){return m||function(){return o(this,function(C,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},s=this||self;function l(m){var C=typeof m;return C=C!="object"?C:m?Array.isArray(m)?"array":C:"null",C=="array"||C=="object"&&typeof m.length=="number"}function c(m){var C=typeof m;return C=="object"&&m!=null||C=="function"}function u(m,C,I){return m.call.apply(m.bind,arguments)}function f(m,C,I){if(!m)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var Z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Z,j),m.apply(C,Z)}}return function(){return m.apply(C,arguments)}}function h(m,C,I){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,h.apply(null,arguments)}function d(m,C){var I=Array.prototype.slice.call(arguments,1);return function(){var j=I.slice();return j.push.apply(j,arguments),m.apply(this,j)}}function v(m,C){function I(){}I.prototype=C.prototype,m.aa=C.prototype,m.prototype=new I,m.prototype.constructor=m,m.Qb=function(j,Z,se){for(var Me=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)Me[Wt-2]=arguments[Wt];return C.prototype[Z].apply(j,Me)}}function y(m){const C=m.length;if(0<C){const I=Array(C);for(let j=0;j<C;j++)I[j]=m[j];return I}return[]}function g(m,C){for(let I=1;I<arguments.length;I++){const j=arguments[I];if(l(j)){const Z=m.length||0,se=j.length||0;m.length=Z+se;for(let Me=0;Me<se;Me++)m[Z+Me]=j[Me]}else m.push(j)}}class p{constructor(C,I){this.i=C,this.j=I,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function x(m){return/^[\s\xa0]*$/.test(m)}function _(){var m=s.navigator;return m&&(m=m.userAgent)?m:""}function T(m){return T[" "](m),m}T[" "]=function(){};var w=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function M(m,C,I){for(const j in m)C.call(I,m[j],j,m)}function b(m,C){for(const I in m)C.call(void 0,m[I],I,m)}function A(m){const C={};for(const I in m)C[I]=m[I];return C}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(m,C){let I,j;for(let Z=1;Z<arguments.length;Z++){j=arguments[Z];for(I in j)m[I]=j[I];for(let se=0;se<E.length;se++)I=E[se],Object.prototype.hasOwnProperty.call(j,I)&&(m[I]=j[I])}}function R(m){var C=1;m=m.split(":");const I=[];for(;0<C&&m.length;)I.push(m.shift()),C--;return m.length&&I.push(m.join(":")),I}function N(m){s.setTimeout(()=>{throw m},0)}function O(){var m=X;let C=null;return m.g&&(C=m.g,m.g=m.g.next,m.g||(m.h=null),C.next=null),C}class D{constructor(){this.h=this.g=null}add(C,I){const j=L.get();j.set(C,I),this.h?this.h.next=j:this.g=j,this.h=j}}var L=new p(()=>new W,m=>m.reset());class W{constructor(){this.next=this.g=this.h=null}set(C,I){this.h=C,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let $,B=!1,X=new D,K=()=>{const m=s.Promise.resolve(void 0);$=()=>{m.then(z)}};var z=()=>{for(var m;m=O();){try{m.h.call(m.g)}catch(I){N(I)}var C=L;C.j(m),100>C.h&&(C.h++,m.next=C.g,C.g=m)}B=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(m,C){this.type=m,this.g=this.target=C,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var m=!1,C=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const I=()=>{};s.addEventListener("test",I,C),s.removeEventListener("test",I,C)}catch{}return m}();function _e(m,C){if(ee.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var I=this.type=m.type,j=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=C,C=m.relatedTarget){if(w){e:{try{T(C.nodeName);var Z=!0;break e}catch{}Z=!1}Z||(C=null)}}else I=="mouseover"?C=m.fromElement:I=="mouseout"&&(C=m.toElement);this.relatedTarget=C,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Ne[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&_e.aa.h.call(this)}}v(_e,ee);var Ne={2:"touch",3:"pen",4:"mouse"};_e.prototype.h=function(){_e.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var We="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function fe(m,C,I,j,Z){this.listener=m,this.proxy=null,this.src=C,this.type=I,this.capture=!!j,this.ha=Z,this.key=++Ue,this.da=this.fa=!1}function Re(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ee(m){this.src=m,this.g={},this.h=0}Ee.prototype.add=function(m,C,I,j,Z){var se=m.toString();m=this.g[se],m||(m=this.g[se]=[],this.h++);var Me=lt(m,C,j,Z);return-1<Me?(C=m[Me],I||(C.fa=!1)):(C=new fe(C,this.src,se,!!j,Z),C.fa=I,m.push(C)),C};function H(m,C){var I=C.type;if(I in m.g){var j=m.g[I],Z=Array.prototype.indexOf.call(j,C,void 0),se;(se=0<=Z)&&Array.prototype.splice.call(j,Z,1),se&&(Re(C),m.g[I].length==0&&(delete m.g[I],m.h--))}}function lt(m,C,I,j){for(var Z=0;Z<m.length;++Z){var se=m[Z];if(!se.da&&se.listener==C&&se.capture==!!I&&se.ha==j)return Z}return-1}var be="closure_lm_"+(1e6*Math.random()|0),Le={};function ke(m,C,I,j,Z){if(Array.isArray(C)){for(var se=0;se<C.length;se++)ke(m,C[se],I,j,Z);return null}return I=re(I),m&&m[We]?m.K(C,I,c(j)?!!j.capture:!!j,Z):mt(m,C,I,!1,j,Z)}function mt(m,C,I,j,Z,se){if(!C)throw Error("Invalid event type");var Me=c(Z)?!!Z.capture:!!Z,Wt=F(m);if(Wt||(m[be]=Wt=new Ee(m)),I=Wt.add(C,I,j,Me,se),I.proxy)return I;if(j=Ye(),I.proxy=j,j.src=m,j.listener=I,m.addEventListener)me||(Z=Me),Z===void 0&&(Z=!1),m.addEventListener(C.toString(),j,Z);else if(m.attachEvent)m.attachEvent(Mt(C.toString()),j);else if(m.addListener&&m.removeListener)m.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Ye(){function m(I){return C.call(m.src,m.listener,I)}const C=jt;return m}function Ze(m,C,I,j,Z){if(Array.isArray(C))for(var se=0;se<C.length;se++)Ze(m,C[se],I,j,Z);else j=c(j)?!!j.capture:!!j,I=re(I),m&&m[We]?(m=m.i,C=String(C).toString(),C in m.g&&(se=m.g[C],I=lt(se,I,j,Z),-1<I&&(Re(se[I]),Array.prototype.splice.call(se,I,1),se.length==0&&(delete m.g[C],m.h--)))):m&&(m=F(m))&&(C=m.g[C.toString()],m=-1,C&&(m=lt(C,I,j,Z)),(I=-1<m?C[m]:null)&&ht(I))}function ht(m){if(typeof m!="number"&&m&&!m.da){var C=m.src;if(C&&C[We])H(C.i,m);else{var I=m.type,j=m.proxy;C.removeEventListener?C.removeEventListener(I,j,m.capture):C.detachEvent?C.detachEvent(Mt(I),j):C.addListener&&C.removeListener&&C.removeListener(j),(I=F(C))?(H(I,m),I.h==0&&(I.src=null,C[be]=null)):Re(m)}}}function Mt(m){return m in Le?Le[m]:Le[m]="on"+m}function jt(m,C){if(m.da)m=!0;else{C=new _e(C,this);var I=m.listener,j=m.ha||m.src;m.fa&&ht(m),m=I.call(j,C)}return m}function F(m){return m=m[be],m instanceof Ee?m:null}var k="__closure_events_fn_"+(1e9*Math.random()>>>0);function re(m){return typeof m=="function"?m:(m[k]||(m[k]=function(C){return m.handleEvent(C)}),m[k])}function ye(){q.call(this),this.i=new Ee(this),this.M=this,this.F=null}v(ye,q),ye.prototype[We]=!0,ye.prototype.removeEventListener=function(m,C,I,j){Ze(this,m,C,I,j)};function he(m,C){var I,j=m.F;if(j)for(I=[];j;j=j.F)I.push(j);if(m=m.M,j=C.type||C,typeof C=="string")C=new ee(C,m);else if(C instanceof ee)C.target=C.target||m;else{var Z=C;C=new ee(j,m),P(C,Z)}if(Z=!0,I)for(var se=I.length-1;0<=se;se--){var Me=C.g=I[se];Z=xe(Me,j,!0,C)&&Z}if(Me=C.g=m,Z=xe(Me,j,!0,C)&&Z,Z=xe(Me,j,!1,C)&&Z,I)for(se=0;se<I.length;se++)Me=C.g=I[se],Z=xe(Me,j,!1,C)&&Z}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var m=this.i,C;for(C in m.g){for(var I=m.g[C],j=0;j<I.length;j++)Re(I[j]);delete m.g[C],m.h--}}this.F=null},ye.prototype.K=function(m,C,I,j){return this.i.add(String(m),C,!1,I,j)},ye.prototype.L=function(m,C,I,j){return this.i.add(String(m),C,!0,I,j)};function xe(m,C,I,j){if(C=m.i.g[String(C)],!C)return!0;C=C.concat();for(var Z=!0,se=0;se<C.length;++se){var Me=C[se];if(Me&&!Me.da&&Me.capture==I){var Wt=Me.listener,nr=Me.ha||Me.src;Me.fa&&H(m.i,Me),Z=Wt.call(nr,j)!==!1&&Z}}return Z&&!j.defaultPrevented}function Ce(m,C,I){if(typeof m=="function")I&&(m=h(m,I));else if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:s.setTimeout(m,C||0)}function Te(m){m.g=Ce(()=>{m.g=null,m.i&&(m.i=!1,Te(m))},m.l);const C=m.h;m.h=null,m.m.apply(null,C)}class Pe extends q{constructor(C,I){super(),this.m=C,this.l=I,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:Te(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Y(m){q.call(this),this.h=m,this.g={}}v(Y,q);var Se=[];function de(m){M(m.g,function(C,I){this.g.hasOwnProperty(I)&&ht(C)},m),m.g={}}Y.prototype.N=function(){Y.aa.N.call(this),de(this)},Y.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qe=s.JSON.stringify,Ge=s.JSON.parse,qe=class{stringify(m){return s.JSON.stringify(m,void 0)}parse(m){return s.JSON.parse(m,void 0)}};function Ve(){}Ve.prototype.h=null;function De(m){return m.h||(m.h=m.i())}function vt(){}var Q={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function le(){ee.call(this,"d")}v(le,ee);function ue(){ee.call(this,"c")}v(ue,ee);var ne={},ge=null;function Ie(){return ge=ge||new ye}ne.La="serverreachability";function rt(m){ee.call(this,ne.La,m)}v(rt,ee);function Ot(m){const C=Ie();he(C,new rt(C))}ne.STAT_EVENT="statevent";function En(m,C){ee.call(this,ne.STAT_EVENT,m),this.stat=C}v(En,ee);function dt(m){const C=Ie();he(C,new En(C,m))}ne.Ma="timingevent";function Tn(m,C){ee.call(this,ne.Ma,m),this.size=C}v(Tn,ee);function Dn(m,C){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){m()},C)}function vi(){this.g=!0}vi.prototype.xa=function(){this.g=!1};function I_(m,C,I,j,Z,se){m.info(function(){if(m.g)if(se)for(var Me="",Wt=se.split("&"),nr=0;nr<Wt.length;nr++){var Dt=Wt[nr].split("=");if(1<Dt.length){var hr=Dt[0];Dt=Dt[1];var dr=hr.split("_");Me=2<=dr.length&&dr[1]=="type"?Me+(hr+"="+Dt+"&"):Me+(hr+"=redacted&")}}else Me=null;else Me=se;return"XMLHTTP REQ ("+j+") [attempt "+Z+"]: "+C+`
`+I+`
`+Me})}function sc(m,C,I,j,Z,se,Me){m.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+Z+"]: "+C+`
`+I+`
`+se+" "+Me})}function Vo(m,C,I,j){m.info(function(){return"XMLHTTP TEXT ("+C+"): "+am(m,I)+(j?" "+j:"")})}function lc(m,C){m.info(function(){return"TIMEOUT: "+C})}vi.prototype.info=function(){};function am(m,C){if(!m.g)return C;if(!C)return null;try{var I=JSON.parse(C);if(I){for(m=0;m<I.length;m++)if(Array.isArray(I[m])){var j=I[m];if(!(2>j.length)){var Z=j[1];if(Array.isArray(Z)&&!(1>Z.length)){var se=Z[0];if(se!="noop"&&se!="stop"&&se!="close")for(var Me=1;Me<Z.length;Me++)Z[Me]=""}}}}return Qe(I)}catch{return C}}var Bs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jf;function cc(){}v(cc,Ve),cc.prototype.g=function(){return new XMLHttpRequest},cc.prototype.i=function(){return{}},Jf=new cc;function U(m,C,I,j){this.j=m,this.i=C,this.l=I,this.R=j||1,this.U=new Y(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new J}function J(){this.i=null,this.g="",this.h=!1}var ie={},oe={};function ae(m,C,I){m.L=1,m.v=lm(Jr(C)),m.m=I,m.P=!0,Fe(m,null)}function Fe(m,C){m.F=Date.now(),tt(m),m.A=Jr(m.v);var I=m.A,j=m.R;Array.isArray(j)||(j=[String(j)]),UM(I.i,"t",j),m.C=0,I=m.j.J,m.h=new J,m.g=nP(m.j,I?C:null,!m.m),0<m.O&&(m.M=new Pe(h(m.Y,m,m.g),m.O)),C=m.U,I=m.g,j=m.ca;var Z="readystatechange";Array.isArray(Z)||(Z&&(Se[0]=Z.toString()),Z=Se);for(var se=0;se<Z.length;se++){var Me=ke(I,Z[se],j||C.handleEvent,!1,C.h||C);if(!Me)break;C.g[Me.key]=Me}C=m.H?A(m.H):{},m.m?(m.u||(m.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,C)):(m.u="GET",m.g.ea(m.A,m.u,null,C)),Ot(),I_(m.i,m.u,m.A,m.l,m.R,m.m)}U.prototype.ca=function(m){m=m.target;const C=this.M;C&&Bo(m)==3?C.j():this.Y(m)},U.prototype.Y=function(m){try{if(m==this.g)e:{const dr=Bo(this.g);var C=this.g.Ba();const dc=this.g.Z();if(!(3>dr)&&(dr!=3||this.g&&(this.h.h||this.g.oa()||GM(this.g)))){this.J||dr!=4||C==7||(C==8||0>=dc?Ot(3):Ot(2)),ct(this);var I=this.g.Z();this.X=I;t:if(Xe(this)){var j=GM(this.g);m="";var Z=j.length,se=Bo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vt(this),at(this);var Me="";break t}this.h.i=new s.TextDecoder}for(C=0;C<Z;C++)this.h.h=!0,m+=this.h.i.decode(j[C],{stream:!(se&&C==Z-1)});j.length=0,this.h.g+=m,this.C=0,Me=this.h.g}else Me=this.g.oa();if(this.o=I==200,sc(this.i,this.u,this.A,this.l,this.R,dr,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Wt,nr=this.g;if((Wt=nr.g?nr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Wt)){var Dt=Wt;break t}}Dt=null}if(I=Dt)Vo(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tr(this,I);else{this.o=!1,this.s=3,dt(12),Vt(this),at(this);break e}}if(this.P){I=!0;let $i;for(;!this.J&&this.C<Me.length;)if($i=et(this,Me),$i==oe){dr==4&&(this.s=4,dt(14),I=!1),Vo(this.i,this.l,null,"[Incomplete Response]");break}else if($i==ie){this.s=4,dt(15),Vo(this.i,this.l,Me,"[Invalid Chunk]"),I=!1;break}else Vo(this.i,this.l,$i,null),tr(this,$i);if(Xe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dr!=4||Me.length!=0||this.h.h||(this.s=1,dt(16),I=!1),this.o=this.o&&I,!I)Vo(this.i,this.l,Me,"[Invalid Chunked Response]"),Vt(this),at(this);else if(0<Me.length&&!this.W){this.W=!0;var hr=this.j;hr.g==this&&hr.ba&&!hr.M&&(hr.j.info("Great, no buffering proxy detected. Bytes received: "+Me.length),k_(hr),hr.M=!0,dt(11))}}else Vo(this.i,this.l,Me,null),tr(this,Me);dr==4&&Vt(this),this.o&&!this.J&&(dr==4?ZM(this.j,this):(this.o=!1,tt(this)))}else bz(this.g),I==400&&0<Me.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Vt(this),at(this)}}}catch{}finally{}};function Xe(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function et(m,C){var I=m.C,j=C.indexOf(`
`,I);return j==-1?oe:(I=Number(C.substring(I,j)),isNaN(I)?ie:(j+=1,j+I>C.length?oe:(C=C.slice(j,j+I),m.C=j+I,C)))}U.prototype.cancel=function(){this.J=!0,Vt(this)};function tt(m){m.S=Date.now()+m.I,yt(m,m.I)}function yt(m,C){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Dn(h(m.ba,m),C)}function ct(m){m.B&&(s.clearTimeout(m.B),m.B=null)}U.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(lc(this.i,this.A),this.L!=2&&(Ot(),dt(17)),Vt(this),this.s=2,at(this)):yt(this,this.S-m)};function at(m){m.j.G==0||m.J||ZM(m.j,m)}function Vt(m){ct(m);var C=m.M;C&&typeof C.ma=="function"&&C.ma(),m.M=null,de(m.U),m.g&&(C=m.g,m.g=null,C.abort(),C.ma())}function tr(m,C){try{var I=m.j;if(I.G!=0&&(I.g==m||$s(I.h,m))){if(!m.K&&$s(I.h,m)&&I.G==3){try{var j=I.Da.g.parse(C)}catch{j=null}if(Array.isArray(j)&&j.length==3){var Z=j;if(Z[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<m.F)pm(I),hm(I);else break e;L_(I),dt(18)}}else I.za=Z[1],0<I.za-I.T&&37500>Z[2]&&I.F&&I.v==0&&!I.C&&(I.C=Dn(h(I.Za,I),6e3));if(1>=bt(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Gs(I,11)}else if((m.K||I.g==m)&&pm(I),!x(C))for(Z=I.Da.g.parse(C),C=0;C<Z.length;C++){let Dt=Z[C];if(I.T=Dt[0],Dt=Dt[1],I.G==2)if(Dt[0]=="c"){I.K=Dt[1],I.ia=Dt[2];const hr=Dt[3];hr!=null&&(I.la=hr,I.j.info("VER="+I.la));const dr=Dt[4];dr!=null&&(I.Aa=dr,I.j.info("SVER="+I.Aa));const dc=Dt[5];dc!=null&&typeof dc=="number"&&0<dc&&(j=1.5*dc,I.L=j,I.j.info("backChannelRequestTimeoutMs_="+j)),j=I;const $i=m.g;if($i){const gm=$i.g?$i.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gm){var se=j.h;se.g||gm.indexOf("spdy")==-1&&gm.indexOf("quic")==-1&&gm.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(sn(se,se.h),se.h=null))}if(j.D){const j_=$i.g?$i.g.getResponseHeader("X-HTTP-Session-Id"):null;j_&&(j.ya=j_,Jt(j.I,j.D,j_))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-m.F,I.j.info("Handshake RTT: "+I.R+"ms")),j=I;var Me=m;if(j.qa=tP(j,j.J?j.ia:null,j.W),Me.K){po(j.h,Me);var Wt=Me,nr=j.L;nr&&(Wt.I=nr),Wt.B&&(ct(Wt),tt(Wt)),j.g=Me}else YM(j);0<I.i.length&&dm(I)}else Dt[0]!="stop"&&Dt[0]!="close"||Gs(I,7);else I.G==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?Gs(I,7):D_(I):Dt[0]!="noop"&&I.l&&I.l.ta(Dt),I.v=0)}}Ot(4)}catch{}}var An=class{constructor(m,C){this.g=m,this.map=C}};function yi(m){this.l=m||10,s.PerformanceNavigationTiming?(m=s.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zt(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function bt(m){return m.h?1:m.g?m.g.size:0}function $s(m,C){return m.h?m.h==C:m.g?m.g.has(C):!1}function sn(m,C){m.g?m.g.add(C):m.h=C}function po(m,C){m.h&&m.h==C?m.h=null:m.g&&m.g.has(C)&&m.g.delete(C)}yi.prototype.cancel=function(){if(this.i=eh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function eh(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let C=m.i;for(const I of m.g.values())C=C.concat(I.D);return C}return y(m.i)}function zs(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(l(m)){for(var C=[],I=m.length,j=0;j<I;j++)C.push(m[j]);return C}C=[],I=0;for(j in m)C[I++]=m[j];return C}function th(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(l(m)||typeof m=="string"){var C=[];m=m.length;for(var I=0;I<m;I++)C.push(I);return C}C=[],I=0;for(const j in m)C[I++]=j;return C}}}function Wn(m,C){if(m.forEach&&typeof m.forEach=="function")m.forEach(C,void 0);else if(l(m)||typeof m=="string")Array.prototype.forEach.call(m,C,void 0);else for(var I=th(m),j=zs(m),Z=j.length,se=0;se<Z;se++)C.call(void 0,j[se],I&&I[se],m)}var mo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nh(m,C){if(m){m=m.split("&");for(var I=0;I<m.length;I++){var j=m[I].indexOf("="),Z=null;if(0<=j){var se=m[I].substring(0,j);Z=m[I].substring(j+1)}else se=m[I];C(se,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function _n(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof _n){this.h=m.h,uc(this,m.j),this.o=m.o,this.g=m.g,Hs(this,m.s),this.l=m.l;var C=m.i,I=new oh;I.i=C.i,C.g&&(I.g=new Map(C.g),I.h=C.h),DM(this,I),this.m=m.m}else m&&(C=String(m).match(mo))?(this.h=!1,uc(this,C[1]||"",!0),this.o=rh(C[2]||""),this.g=rh(C[3]||"",!0),Hs(this,C[4]),this.l=rh(C[5]||"",!0),DM(this,C[6]||"",!0),this.m=rh(C[7]||"")):(this.h=!1,this.i=new oh(null,this.h))}_n.prototype.toString=function(){var m=[],C=this.j;C&&m.push(ih(C,LM,!0),":");var I=this.g;return(I||C=="file")&&(m.push("//"),(C=this.o)&&m.push(ih(C,LM,!0),"@"),m.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&m.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&m.push("/"),m.push(ih(I,I.charAt(0)=="/"?fz:uz,!0))),(I=this.i.toString())&&m.push("?",I),(I=this.m)&&m.push("#",ih(I,dz)),m.join("")};function Jr(m){return new _n(m)}function uc(m,C,I){m.j=I?rh(C,!0):C,m.j&&(m.j=m.j.replace(/:$/,""))}function Hs(m,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);m.s=C}else m.s=null}function DM(m,C,I){C instanceof oh?(m.i=C,pz(m.i,m.h)):(I||(C=ih(C,hz)),m.i=new oh(C,m.h))}function Jt(m,C,I){m.i.set(C,I)}function lm(m){return Jt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function rh(m,C){return m?C?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function ih(m,C,I){return typeof m=="string"?(m=encodeURI(m).replace(C,cz),I&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function cz(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var LM=/[#\/\?@]/g,uz=/[#\?:]/g,fz=/[#\?]/g,hz=/[#\?@]/g,dz=/#/g;function oh(m,C){this.h=this.g=null,this.i=m||null,this.j=!!C}function Na(m){m.g||(m.g=new Map,m.h=0,m.i&&nh(m.i,function(C,I){m.add(decodeURIComponent(C.replace(/\+/g," ")),I)}))}t=oh.prototype,t.add=function(m,C){Na(this),this.i=null,m=fc(this,m);var I=this.g.get(m);return I||this.g.set(m,I=[]),I.push(C),this.h+=1,this};function kM(m,C){Na(m),C=fc(m,C),m.g.has(C)&&(m.i=null,m.h-=m.g.get(C).length,m.g.delete(C))}function jM(m,C){return Na(m),C=fc(m,C),m.g.has(C)}t.forEach=function(m,C){Na(this),this.g.forEach(function(I,j){I.forEach(function(Z){m.call(C,Z,j,this)},this)},this)},t.na=function(){Na(this);const m=Array.from(this.g.values()),C=Array.from(this.g.keys()),I=[];for(let j=0;j<C.length;j++){const Z=m[j];for(let se=0;se<Z.length;se++)I.push(C[j])}return I},t.V=function(m){Na(this);let C=[];if(typeof m=="string")jM(this,m)&&(C=C.concat(this.g.get(fc(this,m))));else{m=Array.from(this.g.values());for(let I=0;I<m.length;I++)C=C.concat(m[I])}return C},t.set=function(m,C){return Na(this),this.i=null,m=fc(this,m),jM(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[C]),this.h+=1,this},t.get=function(m,C){return m?(m=this.V(m),0<m.length?String(m[0]):C):C};function UM(m,C,I){kM(m,C),0<I.length&&(m.i=null,m.g.set(fc(m,C),y(I)),m.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],C=Array.from(this.g.keys());for(var I=0;I<C.length;I++){var j=C[I];const se=encodeURIComponent(String(j)),Me=this.V(j);for(j=0;j<Me.length;j++){var Z=se;Me[j]!==""&&(Z+="="+encodeURIComponent(String(Me[j]))),m.push(Z)}}return this.i=m.join("&")};function fc(m,C){return C=String(C),m.j&&(C=C.toLowerCase()),C}function pz(m,C){C&&!m.j&&(Na(m),m.i=null,m.g.forEach(function(I,j){var Z=j.toLowerCase();j!=Z&&(kM(this,j),UM(this,Z,I))},m)),m.j=C}function mz(m,C){const I=new vi;if(s.Image){const j=new Image;j.onload=d(Da,I,"TestLoadImage: loaded",!0,C,j),j.onerror=d(Da,I,"TestLoadImage: error",!1,C,j),j.onabort=d(Da,I,"TestLoadImage: abort",!1,C,j),j.ontimeout=d(Da,I,"TestLoadImage: timeout",!1,C,j),s.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=m}else C(!1)}function gz(m,C){const I=new vi,j=new AbortController,Z=setTimeout(()=>{j.abort(),Da(I,"TestPingServer: timeout",!1,C)},1e4);fetch(m,{signal:j.signal}).then(se=>{clearTimeout(Z),se.ok?Da(I,"TestPingServer: ok",!0,C):Da(I,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(Z),Da(I,"TestPingServer: error",!1,C)})}function Da(m,C,I,j,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),j(I)}catch{}}function vz(){this.g=new qe}function yz(m,C,I){const j=I||"";try{Wn(m,function(Z,se){let Me=Z;c(Z)&&(Me=Qe(Z)),C.push(j+se+"="+encodeURIComponent(Me))})}catch(Z){throw C.push(j+"type="+encodeURIComponent("_badmap")),Z}}function cm(m){this.l=m.Ub||null,this.j=m.eb||!1}v(cm,Ve),cm.prototype.g=function(){return new um(this.l,this.j)},cm.prototype.i=function(m){return function(){return m}}({});function um(m,C){ye.call(this),this.D=m,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(um,ye),t=um.prototype,t.open=function(m,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=C,this.readyState=1,sh(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(C.body=m),(this.D||s).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ah(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,sh(this)),this.g&&(this.readyState=3,sh(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;FM(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function FM(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var C=m.value?m.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!m.done}))&&(this.response=this.responseText+=C)}m.done?ah(this):sh(this),this.readyState==3&&FM(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,ah(this))},t.Qa=function(m){this.g&&(this.response=m,ah(this))},t.ga=function(){this.g&&ah(this)};function ah(m){m.readyState=4,m.l=null,m.j=null,m.v=null,sh(m)}t.setRequestHeader=function(m,C){this.u.append(m,C)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],C=this.h.entries();for(var I=C.next();!I.done;)I=I.value,m.push(I[0]+": "+I[1]),I=C.next();return m.join(`\r
`)};function sh(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(um.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function VM(m){let C="";return M(m,function(I,j){C+=j,C+=":",C+=I,C+=`\r
`}),C}function N_(m,C,I){e:{for(j in I){var j=!1;break e}j=!0}j||(I=VM(I),typeof m=="string"?I!=null&&encodeURIComponent(String(I)):Jt(m,C,I))}function mn(m){ye.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(mn,ye);var _z=/^https?$/i,xz=["POST","PUT"];t=mn.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,C,I,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);C=C?C.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jf.g(),this.v=this.o?De(this.o):De(Jf),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(C,String(m),!0),this.B=!1}catch(se){BM(this,se);return}if(m=I||"",I=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var Z in j)I.set(Z,j[Z]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const se of j.keys())I.set(se,j.get(se));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(I.keys()).find(se=>se.toLowerCase()=="content-type"),Z=s.FormData&&m instanceof s.FormData,!(0<=Array.prototype.indexOf.call(xz,C,void 0))||j||Z||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,Me]of I)this.g.setRequestHeader(se,Me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{HM(this),this.u=!0,this.g.send(m),this.u=!1}catch(se){BM(this,se)}};function BM(m,C){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=C,m.m=5,$M(m),fm(m)}function $M(m){m.A||(m.A=!0,he(m,"complete"),he(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,he(this,"complete"),he(this,"abort"),fm(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fm(this,!0)),mn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?zM(this):this.bb())},t.bb=function(){zM(this)};function zM(m){if(m.h&&typeof a<"u"&&(!m.v[1]||Bo(m)!=4||m.Z()!=2)){if(m.u&&Bo(m)==4)Ce(m.Ea,0,m);else if(he(m,"readystatechange"),Bo(m)==4){m.h=!1;try{const Me=m.Z();e:switch(Me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var I;if(!(I=C)){var j;if(j=Me===0){var Z=String(m.D).match(mo)[1]||null;!Z&&s.self&&s.self.location&&(Z=s.self.location.protocol.slice(0,-1)),j=!_z.test(Z?Z.toLowerCase():"")}I=j}if(I)he(m,"complete"),he(m,"success");else{m.m=6;try{var se=2<Bo(m)?m.g.statusText:""}catch{se=""}m.l=se+" ["+m.Z()+"]",$M(m)}}finally{fm(m)}}}}function fm(m,C){if(m.g){HM(m);const I=m.g,j=m.v[0]?()=>{}:null;m.g=null,m.v=null,C||he(m,"ready");try{I.onreadystatechange=j}catch{}}}function HM(m){m.I&&(s.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Bo(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Bo(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var C=this.g.responseText;return m&&C.indexOf(m)==0&&(C=C.substring(m.length)),Ge(C)}};function GM(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function bz(m){const C={};m=(m.g&&2<=Bo(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<m.length;j++){if(x(m[j]))continue;var I=R(m[j]);const Z=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const se=C[Z]||[];C[Z]=se,se.push(I)}b(C,function(j){return j.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lh(m,C,I){return I&&I.internalChannelParams&&I.internalChannelParams[m]||C}function WM(m){this.Aa=0,this.i=[],this.j=new vi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lh("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lh("baseRetryDelayMs",5e3,m),this.cb=lh("retryDelaySeedMs",1e4,m),this.Wa=lh("forwardChannelMaxRetries",2,m),this.wa=lh("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new yi(m&&m.concurrentRequestLimit),this.Da=new vz,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=WM.prototype,t.la=8,t.G=1,t.connect=function(m,C,I,j){dt(0),this.W=m,this.H=C||{},I&&j!==void 0&&(this.H.OSID=I,this.H.OAID=j),this.F=this.X,this.I=tP(this,null,this.W),dm(this)};function D_(m){if(qM(m),m.G==3){var C=m.U++,I=Jr(m.I);if(Jt(I,"SID",m.K),Jt(I,"RID",C),Jt(I,"TYPE","terminate"),ch(m,I),C=new U(m,m.j,C),C.L=2,C.v=lm(Jr(I)),I=!1,s.navigator&&s.navigator.sendBeacon)try{I=s.navigator.sendBeacon(C.v.toString(),"")}catch{}!I&&s.Image&&(new Image().src=C.v,I=!0),I||(C.g=nP(C.j,null),C.g.ea(C.v)),C.F=Date.now(),tt(C)}eP(m)}function hm(m){m.g&&(k_(m),m.g.cancel(),m.g=null)}function qM(m){hm(m),m.u&&(s.clearTimeout(m.u),m.u=null),pm(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&s.clearTimeout(m.s),m.s=null)}function dm(m){if(!Zt(m.h)&&!m.s){m.s=!0;var C=m.Ga;$||K(),B||($(),B=!0),X.add(C,m),m.B=0}}function wz(m,C){return bt(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=C.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Dn(h(m.Ga,m,C),JM(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const Z=new U(this,this.j,m);let se=this.o;if(this.S&&(se?(se=A(se),P(se,this.S)):se=this.S),this.m!==null||this.O||(Z.H=se,se=null),this.P)e:{for(var C=0,I=0;I<this.i.length;I++){t:{var j=this.i[I];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(C+=j,4096<C){C=I;break e}if(C===4096||I===this.i.length-1){C=I+1;break e}}C=1e3}else C=1e3;C=KM(this,Z,C),I=Jr(this.I),Jt(I,"RID",m),Jt(I,"CVER",22),this.D&&Jt(I,"X-HTTP-Session-Id",this.D),ch(this,I),se&&(this.O?C="headers="+encodeURIComponent(String(VM(se)))+"&"+C:this.m&&N_(I,this.m,se)),sn(this.h,Z),this.Ua&&Jt(I,"TYPE","init"),this.P?(Jt(I,"$req",C),Jt(I,"SID","null"),Z.T=!0,ae(Z,I,null)):ae(Z,I,C),this.G=2}}else this.G==3&&(m?XM(this,m):this.i.length==0||Zt(this.h)||XM(this))};function XM(m,C){var I;C?I=C.l:I=m.U++;const j=Jr(m.I);Jt(j,"SID",m.K),Jt(j,"RID",I),Jt(j,"AID",m.T),ch(m,j),m.m&&m.o&&N_(j,m.m,m.o),I=new U(m,m.j,I,m.B+1),m.m===null&&(I.H=m.o),C&&(m.i=C.D.concat(m.i)),C=KM(m,I,1e3),I.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),sn(m.h,I),ae(I,j,C)}function ch(m,C){m.H&&M(m.H,function(I,j){Jt(C,j,I)}),m.l&&Wn({},function(I,j){Jt(C,j,I)})}function KM(m,C,I){I=Math.min(m.i.length,I);var j=m.l?h(m.l.Na,m.l,m):null;e:{var Z=m.i;let se=-1;for(;;){const Me=["count="+I];se==-1?0<I?(se=Z[0].g,Me.push("ofs="+se)):se=0:Me.push("ofs="+se);let Wt=!0;for(let nr=0;nr<I;nr++){let Dt=Z[nr].g;const hr=Z[nr].map;if(Dt-=se,0>Dt)se=Math.max(0,Z[nr].g-100),Wt=!1;else try{yz(hr,Me,"req"+Dt+"_")}catch{j&&j(hr)}}if(Wt){j=Me.join("&");break e}}}return m=m.i.splice(0,I),C.D=m,j}function YM(m){if(!m.g&&!m.u){m.Y=1;var C=m.Fa;$||K(),B||($(),B=!0),X.add(C,m),m.v=0}}function L_(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Dn(h(m.Fa,m),JM(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,QM(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Dn(h(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),hm(this),QM(this))};function k_(m){m.A!=null&&(s.clearTimeout(m.A),m.A=null)}function QM(m){m.g=new U(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var C=Jr(m.qa);Jt(C,"RID","rpc"),Jt(C,"SID",m.K),Jt(C,"AID",m.T),Jt(C,"CI",m.F?"0":"1"),!m.F&&m.ja&&Jt(C,"TO",m.ja),Jt(C,"TYPE","xmlhttp"),ch(m,C),m.m&&m.o&&N_(C,m.m,m.o),m.L&&(m.g.I=m.L);var I=m.g;m=m.ia,I.L=1,I.v=lm(Jr(C)),I.m=null,I.P=!0,Fe(I,m)}t.Za=function(){this.C!=null&&(this.C=null,hm(this),L_(this),dt(19))};function pm(m){m.C!=null&&(s.clearTimeout(m.C),m.C=null)}function ZM(m,C){var I=null;if(m.g==C){pm(m),k_(m),m.g=null;var j=2}else if($s(m.h,C))I=C.D,po(m.h,C),j=1;else return;if(m.G!=0){if(C.o)if(j==1){I=C.m?C.m.length:0,C=Date.now()-C.F;var Z=m.B;j=Ie(),he(j,new Tn(j,I)),dm(m)}else YM(m);else if(Z=C.s,Z==3||Z==0&&0<C.X||!(j==1&&wz(m,C)||j==2&&L_(m)))switch(I&&0<I.length&&(C=m.h,C.i=C.i.concat(I)),Z){case 1:Gs(m,5);break;case 4:Gs(m,10);break;case 3:Gs(m,6);break;default:Gs(m,2)}}}function JM(m,C){let I=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(I*=2),I*C}function Gs(m,C){if(m.j.info("Error code "+C),C==2){var I=h(m.fb,m),j=m.Xa;const Z=!j;j=new _n(j||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||uc(j,"https"),lm(j),Z?mz(j.toString(),I):gz(j.toString(),I)}else dt(2);m.G=0,m.l&&m.l.sa(C),eP(m),qM(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function eP(m){if(m.G=0,m.ka=[],m.l){const C=eh(m.h);(C.length!=0||m.i.length!=0)&&(g(m.ka,C),g(m.ka,m.i),m.h.i.length=0,y(m.i),m.i.length=0),m.l.ra()}}function tP(m,C,I){var j=I instanceof _n?Jr(I):new _n(I);if(j.g!="")C&&(j.g=C+"."+j.g),Hs(j,j.s);else{var Z=s.location;j=Z.protocol,C=C?C+"."+Z.hostname:Z.hostname,Z=+Z.port;var se=new _n(null);j&&uc(se,j),C&&(se.g=C),Z&&Hs(se,Z),I&&(se.l=I),j=se}return I=m.D,C=m.ya,I&&C&&Jt(j,I,C),Jt(j,"VER",m.la),ch(m,j),j}function nP(m,C,I){if(C&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=m.Ca&&!m.pa?new mn(new cm({eb:I})):new mn(m.pa),C.Ha(m.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function rP(){}t=rP.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function mm(){}mm.prototype.g=function(m,C){return new ei(m,C)};function ei(m,C){ye.call(this),this.g=new WM(C),this.l=m,this.h=C&&C.messageUrlParams||null,m=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(m?m["X-WebChannel-Content-Type"]=C.messageContentType:m={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(m?m["X-WebChannel-Client-Profile"]=C.va:m={"X-WebChannel-Client-Profile":C.va}),this.g.S=m,(m=C&&C.Sb)&&!x(m)&&(this.g.m=m),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!x(C)&&(this.g.D=C,m=this.h,m!==null&&C in m&&(m=this.h,C in m&&delete m[C])),this.j=new hc(this)}v(ei,ye),ei.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ei.prototype.close=function(){D_(this.g)},ei.prototype.o=function(m){var C=this.g;if(typeof m=="string"){var I={};I.__data__=m,m=I}else this.u&&(I={},I.__data__=Qe(m),m=I);C.i.push(new An(C.Ya++,m)),C.G==3&&dm(C)},ei.prototype.N=function(){this.g.l=null,delete this.j,D_(this.g),delete this.g,ei.aa.N.call(this)};function iP(m){le.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var C=m.__sm__;if(C){e:{for(const I in C){m=I;break e}m=void 0}(this.i=m)&&(m=this.i,C=C!==null&&m in C?C[m]:void 0),this.data=C}else this.data=m}v(iP,le);function oP(){ue.call(this),this.status=1}v(oP,ue);function hc(m){this.g=m}v(hc,rP),hc.prototype.ua=function(){he(this.g,"a")},hc.prototype.ta=function(m){he(this.g,new iP(m))},hc.prototype.sa=function(m){he(this.g,new oP)},hc.prototype.ra=function(){he(this.g,"b")},mm.prototype.createWebChannel=mm.prototype.g,ei.prototype.send=ei.prototype.o,ei.prototype.open=ei.prototype.m,ei.prototype.close=ei.prototype.close,W5=function(){return new mm},G5=function(){return Ie()},H5=ne,GS={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bs.NO_ERROR=0,Bs.TIMEOUT=8,Bs.HTTP_ERROR=6,qg=Bs,sm.COMPLETE="complete",z5=sm,vt.EventType=Q,Q.OPEN="a",Q.CLOSE="b",Q.ERROR="c",Q.MESSAGE="d",ye.prototype.listen=ye.prototype.K,zh=vt,mn.prototype.listenOnce=mn.prototype.L,mn.prototype.getLastError=mn.prototype.Ka,mn.prototype.getLastErrorCode=mn.prototype.Ba,mn.prototype.getStatus=mn.prototype.Z,mn.prototype.getResponseJson=mn.prototype.Oa,mn.prototype.getResponseText=mn.prototype.oa,mn.prototype.send=mn.prototype.ea,mn.prototype.setWithCredentials=mn.prototype.Ha,$5=mn}).apply(typeof Eg<"u"?Eg:typeof self<"u"?self:typeof window<"u"?window:{});const TL="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xf="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=new L5("@firebase/firestore");function Fc(){return ql.logLevel}function Be(t,...e){if(ql.logLevel<=Ct.DEBUG){const n=e.map(tM);ql.debug(`Firestore (${Xf}): ${t}`,...n)}}function Ta(t,...e){if(ql.logLevel<=Ct.ERROR){const n=e.map(tM);ql.error(`Firestore (${Xf}): ${t}`,...n)}}function yf(t,...e){if(ql.logLevel<=Ct.WARN){const n=e.map(tM);ql.warn(`Firestore (${Xf}): ${t}`,...n)}}function tM(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t="Unexpected state"){const e=`FIRESTORE (${Xf}) INTERNAL ASSERTION FAILED: `+t;throw Ta(e),new Error(e)}function Ut(t,e){t||st()}function pt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends qf{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yPe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(br.UNAUTHENTICATED))}shutdown(){}}class _Pe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class xPe{constructor(e){this.t=e,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ut(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new ys;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ys,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},s=l=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>s(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?s(l):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ys)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ut(typeof r.accessToken=="string"),new q5(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ut(e===null||typeof e=="string"),new br(e)}}class bPe{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=br.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class wPe{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new bPe(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class SPe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EPe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ut(this.o===void 0);const r=o=>{o.error!=null&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,Be("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ut(typeof n.token=="string"),this.R=n.token,new SPe(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TPe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=TPe(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function At(t,e){return t<e?-1:t>e?1:0}function _f(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{static now(){return Bn.fromMillis(Date.now())}static fromDate(e){return Bn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Bn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new He(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new He(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new He(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{static fromTimestamp(e){return new ut(e)}static min(){return new ut(new Bn(0,0))}static max(){return new ut(new Bn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n,r){n===void 0?n=0:n>e.length&&st(),r===void 0?r=e.length-n:r>e.length-n&&st(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Cp.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cp?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),a=n.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class on extends Cp{construct(e,n,r){return new on(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new He(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new on(n)}static emptyPath(){return new on([])}}const APe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sr extends Cp{construct(e,n,r){return new sr(e,n,r)}static isValidIdentifier(e){return APe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new sr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new He(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new He(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new He(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else s==="`"?(a=!a,i++):s!=="."||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new He(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sr(n)}static emptyPath(){return new sr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.path=e}static fromPath(e){return new Je(on.fromString(e))}static fromName(e){return new Je(on.fromString(e).popFirst(5))}static empty(){return new Je(on.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&on.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return on.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new on(e.slice()))}}function MPe(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ut.fromTimestamp(r===1e9?new Bn(n+1,0):new Bn(n,r));return new Ms(i,Je.empty(),e)}function PPe(t){return new Ms(t.readTime,t.key,-1)}class Ms{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ms(ut.min(),Je.empty(),-1)}static max(){return new Ms(ut.max(),Je.empty(),-1)}}function CPe(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Je.comparator(t.documentKey,e.documentKey),n!==0?n:At(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RPe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OPe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kf(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==RPe)throw t;Be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new pe((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof pe?n:pe.resolve(n)}catch(n){return pe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):pe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):pe.reject(n)}static resolve(e){return new pe((n,r)=>{n(e)})}static reject(e){return new pe((n,r)=>{r(e)})}static waitFor(e){return new pe((n,r)=>{let i=0,o=0,a=!1;e.forEach(s=>{++i,s.next(()=>{++o,a&&o===i&&n()},l=>r(l))}),a=!0,o===i&&n()})}static or(e){let n=pe.resolve(!1);for(const r of e)n=n.next(i=>i?pe.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new pe((r,i)=>{const o=e.length,a=new Array(o);let s=0;for(let l=0;l<o;l++){const c=l;n(e[c]).next(u=>{a[c]=u,++s,s===o&&r(a)},u=>i(u))}})}static doWhile(e,n){return new pe((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function IPe(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Yf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}__.oe=-1;function x_(t){return t==null}function $y(t){return t===0&&1/t==-1/0}function NPe(t){return typeof t=="number"&&Number.isInteger(t)&&!$y(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DPe(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=AL(e)),e=LPe(t.get(n),e);return AL(e)}function LPe(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function AL(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function rc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function K5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n){this.comparator=e,this.root=n||ar.EMPTY}insert(e,n){return new pn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ar.BLACK,null,null))}remove(e){return new pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ar.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tg(this.root,e,this.comparator,!0)}}class Tg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ar{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??ar.RED,this.left=i??ar.EMPTY,this.right=o??ar.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new ar(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ar.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ar.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}ar.EMPTY=null,ar.RED=!0,ar.BLACK=!1;ar.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(e,n,r,i,o){return this}insert(e,n,r){return new ar(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.comparator=e,this.data=new pn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new PL(this.data.getIterator())}getIteratorFrom(e){return new PL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $n(this.comparator);return n.data=e,n}}class PL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.fields=e,e.sort(sr.comparator)}static empty(){return new ro([])}unionWith(e){let n=new $n(sr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ro(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _f(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Y5("Invalid base64 string: "+o):o}}(e);return new fr(n)}static fromUint8Array(e){const n=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new fr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fr.EMPTY_BYTE_STRING=new fr("");const kPe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(t){if(Ut(!!t),typeof t=="string"){let e=0;const n=kPe.exec(t);if(Ut(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bn(t.seconds),nanos:bn(t.nanos)}}function bn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cs(t){return typeof t=="string"?fr.fromBase64String(t):fr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function b_(t){const e=t.mapValue.fields.__previous_value__;return nM(e)?b_(e):e}function Rp(t){const e=Ps(t.mapValue.fields.__local_write_time__.timestampValue);return new Bn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jPe{constructor(e,n,r,i,o,a,s,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=s,this.longPollingOptions=l,this.useFetchStreams=c}}class Op{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Op("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Op&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Rs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?nM(t)?4:FPe(t)?9007199254740991:UPe(t)?10:11:st()}function Lo(t,e){if(t===e)return!0;const n=Rs(t);if(n!==Rs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Rp(t).isEqual(Rp(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const a=Ps(i.timestampValue),s=Ps(o.timestampValue);return a.seconds===s.seconds&&a.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Cs(i.bytesValue).isEqual(Cs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return bn(i.geoPointValue.latitude)===bn(o.geoPointValue.latitude)&&bn(i.geoPointValue.longitude)===bn(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return bn(i.integerValue)===bn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const a=bn(i.doubleValue),s=bn(o.doubleValue);return a===s?$y(a)===$y(s):isNaN(a)&&isNaN(s)}return!1}(t,e);case 9:return _f(t.arrayValue.values||[],e.arrayValue.values||[],Lo);case 10:case 11:return function(i,o){const a=i.mapValue.fields||{},s=o.mapValue.fields||{};if(ML(a)!==ML(s))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(s[l]===void 0||!Lo(a[l],s[l])))return!1;return!0}(t,e);default:return st()}}function Ip(t,e){return(t.values||[]).find(n=>Lo(n,e))!==void 0}function xf(t,e){if(t===e)return 0;const n=Rs(t),r=Rs(e);if(n!==r)return At(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return At(t.booleanValue,e.booleanValue);case 2:return function(o,a){const s=bn(o.integerValue||o.doubleValue),l=bn(a.integerValue||a.doubleValue);return s<l?-1:s>l?1:s===l?0:isNaN(s)?isNaN(l)?0:-1:1}(t,e);case 3:return CL(t.timestampValue,e.timestampValue);case 4:return CL(Rp(t),Rp(e));case 5:return At(t.stringValue,e.stringValue);case 6:return function(o,a){const s=Cs(o),l=Cs(a);return s.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const s=o.split("/"),l=a.split("/");for(let c=0;c<s.length&&c<l.length;c++){const u=At(s[c],l[c]);if(u!==0)return u}return At(s.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const s=At(bn(o.latitude),bn(a.latitude));return s!==0?s:At(bn(o.longitude),bn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return RL(t.arrayValue,e.arrayValue);case 10:return function(o,a){var s,l,c,u;const f=o.fields||{},h=a.fields||{},d=(s=f.value)===null||s===void 0?void 0:s.arrayValue,v=(l=h.value)===null||l===void 0?void 0:l.arrayValue,y=At(((c=d==null?void 0:d.values)===null||c===void 0?void 0:c.length)||0,((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0);return y!==0?y:RL(d,v)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Ag.mapValue&&a===Ag.mapValue)return 0;if(o===Ag.mapValue)return 1;if(a===Ag.mapValue)return-1;const s=o.fields||{},l=Object.keys(s),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const h=At(l[f],u[f]);if(h!==0)return h;const d=xf(s[l[f]],c[u[f]]);if(d!==0)return d}return At(l.length,u.length)}(t.mapValue,e.mapValue);default:throw st()}}function CL(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return At(t,e);const n=Ps(t),r=Ps(e),i=At(n.seconds,r.seconds);return i!==0?i:At(n.nanos,r.nanos)}function RL(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=xf(n[i],r[i]);if(o)return o}return At(n.length,r.length)}function bf(t){return WS(t)}function WS(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ps(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Je.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=WS(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${WS(n.fields[a])}`;return i+"}"}(t.mapValue):st()}function Xg(t){switch(Rs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=b_(t);return e?16+Xg(e):16;case 5:return 2*t.stringValue.length;case 6:return Cs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Xg(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return rc(r.fields,(o,a)=>{i+=o.length+Xg(a)}),i}(t.mapValue);default:throw st()}}function OL(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function qS(t){return!!t&&"integerValue"in t}function rM(t){return!!t&&"arrayValue"in t}function IL(t){return!!t&&"nullValue"in t}function NL(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kg(t){return!!t&&"mapValue"in t}function UPe(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function md(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return rc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=md(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=md(t.arrayValue.values[n]);return e}return Object.assign({},t)}function FPe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.value=e}static empty(){return new Ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Kg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=md(n)}setAll(e){let n=sr.emptyPath(),r={},i=[];e.forEach((a,s)=>{if(!n.isImmediateParentOf(s)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=s.popLast()}a?r[s.lastSegment()]=md(a):i.push(s.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Kg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Lo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Kg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){rc(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Ri(md(this.value))}}function Q5(t){const e=[];return rc(t.fields,(n,r)=>{const i=new sr([n]);if(Kg(r)){const o=Q5(r.mapValue).fields;if(o.length===0)e.push(i);else for(const a of o)e.push(i.child(a))}else e.push(i)}),new ro(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n,r,i,o,a,s){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=s}static newInvalidDocument(e){return new Tr(e,0,ut.min(),ut.min(),ut.min(),Ri.empty(),0)}static newFoundDocument(e,n,r,i){return new Tr(e,1,n,ut.min(),r,i,0)}static newNoDocument(e,n){return new Tr(e,2,n,ut.min(),ut.min(),Ri.empty(),0)}static newUnknownDocument(e,n){return new Tr(e,3,n,ut.min(),ut.min(),Ri.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,n){this.position=e,this.inclusive=n}}function DL(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],a=t.position[i];if(o.field.isKeyField()?r=Je.comparator(Je.fromName(a.referenceValue),n.key):r=xf(a,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function LL(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Lo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n="asc"){this.field=e,this.dir=n}}function VPe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{}class On extends Z5{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new $Pe(e,n,r):n==="array-contains"?new GPe(e,r):n==="in"?new WPe(e,r):n==="not-in"?new qPe(e,r):n==="array-contains-any"?new XPe(e,r):new On(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new zPe(e,r):new HPe(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(xf(n,this.value)):n!==null&&Rs(this.value)===Rs(n)&&this.matchesComparison(xf(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return st()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fo extends Z5{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new fo(e,n)}matches(e){return J5(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function J5(t){return t.op==="and"}function e$(t){return BPe(t)&&J5(t)}function BPe(t){for(const e of t.filters)if(e instanceof fo)return!1;return!0}function XS(t){if(t instanceof On)return t.field.canonicalString()+t.op.toString()+bf(t.value);if(e$(t))return t.filters.map(e=>XS(e)).join(",");{const e=t.filters.map(n=>XS(n)).join(",");return`${t.op}(${e})`}}function t$(t,e){return t instanceof On?function(r,i){return i instanceof On&&r.op===i.op&&r.field.isEqual(i.field)&&Lo(r.value,i.value)}(t,e):t instanceof fo?function(r,i){return i instanceof fo&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,s)=>o&&t$(a,i.filters[s]),!0):!1}(t,e):void st()}function n$(t){return t instanceof On?function(n){return`${n.field.canonicalString()} ${n.op} ${bf(n.value)}`}(t):t instanceof fo?function(n){return n.op.toString()+" {"+n.getFilters().map(n$).join(" ,")+"}"}(t):"Filter"}class $Pe extends On{constructor(e,n,r){super(e,n,r),this.key=Je.fromName(r.referenceValue)}matches(e){const n=Je.comparator(e.key,this.key);return this.matchesComparison(n)}}class zPe extends On{constructor(e,n){super(e,"in",n),this.keys=r$("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class HPe extends On{constructor(e,n){super(e,"not-in",n),this.keys=r$("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function r$(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Je.fromName(r.referenceValue))}class GPe extends On{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rM(n)&&Ip(n.arrayValue,this.value)}}class WPe extends On{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ip(this.value.arrayValue,n)}}class qPe extends On{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ip(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ip(this.value.arrayValue,n)}}class XPe extends On{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rM(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ip(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KPe{constructor(e,n=null,r=[],i=[],o=null,a=null,s=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=s,this.ue=null}}function kL(t,e=null,n=[],r=[],i=null,o=null,a=null){return new KPe(t,e,n,r,i,o,a)}function iM(t){const e=pt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>XS(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),x_(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bf(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bf(r)).join(",")),e.ue=n}return e.ue}function oM(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!VPe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!t$(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!LL(t.startAt,e.startAt)&&LL(t.endAt,e.endAt)}function KS(t){return Je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n=null,r=[],i=[],o=null,a="F",s=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=s,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function YPe(t,e,n,r,i,o,a,s){return new Qf(t,e,n,r,i,o,a,s)}function i$(t){return new Qf(t)}function jL(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function o$(t){return t.collectionGroup!==null}function gd(t){const e=pt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let s=new $n(sr.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(s=s.add(c.field))})}),s})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Np(o,r))}),n.has(sr.keyField().canonicalString())||e.ce.push(new Np(sr.keyField(),r))}return e.ce}function Ro(t){const e=pt(t);return e.le||(e.le=QPe(e,gd(t))),e.le}function QPe(t,e){if(t.limitType==="F")return kL(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Np(i.field,o)});const n=t.endAt?new zy(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zy(t.startAt.position,t.startAt.inclusive):null;return kL(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function YS(t,e){const n=t.filters.concat([e]);return new Qf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Hy(t,e,n){return new Qf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function w_(t,e){return oM(Ro(t),Ro(e))&&t.limitType===e.limitType}function a$(t){return`${iM(Ro(t))}|lt:${t.limitType}`}function Vc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>n$(i)).join(", ")}]`),x_(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>bf(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>bf(i)).join(",")),`Target(${r})`}(Ro(t))}; limitType=${t.limitType})`}function S_(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Je.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of gd(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,s,l){const c=DL(a,s,l);return a.inclusive?c<=0:c<0}(r.startAt,gd(r),i)||r.endAt&&!function(a,s,l){const c=DL(a,s,l);return a.inclusive?c>=0:c>0}(r.endAt,gd(r),i))}(t,e)}function ZPe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function s$(t){return(e,n)=>{let r=!1;for(const i of gd(t)){const o=JPe(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function JPe(t,e,n){const r=t.field.isKeyField()?Je.comparator(e.key,n.key):function(o,a,s){const l=a.data.field(o),c=s.data.field(o);return l!==null&&c!==null?xf(l,c):st()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){rc(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return K5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eCe=new pn(Je.comparator);function Aa(){return eCe}const l$=new pn(Je.comparator);function Hh(...t){let e=l$;for(const n of t)e=e.insert(n.key,n);return e}function c$(t){let e=l$;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Sl(){return vd()}function u$(){return vd()}function vd(){return new ic(t=>t.toString(),(t,e)=>t.isEqual(e))}const tCe=new pn(Je.comparator),nCe=new $n(Je.comparator);function Tt(...t){let e=nCe;for(const n of t)e=e.add(n);return e}const rCe=new $n(At);function iCe(){return rCe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$y(e)?"-0":e}}function f$(t){return{integerValue:""+t}}function oCe(t,e){return NPe(e)?f$(e):aM(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(){this._=void 0}}function aCe(t,e,n){return t instanceof Gy?function(i,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&nM(o)&&(o=b_(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof Dp?d$(t,e):t instanceof Lp?p$(t,e):function(i,o){const a=h$(i,o),s=UL(a)+UL(i.Pe);return qS(a)&&qS(i.Pe)?f$(s):aM(i.serializer,s)}(t,e)}function sCe(t,e,n){return t instanceof Dp?d$(t,e):t instanceof Lp?p$(t,e):n}function h$(t,e){return t instanceof Wy?function(r){return qS(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Gy extends E_{}class Dp extends E_{constructor(e){super(),this.elements=e}}function d$(t,e){const n=m$(e);for(const r of t.elements)n.some(i=>Lo(i,r))||n.push(r);return{arrayValue:{values:n}}}class Lp extends E_{constructor(e){super(),this.elements=e}}function p$(t,e){let n=m$(e);for(const r of t.elements)n=n.filter(i=>!Lo(i,r));return{arrayValue:{values:n}}}class Wy extends E_{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function UL(t){return bn(t.integerValue||t.doubleValue)}function m$(t){return rM(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function lCe(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Dp&&i instanceof Dp||r instanceof Lp&&i instanceof Lp?_f(r.elements,i.elements,Lo):r instanceof Wy&&i instanceof Wy?Lo(r.Pe,i.Pe):r instanceof Gy&&i instanceof Gy}(t.transform,e.transform)}class cCe{constructor(e,n){this.version=e,this.transformResults=n}}class pa{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pa}static exists(e){return new pa(void 0,e)}static updateTime(e){return new pa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class T_{}function g$(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new y$(t.key,pa.none()):new nm(t.key,t.data,pa.none());{const n=t.data,r=Ri.empty();let i=new $n(sr.comparator);for(let o of e.fields)if(!i.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new oc(t.key,r,new ro(i.toArray()),pa.none())}}function uCe(t,e,n){t instanceof nm?function(i,o,a){const s=i.value.clone(),l=VL(i.fieldTransforms,o,a.transformResults);s.setAll(l),o.convertToFoundDocument(a.version,s).setHasCommittedMutations()}(t,e,n):t instanceof oc?function(i,o,a){if(!Yg(i.precondition,o))return void o.convertToUnknownDocument(a.version);const s=VL(i.fieldTransforms,o,a.transformResults),l=o.data;l.setAll(v$(i)),l.setAll(s),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function yd(t,e,n,r){return t instanceof nm?function(o,a,s,l){if(!Yg(o.precondition,a))return s;const c=o.value.clone(),u=BL(o.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof oc?function(o,a,s,l){if(!Yg(o.precondition,a))return s;const c=BL(o.fieldTransforms,l,a),u=a.data;return u.setAll(v$(o)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),s===null?null:s.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(o,a,s){return Yg(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):s}(t,e,n)}function fCe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=h$(r.transform,i||null);o!=null&&(n===null&&(n=Ri.empty()),n.set(r.field,o))}return n||null}function FL(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_f(r,i,(o,a)=>lCe(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nm extends T_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class oc extends T_{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function v$(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function VL(t,e,n){const r=new Map;Ut(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,sCe(a,s,n[i]))}return r}function BL(t,e,n){const r=new Map;for(const i of t){const o=i.transform,a=n.data.field(i.field);r.set(i.field,aCe(o,a,e))}return r}class y$ extends T_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hCe extends T_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dCe{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&uCe(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=yd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=yd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=u$();return this.mutations.forEach(i=>{const o=e.get(i.key),a=o.overlayedDocument;let s=this.applyToLocalView(a,o.mutatedFields);s=n.has(i.key)?null:s;const l=g$(a,s);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(ut.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Tt())}isEqual(e){return this.batchId===e.batchId&&_f(this.mutations,e.mutations,(n,r)=>FL(n,r))&&_f(this.baseMutations,e.baseMutations,(n,r)=>FL(n,r))}}class sM{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ut(e.mutations.length===r.length);let i=function(){return tCe}();const o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new sM(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pCe{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mCe{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pn,Pt;function gCe(t){switch(t){default:return st();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function _$(t){if(t===void 0)return Ta("GRPC error has no .code"),ve.UNKNOWN;switch(t){case Pn.OK:return ve.OK;case Pn.CANCELLED:return ve.CANCELLED;case Pn.UNKNOWN:return ve.UNKNOWN;case Pn.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case Pn.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case Pn.INTERNAL:return ve.INTERNAL;case Pn.UNAVAILABLE:return ve.UNAVAILABLE;case Pn.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case Pn.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case Pn.NOT_FOUND:return ve.NOT_FOUND;case Pn.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case Pn.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case Pn.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case Pn.ABORTED:return ve.ABORTED;case Pn.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case Pn.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case Pn.DATA_LOSS:return ve.DATA_LOSS;default:return st()}}(Pt=Pn||(Pn={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vCe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yCe=new Nl([4294967295,4294967295],0);function $L(t){const e=vCe().encode(t),n=new B5;return n.update(e),new Uint8Array(n.digest())}function zL(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Nl([n,r],0),new Nl([i,o],0)]}class lM{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gh(`Invalid padding: ${n}`);if(r<0)throw new Gh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gh(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Nl.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(Nl.fromNumber(r)));return i.compare(yCe)===1&&(i=new Nl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=$L(e),[r,i]=zL(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(r,i,o);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new lM(o,i,n);return r.forEach(s=>a.insert(s)),a}insert(e){if(this.Te===0)return;const n=$L(e),[r,i]=zL(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(r,i,o);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,rm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new A_(ut.min(),i,new pn(At),Aa(),Tt())}}class rm{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rm(r,n,Tt(),Tt(),Tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class x${constructor(e,n){this.targetId=e,this.me=n}}class b${constructor(e,n,r=fr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class HL{constructor(){this.fe=0,this.ge=GL(),this.pe=fr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Tt(),n=Tt(),r=Tt();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:st()}}),new rm(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=GL()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ut(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _Ce{constructor(e){this.Le=e,this.Be=new Map,this.ke=Aa(),this.qe=Mg(),this.Qe=Mg(),this.Ke=new pn(At)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:st()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const o=i.target;if(KS(o))if(r===0){const a=new Je(o.path);this.We(n,a,Tr.newNoDocument(a,ut.min()))}else Ut(r===1);else{const a=this.Ze(n);if(a!==r){const s=this.Xe(e),l=s?this.et(s,e,a):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let a,s;try{a=Cs(r).toUint8Array()}catch(l){if(l instanceof Y5)return yf("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{s=new lM(a,i,o)}catch(l){return yf(l instanceof Gh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return s.Te===0?null:s}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const a=this.Le.nt(),s=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(s)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.Be.forEach((o,a)=>{const s=this.Ye(a);if(s){if(o.current&&KS(s.target)){const l=new Je(s.target.path);this.st(l).has(a)||this.ot(a,l)||this.We(a,l,Tr.newNoDocument(l,e))}o.be&&(n.set(a,o.ve()),o.Ce())}});let r=Tt();this.Qe.forEach((o,a)=>{let s=!0;a.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(r=r.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const i=new A_(e,n,this.Ke,this.ke,r);return this.ke=Aa(),this.qe=Mg(),this.Qe=Mg(),this.Ke=new pn(At),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new HL,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new $n(At),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new $n(At),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||Be("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new HL),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Mg(){return new pn(Je.comparator)}function GL(){return new pn(Je.comparator)}const xCe={asc:"ASCENDING",desc:"DESCENDING"},bCe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wCe={and:"AND",or:"OR"};class SCe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function QS(t,e){return t.useProto3Json||x_(e)?e:{value:e}}function qy(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w$(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ECe(t,e){return qy(t,e.toTimestamp())}function Oo(t){return Ut(!!t),ut.fromTimestamp(function(n){const r=Ps(n);return new Bn(r.seconds,r.nanos)}(t))}function cM(t,e){return ZS(t,e).canonicalString()}function ZS(t,e){const n=function(i){return new on(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function S$(t){const e=on.fromString(t);return Ut(P$(e)),e}function JS(t,e){return cM(t.databaseId,e.path)}function kb(t,e){const n=S$(e);if(n.get(1)!==t.databaseId.projectId)throw new He(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new He(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Je(T$(n))}function E$(t,e){return cM(t.databaseId,e)}function TCe(t){const e=S$(t);return e.length===4?on.emptyPath():T$(e)}function eE(t){return new on(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function T$(t){return Ut(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function WL(t,e,n){return{name:JS(t,e),fields:n.value.mapValue.fields}}function ACe(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:st()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,u){return c.useProto3Json?(Ut(u===void 0||typeof u=="string"),fr.fromBase64String(u||"")):(Ut(u===void 0||u instanceof Buffer||u instanceof Uint8Array),fr.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,s=a&&function(c){const u=c.code===void 0?ve.UNKNOWN:_$(c.code);return new He(u,c.message||"")}(a);n=new b$(r,i,o,s||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=kb(t,r.document.name),o=Oo(r.document.updateTime),a=r.document.createTime?Oo(r.document.createTime):ut.min(),s=new Ri({mapValue:{fields:r.document.fields}}),l=Tr.newFoundDocument(i,o,a,s),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Qg(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=kb(t,r.document),o=r.readTime?Oo(r.readTime):ut.min(),a=Tr.newNoDocument(i,o),s=r.removedTargetIds||[];n=new Qg([],s,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=kb(t,r.document),o=r.removedTargetIds||[];n=new Qg([],o,i,null)}else{if(!("filter"in e))return st();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,a=new mCe(i,o),s=r.targetId;n=new x$(s,a)}}return n}function MCe(t,e){let n;if(e instanceof nm)n={update:WL(t,e.key,e.value)};else if(e instanceof y$)n={delete:JS(t,e.key)};else if(e instanceof oc)n={update:WL(t,e.key,e.data),updateMask:kCe(e.fieldMask)};else{if(!(e instanceof hCe))return st();n={verify:JS(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,a){const s=a.transform;if(s instanceof Gy)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof Dp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof Lp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof Wy)return{fieldPath:a.field.canonicalString(),increment:s.Pe};throw st()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:ECe(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:st()}(t,e.precondition)),n}function PCe(t,e){return t&&t.length>0?(Ut(e!==void 0),t.map(n=>function(i,o){let a=i.updateTime?Oo(i.updateTime):Oo(o);return a.isEqual(ut.min())&&(a=Oo(o)),new cCe(a,i.transformResults||[])}(n,e))):[]}function CCe(t,e){return{documents:[E$(t,e.path)]}}function RCe(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=E$(t,i);const o=function(c){if(c.length!==0)return M$(fo.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:Bc(h.field),direction:NCe(h.dir)}}(u))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const s=QS(t,e.limit);return s!==null&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:n,parent:i}}function OCe(t){let e=TCe(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ut(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];n.where&&(o=function(f){const h=A$(f);return h instanceof fo&&e$(h)?h.getFilters():[h]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(h=>function(v){return new Np($c(v.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(h))}(n.orderBy));let s=null;n.limit&&(s=function(f){let h;return h=typeof f=="object"?f.value:f,x_(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(f){const h=!!f.before,d=f.values||[];return new zy(d,h)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const h=!f.before,d=f.values||[];return new zy(d,h)}(n.endAt)),YPe(e,i,a,o,s,"F",l,c)}function ICe(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function A$(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$c(n.unaryFilter.field);return On.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=$c(n.unaryFilter.field);return On.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=$c(n.unaryFilter.field);return On.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=$c(n.unaryFilter.field);return On.create(a,"!=",{nullValue:"NULL_VALUE"});default:return st()}}(t):t.fieldFilter!==void 0?function(n){return On.create($c(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fo.create(n.compositeFilter.filters.map(r=>A$(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return st()}}(n.compositeFilter.op))}(t):st()}function NCe(t){return xCe[t]}function DCe(t){return bCe[t]}function LCe(t){return wCe[t]}function Bc(t){return{fieldPath:t.canonicalString()}}function $c(t){return sr.fromServerFormat(t.fieldPath)}function M$(t){return t instanceof On?function(n){if(n.op==="=="){if(NL(n.value))return{unaryFilter:{field:Bc(n.field),op:"IS_NAN"}};if(IL(n.value))return{unaryFilter:{field:Bc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(NL(n.value))return{unaryFilter:{field:Bc(n.field),op:"IS_NOT_NAN"}};if(IL(n.value))return{unaryFilter:{field:Bc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bc(n.field),op:DCe(n.op),value:n.value}}}(t):t instanceof fo?function(n){const r=n.getFilters().map(i=>M$(i));return r.length===1?r[0]:{compositeFilter:{op:LCe(n.op),filters:r}}}(t):st()}function kCe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function P$(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n,r,i,o=ut.min(),a=ut.min(),s=fr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=s,this.expectedCount=l}withSequenceNumber(e){return new rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jCe{constructor(e){this.ht=e}}function UCe(t){const e=OCe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Hy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FCe{constructor(){this.ln=new VCe}addToCollectionParentIndex(e,n){return this.ln.add(n),pe.resolve()}getCollectionParents(e,n){return pe.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return pe.resolve()}deleteFieldIndex(e,n){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,n){return pe.resolve()}getDocumentsMatchingTarget(e,n){return pe.resolve(null)}getIndexType(e,n){return pe.resolve(0)}getFieldIndexes(e,n){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,n){return pe.resolve(Ms.min())}getMinOffsetFromCollectionGroup(e,n){return pe.resolve(Ms.min())}updateCollectionGroup(e,n,r){return pe.resolve()}updateIndexEntries(e,n){return pe.resolve()}}class VCe{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new $n(on.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $n(on.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zr{static withCacheSize(e){return new zr(e,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zr.DEFAULT_COLLECTION_PERCENTILE=10,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zr.DEFAULT=new zr(41943040,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zr.DISABLED=new zr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new wf(0)}static Qn(){return new wf(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL([t,e],[n,r]){const i=At(t,n);return i===0?At(e,r):i}class BCe{constructor(e){this.Gn=e,this.buffer=new $n(XL),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();XL(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $Ce{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Yf(n)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Kf(n)}await this.Yn(3e5)})}}class zCe{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return pe.resolve(__.oe);const r=new BCe(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(qL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qL):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,o,a,s,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,a=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,s=Date.now(),this.removeTargets(e,r,n))).next(f=>(o=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),Fc()<=Ct.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-u}ms
	Determined least recently used ${i} in `+(s-a)+`ms
	Removed ${o} targets in `+(l-s)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}}function HCe(t,e){return new zCe(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GCe{constructor(){this.changes=new ic(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?pe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WCe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qCe{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&yd(r.mutation,i,ro.empty(),Bn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Tt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Tt()){const i=Sl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let a=Hh();return o.forEach((s,l)=>{a=a.insert(s,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Sl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Tt()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,s)=>{n.set(a,s)})})}computeViews(e,n,r,i){let o=Aa();const a=vd(),s=function(){return vd()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof oc)?o=o.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),yd(u.mutation,c,u.mutation.getFieldMask(),Bn.now())):a.set(c.key,ro.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,u)=>a.set(c,u)),n.forEach((c,u)=>{var f;return s.set(c,new WCe(u,(f=a.get(c))!==null&&f!==void 0?f:null))}),s))}recalculateAndSaveOverlays(e,n){const r=vd();let i=new pn((a,s)=>a-s),o=Tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const s of a)s.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||ro.empty();u=s.applyToLocalView(c,u),r.set(l,u);const f=(i.get(s.batchId)||Tt()).add(l);i=i.insert(s.batchId,f)})}).next(()=>{const a=[],s=i.getReverseIterator();for(;s.hasNext();){const l=s.getNext(),c=l.key,u=l.value,f=u$();u.forEach(h=>{if(!o.has(h)){const d=g$(n.get(h),r.get(h));d!==null&&f.set(h,d),o=o.add(h)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,f))}return pe.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return Je.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):o$(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):pe.resolve(Sl());let s=-1,l=o;return a.next(c=>pe.forEach(c,(u,f)=>(s<f.largestBatchId&&(s=f.largestBatchId),o.get(u)?pe.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,Tt())).next(u=>({batchId:s,changes:c$(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Je(n)).next(r=>{let i=Hh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let a=Hh();return this.indexManager.getCollectionParents(e,o).next(s=>pe.forEach(s,l=>{const c=function(f,h){return new Qf(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((f,h)=>{a=a.insert(f,h)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(a=>{o.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,Tr.newInvalidDocument(u)))});let s=Hh();return a.forEach((l,c)=>{const u=o.get(l);u!==void 0&&yd(u.mutation,c,ro.empty(),Bn.now()),S_(n,c)&&(s=s.insert(l,c))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XCe{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return pe.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Oo(i.createTime)}}(n)),pe.resolve()}getNamedQuery(e,n){return pe.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:UCe(i.bundledQuery),readTime:Oo(i.readTime)}}(n)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KCe{constructor(){this.overlays=new pn(Je.comparator),this.Er=new Map}getOverlay(e,n){return pe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Sl();return pe.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.Tt(e,n,o)}),pe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Er.delete(r)),pe.resolve()}getOverlaysForCollection(e,n,r){const i=Sl(),o=n.length+1,a=new Je(n.child("")),s=this.overlays.getIteratorFrom(a);for(;s.hasNext();){const l=s.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new pn((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=o.get(c.largestBatchId);u===null&&(u=Sl(),o=o.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const s=Sl(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>s.set(c,u)),!(s.size()>=i)););return pe.resolve(s)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new pCe(n,r));let o=this.Er.get(n);o===void 0&&(o=Tt(),this.Er.set(n,o)),this.Er.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YCe{constructor(){this.sessionToken=fr.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.dr=new $n(Kn.Ar),this.Rr=new $n(Kn.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new Kn(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new Kn(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new Je(new on([])),r=new Kn(n,e),i=new Kn(n,e+1),o=[];return this.Rr.forEachInRange([r,i],a=>{this.gr(a),o.push(a.key)}),o}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new Je(new on([])),r=new Kn(n,e),i=new Kn(n,e+1);let o=Tt();return this.Rr.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new Kn(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Kn{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return Je.comparator(e.key,n.key)||At(e.br,n.br)}static Vr(e,n){return At(e.br,n.br)||Je.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QCe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new $n(Kn.Ar)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new dCe(o,n,r,i);this.mutationQueue.push(a);for(const s of i)this.vr=this.vr.add(new Kn(s.key,o)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return pe.resolve(a)}lookupMutationBatch(e,n){return pe.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),o=i<0?0:i;return pe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Kn(n,0),i=new Kn(n,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],a=>{const s=this.Cr(a.br);o.push(s)}),pe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $n(At);return n.forEach(i=>{const o=new Kn(i,0),a=new Kn(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,a],s=>{r=r.add(s.br)})}),pe.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Je.isDocumentKey(o)||(o=o.child(""));const a=new Kn(new Je(o),0);let s=new $n(At);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(s=s.add(l.br)),!0)},a),pe.resolve(this.Mr(s))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ut(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return pe.forEach(n.mutations,i=>{const o=new Kn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new Kn(n,0),i=this.vr.firstAfterOrEqual(r);return pe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZCe{constructor(e){this.Nr=e,this.docs=function(){return new pn(Je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,a=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return pe.resolve(r?r.document.mutableCopy():Tr.newInvalidDocument(n))}getEntries(e,n){let r=Aa();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Tr.newInvalidDocument(i))}),pe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Aa();const a=n.path,s=new Je(a.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||CPe(PPe(u),r)<=0||(i.has(u.key)||S_(n,u))&&(o=o.insert(u.key,u.mutableCopy()))}return pe.resolve(o)}getAllFromCollectionGroup(e,n,r,i){st()}Lr(e,n){return pe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new JCe(this)}getSize(e){return pe.resolve(this.size)}}class JCe extends GCe{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),pe.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2e{constructor(e){this.persistence=e,this.Br=new ic(n=>iM(n),oM),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.kr=0,this.qr=new uM,this.targetCount=0,this.Qr=wf.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),pe.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new wf(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,pe.resolve()}updateTargetData(e,n){return this.Un(n),pe.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Br.forEach((a,s)=>{s.sequenceNumber<=n&&r.get(s.targetId)===null&&(this.Br.delete(a),o.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),pe.waitFor(o).next(()=>i)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return pe.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),pe.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),pe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),pe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return pe.resolve(r)}containsKey(e,n){return pe.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(e,n){this.Kr={},this.overlays={},this.$r=new __(0),this.Ur=!1,this.Ur=!0,this.Wr=new YCe,this.referenceDelegate=e(this),this.Gr=new e2e(this),this.indexManager=new FCe,this.remoteDocumentCache=function(i){return new ZCe(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new jCe(n),this.jr=new XCe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new KCe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new QCe(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){Be("MemoryPersistence","Starting transaction:",e);const i=new t2e(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,n){return pe.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class t2e extends OPe{constructor(e){super(),this.currentSequenceNumber=e}}class fM{constructor(e){this.persistence=e,this.Zr=new uM,this.Xr=null}static ei(e){return new fM(e)}get ti(){if(this.Xr)return this.Xr;throw st()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),pe.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),pe.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.ti,r=>{const i=Je.fromPath(r);return this.ni(e,i).next(o=>{o||n.removeEntry(i,ut.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return pe.or([()=>pe.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class Xy{constructor(e,n){this.persistence=e,this.ri=new ic(r=>DPe(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=HCe(this,n)}static ei(e,n){return new Xy(e,n)}Hr(){}Jr(e){return pe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return pe.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?pe.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Lr(e,a=>this.ir(e,a,n).next(s=>{s||(r++,o.removeEntry(a,ut.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),pe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),pe.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),pe.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Xg(e.data.value)),n}ir(e,n,r){return pe.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return pe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=Tt(),i=Tt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new hM(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2e{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return eMe()?8:IPe(ZAe())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Xi(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.es(e,n,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new n2e;return this.ts(e,n,a).next(s=>{if(o.result=s,this.Hi)return this.ns(e,n,a,s.size)})}).next(()=>o.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(Fc()<=Ct.DEBUG&&Be("QueryEngine","SDK will not create cache indexes for query:",Vc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),pe.resolve()):(Fc()<=Ct.DEBUG&&Be("QueryEngine","Query:",Vc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Fc()<=Ct.DEBUG&&Be("QueryEngine","The SDK decides to create cache indexes for query:",Vc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ro(n))):pe.resolve())}Xi(e,n){if(jL(n))return pe.resolve(null);let r=Ro(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Hy(n,null,"F"),r=Ro(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const a=Tt(...o);return this.Zi.getDocuments(e,a).next(s=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.rs(n,s);return this.ss(n,c,a,l.readTime)?this.Xi(e,Hy(n,null,"F")):this.os(e,c,n,l)}))})))}es(e,n,r,i){return jL(n)||i.isEqual(ut.min())?pe.resolve(null):this.Zi.getDocuments(e,r).next(o=>{const a=this.rs(n,o);return this.ss(n,a,r,i)?pe.resolve(null):(Fc()<=Ct.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vc(n)),this.os(e,a,n,MPe(i,-1)).next(s=>s))})}rs(e,n){let r=new $n(s$(e));return n.forEach((i,o)=>{S_(e,o)&&(r=r.add(o))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,n,r){return Fc()<=Ct.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Vc(n)),this.Zi.getDocumentsMatchingQuery(e,n,Ms.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2e{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new pn(At),this.cs=new ic(o=>iM(o),oM),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qCe(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function o2e(t,e,n,r){return new i2e(t,e,n,r)}async function R$(t,e){const n=pt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],s=[];let l=Tt();for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of o){s.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ts:c,removedBatchIds:a,addedBatchIds:s}))})})}function a2e(t,e){const n=pt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.hs.newChangeBuffer({trackRemovals:!0});return function(s,l,c,u){const f=c.batch,h=f.keys();let d=pe.resolve();return h.forEach(v=>{d=d.next(()=>u.getEntry(l,v)).next(y=>{const g=c.docVersions.get(v);Ut(g!==null),y.version.compareTo(g)<0&&(f.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),d.next(()=>s.mutationQueue.removeMutationBatch(l,f))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(s){let l=Tt();for(let c=0;c<s.mutationResults.length;++c)s.mutationResults[c].transformResults.length>0&&(l=l.add(s.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function O$(t){const e=pt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function s2e(t,e){const n=pt(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const s=[];e.targetChanges.forEach((u,f)=>{const h=i.get(f);if(!h)return;s.push(n.Gr.removeMatchingKeys(o,u.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(o,u.addedDocuments,f)));let d=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?d=d.withResumeToken(fr.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):u.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(u.resumeToken,r)),i=i.insert(f,d),function(y,g,p){return y.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size>0}(h,d,u)&&s.push(n.Gr.updateTargetData(o,d))});let l=Aa(),c=Tt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,u))}),s.push(l2e(o,a,e.documentUpdates).next(u=>{l=u.Is,c=u.Es})),!r.isEqual(ut.min())){const u=n.Gr.getLastRemoteSnapshotVersion(o).next(f=>n.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));s.push(u)}return pe.waitFor(s).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(n.us=i,o))}function l2e(t,e,n){let r=Tt(),i=Tt();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let a=Aa();return n.forEach((s,l)=>{const c=o.get(s);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(s)),l.isNoDocument()&&l.version.isEqual(ut.min())?(e.removeEntry(s,l.readTime),a=a.insert(s,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(s,l)):Be("LocalStore","Ignoring outdated watch update for ",s,". Current version:",c.version," Watch version:",l.version)}),{Is:a,Es:i}})}function c2e(t,e){const n=pt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function u2e(t,e){const n=pt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(o=>o?(i=o,pe.resolve(i)):n.Gr.allocateTargetId(r).next(a=>(i=new rs(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function tE(t,e,n){const r=pt(t),i=r.us.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Yf(a))throw a;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function KL(t,e,n){const r=pt(t);let i=ut.min(),o=Tt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const f=pt(l),h=f.cs.get(u);return h!==void 0?pe.resolve(f.us.get(h)):f.Gr.getTargetData(c,u)}(r,a,Ro(e)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(a,s.targetId).next(l=>{o=l})}).next(()=>r._s.getDocumentsMatchingQuery(a,e,n?i:ut.min(),n?o:Tt())).next(s=>(f2e(r,ZPe(e),s),{documents:s,ds:o})))}function f2e(t,e,n){let r=t.ls.get(e)||ut.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ls.set(e,r)}class YL{constructor(){this.activeTargetIds=iCe()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class h2e{constructor(){this._o=new YL,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new YL,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2e{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pg=null;function jb(){return Pg===null?Pg=function(){return 268435456+Math.round(2147483648*Math.random())}():Pg++,"0x"+Pg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2e{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr="WebChannelConnection";class g2e extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(n,r,i,o,a){const s=jb(),l=this.No(n,r.toUriEncodedString());Be("RestConnection",`Sending RPC '${n}' ${s}:`,l,i);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(c,o,a),this.Bo(n,l,c,i).then(u=>(Be("RestConnection",`Received RPC '${n}' ${s}: `,u),u),u=>{throw yf("RestConnection",`RPC '${n}' ${s} failed with error: `,u,"url: ",l,"request:",i),u})}ko(n,r,i,o,a,s){return this.Oo(n,r,i,o,a)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xf}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,a)=>n[a]=o),i&&i.headers.forEach((o,a)=>n[a]=o)}No(n,r){const i=p2e[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){const o=jb();return new Promise((a,s)=>{const l=new $5;l.setWithCredentials(!0),l.listenOnce(z5.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case qg.NO_ERROR:const u=l.getResponseJson();Be(yr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),a(u);break;case qg.TIMEOUT:Be(yr,`RPC '${e}' ${o} timed out`),s(new He(ve.DEADLINE_EXCEEDED,"Request time out"));break;case qg.HTTP_ERROR:const f=l.getStatus();if(Be(yr,`RPC '${e}' ${o} failed with status:`,f,"response text:",l.getResponseText()),f>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const d=h==null?void 0:h.error;if(d&&d.status&&d.message){const v=function(g){const p=g.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(p)>=0?p:ve.UNKNOWN}(d.status);s(new He(v,d.message))}else s(new He(ve.UNKNOWN,"Server responded with status "+l.getStatus()))}else s(new He(ve.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Be(yr,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);Be(yr,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",c,r,15)})}qo(e,n,r){const i=jb(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=W5(),s=G5(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=o.join("");Be(yr,`Creating RPC '${e}' stream ${i}: ${u}`,l);const f=a.createWebChannel(u,l);let h=!1,d=!1;const v=new m2e({Eo:g=>{d?Be(yr,`Not sending because RPC '${e}' stream ${i} is closed:`,g):(h||(Be(yr,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),Be(yr,`RPC '${e}' stream ${i} sending:`,g),f.send(g))},Ao:()=>f.close()}),y=(g,p,x)=>{g.listen(p,_=>{try{x(_)}catch(T){setTimeout(()=>{throw T},0)}})};return y(f,zh.EventType.OPEN,()=>{d||(Be(yr,`RPC '${e}' stream ${i} transport opened.`),v.So())}),y(f,zh.EventType.CLOSE,()=>{d||(d=!0,Be(yr,`RPC '${e}' stream ${i} transport closed`),v.Do())}),y(f,zh.EventType.ERROR,g=>{d||(d=!0,yf(yr,`RPC '${e}' stream ${i} transport errored:`,g),v.Do(new He(ve.UNAVAILABLE,"The operation could not be completed")))}),y(f,zh.EventType.MESSAGE,g=>{var p;if(!d){const x=g.data[0];Ut(!!x);const _=x,T=(_==null?void 0:_.error)||((p=_[0])===null||p===void 0?void 0:p.error);if(T){Be(yr,`RPC '${e}' stream ${i} received error:`,T);const w=T.status;let M=function(E){const P=Pn[E];if(P!==void 0)return _$(P)}(w),b=T.message;M===void 0&&(M=ve.INTERNAL,b="Unknown error status: "+w+" with message "+T.message),d=!0,v.Do(new He(M,b)),f.close()}else Be(yr,`RPC '${e}' stream ${i} received:`,x),v.vo(x)}}),y(s,H5.STAT_EVENT,g=>{g.stat===GS.PROXY?Be(yr,`RPC '${e}' stream ${i} detected buffering proxy`):g.stat===GS.NOPROXY&&Be(yr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.bo()},0),v}}function Ub(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t){return new SCe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(e,n,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N${constructor(e,n,r,i,o,a,s,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=s,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new I$(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(Ta(n.toString()),Ta("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new He(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class v2e extends N${constructor(e,n,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=ACe(this.serializer,e),r=function(o){if(!("targetChange"in o))return ut.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?ut.min():a.readTime?Oo(a.readTime):ut.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=eE(this.serializer),n.addTarget=function(o,a){let s;const l=a.target;if(s=KS(l)?{documents:CCe(o,l)}:{query:RCe(o,l).ct},s.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){s.resumeToken=w$(o,a.resumeToken);const c=QS(o,a.expectedCount);c!==null&&(s.expectedCount=c)}else if(a.snapshotVersion.compareTo(ut.min())>0){s.readTime=qy(o,a.snapshotVersion.toTimestamp());const c=QS(o,a.expectedCount);c!==null&&(s.expectedCount=c)}return s}(this.serializer,e);const r=ICe(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=eE(this.serializer),n.removeTarget=e,this.c_(n)}}class y2e extends N${constructor(e,n,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Ut(!!e.streamToken),this.lastStreamToken=e.streamToken,Ut(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=PCe(e.writeResults,e.commitTime),r=Oo(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=eE(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>MCe(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2e extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new He(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Oo(e,ZS(n,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new He(ve.UNKNOWN,o.toString())})}ko(e,n,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.ko(e,ZS(n,r),i,a,s,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new He(ve.UNKNOWN,a.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class x2e{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Ta(n),this.C_=!1):Be("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2e{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(a=>{r.enqueueAndForget(async()=>{ac(this)&&(Be("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=pt(l);c.k_.add(4),await im(c),c.K_.set("Unknown"),c.k_.delete(4),await P_(c)}(this))})}),this.K_=new x2e(r,i)}}async function P_(t){if(ac(t))for(const e of t.q_)await e(!0)}async function im(t){for(const e of t.q_)await e(!1)}function D$(t,e){const n=pt(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),gM(n)?mM(n):Zf(n).s_()&&pM(n,e))}function dM(t,e){const n=pt(t),r=Zf(n);n.B_.delete(e),r.s_()&&L$(n,e),n.B_.size===0&&(r.s_()?r.a_():ac(n)&&n.K_.set("Unknown"))}function pM(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zf(t).V_(e)}function L$(t,e){t.U_.xe(e),Zf(t).m_(e)}function mM(t){t.U_=new _Ce({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Zf(t).start(),t.K_.F_()}function gM(t){return ac(t)&&!Zf(t).i_()&&t.B_.size>0}function ac(t){return pt(t).k_.size===0}function k$(t){t.U_=void 0}async function w2e(t){t.K_.set("Online")}async function S2e(t){t.B_.forEach((e,n)=>{pM(t,e)})}async function E2e(t,e){k$(t),gM(t)?(t.K_.O_(e),mM(t)):t.K_.set("Unknown")}async function T2e(t,e,n){if(t.K_.set("Online"),e instanceof b$&&e.state===2&&e.cause)try{await async function(i,o){const a=o.cause;for(const s of o.targetIds)i.B_.has(s)&&(await i.remoteSyncer.rejectListen(s,a),i.B_.delete(s),i.U_.removeTarget(s))}(t,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ky(t,r)}else if(e instanceof Qg?t.U_.$e(e):e instanceof x$?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(ut.min()))try{const r=await O$(t.localStore);n.compareTo(r)>=0&&await function(o,a){const s=o.U_.it(a);return s.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=o.B_.get(c);u&&o.B_.set(c,u.withResumeToken(l.resumeToken,a))}}),s.targetMismatches.forEach((l,c)=>{const u=o.B_.get(l);if(!u)return;o.B_.set(l,u.withResumeToken(fr.EMPTY_BYTE_STRING,u.snapshotVersion)),L$(o,l);const f=new rs(u.target,l,c,u.sequenceNumber);pM(o,f)}),o.remoteSyncer.applyRemoteEvent(s)}(t,n)}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),await Ky(t,r)}}async function Ky(t,e,n){if(!Yf(e))throw e;t.k_.add(1),await im(t),t.K_.set("Offline"),n||(n=()=>O$(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Be("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await P_(t)})}function j$(t,e){return e().catch(n=>Ky(t,n,e))}async function C_(t){const e=pt(t),n=Os(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;A2e(e);)try{const i=await c2e(e.localStore,r);if(i===null){e.L_.length===0&&n.a_();break}r=i.batchId,M2e(e,i)}catch(i){await Ky(e,i)}U$(e)&&F$(e)}function A2e(t){return ac(t)&&t.L_.length<10}function M2e(t,e){t.L_.push(e);const n=Os(t);n.s_()&&n.f_&&n.g_(e.mutations)}function U$(t){return ac(t)&&!Os(t).i_()&&t.L_.length>0}function F$(t){Os(t).start()}async function P2e(t){Os(t).w_()}async function C2e(t){const e=Os(t);for(const n of t.L_)e.g_(n.mutations)}async function R2e(t,e,n){const r=t.L_.shift(),i=sM.from(r,e,n);await j$(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await C_(t)}async function O2e(t,e){e&&Os(t).f_&&await async function(r,i){if(function(a){return gCe(a)&&a!==ve.ABORTED}(i.code)){const o=r.L_.shift();Os(r).__(),await j$(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await C_(r)}}(t,e),U$(t)&&F$(t)}async function ZL(t,e){const n=pt(t);n.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=ac(n);n.k_.add(3),await im(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await P_(n)}async function I2e(t,e){const n=pt(t);e?(n.k_.delete(2),await P_(n)):e||(n.k_.add(2),await im(n),n.K_.set("Unknown"))}function Zf(t){return t.W_||(t.W_=function(n,r,i){const o=pt(n);return o.b_(),new v2e(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Ro:w2e.bind(null,t),mo:S2e.bind(null,t),po:E2e.bind(null,t),R_:T2e.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),gM(t)?mM(t):t.K_.set("Unknown")):(await t.W_.stop(),k$(t))})),t.W_}function Os(t){return t.G_||(t.G_=function(n,r,i){const o=pt(n);return o.b_(),new y2e(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:P2e.bind(null,t),po:O2e.bind(null,t),p_:C2e.bind(null,t),y_:R2e.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await C_(t)):(await t.G_.stop(),t.L_.length>0&&(Be("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const a=Date.now()+r,s=new vM(e,n,a,i,o);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yM(t,e){if(Ta("AsyncQueue",`${e}: ${t}`),Yf(t))return new He(ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{static emptySet(e){return new Mu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Je.comparator(n.key,r.key):(n,r)=>Je.comparator(n.key,r.key),this.keyedMap=Hh(),this.sortedSet=new pn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Mu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Mu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(){this.z_=new pn(Je.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):st():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Sf{constructor(e,n,r,i,o,a,s,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=s,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const a=[];return n.forEach(s=>{a.push({type:0,doc:s})}),new Sf(e,n,Mu.emptySet(n),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&w_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2e{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class D2e{constructor(){this.queries=ek(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=pt(n),o=i.queries;i.queries=ek(),o.forEach((a,s)=>{for(const l of s.J_)l.onError(r)})})(this,new He(ve.ABORTED,"Firestore shutting down"))}}function ek(){return new ic(t=>a$(t),w_)}async function L2e(t,e){const n=pt(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new N2e,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=await n.onListen(i,!0);break;case 1:o.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const s=yM(a,`Initialization of query '${Vc(e.query)}' failed`);return void e.onError(s)}n.queries.set(i,o),o.J_.push(e),e.ea(n.onlineState),o.H_&&e.ta(o.H_)&&_M(n)}async function k2e(t,e){const n=pt(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const a=o.J_.indexOf(e);a>=0&&(o.J_.splice(a,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function j2e(t,e){const n=pt(t);let r=!1;for(const i of e){const o=i.query,a=n.queries.get(o);if(a){for(const s of a.J_)s.ta(i)&&(r=!0);a.H_=i}}r&&_M(n)}function U2e(t,e,n){const r=pt(t),i=r.queries.get(e);if(i)for(const o of i.J_)o.onError(n);r.queries.delete(e)}function _M(t){t.X_.forEach(e=>{e.next()})}var nE,tk;(tk=nE||(nE={})).na="default",tk.Cache="cache";class F2e{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Sf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Sf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==nE.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(e){this.key=e}}class B${constructor(e){this.key=e}}class V2e{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Tt(),this.mutatedKeys=Tt(),this.Va=s$(e),this.ma=new Mu(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new JL,i=n?n.ma:this.ma;let o=n?n.mutatedKeys:this.mutatedKeys,a=i,s=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{const h=i.get(u),d=S_(this.query,f)?f:null,v=!!h&&this.mutatedKeys.has(h.key),y=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let g=!1;h&&d?h.data.isEqual(d.data)?v!==y&&(r.track({type:3,doc:d}),g=!0):this.ya(h,d)||(r.track({type:2,doc:d}),g=!0,(l&&this.Va(d,l)>0||c&&this.Va(d,c)<0)&&(s=!0)):!h&&d?(r.track({type:0,doc:d}),g=!0):h&&!d&&(r.track({type:1,doc:h}),g=!0,(l||c)&&(s=!0)),g&&(d?(a=a.add(d),o=y?o.add(u):o.delete(u)):(a=a.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{ma:a,pa:r,ss:s,mutatedKeys:o}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const a=e.pa.j_();a.sort((u,f)=>function(d,v){const y=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return y(d)-y(v)}(u.type,f.type)||this.Va(u.doc,f.doc)),this.wa(r),i=i!=null&&i;const s=n&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,c=l!==this.Aa;return this.Aa=l,a.length!==0||c?{snapshot:new Sf(this.query,e.ma,o,a,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:s}:{ba:s}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new JL,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Tt(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new B$(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new V$(r))}),n}va(e){this.da=e.ds,this.Ra=Tt();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Sf.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class B2e{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $2e{constructor(e){this.key=e,this.Fa=!1}}class z2e{constructor(e,n,r,i,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ma={},this.xa=new ic(s=>a$(s),w_),this.Oa=new Map,this.Na=new Set,this.La=new pn(Je.comparator),this.Ba=new Map,this.ka=new uM,this.qa={},this.Qa=new Map,this.Ka=wf.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function H2e(t,e,n=!0){const r=q$(t);let i;const o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=await $$(r,e,n,!0),i}async function G2e(t,e){const n=q$(t);await $$(n,e,!0,!1)}async function $$(t,e,n,r){const i=await u2e(t.localStore,Ro(e)),o=i.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let s;return r&&(s=await W2e(t,e,o,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&D$(t.remoteStore,i),s}async function W2e(t,e,n,r,i){t.Ua=(f,h,d)=>async function(y,g,p,x){let _=g.view.ga(p);_.ss&&(_=await KL(y.localStore,g.query,!1).then(({documents:b})=>g.view.ga(b,_)));const T=x&&x.targetChanges.get(g.targetId),w=x&&x.targetMismatches.get(g.targetId)!=null,M=g.view.applyChanges(_,y.isPrimaryClient,T,w);return rk(y,g.targetId,M.ba),M.snapshot}(t,f,h,d);const o=await KL(t.localStore,e,!0),a=new V2e(e,o.ds),s=a.ga(o.documents),l=rm.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=a.applyChanges(s,t.isPrimaryClient,l);rk(t,n,c.ba);const u=new B2e(e,n,a);return t.xa.set(e,u),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),c.snapshot}async function q2e(t,e,n){const r=pt(t),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(a=>!w_(a,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await tE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&dM(r.remoteStore,i.targetId),rE(r,i.targetId)}).catch(Kf)):(rE(r,i.targetId),await tE(r.localStore,i.targetId,!0))}async function X2e(t,e){const n=pt(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dM(n.remoteStore,r.targetId))}async function K2e(t,e,n){const r=nRe(t);try{const i=await function(a,s){const l=pt(a),c=Bn.now(),u=s.reduce((d,v)=>d.add(v.key),Tt());let f,h;return l.persistence.runTransaction("Locally write mutations","readwrite",d=>{let v=Aa(),y=Tt();return l.hs.getEntries(d,u).next(g=>{v=g,v.forEach((p,x)=>{x.isValidDocument()||(y=y.add(p))})}).next(()=>l.localDocuments.getOverlayedDocuments(d,v)).next(g=>{f=g;const p=[];for(const x of s){const _=fCe(x,f.get(x.key).overlayedDocument);_!=null&&p.push(new oc(x.key,_,Q5(_.value.mapValue),pa.exists(!0)))}return l.mutationQueue.addMutationBatch(d,c,p,s)}).next(g=>{h=g;const p=g.applyToLocalDocumentSet(f,y);return l.documentOverlayCache.saveOverlays(d,g.batchId,p)})}).then(()=>({batchId:h.batchId,changes:c$(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,s,l){let c=a.qa[a.currentUser.toKey()];c||(c=new pn(At)),c=c.insert(s,l),a.qa[a.currentUser.toKey()]=c}(r,i.batchId,n),await om(r,i.changes),await C_(r.remoteStore)}catch(i){const o=yM(i,"Failed to persist write");n.reject(o)}}async function z$(t,e){const n=pt(t);try{const r=await s2e(n.localStore,e);e.targetChanges.forEach((i,o)=>{const a=n.Ba.get(o);a&&(Ut(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.Fa=!0:i.modifiedDocuments.size>0?Ut(a.Fa):i.removedDocuments.size>0&&(Ut(a.Fa),a.Fa=!1))}),await om(n,r,e)}catch(r){await Kf(r)}}function nk(t,e,n){const r=pt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((o,a)=>{const s=a.view.ea(e);s.snapshot&&i.push(s.snapshot)}),function(a,s){const l=pt(a);l.onlineState=s;let c=!1;l.queries.forEach((u,f)=>{for(const h of f.J_)h.ea(s)&&(c=!0)}),c&&_M(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Y2e(t,e,n){const r=pt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),o=i&&i.key;if(o){let a=new pn(Je.comparator);a=a.insert(o,Tr.newNoDocument(o,ut.min()));const s=Tt().add(o),l=new A_(ut.min(),new Map,new pn(At),a,s);await z$(r,l),r.La=r.La.remove(o),r.Ba.delete(e),xM(r)}else await tE(r.localStore,e,!1).then(()=>rE(r,e,n)).catch(Kf)}async function Q2e(t,e){const n=pt(t),r=e.batch.batchId;try{const i=await a2e(n.localStore,e);G$(n,r,null),H$(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await om(n,i)}catch(i){await Kf(i)}}async function Z2e(t,e,n){const r=pt(t);try{const i=await function(a,s){const l=pt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,s).next(f=>(Ut(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,s)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);G$(r,e,n),H$(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await om(r,i)}catch(i){await Kf(i)}}function H$(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function G$(t,e,n){const r=pt(t);let i=r.qa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function rE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||W$(t,r)})}function W$(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(dM(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),xM(t))}function rk(t,e,n){for(const r of n)r instanceof V$?(t.ka.addReference(r.key,e),J2e(t,r)):r instanceof B$?(Be("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||W$(t,r.key)):st()}function J2e(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(Be("SyncEngine","New document in limbo: "+n),t.Na.add(r),xM(t))}function xM(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new Je(on.fromString(e)),r=t.Ka.next();t.Ba.set(r,new $2e(n)),t.La=t.La.insert(n,r),D$(t.remoteStore,new rs(Ro(i$(n.path)),r,"TargetPurposeLimboResolution",__.oe))}}async function om(t,e,n){const r=pt(t),i=[],o=[],a=[];r.xa.isEmpty()||(r.xa.forEach((s,l)=>{a.push(r.Ua(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=hM.zi(l.targetId,c);o.push(f)}}))}),await Promise.all(a),r.Ma.R_(i),await async function(l,c){const u=pt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>pe.forEach(c,h=>pe.forEach(h.Wi,d=>u.persistence.referenceDelegate.addReference(f,h.targetId,d)).next(()=>pe.forEach(h.Gi,d=>u.persistence.referenceDelegate.removeReference(f,h.targetId,d)))))}catch(f){if(!Yf(f))throw f;Be("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const h=f.targetId;if(!f.fromCache){const d=u.us.get(h),v=d.snapshotVersion,y=d.withLastLimboFreeSnapshotVersion(v);u.us=u.us.insert(h,y)}}}(r.localStore,o))}async function eRe(t,e){const n=pt(t);if(!n.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=await R$(n.localStore,e);n.currentUser=e,function(o,a){o.Qa.forEach(s=>{s.forEach(l=>{l.reject(new He(ve.CANCELLED,a))})}),o.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await om(n,r.Ts)}}function tRe(t,e){const n=pt(t),r=n.Ba.get(e);if(r&&r.Fa)return Tt().add(r.key);{let i=Tt();const o=n.Oa.get(e);if(!o)return i;for(const a of o){const s=n.xa.get(a);i=i.unionWith(s.view.fa)}return i}}function q$(t){const e=pt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=z$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tRe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Y2e.bind(null,e),e.Ma.R_=j2e.bind(null,e.eventManager),e.Ma.Wa=U2e.bind(null,e.eventManager),e}function nRe(t){const e=pt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q2e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Z2e.bind(null,e),e}class Yy{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=M_(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return o2e(this.persistence,new r2e,e.initialUser,this.serializer)}ja(e){return new C$(fM.ei,this.serializer)}za(e){return new h2e}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yy.provider={build:()=>new Yy};class rRe extends Yy{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Ut(this.persistence.referenceDelegate instanceof Xy);const r=this.persistence.referenceDelegate.garbageCollector;return new $Ce(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?zr.withCacheSize(this.cacheSizeBytes):zr.DEFAULT;return new C$(r=>Xy.ei(r,n),this.serializer)}}class iE{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eRe.bind(null,this.syncEngine),await I2e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new D2e}()}createDatastore(e){const n=M_(e.databaseInfo.databaseId),r=function(o){return new g2e(o)}(e.databaseInfo);return function(o,a,s,l){return new _2e(o,a,s,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,a,s){return new b2e(r,i,o,a,s)}(this.localStore,this.datastore,e.asyncQueue,n=>nk(this.syncEngine,n,0),function(){return QL.p()?new QL:new d2e}())}createSyncEngine(e,n){return function(i,o,a,s,l,c,u){const f=new z2e(i,o,a,s,l,c);return u&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=pt(i);Be("RemoteStore","RemoteStore shutting down."),o.k_.add(5),await im(o),o.Q_.shutdown(),o.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}iE.provider={build:()=>new iE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iRe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Ta("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oRe{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=br.UNAUTHENTICATED,this.clientId=X5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{Be("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Be("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=yM(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Fb(t,e){t.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await R$(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ik(t,e){t.asyncQueue.verifyOperationInProgress();const n=await aRe(t);Be("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ZL(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ZL(e.remoteStore,i)),t._onlineComponents=e}async function aRe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Be("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fb(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ve.FAILED_PRECONDITION||i.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;yf("Error using user provided cache. Falling back to memory cache: "+n),await Fb(t,new Yy)}}else Be("FirestoreClient","Using default OfflineComponentProvider"),await Fb(t,new rRe(void 0));return t._offlineComponents}async function X$(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Be("FirestoreClient","Using user provided OnlineComponentProvider"),await ik(t,t._uninitializedComponentsProvider._online)):(Be("FirestoreClient","Using default OnlineComponentProvider"),await ik(t,new iE))),t._onlineComponents}function sRe(t){return X$(t).then(e=>e.syncEngine)}async function lRe(t){const e=await X$(t),n=e.eventManager;return n.onListen=H2e.bind(null,e.syncEngine),n.onUnlisten=q2e.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=G2e.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=X2e.bind(null,e.syncEngine),n}function cRe(t,e,n={}){const r=new ys;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,s,l,c){const u=new iRe({next:h=>{u.eu(),a.enqueueAndForget(()=>k2e(o,f)),h.fromCache&&l.source==="server"?c.reject(new He(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),f=new F2e(s,u,{includeMetadataChanges:!0,ua:!0});return L2e(o,f)}(await lRe(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K$(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y$(t,e,n){if(!n)throw new He(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function uRe(t,e,n,r){if(e===!0&&r===!0)throw new He(ve.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ak(t){if(!Je.isDocumentKey(t))throw new He(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sk(t){if(Je.isDocumentKey(t))throw new He(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function R_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":st()}function Qy(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new He(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=R_(t);throw new He(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new He(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new He(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uRe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=K$((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new He(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new He(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new He(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class O_{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lk({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new He(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lk(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yPe;switch(r.type){case"firstParty":return new wPe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new He(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ok.get(n);r&&(Be("ComponentProvider","Removing Datastore"),ok.delete(n),r.terminate())}(this),Promise.resolve()}}function fRe(t,e,n,r={}){var i;const o=(t=Qy(t,O_))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&yf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let s,l;if(typeof r.mockUserToken=="string")s=r.mockUserToken,l=br.MOCK_USER;else{s=QAe(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new He(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new br(c)}t._authCredentials=new _Pe(new q5(s,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vs(this.firestore,e,this._query)}}class ki{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ki(this.firestore,e,this._key)}}class _s extends Vs{constructor(e,n,r){super(e,n,i$(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ki(this.firestore,null,new Je(e))}withConverter(e){return new _s(this.firestore,e,this._path)}}function Q$(t,e,...n){if(t=vf(t),Y$("collection","path",e),t instanceof O_){const r=on.fromString(e,...n);return sk(r),new _s(t,null,r)}{if(!(t instanceof ki||t instanceof _s))throw new He(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(on.fromString(e,...n));return sk(r),new _s(t.firestore,null,r)}}function hRe(t,e,...n){if(t=vf(t),arguments.length===1&&(e=X5.newId()),Y$("doc","path",e),t instanceof O_){const r=on.fromString(e,...n);return ak(r),new ki(t,null,new Je(r))}{if(!(t instanceof ki||t instanceof _s))throw new He(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(on.fromString(e,...n));return ak(r),new ki(t.firestore,t instanceof _s?t.converter:null,new Je(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new I$(this,"async_queue_retry"),this.fu=()=>{const r=Ub();r&&Be("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=Ub();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=Ub();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new ys;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Yf(e))throw e;Be("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(a){let s=a.message||"";return a.stack&&(s=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),s}(r);throw Ta("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=vM.createAndSchedule(this,e,n,r,o=>this.Su(o));return this.du.push(i),i}pu(){this.Au&&st()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class bM extends O_{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ck,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ck(e),this._firestoreClient=void 0,await e}}}function dRe(t,e){const n=typeof t=="object"?t:aPe(),r=typeof t=="string"?t:"(default)",i=nPe(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=KAe("firestore");o&&fRe(i,...o)}return i}function Z$(t){if(t._terminated)throw new He(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pRe(t),t._firestoreClient}function pRe(t){var e,n,r;const i=t._freezeSettings(),o=function(s,l,c,u){return new jPe(s,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,K$(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new oRe(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(s){const l=s==null?void 0:s._online.build();return{_offline:s==null?void 0:s._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ef(fr.fromBase64String(e))}catch(n){throw new He(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ef(fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new He(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new He(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new He(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mRe=/^__.*__$/;class gRe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new oc(e,this.data,this.fieldMask,n,this.fieldTransforms):new nm(e,this.data,n,this.fieldTransforms)}}function ez(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class TM{constructor(e,n,r,i,o,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new TM(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Zy(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(ez(this.Mu)&&mRe.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class vRe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||M_(e)}$u(e,n,r,i=!1){return new TM({Mu:e,methodName:n,Ku:r,path:sr.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tz(t){const e=t._freezeSettings(),n=M_(t._databaseId);return new vRe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yRe(t,e,n,r,i,o={}){const a=t.$u(o.merge||o.mergeFields?2:0,e,n,i);iz("Data must be an object, but it was:",a,r);const s=nz(r,a);let l,c;if(o.merge)l=new ro(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const u=[];for(const f of o.mergeFields){const h=xRe(e,f,n);if(!a.contains(h))throw new He(ve.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);wRe(u,h)||u.push(h)}l=new ro(u),c=a.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=a.fieldTransforms;return new gRe(new Ri(s),l,c)}function _Re(t,e,n,r=!1){return AM(n,t.$u(r?4:3,e))}function AM(t,e){if(rz(t=vf(t)))return iz("Unsupported field value:",e,t),nz(t,e);if(t instanceof J$)return function(r,i){if(!ez(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const o=[];let a=0;for(const s of r){let l=AM(s,i.ku(a));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),a++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=vf(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oCe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Bn.fromDate(r);return{timestampValue:qy(i.serializer,o)}}if(r instanceof Bn){const o=new Bn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qy(i.serializer,o)}}if(r instanceof SM)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ef)return{bytesValue:w$(i.serializer,r._byteString)};if(r instanceof ki){const o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.qu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:cM(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof EM)return function(a,s){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw s.qu("VectorValues must only contain numeric values.");return aM(s.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${R_(r)}`)}(t,e)}function nz(t,e){const n={};return K5(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rc(t,(r,i)=>{const o=AM(i,e.Ou(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function rz(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Bn||t instanceof SM||t instanceof Ef||t instanceof ki||t instanceof J$||t instanceof EM)}function iz(t,e,n){if(!rz(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=R_(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function xRe(t,e,n){if((e=vf(e))instanceof wM)return e._internalPath;if(typeof e=="string")return oz(t,e);throw Zy("Field path arguments must be of type string or ",t,!1,void 0,n)}const bRe=new RegExp("[~\\*/\\[\\]]");function oz(t,e,n){if(e.search(bRe)>=0)throw Zy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wM(...e.split("."))._internalPath}catch{throw Zy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zy(t,e,n,r,i){const o=r&&!r.isEmpty(),a=i!==void 0;let s=`Function ${e}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new He(ve.INVALID_ARGUMENT,s+t+l)}function wRe(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ki(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SRe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(MM("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SRe extends az{data(){return super.data()}}function MM(t,e){return typeof e=="string"?oz(t,e):e instanceof wM?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ERe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new He(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PM{}class CM extends PM{}function TRe(t,e,...n){let r=[];e instanceof PM&&r.push(e),r=r.concat(n),function(o){const a=o.filter(l=>l instanceof OM).length,s=o.filter(l=>l instanceof RM).length;if(a>1||a>0&&s>0)throw new He(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class RM extends CM{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new RM(e,n,r)}_apply(e){const n=this._parse(e);return sz(e._query,n),new Vs(e.firestore,e.converter,YS(e._query,n))}_parse(e){const n=tz(e.firestore);return function(o,a,s,l,c,u,f){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new He(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){fk(f,u);const d=[];for(const v of f)d.push(uk(l,o,v));h={arrayValue:{values:d}}}else h=uk(l,o,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||fk(f,u),h=_Re(s,a,f,u==="in"||u==="not-in");return On.create(c,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class OM extends PM{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new OM(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:fo.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let a=i;const s=o.getFlattenedFilters();for(const l of s)sz(a,l),a=YS(a,l)}(e._query,n),new Vs(e.firestore,e.converter,YS(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class IM extends CM{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new IM(e,n)}_apply(e){const n=function(i,o,a){if(i.startAt!==null)throw new He(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new He(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Np(o,a)}(e._query,this._field,this._direction);return new Vs(e.firestore,e.converter,function(i,o){const a=i.explicitOrderBy.concat([o]);return new Qf(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function ARe(t,e="asc"){const n=e,r=MM("orderBy",t);return IM._create(r,n)}class NM extends CM{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new NM(e,n,r)}_apply(e){return new Vs(e.firestore,e.converter,Hy(e._query,this._limit,this._limitType))}}function MRe(t){return NM._create("limit",t,"F")}function uk(t,e,n){if(typeof(n=vf(n))=="string"){if(n==="")throw new He(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!o$(e)&&n.indexOf("/")!==-1)throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(on.fromString(n));if(!Je.isDocumentKey(r))throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return OL(t,new Je(r))}if(n instanceof ki)return OL(t,n._key);throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${R_(n)}.`)}function fk(t,e){if(!Array.isArray(t)||t.length===0)throw new He(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sz(t,e){const n=function(i,o){for(const a of i)for(const s of a.getFlattenedFilters())if(o.indexOf(s.op)>=0)return s.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new He(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new He(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class PRe{convertValue(e,n="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw st()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return rc(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>bn(a.doubleValue));return new EM(o)}convertGeoPoint(e){return new SM(bn(e.latitude),bn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=b_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Rp(e));default:return null}}convertTimestamp(e){const n=Ps(e);return new Bn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=on.fromString(e);Ut(P$(r));const i=new Op(r.get(1),r.get(3)),o=new Je(r.popFirst(5));return i.isEqual(n)||Ta(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CRe(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class RRe extends az{constructor(e,n,r,i,o,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(MM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Zg extends RRe{data(e={}){return super.data(e)}}class ORe{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Cg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Zg(this._firestore,this._userDataWriter,r.key,r,new Cg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new He(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(s=>{const l=new Zg(i._firestore,i._userDataWriter,s.doc.key,s.doc,new Cg(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>o||s.type!==3).map(s=>{const l=new Zg(i._firestore,i._userDataWriter,s.doc.key,s.doc,new Cg(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return s.type!==0&&(c=a.indexOf(s.doc.key),a=a.delete(s.doc.key)),s.type!==1&&(a=a.add(s.doc),u=a.indexOf(s.doc.key)),{type:IRe(s.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function IRe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}class NRe extends PRe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ef(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ki(this.firestore,null,n)}}function DRe(t){t=Qy(t,Vs);const e=Qy(t.firestore,bM),n=Z$(e),r=new NRe(e);return ERe(t._query),cRe(n,t._query).then(i=>new ORe(e,r,t,i))}function LRe(t,e){const n=Qy(t.firestore,bM),r=hRe(t),i=CRe(t.converter,e);return kRe(n,[yRe(tz(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,pa.exists(!1))]).then(()=>r)}function kRe(t,e){return function(r,i){const o=new ys;return r.asyncQueue.enqueueAndForget(async()=>K2e(await sRe(r),i,o)),o.promise}(Z$(t),e)}(function(e,n=!0){(function(i){Xf=i})(oPe),By(new Mp("firestore",(r,{instanceIdentifier:i,options:o})=>{const a=r.getProvider("app").getImmediate(),s=new bM(new xPe(r.getProvider("auth-internal")),new EPe(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new He(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Op(c.options.projectId,u)}(a,i),a);return o=Object.assign({useFetchStreams:n},o),s._setSettings(o),s},"PUBLIC").setMultipleInstances(!0)),Au(TL,"4.7.5",e),Au(TL,"4.7.5","esm2017")})();const jRe={apiKey:"AIzaSyBQa_lv8rGDt-zK8EbazhZu3KdoK-FmQgE",authDomain:"globe-rating-system.firebaseapp.com",projectId:"globe-rating-system",storageBucket:"globe-rating-system.firebasestorage.app",messagingSenderId:"213598069837",appId:"1:213598069837:web:b59d5d3c5a79d0640aa804"},URe=U5(jRe),lz=dRe(URe),FRe=({isOpen:t,onClose:e})=>{const[n,r]=V.useState(0),[i,o]=V.useState(0),[a,s]=V.useState(""),[l,c]=V.useState(""),[u,f]=V.useState(!1),h=async d=>{if(d.preventDefault(),!n||n<1||n>5){alert("Por favor selecciona una calificación válida");return}if(!a.trim()||a.length<2){alert("Por favor ingresa un nombre válido");return}if(!l.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)){alert("Por favor ingresa un email válido");return}const v=localStorage.getItem("lastRating");if(v&&Date.now()-parseInt(v)<24*60*60*1e3){alert("Solo puedes enviar una valoración por día");return}try{await LRe(Q$(lz,"ratings"),{name:a,email:l,rating:n,timestamp:new Date,url:window.location.href}),localStorage.setItem("lastRating",Date.now().toString()),f(!0),setTimeout(()=>{f(!1),e(),r(0),s(""),c("")},2e3)}catch(y){console.error("Error:",y),alert("Hubo un error al enviar tu valoración")}};return t?S.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:S.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-black w-full max-w-md m-4 rounded-xl shadow-2xl relative border border-gray-800",children:[S.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:S.jsx(Pa,{size:24})}),u?S.jsxs("div",{className:"p-6 text-center",children:[S.jsx("div",{className:"text-6xl mb-4",children:"⭐"}),S.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"¡Gracias por tu valoración!"}),S.jsx("p",{className:"text-gray-400",children:"Tu opinión nos ayuda a mejorar"})]}):S.jsxs("div",{className:"p-6",children:[S.jsx("h2",{className:"text-2xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Valora tu Experiencia"}),S.jsxs("form",{onSubmit:h,className:"space-y-6",children:[S.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(d=>S.jsx("button",{type:"button",className:"transform transition-all duration-300 hover:scale-110",onMouseEnter:()=>o(d),onMouseLeave:()=>o(0),onClick:()=>r(d),children:S.jsx(lu,{size:32,className:`${d<=(i||n)?"fill-yellow-400 text-yellow-400":"text-gray-600"} transition-colors duration-300`})},d))}),S.jsxs("div",{className:"space-y-4",children:[S.jsx("input",{type:"text",placeholder:"Tu nombre",value:a,onChange:d=>s(d.target.value),className:"w-full px-4 py-2 bg-black/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-white"}),S.jsx("input",{type:"email",placeholder:"Tu correo electrónico",value:l,onChange:d=>c(d.target.value),className:"w-full px-4 py-2 bg-black/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-white"})]}),S.jsx("button",{type:"submit",className:"w-full py-3 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg font-semibold hover:opacity-90 transition-opacity text-white",children:"Enviar Valoración"})]})]})]})}):null},VRe=({isVisible:t,onClose:e})=>{const[n,r]=V.useState([]),[i,o]=V.useState({totalVotes:0,averageRating:0,lastWeekVotes:0,distribution:{1:0,2:0,3:0,4:0,5:0}});V.useEffect(()=>{t&&a()},[t]);const a=async()=>{try{const s=Q$(lz,"ratings"),l=TRe(s,ARe("timestamp","desc"),MRe(100)),c=await DRe(l),u=[];let f=0,h=0;const d={1:0,2:0,3:0,4:0,5:0},v=new Date(Date.now()-7*24*60*60*1e3);let y=0;c.forEach(g=>{var _,T;const p=g.data(),x=Number(p.rating);!isNaN(x)&&x>=1&&x<=5&&(f+=x,h++,d[x]++,(((_=p.timestamp)==null?void 0:_.toDate())||new Date)>v&&y++),u.push({id:g.id,...p,timestamp:((T=p.timestamp)==null?void 0:T.toDate())||new Date,rating:x})}),r(u),o({totalVotes:h,averageRating:h>0?f/h:0,lastWeekVotes:y,distribution:d})}catch(s){console.error("Error fetching ratings:",s),o({totalVotes:0,averageRating:0,lastWeekVotes:0,distribution:{1:0,2:0,3:0,4:0,5:0}})}};return t?S.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:S.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-black w-full max-w-6xl m-4 rounded-xl shadow-2xl relative border border-gray-800 max-h-[90vh] overflow-hidden",children:[S.jsx("div",{className:"sticky top-0 z-10 bg-gradient-to-br from-gray-900 to-black p-6 border-b border-gray-800",children:S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx(lu,{className:"w-8 h-8 text-yellow-400"}),S.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Valoraciones y Opiniones"})]}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-800 rounded-lg transition-colors",children:S.jsx(Pa,{size:24,className:"text-gray-400"})})]})}),S.jsxs("div",{className:"p-6 space-y-8 overflow-y-auto max-h-[calc(90vh-80px)]",children:[S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[S.jsx("div",{className:"bg-black/40 p-6 rounded-xl border border-blue-500/30",children:S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx(cw,{className:"w-8 h-8 text-blue-400"}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-gray-400",children:"Total Valoraciones"}),S.jsx("p",{className:"text-3xl font-bold text-white",children:i.totalVotes})]})]})}),S.jsx("div",{className:"bg-black/40 p-6 rounded-xl border border-yellow-500/30",children:S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx(lu,{className:"w-8 h-8 text-yellow-400"}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-gray-400",children:"Calificación Promedio"}),S.jsx("p",{className:"text-3xl font-bold text-white",children:i.averageRating?i.averageRating.toFixed(1):"0.0"})]})]})}),S.jsx("div",{className:"bg-black/40 p-6 rounded-xl border border-green-500/30",children:S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx(kJ,{className:"w-8 h-8 text-green-400"}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-gray-400",children:"Última Semana"}),S.jsx("p",{className:"text-3xl font-bold text-white",children:i.lastWeekVotes})]})]})})]}),S.jsxs("div",{className:"bg-black/40 p-6 rounded-xl border border-gray-800",children:[S.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Distribución de Estrellas"}),S.jsx("div",{className:"space-y-3",children:[5,4,3,2,1].map(s=>{const l=i.distribution[s]||0,c=i.totalVotes>0?l/i.totalVotes*100:0;return S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsxs("div",{className:"flex items-center gap-1 w-20",children:[S.jsx(lu,{className:"w-4 h-4 text-yellow-400",fill:"currentColor"}),S.jsx("span",{className:"text-gray-400",children:s})]}),S.jsx("div",{className:"flex-1 h-4 bg-gray-800 rounded-full overflow-hidden",children:S.jsx("div",{className:"h-full bg-yellow-400/50 transition-all duration-500",style:{width:`${c}%`}})}),S.jsx("div",{className:"w-32 text-right",children:S.jsxs("span",{className:"text-gray-400",children:[l," (",c.toFixed(1),"%)"]})})]},s)})})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx("h3",{className:"text-xl font-bold text-white",children:"Valoraciones Recientes"}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(s=>S.jsx("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800",children:S.jsx("div",{className:"flex justify-between items-start",children:S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[S.jsx("span",{className:"font-medium text-white",children:s.name}),S.jsx("span",{className:"text-sm text-gray-500",children:s.timestamp.toLocaleDateString()})]}),S.jsx("div",{className:"flex gap-1 mb-2",children:[...Array(5)].map((l,c)=>S.jsx(lu,{size:16,className:c<s.rating?"text-yellow-400 fill-yellow-400":"text-gray-600"},c))}),S.jsx("p",{className:"text-sm text-gray-400",children:s.email})]})})},s.id))})]})]})]})}):null},BRe=({isMobile:t,onToggleMenu:e,setShowGlobal:n,setShowSimulation:r,setShowPredictions:i,setShowGlobalPredictions:o,setShowDictionary:a,setShowEducational:s,setIsRatingModalOpen:l})=>{const[c,u]=V.useState(!1),[f,h]=V.useState(!1);V.useEffect(()=>{const y=setInterval(()=>{c||(h(!0),setTimeout(()=>h(!1),1e3))},5e3);return()=>clearInterval(y)},[c]);const d=()=>{u(!c),e&&e(!c)},v=y=>{y(!0),u(!1)};return S.jsxs("div",{className:"fixed z-50 left-4 bottom-4",children:[S.jsxs("button",{onClick:d,className:`
          relative flex items-center justify-center 
          w-16 h-16 rounded-full 
          bg-gradient-to-r from-blue-500 to-purple-600
          text-white shadow-lg 
          hover:from-blue-600 hover:to-purple-700
          transition-all duration-300
          ${f?"animate-pulse scale-110":""}
          group
        `,"aria-label":"Menú de opciones",children:[c?S.jsx(Pa,{size:28}):S.jsx(HJ,{size:28}),!c&&S.jsx("div",{className:"absolute left-20 hidden group-hover:flex items-center",children:S.jsx("div",{className:"bg-black/90 text-white px-3 py-2 rounded-lg whitespace-nowrap text-sm",children:"Click para ver opciones"})}),!c&&S.jsx("div",{className:"absolute inset-0 rounded-full",children:S.jsx("div",{className:"absolute inset-0 rounded-full bg-white/30 animate-ping"})})]}),c&&S.jsxs("div",{className:`
          absolute left-0 bottom-20 py-2 w-72
          bg-gradient-to-br from-black/95 to-gray-900/95
          backdrop-blur-lg rounded-2xl shadow-2xl
          border border-gray-700/50
          transform transition-all duration-300 ease-in-out
        `,children:[S.jsx("div",{className:"absolute -bottom-2 left-6 w-4 h-4 bg-gray-900 transform rotate-45"}),S.jsxs("button",{onClick:()=>v(n),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[S.jsx(Hd,{size:20,className:"text-blue-400"}),S.jsx("span",{children:"Estadísticas Globales"})]}),S.jsxs("button",{onClick:()=>v(r),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[S.jsx($u,{size:20,className:"text-green-400"}),S.jsx("span",{children:"Simulador"})]}),S.jsxs("button",{onClick:()=>v(i),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[S.jsx(UJ,{size:20,className:"text-purple-400"}),S.jsx("span",{children:"Predicciones"})]}),S.jsxs("button",{onClick:()=>v(o),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[S.jsx(Hd,{size:20,className:"text-cyan-400"}),S.jsx("span",{children:"Predicciones Globales"})]}),S.jsxs("button",{onClick:()=>v(a),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[S.jsx(FJ,{size:20,className:"text-indigo-400"}),S.jsx("span",{children:"Fuente de datos"})]}),S.jsxs("button",{onClick:()=>v(s),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[S.jsx(jF,{size:20,className:"text-green-500"}),S.jsx("span",{children:"Guía del Proyecto"})]}),S.jsxs("button",{onClick:()=>v(l),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[S.jsx(lu,{size:20,className:"text-yellow-400"}),S.jsx("span",{children:"Valorar Experiencia"})]})]})]})},$Re=({country:t,isMobile:e})=>S.jsxs("div",{className:`fixed ${e?"top-16 left-2":"top-24 left-4"} z-50`,children:[S.jsxs("div",{className:"flex flex-col items-center gap-2",children:[S.jsx("div",{className:`flag-container ${e?"w-32 h-20":"w-40 h-24"} relative overflow-hidden rounded-lg shadow-lg`,children:S.jsx("div",{className:"flag-static w-full h-full",style:{background:`url(https://flagcdn.com/w160/${t.code.toLowerCase()}.png) no-repeat center center`,backgroundSize:"contain",backgroundColor:"#f0f0f0"}})}),S.jsx("div",{className:"text-content",children:S.jsx("h1",{className:`text-white ${e?"text-2xl":"text-3xl"} font-bold tracking-wider bg-black bg-opacity-50 px-4 py-2 rounded text-center`,children:t.name})})]}),S.jsx("style",{jsx:!0,children:`
                .flag-container {
                    transform-style: preserve-3d;
                    perspective: 1000px;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                }

                .flag-container::after {
                    content: '';
                    position: absolute;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    background: linear-gradient(
                        45deg,
                        rgba(0,0,0,0.2) 0%,
                        rgba(0,0,0,0) 70%
                    );
                    pointer-events: none;
                    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
                }
            `})]}),zRe=()=>{const t=V.useRef(null),[e,n]=V.useState(null),r=V.useRef(null),i=V.useRef(null),o=V.useRef([]),[a,s]=V.useState(1e-4),[l,c]=V.useState(!0),[u,f]=V.useState(!1),[h,d]=V.useState(!1),[v,y]=V.useState(!1),[g,p]=V.useState(!1),[x,_]=V.useState(!1),[T,w]=V.useState(!1),[M,b]=V.useState(!0),[A,E]=V.useState(!1),[P,R]=V.useState(!1),N=V.useRef({x:0,y:0}),O=V.useRef(!1),D=V.useRef(null),L=Li({maxWidth:768}),W=Li({minWidth:769,maxWidth:1024}),$=V.useCallback(()=>L?{earthRadius:3,cameraDistance:10,markerSize:.05,minDistance:5,maxDistance:15,starCount:5e3,starSize:.08}:W?{earthRadius:4,cameraDistance:12,markerSize:.08,minDistance:6,maxDistance:20,starCount:7500,starSize:.09}:{earthRadius:5,cameraDistance:15,markerSize:.1,minDistance:7,maxDistance:25,starCount:1e4,starSize:.1},[L,W]);V.useEffect(()=>{var Q;const K=$(),z=new Qj;z.background=new Rt(0);const q=new si(L?60:75,window.innerWidth/window.innerHeight,.1,1e3),ee=new cT({antialias:!L,alpha:!0,powerPreference:"high-performance"});ee.setSize(window.innerWidth,window.innerHeight),ee.setPixelRatio(L?1:window.devicePixelRatio),(Q=t.current)==null||Q.appendChild(ee.domElement);const me=new ko,_e=new Zj({color:16777215,size:K.starSize,transparent:!0,opacity:1,sizeAttenuation:!0}),Ne=[];for(let le=0;le<K.starCount;le++){const ue=(Math.random()-.5)*2e3,ne=(Math.random()-.5)*2e3,ge=(Math.random()-.5)*2e3;Ne.push(ue,ne,ge)}me.setAttribute("position",new Di(Ne,3));const We=new Float32Array(Ne.length/3);for(let le=0;le<We.length;le++)We[le]=Math.random()*Math.PI*2;me.setAttribute("blinkOffset",new Di(We,1));const Ue=new dX(me,_e);z.add(Ue);const fe=new Jj,Re=new gX(fe),Ee=L?"2k":"8k",H=Re.load(`textures/${Ee}_earth_daymap.jpg`),lt=Re.load(`textures/${Ee}_earth_nightmap.jpg`),be=Re.load(`textures/${Ee}_earth_normal_map.jpg`),Le=Re.load(`textures/${Ee}_earth_clouds.jpg`);H.colorSpace=jn,lt.colorSpace=jn;const ke=new xa({uniforms:{dayTexture:{value:H},nightTexture:{value:lt},normalMap:{value:be},sunDirection:{value:new te(1,0,0)},normalScale:{value:new gt(.5,.5)}},vertexShader:`
                varying vec2 vUv;
                varying vec3 vNormal;
                varying vec3 vPosition;

                void main() {
                    vUv = uv;
                    vNormal = normalize(normalMatrix * normal);
                    vPosition = position;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                }
            `,fragmentShader:`
                uniform sampler2D dayTexture;
                uniform sampler2D nightTexture;
                uniform sampler2D normalMap;
                uniform vec3 sunDirection;
                uniform vec2 normalScale;

                varying vec2 vUv;
                varying vec3 vNormal;

                void main() {
                    vec3 normalMap = texture2D(normalMap, vUv).xyz * 2.0 - 1.0;
                    vec3 mixNormal = normalize(vNormal + normalMap.xyz * vec3(normalScale, 1.0));

                    float sunDot = dot(mixNormal, sunDirection);
                    float dayMix = smoothstep(-0.2, 0.2, sunDot);

                    vec4 dayColor = texture2D(dayTexture, vUv);
                    vec4 nightColor = texture2D(nightTexture, vUv);

                    gl_FragColor = mix(nightColor, dayColor, dayMix);
                }
            `}),mt=new ml(K.earthRadius,L?64:128,L?64:128),Ye=new Gr(mt,ke);i.current=Ye,z.add(Ye);const Ze=new ml(K.earthRadius*1.006,L?64:128,L?64:128),ht=new k2({map:Le,transparent:!0,opacity:.4,depthWrite:!1,blending:N1}),Mt=new Gr(Ze,ht);z.add(Mt);const jt=new ml(K.earthRadius*1.03,L?64:128,L?64:128),F=new k2({color:9681119,transparent:!0,opacity:.15,side:Vr}),k=new Gr(jt,F);z.add(k);const re=new Uh;z.add(re),o.current=[];function ye(le,ue,ne){const ge=(90-le)*(Math.PI/180),Ie=(ue+180)*(Math.PI/180);return new te(-ne*Math.sin(ge)*Math.cos(Ie),ne*Math.cos(ge),ne*Math.sin(ge)*Math.sin(Ie))}sK.countries.forEach(le=>{const ue=new ml(K.markerSize,L?8:16,L?8:16),ne=new oT({color:65280,transparent:!0,opacity:.6}),ge=new Gr(ue,ne),Ie=ye(le.lat,le.lng,K.earthRadius*1.02);ge.position.copy(Ie),ge.userData.countryData=le,re.add(ge),o.current.push(ge)});const he=new xX(4210752,L?.7:.6);z.add(he);const xe=new _X(16777215,L?1:1.2);xe.position.set(5,3,5),z.add(xe),q.position.z=K.cameraDistance;const Ce=new tU(q,ee.domElement);r.current=Ce,Ce.enableDamping=!0,Ce.dampingFactor=L?.07:.05,Ce.rotateSpeed=L?.5:.3,Ce.enableZoom=!0,Ce.minDistance=K.minDistance,Ce.maxDistance=K.maxDistance,Ce.autoRotate=l,Ce.autoRotateSpeed=L?.3:.5,Ce.enablePan=!1,Ce.minPolarAngle=Math.PI*.2,Ce.maxPolarAngle=Math.PI*.8,Ce.touches={ONE:Ga.ROTATE,TWO:Ga.DOLLY_ROTATE};const Te=new bX,Pe=new gt,Y=le=>{le.preventDefault(),O.current=!0;const ue=le.touches[0];N.current={x:ue.clientX,y:ue.clientY,time:Date.now()},D.current&&clearTimeout(D.current)},Se=le=>{O.current&&(le.preventDefault(),r.current&&(r.current.autoRotate=!1))},de=le=>{le.preventDefault();const ue=le.changedTouches[0],ne=N.current.time,Ie=Date.now()-ne,rt=Math.abs(ue.clientX-N.current.x),Ot=Math.abs(ue.clientY-N.current.y),En=Math.sqrt(rt*rt+Ot*Ot);if(Ie<200&&En<10){const dt=ue.clientX,Tn=ue.clientY;Pe.x=dt/window.innerWidth*2-1,Pe.y=-(Tn/window.innerHeight)*2+1,Te.setFromCamera(Pe,q);const Dn=Te.intersectObjects(o.current,!0);if(Dn.length>0){const vi=Dn[0].object.userData.countryData;vi&&(n(vi),Ge(vi,q,Ce))}}D.current=setTimeout(()=>{r.current&&l&&(r.current.autoRotate=!0)},1500),O.current=!1},Qe=le=>{le.preventDefault();const ue=le.clientX,ne=le.clientY;Pe.x=ue/window.innerWidth*2-1,Pe.y=-(ne/window.innerHeight)*2+1,Te.setFromCamera(Pe,q);const ge=Te.intersectObjects(o.current,!0);if(ge.length>0){const Ie=ge[0].object.userData.countryData;Ie&&(n(Ie),Ge(Ie,q,Ce))}},Ge=(le,ue,ne)=>{ne.autoRotate=!1;const ge=ye(le.lat,le.lng,K.earthRadius),Ie=L?K.earthRadius+2:K.earthRadius+4,rt=ye(le.lat,le.lng,Ie);new TX(ue.position).to({x:rt.x,y:rt.y,z:rt.z},L?1e3:1500).easing(wu.Cubic.InOut).onUpdate(()=>{ue.lookAt(ge),ne.target.copy(ge)}).start(),o.current.forEach(Ot=>{const En=Ot.userData.countryData.code===le.code;Ot.material.color.setHex(En?16711680:65280),Ot.material.opacity=En?1:.6})},qe=()=>{const le=window.innerWidth,ue=window.innerHeight;q.aspect=le/ue,q.updateProjectionMatrix(),ee.setSize(le,ue);const ne=$();q.position.z=ne.cameraDistance,Ce.minDistance=ne.minDistance,Ce.maxDistance=ne.maxDistance};L?(ee.domElement.addEventListener("touchstart",Y,{passive:!1}),ee.domElement.addEventListener("touchmove",Se,{passive:!1}),ee.domElement.addEventListener("touchend",de,{passive:!1}),ee.domElement.style.touchAction="none"):window.addEventListener("click",Qe),window.addEventListener("resize",qe,{passive:!0}),window.addEventListener("orientationchange",qe);let Ve=0,De=null;const vt=()=>{if(De=requestAnimationFrame(vt),Ve+=L?8e-4:.001,!L||Ve%2===0){const ne=Ue.geometry.attributes.position,ge=Ue.geometry.attributes.blinkOffset;for(let Ie=0;Ie<ne.count;Ie++){const rt=Math.sin(Ve*3+ge.array[Ie])*.3+.7;Ue.material.opacity=rt}}Ue.rotation.y+=L?5e-5:1e-4,Ue.rotation.x+=L?5e-5:1e-4;const le=Math.cos(Ve),ue=Math.sin(Ve);if(ke.uniforms.sunDirection.value.set(le,0,ue),xe.position.set(le*5,3,ue*5),l){const ne=L?a*.75:a;Ye.rotation.y+=ne,Mt.rotation.y+=ne*1.1,k.rotation.y+=ne,re.rotation.y+=ne}AX(),Ce.update(),ee.render(z,q)};return vt(),()=>{De&&cancelAnimationFrame(De),L?(ee.domElement.removeEventListener("touchstart",Y),ee.domElement.removeEventListener("touchmove",Se),ee.domElement.removeEventListener("touchend",de),D.current&&clearTimeout(D.current)):window.removeEventListener("click",Qe),window.removeEventListener("resize",qe),window.removeEventListener("orientationchange",qe),z.traverse(le=>{le instanceof Gr&&(le.geometry.dispose(),le.material.map&&le.material.map.dispose(),le.material.dispose())}),ee.dispose(),t.current&&t.current.contains(ee.domElement)&&t.current.removeChild(ee.domElement)}},[L,W,l,a,$]);const B=K=>{const z=L?5e-5:1e-4;s(q=>q+K*z)},X=()=>{c(K=>!K)};return S.jsxs("div",{className:"relative w-full h-screen overflow-hidden select-none",children:[S.jsx("div",{ref:t,className:"w-full h-screen bg-black touch-manipulation",style:{cursor:L?"default":"grab",overscrollBehavior:"none",WebkitTapHighlightColor:"transparent"}}),S.jsx(tee,{isMobile:L}),e&&S.jsx($Re,{country:e,isMobile:L}),S.jsx(JJ,{onPause:X,isPlaying:l,isMobile:L,onSpeedChange:B}),S.jsx(nee,{isMobile:L}),S.jsx(BRe,{isMobile:L,setShowGlobal:f,setShowSimulation:d,setShowPredictions:y,setShowGlobalPredictions:p,setShowDictionary:w,setShowEducational:_,setIsRatingModalOpen:R,setshowRatingsDashboard:E}),S.jsx(RAe,{isVisible:u,onClose:()=>f(!1),isMobile:L,className:`fixed transition-all duration-300 ease-in-out ${L?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),S.jsx(OAe,{isVisible:h,onClose:()=>d(!1),isMobile:L,className:`fixed transition-all duration-300 ease-in-out ${L?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),S.jsx(IAe,{isVisible:v,onClose:()=>y(!1),isMobile:L,className:`fixed transition-all duration-300 ease-in-out ${L?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),S.jsx(DAe,{isVisible:g,onClose:()=>p(!1),isMobile:L,className:`fixed transition-all duration-300 ease-in-out ${L?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),S.jsx(kAe,{isVisible:x,onClose:()=>_(!1),isMobile:L,className:`fixed transition-all duration-300 ease-in-out ${L?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),S.jsx(jAe,{isVisible:T,onClose:()=>w(!1),isMobile:L,className:`fixed transition-all duration-300 ease-in-out ${L?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),S.jsx(FRe,{isOpen:P,onClose:()=>R(!1),isMobile:L,className:L?"w-[90vw] max-w-sm mx-auto":"w-96"}),S.jsx(VRe,{isVisible:A,onClose:()=>E(!1),isMobile:L,className:`fixed transition-all duration-300 ease-in-out ${L?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),M&&S.jsx(FAe,{onComplete:()=>b(!1),isMobile:L}),e&&S.jsx(CAe,{country:e,controlsRef:r,onClose:()=>{n(null),r.current&&(r.current.autoRotate=!0)},isMobile:L,className:`fixed transition-all duration-300 ease-in-out ${L?"inset-x-0 bottom-0 h-[70vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`})]})};function HRe(){return S.jsx("div",{className:"w-full h-full",children:S.jsx(zRe,{})})}Vb.createRoot(document.getElementById("root")).render(S.jsx(G.StrictMode,{children:S.jsx(HRe,{})}));
