(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var ym=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ft(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _k={exports:{}},r0={},xk={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jp=Symbol.for("react.element"),Oz=Symbol.for("react.portal"),Iz=Symbol.for("react.fragment"),Nz=Symbol.for("react.strict_mode"),Dz=Symbol.for("react.profiler"),Lz=Symbol.for("react.provider"),kz=Symbol.for("react.context"),jz=Symbol.for("react.forward_ref"),Uz=Symbol.for("react.suspense"),Fz=Symbol.for("react.memo"),Vz=Symbol.for("react.lazy"),hP=Symbol.iterator;function Bz(t){return t===null||typeof t!="object"?null:(t=hP&&t[hP]||t["@@iterator"],typeof t=="function"?t:null)}var bk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wk=Object.assign,Sk={};function Mf(t,e,n){this.props=t,this.context=e,this.refs=Sk,this.updater=n||bk}Mf.prototype.isReactComponent={};Mf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ek(){}Ek.prototype=Mf.prototype;function cE(t,e,n){this.props=t,this.context=e,this.refs=Sk,this.updater=n||bk}var uE=cE.prototype=new Ek;uE.constructor=cE;wk(uE,Mf.prototype);uE.isPureReactComponent=!0;var dP=Array.isArray,Tk=Object.prototype.hasOwnProperty,fE={current:null},Ak={key:!0,ref:!0,__self:!0,__source:!0};function Mk(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Tk.call(e,r)&&!Ak.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:jp,type:t,key:o,ref:a,props:i,_owner:fE.current}}function $z(t,e){return{$$typeof:jp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hE(t){return typeof t=="object"&&t!==null&&t.$$typeof===jp}function zz(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var pP=/\/+/g;function $_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zz(""+t.key):e.toString(36)}function Og(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case jp:case Oz:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+$_(a,0):r,dP(i)?(n="",t!=null&&(n=t.replace(pP,"$&/")+"/"),Og(i,e,n,"",function(c){return c})):i!=null&&(hE(i)&&(i=$z(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(pP,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",dP(t))for(var s=0;s<t.length;s++){o=t[s];var l=r+$_(o,s);a+=Og(o,e,n,l,i)}else if(l=Bz(t),typeof l=="function")for(t=l.call(t),s=0;!(o=t.next()).done;)o=o.value,l=r+$_(o,s++),a+=Og(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function _m(t,e,n){if(t==null)return t;var r=[],i=0;return Og(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Hz(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Br={current:null},Ig={transition:null},Gz={ReactCurrentDispatcher:Br,ReactCurrentBatchConfig:Ig,ReactCurrentOwner:fE};function Pk(){throw Error("act(...) is not supported in production builds of React.")}Et.Children={map:_m,forEach:function(t,e,n){_m(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _m(t,function(){e++}),e},toArray:function(t){return _m(t,function(e){return e})||[]},only:function(t){if(!hE(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Et.Component=Mf;Et.Fragment=Iz;Et.Profiler=Dz;Et.PureComponent=cE;Et.StrictMode=Nz;Et.Suspense=Uz;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gz;Et.act=Pk;Et.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=wk({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=fE.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)Tk.call(e,l)&&!Ak.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:jp,type:t.type,key:i,ref:o,props:r,_owner:a}};Et.createContext=function(t){return t={$$typeof:kz,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Lz,_context:t},t.Consumer=t};Et.createElement=Mk;Et.createFactory=function(t){var e=Mk.bind(null,t);return e.type=t,e};Et.createRef=function(){return{current:null}};Et.forwardRef=function(t){return{$$typeof:jz,render:t}};Et.isValidElement=hE;Et.lazy=function(t){return{$$typeof:Vz,_payload:{_status:-1,_result:t},_init:Hz}};Et.memo=function(t,e){return{$$typeof:Fz,type:t,compare:e===void 0?null:e}};Et.startTransition=function(t){var e=Ig.transition;Ig.transition={};try{t()}finally{Ig.transition=e}};Et.unstable_act=Pk;Et.useCallback=function(t,e){return Br.current.useCallback(t,e)};Et.useContext=function(t){return Br.current.useContext(t)};Et.useDebugValue=function(){};Et.useDeferredValue=function(t){return Br.current.useDeferredValue(t)};Et.useEffect=function(t,e){return Br.current.useEffect(t,e)};Et.useId=function(){return Br.current.useId()};Et.useImperativeHandle=function(t,e,n){return Br.current.useImperativeHandle(t,e,n)};Et.useInsertionEffect=function(t,e){return Br.current.useInsertionEffect(t,e)};Et.useLayoutEffect=function(t,e){return Br.current.useLayoutEffect(t,e)};Et.useMemo=function(t,e){return Br.current.useMemo(t,e)};Et.useReducer=function(t,e,n){return Br.current.useReducer(t,e,n)};Et.useRef=function(t){return Br.current.useRef(t)};Et.useState=function(t){return Br.current.useState(t)};Et.useSyncExternalStore=function(t,e,n){return Br.current.useSyncExternalStore(t,e,n)};Et.useTransition=function(){return Br.current.useTransition()};Et.version="18.3.1";xk.exports=Et;var V=xk.exports;const W=Ft(V);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wz=V,qz=Symbol.for("react.element"),Xz=Symbol.for("react.fragment"),Kz=Object.prototype.hasOwnProperty,Yz=Wz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qz={key:!0,ref:!0,__self:!0,__source:!0};function Ck(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Kz.call(e,r)&&!Qz.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:qz,type:t,key:o,ref:a,props:i,_owner:Yz.current}}r0.Fragment=Xz;r0.jsx=Ck;r0.jsxs=Ck;_k.exports=r0;var S=_k.exports,Hb={},Rk={exports:{}},mi={},Ok={exports:{}},Ik={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,q){var K=F.length;F.push(q);e:for(;0<K;){var z=K-1>>>1,X=F[z];if(0<i(X,q))F[z]=q,F[K]=X,K=z;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var q=F[0],K=F.pop();if(K!==q){F[0]=K;e:for(var z=0,X=F.length,ee=X>>>1;z<ee;){var me=2*(z+1)-1,_e=F[me],Ne=me+1,We=F[Ne];if(0>i(_e,K))Ne<X&&0>i(We,_e)?(F[z]=We,F[Ne]=K,z=Ne):(F[z]=_e,F[me]=K,z=me);else if(Ne<X&&0>i(We,K))F[z]=We,F[Ne]=K,z=Ne;else break e}}return q}function i(F,q){var K=F.sortIndex-q.sortIndex;return K!==0?K:F.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var l=[],c=[],u=1,f=null,h=3,d=!1,y=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(F){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=F)r(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(c)}}function T(F){if(v=!1,_(F),!y)if(n(l)!==null)y=!0,H(w);else{var q=n(c);q!==null&&B(T,q.startTime-F)}}function w(F,q){y=!1,v&&(v=!1,p(A),A=-1),d=!0;var K=h;try{for(_(q),f=n(l);f!==null&&(!(f.expirationTime>q)||F&&!R());){var z=f.callback;if(typeof z=="function"){f.callback=null,h=f.priorityLevel;var X=z(f.expirationTime<=q);q=t.unstable_now(),typeof X=="function"?f.callback=X:f===n(l)&&r(l),_(q)}else r(l);f=n(l)}if(f!==null)var ee=!0;else{var me=n(c);me!==null&&B(T,me.startTime-q),ee=!1}return ee}finally{f=null,h=K,d=!1}}var M=!1,b=null,A=-1,E=5,P=-1;function R(){return!(t.unstable_now()-P<E)}function N(){if(b!==null){var F=t.unstable_now();P=F;var q=!0;try{q=b(!0,F)}finally{q?O():(M=!1,b=null)}}else M=!1}var O;if(typeof x=="function")O=function(){x(N)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,k=D.port2;D.port1.onmessage=N,O=function(){k.postMessage(null)}}else O=function(){g(N,0)};function H(F){b=F,M||(M=!0,O())}function B(F,q){A=g(function(){F(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){y||d||(y=!0,H(w))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(h){case 1:case 2:case 3:var q=3;break;default:q=h}var K=h;h=q;try{return F()}finally{h=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var K=h;h=F;try{return q()}finally{h=K}},t.unstable_scheduleCallback=function(F,q,K){var z=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?z+K:z):K=z,F){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=K+X,F={id:u++,callback:q,priorityLevel:F,startTime:K,expirationTime:X,sortIndex:-1},K>z?(F.sortIndex=K,e(c,F),n(l)===null&&F===n(c)&&(v?(p(A),A=-1):v=!0,B(T,K-z))):(F.sortIndex=X,e(l,F),y||d||(y=!0,H(w))),F},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(F){var q=h;return function(){var K=h;h=q;try{return F.apply(this,arguments)}finally{h=K}}}})(Ik);Ok.exports=Ik;var Zz=Ok.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jz=V,di=Zz;function we(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nk=new Set,xd={};function Kl(t,e){Ou(t,e),Ou(t+"Capture",e)}function Ou(t,e){for(xd[t]=e,t=0;t<e.length;t++)Nk.add(e[t])}var ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gb=Object.prototype.hasOwnProperty,e6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mP={},gP={};function t6(t){return Gb.call(gP,t)?!0:Gb.call(mP,t)?!1:e6.test(t)?gP[t]=!0:(mP[t]=!0,!1)}function n6(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function r6(t,e,n,r){if(e===null||typeof e>"u"||n6(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $r(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var ur={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ur[t]=new $r(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ur[e]=new $r(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ur[t]=new $r(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ur[t]=new $r(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ur[t]=new $r(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ur[t]=new $r(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ur[t]=new $r(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ur[t]=new $r(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ur[t]=new $r(t,5,!1,t.toLowerCase(),null,!1,!1)});var dE=/[\-:]([a-z])/g;function pE(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dE,pE);ur[e]=new $r(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dE,pE);ur[e]=new $r(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dE,pE);ur[e]=new $r(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ur[t]=new $r(t,1,!1,t.toLowerCase(),null,!1,!1)});ur.xlinkHref=new $r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ur[t]=new $r(t,1,!1,t.toLowerCase(),null,!0,!0)});function mE(t,e,n,r){var i=ur.hasOwnProperty(e)?ur[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(r6(e,n,i,r)&&(n=null),r||i===null?t6(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Pa=Jz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xm=Symbol.for("react.element"),Gc=Symbol.for("react.portal"),Wc=Symbol.for("react.fragment"),gE=Symbol.for("react.strict_mode"),Wb=Symbol.for("react.profiler"),Dk=Symbol.for("react.provider"),Lk=Symbol.for("react.context"),vE=Symbol.for("react.forward_ref"),qb=Symbol.for("react.suspense"),Xb=Symbol.for("react.suspense_list"),yE=Symbol.for("react.memo"),za=Symbol.for("react.lazy"),kk=Symbol.for("react.offscreen"),vP=Symbol.iterator;function hh(t){return t===null||typeof t!="object"?null:(t=vP&&t[vP]||t["@@iterator"],typeof t=="function"?t:null)}var pn=Object.assign,z_;function Lh(t){if(z_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);z_=e&&e[1]||""}return`
`+z_+t}var H_=!1;function G_(t,e){if(!t||H_)return"";H_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=s);break}}}finally{H_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Lh(t):""}function i6(t){switch(t.tag){case 5:return Lh(t.type);case 16:return Lh("Lazy");case 13:return Lh("Suspense");case 19:return Lh("SuspenseList");case 0:case 2:case 15:return t=G_(t.type,!1),t;case 11:return t=G_(t.type.render,!1),t;case 1:return t=G_(t.type,!0),t;default:return""}}function Kb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wc:return"Fragment";case Gc:return"Portal";case Wb:return"Profiler";case gE:return"StrictMode";case qb:return"Suspense";case Xb:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Lk:return(t.displayName||"Context")+".Consumer";case Dk:return(t._context.displayName||"Context")+".Provider";case vE:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yE:return e=t.displayName||null,e!==null?e:Kb(t.type)||"Memo";case za:e=t._payload,t=t._init;try{return Kb(t(e))}catch{}}return null}function o6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kb(e);case 8:return e===gE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function a6(t){var e=jk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bm(t){t._valueTracker||(t._valueTracker=a6(t))}function Uk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jk(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function nv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Yb(t,e){var n=e.checked;return pn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function yP(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Fk(t,e){e=e.checked,e!=null&&mE(t,"checked",e,!1)}function Qb(t,e){Fk(t,e);var n=xs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zb(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zb(t,e.type,xs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _P(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zb(t,e,n){(e!=="number"||nv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var kh=Array.isArray;function vu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Jb(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(we(91));return pn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(we(92));if(kh(n)){if(1<n.length)throw Error(we(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xs(n)}}function Vk(t,e){var n=xs(e.value),r=xs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function bP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Bk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function e1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Bk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wm,$k=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wm=wm||document.createElement("div"),wm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},s6=["Webkit","ms","Moz","O"];Object.keys(Xh).forEach(function(t){s6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xh[e]=Xh[t]})});function zk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xh.hasOwnProperty(t)&&Xh[t]?(""+e).trim():e+"px"}function Hk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=zk(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var l6=pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function t1(t,e){if(e){if(l6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(we(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(we(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(we(61))}if(e.style!=null&&typeof e.style!="object")throw Error(we(62))}}function n1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var r1=null;function _E(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var i1=null,yu=null,_u=null;function wP(t){if(t=Vp(t)){if(typeof i1!="function")throw Error(we(280));var e=t.stateNode;e&&(e=l0(e),i1(t.stateNode,t.type,e))}}function Gk(t){yu?_u?_u.push(t):_u=[t]:yu=t}function Wk(){if(yu){var t=yu,e=_u;if(_u=yu=null,wP(t),e)for(t=0;t<e.length;t++)wP(e[t])}}function qk(t,e){return t(e)}function Xk(){}var W_=!1;function Kk(t,e,n){if(W_)return t(e,n);W_=!0;try{return qk(t,e,n)}finally{W_=!1,(yu!==null||_u!==null)&&(Xk(),Wk())}}function wd(t,e){var n=t.stateNode;if(n===null)return null;var r=l0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(we(231,e,typeof n));return n}var o1=!1;if(ga)try{var dh={};Object.defineProperty(dh,"passive",{get:function(){o1=!0}}),window.addEventListener("test",dh,dh),window.removeEventListener("test",dh,dh)}catch{o1=!1}function c6(t,e,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Kh=!1,rv=null,iv=!1,a1=null,u6={onError:function(t){Kh=!0,rv=t}};function f6(t,e,n,r,i,o,a,s,l){Kh=!1,rv=null,c6.apply(u6,arguments)}function h6(t,e,n,r,i,o,a,s,l){if(f6.apply(this,arguments),Kh){if(Kh){var c=rv;Kh=!1,rv=null}else throw Error(we(198));iv||(iv=!0,a1=c)}}function Yl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Yk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function SP(t){if(Yl(t)!==t)throw Error(we(188))}function d6(t){var e=t.alternate;if(!e){if(e=Yl(t),e===null)throw Error(we(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return SP(i),t;if(o===r)return SP(i),e;o=o.sibling}throw Error(we(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(we(189))}}if(n.alternate!==r)throw Error(we(190))}if(n.tag!==3)throw Error(we(188));return n.stateNode.current===n?t:e}function Qk(t){return t=d6(t),t!==null?Zk(t):null}function Zk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Zk(t);if(e!==null)return e;t=t.sibling}return null}var Jk=di.unstable_scheduleCallback,EP=di.unstable_cancelCallback,p6=di.unstable_shouldYield,m6=di.unstable_requestPaint,wn=di.unstable_now,g6=di.unstable_getCurrentPriorityLevel,xE=di.unstable_ImmediatePriority,e3=di.unstable_UserBlockingPriority,ov=di.unstable_NormalPriority,v6=di.unstable_LowPriority,t3=di.unstable_IdlePriority,i0=null,So=null;function y6(t){if(So&&typeof So.onCommitFiberRoot=="function")try{So.onCommitFiberRoot(i0,t,void 0,(t.current.flags&128)===128)}catch{}}var io=Math.clz32?Math.clz32:b6,_6=Math.log,x6=Math.LN2;function b6(t){return t>>>=0,t===0?32:31-(_6(t)/x6|0)|0}var Sm=64,Em=4194304;function jh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function av(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=jh(s):(o&=a,o!==0&&(r=jh(o)))}else a=n&~i,a!==0?r=jh(a):o!==0&&(r=jh(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-io(e),i=1<<n,r|=t[n],e&=~i;return r}function w6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function S6(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-io(o),s=1<<a,l=i[a];l===-1?(!(s&n)||s&r)&&(i[a]=w6(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}function s1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function n3(){var t=Sm;return Sm<<=1,!(Sm&4194240)&&(Sm=64),t}function q_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Up(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-io(e),t[e]=n}function E6(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-io(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function bE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-io(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Bt=0;function r3(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var i3,wE,o3,a3,s3,l1=!1,Tm=[],is=null,os=null,as=null,Sd=new Map,Ed=new Map,Xa=[],T6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function TP(t,e){switch(t){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":Sd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ed.delete(e.pointerId)}}function ph(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Vp(e),e!==null&&wE(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function A6(t,e,n,r,i){switch(e){case"focusin":return is=ph(is,t,e,n,r,i),!0;case"dragenter":return os=ph(os,t,e,n,r,i),!0;case"mouseover":return as=ph(as,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Sd.set(o,ph(Sd.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ed.set(o,ph(Ed.get(o)||null,t,e,n,r,i)),!0}return!1}function l3(t){var e=hl(t.target);if(e!==null){var n=Yl(e);if(n!==null){if(e=n.tag,e===13){if(e=Yk(n),e!==null){t.blockedOn=e,s3(t.priority,function(){o3(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ng(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=c1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);r1=r,n.target.dispatchEvent(r),r1=null}else return e=Vp(n),e!==null&&wE(e),t.blockedOn=n,!1;e.shift()}return!0}function AP(t,e,n){Ng(t)&&n.delete(e)}function M6(){l1=!1,is!==null&&Ng(is)&&(is=null),os!==null&&Ng(os)&&(os=null),as!==null&&Ng(as)&&(as=null),Sd.forEach(AP),Ed.forEach(AP)}function mh(t,e){t.blockedOn===e&&(t.blockedOn=null,l1||(l1=!0,di.unstable_scheduleCallback(di.unstable_NormalPriority,M6)))}function Td(t){function e(i){return mh(i,t)}if(0<Tm.length){mh(Tm[0],t);for(var n=1;n<Tm.length;n++){var r=Tm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(is!==null&&mh(is,t),os!==null&&mh(os,t),as!==null&&mh(as,t),Sd.forEach(e),Ed.forEach(e),n=0;n<Xa.length;n++)r=Xa[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xa.length&&(n=Xa[0],n.blockedOn===null);)l3(n),n.blockedOn===null&&Xa.shift()}var xu=Pa.ReactCurrentBatchConfig,sv=!0;function P6(t,e,n,r){var i=Bt,o=xu.transition;xu.transition=null;try{Bt=1,SE(t,e,n,r)}finally{Bt=i,xu.transition=o}}function C6(t,e,n,r){var i=Bt,o=xu.transition;xu.transition=null;try{Bt=4,SE(t,e,n,r)}finally{Bt=i,xu.transition=o}}function SE(t,e,n,r){if(sv){var i=c1(t,e,n,r);if(i===null)rx(t,e,r,lv,n),TP(t,r);else if(A6(i,t,e,n,r))r.stopPropagation();else if(TP(t,r),e&4&&-1<T6.indexOf(t)){for(;i!==null;){var o=Vp(i);if(o!==null&&i3(o),o=c1(t,e,n,r),o===null&&rx(t,e,r,lv,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else rx(t,e,r,null,n)}}var lv=null;function c1(t,e,n,r){if(lv=null,t=_E(r),t=hl(t),t!==null)if(e=Yl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Yk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return lv=t,null}function c3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(g6()){case xE:return 1;case e3:return 4;case ov:case v6:return 16;case t3:return 536870912;default:return 16}default:return 16}}var Qa=null,EE=null,Dg=null;function u3(){if(Dg)return Dg;var t,e=EE,n=e.length,r,i="value"in Qa?Qa.value:Qa.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return Dg=i.slice(t,1<r?1-r:void 0)}function Lg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Am(){return!0}function MP(){return!1}function gi(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Am:MP,this.isPropagationStopped=MP,this}return pn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Am)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Am)},persist:function(){},isPersistent:Am}),e}var Pf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},TE=gi(Pf),Fp=pn({},Pf,{view:0,detail:0}),R6=gi(Fp),X_,K_,gh,o0=pn({},Fp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:AE,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gh&&(gh&&t.type==="mousemove"?(X_=t.screenX-gh.screenX,K_=t.screenY-gh.screenY):K_=X_=0,gh=t),X_)},movementY:function(t){return"movementY"in t?t.movementY:K_}}),PP=gi(o0),O6=pn({},o0,{dataTransfer:0}),I6=gi(O6),N6=pn({},Fp,{relatedTarget:0}),Y_=gi(N6),D6=pn({},Pf,{animationName:0,elapsedTime:0,pseudoElement:0}),L6=gi(D6),k6=pn({},Pf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),j6=gi(k6),U6=pn({},Pf,{data:0}),CP=gi(U6),F6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=B6[t])?!!e[t]:!1}function AE(){return $6}var z6=pn({},Fp,{key:function(t){if(t.key){var e=F6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?V6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:AE,charCode:function(t){return t.type==="keypress"?Lg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),H6=gi(z6),G6=pn({},o0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),RP=gi(G6),W6=pn({},Fp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:AE}),q6=gi(W6),X6=pn({},Pf,{propertyName:0,elapsedTime:0,pseudoElement:0}),K6=gi(X6),Y6=pn({},o0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q6=gi(Y6),Z6=[9,13,27,32],ME=ga&&"CompositionEvent"in window,Yh=null;ga&&"documentMode"in document&&(Yh=document.documentMode);var J6=ga&&"TextEvent"in window&&!Yh,f3=ga&&(!ME||Yh&&8<Yh&&11>=Yh),OP=" ",IP=!1;function h3(t,e){switch(t){case"keyup":return Z6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function d3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qc=!1;function e9(t,e){switch(t){case"compositionend":return d3(e);case"keypress":return e.which!==32?null:(IP=!0,OP);case"textInput":return t=e.data,t===OP&&IP?null:t;default:return null}}function t9(t,e){if(qc)return t==="compositionend"||!ME&&h3(t,e)?(t=u3(),Dg=EE=Qa=null,qc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return f3&&e.locale!=="ko"?null:e.data;default:return null}}var n9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function NP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!n9[t.type]:e==="textarea"}function p3(t,e,n,r){Gk(r),e=cv(e,"onChange"),0<e.length&&(n=new TE("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qh=null,Ad=null;function r9(t){T3(t,0)}function a0(t){var e=Yc(t);if(Uk(e))return t}function i9(t,e){if(t==="change")return e}var m3=!1;if(ga){var Q_;if(ga){var Z_="oninput"in document;if(!Z_){var DP=document.createElement("div");DP.setAttribute("oninput","return;"),Z_=typeof DP.oninput=="function"}Q_=Z_}else Q_=!1;m3=Q_&&(!document.documentMode||9<document.documentMode)}function LP(){Qh&&(Qh.detachEvent("onpropertychange",g3),Ad=Qh=null)}function g3(t){if(t.propertyName==="value"&&a0(Ad)){var e=[];p3(e,Ad,t,_E(t)),Kk(r9,e)}}function o9(t,e,n){t==="focusin"?(LP(),Qh=e,Ad=n,Qh.attachEvent("onpropertychange",g3)):t==="focusout"&&LP()}function a9(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return a0(Ad)}function s9(t,e){if(t==="click")return a0(e)}function l9(t,e){if(t==="input"||t==="change")return a0(e)}function c9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var lo=typeof Object.is=="function"?Object.is:c9;function Md(t,e){if(lo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Gb.call(e,i)||!lo(t[i],e[i]))return!1}return!0}function kP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jP(t,e){var n=kP(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kP(n)}}function v3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?v3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function y3(){for(var t=window,e=nv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=nv(t.document)}return e}function PE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function u9(t){var e=y3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&v3(n.ownerDocument.documentElement,n)){if(r!==null&&PE(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=jP(n,o);var a=jP(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var f9=ga&&"documentMode"in document&&11>=document.documentMode,Xc=null,u1=null,Zh=null,f1=!1;function UP(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;f1||Xc==null||Xc!==nv(r)||(r=Xc,"selectionStart"in r&&PE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zh&&Md(Zh,r)||(Zh=r,r=cv(u1,"onSelect"),0<r.length&&(e=new TE("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xc)))}function Mm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Kc={animationend:Mm("Animation","AnimationEnd"),animationiteration:Mm("Animation","AnimationIteration"),animationstart:Mm("Animation","AnimationStart"),transitionend:Mm("Transition","TransitionEnd")},J_={},_3={};ga&&(_3=document.createElement("div").style,"AnimationEvent"in window||(delete Kc.animationend.animation,delete Kc.animationiteration.animation,delete Kc.animationstart.animation),"TransitionEvent"in window||delete Kc.transitionend.transition);function s0(t){if(J_[t])return J_[t];if(!Kc[t])return t;var e=Kc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _3)return J_[t]=e[n];return t}var x3=s0("animationend"),b3=s0("animationiteration"),w3=s0("animationstart"),S3=s0("transitionend"),E3=new Map,FP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(t,e){E3.set(t,e),Kl(e,[t])}for(var ex=0;ex<FP.length;ex++){var tx=FP[ex],h9=tx.toLowerCase(),d9=tx[0].toUpperCase()+tx.slice(1);Is(h9,"on"+d9)}Is(x3,"onAnimationEnd");Is(b3,"onAnimationIteration");Is(w3,"onAnimationStart");Is("dblclick","onDoubleClick");Is("focusin","onFocus");Is("focusout","onBlur");Is(S3,"onTransitionEnd");Ou("onMouseEnter",["mouseout","mouseover"]);Ou("onMouseLeave",["mouseout","mouseover"]);Ou("onPointerEnter",["pointerout","pointerover"]);Ou("onPointerLeave",["pointerout","pointerover"]);Kl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p9=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uh));function VP(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,h6(r,e,void 0,t),t.currentTarget=null}function T3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;VP(i,s,c),o=l}else for(a=0;a<r.length;a++){if(s=r[a],l=s.instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;VP(i,s,c),o=l}}}if(iv)throw t=a1,iv=!1,a1=null,t}function en(t,e){var n=e[g1];n===void 0&&(n=e[g1]=new Set);var r=t+"__bubble";n.has(r)||(A3(e,t,2,!1),n.add(r))}function nx(t,e,n){var r=0;e&&(r|=4),A3(n,t,r,e)}var Pm="_reactListening"+Math.random().toString(36).slice(2);function Pd(t){if(!t[Pm]){t[Pm]=!0,Nk.forEach(function(n){n!=="selectionchange"&&(p9.has(n)||nx(n,!1,t),nx(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pm]||(e[Pm]=!0,nx("selectionchange",!1,e))}}function A3(t,e,n,r){switch(c3(e)){case 1:var i=P6;break;case 4:i=C6;break;default:i=SE}n=i.bind(null,e,n,t),i=void 0,!o1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function rx(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=hl(s),a===null)return;if(l=a.tag,l===5||l===6){r=o=a;continue e}s=s.parentNode}}r=r.return}Kk(function(){var c=o,u=_E(n),f=[];e:{var h=E3.get(t);if(h!==void 0){var d=TE,y=t;switch(t){case"keypress":if(Lg(n)===0)break e;case"keydown":case"keyup":d=H6;break;case"focusin":y="focus",d=Y_;break;case"focusout":y="blur",d=Y_;break;case"beforeblur":case"afterblur":d=Y_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=PP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=I6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=q6;break;case x3:case b3:case w3:d=L6;break;case S3:d=K6;break;case"scroll":d=R6;break;case"wheel":d=Q6;break;case"copy":case"cut":case"paste":d=j6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=RP}var v=(e&4)!==0,g=!v&&t==="scroll",p=v?h!==null?h+"Capture":null:h;v=[];for(var x=c,_;x!==null;){_=x;var T=_.stateNode;if(_.tag===5&&T!==null&&(_=T,p!==null&&(T=wd(x,p),T!=null&&v.push(Cd(x,T,_)))),g)break;x=x.return}0<v.length&&(h=new d(h,y,null,n,u),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==r1&&(y=n.relatedTarget||n.fromElement)&&(hl(y)||y[va]))break e;if((d||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,d?(y=n.relatedTarget||n.toElement,d=c,y=y?hl(y):null,y!==null&&(g=Yl(y),y!==g||y.tag!==5&&y.tag!==6)&&(y=null)):(d=null,y=c),d!==y)){if(v=PP,T="onMouseLeave",p="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=RP,T="onPointerLeave",p="onPointerEnter",x="pointer"),g=d==null?h:Yc(d),_=y==null?h:Yc(y),h=new v(T,x+"leave",d,n,u),h.target=g,h.relatedTarget=_,T=null,hl(u)===c&&(v=new v(p,x+"enter",y,n,u),v.target=_,v.relatedTarget=g,T=v),g=T,d&&y)t:{for(v=d,p=y,x=0,_=v;_;_=mc(_))x++;for(_=0,T=p;T;T=mc(T))_++;for(;0<x-_;)v=mc(v),x--;for(;0<_-x;)p=mc(p),_--;for(;x--;){if(v===p||p!==null&&v===p.alternate)break t;v=mc(v),p=mc(p)}v=null}else v=null;d!==null&&BP(f,h,d,v,!1),y!==null&&g!==null&&BP(f,g,y,v,!0)}}e:{if(h=c?Yc(c):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var w=i9;else if(NP(h))if(m3)w=l9;else{w=a9;var M=o9}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=s9);if(w&&(w=w(t,c))){p3(f,w,n,u);break e}M&&M(t,h,c),t==="focusout"&&(M=h._wrapperState)&&M.controlled&&h.type==="number"&&Zb(h,"number",h.value)}switch(M=c?Yc(c):window,t){case"focusin":(NP(M)||M.contentEditable==="true")&&(Xc=M,u1=c,Zh=null);break;case"focusout":Zh=u1=Xc=null;break;case"mousedown":f1=!0;break;case"contextmenu":case"mouseup":case"dragend":f1=!1,UP(f,n,u);break;case"selectionchange":if(f9)break;case"keydown":case"keyup":UP(f,n,u)}var b;if(ME)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else qc?h3(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(f3&&n.locale!=="ko"&&(qc||A!=="onCompositionStart"?A==="onCompositionEnd"&&qc&&(b=u3()):(Qa=u,EE="value"in Qa?Qa.value:Qa.textContent,qc=!0)),M=cv(c,A),0<M.length&&(A=new CP(A,t,null,n,u),f.push({event:A,listeners:M}),b?A.data=b:(b=d3(n),b!==null&&(A.data=b)))),(b=J6?e9(t,n):t9(t,n))&&(c=cv(c,"onBeforeInput"),0<c.length&&(u=new CP("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=b))}T3(f,e)})}function Cd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function cv(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=wd(t,n),o!=null&&r.unshift(Cd(t,o,i)),o=wd(t,e),o!=null&&r.push(Cd(t,o,i))),t=t.return}return r}function mc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function BP(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&c!==null&&(s=c,i?(l=wd(n,o),l!=null&&a.unshift(Cd(n,l,s))):i||(l=wd(n,o),l!=null&&a.push(Cd(n,l,s)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var m9=/\r\n?/g,g9=/\u0000|\uFFFD/g;function $P(t){return(typeof t=="string"?t:""+t).replace(m9,`
`).replace(g9,"")}function Cm(t,e,n){if(e=$P(e),$P(t)!==e&&n)throw Error(we(425))}function uv(){}var h1=null,d1=null;function p1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var m1=typeof setTimeout=="function"?setTimeout:void 0,v9=typeof clearTimeout=="function"?clearTimeout:void 0,zP=typeof Promise=="function"?Promise:void 0,y9=typeof queueMicrotask=="function"?queueMicrotask:typeof zP<"u"?function(t){return zP.resolve(null).then(t).catch(_9)}:m1;function _9(t){setTimeout(function(){throw t})}function ix(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Td(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Td(e)}function ss(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function HP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Cf=Math.random().toString(36).slice(2),xo="__reactFiber$"+Cf,Rd="__reactProps$"+Cf,va="__reactContainer$"+Cf,g1="__reactEvents$"+Cf,x9="__reactListeners$"+Cf,b9="__reactHandles$"+Cf;function hl(t){var e=t[xo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[va]||n[xo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=HP(t);t!==null;){if(n=t[xo])return n;t=HP(t)}return e}t=n,n=t.parentNode}return null}function Vp(t){return t=t[xo]||t[va],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(we(33))}function l0(t){return t[Rd]||null}var v1=[],Qc=-1;function Ns(t){return{current:t}}function sn(t){0>Qc||(t.current=v1[Qc],v1[Qc]=null,Qc--)}function Yt(t,e){Qc++,v1[Qc]=t.current,t.current=e}var bs={},Pr=Ns(bs),Xr=Ns(!1),Dl=bs;function Iu(t,e){var n=t.type.contextTypes;if(!n)return bs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Kr(t){return t=t.childContextTypes,t!=null}function fv(){sn(Xr),sn(Pr)}function GP(t,e,n){if(Pr.current!==bs)throw Error(we(168));Yt(Pr,e),Yt(Xr,n)}function M3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(we(108,o6(t)||"Unknown",i));return pn({},n,r)}function hv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bs,Dl=Pr.current,Yt(Pr,t),Yt(Xr,Xr.current),!0}function WP(t,e,n){var r=t.stateNode;if(!r)throw Error(we(169));n?(t=M3(t,e,Dl),r.__reactInternalMemoizedMergedChildContext=t,sn(Xr),sn(Pr),Yt(Pr,t)):sn(Xr),Yt(Xr,n)}var Zo=null,c0=!1,ox=!1;function P3(t){Zo===null?Zo=[t]:Zo.push(t)}function w9(t){c0=!0,P3(t)}function Ds(){if(!ox&&Zo!==null){ox=!0;var t=0,e=Bt;try{var n=Zo;for(Bt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Zo=null,c0=!1}catch(i){throw Zo!==null&&(Zo=Zo.slice(t+1)),Jk(xE,Ds),i}finally{Bt=e,ox=!1}}return null}var Zc=[],Jc=0,dv=null,pv=0,Ti=[],Ai=0,Ll=null,ea=1,ta="";function el(t,e){Zc[Jc++]=pv,Zc[Jc++]=dv,dv=t,pv=e}function C3(t,e,n){Ti[Ai++]=ea,Ti[Ai++]=ta,Ti[Ai++]=Ll,Ll=t;var r=ea;t=ta;var i=32-io(r)-1;r&=~(1<<i),n+=1;var o=32-io(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ea=1<<32-io(e)+i|n<<i|r,ta=o+t}else ea=1<<o|n<<i|r,ta=t}function CE(t){t.return!==null&&(el(t,1),C3(t,1,0))}function RE(t){for(;t===dv;)dv=Zc[--Jc],Zc[Jc]=null,pv=Zc[--Jc],Zc[Jc]=null;for(;t===Ll;)Ll=Ti[--Ai],Ti[Ai]=null,ta=Ti[--Ai],Ti[Ai]=null,ea=Ti[--Ai],Ti[Ai]=null}var ui=null,ci=null,cn=!1,Zi=null;function R3(t,e){var n=Oi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function qP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ui=t,ci=ss(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ui=t,ci=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ll!==null?{id:ea,overflow:ta}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Oi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ui=t,ci=null,!0):!1;default:return!1}}function y1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _1(t){if(cn){var e=ci;if(e){var n=e;if(!qP(t,e)){if(y1(t))throw Error(we(418));e=ss(n.nextSibling);var r=ui;e&&qP(t,e)?R3(r,n):(t.flags=t.flags&-4097|2,cn=!1,ui=t)}}else{if(y1(t))throw Error(we(418));t.flags=t.flags&-4097|2,cn=!1,ui=t}}}function XP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ui=t}function Rm(t){if(t!==ui)return!1;if(!cn)return XP(t),cn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!p1(t.type,t.memoizedProps)),e&&(e=ci)){if(y1(t))throw O3(),Error(we(418));for(;e;)R3(t,e),e=ss(e.nextSibling)}if(XP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(we(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ci=ss(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ci=null}}else ci=ui?ss(t.stateNode.nextSibling):null;return!0}function O3(){for(var t=ci;t;)t=ss(t.nextSibling)}function Nu(){ci=ui=null,cn=!1}function OE(t){Zi===null?Zi=[t]:Zi.push(t)}var S9=Pa.ReactCurrentBatchConfig;function vh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(we(309));var r=n.stateNode}if(!r)throw Error(we(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(we(284));if(!n._owner)throw Error(we(290,t))}return t}function Om(t,e){throw t=Object.prototype.toString.call(e),Error(we(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function KP(t){var e=t._init;return e(t._payload)}function I3(t){function e(p,x){if(t){var _=p.deletions;_===null?(p.deletions=[x],p.flags|=16):_.push(x)}}function n(p,x){if(!t)return null;for(;x!==null;)e(p,x),x=x.sibling;return null}function r(p,x){for(p=new Map;x!==null;)x.key!==null?p.set(x.key,x):p.set(x.index,x),x=x.sibling;return p}function i(p,x){return p=fs(p,x),p.index=0,p.sibling=null,p}function o(p,x,_){return p.index=_,t?(_=p.alternate,_!==null?(_=_.index,_<x?(p.flags|=2,x):_):(p.flags|=2,x)):(p.flags|=1048576,x)}function a(p){return t&&p.alternate===null&&(p.flags|=2),p}function s(p,x,_,T){return x===null||x.tag!==6?(x=hx(_,p.mode,T),x.return=p,x):(x=i(x,_),x.return=p,x)}function l(p,x,_,T){var w=_.type;return w===Wc?u(p,x,_.props.children,T,_.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===za&&KP(w)===x.type)?(T=i(x,_.props),T.ref=vh(p,x,_),T.return=p,T):(T=$g(_.type,_.key,_.props,null,p.mode,T),T.ref=vh(p,x,_),T.return=p,T)}function c(p,x,_,T){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=dx(_,p.mode,T),x.return=p,x):(x=i(x,_.children||[]),x.return=p,x)}function u(p,x,_,T,w){return x===null||x.tag!==7?(x=Tl(_,p.mode,T,w),x.return=p,x):(x=i(x,_),x.return=p,x)}function f(p,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=hx(""+x,p.mode,_),x.return=p,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case xm:return _=$g(x.type,x.key,x.props,null,p.mode,_),_.ref=vh(p,null,x),_.return=p,_;case Gc:return x=dx(x,p.mode,_),x.return=p,x;case za:var T=x._init;return f(p,T(x._payload),_)}if(kh(x)||hh(x))return x=Tl(x,p.mode,_,null),x.return=p,x;Om(p,x)}return null}function h(p,x,_,T){var w=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return w!==null?null:s(p,x,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case xm:return _.key===w?l(p,x,_,T):null;case Gc:return _.key===w?c(p,x,_,T):null;case za:return w=_._init,h(p,x,w(_._payload),T)}if(kh(_)||hh(_))return w!==null?null:u(p,x,_,T,null);Om(p,_)}return null}function d(p,x,_,T,w){if(typeof T=="string"&&T!==""||typeof T=="number")return p=p.get(_)||null,s(x,p,""+T,w);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case xm:return p=p.get(T.key===null?_:T.key)||null,l(x,p,T,w);case Gc:return p=p.get(T.key===null?_:T.key)||null,c(x,p,T,w);case za:var M=T._init;return d(p,x,_,M(T._payload),w)}if(kh(T)||hh(T))return p=p.get(_)||null,u(x,p,T,w,null);Om(x,T)}return null}function y(p,x,_,T){for(var w=null,M=null,b=x,A=x=0,E=null;b!==null&&A<_.length;A++){b.index>A?(E=b,b=null):E=b.sibling;var P=h(p,b,_[A],T);if(P===null){b===null&&(b=E);break}t&&b&&P.alternate===null&&e(p,b),x=o(P,x,A),M===null?w=P:M.sibling=P,M=P,b=E}if(A===_.length)return n(p,b),cn&&el(p,A),w;if(b===null){for(;A<_.length;A++)b=f(p,_[A],T),b!==null&&(x=o(b,x,A),M===null?w=b:M.sibling=b,M=b);return cn&&el(p,A),w}for(b=r(p,b);A<_.length;A++)E=d(b,p,A,_[A],T),E!==null&&(t&&E.alternate!==null&&b.delete(E.key===null?A:E.key),x=o(E,x,A),M===null?w=E:M.sibling=E,M=E);return t&&b.forEach(function(R){return e(p,R)}),cn&&el(p,A),w}function v(p,x,_,T){var w=hh(_);if(typeof w!="function")throw Error(we(150));if(_=w.call(_),_==null)throw Error(we(151));for(var M=w=null,b=x,A=x=0,E=null,P=_.next();b!==null&&!P.done;A++,P=_.next()){b.index>A?(E=b,b=null):E=b.sibling;var R=h(p,b,P.value,T);if(R===null){b===null&&(b=E);break}t&&b&&R.alternate===null&&e(p,b),x=o(R,x,A),M===null?w=R:M.sibling=R,M=R,b=E}if(P.done)return n(p,b),cn&&el(p,A),w;if(b===null){for(;!P.done;A++,P=_.next())P=f(p,P.value,T),P!==null&&(x=o(P,x,A),M===null?w=P:M.sibling=P,M=P);return cn&&el(p,A),w}for(b=r(p,b);!P.done;A++,P=_.next())P=d(b,p,A,P.value,T),P!==null&&(t&&P.alternate!==null&&b.delete(P.key===null?A:P.key),x=o(P,x,A),M===null?w=P:M.sibling=P,M=P);return t&&b.forEach(function(N){return e(p,N)}),cn&&el(p,A),w}function g(p,x,_,T){if(typeof _=="object"&&_!==null&&_.type===Wc&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case xm:e:{for(var w=_.key,M=x;M!==null;){if(M.key===w){if(w=_.type,w===Wc){if(M.tag===7){n(p,M.sibling),x=i(M,_.props.children),x.return=p,p=x;break e}}else if(M.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===za&&KP(w)===M.type){n(p,M.sibling),x=i(M,_.props),x.ref=vh(p,M,_),x.return=p,p=x;break e}n(p,M);break}else e(p,M);M=M.sibling}_.type===Wc?(x=Tl(_.props.children,p.mode,T,_.key),x.return=p,p=x):(T=$g(_.type,_.key,_.props,null,p.mode,T),T.ref=vh(p,x,_),T.return=p,p=T)}return a(p);case Gc:e:{for(M=_.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){n(p,x.sibling),x=i(x,_.children||[]),x.return=p,p=x;break e}else{n(p,x);break}else e(p,x);x=x.sibling}x=dx(_,p.mode,T),x.return=p,p=x}return a(p);case za:return M=_._init,g(p,x,M(_._payload),T)}if(kh(_))return y(p,x,_,T);if(hh(_))return v(p,x,_,T);Om(p,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(n(p,x.sibling),x=i(x,_),x.return=p,p=x):(n(p,x),x=hx(_,p.mode,T),x.return=p,p=x),a(p)):n(p,x)}return g}var Du=I3(!0),N3=I3(!1),mv=Ns(null),gv=null,eu=null,IE=null;function NE(){IE=eu=gv=null}function DE(t){var e=mv.current;sn(mv),t._currentValue=e}function x1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function bu(t,e){gv=t,IE=eu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wr=!0),t.firstContext=null)}function ji(t){var e=t._currentValue;if(IE!==t)if(t={context:t,memoizedValue:e,next:null},eu===null){if(gv===null)throw Error(we(308));eu=t,gv.dependencies={lanes:0,firstContext:t}}else eu=eu.next=t;return e}var dl=null;function LE(t){dl===null?dl=[t]:dl.push(t)}function D3(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,LE(e)):(n.next=i.next,i.next=n),e.interleaved=n,ya(t,r)}function ya(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ha=!1;function kE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function L3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ls(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Nt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ya(t,n)}return i=r.interleaved,i===null?(e.next=e,LE(r)):(e.next=i.next,i.next=e),r.interleaved=e,ya(t,n)}function kg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bE(t,n)}}function YP(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vv(t,e,n,r){var i=t.updateQueue;Ha=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,a===null?o=c:a.next=c,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==a&&(s===null?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;a=0,u=c=l=null,s=o;do{var h=s.lane,d=s.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var y=t,v=s;switch(h=e,d=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){f=y.call(d,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,h=typeof y=="function"?y.call(d,f,h):y,h==null)break e;f=pn({},f,h);break e;case 2:Ha=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=d,l=f):u=u.next=d,a|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);jl|=a,t.lanes=a,t.memoizedState=f}}function QP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(we(191,i));i.call(r)}}}var Bp={},Eo=Ns(Bp),Od=Ns(Bp),Id=Ns(Bp);function pl(t){if(t===Bp)throw Error(we(174));return t}function jE(t,e){switch(Yt(Id,e),Yt(Od,t),Yt(Eo,Bp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:e1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=e1(e,t)}sn(Eo),Yt(Eo,e)}function Lu(){sn(Eo),sn(Od),sn(Id)}function k3(t){pl(Id.current);var e=pl(Eo.current),n=e1(e,t.type);e!==n&&(Yt(Od,t),Yt(Eo,n))}function UE(t){Od.current===t&&(sn(Eo),sn(Od))}var fn=Ns(0);function yv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ax=[];function FE(){for(var t=0;t<ax.length;t++)ax[t]._workInProgressVersionPrimary=null;ax.length=0}var jg=Pa.ReactCurrentDispatcher,sx=Pa.ReactCurrentBatchConfig,kl=0,dn=null,kn=null,Yn=null,_v=!1,Jh=!1,Nd=0,E9=0;function pr(){throw Error(we(321))}function VE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!lo(t[n],e[n]))return!1;return!0}function BE(t,e,n,r,i,o){if(kl=o,dn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jg.current=t===null||t.memoizedState===null?P9:C9,t=n(r,i),Jh){o=0;do{if(Jh=!1,Nd=0,25<=o)throw Error(we(301));o+=1,Yn=kn=null,e.updateQueue=null,jg.current=R9,t=n(r,i)}while(Jh)}if(jg.current=xv,e=kn!==null&&kn.next!==null,kl=0,Yn=kn=dn=null,_v=!1,e)throw Error(we(300));return t}function $E(){var t=Nd!==0;return Nd=0,t}function yo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yn===null?dn.memoizedState=Yn=t:Yn=Yn.next=t,Yn}function Ui(){if(kn===null){var t=dn.alternate;t=t!==null?t.memoizedState:null}else t=kn.next;var e=Yn===null?dn.memoizedState:Yn.next;if(e!==null)Yn=e,kn=t;else{if(t===null)throw Error(we(310));kn=t,t={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},Yn===null?dn.memoizedState=Yn=t:Yn=Yn.next=t}return Yn}function Dd(t,e){return typeof e=="function"?e(t):e}function lx(t){var e=Ui(),n=e.queue;if(n===null)throw Error(we(311));n.lastRenderedReducer=t;var r=kn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,l=null,c=o;do{var u=c.lane;if((kl&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=f,a=r):l=l.next=f,dn.lanes|=u,jl|=u}c=c.next}while(c!==null&&c!==o);l===null?a=r:l.next=s,lo(r,e.memoizedState)||(Wr=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,dn.lanes|=o,jl|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function cx(t){var e=Ui(),n=e.queue;if(n===null)throw Error(we(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);lo(o,e.memoizedState)||(Wr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function j3(){}function U3(t,e){var n=dn,r=Ui(),i=e(),o=!lo(r.memoizedState,i);if(o&&(r.memoizedState=i,Wr=!0),r=r.queue,zE(B3.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Yn!==null&&Yn.memoizedState.tag&1){if(n.flags|=2048,Ld(9,V3.bind(null,n,r,i,e),void 0,null),Jn===null)throw Error(we(349));kl&30||F3(n,e,i)}return i}function F3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=dn.updateQueue,e===null?(e={lastEffect:null,stores:null},dn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function V3(t,e,n,r){e.value=n,e.getSnapshot=r,$3(e)&&z3(t)}function B3(t,e,n){return n(function(){$3(e)&&z3(t)})}function $3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!lo(t,n)}catch{return!0}}function z3(t){var e=ya(t,1);e!==null&&oo(e,t,1,-1)}function ZP(t){var e=yo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dd,lastRenderedState:t},e.queue=t,t=t.dispatch=M9.bind(null,dn,t),[e.memoizedState,t]}function Ld(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=dn.updateQueue,e===null?(e={lastEffect:null,stores:null},dn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function H3(){return Ui().memoizedState}function Ug(t,e,n,r){var i=yo();dn.flags|=t,i.memoizedState=Ld(1|e,n,void 0,r===void 0?null:r)}function u0(t,e,n,r){var i=Ui();r=r===void 0?null:r;var o=void 0;if(kn!==null){var a=kn.memoizedState;if(o=a.destroy,r!==null&&VE(r,a.deps)){i.memoizedState=Ld(e,n,o,r);return}}dn.flags|=t,i.memoizedState=Ld(1|e,n,o,r)}function JP(t,e){return Ug(8390656,8,t,e)}function zE(t,e){return u0(2048,8,t,e)}function G3(t,e){return u0(4,2,t,e)}function W3(t,e){return u0(4,4,t,e)}function q3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function X3(t,e,n){return n=n!=null?n.concat([t]):null,u0(4,4,q3.bind(null,e,t),n)}function HE(){}function K3(t,e){var n=Ui();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&VE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Y3(t,e){var n=Ui();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&VE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Q3(t,e,n){return kl&21?(lo(n,e)||(n=n3(),dn.lanes|=n,jl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wr=!0),t.memoizedState=n)}function T9(t,e){var n=Bt;Bt=n!==0&&4>n?n:4,t(!0);var r=sx.transition;sx.transition={};try{t(!1),e()}finally{Bt=n,sx.transition=r}}function Z3(){return Ui().memoizedState}function A9(t,e,n){var r=us(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},J3(t))ej(e,n);else if(n=D3(t,e,n,r),n!==null){var i=Fr();oo(n,t,r,i),tj(n,e,r)}}function M9(t,e,n){var r=us(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(J3(t))ej(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,lo(s,a)){var l=e.interleaved;l===null?(i.next=i,LE(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=D3(t,e,i,r),n!==null&&(i=Fr(),oo(n,t,r,i),tj(n,e,r))}}function J3(t){var e=t.alternate;return t===dn||e!==null&&e===dn}function ej(t,e){Jh=_v=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function tj(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bE(t,n)}}var xv={readContext:ji,useCallback:pr,useContext:pr,useEffect:pr,useImperativeHandle:pr,useInsertionEffect:pr,useLayoutEffect:pr,useMemo:pr,useReducer:pr,useRef:pr,useState:pr,useDebugValue:pr,useDeferredValue:pr,useTransition:pr,useMutableSource:pr,useSyncExternalStore:pr,useId:pr,unstable_isNewReconciler:!1},P9={readContext:ji,useCallback:function(t,e){return yo().memoizedState=[t,e===void 0?null:e],t},useContext:ji,useEffect:JP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ug(4194308,4,q3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ug(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ug(4,2,t,e)},useMemo:function(t,e){var n=yo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=A9.bind(null,dn,t),[r.memoizedState,t]},useRef:function(t){var e=yo();return t={current:t},e.memoizedState=t},useState:ZP,useDebugValue:HE,useDeferredValue:function(t){return yo().memoizedState=t},useTransition:function(){var t=ZP(!1),e=t[0];return t=T9.bind(null,t[1]),yo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=dn,i=yo();if(cn){if(n===void 0)throw Error(we(407));n=n()}else{if(n=e(),Jn===null)throw Error(we(349));kl&30||F3(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,JP(B3.bind(null,r,o,t),[t]),r.flags|=2048,Ld(9,V3.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=yo(),e=Jn.identifierPrefix;if(cn){var n=ta,r=ea;n=(r&~(1<<32-io(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Nd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=E9++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},C9={readContext:ji,useCallback:K3,useContext:ji,useEffect:zE,useImperativeHandle:X3,useInsertionEffect:G3,useLayoutEffect:W3,useMemo:Y3,useReducer:lx,useRef:H3,useState:function(){return lx(Dd)},useDebugValue:HE,useDeferredValue:function(t){var e=Ui();return Q3(e,kn.memoizedState,t)},useTransition:function(){var t=lx(Dd)[0],e=Ui().memoizedState;return[t,e]},useMutableSource:j3,useSyncExternalStore:U3,useId:Z3,unstable_isNewReconciler:!1},R9={readContext:ji,useCallback:K3,useContext:ji,useEffect:zE,useImperativeHandle:X3,useInsertionEffect:G3,useLayoutEffect:W3,useMemo:Y3,useReducer:cx,useRef:H3,useState:function(){return cx(Dd)},useDebugValue:HE,useDeferredValue:function(t){var e=Ui();return kn===null?e.memoizedState=t:Q3(e,kn.memoizedState,t)},useTransition:function(){var t=cx(Dd)[0],e=Ui().memoizedState;return[t,e]},useMutableSource:j3,useSyncExternalStore:U3,useId:Z3,unstable_isNewReconciler:!1};function Xi(t,e){if(t&&t.defaultProps){e=pn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function b1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:pn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var f0={isMounted:function(t){return(t=t._reactInternals)?Yl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Fr(),i=us(t),o=sa(r,i);o.payload=e,n!=null&&(o.callback=n),e=ls(t,o,i),e!==null&&(oo(e,t,i,r),kg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Fr(),i=us(t),o=sa(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ls(t,o,i),e!==null&&(oo(e,t,i,r),kg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Fr(),r=us(t),i=sa(n,r);i.tag=2,e!=null&&(i.callback=e),e=ls(t,i,r),e!==null&&(oo(e,t,r,n),kg(e,t,r))}};function eC(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!Md(n,r)||!Md(i,o):!0}function nj(t,e,n){var r=!1,i=bs,o=e.contextType;return typeof o=="object"&&o!==null?o=ji(o):(i=Kr(e)?Dl:Pr.current,r=e.contextTypes,o=(r=r!=null)?Iu(t,i):bs),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=f0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function tC(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&f0.enqueueReplaceState(e,e.state,null)}function w1(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},kE(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ji(o):(o=Kr(e)?Dl:Pr.current,i.context=Iu(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(b1(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&f0.enqueueReplaceState(i,i.state,null),vv(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ku(t,e){try{var n="",r=e;do n+=i6(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function ux(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function S1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var O9=typeof WeakMap=="function"?WeakMap:Map;function rj(t,e,n){n=sa(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){wv||(wv=!0,N1=r),S1(t,e)},n}function ij(t,e,n){n=sa(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){S1(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){S1(t,e),typeof r!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function nC(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new O9;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=G9.bind(null,t,e,n),e.then(t,t))}function rC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function iC(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=sa(-1,1),e.tag=2,ls(n,e,1))),n.lanes|=1),t)}var I9=Pa.ReactCurrentOwner,Wr=!1;function Nr(t,e,n,r){e.child=t===null?N3(e,null,n,r):Du(e,t.child,n,r)}function oC(t,e,n,r,i){n=n.render;var o=e.ref;return bu(e,i),r=BE(t,e,n,r,o,i),n=$E(),t!==null&&!Wr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_a(t,e,i)):(cn&&n&&CE(e),e.flags|=1,Nr(t,e,r,i),e.child)}function aC(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!ZE(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,oj(t,e,o,r,i)):(t=$g(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Md,n(a,r)&&t.ref===e.ref)return _a(t,e,i)}return e.flags|=1,t=fs(o,r),t.ref=e.ref,t.return=e,e.child=t}function oj(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Md(o,r)&&t.ref===e.ref)if(Wr=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Wr=!0);else return e.lanes=t.lanes,_a(t,e,i)}return E1(t,e,n,r,i)}function aj(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yt(nu,oi),oi|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Yt(nu,oi),oi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Yt(nu,oi),oi|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Yt(nu,oi),oi|=r;return Nr(t,e,i,n),e.child}function sj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function E1(t,e,n,r,i){var o=Kr(n)?Dl:Pr.current;return o=Iu(e,o),bu(e,i),n=BE(t,e,n,r,o,i),r=$E(),t!==null&&!Wr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_a(t,e,i)):(cn&&r&&CE(e),e.flags|=1,Nr(t,e,n,i),e.child)}function sC(t,e,n,r,i){if(Kr(n)){var o=!0;hv(e)}else o=!1;if(bu(e,i),e.stateNode===null)Fg(t,e),nj(e,n,r),w1(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=ji(c):(c=Kr(n)?Dl:Pr.current,c=Iu(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||l!==c)&&tC(e,a,r,c),Ha=!1;var h=e.memoizedState;a.state=h,vv(e,r,a,i),l=e.memoizedState,s!==r||h!==l||Xr.current||Ha?(typeof u=="function"&&(b1(e,n,u,r),l=e.memoizedState),(s=Ha||eC(e,n,s,r,h,l,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,L3(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:Xi(e.type,s),a.props=c,f=e.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=ji(l):(l=Kr(n)?Dl:Pr.current,l=Iu(e,l));var d=n.getDerivedStateFromProps;(u=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==f||h!==l)&&tC(e,a,r,l),Ha=!1,h=e.memoizedState,a.state=h,vv(e,r,a,i);var y=e.memoizedState;s!==f||h!==y||Xr.current||Ha?(typeof d=="function"&&(b1(e,n,d,r),y=e.memoizedState),(c=Ha||eC(e,n,c,r,h,y,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return T1(t,e,n,r,o,i)}function T1(t,e,n,r,i,o){sj(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&WP(e,n,!1),_a(t,e,o);r=e.stateNode,I9.current=e;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Du(e,t.child,null,o),e.child=Du(e,null,s,o)):Nr(t,e,s,o),e.memoizedState=r.state,i&&WP(e,n,!0),e.child}function lj(t){var e=t.stateNode;e.pendingContext?GP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&GP(t,e.context,!1),jE(t,e.containerInfo)}function lC(t,e,n,r,i){return Nu(),OE(i),e.flags|=256,Nr(t,e,n,r),e.child}var A1={dehydrated:null,treeContext:null,retryLane:0};function M1(t){return{baseLanes:t,cachePool:null,transitions:null}}function cj(t,e,n){var r=e.pendingProps,i=fn.current,o=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Yt(fn,i&1),t===null)return _1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=p0(a,r,0,null),t=Tl(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=M1(n),e.memoizedState=A1,t):GE(e,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return N9(t,e,a,r,s,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=fs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=fs(s,o):(o=Tl(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?M1(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=A1,r}return o=t.child,t=o.sibling,r=fs(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function GE(t,e){return e=p0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Im(t,e,n,r){return r!==null&&OE(r),Du(e,t.child,null,n),t=GE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function N9(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=ux(Error(we(422))),Im(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=p0({mode:"visible",children:r.children},i,0,null),o=Tl(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Du(e,t.child,null,a),e.child.memoizedState=M1(a),e.memoizedState=A1,o);if(!(e.mode&1))return Im(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(we(419)),r=ux(o,r,void 0),Im(t,e,a,r)}if(s=(a&t.childLanes)!==0,Wr||s){if(r=Jn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ya(t,i),oo(r,t,i,-1))}return QE(),r=ux(Error(we(421))),Im(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=W9.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,ci=ss(i.nextSibling),ui=e,cn=!0,Zi=null,t!==null&&(Ti[Ai++]=ea,Ti[Ai++]=ta,Ti[Ai++]=Ll,ea=t.id,ta=t.overflow,Ll=e),e=GE(e,r.children),e.flags|=4096,e)}function cC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),x1(t.return,e,n)}function fx(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function uj(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Nr(t,e,r.children,n),r=fn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cC(t,n,e);else if(t.tag===19)cC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Yt(fn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&yv(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),fx(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&yv(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}fx(e,!0,n,null,o);break;case"together":fx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _a(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),jl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(we(153));if(e.child!==null){for(t=e.child,n=fs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function D9(t,e,n){switch(e.tag){case 3:lj(e),Nu();break;case 5:k3(e);break;case 1:Kr(e.type)&&hv(e);break;case 4:jE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Yt(mv,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Yt(fn,fn.current&1),e.flags|=128,null):n&e.child.childLanes?cj(t,e,n):(Yt(fn,fn.current&1),t=_a(t,e,n),t!==null?t.sibling:null);Yt(fn,fn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return uj(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Yt(fn,fn.current),r)break;return null;case 22:case 23:return e.lanes=0,aj(t,e,n)}return _a(t,e,n)}var fj,P1,hj,dj;fj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};P1=function(){};hj=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,pl(Eo.current);var o=null;switch(n){case"input":i=Yb(t,i),r=Yb(t,r),o=[];break;case"select":i=pn({},i,{value:void 0}),r=pn({},r,{value:void 0}),o=[];break;case"textarea":i=Jb(t,i),r=Jb(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=uv)}t1(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xd.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(s=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&en("scroll",t),o||s===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};dj=function(t,e,n,r){n!==r&&(e.flags|=4)};function yh(t,e){if(!cn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function L9(t,e,n){var r=e.pendingProps;switch(RE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mr(e),null;case 1:return Kr(e.type)&&fv(),mr(e),null;case 3:return r=e.stateNode,Lu(),sn(Xr),sn(Pr),FE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Rm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zi!==null&&(k1(Zi),Zi=null))),P1(t,e),mr(e),null;case 5:UE(e);var i=pl(Id.current);if(n=e.type,t!==null&&e.stateNode!=null)hj(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(we(166));return mr(e),null}if(t=pl(Eo.current),Rm(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[xo]=e,r[Rd]=o,t=(e.mode&1)!==0,n){case"dialog":en("cancel",r),en("close",r);break;case"iframe":case"object":case"embed":en("load",r);break;case"video":case"audio":for(i=0;i<Uh.length;i++)en(Uh[i],r);break;case"source":en("error",r);break;case"img":case"image":case"link":en("error",r),en("load",r);break;case"details":en("toggle",r);break;case"input":yP(r,o),en("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},en("invalid",r);break;case"textarea":xP(r,o),en("invalid",r)}t1(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&Cm(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Cm(r.textContent,s,t),i=["children",""+s]):xd.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&en("scroll",r)}switch(n){case"input":bm(r),_P(r,o,!0);break;case"textarea":bm(r),bP(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=uv)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Bk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[xo]=e,t[Rd]=r,fj(t,e,!1,!1),e.stateNode=t;e:{switch(a=n1(n,r),n){case"dialog":en("cancel",t),en("close",t),i=r;break;case"iframe":case"object":case"embed":en("load",t),i=r;break;case"video":case"audio":for(i=0;i<Uh.length;i++)en(Uh[i],t);i=r;break;case"source":en("error",t),i=r;break;case"img":case"image":case"link":en("error",t),en("load",t),i=r;break;case"details":en("toggle",t),i=r;break;case"input":yP(t,r),i=Yb(t,r),en("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=pn({},r,{value:void 0}),en("invalid",t);break;case"textarea":xP(t,r),i=Jb(t,r),en("invalid",t);break;default:i=r}t1(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?Hk(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&$k(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&bd(t,l):typeof l=="number"&&bd(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(xd.hasOwnProperty(o)?l!=null&&o==="onScroll"&&en("scroll",t):l!=null&&mE(t,o,l,a))}switch(n){case"input":bm(t),_P(t,r,!1);break;case"textarea":bm(t),bP(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xs(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?vu(t,!!r.multiple,o,!1):r.defaultValue!=null&&vu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=uv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mr(e),null;case 6:if(t&&e.stateNode!=null)dj(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(we(166));if(n=pl(Id.current),pl(Eo.current),Rm(e)){if(r=e.stateNode,n=e.memoizedProps,r[xo]=e,(o=r.nodeValue!==n)&&(t=ui,t!==null))switch(t.tag){case 3:Cm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cm(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xo]=e,e.stateNode=r}return mr(e),null;case 13:if(sn(fn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(cn&&ci!==null&&e.mode&1&&!(e.flags&128))O3(),Nu(),e.flags|=98560,o=!1;else if(o=Rm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(we(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(we(317));o[xo]=e}else Nu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mr(e),o=!1}else Zi!==null&&(k1(Zi),Zi=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||fn.current&1?Fn===0&&(Fn=3):QE())),e.updateQueue!==null&&(e.flags|=4),mr(e),null);case 4:return Lu(),P1(t,e),t===null&&Pd(e.stateNode.containerInfo),mr(e),null;case 10:return DE(e.type._context),mr(e),null;case 17:return Kr(e.type)&&fv(),mr(e),null;case 19:if(sn(fn),o=e.memoizedState,o===null)return mr(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)yh(o,!1);else{if(Fn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=yv(t),a!==null){for(e.flags|=128,yh(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Yt(fn,fn.current&1|2),e.child}t=t.sibling}o.tail!==null&&wn()>ju&&(e.flags|=128,r=!0,yh(o,!1),e.lanes=4194304)}else{if(!r)if(t=yv(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yh(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!cn)return mr(e),null}else 2*wn()-o.renderingStartTime>ju&&n!==1073741824&&(e.flags|=128,r=!0,yh(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=wn(),e.sibling=null,n=fn.current,Yt(fn,r?n&1|2:n&1),e):(mr(e),null);case 22:case 23:return YE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?oi&1073741824&&(mr(e),e.subtreeFlags&6&&(e.flags|=8192)):mr(e),null;case 24:return null;case 25:return null}throw Error(we(156,e.tag))}function k9(t,e){switch(RE(e),e.tag){case 1:return Kr(e.type)&&fv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Lu(),sn(Xr),sn(Pr),FE(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return UE(e),null;case 13:if(sn(fn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(we(340));Nu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return sn(fn),null;case 4:return Lu(),null;case 10:return DE(e.type._context),null;case 22:case 23:return YE(),null;case 24:return null;default:return null}}var Nm=!1,wr=!1,j9=typeof WeakSet=="function"?WeakSet:Set,$e=null;function tu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){vn(t,e,r)}else n.current=null}function C1(t,e,n){try{n()}catch(r){vn(t,e,r)}}var uC=!1;function U9(t,e){if(h1=sv,t=y3(),PE(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,c=0,u=0,f=t,h=null;t:for(;;){for(var d;f!==n||i!==0&&f.nodeType!==3||(s=a+i),f!==o||r!==0&&f.nodeType!==3||(l=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===n&&++c===i&&(s=a),h===o&&++u===r&&(l=a),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(d1={focusedElem:t,selectionRange:n},sv=!1,$e=e;$e!==null;)if(e=$e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$e=t;else for(;$e!==null;){e=$e;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,g=y.memoizedState,p=e.stateNode,x=p.getSnapshotBeforeUpdate(e.elementType===e.type?v:Xi(e.type,v),g);p.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(T){vn(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,$e=t;break}$e=e.return}return y=uC,uC=!1,y}function ed(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&C1(e,n,o)}i=i.next}while(i!==r)}}function h0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function R1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function pj(t){var e=t.alternate;e!==null&&(t.alternate=null,pj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xo],delete e[Rd],delete e[g1],delete e[x9],delete e[b9])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mj(t){return t.tag===5||t.tag===3||t.tag===4}function fC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function O1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=uv));else if(r!==4&&(t=t.child,t!==null))for(O1(t,e,n),t=t.sibling;t!==null;)O1(t,e,n),t=t.sibling}function I1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(I1(t,e,n),t=t.sibling;t!==null;)I1(t,e,n),t=t.sibling}var ir=null,Ki=!1;function La(t,e,n){for(n=n.child;n!==null;)gj(t,e,n),n=n.sibling}function gj(t,e,n){if(So&&typeof So.onCommitFiberUnmount=="function")try{So.onCommitFiberUnmount(i0,n)}catch{}switch(n.tag){case 5:wr||tu(n,e);case 6:var r=ir,i=Ki;ir=null,La(t,e,n),ir=r,Ki=i,ir!==null&&(Ki?(t=ir,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ir.removeChild(n.stateNode));break;case 18:ir!==null&&(Ki?(t=ir,n=n.stateNode,t.nodeType===8?ix(t.parentNode,n):t.nodeType===1&&ix(t,n),Td(t)):ix(ir,n.stateNode));break;case 4:r=ir,i=Ki,ir=n.stateNode.containerInfo,Ki=!0,La(t,e,n),ir=r,Ki=i;break;case 0:case 11:case 14:case 15:if(!wr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&C1(n,e,a),i=i.next}while(i!==r)}La(t,e,n);break;case 1:if(!wr&&(tu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){vn(n,e,s)}La(t,e,n);break;case 21:La(t,e,n);break;case 22:n.mode&1?(wr=(r=wr)||n.memoizedState!==null,La(t,e,n),wr=r):La(t,e,n);break;default:La(t,e,n)}}function hC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new j9),e.forEach(function(r){var i=q9.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function zi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:ir=s.stateNode,Ki=!1;break e;case 3:ir=s.stateNode.containerInfo,Ki=!0;break e;case 4:ir=s.stateNode.containerInfo,Ki=!0;break e}s=s.return}if(ir===null)throw Error(we(160));gj(o,a,i),ir=null,Ki=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){vn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vj(e,t),e=e.sibling}function vj(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zi(e,t),vo(t),r&4){try{ed(3,t,t.return),h0(3,t)}catch(v){vn(t,t.return,v)}try{ed(5,t,t.return)}catch(v){vn(t,t.return,v)}}break;case 1:zi(e,t),vo(t),r&512&&n!==null&&tu(n,n.return);break;case 5:if(zi(e,t),vo(t),r&512&&n!==null&&tu(n,n.return),t.flags&32){var i=t.stateNode;try{bd(i,"")}catch(v){vn(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&Fk(i,o),n1(s,a);var c=n1(s,o);for(a=0;a<l.length;a+=2){var u=l[a],f=l[a+1];u==="style"?Hk(i,f):u==="dangerouslySetInnerHTML"?$k(i,f):u==="children"?bd(i,f):mE(i,u,f,c)}switch(s){case"input":Qb(i,o);break;case"textarea":Vk(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var d=o.value;d!=null?vu(i,!!o.multiple,d,!1):h!==!!o.multiple&&(o.defaultValue!=null?vu(i,!!o.multiple,o.defaultValue,!0):vu(i,!!o.multiple,o.multiple?[]:"",!1))}i[Rd]=o}catch(v){vn(t,t.return,v)}}break;case 6:if(zi(e,t),vo(t),r&4){if(t.stateNode===null)throw Error(we(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(v){vn(t,t.return,v)}}break;case 3:if(zi(e,t),vo(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Td(e.containerInfo)}catch(v){vn(t,t.return,v)}break;case 4:zi(e,t),vo(t);break;case 13:zi(e,t),vo(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(XE=wn())),r&4&&hC(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(wr=(c=wr)||u,zi(e,t),wr=c):zi(e,t),vo(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for($e=t,u=t.child;u!==null;){for(f=$e=u;$e!==null;){switch(h=$e,d=h.child,h.tag){case 0:case 11:case 14:case 15:ed(4,h,h.return);break;case 1:tu(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){vn(r,n,v)}}break;case 5:tu(h,h.return);break;case 22:if(h.memoizedState!==null){pC(f);continue}}d!==null?(d.return=h,$e=d):pC(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=f.stateNode,l=f.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=zk("display",a))}catch(v){vn(t,t.return,v)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){vn(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:zi(e,t),vo(t),r&4&&hC(t);break;case 21:break;default:zi(e,t),vo(t)}}function vo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(mj(n)){var r=n;break e}n=n.return}throw Error(we(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(bd(i,""),r.flags&=-33);var o=fC(t);I1(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=fC(t);O1(t,s,a);break;default:throw Error(we(161))}}catch(l){vn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function F9(t,e,n){$e=t,yj(t)}function yj(t,e,n){for(var r=(t.mode&1)!==0;$e!==null;){var i=$e,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Nm;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||wr;s=Nm;var c=wr;if(Nm=a,(wr=l)&&!c)for($e=i;$e!==null;)a=$e,l=a.child,a.tag===22&&a.memoizedState!==null?mC(i):l!==null?(l.return=a,$e=l):mC(i);for(;o!==null;)$e=o,yj(o),o=o.sibling;$e=i,Nm=s,wr=c}dC(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,$e=o):dC(t)}}function dC(t){for(;$e!==null;){var e=$e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wr||h0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!wr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Xi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&QP(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}QP(e,a,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Td(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(we(163))}wr||e.flags&512&&R1(e)}catch(h){vn(e,e.return,h)}}if(e===t){$e=null;break}if(n=e.sibling,n!==null){n.return=e.return,$e=n;break}$e=e.return}}function pC(t){for(;$e!==null;){var e=$e;if(e===t){$e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$e=n;break}$e=e.return}}function mC(t){for(;$e!==null;){var e=$e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{h0(4,e)}catch(l){vn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){vn(e,i,l)}}var o=e.return;try{R1(e)}catch(l){vn(e,o,l)}break;case 5:var a=e.return;try{R1(e)}catch(l){vn(e,a,l)}}}catch(l){vn(e,e.return,l)}if(e===t){$e=null;break}var s=e.sibling;if(s!==null){s.return=e.return,$e=s;break}$e=e.return}}var V9=Math.ceil,bv=Pa.ReactCurrentDispatcher,WE=Pa.ReactCurrentOwner,Ni=Pa.ReactCurrentBatchConfig,Nt=0,Jn=null,Rn=null,lr=0,oi=0,nu=Ns(0),Fn=0,kd=null,jl=0,d0=0,qE=0,td=null,Hr=null,XE=0,ju=1/0,Yo=null,wv=!1,N1=null,cs=null,Dm=!1,Za=null,Sv=0,nd=0,D1=null,Vg=-1,Bg=0;function Fr(){return Nt&6?wn():Vg!==-1?Vg:Vg=wn()}function us(t){return t.mode&1?Nt&2&&lr!==0?lr&-lr:S9.transition!==null?(Bg===0&&(Bg=n3()),Bg):(t=Bt,t!==0||(t=window.event,t=t===void 0?16:c3(t.type)),t):1}function oo(t,e,n,r){if(50<nd)throw nd=0,D1=null,Error(we(185));Up(t,n,r),(!(Nt&2)||t!==Jn)&&(t===Jn&&(!(Nt&2)&&(d0|=n),Fn===4&&Ka(t,lr)),Yr(t,r),n===1&&Nt===0&&!(e.mode&1)&&(ju=wn()+500,c0&&Ds()))}function Yr(t,e){var n=t.callbackNode;S6(t,e);var r=av(t,t===Jn?lr:0);if(r===0)n!==null&&EP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&EP(n),e===1)t.tag===0?w9(gC.bind(null,t)):P3(gC.bind(null,t)),y9(function(){!(Nt&6)&&Ds()}),n=null;else{switch(r3(r)){case 1:n=xE;break;case 4:n=e3;break;case 16:n=ov;break;case 536870912:n=t3;break;default:n=ov}n=Aj(n,_j.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _j(t,e){if(Vg=-1,Bg=0,Nt&6)throw Error(we(327));var n=t.callbackNode;if(wu()&&t.callbackNode!==n)return null;var r=av(t,t===Jn?lr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ev(t,r);else{e=r;var i=Nt;Nt|=2;var o=bj();(Jn!==t||lr!==e)&&(Yo=null,ju=wn()+500,El(t,e));do try{z9();break}catch(s){xj(t,s)}while(!0);NE(),bv.current=o,Nt=i,Rn!==null?e=0:(Jn=null,lr=0,e=Fn)}if(e!==0){if(e===2&&(i=s1(t),i!==0&&(r=i,e=L1(t,i))),e===1)throw n=kd,El(t,0),Ka(t,r),Yr(t,wn()),n;if(e===6)Ka(t,r);else{if(i=t.current.alternate,!(r&30)&&!B9(i)&&(e=Ev(t,r),e===2&&(o=s1(t),o!==0&&(r=o,e=L1(t,o))),e===1))throw n=kd,El(t,0),Ka(t,r),Yr(t,wn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(we(345));case 2:tl(t,Hr,Yo);break;case 3:if(Ka(t,r),(r&130023424)===r&&(e=XE+500-wn(),10<e)){if(av(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Fr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=m1(tl.bind(null,t,Hr,Yo),e);break}tl(t,Hr,Yo);break;case 4:if(Ka(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-io(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=wn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*V9(r/1960))-r,10<r){t.timeoutHandle=m1(tl.bind(null,t,Hr,Yo),r);break}tl(t,Hr,Yo);break;case 5:tl(t,Hr,Yo);break;default:throw Error(we(329))}}}return Yr(t,wn()),t.callbackNode===n?_j.bind(null,t):null}function L1(t,e){var n=td;return t.current.memoizedState.isDehydrated&&(El(t,e).flags|=256),t=Ev(t,e),t!==2&&(e=Hr,Hr=n,e!==null&&k1(e)),t}function k1(t){Hr===null?Hr=t:Hr.push.apply(Hr,t)}function B9(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!lo(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ka(t,e){for(e&=~qE,e&=~d0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-io(e),r=1<<n;t[n]=-1,e&=~r}}function gC(t){if(Nt&6)throw Error(we(327));wu();var e=av(t,0);if(!(e&1))return Yr(t,wn()),null;var n=Ev(t,e);if(t.tag!==0&&n===2){var r=s1(t);r!==0&&(e=r,n=L1(t,r))}if(n===1)throw n=kd,El(t,0),Ka(t,e),Yr(t,wn()),n;if(n===6)throw Error(we(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,tl(t,Hr,Yo),Yr(t,wn()),null}function KE(t,e){var n=Nt;Nt|=1;try{return t(e)}finally{Nt=n,Nt===0&&(ju=wn()+500,c0&&Ds())}}function Ul(t){Za!==null&&Za.tag===0&&!(Nt&6)&&wu();var e=Nt;Nt|=1;var n=Ni.transition,r=Bt;try{if(Ni.transition=null,Bt=1,t)return t()}finally{Bt=r,Ni.transition=n,Nt=e,!(Nt&6)&&Ds()}}function YE(){oi=nu.current,sn(nu)}function El(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,v9(n)),Rn!==null)for(n=Rn.return;n!==null;){var r=n;switch(RE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fv();break;case 3:Lu(),sn(Xr),sn(Pr),FE();break;case 5:UE(r);break;case 4:Lu();break;case 13:sn(fn);break;case 19:sn(fn);break;case 10:DE(r.type._context);break;case 22:case 23:YE()}n=n.return}if(Jn=t,Rn=t=fs(t.current,null),lr=oi=e,Fn=0,kd=null,qE=d0=jl=0,Hr=td=null,dl!==null){for(e=0;e<dl.length;e++)if(n=dl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}dl=null}return t}function xj(t,e){do{var n=Rn;try{if(NE(),jg.current=xv,_v){for(var r=dn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}_v=!1}if(kl=0,Yn=kn=dn=null,Jh=!1,Nd=0,WE.current=null,n===null||n.return===null){Fn=1,kd=e,Rn=null;break}e:{var o=t,a=n.return,s=n,l=e;if(e=lr,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=s,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var d=rC(a);if(d!==null){d.flags&=-257,iC(d,a,s,o,e),d.mode&1&&nC(o,c,e),e=d,l=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){nC(o,c,e),QE();break e}l=Error(we(426))}}else if(cn&&s.mode&1){var g=rC(a);if(g!==null){!(g.flags&65536)&&(g.flags|=256),iC(g,a,s,o,e),OE(ku(l,s));break e}}o=l=ku(l,s),Fn!==4&&(Fn=2),td===null?td=[o]:td.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var p=rj(o,l,e);YP(o,p);break e;case 1:s=l;var x=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(cs===null||!cs.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e;var T=ij(o,s,e);YP(o,T);break e}}o=o.return}while(o!==null)}Sj(n)}catch(w){e=w,Rn===n&&n!==null&&(Rn=n=n.return);continue}break}while(!0)}function bj(){var t=bv.current;return bv.current=xv,t===null?xv:t}function QE(){(Fn===0||Fn===3||Fn===2)&&(Fn=4),Jn===null||!(jl&268435455)&&!(d0&268435455)||Ka(Jn,lr)}function Ev(t,e){var n=Nt;Nt|=2;var r=bj();(Jn!==t||lr!==e)&&(Yo=null,El(t,e));do try{$9();break}catch(i){xj(t,i)}while(!0);if(NE(),Nt=n,bv.current=r,Rn!==null)throw Error(we(261));return Jn=null,lr=0,Fn}function $9(){for(;Rn!==null;)wj(Rn)}function z9(){for(;Rn!==null&&!p6();)wj(Rn)}function wj(t){var e=Tj(t.alternate,t,oi);t.memoizedProps=t.pendingProps,e===null?Sj(t):Rn=e,WE.current=null}function Sj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=k9(n,e),n!==null){n.flags&=32767,Rn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fn=6,Rn=null;return}}else if(n=L9(n,e,oi),n!==null){Rn=n;return}if(e=e.sibling,e!==null){Rn=e;return}Rn=e=t}while(e!==null);Fn===0&&(Fn=5)}function tl(t,e,n){var r=Bt,i=Ni.transition;try{Ni.transition=null,Bt=1,H9(t,e,n,r)}finally{Ni.transition=i,Bt=r}return null}function H9(t,e,n,r){do wu();while(Za!==null);if(Nt&6)throw Error(we(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(we(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(E6(t,o),t===Jn&&(Rn=Jn=null,lr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dm||(Dm=!0,Aj(ov,function(){return wu(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ni.transition,Ni.transition=null;var a=Bt;Bt=1;var s=Nt;Nt|=4,WE.current=null,U9(t,n),vj(n,t),u9(d1),sv=!!h1,d1=h1=null,t.current=n,F9(n),m6(),Nt=s,Bt=a,Ni.transition=o}else t.current=n;if(Dm&&(Dm=!1,Za=t,Sv=i),o=t.pendingLanes,o===0&&(cs=null),y6(n.stateNode),Yr(t,wn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(wv)throw wv=!1,t=N1,N1=null,t;return Sv&1&&t.tag!==0&&wu(),o=t.pendingLanes,o&1?t===D1?nd++:(nd=0,D1=t):nd=0,Ds(),null}function wu(){if(Za!==null){var t=r3(Sv),e=Ni.transition,n=Bt;try{if(Ni.transition=null,Bt=16>t?16:t,Za===null)var r=!1;else{if(t=Za,Za=null,Sv=0,Nt&6)throw Error(we(331));var i=Nt;for(Nt|=4,$e=t.current;$e!==null;){var o=$e,a=o.child;if($e.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for($e=c;$e!==null;){var u=$e;switch(u.tag){case 0:case 11:case 15:ed(8,u,o)}var f=u.child;if(f!==null)f.return=u,$e=f;else for(;$e!==null;){u=$e;var h=u.sibling,d=u.return;if(pj(u),u===c){$e=null;break}if(h!==null){h.return=d,$e=h;break}$e=d}}}var y=o.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(v!==null)}}$e=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,$e=a;else e:for(;$e!==null;){if(o=$e,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ed(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,$e=p;break e}$e=o.return}}var x=t.current;for($e=x;$e!==null;){a=$e;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,$e=_;else e:for(a=x;$e!==null;){if(s=$e,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:h0(9,s)}}catch(w){vn(s,s.return,w)}if(s===a){$e=null;break e}var T=s.sibling;if(T!==null){T.return=s.return,$e=T;break e}$e=s.return}}if(Nt=i,Ds(),So&&typeof So.onPostCommitFiberRoot=="function")try{So.onPostCommitFiberRoot(i0,t)}catch{}r=!0}return r}finally{Bt=n,Ni.transition=e}}return!1}function vC(t,e,n){e=ku(n,e),e=rj(t,e,1),t=ls(t,e,1),e=Fr(),t!==null&&(Up(t,1,e),Yr(t,e))}function vn(t,e,n){if(t.tag===3)vC(t,t,n);else for(;e!==null;){if(e.tag===3){vC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cs===null||!cs.has(r))){t=ku(n,t),t=ij(e,t,1),e=ls(e,t,1),t=Fr(),e!==null&&(Up(e,1,t),Yr(e,t));break}}e=e.return}}function G9(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Fr(),t.pingedLanes|=t.suspendedLanes&n,Jn===t&&(lr&n)===n&&(Fn===4||Fn===3&&(lr&130023424)===lr&&500>wn()-XE?El(t,0):qE|=n),Yr(t,e)}function Ej(t,e){e===0&&(t.mode&1?(e=Em,Em<<=1,!(Em&130023424)&&(Em=4194304)):e=1);var n=Fr();t=ya(t,e),t!==null&&(Up(t,e,n),Yr(t,n))}function W9(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ej(t,n)}function q9(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(we(314))}r!==null&&r.delete(e),Ej(t,n)}var Tj;Tj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xr.current)Wr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Wr=!1,D9(t,e,n);Wr=!!(t.flags&131072)}else Wr=!1,cn&&e.flags&1048576&&C3(e,pv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fg(t,e),t=e.pendingProps;var i=Iu(e,Pr.current);bu(e,n),i=BE(null,e,r,t,i,n);var o=$E();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Kr(r)?(o=!0,hv(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,kE(e),i.updater=f0,e.stateNode=i,i._reactInternals=e,w1(e,r,t,n),e=T1(null,e,r,!0,o,n)):(e.tag=0,cn&&o&&CE(e),Nr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fg(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=K9(r),t=Xi(r,t),i){case 0:e=E1(null,e,r,t,n);break e;case 1:e=sC(null,e,r,t,n);break e;case 11:e=oC(null,e,r,t,n);break e;case 14:e=aC(null,e,r,Xi(r.type,t),n);break e}throw Error(we(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xi(r,i),E1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xi(r,i),sC(t,e,r,i,n);case 3:e:{if(lj(e),t===null)throw Error(we(387));r=e.pendingProps,o=e.memoizedState,i=o.element,L3(t,e),vv(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ku(Error(we(423)),e),e=lC(t,e,r,n,i);break e}else if(r!==i){i=ku(Error(we(424)),e),e=lC(t,e,r,n,i);break e}else for(ci=ss(e.stateNode.containerInfo.firstChild),ui=e,cn=!0,Zi=null,n=N3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Nu(),r===i){e=_a(t,e,n);break e}Nr(t,e,r,n)}e=e.child}return e;case 5:return k3(e),t===null&&_1(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,p1(r,i)?a=null:o!==null&&p1(r,o)&&(e.flags|=32),sj(t,e),Nr(t,e,a,n),e.child;case 6:return t===null&&_1(e),null;case 13:return cj(t,e,n);case 4:return jE(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Du(e,null,r,n):Nr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xi(r,i),oC(t,e,r,i,n);case 7:return Nr(t,e,e.pendingProps,n),e.child;case 8:return Nr(t,e,e.pendingProps.children,n),e.child;case 12:return Nr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,Yt(mv,r._currentValue),r._currentValue=a,o!==null)if(lo(o.value,a)){if(o.children===i.children&&!Xr.current){e=_a(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=sa(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),x1(o.return,n,e),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(we(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),x1(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Nr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,bu(e,n),i=ji(i),r=r(i),e.flags|=1,Nr(t,e,r,n),e.child;case 14:return r=e.type,i=Xi(r,e.pendingProps),i=Xi(r.type,i),aC(t,e,r,i,n);case 15:return oj(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xi(r,i),Fg(t,e),e.tag=1,Kr(r)?(t=!0,hv(e)):t=!1,bu(e,n),nj(e,r,i),w1(e,r,i,n),T1(null,e,r,!0,t,n);case 19:return uj(t,e,n);case 22:return aj(t,e,n)}throw Error(we(156,e.tag))};function Aj(t,e){return Jk(t,e)}function X9(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oi(t,e,n,r){return new X9(t,e,n,r)}function ZE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function K9(t){if(typeof t=="function")return ZE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vE)return 11;if(t===yE)return 14}return 2}function fs(t,e){var n=t.alternate;return n===null?(n=Oi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $g(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")ZE(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Wc:return Tl(n.children,i,o,e);case gE:a=8,i|=8;break;case Wb:return t=Oi(12,n,e,i|2),t.elementType=Wb,t.lanes=o,t;case qb:return t=Oi(13,n,e,i),t.elementType=qb,t.lanes=o,t;case Xb:return t=Oi(19,n,e,i),t.elementType=Xb,t.lanes=o,t;case kk:return p0(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Dk:a=10;break e;case Lk:a=9;break e;case vE:a=11;break e;case yE:a=14;break e;case za:a=16,r=null;break e}throw Error(we(130,t==null?t:typeof t,""))}return e=Oi(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Tl(t,e,n,r){return t=Oi(7,t,r,e),t.lanes=n,t}function p0(t,e,n,r){return t=Oi(22,t,r,e),t.elementType=kk,t.lanes=n,t.stateNode={isHidden:!1},t}function hx(t,e,n){return t=Oi(6,t,null,e),t.lanes=n,t}function dx(t,e,n){return e=Oi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Y9(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=q_(0),this.expirationTimes=q_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=q_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function JE(t,e,n,r,i,o,a,s,l){return t=new Y9(t,e,n,s,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Oi(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kE(o),t}function Q9(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Mj(t){if(!t)return bs;t=t._reactInternals;e:{if(Yl(t)!==t||t.tag!==1)throw Error(we(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Kr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(we(171))}if(t.tag===1){var n=t.type;if(Kr(n))return M3(t,n,e)}return e}function Pj(t,e,n,r,i,o,a,s,l){return t=JE(n,r,!0,t,i,o,a,s,l),t.context=Mj(null),n=t.current,r=Fr(),i=us(n),o=sa(r,i),o.callback=e??null,ls(n,o,i),t.current.lanes=i,Up(t,i,r),Yr(t,r),t}function m0(t,e,n,r){var i=e.current,o=Fr(),a=us(i);return n=Mj(n),e.context===null?e.context=n:e.pendingContext=n,e=sa(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ls(i,e,a),t!==null&&(oo(t,i,a,o),kg(t,i,a)),a}function Tv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function eT(t,e){yC(t,e),(t=t.alternate)&&yC(t,e)}function Z9(){return null}var Cj=typeof reportError=="function"?reportError:function(t){console.error(t)};function tT(t){this._internalRoot=t}g0.prototype.render=tT.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(we(409));m0(t,e,null,null)};g0.prototype.unmount=tT.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ul(function(){m0(null,t,null,null)}),e[va]=null}};function g0(t){this._internalRoot=t}g0.prototype.unstable_scheduleHydration=function(t){if(t){var e=a3();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xa.length&&e!==0&&e<Xa[n].priority;n++);Xa.splice(n,0,t),n===0&&l3(t)}};function nT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function v0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _C(){}function J9(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=Tv(a);o.call(c)}}var a=Pj(e,r,t,0,null,!1,!1,"",_C);return t._reactRootContainer=a,t[va]=a.current,Pd(t.nodeType===8?t.parentNode:t),Ul(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var c=Tv(l);s.call(c)}}var l=JE(t,0,!1,null,null,!1,!1,"",_C);return t._reactRootContainer=l,t[va]=l.current,Pd(t.nodeType===8?t.parentNode:t),Ul(function(){m0(e,l,n,r)}),l}function y0(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=Tv(a);s.call(l)}}m0(e,a,t,i)}else a=J9(n,e,t,i,r);return Tv(a)}i3=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=jh(e.pendingLanes);n!==0&&(bE(e,n|1),Yr(e,wn()),!(Nt&6)&&(ju=wn()+500,Ds()))}break;case 13:Ul(function(){var r=ya(t,1);if(r!==null){var i=Fr();oo(r,t,1,i)}}),eT(t,1)}};wE=function(t){if(t.tag===13){var e=ya(t,134217728);if(e!==null){var n=Fr();oo(e,t,134217728,n)}eT(t,134217728)}};o3=function(t){if(t.tag===13){var e=us(t),n=ya(t,e);if(n!==null){var r=Fr();oo(n,t,e,r)}eT(t,e)}};a3=function(){return Bt};s3=function(t,e){var n=Bt;try{return Bt=t,e()}finally{Bt=n}};i1=function(t,e,n){switch(e){case"input":if(Qb(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=l0(r);if(!i)throw Error(we(90));Uk(r),Qb(r,i)}}}break;case"textarea":Vk(t,n);break;case"select":e=n.value,e!=null&&vu(t,!!n.multiple,e,!1)}};qk=KE;Xk=Ul;var e8={usingClientEntryPoint:!1,Events:[Vp,Yc,l0,Gk,Wk,KE]},_h={findFiberByHostInstance:hl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},t8={bundleType:_h.bundleType,version:_h.version,rendererPackageName:_h.rendererPackageName,rendererConfig:_h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Qk(t),t===null?null:t.stateNode},findFiberByHostInstance:_h.findFiberByHostInstance||Z9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lm.isDisabled&&Lm.supportsFiber)try{i0=Lm.inject(t8),So=Lm}catch{}}mi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e8;mi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nT(e))throw Error(we(200));return Q9(t,e,null,n)};mi.createRoot=function(t,e){if(!nT(t))throw Error(we(299));var n=!1,r="",i=Cj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=JE(t,1,!1,null,null,n,!1,r,i),t[va]=e.current,Pd(t.nodeType===8?t.parentNode:t),new tT(e)};mi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(we(188)):(t=Object.keys(t).join(","),Error(we(268,t)));return t=Qk(e),t=t===null?null:t.stateNode,t};mi.flushSync=function(t){return Ul(t)};mi.hydrate=function(t,e,n){if(!v0(e))throw Error(we(200));return y0(null,t,e,!0,n)};mi.hydrateRoot=function(t,e,n){if(!nT(t))throw Error(we(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=Cj;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Pj(e,null,t,1,n??null,i,!1,o,a),t[va]=e.current,Pd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new g0(e)};mi.render=function(t,e,n){if(!v0(e))throw Error(we(200));return y0(null,t,e,!1,n)};mi.unmountComponentAtNode=function(t){if(!v0(t))throw Error(we(40));return t._reactRootContainer?(Ul(function(){y0(null,null,t,!1,function(){t._reactRootContainer=null,t[va]=null})}),!0):!1};mi.unstable_batchedUpdates=KE;mi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!v0(n))throw Error(we(200));if(t==null||t._reactInternals===void 0)throw Error(we(38));return y0(t,e,n,!1,r)};mi.version="18.3.1-next-f1338f8080-20240426";function Rj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rj)}catch(t){console.error(t)}}Rj(),Rk.exports=mi;var n8=Rk.exports,xC=n8;Hb.createRoot=xC.createRoot,Hb.hydrateRoot=xC.hydrateRoot;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const rT="158",gc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ga={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},r8=0,bC=1,i8=2,Oj=1,o8=2,Ko=3,ws=0,Vr=1,Jo=2,hs=0,Su=1,j1=2,wC=3,SC=4,a8=5,cl=100,s8=101,l8=102,EC=103,TC=104,c8=200,u8=201,f8=202,h8=203,U1=204,F1=205,d8=206,p8=207,m8=208,g8=209,v8=210,y8=211,_8=212,x8=213,b8=214,w8=0,S8=1,E8=2,Av=3,T8=4,A8=5,M8=6,P8=7,iT=0,C8=1,R8=2,ds=0,O8=1,I8=2,N8=3,D8=4,L8=5,Ij=300,Uu=301,Fu=302,V1=303,B1=304,_0=306,$1=1e3,eo=1001,z1=1002,Dr=1003,AC=1004,px=1005,Mi=1006,k8=1007,jd=1008,ps=1009,j8=1010,U8=1011,oT=1012,Nj=1013,Ja=1014,es=1015,Ud=1016,Dj=1017,Lj=1018,Al=1020,F8=1021,to=1023,V8=1024,B8=1025,Ml=1026,Vu=1027,$8=1028,kj=1029,z8=1030,jj=1031,Uj=1033,mx=33776,gx=33777,vx=33778,yx=33779,MC=35840,PC=35841,CC=35842,RC=35843,H8=36196,OC=37492,IC=37496,NC=37808,DC=37809,LC=37810,kC=37811,jC=37812,UC=37813,FC=37814,VC=37815,BC=37816,$C=37817,zC=37818,HC=37819,GC=37820,WC=37821,_x=36492,qC=36494,XC=36495,G8=36283,KC=36284,YC=36285,QC=36286,Fj=3e3,Pl=3001,W8=3200,q8=3201,Vj=0,X8=1,Pi="",jn="srgb",xa="srgb-linear",aT="display-p3",x0="display-p3-linear",Mv="linear",tn="srgb",Pv="rec709",Cv="p3",vc=7680,ZC=519,K8=512,Y8=513,Q8=514,Z8=515,J8=516,eH=517,tH=518,nH=519,JC=35044,e2="300 es",H1=1035,na=2e3,Rv=2001;class Ql{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,a=i.length;o<a;o++)i[o].call(this,e);e.target=null}}}const gr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let t2=1234567;const rd=Math.PI/180,Fd=180/Math.PI;function Rf(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(gr[t&255]+gr[t>>8&255]+gr[t>>16&255]+gr[t>>24&255]+"-"+gr[e&255]+gr[e>>8&255]+"-"+gr[e>>16&15|64]+gr[e>>24&255]+"-"+gr[n&63|128]+gr[n>>8&255]+"-"+gr[n>>16&255]+gr[n>>24&255]+gr[r&255]+gr[r>>8&255]+gr[r>>16&255]+gr[r>>24&255]).toLowerCase()}function Sr(t,e,n){return Math.max(e,Math.min(n,t))}function sT(t,e){return(t%e+e)%e}function rH(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function iH(t,e,n){return t!==e?(n-t)/(e-t):0}function id(t,e,n){return(1-n)*t+n*e}function oH(t,e,n,r){return id(t,e,1-Math.exp(-n*r))}function aH(t,e=1){return e-Math.abs(sT(t,e*2)-e)}function sH(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function lH(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function cH(t,e){return t+Math.floor(Math.random()*(e-t+1))}function uH(t,e){return t+Math.random()*(e-t)}function fH(t){return t*(.5-Math.random())}function hH(t){t!==void 0&&(t2=t);let e=t2+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function dH(t){return t*rd}function pH(t){return t*Fd}function G1(t){return(t&t-1)===0&&t!==0}function mH(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Ov(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function gH(t,e,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((e+r)/2),u=a((e+r)/2),f=o((e-r)/2),h=a((e-r)/2),d=o((r-e)/2),y=a((r-e)/2);switch(i){case"XYX":t.set(s*u,l*f,l*h,s*c);break;case"YZY":t.set(l*h,s*u,l*f,s*c);break;case"ZXZ":t.set(l*f,l*h,s*u,s*c);break;case"XZX":t.set(s*u,l*y,l*d,s*c);break;case"YXY":t.set(l*d,s*u,l*y,s*c);break;case"ZYZ":t.set(l*y,l*d,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Uc(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Rr(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Bj={DEG2RAD:rd,RAD2DEG:Fd,generateUUID:Rf,clamp:Sr,euclideanModulo:sT,mapLinear:rH,inverseLerp:iH,lerp:id,damp:oH,pingpong:aH,smoothstep:sH,smootherstep:lH,randInt:cH,randFloat:uH,randFloatSpread:fH,seededRandom:hH,degToRad:dH,radToDeg:pH,isPowerOfTwo:G1,ceilPowerOfTwo:mH,floorPowerOfTwo:Ov,setQuaternionFromProperEuler:gH,normalize:Rr,denormalize:Uc};class gt{constructor(e=0,n=0){gt.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Sr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),o=this.x-e.x,a=this.y-e.y;return this.x=o*r-a*i+e.x,this.y=o*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class wt{constructor(e,n,r,i,o,a,s,l,c){wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,a,s,l,c)}set(e,n,r,i,o,a,s,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=s,u[3]=n,u[4]=o,u[5]=l,u[6]=r,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,a=r[0],s=r[3],l=r[6],c=r[1],u=r[4],f=r[7],h=r[2],d=r[5],y=r[8],v=i[0],g=i[3],p=i[6],x=i[1],_=i[4],T=i[7],w=i[2],M=i[5],b=i[8];return o[0]=a*v+s*x+l*w,o[3]=a*g+s*_+l*M,o[6]=a*p+s*T+l*b,o[1]=c*v+u*x+f*w,o[4]=c*g+u*_+f*M,o[7]=c*p+u*T+f*b,o[2]=h*v+d*x+y*w,o[5]=h*g+d*_+y*M,o[8]=h*p+d*T+y*b,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8];return n*a*u-n*s*c-r*o*u+r*s*l+i*o*c-i*a*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=u*a-s*c,h=s*l-u*o,d=c*o-a*l,y=n*f+r*h+i*d;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/y;return e[0]=f*v,e[1]=(i*c-u*r)*v,e[2]=(s*r-i*a)*v,e[3]=h*v,e[4]=(u*n-i*l)*v,e[5]=(i*o-s*n)*v,e[6]=d*v,e[7]=(r*l-c*n)*v,e[8]=(a*n-r*o)*v,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,o,a,s){const l=Math.cos(o),c=Math.sin(o);return this.set(r*l,r*c,-r*(l*a+c*s)+a+e,-i*c,i*l,-i*(-c*a+l*s)+s+n,0,0,1),this}scale(e,n){return this.premultiply(xx.makeScale(e,n)),this}rotate(e){return this.premultiply(xx.makeRotation(-e)),this}translate(e,n){return this.premultiply(xx.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const xx=new wt;function $j(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function Vd(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function vH(){const t=Vd("canvas");return t.style.display="block",t}const n2={};function od(t){t in n2||(n2[t]=!0,console.warn(t))}const r2=new wt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),i2=new wt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),km={[xa]:{transfer:Mv,primaries:Pv,toReference:t=>t,fromReference:t=>t},[jn]:{transfer:tn,primaries:Pv,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[x0]:{transfer:Mv,primaries:Cv,toReference:t=>t.applyMatrix3(i2),fromReference:t=>t.applyMatrix3(r2)},[aT]:{transfer:tn,primaries:Cv,toReference:t=>t.convertSRGBToLinear().applyMatrix3(i2),fromReference:t=>t.applyMatrix3(r2).convertLinearToSRGB()}},yH=new Set([xa,x0]),zt={enabled:!0,_workingColorSpace:xa,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!yH.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=km[e].toReference,i=km[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return km[t].primaries},getTransfer:function(t){return t===Pi?Mv:km[t].transfer}};function Eu(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function bx(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let yc;class zj{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{yc===void 0&&(yc=Vd("canvas")),yc.width=e.width,yc.height=e.height;const r=yc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=yc}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Vd("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let a=0;a<o.length;a++)o[a]=Eu(o[a]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Eu(n[r]/255)*255):n[r]=Eu(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let _H=0;class Hj{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_H++}),this.uuid=Rf(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let a=0,s=i.length;a<s;a++)i[a].isDataTexture?o.push(wx(i[a].image)):o.push(wx(i[a]))}else o=wx(i);r.url=o}return n||(e.images[this.uuid]=r),r}}function wx(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?zj.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let xH=0;class Qr extends Ql{constructor(e=Qr.DEFAULT_IMAGE,n=Qr.DEFAULT_MAPPING,r=eo,i=eo,o=Mi,a=jd,s=to,l=ps,c=Qr.DEFAULT_ANISOTROPY,u=Pi){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:xH++}),this.uuid=Rf(),this.name="",this.source=new Hj(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=a,this.anisotropy=c,this.format=s,this.internalFormat=null,this.type=l,this.offset=new gt(0,0),this.repeat=new gt(1,1),this.center=new gt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(od("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===Pl?jn:Pi),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Ij)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case $1:e.x=e.x-Math.floor(e.x);break;case eo:e.x=e.x<0?0:1;break;case z1:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case $1:e.y=e.y-Math.floor(e.y);break;case eo:e.y=e.y<0?0:1;break;case z1:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return od("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===jn?Pl:Fj}set encoding(e){od("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Pl?jn:Pi}}Qr.DEFAULT_IMAGE=null;Qr.DEFAULT_MAPPING=Ij;Qr.DEFAULT_ANISOTROPY=1;class Zn{constructor(e=0,n=0,r=0,i=1){Zn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=this.w,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i+a[12]*o,this.y=a[1]*n+a[5]*r+a[9]*i+a[13]*o,this.z=a[2]*n+a[6]*r+a[10]*i+a[14]*o,this.w=a[3]*n+a[7]*r+a[11]*i+a[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,o;const l=e.elements,c=l[0],u=l[4],f=l[8],h=l[1],d=l[5],y=l[9],v=l[2],g=l[6],p=l[10];if(Math.abs(u-h)<.01&&Math.abs(f-v)<.01&&Math.abs(y-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(f+v)<.1&&Math.abs(y+g)<.1&&Math.abs(c+d+p-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const _=(c+1)/2,T=(d+1)/2,w=(p+1)/2,M=(u+h)/4,b=(f+v)/4,A=(y+g)/4;return _>T&&_>w?_<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(_),i=M/r,o=b/r):T>w?T<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(T),r=M/i,o=A/i):w<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(w),r=b/o,i=A/o),this.set(r,i,o,n),this}let x=Math.sqrt((g-y)*(g-y)+(f-v)*(f-v)+(h-u)*(h-u));return Math.abs(x)<.001&&(x=1),this.x=(g-y)/x,this.y=(f-v)/x,this.z=(h-u)/x,this.w=Math.acos((c+d+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class bH extends Ql{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Zn(0,0,e,n),this.scissorTest=!1,this.viewport=new Zn(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&(od("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Pl?jn:Pi),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Mi,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new Qr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Hj(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Fl extends bH{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class Gj extends Qr{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Dr,this.minFilter=Dr,this.wrapR=eo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class wH extends Qr{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Dr,this.minFilter=Dr,this.wrapR=eo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Vl{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,o,a,s){let l=r[i+0],c=r[i+1],u=r[i+2],f=r[i+3];const h=o[a+0],d=o[a+1],y=o[a+2],v=o[a+3];if(s===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f;return}if(s===1){e[n+0]=h,e[n+1]=d,e[n+2]=y,e[n+3]=v;return}if(f!==v||l!==h||c!==d||u!==y){let g=1-s;const p=l*h+c*d+u*y+f*v,x=p>=0?1:-1,_=1-p*p;if(_>Number.EPSILON){const w=Math.sqrt(_),M=Math.atan2(w,p*x);g=Math.sin(g*M)/w,s=Math.sin(s*M)/w}const T=s*x;if(l=l*g+h*T,c=c*g+d*T,u=u*g+y*T,f=f*g+v*T,g===1-s){const w=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=w,c*=w,u*=w,f*=w}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f}static multiplyQuaternionsFlat(e,n,r,i,o,a){const s=r[i],l=r[i+1],c=r[i+2],u=r[i+3],f=o[a],h=o[a+1],d=o[a+2],y=o[a+3];return e[n]=s*y+u*f+l*d-c*h,e[n+1]=l*y+u*h+c*f-s*d,e[n+2]=c*y+u*d+s*h-l*f,e[n+3]=u*y-s*f-l*h-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const r=e._x,i=e._y,o=e._z,a=e._order,s=Math.cos,l=Math.sin,c=s(r/2),u=s(i/2),f=s(o/2),h=l(r/2),d=l(i/2),y=l(o/2);switch(a){case"XYZ":this._x=h*u*f+c*d*y,this._y=c*d*f-h*u*y,this._z=c*u*y+h*d*f,this._w=c*u*f-h*d*y;break;case"YXZ":this._x=h*u*f+c*d*y,this._y=c*d*f-h*u*y,this._z=c*u*y-h*d*f,this._w=c*u*f+h*d*y;break;case"ZXY":this._x=h*u*f-c*d*y,this._y=c*d*f+h*u*y,this._z=c*u*y+h*d*f,this._w=c*u*f-h*d*y;break;case"ZYX":this._x=h*u*f-c*d*y,this._y=c*d*f+h*u*y,this._z=c*u*y-h*d*f,this._w=c*u*f+h*d*y;break;case"YZX":this._x=h*u*f+c*d*y,this._y=c*d*f+h*u*y,this._z=c*u*y-h*d*f,this._w=c*u*f-h*d*y;break;case"XZY":this._x=h*u*f-c*d*y,this._y=c*d*f-h*u*y,this._z=c*u*y+h*d*f,this._w=c*u*f+h*d*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],l=n[9],c=n[2],u=n[6],f=n[10],h=r+s+f;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(u-l)*d,this._y=(o-c)*d,this._z=(a-i)*d}else if(r>s&&r>f){const d=2*Math.sqrt(1+r-s-f);this._w=(u-l)/d,this._x=.25*d,this._y=(i+a)/d,this._z=(o+c)/d}else if(s>f){const d=2*Math.sqrt(1+s-r-f);this._w=(o-c)/d,this._x=(i+a)/d,this._y=.25*d,this._z=(l+u)/d}else{const d=2*Math.sqrt(1+f-r-s);this._w=(a-i)/d,this._x=(o+c)/d,this._y=(l+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Sr(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,o=e._z,a=e._w,s=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+a*s+i*c-o*l,this._y=i*u+a*l+o*s-r*c,this._z=o*u+a*c+r*l-i*s,this._w=a*u-r*s-i*l-o*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,a=this._w;let s=a*e._w+r*e._x+i*e._y+o*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=r,this._y=i,this._z=o,this;const l=1-s*s;if(l<=Number.EPSILON){const d=1-n;return this._w=d*a+n*this._w,this._x=d*r+n*this._x,this._y=d*i+n*this._y,this._z=d*o+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,s),f=Math.sin((1-n)*u)/c,h=Math.sin(n*u)/c;return this._w=a*f+this._w*h,this._x=r*f+this._x*h,this._y=i*f+this._y*h,this._z=o*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(o),r*Math.cos(o),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class te{constructor(e=0,n=0,r=0){te.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(o2.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(o2.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=e.elements,a=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*a,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*a,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*a,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,o=e.x,a=e.y,s=e.z,l=e.w,c=2*(a*i-s*r),u=2*(s*n-o*i),f=2*(o*r-a*n);return this.x=n+l*c+a*f-s*u,this.y=r+l*u+s*c-o*f,this.z=i+l*f+o*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,o=e.z,a=n.x,s=n.y,l=n.z;return this.x=i*l-o*s,this.y=o*a-r*l,this.z=r*s-i*a,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Sx.copy(this).projectOnVector(e),this.sub(Sx)}reflect(e){return this.sub(Sx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Sr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Sx=new te,o2=new Vl;class $p{constructor(e=new te(1/0,1/0,1/0),n=new te(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Hi.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Hi.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Hi.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let a=0,s=o.count;a<s;a++)e.isMesh===!0?e.getVertexPosition(a,Hi):Hi.fromBufferAttribute(o,a),Hi.applyMatrix4(e.matrixWorld),this.expandByPoint(Hi);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),jm.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),jm.copy(r.boundingBox)),jm.applyMatrix4(e.matrixWorld),this.union(jm)}const i=e.children;for(let o=0,a=i.length;o<a;o++)this.expandByObject(i[o],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Hi),Hi.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(xh),Um.subVectors(this.max,xh),_c.subVectors(e.a,xh),xc.subVectors(e.b,xh),bc.subVectors(e.c,xh),ka.subVectors(xc,_c),ja.subVectors(bc,xc),Ws.subVectors(_c,bc);let n=[0,-ka.z,ka.y,0,-ja.z,ja.y,0,-Ws.z,Ws.y,ka.z,0,-ka.x,ja.z,0,-ja.x,Ws.z,0,-Ws.x,-ka.y,ka.x,0,-ja.y,ja.x,0,-Ws.y,Ws.x,0];return!Ex(n,_c,xc,bc,Um)||(n=[1,0,0,0,1,0,0,0,1],!Ex(n,_c,xc,bc,Um))?!1:(Fm.crossVectors(ka,ja),n=[Fm.x,Fm.y,Fm.z],Ex(n,_c,xc,bc,Um))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Hi).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Hi).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(zo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),zo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),zo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),zo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),zo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),zo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),zo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),zo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(zo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const zo=[new te,new te,new te,new te,new te,new te,new te,new te],Hi=new te,jm=new $p,_c=new te,xc=new te,bc=new te,ka=new te,ja=new te,Ws=new te,xh=new te,Um=new te,Fm=new te,qs=new te;function Ex(t,e,n,r,i){for(let o=0,a=t.length-3;o<=a;o+=3){qs.fromArray(t,o);const s=i.x*Math.abs(qs.x)+i.y*Math.abs(qs.y)+i.z*Math.abs(qs.z),l=e.dot(qs),c=n.dot(qs),u=r.dot(qs);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>s)return!1}return!0}const SH=new $p,bh=new te,Tx=new te;class b0{constructor(e=new te,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):SH.setFromPoints(e).getCenter(r);let i=0;for(let o=0,a=e.length;o<a;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;bh.subVectors(e,this.center);const n=bh.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(bh,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Tx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(bh.copy(e.center).add(Tx)),this.expandByPoint(bh.copy(e.center).sub(Tx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ho=new te,Ax=new te,Vm=new te,Ua=new te,Mx=new te,Bm=new te,Px=new te;class w0{constructor(e=new te,n=new te(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ho)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Ho.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Ho.copy(this.origin).addScaledVector(this.direction,n),Ho.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){Ax.copy(e).add(n).multiplyScalar(.5),Vm.copy(n).sub(e).normalize(),Ua.copy(this.origin).sub(Ax);const o=e.distanceTo(n)*.5,a=-this.direction.dot(Vm),s=Ua.dot(this.direction),l=-Ua.dot(Vm),c=Ua.lengthSq(),u=Math.abs(1-a*a);let f,h,d,y;if(u>0)if(f=a*l-s,h=a*s-l,y=o*u,f>=0)if(h>=-y)if(h<=y){const v=1/u;f*=v,h*=v,d=f*(f+a*h+2*s)+h*(a*f+h+2*l)+c}else h=o,f=Math.max(0,-(a*h+s)),d=-f*f+h*(h+2*l)+c;else h=-o,f=Math.max(0,-(a*h+s)),d=-f*f+h*(h+2*l)+c;else h<=-y?(f=Math.max(0,-(-a*o+s)),h=f>0?-o:Math.min(Math.max(-o,-l),o),d=-f*f+h*(h+2*l)+c):h<=y?(f=0,h=Math.min(Math.max(-o,-l),o),d=h*(h+2*l)+c):(f=Math.max(0,-(a*o+s)),h=f>0?o:Math.min(Math.max(-o,-l),o),d=-f*f+h*(h+2*l)+c);else h=a>0?-o:o,f=Math.max(0,-(a*h+s)),d=-f*f+h*(h+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(Ax).addScaledVector(Vm,h),d}intersectSphere(e,n){Ho.subVectors(e.center,this.origin);const r=Ho.dot(this.direction),i=Ho.dot(Ho)-r*r,o=e.radius*e.radius;if(i>o)return null;const a=Math.sqrt(o-i),s=r-a,l=r+a;return l<0?null:s<0?this.at(l,n):this.at(s,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,o,a,s,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),u>=0?(o=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(o=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),r>a||o>i||((o>r||isNaN(r))&&(r=o),(a<i||isNaN(i))&&(i=a),f>=0?(s=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(s=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),r>l||s>i)||((s>r||r!==r)&&(r=s),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Ho)!==null}intersectTriangle(e,n,r,i,o){Mx.subVectors(n,e),Bm.subVectors(r,e),Px.crossVectors(Mx,Bm);let a=this.direction.dot(Px),s;if(a>0){if(i)return null;s=1}else if(a<0)s=-1,a=-a;else return null;Ua.subVectors(this.origin,e);const l=s*this.direction.dot(Bm.crossVectors(Ua,Bm));if(l<0)return null;const c=s*this.direction.dot(Mx.cross(Ua));if(c<0||l+c>a)return null;const u=-s*Ua.dot(Px);return u<0?null:this.at(u/a,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class In{constructor(e,n,r,i,o,a,s,l,c,u,f,h,d,y,v,g){In.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,a,s,l,c,u,f,h,d,y,v,g)}set(e,n,r,i,o,a,s,l,c,u,f,h,d,y,v,g){const p=this.elements;return p[0]=e,p[4]=n,p[8]=r,p[12]=i,p[1]=o,p[5]=a,p[9]=s,p[13]=l,p[2]=c,p[6]=u,p[10]=f,p[14]=h,p[3]=d,p[7]=y,p[11]=v,p[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new In().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/wc.setFromMatrixColumn(e,0).length(),o=1/wc.setFromMatrixColumn(e,1).length(),a=1/wc.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,o=e.z,a=Math.cos(r),s=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(o),f=Math.sin(o);if(e.order==="XYZ"){const h=a*u,d=a*f,y=s*u,v=s*f;n[0]=l*u,n[4]=-l*f,n[8]=c,n[1]=d+y*c,n[5]=h-v*c,n[9]=-s*l,n[2]=v-h*c,n[6]=y+d*c,n[10]=a*l}else if(e.order==="YXZ"){const h=l*u,d=l*f,y=c*u,v=c*f;n[0]=h+v*s,n[4]=y*s-d,n[8]=a*c,n[1]=a*f,n[5]=a*u,n[9]=-s,n[2]=d*s-y,n[6]=v+h*s,n[10]=a*l}else if(e.order==="ZXY"){const h=l*u,d=l*f,y=c*u,v=c*f;n[0]=h-v*s,n[4]=-a*f,n[8]=y+d*s,n[1]=d+y*s,n[5]=a*u,n[9]=v-h*s,n[2]=-a*c,n[6]=s,n[10]=a*l}else if(e.order==="ZYX"){const h=a*u,d=a*f,y=s*u,v=s*f;n[0]=l*u,n[4]=y*c-d,n[8]=h*c+v,n[1]=l*f,n[5]=v*c+h,n[9]=d*c-y,n[2]=-c,n[6]=s*l,n[10]=a*l}else if(e.order==="YZX"){const h=a*l,d=a*c,y=s*l,v=s*c;n[0]=l*u,n[4]=v-h*f,n[8]=y*f+d,n[1]=f,n[5]=a*u,n[9]=-s*u,n[2]=-c*u,n[6]=d*f+y,n[10]=h-v*f}else if(e.order==="XZY"){const h=a*l,d=a*c,y=s*l,v=s*c;n[0]=l*u,n[4]=-f,n[8]=c*u,n[1]=h*f+v,n[5]=a*u,n[9]=d*f-y,n[2]=y*f-d,n[6]=s*u,n[10]=v*f+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(EH,e,TH)}lookAt(e,n,r){const i=this.elements;return ti.subVectors(e,n),ti.lengthSq()===0&&(ti.z=1),ti.normalize(),Fa.crossVectors(r,ti),Fa.lengthSq()===0&&(Math.abs(r.z)===1?ti.x+=1e-4:ti.z+=1e-4,ti.normalize(),Fa.crossVectors(r,ti)),Fa.normalize(),$m.crossVectors(ti,Fa),i[0]=Fa.x,i[4]=$m.x,i[8]=ti.x,i[1]=Fa.y,i[5]=$m.y,i[9]=ti.y,i[2]=Fa.z,i[6]=$m.z,i[10]=ti.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,a=r[0],s=r[4],l=r[8],c=r[12],u=r[1],f=r[5],h=r[9],d=r[13],y=r[2],v=r[6],g=r[10],p=r[14],x=r[3],_=r[7],T=r[11],w=r[15],M=i[0],b=i[4],A=i[8],E=i[12],P=i[1],R=i[5],N=i[9],O=i[13],D=i[2],k=i[6],H=i[10],B=i[14],F=i[3],q=i[7],K=i[11],z=i[15];return o[0]=a*M+s*P+l*D+c*F,o[4]=a*b+s*R+l*k+c*q,o[8]=a*A+s*N+l*H+c*K,o[12]=a*E+s*O+l*B+c*z,o[1]=u*M+f*P+h*D+d*F,o[5]=u*b+f*R+h*k+d*q,o[9]=u*A+f*N+h*H+d*K,o[13]=u*E+f*O+h*B+d*z,o[2]=y*M+v*P+g*D+p*F,o[6]=y*b+v*R+g*k+p*q,o[10]=y*A+v*N+g*H+p*K,o[14]=y*E+v*O+g*B+p*z,o[3]=x*M+_*P+T*D+w*F,o[7]=x*b+_*R+T*k+w*q,o[11]=x*A+_*N+T*H+w*K,o[15]=x*E+_*O+T*B+w*z,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],o=e[12],a=e[1],s=e[5],l=e[9],c=e[13],u=e[2],f=e[6],h=e[10],d=e[14],y=e[3],v=e[7],g=e[11],p=e[15];return y*(+o*l*f-i*c*f-o*s*h+r*c*h+i*s*d-r*l*d)+v*(+n*l*d-n*c*h+o*a*h-i*a*d+i*c*u-o*l*u)+g*(+n*c*f-n*s*d-o*a*f+r*a*d+o*s*u-r*c*u)+p*(-i*s*u-n*l*f+n*s*h+i*a*f-r*a*h+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],d=e[11],y=e[12],v=e[13],g=e[14],p=e[15],x=f*g*c-v*h*c+v*l*d-s*g*d-f*l*p+s*h*p,_=y*h*c-u*g*c-y*l*d+a*g*d+u*l*p-a*h*p,T=u*v*c-y*f*c+y*s*d-a*v*d-u*s*p+a*f*p,w=y*f*l-u*v*l-y*s*h+a*v*h+u*s*g-a*f*g,M=n*x+r*_+i*T+o*w;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const b=1/M;return e[0]=x*b,e[1]=(v*h*o-f*g*o-v*i*d+r*g*d+f*i*p-r*h*p)*b,e[2]=(s*g*o-v*l*o+v*i*c-r*g*c-s*i*p+r*l*p)*b,e[3]=(f*l*o-s*h*o-f*i*c+r*h*c+s*i*d-r*l*d)*b,e[4]=_*b,e[5]=(u*g*o-y*h*o+y*i*d-n*g*d-u*i*p+n*h*p)*b,e[6]=(y*l*o-a*g*o-y*i*c+n*g*c+a*i*p-n*l*p)*b,e[7]=(a*h*o-u*l*o+u*i*c-n*h*c-a*i*d+n*l*d)*b,e[8]=T*b,e[9]=(y*f*o-u*v*o-y*r*d+n*v*d+u*r*p-n*f*p)*b,e[10]=(a*v*o-y*s*o+y*r*c-n*v*c-a*r*p+n*s*p)*b,e[11]=(u*s*o-a*f*o-u*r*c+n*f*c+a*r*d-n*s*d)*b,e[12]=w*b,e[13]=(u*v*i-y*f*i+y*r*h-n*v*h-u*r*g+n*f*g)*b,e[14]=(y*s*i-a*v*i-y*r*l+n*v*l+a*r*g-n*s*g)*b,e[15]=(a*f*i-u*s*i+u*r*l-n*f*l-a*r*h+n*s*h)*b,this}scale(e){const n=this.elements,r=e.x,i=e.y,o=e.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),o=1-r,a=e.x,s=e.y,l=e.z,c=o*a,u=o*s;return this.set(c*a+r,c*s-i*l,c*l+i*s,0,c*s+i*l,u*s+r,u*l-i*a,0,c*l-i*s,u*l+i*a,o*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,o,a){return this.set(1,r,o,0,e,1,a,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,o=n._x,a=n._y,s=n._z,l=n._w,c=o+o,u=a+a,f=s+s,h=o*c,d=o*u,y=o*f,v=a*u,g=a*f,p=s*f,x=l*c,_=l*u,T=l*f,w=r.x,M=r.y,b=r.z;return i[0]=(1-(v+p))*w,i[1]=(d+T)*w,i[2]=(y-_)*w,i[3]=0,i[4]=(d-T)*M,i[5]=(1-(h+p))*M,i[6]=(g+x)*M,i[7]=0,i[8]=(y+_)*b,i[9]=(g-x)*b,i[10]=(1-(h+v))*b,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let o=wc.set(i[0],i[1],i[2]).length();const a=wc.set(i[4],i[5],i[6]).length(),s=wc.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],Gi.copy(this);const c=1/o,u=1/a,f=1/s;return Gi.elements[0]*=c,Gi.elements[1]*=c,Gi.elements[2]*=c,Gi.elements[4]*=u,Gi.elements[5]*=u,Gi.elements[6]*=u,Gi.elements[8]*=f,Gi.elements[9]*=f,Gi.elements[10]*=f,n.setFromRotationMatrix(Gi),r.x=o,r.y=a,r.z=s,this}makePerspective(e,n,r,i,o,a,s=na){const l=this.elements,c=2*o/(n-e),u=2*o/(r-i),f=(n+e)/(n-e),h=(r+i)/(r-i);let d,y;if(s===na)d=-(a+o)/(a-o),y=-2*a*o/(a-o);else if(s===Rv)d=-a/(a-o),y=-a*o/(a-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=y,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,o,a,s=na){const l=this.elements,c=1/(n-e),u=1/(r-i),f=1/(a-o),h=(n+e)*c,d=(r+i)*u;let y,v;if(s===na)y=(a+o)*f,v=-2*f;else if(s===Rv)y=o*f,v=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=v,l[14]=-y,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const wc=new te,Gi=new In,EH=new te(0,0,0),TH=new te(1,1,1),Fa=new te,$m=new te,ti=new te,a2=new In,s2=new Vl;class S0{constructor(e=0,n=0,r=0,i=S0.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,o=i[0],a=i[4],s=i[8],l=i[1],c=i[5],u=i[9],f=i[2],h=i[6],d=i[10];switch(n){case"XYZ":this._y=Math.asin(Sr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Sr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(Sr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-Sr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Sr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-Sr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return a2.makeRotationFromQuaternion(e),this.setFromRotationMatrix(a2,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return s2.setFromEuler(this),this.setFromQuaternion(s2,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}S0.DEFAULT_ORDER="XYZ";class lT{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let AH=0;const l2=new te,Sc=new Vl,Go=new In,zm=new te,wh=new te,MH=new te,PH=new Vl,c2=new te(1,0,0),u2=new te(0,1,0),f2=new te(0,0,1),CH={type:"added"},RH={type:"removed"};class cr extends Ql{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:AH++}),this.uuid=Rf(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=cr.DEFAULT_UP.clone();const e=new te,n=new S0,r=new Vl,i=new te(1,1,1);function o(){r.setFromEuler(n,!1)}function a(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new In},normalMatrix:{value:new wt}}),this.matrix=new In,this.matrixWorld=new In,this.matrixAutoUpdate=cr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new lT,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Sc.setFromAxisAngle(e,n),this.quaternion.multiply(Sc),this}rotateOnWorldAxis(e,n){return Sc.setFromAxisAngle(e,n),this.quaternion.premultiply(Sc),this}rotateX(e){return this.rotateOnAxis(c2,e)}rotateY(e){return this.rotateOnAxis(u2,e)}rotateZ(e){return this.rotateOnAxis(f2,e)}translateOnAxis(e,n){return l2.copy(e).applyQuaternion(this.quaternion),this.position.add(l2.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(c2,e)}translateY(e){return this.translateOnAxis(u2,e)}translateZ(e){return this.translateOnAxis(f2,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Go.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?zm.copy(e):zm.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),wh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Go.lookAt(wh,zm,this.up):Go.lookAt(zm,wh,this.up),this.quaternion.setFromRotationMatrix(Go),i&&(Go.extractRotation(i.matrixWorld),Sc.setFromRotationMatrix(Go),this.quaternion.premultiply(Sc.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(CH)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(RH)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Go.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Go.multiply(e.parent.matrixWorld)),e.applyMatrix4(Go),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,n);if(a!==void 0)return a}}getObjectsByProperty(e,n){let r=[];this[e]===n&&r.push(this);for(let i=0,o=this.children.length;i<o;i++){const a=this.children[i].getObjectsByProperty(e,n);a.length>0&&(r=r.concat(a))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wh,e,MH),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wh,PH,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const o=n[r];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let o=0,a=i.length;o<a;o++){const s=i[o];s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function o(s,l){return s[l.uuid]===void 0&&(s[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const l=s.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];o(e.shapes,f)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let l=0,c=this.material.length;l<c;l++)s.push(o(e.materials,this.material[l]));i.material=s}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++){const l=this.animations[s];i.animations.push(o(e.animations,l))}}if(n){const s=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),f=a(e.shapes),h=a(e.skeletons),d=a(e.animations),y=a(e.nodes);s.length>0&&(r.geometries=s),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),f.length>0&&(r.shapes=f),h.length>0&&(r.skeletons=h),d.length>0&&(r.animations=d),y.length>0&&(r.nodes=y)}return r.object=i,r;function a(s){const l=[];for(const c in s){const u=s[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}cr.DEFAULT_UP=new te(0,1,0);cr.DEFAULT_MATRIX_AUTO_UPDATE=!0;cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Wi=new te,Wo=new te,Cx=new te,qo=new te,Ec=new te,Tc=new te,h2=new te,Rx=new te,Ox=new te,Ix=new te;let Hm=!1;class Ji{constructor(e=new te,n=new te,r=new te){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Wi.subVectors(e,n),i.cross(Wi);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,n,r,i,o){Wi.subVectors(i,n),Wo.subVectors(r,n),Cx.subVectors(e,n);const a=Wi.dot(Wi),s=Wi.dot(Wo),l=Wi.dot(Cx),c=Wo.dot(Wo),u=Wo.dot(Cx),f=a*c-s*s;if(f===0)return o.set(-2,-1,-1);const h=1/f,d=(c*l-s*u)*h,y=(a*u-s*l)*h;return o.set(1-d-y,y,d)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,qo),qo.x>=0&&qo.y>=0&&qo.x+qo.y<=1}static getUV(e,n,r,i,o,a,s,l){return Hm===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Hm=!0),this.getInterpolation(e,n,r,i,o,a,s,l)}static getInterpolation(e,n,r,i,o,a,s,l){return this.getBarycoord(e,n,r,i,qo),l.setScalar(0),l.addScaledVector(o,qo.x),l.addScaledVector(a,qo.y),l.addScaledVector(s,qo.z),l}static isFrontFacing(e,n,r,i){return Wi.subVectors(r,n),Wo.subVectors(e,n),Wi.cross(Wo).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Wi.subVectors(this.c,this.b),Wo.subVectors(this.a,this.b),Wi.cross(Wo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ji.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Ji.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,o){return Hm===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Hm=!0),Ji.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}getInterpolation(e,n,r,i,o){return Ji.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}containsPoint(e){return Ji.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ji.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,o=this.c;let a,s;Ec.subVectors(i,r),Tc.subVectors(o,r),Rx.subVectors(e,r);const l=Ec.dot(Rx),c=Tc.dot(Rx);if(l<=0&&c<=0)return n.copy(r);Ox.subVectors(e,i);const u=Ec.dot(Ox),f=Tc.dot(Ox);if(u>=0&&f<=u)return n.copy(i);const h=l*f-u*c;if(h<=0&&l>=0&&u<=0)return a=l/(l-u),n.copy(r).addScaledVector(Ec,a);Ix.subVectors(e,o);const d=Ec.dot(Ix),y=Tc.dot(Ix);if(y>=0&&d<=y)return n.copy(o);const v=d*c-l*y;if(v<=0&&c>=0&&y<=0)return s=c/(c-y),n.copy(r).addScaledVector(Tc,s);const g=u*y-d*f;if(g<=0&&f-u>=0&&d-y>=0)return h2.subVectors(o,i),s=(f-u)/(f-u+(d-y)),n.copy(i).addScaledVector(h2,s);const p=1/(g+v+h);return a=v*p,s=h*p,n.copy(r).addScaledVector(Ec,a).addScaledVector(Tc,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Wj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Va={h:0,s:0,l:0},Gm={h:0,s:0,l:0};function Nx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}let Ot=class{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=jn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,zt.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=zt.workingColorSpace){return this.r=e,this.g=n,this.b=r,zt.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=zt.workingColorSpace){if(e=sT(e,1),n=Sr(n,0,1),r=Sr(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,a=2*r-o;this.r=Nx(a,o,e+1/3),this.g=Nx(a,o,e),this.b=Nx(a,o,e-1/3)}return zt.toWorkingColorSpace(this,i),this}setStyle(e,n=jn){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const a=i[1],s=i[2];switch(a){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],a=o.length;if(a===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(a===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=jn){const r=Wj[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Eu(e.r),this.g=Eu(e.g),this.b=Eu(e.b),this}copyLinearToSRGB(e){return this.r=bx(e.r),this.g=bx(e.g),this.b=bx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=jn){return zt.fromWorkingColorSpace(vr.copy(this),e),Math.round(Sr(vr.r*255,0,255))*65536+Math.round(Sr(vr.g*255,0,255))*256+Math.round(Sr(vr.b*255,0,255))}getHexString(e=jn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=zt.workingColorSpace){zt.fromWorkingColorSpace(vr.copy(this),n);const r=vr.r,i=vr.g,o=vr.b,a=Math.max(r,i,o),s=Math.min(r,i,o);let l,c;const u=(s+a)/2;if(s===a)l=0,c=0;else{const f=a-s;switch(c=u<=.5?f/(a+s):f/(2-a-s),a){case r:l=(i-o)/f+(i<o?6:0);break;case i:l=(o-r)/f+2;break;case o:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=zt.workingColorSpace){return zt.fromWorkingColorSpace(vr.copy(this),n),e.r=vr.r,e.g=vr.g,e.b=vr.b,e}getStyle(e=jn){zt.fromWorkingColorSpace(vr.copy(this),e);const n=vr.r,r=vr.g,i=vr.b;return e!==jn?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Va),this.setHSL(Va.h+e,Va.s+n,Va.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Va),e.getHSL(Gm);const r=id(Va.h,Gm.h,n),i=id(Va.s,Gm.s,n),o=id(Va.l,Gm.l,n);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*n+o[3]*r+o[6]*i,this.g=o[1]*n+o[4]*r+o[7]*i,this.b=o[2]*n+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const vr=new Ot;Ot.NAMES=Wj;let OH=0;class Of extends Ql{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:OH++}),this.uuid=Rf(),this.name="",this.type="Material",this.blending=Su,this.side=ws,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=U1,this.blendDst=F1,this.blendEquation=cl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ot(0,0,0),this.blendAlpha=0,this.depthFunc=Av,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ZC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=vc,this.stencilZFail=vc,this.stencilZPass=vc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Su&&(r.blending=this.blending),this.side!==ws&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==U1&&(r.blendSrc=this.blendSrc),this.blendDst!==F1&&(r.blendDst=this.blendDst),this.blendEquation!==cl&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Av&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ZC&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==vc&&(r.stencilFail=this.stencilFail),this.stencilZFail!==vc&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==vc&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const a=[];for(const s in o){const l=o[s];delete l.metadata,a.push(l)}return a}if(n){const o=i(e.textures),a=i(e.images);o.length>0&&(r.textures=o),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class cT extends Of{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ot(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=iT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Mn=new te,Wm=new gt;class To{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=JC,this.updateRange={offset:0,count:-1},this.gpuType=es,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)Wm.fromBufferAttribute(this,n),Wm.applyMatrix3(e),this.setXY(n,Wm.x,Wm.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Mn.fromBufferAttribute(this,n),Mn.applyMatrix3(e),this.setXYZ(n,Mn.x,Mn.y,Mn.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Mn.fromBufferAttribute(this,n),Mn.applyMatrix4(e),this.setXYZ(n,Mn.x,Mn.y,Mn.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Mn.fromBufferAttribute(this,n),Mn.applyNormalMatrix(e),this.setXYZ(n,Mn.x,Mn.y,Mn.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Mn.fromBufferAttribute(this,n),Mn.transformDirection(e),this.setXYZ(n,Mn.x,Mn.y,Mn.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=Uc(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Rr(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Uc(n,this.array)),n}setX(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Uc(n,this.array)),n}setY(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Uc(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Uc(n,this.array)),n}setW(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array),o=Rr(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==JC&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class qj extends To{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class Xj extends To{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Di extends To{constructor(e,n,r){super(new Float32Array(e),n,r)}}let IH=0;const _i=new In,Dx=new cr,Ac=new te,ni=new $p,Sh=new $p,qn=new te;class jo extends Ql{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:IH++}),this.uuid=Rf(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new($j(e)?Xj:qj)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new wt().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return _i.makeRotationFromQuaternion(e),this.applyMatrix4(_i),this}rotateX(e){return _i.makeRotationX(e),this.applyMatrix4(_i),this}rotateY(e){return _i.makeRotationY(e),this.applyMatrix4(_i),this}rotateZ(e){return _i.makeRotationZ(e),this.applyMatrix4(_i),this}translate(e,n,r){return _i.makeTranslation(e,n,r),this.applyMatrix4(_i),this}scale(e,n,r){return _i.makeScale(e,n,r),this.applyMatrix4(_i),this}lookAt(e){return Dx.lookAt(e),Dx.updateMatrix(),this.applyMatrix4(Dx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ac).negate(),this.translate(Ac.x,Ac.y,Ac.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Di(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new $p);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new te(-1/0,-1/0,-1/0),new te(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const o=n[r];ni.setFromBufferAttribute(o),this.morphTargetsRelative?(qn.addVectors(this.boundingBox.min,ni.min),this.boundingBox.expandByPoint(qn),qn.addVectors(this.boundingBox.max,ni.max),this.boundingBox.expandByPoint(qn)):(this.boundingBox.expandByPoint(ni.min),this.boundingBox.expandByPoint(ni.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new b0);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new te,1/0);return}if(e){const r=this.boundingSphere.center;if(ni.setFromBufferAttribute(e),n)for(let o=0,a=n.length;o<a;o++){const s=n[o];Sh.setFromBufferAttribute(s),this.morphTargetsRelative?(qn.addVectors(ni.min,Sh.min),ni.expandByPoint(qn),qn.addVectors(ni.max,Sh.max),ni.expandByPoint(qn)):(ni.expandByPoint(Sh.min),ni.expandByPoint(Sh.max))}ni.getCenter(r);let i=0;for(let o=0,a=e.count;o<a;o++)qn.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(qn));if(n)for(let o=0,a=n.length;o<a;o++){const s=n[o],l=this.morphTargetsRelative;for(let c=0,u=s.count;c<u;c++)qn.fromBufferAttribute(s,c),l&&(Ac.fromBufferAttribute(e,c),qn.add(Ac)),i=Math.max(i,r.distanceToSquared(qn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,o=n.normal.array,a=n.uv.array,s=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new To(new Float32Array(4*s),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let P=0;P<s;P++)c[P]=new te,u[P]=new te;const f=new te,h=new te,d=new te,y=new gt,v=new gt,g=new gt,p=new te,x=new te;function _(P,R,N){f.fromArray(i,P*3),h.fromArray(i,R*3),d.fromArray(i,N*3),y.fromArray(a,P*2),v.fromArray(a,R*2),g.fromArray(a,N*2),h.sub(f),d.sub(f),v.sub(y),g.sub(y);const O=1/(v.x*g.y-g.x*v.y);isFinite(O)&&(p.copy(h).multiplyScalar(g.y).addScaledVector(d,-v.y).multiplyScalar(O),x.copy(d).multiplyScalar(v.x).addScaledVector(h,-g.x).multiplyScalar(O),c[P].add(p),c[R].add(p),c[N].add(p),u[P].add(x),u[R].add(x),u[N].add(x))}let T=this.groups;T.length===0&&(T=[{start:0,count:r.length}]);for(let P=0,R=T.length;P<R;++P){const N=T[P],O=N.start,D=N.count;for(let k=O,H=O+D;k<H;k+=3)_(r[k+0],r[k+1],r[k+2])}const w=new te,M=new te,b=new te,A=new te;function E(P){b.fromArray(o,P*3),A.copy(b);const R=c[P];w.copy(R),w.sub(b.multiplyScalar(b.dot(R))).normalize(),M.crossVectors(A,R);const O=M.dot(u[P])<0?-1:1;l[P*4]=w.x,l[P*4+1]=w.y,l[P*4+2]=w.z,l[P*4+3]=O}for(let P=0,R=T.length;P<R;++P){const N=T[P],O=N.start,D=N.count;for(let k=O,H=O+D;k<H;k+=3)E(r[k+0]),E(r[k+1]),E(r[k+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new To(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let h=0,d=r.count;h<d;h++)r.setXYZ(h,0,0,0);const i=new te,o=new te,a=new te,s=new te,l=new te,c=new te,u=new te,f=new te;if(e)for(let h=0,d=e.count;h<d;h+=3){const y=e.getX(h+0),v=e.getX(h+1),g=e.getX(h+2);i.fromBufferAttribute(n,y),o.fromBufferAttribute(n,v),a.fromBufferAttribute(n,g),u.subVectors(a,o),f.subVectors(i,o),u.cross(f),s.fromBufferAttribute(r,y),l.fromBufferAttribute(r,v),c.fromBufferAttribute(r,g),s.add(u),l.add(u),c.add(u),r.setXYZ(y,s.x,s.y,s.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,d=n.count;h<d;h+=3)i.fromBufferAttribute(n,h+0),o.fromBufferAttribute(n,h+1),a.fromBufferAttribute(n,h+2),u.subVectors(a,o),f.subVectors(i,o),u.cross(f),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)qn.fromBufferAttribute(e,n),qn.normalize(),e.setXYZ(n,qn.x,qn.y,qn.z)}toNonIndexed(){function e(s,l){const c=s.array,u=s.itemSize,f=s.normalized,h=new c.constructor(l.length*u);let d=0,y=0;for(let v=0,g=l.length;v<g;v++){s.isInterleavedBufferAttribute?d=l[v]*s.data.stride+s.offset:d=l[v]*u;for(let p=0;p<u;p++)h[y++]=c[d++]}return new To(h,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new jo,r=this.index.array,i=this.attributes;for(const s in i){const l=i[s],c=e(l,r);n.setAttribute(s,c)}const o=this.morphAttributes;for(const s in o){const l=[],c=o[s];for(let u=0,f=c.length;u<f;u++){const h=c[u],d=e(h,r);l.push(d)}n.morphAttributes[s]=l}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let s=0,l=a.length;s<l;s++){const c=a[s];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let o=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,h=c.length;f<h;f++){const d=c[f];u.push(d.toJSON(e.data))}u.length>0&&(i[l]=u,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return s!==null&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const o=e.morphAttributes;for(const c in o){const u=[],f=o[c];for(let h=0,d=f.length;h<d;h++)u.push(f[h].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const f=a[c];this.addGroup(f.start,f.count,f.materialIndex)}const s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const d2=new In,Xs=new w0,qm=new b0,p2=new te,Mc=new te,Pc=new te,Cc=new te,Lx=new te,Xm=new te,Km=new gt,Ym=new gt,Qm=new gt,m2=new te,g2=new te,v2=new te,Zm=new te,Jm=new te;class Gr extends cr{constructor(e=new jo,n=new cT){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,a=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const s=this.morphTargetInfluences;if(o&&s){Xm.set(0,0,0);for(let l=0,c=o.length;l<c;l++){const u=s[l],f=o[l];u!==0&&(Lx.fromBufferAttribute(f,e),a?Xm.addScaledVector(Lx,u):Xm.addScaledVector(Lx.sub(n),u))}n.add(Xm)}return n}raycast(e,n){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),qm.copy(r.boundingSphere),qm.applyMatrix4(o),Xs.copy(e.ray).recast(e.near),!(qm.containsPoint(Xs.origin)===!1&&(Xs.intersectSphere(qm,p2)===null||Xs.origin.distanceToSquared(p2)>(e.far-e.near)**2))&&(d2.copy(o).invert(),Xs.copy(e.ray).applyMatrix4(d2),!(r.boundingBox!==null&&Xs.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Xs)))}_computeIntersections(e,n,r){let i;const o=this.geometry,a=this.material,s=o.index,l=o.attributes.position,c=o.attributes.uv,u=o.attributes.uv1,f=o.attributes.normal,h=o.groups,d=o.drawRange;if(s!==null)if(Array.isArray(a))for(let y=0,v=h.length;y<v;y++){const g=h[y],p=a[g.materialIndex],x=Math.max(g.start,d.start),_=Math.min(s.count,Math.min(g.start+g.count,d.start+d.count));for(let T=x,w=_;T<w;T+=3){const M=s.getX(T),b=s.getX(T+1),A=s.getX(T+2);i=eg(this,p,e,r,c,u,f,M,b,A),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const y=Math.max(0,d.start),v=Math.min(s.count,d.start+d.count);for(let g=y,p=v;g<p;g+=3){const x=s.getX(g),_=s.getX(g+1),T=s.getX(g+2);i=eg(this,a,e,r,c,u,f,x,_,T),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let y=0,v=h.length;y<v;y++){const g=h[y],p=a[g.materialIndex],x=Math.max(g.start,d.start),_=Math.min(l.count,Math.min(g.start+g.count,d.start+d.count));for(let T=x,w=_;T<w;T+=3){const M=T,b=T+1,A=T+2;i=eg(this,p,e,r,c,u,f,M,b,A),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const y=Math.max(0,d.start),v=Math.min(l.count,d.start+d.count);for(let g=y,p=v;g<p;g+=3){const x=g,_=g+1,T=g+2;i=eg(this,a,e,r,c,u,f,x,_,T),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}}}function NH(t,e,n,r,i,o,a,s){let l;if(e.side===Vr?l=r.intersectTriangle(a,o,i,!0,s):l=r.intersectTriangle(i,o,a,e.side===ws,s),l===null)return null;Jm.copy(s),Jm.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Jm);return c<n.near||c>n.far?null:{distance:c,point:Jm.clone(),object:t}}function eg(t,e,n,r,i,o,a,s,l,c){t.getVertexPosition(s,Mc),t.getVertexPosition(l,Pc),t.getVertexPosition(c,Cc);const u=NH(t,e,n,r,Mc,Pc,Cc,Zm);if(u){i&&(Km.fromBufferAttribute(i,s),Ym.fromBufferAttribute(i,l),Qm.fromBufferAttribute(i,c),u.uv=Ji.getInterpolation(Zm,Mc,Pc,Cc,Km,Ym,Qm,new gt)),o&&(Km.fromBufferAttribute(o,s),Ym.fromBufferAttribute(o,l),Qm.fromBufferAttribute(o,c),u.uv1=Ji.getInterpolation(Zm,Mc,Pc,Cc,Km,Ym,Qm,new gt),u.uv2=u.uv1),a&&(m2.fromBufferAttribute(a,s),g2.fromBufferAttribute(a,l),v2.fromBufferAttribute(a,c),u.normal=Ji.getInterpolation(Zm,Mc,Pc,Cc,m2,g2,v2,new te),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const f={a:s,b:l,c,normal:new te,materialIndex:0};Ji.getNormal(Mc,Pc,Cc,f.normal),u.face=f}return u}class zp extends jo{constructor(e=1,n=1,r=1,i=1,o=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:a};const s=this;i=Math.floor(i),o=Math.floor(o),a=Math.floor(a);const l=[],c=[],u=[],f=[];let h=0,d=0;y("z","y","x",-1,-1,r,n,e,a,o,0),y("z","y","x",1,-1,r,n,-e,a,o,1),y("x","z","y",1,1,e,r,n,i,a,2),y("x","z","y",1,-1,e,r,-n,i,a,3),y("x","y","z",1,-1,e,n,r,i,o,4),y("x","y","z",-1,-1,e,n,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new Di(c,3)),this.setAttribute("normal",new Di(u,3)),this.setAttribute("uv",new Di(f,2));function y(v,g,p,x,_,T,w,M,b,A,E){const P=T/b,R=w/A,N=T/2,O=w/2,D=M/2,k=b+1,H=A+1;let B=0,F=0;const q=new te;for(let K=0;K<H;K++){const z=K*R-O;for(let X=0;X<k;X++){const ee=X*P-N;q[v]=ee*x,q[g]=z*_,q[p]=D,c.push(q.x,q.y,q.z),q[v]=0,q[g]=0,q[p]=M>0?1:-1,u.push(q.x,q.y,q.z),f.push(X/b),f.push(1-K/A),B+=1}}for(let K=0;K<A;K++)for(let z=0;z<b;z++){const X=h+z+k*K,ee=h+z+k*(K+1),me=h+(z+1)+k*(K+1),_e=h+(z+1)+k*K;l.push(X,ee,_e),l.push(ee,me,_e),F+=6}s.addGroup(d,F,E),d+=F,h+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Bu(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Or(t){const e={};for(let n=0;n<t.length;n++){const r=Bu(t[n]);for(const i in r)e[i]=r[i]}return e}function DH(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function Kj(t){return t.getRenderTarget()===null?t.outputColorSpace:zt.workingColorSpace}const LH={clone:Bu,merge:Or};var kH=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,jH=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ba extends Of{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=kH,this.fragmentShader=jH,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Bu(e.uniforms),this.uniformsGroups=DH(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?n.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?n.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[i]={type:"m4",value:a.toArray()}:n.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class Yj extends cr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new In,this.projectionMatrix=new In,this.projectionMatrixInverse=new In,this.coordinateSystem=na}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class si extends Yj{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Fd*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(rd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Fd*2*Math.atan(Math.tan(rd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,o,a){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(rd*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;o+=a.offsetX*i/l,n-=a.offsetY*r/c,i*=a.width/l,r*=a.height/c}const s=this.filmOffset;s!==0&&(o+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Rc=-90,Oc=1;class UH extends cr{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new si(Rc,Oc,e,n);i.layers=this.layers,this.add(i);const o=new si(Rc,Oc,e,n);o.layers=this.layers,this.add(o);const a=new si(Rc,Oc,e,n);a.layers=this.layers,this.add(a);const s=new si(Rc,Oc,e,n);s.layers=this.layers,this.add(s);const l=new si(Rc,Oc,e,n);l.layers=this.layers,this.add(l);const c=new si(Rc,Oc,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,o,a,s,l]=n;for(const c of n)this.remove(c);if(e===na)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Rv)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,a,s,l,c,u]=this.children,f=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,o),e.setRenderTarget(r,1,i),e.render(n,a),e.setRenderTarget(r,2,i),e.render(n,s),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(f,h,d),e.xr.enabled=y,r.texture.needsPMREMUpdate=!0}}class Qj extends Qr{constructor(e,n,r,i,o,a,s,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:Uu,super(e,n,r,i,o,a,s,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class FH extends Fl{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&(od("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Pl?jn:Pi),this.texture=new Qj(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Mi}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new zp(5,5,5),o=new ba({name:"CubemapFromEquirect",uniforms:Bu(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Vr,blending:hs});o.uniforms.tEquirect.value=n;const a=new Gr(i,o),s=n.minFilter;return n.minFilter===jd&&(n.minFilter=Mi),new UH(1,10,this).update(e,a),n.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,n,r,i){const o=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(n,r,i);e.setRenderTarget(o)}}const kx=new te,VH=new te,BH=new wt;class Wa{constructor(e=new te(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=kx.subVectors(r,n).cross(VH.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(kx),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:n.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||BH.getNormalMatrix(e),i=this.coplanarPoint(kx).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ks=new b0,tg=new te;class uT{constructor(e=new Wa,n=new Wa,r=new Wa,i=new Wa,o=new Wa,a=new Wa){this.planes=[e,n,r,i,o,a]}set(e,n,r,i,o,a){const s=this.planes;return s[0].copy(e),s[1].copy(n),s[2].copy(r),s[3].copy(i),s[4].copy(o),s[5].copy(a),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=na){const r=this.planes,i=e.elements,o=i[0],a=i[1],s=i[2],l=i[3],c=i[4],u=i[5],f=i[6],h=i[7],d=i[8],y=i[9],v=i[10],g=i[11],p=i[12],x=i[13],_=i[14],T=i[15];if(r[0].setComponents(l-o,h-c,g-d,T-p).normalize(),r[1].setComponents(l+o,h+c,g+d,T+p).normalize(),r[2].setComponents(l+a,h+u,g+y,T+x).normalize(),r[3].setComponents(l-a,h-u,g-y,T-x).normalize(),r[4].setComponents(l-s,h-f,g-v,T-_).normalize(),n===na)r[5].setComponents(l+s,h+f,g+v,T+_).normalize();else if(n===Rv)r[5].setComponents(s,f,v,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ks.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Ks.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ks)}intersectsSprite(e){return Ks.center.set(0,0,0),Ks.radius=.7071067811865476,Ks.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ks)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(tg.x=i.normal.x>0?e.max.x:e.min.x,tg.y=i.normal.y>0?e.max.y:e.min.y,tg.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(tg)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Zj(){let t=null,e=!1,n=null,r=null;function i(o,a){n(o,a),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function $H(t,e){const n=e.isWebGL2,r=new WeakMap;function i(c,u){const f=c.array,h=c.usage,d=t.createBuffer();t.bindBuffer(u,d),t.bufferData(u,f,h),c.onUploadCallback();let y;if(f instanceof Float32Array)y=t.FLOAT;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)y=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else y=t.UNSIGNED_SHORT;else if(f instanceof Int16Array)y=t.SHORT;else if(f instanceof Uint32Array)y=t.UNSIGNED_INT;else if(f instanceof Int32Array)y=t.INT;else if(f instanceof Int8Array)y=t.BYTE;else if(f instanceof Uint8Array)y=t.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)y=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:d,type:y,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}function o(c,u,f){const h=u.array,d=u.updateRange;t.bindBuffer(f,c),d.count===-1?t.bufferSubData(f,0,h):(n?t.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count):t.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h.subarray(d.offset,d.offset+d.count)),d.count=-1),u.onUploadCallback()}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function s(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(t.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const h=r.get(c);(!h||h.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=r.get(c);f===void 0?r.set(c,i(c,u)):f.version<c.version&&(o(f.buffer,c,u),f.version=c.version)}return{get:a,remove:s,update:l}}class fT extends jo{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const o=e/2,a=n/2,s=Math.floor(r),l=Math.floor(i),c=s+1,u=l+1,f=e/s,h=n/l,d=[],y=[],v=[],g=[];for(let p=0;p<u;p++){const x=p*h-a;for(let _=0;_<c;_++){const T=_*f-o;y.push(T,-x,0),v.push(0,0,1),g.push(_/s),g.push(1-p/l)}}for(let p=0;p<l;p++)for(let x=0;x<s;x++){const _=x+c*p,T=x+c*(p+1),w=x+1+c*(p+1),M=x+1+c*p;d.push(_,T,M),d.push(T,w,M)}this.setIndex(d),this.setAttribute("position",new Di(y,3)),this.setAttribute("normal",new Di(v,3)),this.setAttribute("uv",new Di(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fT(e.width,e.height,e.widthSegments,e.heightSegments)}}var zH=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,HH=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,GH=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,WH=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,qH=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,XH=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,KH=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,YH=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,QH=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,ZH=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,JH=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,eG=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,tG=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,nG=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,rG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,iG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,oG=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,aG=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,sG=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,lG=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,cG=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,uG=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,fG=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,hG=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,dG=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,pG=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,mG=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,gG=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,vG="gl_FragColor = linearToOutputTexel( gl_FragColor );",yG=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,_G=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,xG=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,bG=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,wG=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,SG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,EG=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,TG=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,AG=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,MG=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,PG=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,CG=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,RG=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,OG=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,IG=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,NG=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,DG=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,LG=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,kG=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,jG=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,UG=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,FG=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,VG=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,BG=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,$G=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,zG=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,HG=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,GG=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,WG=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,qG=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,XG=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,KG=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,YG=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,QG=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ZG=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,JG=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,eW=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,tW=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,nW=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,rW=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,iW=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,oW=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,aW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,sW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,lW=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,cW=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,uW=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,fW=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,hW=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,dW=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,pW=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,mW=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,gW=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,vW=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,yW=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,_W=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,xW=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,bW=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,wW=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,SW=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,EW=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,TW=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,AW=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,MW=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,PW=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,CW=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,RW=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,OW=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,IW=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,NW=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,DW=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,LW=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,kW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,jW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,UW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,FW=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const VW=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,BW=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$W=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,zW=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,HW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,GW=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,WW=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,qW=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,XW=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,KW=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,YW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,QW=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ZW=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,JW=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,e7=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,t7=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,n7=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,r7=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,i7=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,o7=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,a7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,s7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,l7=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,c7=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,u7=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,f7=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,h7=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,d7=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,p7=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,m7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,g7=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,v7=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,y7=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,xt={alphahash_fragment:zH,alphahash_pars_fragment:HH,alphamap_fragment:GH,alphamap_pars_fragment:WH,alphatest_fragment:qH,alphatest_pars_fragment:XH,aomap_fragment:KH,aomap_pars_fragment:YH,begin_vertex:QH,beginnormal_vertex:ZH,bsdfs:JH,iridescence_fragment:eG,bumpmap_pars_fragment:tG,clipping_planes_fragment:nG,clipping_planes_pars_fragment:rG,clipping_planes_pars_vertex:iG,clipping_planes_vertex:oG,color_fragment:aG,color_pars_fragment:sG,color_pars_vertex:lG,color_vertex:cG,common:uG,cube_uv_reflection_fragment:fG,defaultnormal_vertex:hG,displacementmap_pars_vertex:dG,displacementmap_vertex:pG,emissivemap_fragment:mG,emissivemap_pars_fragment:gG,colorspace_fragment:vG,colorspace_pars_fragment:yG,envmap_fragment:_G,envmap_common_pars_fragment:xG,envmap_pars_fragment:bG,envmap_pars_vertex:wG,envmap_physical_pars_fragment:DG,envmap_vertex:SG,fog_vertex:EG,fog_pars_vertex:TG,fog_fragment:AG,fog_pars_fragment:MG,gradientmap_pars_fragment:PG,lightmap_fragment:CG,lightmap_pars_fragment:RG,lights_lambert_fragment:OG,lights_lambert_pars_fragment:IG,lights_pars_begin:NG,lights_toon_fragment:LG,lights_toon_pars_fragment:kG,lights_phong_fragment:jG,lights_phong_pars_fragment:UG,lights_physical_fragment:FG,lights_physical_pars_fragment:VG,lights_fragment_begin:BG,lights_fragment_maps:$G,lights_fragment_end:zG,logdepthbuf_fragment:HG,logdepthbuf_pars_fragment:GG,logdepthbuf_pars_vertex:WG,logdepthbuf_vertex:qG,map_fragment:XG,map_pars_fragment:KG,map_particle_fragment:YG,map_particle_pars_fragment:QG,metalnessmap_fragment:ZG,metalnessmap_pars_fragment:JG,morphcolor_vertex:eW,morphnormal_vertex:tW,morphtarget_pars_vertex:nW,morphtarget_vertex:rW,normal_fragment_begin:iW,normal_fragment_maps:oW,normal_pars_fragment:aW,normal_pars_vertex:sW,normal_vertex:lW,normalmap_pars_fragment:cW,clearcoat_normal_fragment_begin:uW,clearcoat_normal_fragment_maps:fW,clearcoat_pars_fragment:hW,iridescence_pars_fragment:dW,opaque_fragment:pW,packing:mW,premultiplied_alpha_fragment:gW,project_vertex:vW,dithering_fragment:yW,dithering_pars_fragment:_W,roughnessmap_fragment:xW,roughnessmap_pars_fragment:bW,shadowmap_pars_fragment:wW,shadowmap_pars_vertex:SW,shadowmap_vertex:EW,shadowmask_pars_fragment:TW,skinbase_vertex:AW,skinning_pars_vertex:MW,skinning_vertex:PW,skinnormal_vertex:CW,specularmap_fragment:RW,specularmap_pars_fragment:OW,tonemapping_fragment:IW,tonemapping_pars_fragment:NW,transmission_fragment:DW,transmission_pars_fragment:LW,uv_pars_fragment:kW,uv_pars_vertex:jW,uv_vertex:UW,worldpos_vertex:FW,background_vert:VW,background_frag:BW,backgroundCube_vert:$W,backgroundCube_frag:zW,cube_vert:HW,cube_frag:GW,depth_vert:WW,depth_frag:qW,distanceRGBA_vert:XW,distanceRGBA_frag:KW,equirect_vert:YW,equirect_frag:QW,linedashed_vert:ZW,linedashed_frag:JW,meshbasic_vert:e7,meshbasic_frag:t7,meshlambert_vert:n7,meshlambert_frag:r7,meshmatcap_vert:i7,meshmatcap_frag:o7,meshnormal_vert:a7,meshnormal_frag:s7,meshphong_vert:l7,meshphong_frag:c7,meshphysical_vert:u7,meshphysical_frag:f7,meshtoon_vert:h7,meshtoon_frag:d7,points_vert:p7,points_frag:m7,shadow_vert:g7,shadow_frag:v7,sprite_vert:y7,sprite_frag:_7},Oe={common:{diffuse:{value:new Ot(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new wt},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new wt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new wt},normalScale:{value:new gt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ot(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ot(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0},uvTransform:{value:new wt}},sprite:{diffuse:{value:new Ot(16777215)},opacity:{value:1},center:{value:new gt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new wt},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0}}},_o={basic:{uniforms:Or([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.fog]),vertexShader:xt.meshbasic_vert,fragmentShader:xt.meshbasic_frag},lambert:{uniforms:Or([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,Oe.lights,{emissive:{value:new Ot(0)}}]),vertexShader:xt.meshlambert_vert,fragmentShader:xt.meshlambert_frag},phong:{uniforms:Or([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,Oe.lights,{emissive:{value:new Ot(0)},specular:{value:new Ot(1118481)},shininess:{value:30}}]),vertexShader:xt.meshphong_vert,fragmentShader:xt.meshphong_frag},standard:{uniforms:Or([Oe.common,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.roughnessmap,Oe.metalnessmap,Oe.fog,Oe.lights,{emissive:{value:new Ot(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xt.meshphysical_vert,fragmentShader:xt.meshphysical_frag},toon:{uniforms:Or([Oe.common,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.gradientmap,Oe.fog,Oe.lights,{emissive:{value:new Ot(0)}}]),vertexShader:xt.meshtoon_vert,fragmentShader:xt.meshtoon_frag},matcap:{uniforms:Or([Oe.common,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,{matcap:{value:null}}]),vertexShader:xt.meshmatcap_vert,fragmentShader:xt.meshmatcap_frag},points:{uniforms:Or([Oe.points,Oe.fog]),vertexShader:xt.points_vert,fragmentShader:xt.points_frag},dashed:{uniforms:Or([Oe.common,Oe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xt.linedashed_vert,fragmentShader:xt.linedashed_frag},depth:{uniforms:Or([Oe.common,Oe.displacementmap]),vertexShader:xt.depth_vert,fragmentShader:xt.depth_frag},normal:{uniforms:Or([Oe.common,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,{opacity:{value:1}}]),vertexShader:xt.meshnormal_vert,fragmentShader:xt.meshnormal_frag},sprite:{uniforms:Or([Oe.sprite,Oe.fog]),vertexShader:xt.sprite_vert,fragmentShader:xt.sprite_frag},background:{uniforms:{uvTransform:{value:new wt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:xt.background_vert,fragmentShader:xt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:xt.backgroundCube_vert,fragmentShader:xt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xt.cube_vert,fragmentShader:xt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xt.equirect_vert,fragmentShader:xt.equirect_frag},distanceRGBA:{uniforms:Or([Oe.common,Oe.displacementmap,{referencePosition:{value:new te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xt.distanceRGBA_vert,fragmentShader:xt.distanceRGBA_frag},shadow:{uniforms:Or([Oe.lights,Oe.fog,{color:{value:new Ot(0)},opacity:{value:1}}]),vertexShader:xt.shadow_vert,fragmentShader:xt.shadow_frag}};_o.physical={uniforms:Or([_o.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new wt},clearcoatNormalScale:{value:new gt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new wt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new wt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new wt},sheen:{value:0},sheenColor:{value:new Ot(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new wt},transmissionSamplerSize:{value:new gt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new wt},attenuationDistance:{value:0},attenuationColor:{value:new Ot(0)},specularColor:{value:new Ot(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new wt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new wt},anisotropyVector:{value:new gt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new wt}}]),vertexShader:xt.meshphysical_vert,fragmentShader:xt.meshphysical_frag};const ng={r:0,b:0,g:0};function x7(t,e,n,r,i,o,a){const s=new Ot(0);let l=o===!0?0:1,c,u,f=null,h=0,d=null;function y(g,p){let x=!1,_=p.isScene===!0?p.background:null;_&&_.isTexture&&(_=(p.backgroundBlurriness>0?n:e).get(_)),_===null?v(s,l):_&&_.isColor&&(v(_,1),x=!0);const T=t.xr.getEnvironmentBlendMode();T==="additive"?r.buffers.color.setClear(0,0,0,1,a):T==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(t.autoClear||x)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),_&&(_.isCubeTexture||_.mapping===_0)?(u===void 0&&(u=new Gr(new zp(1,1,1),new ba({name:"BackgroundCubeMaterial",uniforms:Bu(_o.backgroundCube.uniforms),vertexShader:_o.backgroundCube.vertexShader,fragmentShader:_o.backgroundCube.fragmentShader,side:Vr,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(w,M,b){this.matrixWorld.copyPosition(b.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=_,u.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=p.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,u.material.toneMapped=zt.getTransfer(_.colorSpace)!==tn,(f!==_||h!==_.version||d!==t.toneMapping)&&(u.material.needsUpdate=!0,f=_,h=_.version,d=t.toneMapping),u.layers.enableAll(),g.unshift(u,u.geometry,u.material,0,0,null)):_&&_.isTexture&&(c===void 0&&(c=new Gr(new fT(2,2),new ba({name:"BackgroundMaterial",uniforms:Bu(_o.background.uniforms),vertexShader:_o.background.vertexShader,fragmentShader:_o.background.fragmentShader,side:ws,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=_,c.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,c.material.toneMapped=zt.getTransfer(_.colorSpace)!==tn,_.matrixAutoUpdate===!0&&_.updateMatrix(),c.material.uniforms.uvTransform.value.copy(_.matrix),(f!==_||h!==_.version||d!==t.toneMapping)&&(c.material.needsUpdate=!0,f=_,h=_.version,d=t.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null))}function v(g,p){g.getRGB(ng,Kj(t)),r.buffers.color.setClear(ng.r,ng.g,ng.b,p,a)}return{getClearColor:function(){return s},setClearColor:function(g,p=1){s.set(g),l=p,v(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,v(s,l)},render:y}}function b7(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||o!==null,s={},l=g(null);let c=l,u=!1;function f(D,k,H,B,F){let q=!1;if(a){const K=v(B,H,k);c!==K&&(c=K,d(c.object)),q=p(D,B,H,F),q&&x(D,B,H,F)}else{const K=k.wireframe===!0;(c.geometry!==B.id||c.program!==H.id||c.wireframe!==K)&&(c.geometry=B.id,c.program=H.id,c.wireframe=K,q=!0)}F!==null&&n.update(F,t.ELEMENT_ARRAY_BUFFER),(q||u)&&(u=!1,A(D,k,H,B),F!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(F).buffer))}function h(){return r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}function d(D){return r.isWebGL2?t.bindVertexArray(D):o.bindVertexArrayOES(D)}function y(D){return r.isWebGL2?t.deleteVertexArray(D):o.deleteVertexArrayOES(D)}function v(D,k,H){const B=H.wireframe===!0;let F=s[D.id];F===void 0&&(F={},s[D.id]=F);let q=F[k.id];q===void 0&&(q={},F[k.id]=q);let K=q[B];return K===void 0&&(K=g(h()),q[B]=K),K}function g(D){const k=[],H=[],B=[];for(let F=0;F<i;F++)k[F]=0,H[F]=0,B[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:H,attributeDivisors:B,object:D,attributes:{},index:null}}function p(D,k,H,B){const F=c.attributes,q=k.attributes;let K=0;const z=H.getAttributes();for(const X in z)if(z[X].location>=0){const me=F[X];let _e=q[X];if(_e===void 0&&(X==="instanceMatrix"&&D.instanceMatrix&&(_e=D.instanceMatrix),X==="instanceColor"&&D.instanceColor&&(_e=D.instanceColor)),me===void 0||me.attribute!==_e||_e&&me.data!==_e.data)return!0;K++}return c.attributesNum!==K||c.index!==B}function x(D,k,H,B){const F={},q=k.attributes;let K=0;const z=H.getAttributes();for(const X in z)if(z[X].location>=0){let me=q[X];me===void 0&&(X==="instanceMatrix"&&D.instanceMatrix&&(me=D.instanceMatrix),X==="instanceColor"&&D.instanceColor&&(me=D.instanceColor));const _e={};_e.attribute=me,me&&me.data&&(_e.data=me.data),F[X]=_e,K++}c.attributes=F,c.attributesNum=K,c.index=B}function _(){const D=c.newAttributes;for(let k=0,H=D.length;k<H;k++)D[k]=0}function T(D){w(D,0)}function w(D,k){const H=c.newAttributes,B=c.enabledAttributes,F=c.attributeDivisors;H[D]=1,B[D]===0&&(t.enableVertexAttribArray(D),B[D]=1),F[D]!==k&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](D,k),F[D]=k)}function M(){const D=c.newAttributes,k=c.enabledAttributes;for(let H=0,B=k.length;H<B;H++)k[H]!==D[H]&&(t.disableVertexAttribArray(H),k[H]=0)}function b(D,k,H,B,F,q,K){K===!0?t.vertexAttribIPointer(D,k,H,F,q):t.vertexAttribPointer(D,k,H,B,F,q)}function A(D,k,H,B){if(r.isWebGL2===!1&&(D.isInstancedMesh||B.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const F=B.attributes,q=H.getAttributes(),K=k.defaultAttributeValues;for(const z in q){const X=q[z];if(X.location>=0){let ee=F[z];if(ee===void 0&&(z==="instanceMatrix"&&D.instanceMatrix&&(ee=D.instanceMatrix),z==="instanceColor"&&D.instanceColor&&(ee=D.instanceColor)),ee!==void 0){const me=ee.normalized,_e=ee.itemSize,Ne=n.get(ee);if(Ne===void 0)continue;const We=Ne.buffer,Ue=Ne.type,fe=Ne.bytesPerElement,Re=r.isWebGL2===!0&&(Ue===t.INT||Ue===t.UNSIGNED_INT||ee.gpuType===Nj);if(ee.isInterleavedBufferAttribute){const Ee=ee.data,G=Ee.stride,lt=ee.offset;if(Ee.isInstancedInterleavedBuffer){for(let be=0;be<X.locationSize;be++)w(X.location+be,Ee.meshPerAttribute);D.isInstancedMesh!==!0&&B._maxInstanceCount===void 0&&(B._maxInstanceCount=Ee.meshPerAttribute*Ee.count)}else for(let be=0;be<X.locationSize;be++)T(X.location+be);t.bindBuffer(t.ARRAY_BUFFER,We);for(let be=0;be<X.locationSize;be++)b(X.location+be,_e/X.locationSize,Ue,me,G*fe,(lt+_e/X.locationSize*be)*fe,Re)}else{if(ee.isInstancedBufferAttribute){for(let Ee=0;Ee<X.locationSize;Ee++)w(X.location+Ee,ee.meshPerAttribute);D.isInstancedMesh!==!0&&B._maxInstanceCount===void 0&&(B._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let Ee=0;Ee<X.locationSize;Ee++)T(X.location+Ee);t.bindBuffer(t.ARRAY_BUFFER,We);for(let Ee=0;Ee<X.locationSize;Ee++)b(X.location+Ee,_e/X.locationSize,Ue,me,_e*fe,_e/X.locationSize*Ee*fe,Re)}}else if(K!==void 0){const me=K[z];if(me!==void 0)switch(me.length){case 2:t.vertexAttrib2fv(X.location,me);break;case 3:t.vertexAttrib3fv(X.location,me);break;case 4:t.vertexAttrib4fv(X.location,me);break;default:t.vertexAttrib1fv(X.location,me)}}}}M()}function E(){N();for(const D in s){const k=s[D];for(const H in k){const B=k[H];for(const F in B)y(B[F].object),delete B[F];delete k[H]}delete s[D]}}function P(D){if(s[D.id]===void 0)return;const k=s[D.id];for(const H in k){const B=k[H];for(const F in B)y(B[F].object),delete B[F];delete k[H]}delete s[D.id]}function R(D){for(const k in s){const H=s[k];if(H[D.id]===void 0)continue;const B=H[D.id];for(const F in B)y(B[F].object),delete B[F];delete H[D.id]}}function N(){O(),u=!0,c!==l&&(c=l,d(c.object))}function O(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:N,resetDefaultState:O,dispose:E,releaseStatesOfGeometry:P,releaseStatesOfProgram:R,initAttributes:_,enableAttribute:T,disableUnusedAttributes:M}}function w7(t,e,n,r){const i=r.isWebGL2;let o;function a(c){o=c}function s(c,u){t.drawArrays(o,c,u),n.update(u,o,1)}function l(c,u,f){if(f===0)return;let h,d;if(i)h=t,d="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[d](o,c,u,f),n.update(u,o,f)}this.setMode=a,this.render=s,this.renderInstances=l}function S7(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const b=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(b){if(b==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";b="mediump"}return b==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let s=n.precision!==void 0?n.precision:"highp";const l=o(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);const c=a||e.has("WEBGL_draw_buffers"),u=n.logarithmicDepthBuffer===!0,f=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=t.getParameter(t.MAX_TEXTURE_SIZE),y=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),v=t.getParameter(t.MAX_VERTEX_ATTRIBS),g=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),p=t.getParameter(t.MAX_VARYING_VECTORS),x=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),_=h>0,T=a||e.has("OES_texture_float"),w=_&&T,M=a?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:y,maxAttributes:v,maxVertexUniforms:g,maxVaryings:p,maxFragmentUniforms:x,vertexTextures:_,floatFragmentTextures:T,floatVertexTextures:w,maxSamples:M}}function E7(t){const e=this;let n=null,r=0,i=!1,o=!1;const a=new Wa,s=new wt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const d=f.length!==0||h||r!==0||i;return i=h,r=f.length,d},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(f,h){n=u(f,h,0)},this.setState=function(f,h,d){const y=f.clippingPlanes,v=f.clipIntersection,g=f.clipShadows,p=t.get(f);if(!i||y===null||y.length===0||o&&!g)o?u(null):c();else{const x=o?0:r,_=x*4;let T=p.clippingState||null;l.value=T,T=u(y,h,_,d);for(let w=0;w!==_;++w)T[w]=n[w];p.clippingState=T,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=x}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(f,h,d,y){const v=f!==null?f.length:0;let g=null;if(v!==0){if(g=l.value,y!==!0||g===null){const p=d+v*4,x=h.matrixWorldInverse;s.getNormalMatrix(x),(g===null||g.length<p)&&(g=new Float32Array(p));for(let _=0,T=d;_!==v;++_,T+=4)a.copy(f[_]).applyMatrix4(x,s),a.normal.toArray(g,T),g[T+3]=a.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,g}}function T7(t){let e=new WeakMap;function n(a,s){return s===V1?a.mapping=Uu:s===B1&&(a.mapping=Fu),a}function r(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const s=a.mapping;if(s===V1||s===B1)if(e.has(a)){const l=e.get(a).texture;return n(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new FH(l.height/2);return c.fromEquirectangularTexture(t,a),e.set(a,c),a.addEventListener("dispose",i),n(c.texture,a.mapping)}else return null}}return a}function i(a){const s=a.target;s.removeEventListener("dispose",i);const l=e.get(s);l!==void 0&&(e.delete(s),l.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class Jj extends Yj{constructor(e=-1,n=1,r=1,i=-1,o=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=o,this.far=a,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,o,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,a=r+e,s=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,a=o+c*this.view.width,s-=u*this.view.offsetY,l=s-u*this.view.height}this.projectionMatrix.makeOrthographic(o,a,s,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const ru=4,y2=[.125,.215,.35,.446,.526,.582],ul=20,jx=new Jj,_2=new Ot;let Ux=null,Fx=0,Vx=0;const nl=(1+Math.sqrt(5))/2,Ic=1/nl,x2=[new te(1,1,1),new te(-1,1,1),new te(1,1,-1),new te(-1,1,-1),new te(0,nl,Ic),new te(0,nl,-Ic),new te(Ic,0,nl),new te(-Ic,0,nl),new te(nl,Ic,0),new te(-nl,Ic,0)];class b2{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){Ux=this._renderer.getRenderTarget(),Fx=this._renderer.getActiveCubeFace(),Vx=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=E2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=S2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Ux,Fx,Vx),e.scissorTest=!1,rg(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Uu||e.mapping===Fu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Ux=this._renderer.getRenderTarget(),Fx=this._renderer.getActiveCubeFace(),Vx=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Mi,minFilter:Mi,generateMipmaps:!1,type:Ud,format:to,colorSpace:xa,depthBuffer:!1},i=w2(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=w2(e,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=A7(o)),this._blurMaterial=M7(o,e,n)}return i}_compileMaterial(e){const n=new Gr(this._lodPlanes[0],e);this._renderer.compile(n,jx)}_sceneToCubeUV(e,n,r,i){const s=new si(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,h=u.toneMapping;u.getClearColor(_2),u.toneMapping=ds,u.autoClear=!1;const d=new cT({name:"PMREM.Background",side:Vr,depthWrite:!1,depthTest:!1}),y=new Gr(new zp,d);let v=!1;const g=e.background;g?g.isColor&&(d.color.copy(g),e.background=null,v=!0):(d.color.copy(_2),v=!0);for(let p=0;p<6;p++){const x=p%3;x===0?(s.up.set(0,l[p],0),s.lookAt(c[p],0,0)):x===1?(s.up.set(0,0,l[p]),s.lookAt(0,c[p],0)):(s.up.set(0,l[p],0),s.lookAt(0,0,c[p]));const _=this._cubeSize;rg(i,x*_,p>2?_:0,_,_),u.setRenderTarget(i),v&&u.render(y,s),u.render(e,s)}y.geometry.dispose(),y.material.dispose(),u.toneMapping=h,u.autoClear=f,e.background=g}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Uu||e.mapping===Fu;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=E2()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=S2());const o=i?this._cubemapMaterial:this._equirectMaterial,a=new Gr(this._lodPlanes[0],o),s=o.uniforms;s.envMap.value=e;const l=this._cubeSize;rg(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(a,jx)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=x2[(i-1)%x2.length];this._blur(e,i-1,i,o,a)}n.autoClear=r}_blur(e,n,r,i,o){const a=this._pingPongRenderTarget;this._halfBlur(e,a,n,r,i,"latitudinal",o),this._halfBlur(a,e,r,r,i,"longitudinal",o)}_halfBlur(e,n,r,i,o,a,s){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new Gr(this._lodPlanes[i],c),h=c.uniforms,d=this._sizeLods[r]-1,y=isFinite(o)?Math.PI/(2*d):2*Math.PI/(2*ul-1),v=o/y,g=isFinite(o)?1+Math.floor(u*v):ul;g>ul&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${ul}`);const p=[];let x=0;for(let b=0;b<ul;++b){const A=b/v,E=Math.exp(-A*A/2);p.push(E),b===0?x+=E:b<g&&(x+=2*E)}for(let b=0;b<p.length;b++)p[b]=p[b]/x;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=p,h.latitudinal.value=a==="latitudinal",s&&(h.poleAxis.value=s);const{_lodMax:_}=this;h.dTheta.value=y,h.mipInt.value=_-r;const T=this._sizeLods[i],w=3*T*(i>_-ru?i-_+ru:0),M=4*(this._cubeSize-T);rg(n,w,M,3*T,2*T),l.setRenderTarget(n),l.render(f,jx)}}function A7(t){const e=[],n=[],r=[];let i=t;const o=t-ru+1+y2.length;for(let a=0;a<o;a++){const s=Math.pow(2,i);n.push(s);let l=1/s;a>t-ru?l=y2[a-t+ru-1]:a===0&&(l=0),r.push(l);const c=1/(s-2),u=-c,f=1+c,h=[u,u,f,u,f,f,u,u,f,f,u,f],d=6,y=6,v=3,g=2,p=1,x=new Float32Array(v*y*d),_=new Float32Array(g*y*d),T=new Float32Array(p*y*d);for(let M=0;M<d;M++){const b=M%3*2/3-1,A=M>2?0:-1,E=[b,A,0,b+2/3,A,0,b+2/3,A+1,0,b,A,0,b+2/3,A+1,0,b,A+1,0];x.set(E,v*y*M),_.set(h,g*y*M);const P=[M,M,M,M,M,M];T.set(P,p*y*M)}const w=new jo;w.setAttribute("position",new To(x,v)),w.setAttribute("uv",new To(_,g)),w.setAttribute("faceIndex",new To(T,p)),e.push(w),i>ru&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function w2(t,e,n){const r=new Fl(t,e,n);return r.texture.mapping=_0,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function rg(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function M7(t,e,n){const r=new Float32Array(ul),i=new te(0,1,0);return new ba({name:"SphericalGaussianBlur",defines:{n:ul,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:hT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:hs,depthTest:!1,depthWrite:!1})}function S2(){return new ba({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:hT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:hs,depthTest:!1,depthWrite:!1})}function E2(){return new ba({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:hT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:hs,depthTest:!1,depthWrite:!1})}function hT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function P7(t){let e=new WeakMap,n=null;function r(s){if(s&&s.isTexture){const l=s.mapping,c=l===V1||l===B1,u=l===Uu||l===Fu;if(c||u)if(s.isRenderTargetTexture&&s.needsPMREMUpdate===!0){s.needsPMREMUpdate=!1;let f=e.get(s);return n===null&&(n=new b2(t)),f=c?n.fromEquirectangular(s,f):n.fromCubemap(s,f),e.set(s,f),f.texture}else{if(e.has(s))return e.get(s).texture;{const f=s.image;if(c&&f&&f.height>0||u&&f&&i(f)){n===null&&(n=new b2(t));const h=c?n.fromEquirectangular(s):n.fromCubemap(s);return e.set(s,h),s.addEventListener("dispose",o),h.texture}else return null}}}return s}function i(s){let l=0;const c=6;for(let u=0;u<c;u++)s[u]!==void 0&&l++;return l===c}function o(s){const l=s.target;l.removeEventListener("dispose",o);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:a}}function C7(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function R7(t,e,n,r){const i={},o=new WeakMap;function a(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const y in h.attributes)e.remove(h.attributes[y]);for(const y in h.morphAttributes){const v=h.morphAttributes[y];for(let g=0,p=v.length;g<p;g++)e.remove(v[g])}h.removeEventListener("dispose",a),delete i[h.id];const d=o.get(h);d&&(e.remove(d),o.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function s(f,h){return i[h.id]===!0||(h.addEventListener("dispose",a),i[h.id]=!0,n.memory.geometries++),h}function l(f){const h=f.attributes;for(const y in h)e.update(h[y],t.ARRAY_BUFFER);const d=f.morphAttributes;for(const y in d){const v=d[y];for(let g=0,p=v.length;g<p;g++)e.update(v[g],t.ARRAY_BUFFER)}}function c(f){const h=[],d=f.index,y=f.attributes.position;let v=0;if(d!==null){const x=d.array;v=d.version;for(let _=0,T=x.length;_<T;_+=3){const w=x[_+0],M=x[_+1],b=x[_+2];h.push(w,M,M,b,b,w)}}else if(y!==void 0){const x=y.array;v=y.version;for(let _=0,T=x.length/3-1;_<T;_+=3){const w=_+0,M=_+1,b=_+2;h.push(w,M,M,b,b,w)}}else return;const g=new($j(h)?Xj:qj)(h,1);g.version=v;const p=o.get(f);p&&e.remove(p),o.set(f,g)}function u(f){const h=o.get(f);if(h){const d=f.index;d!==null&&h.version<d.version&&c(f)}else c(f);return o.get(f)}return{get:s,update:l,getWireframeAttribute:u}}function O7(t,e,n,r){const i=r.isWebGL2;let o;function a(h){o=h}let s,l;function c(h){s=h.type,l=h.bytesPerElement}function u(h,d){t.drawElements(o,d,s,h*l),n.update(d,o,1)}function f(h,d,y){if(y===0)return;let v,g;if(i)v=t,g="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[g](o,d,s,h*l,y),n.update(d,o,y)}this.setMode=a,this.setIndex=c,this.render=u,this.renderInstances=f}function I7(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,a,s){switch(n.calls++,a){case t.TRIANGLES:n.triangles+=s*(o/3);break;case t.LINES:n.lines+=s*(o/2);break;case t.LINE_STRIP:n.lines+=s*(o-1);break;case t.LINE_LOOP:n.lines+=s*o;break;case t.POINTS:n.points+=s*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function N7(t,e){return t[0]-e[0]}function D7(t,e){return Math.abs(e[1])-Math.abs(t[1])}function L7(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,a=new Zn,s=[];for(let c=0;c<8;c++)s[c]=[c,0];function l(c,u,f){const h=c.morphTargetInfluences;if(e.isWebGL2===!0){const y=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,v=y!==void 0?y.length:0;let g=o.get(u);if(g===void 0||g.count!==v){let k=function(){O.dispose(),o.delete(u),u.removeEventListener("dispose",k)};var d=k;g!==void 0&&g.texture.dispose();const _=u.morphAttributes.position!==void 0,T=u.morphAttributes.normal!==void 0,w=u.morphAttributes.color!==void 0,M=u.morphAttributes.position||[],b=u.morphAttributes.normal||[],A=u.morphAttributes.color||[];let E=0;_===!0&&(E=1),T===!0&&(E=2),w===!0&&(E=3);let P=u.attributes.position.count*E,R=1;P>e.maxTextureSize&&(R=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const N=new Float32Array(P*R*4*v),O=new Gj(N,P,R,v);O.type=es,O.needsUpdate=!0;const D=E*4;for(let H=0;H<v;H++){const B=M[H],F=b[H],q=A[H],K=P*R*4*H;for(let z=0;z<B.count;z++){const X=z*D;_===!0&&(a.fromBufferAttribute(B,z),N[K+X+0]=a.x,N[K+X+1]=a.y,N[K+X+2]=a.z,N[K+X+3]=0),T===!0&&(a.fromBufferAttribute(F,z),N[K+X+4]=a.x,N[K+X+5]=a.y,N[K+X+6]=a.z,N[K+X+7]=0),w===!0&&(a.fromBufferAttribute(q,z),N[K+X+8]=a.x,N[K+X+9]=a.y,N[K+X+10]=a.z,N[K+X+11]=q.itemSize===4?a.w:1)}}g={count:v,texture:O,size:new gt(P,R)},o.set(u,g),u.addEventListener("dispose",k)}let p=0;for(let _=0;_<h.length;_++)p+=h[_];const x=u.morphTargetsRelative?1:1-p;f.getUniforms().setValue(t,"morphTargetBaseInfluence",x),f.getUniforms().setValue(t,"morphTargetInfluences",h),f.getUniforms().setValue(t,"morphTargetsTexture",g.texture,n),f.getUniforms().setValue(t,"morphTargetsTextureSize",g.size)}else{const y=h===void 0?0:h.length;let v=r[u.id];if(v===void 0||v.length!==y){v=[];for(let T=0;T<y;T++)v[T]=[T,0];r[u.id]=v}for(let T=0;T<y;T++){const w=v[T];w[0]=T,w[1]=h[T]}v.sort(D7);for(let T=0;T<8;T++)T<y&&v[T][1]?(s[T][0]=v[T][0],s[T][1]=v[T][1]):(s[T][0]=Number.MAX_SAFE_INTEGER,s[T][1]=0);s.sort(N7);const g=u.morphAttributes.position,p=u.morphAttributes.normal;let x=0;for(let T=0;T<8;T++){const w=s[T],M=w[0],b=w[1];M!==Number.MAX_SAFE_INTEGER&&b?(g&&u.getAttribute("morphTarget"+T)!==g[M]&&u.setAttribute("morphTarget"+T,g[M]),p&&u.getAttribute("morphNormal"+T)!==p[M]&&u.setAttribute("morphNormal"+T,p[M]),i[T]=b,x+=b):(g&&u.hasAttribute("morphTarget"+T)===!0&&u.deleteAttribute("morphTarget"+T),p&&u.hasAttribute("morphNormal"+T)===!0&&u.deleteAttribute("morphNormal"+T),i[T]=0)}const _=u.morphTargetsRelative?1:1-x;f.getUniforms().setValue(t,"morphTargetBaseInfluence",_),f.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function k7(t,e,n,r){let i=new WeakMap;function o(l){const c=r.render.frame,u=l.geometry,f=e.get(l,u);if(i.get(f)!==c&&(e.update(f),i.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;i.get(h)!==c&&(h.update(),i.set(h,c))}return f}function a(){i=new WeakMap}function s(l){const c=l.target;c.removeEventListener("dispose",s),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:o,dispose:a}}const eU=new Qr,tU=new Gj,nU=new wH,rU=new Qj,T2=[],A2=[],M2=new Float32Array(16),P2=new Float32Array(9),C2=new Float32Array(4);function If(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=T2[i];if(o===void 0&&(o=new Float32Array(i),T2[i]=o),e!==0){r.toArray(o,0);for(let a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function zn(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Hn(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function E0(t,e){let n=A2[e];n===void 0&&(n=new Int32Array(e),A2[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function j7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function U7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(zn(n,e))return;t.uniform2fv(this.addr,e),Hn(n,e)}}function F7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(zn(n,e))return;t.uniform3fv(this.addr,e),Hn(n,e)}}function V7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(zn(n,e))return;t.uniform4fv(this.addr,e),Hn(n,e)}}function B7(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(zn(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Hn(n,e)}else{if(zn(n,r))return;C2.set(r),t.uniformMatrix2fv(this.addr,!1,C2),Hn(n,r)}}function $7(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(zn(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Hn(n,e)}else{if(zn(n,r))return;P2.set(r),t.uniformMatrix3fv(this.addr,!1,P2),Hn(n,r)}}function z7(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(zn(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Hn(n,e)}else{if(zn(n,r))return;M2.set(r),t.uniformMatrix4fv(this.addr,!1,M2),Hn(n,r)}}function H7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function G7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(zn(n,e))return;t.uniform2iv(this.addr,e),Hn(n,e)}}function W7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(zn(n,e))return;t.uniform3iv(this.addr,e),Hn(n,e)}}function q7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(zn(n,e))return;t.uniform4iv(this.addr,e),Hn(n,e)}}function X7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function K7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(zn(n,e))return;t.uniform2uiv(this.addr,e),Hn(n,e)}}function Y7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(zn(n,e))return;t.uniform3uiv(this.addr,e),Hn(n,e)}}function Q7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(zn(n,e))return;t.uniform4uiv(this.addr,e),Hn(n,e)}}function Z7(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||eU,i)}function J7(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||nU,i)}function eq(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||rU,i)}function tq(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||tU,i)}function nq(t){switch(t){case 5126:return j7;case 35664:return U7;case 35665:return F7;case 35666:return V7;case 35674:return B7;case 35675:return $7;case 35676:return z7;case 5124:case 35670:return H7;case 35667:case 35671:return G7;case 35668:case 35672:return W7;case 35669:case 35673:return q7;case 5125:return X7;case 36294:return K7;case 36295:return Y7;case 36296:return Q7;case 35678:case 36198:case 36298:case 36306:case 35682:return Z7;case 35679:case 36299:case 36307:return J7;case 35680:case 36300:case 36308:case 36293:return eq;case 36289:case 36303:case 36311:case 36292:return tq}}function rq(t,e){t.uniform1fv(this.addr,e)}function iq(t,e){const n=If(e,this.size,2);t.uniform2fv(this.addr,n)}function oq(t,e){const n=If(e,this.size,3);t.uniform3fv(this.addr,n)}function aq(t,e){const n=If(e,this.size,4);t.uniform4fv(this.addr,n)}function sq(t,e){const n=If(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function lq(t,e){const n=If(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function cq(t,e){const n=If(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function uq(t,e){t.uniform1iv(this.addr,e)}function fq(t,e){t.uniform2iv(this.addr,e)}function hq(t,e){t.uniform3iv(this.addr,e)}function dq(t,e){t.uniform4iv(this.addr,e)}function pq(t,e){t.uniform1uiv(this.addr,e)}function mq(t,e){t.uniform2uiv(this.addr,e)}function gq(t,e){t.uniform3uiv(this.addr,e)}function vq(t,e){t.uniform4uiv(this.addr,e)}function yq(t,e,n){const r=this.cache,i=e.length,o=E0(n,i);zn(r,o)||(t.uniform1iv(this.addr,o),Hn(r,o));for(let a=0;a!==i;++a)n.setTexture2D(e[a]||eU,o[a])}function _q(t,e,n){const r=this.cache,i=e.length,o=E0(n,i);zn(r,o)||(t.uniform1iv(this.addr,o),Hn(r,o));for(let a=0;a!==i;++a)n.setTexture3D(e[a]||nU,o[a])}function xq(t,e,n){const r=this.cache,i=e.length,o=E0(n,i);zn(r,o)||(t.uniform1iv(this.addr,o),Hn(r,o));for(let a=0;a!==i;++a)n.setTextureCube(e[a]||rU,o[a])}function bq(t,e,n){const r=this.cache,i=e.length,o=E0(n,i);zn(r,o)||(t.uniform1iv(this.addr,o),Hn(r,o));for(let a=0;a!==i;++a)n.setTexture2DArray(e[a]||tU,o[a])}function wq(t){switch(t){case 5126:return rq;case 35664:return iq;case 35665:return oq;case 35666:return aq;case 35674:return sq;case 35675:return lq;case 35676:return cq;case 5124:case 35670:return uq;case 35667:case 35671:return fq;case 35668:case 35672:return hq;case 35669:case 35673:return dq;case 5125:return pq;case 36294:return mq;case 36295:return gq;case 36296:return vq;case 35678:case 36198:case 36298:case 36306:case 35682:return yq;case 35679:case 36299:case 36307:return _q;case 35680:case 36300:case 36308:case 36293:return xq;case 36289:case 36303:case 36311:case 36292:return bq}}class Sq{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.setValue=nq(n.type)}}class Eq{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.size=n.size,this.setValue=wq(n.type)}}class Tq{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let o=0,a=i.length;o!==a;++o){const s=i[o];s.setValue(e,n[s.id],r)}}}const Bx=/(\w+)(\])?(\[|\.)?/g;function R2(t,e){t.seq.push(e),t.map[e.id]=e}function Aq(t,e,n){const r=t.name,i=r.length;for(Bx.lastIndex=0;;){const o=Bx.exec(r),a=Bx.lastIndex;let s=o[1];const l=o[2]==="]",c=o[3];if(l&&(s=s|0),c===void 0||c==="["&&a+2===i){R2(n,c===void 0?new Sq(s,t,e):new Eq(s,t,e));break}else{let f=n.map[s];f===void 0&&(f=new Tq(s),R2(n,f)),n=f}}}class zg{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(n,i),a=e.getUniformLocation(n,o.name);Aq(o,a,this)}}setValue(e,n,r,i){const o=this.map[n];o!==void 0&&o.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let o=0,a=n.length;o!==a;++o){const s=n[o],l=r[s.id];l.needsUpdate!==!1&&s.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,o=e.length;i!==o;++i){const a=e[i];a.id in n&&r.push(a)}return r}}function O2(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const Mq=37297;let Pq=0;function Cq(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let a=i;a<o;a++){const s=a+1;r.push(`${s===e?">":" "} ${s}: ${n[a]}`)}return r.join(`
`)}function Rq(t){const e=zt.getPrimaries(zt.workingColorSpace),n=zt.getPrimaries(t);let r;switch(e===n?r="":e===Cv&&n===Pv?r="LinearDisplayP3ToLinearSRGB":e===Pv&&n===Cv&&(r="LinearSRGBToLinearDisplayP3"),t){case xa:case x0:return[r,"LinearTransferOETF"];case jn:case aT:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function I2(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const a=parseInt(o[1]);return n.toUpperCase()+`

`+i+`

`+Cq(t.getShaderSource(e),a)}else return i}function Oq(t,e){const n=Rq(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function Iq(t,e){let n;switch(e){case O8:n="Linear";break;case I8:n="Reinhard";break;case N8:n="OptimizedCineon";break;case D8:n="ACESFilmic";break;case L8:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Nq(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Fh).join(`
`)}function Dq(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function Lq(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=t.getActiveAttrib(e,i),a=o.name;let s=1;o.type===t.FLOAT_MAT2&&(s=2),o.type===t.FLOAT_MAT3&&(s=3),o.type===t.FLOAT_MAT4&&(s=4),n[a]={type:o.type,location:t.getAttribLocation(e,a),locationSize:s}}return n}function Fh(t){return t!==""}function N2(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function D2(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const kq=/^[ \t]*#include +<([\w\d./]+)>/gm;function W1(t){return t.replace(kq,Uq)}const jq=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Uq(t,e){let n=xt[e];if(n===void 0){const r=jq.get(e);if(r!==void 0)n=xt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return W1(n)}const Fq=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function L2(t){return t.replace(Fq,Vq)}function Vq(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function k2(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Bq(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Oj?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===o8?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Ko&&(e="SHADOWMAP_TYPE_VSM"),e}function $q(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Uu:case Fu:e="ENVMAP_TYPE_CUBE";break;case _0:e="ENVMAP_TYPE_CUBE_UV";break}return e}function zq(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Fu:e="ENVMAP_MODE_REFRACTION";break}return e}function Hq(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case iT:e="ENVMAP_BLENDING_MULTIPLY";break;case C8:e="ENVMAP_BLENDING_MIX";break;case R8:e="ENVMAP_BLENDING_ADD";break}return e}function Gq(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function Wq(t,e,n,r){const i=t.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=Bq(n),c=$q(n),u=zq(n),f=Hq(n),h=Gq(n),d=n.isWebGL2?"":Nq(n),y=Dq(o),v=i.createProgram();let g,p,x=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y].filter(Fh).join(`
`),g.length>0&&(g+=`
`),p=[d,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y].filter(Fh).join(`
`),p.length>0&&(p+=`
`)):(g=[k2(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Fh).join(`
`),p=[d,k2(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ds?"#define TONE_MAPPING":"",n.toneMapping!==ds?xt.tonemapping_pars_fragment:"",n.toneMapping!==ds?Iq("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",xt.colorspace_pars_fragment,Oq("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Fh).join(`
`)),a=W1(a),a=N2(a,n),a=D2(a,n),s=W1(s),s=N2(s,n),s=D2(s,n),a=L2(a),s=L2(s),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,p=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===e2?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===e2?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);const _=x+g+a,T=x+p+s,w=O2(i,i.VERTEX_SHADER,_),M=O2(i,i.FRAGMENT_SHADER,T);i.attachShader(v,w),i.attachShader(v,M),n.index0AttributeName!==void 0?i.bindAttribLocation(v,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v);function b(R){if(t.debug.checkShaderErrors){const N=i.getProgramInfoLog(v).trim(),O=i.getShaderInfoLog(w).trim(),D=i.getShaderInfoLog(M).trim();let k=!0,H=!0;if(i.getProgramParameter(v,i.LINK_STATUS)===!1)if(k=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,v,w,M);else{const B=I2(i,w,"vertex"),F=I2(i,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,i.VALIDATE_STATUS)+`

Program Info Log: `+N+`
`+B+`
`+F)}else N!==""?console.warn("THREE.WebGLProgram: Program Info Log:",N):(O===""||D==="")&&(H=!1);H&&(R.diagnostics={runnable:k,programLog:N,vertexShader:{log:O,prefix:g},fragmentShader:{log:D,prefix:p}})}i.deleteShader(w),i.deleteShader(M),A=new zg(i,v),E=Lq(i,v)}let A;this.getUniforms=function(){return A===void 0&&b(this),A};let E;this.getAttributes=function(){return E===void 0&&b(this),E};let P=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=i.getProgramParameter(v,Mq)),P},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Pq++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=w,this.fragmentShader=M,this}let qq=0;class Xq{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),o=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(o)===!1&&(a.add(o),o.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new Kq(e),n.set(e,r)),r}}class Kq{constructor(e){this.id=qq++,this.code=e,this.usedTimes=0}}function Yq(t,e,n,r,i,o,a){const s=new lT,l=new Xq,c=[],u=i.isWebGL2,f=i.logarithmicDepthBuffer,h=i.vertexTextures;let d=i.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(E){return E===0?"uv":`uv${E}`}function g(E,P,R,N,O){const D=N.fog,k=O.geometry,H=E.isMeshStandardMaterial?N.environment:null,B=(E.isMeshStandardMaterial?n:e).get(E.envMap||H),F=B&&B.mapping===_0?B.image.height:null,q=y[E.type];E.precision!==null&&(d=i.getMaxPrecision(E.precision),d!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",d,"instead."));const K=k.morphAttributes.position||k.morphAttributes.normal||k.morphAttributes.color,z=K!==void 0?K.length:0;let X=0;k.morphAttributes.position!==void 0&&(X=1),k.morphAttributes.normal!==void 0&&(X=2),k.morphAttributes.color!==void 0&&(X=3);let ee,me,_e,Ne;if(q){const It=_o[q];ee=It.vertexShader,me=It.fragmentShader}else ee=E.vertexShader,me=E.fragmentShader,l.update(E),_e=l.getVertexShaderID(E),Ne=l.getFragmentShaderID(E);const We=t.getRenderTarget(),Ue=O.isInstancedMesh===!0,fe=!!E.map,Re=!!E.matcap,Ee=!!B,G=!!E.aoMap,lt=!!E.lightMap,be=!!E.bumpMap,Le=!!E.normalMap,ke=!!E.displacementMap,mt=!!E.emissiveMap,Ye=!!E.metalnessMap,Ze=!!E.roughnessMap,ht=E.anisotropy>0,Pt=E.clearcoat>0,kt=E.iridescence>0,$=E.sheen>0,L=E.transmission>0,re=ht&&!!E.anisotropyMap,ye=Pt&&!!E.clearcoatMap,he=Pt&&!!E.clearcoatNormalMap,xe=Pt&&!!E.clearcoatRoughnessMap,Ce=kt&&!!E.iridescenceMap,Te=kt&&!!E.iridescenceThicknessMap,Pe=$&&!!E.sheenColorMap,Y=$&&!!E.sheenRoughnessMap,Se=!!E.specularMap,de=!!E.specularColorMap,Qe=!!E.specularIntensityMap,Ge=L&&!!E.transmissionMap,qe=L&&!!E.thicknessMap,Ve=!!E.gradientMap,De=!!E.alphaMap,vt=E.alphaTest>0,Q=!!E.alphaHash,le=!!E.extensions,ue=!!k.attributes.uv1,ne=!!k.attributes.uv2,ge=!!k.attributes.uv3;let Ie=ds;return E.toneMapped&&(We===null||We.isXRRenderTarget===!0)&&(Ie=t.toneMapping),{isWebGL2:u,shaderID:q,shaderType:E.type,shaderName:E.name,vertexShader:ee,fragmentShader:me,defines:E.defines,customVertexShaderID:_e,customFragmentShaderID:Ne,isRawShaderMaterial:E.isRawShaderMaterial===!0,glslVersion:E.glslVersion,precision:d,instancing:Ue,instancingColor:Ue&&O.instanceColor!==null,supportsVertexTextures:h,outputColorSpace:We===null?t.outputColorSpace:We.isXRRenderTarget===!0?We.texture.colorSpace:xa,map:fe,matcap:Re,envMap:Ee,envMapMode:Ee&&B.mapping,envMapCubeUVHeight:F,aoMap:G,lightMap:lt,bumpMap:be,normalMap:Le,displacementMap:h&&ke,emissiveMap:mt,normalMapObjectSpace:Le&&E.normalMapType===X8,normalMapTangentSpace:Le&&E.normalMapType===Vj,metalnessMap:Ye,roughnessMap:Ze,anisotropy:ht,anisotropyMap:re,clearcoat:Pt,clearcoatMap:ye,clearcoatNormalMap:he,clearcoatRoughnessMap:xe,iridescence:kt,iridescenceMap:Ce,iridescenceThicknessMap:Te,sheen:$,sheenColorMap:Pe,sheenRoughnessMap:Y,specularMap:Se,specularColorMap:de,specularIntensityMap:Qe,transmission:L,transmissionMap:Ge,thicknessMap:qe,gradientMap:Ve,opaque:E.transparent===!1&&E.blending===Su,alphaMap:De,alphaTest:vt,alphaHash:Q,combine:E.combine,mapUv:fe&&v(E.map.channel),aoMapUv:G&&v(E.aoMap.channel),lightMapUv:lt&&v(E.lightMap.channel),bumpMapUv:be&&v(E.bumpMap.channel),normalMapUv:Le&&v(E.normalMap.channel),displacementMapUv:ke&&v(E.displacementMap.channel),emissiveMapUv:mt&&v(E.emissiveMap.channel),metalnessMapUv:Ye&&v(E.metalnessMap.channel),roughnessMapUv:Ze&&v(E.roughnessMap.channel),anisotropyMapUv:re&&v(E.anisotropyMap.channel),clearcoatMapUv:ye&&v(E.clearcoatMap.channel),clearcoatNormalMapUv:he&&v(E.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:xe&&v(E.clearcoatRoughnessMap.channel),iridescenceMapUv:Ce&&v(E.iridescenceMap.channel),iridescenceThicknessMapUv:Te&&v(E.iridescenceThicknessMap.channel),sheenColorMapUv:Pe&&v(E.sheenColorMap.channel),sheenRoughnessMapUv:Y&&v(E.sheenRoughnessMap.channel),specularMapUv:Se&&v(E.specularMap.channel),specularColorMapUv:de&&v(E.specularColorMap.channel),specularIntensityMapUv:Qe&&v(E.specularIntensityMap.channel),transmissionMapUv:Ge&&v(E.transmissionMap.channel),thicknessMapUv:qe&&v(E.thicknessMap.channel),alphaMapUv:De&&v(E.alphaMap.channel),vertexTangents:!!k.attributes.tangent&&(Le||ht),vertexColors:E.vertexColors,vertexAlphas:E.vertexColors===!0&&!!k.attributes.color&&k.attributes.color.itemSize===4,vertexUv1s:ue,vertexUv2s:ne,vertexUv3s:ge,pointsUvs:O.isPoints===!0&&!!k.attributes.uv&&(fe||De),fog:!!D,useFog:E.fog===!0,fogExp2:D&&D.isFogExp2,flatShading:E.flatShading===!0,sizeAttenuation:E.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:O.isSkinnedMesh===!0,morphTargets:k.morphAttributes.position!==void 0,morphNormals:k.morphAttributes.normal!==void 0,morphColors:k.morphAttributes.color!==void 0,morphTargetsCount:z,morphTextureStride:X,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:E.dithering,shadowMapEnabled:t.shadowMap.enabled&&R.length>0,shadowMapType:t.shadowMap.type,toneMapping:Ie,useLegacyLights:t._useLegacyLights,decodeVideoTexture:fe&&E.map.isVideoTexture===!0&&zt.getTransfer(E.map.colorSpace)===tn,premultipliedAlpha:E.premultipliedAlpha,doubleSided:E.side===Jo,flipSided:E.side===Vr,useDepthPacking:E.depthPacking>=0,depthPacking:E.depthPacking||0,index0AttributeName:E.index0AttributeName,extensionDerivatives:le&&E.extensions.derivatives===!0,extensionFragDepth:le&&E.extensions.fragDepth===!0,extensionDrawBuffers:le&&E.extensions.drawBuffers===!0,extensionShaderTextureLOD:le&&E.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:E.customProgramCacheKey()}}function p(E){const P=[];if(E.shaderID?P.push(E.shaderID):(P.push(E.customVertexShaderID),P.push(E.customFragmentShaderID)),E.defines!==void 0)for(const R in E.defines)P.push(R),P.push(E.defines[R]);return E.isRawShaderMaterial===!1&&(x(P,E),_(P,E),P.push(t.outputColorSpace)),P.push(E.customProgramCacheKey),P.join()}function x(E,P){E.push(P.precision),E.push(P.outputColorSpace),E.push(P.envMapMode),E.push(P.envMapCubeUVHeight),E.push(P.mapUv),E.push(P.alphaMapUv),E.push(P.lightMapUv),E.push(P.aoMapUv),E.push(P.bumpMapUv),E.push(P.normalMapUv),E.push(P.displacementMapUv),E.push(P.emissiveMapUv),E.push(P.metalnessMapUv),E.push(P.roughnessMapUv),E.push(P.anisotropyMapUv),E.push(P.clearcoatMapUv),E.push(P.clearcoatNormalMapUv),E.push(P.clearcoatRoughnessMapUv),E.push(P.iridescenceMapUv),E.push(P.iridescenceThicknessMapUv),E.push(P.sheenColorMapUv),E.push(P.sheenRoughnessMapUv),E.push(P.specularMapUv),E.push(P.specularColorMapUv),E.push(P.specularIntensityMapUv),E.push(P.transmissionMapUv),E.push(P.thicknessMapUv),E.push(P.combine),E.push(P.fogExp2),E.push(P.sizeAttenuation),E.push(P.morphTargetsCount),E.push(P.morphAttributeCount),E.push(P.numDirLights),E.push(P.numPointLights),E.push(P.numSpotLights),E.push(P.numSpotLightMaps),E.push(P.numHemiLights),E.push(P.numRectAreaLights),E.push(P.numDirLightShadows),E.push(P.numPointLightShadows),E.push(P.numSpotLightShadows),E.push(P.numSpotLightShadowsWithMaps),E.push(P.numLightProbes),E.push(P.shadowMapType),E.push(P.toneMapping),E.push(P.numClippingPlanes),E.push(P.numClipIntersection),E.push(P.depthPacking)}function _(E,P){s.disableAll(),P.isWebGL2&&s.enable(0),P.supportsVertexTextures&&s.enable(1),P.instancing&&s.enable(2),P.instancingColor&&s.enable(3),P.matcap&&s.enable(4),P.envMap&&s.enable(5),P.normalMapObjectSpace&&s.enable(6),P.normalMapTangentSpace&&s.enable(7),P.clearcoat&&s.enable(8),P.iridescence&&s.enable(9),P.alphaTest&&s.enable(10),P.vertexColors&&s.enable(11),P.vertexAlphas&&s.enable(12),P.vertexUv1s&&s.enable(13),P.vertexUv2s&&s.enable(14),P.vertexUv3s&&s.enable(15),P.vertexTangents&&s.enable(16),P.anisotropy&&s.enable(17),P.alphaHash&&s.enable(18),E.push(s.mask),s.disableAll(),P.fog&&s.enable(0),P.useFog&&s.enable(1),P.flatShading&&s.enable(2),P.logarithmicDepthBuffer&&s.enable(3),P.skinning&&s.enable(4),P.morphTargets&&s.enable(5),P.morphNormals&&s.enable(6),P.morphColors&&s.enable(7),P.premultipliedAlpha&&s.enable(8),P.shadowMapEnabled&&s.enable(9),P.useLegacyLights&&s.enable(10),P.doubleSided&&s.enable(11),P.flipSided&&s.enable(12),P.useDepthPacking&&s.enable(13),P.dithering&&s.enable(14),P.transmission&&s.enable(15),P.sheen&&s.enable(16),P.opaque&&s.enable(17),P.pointsUvs&&s.enable(18),P.decodeVideoTexture&&s.enable(19),E.push(s.mask)}function T(E){const P=y[E.type];let R;if(P){const N=_o[P];R=LH.clone(N.uniforms)}else R=E.uniforms;return R}function w(E,P){let R;for(let N=0,O=c.length;N<O;N++){const D=c[N];if(D.cacheKey===P){R=D,++R.usedTimes;break}}return R===void 0&&(R=new Wq(t,P,E,o),c.push(R)),R}function M(E){if(--E.usedTimes===0){const P=c.indexOf(E);c[P]=c[c.length-1],c.pop(),E.destroy()}}function b(E){l.remove(E)}function A(){l.dispose()}return{getParameters:g,getProgramCacheKey:p,getUniforms:T,acquireProgram:w,releaseProgram:M,releaseShaderCache:b,programs:c,dispose:A}}function Qq(){let t=new WeakMap;function e(o){let a=t.get(o);return a===void 0&&(a={},t.set(o,a)),a}function n(o){t.delete(o)}function r(o,a,s){t.get(o)[a]=s}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function Zq(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function j2(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function U2(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function a(f,h,d,y,v,g){let p=t[e];return p===void 0?(p={id:f.id,object:f,geometry:h,material:d,groupOrder:y,renderOrder:f.renderOrder,z:v,group:g},t[e]=p):(p.id=f.id,p.object=f,p.geometry=h,p.material=d,p.groupOrder=y,p.renderOrder=f.renderOrder,p.z=v,p.group=g),e++,p}function s(f,h,d,y,v,g){const p=a(f,h,d,y,v,g);d.transmission>0?r.push(p):d.transparent===!0?i.push(p):n.push(p)}function l(f,h,d,y,v,g){const p=a(f,h,d,y,v,g);d.transmission>0?r.unshift(p):d.transparent===!0?i.unshift(p):n.unshift(p)}function c(f,h){n.length>1&&n.sort(f||Zq),r.length>1&&r.sort(h||j2),i.length>1&&i.sort(h||j2)}function u(){for(let f=e,h=t.length;f<h;f++){const d=t[f];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:s,unshift:l,finish:u,sort:c}}function Jq(){let t=new WeakMap;function e(r,i){const o=t.get(r);let a;return o===void 0?(a=new U2,t.set(r,[a])):i>=o.length?(a=new U2,o.push(a)):a=o[i],a}function n(){t=new WeakMap}return{get:e,dispose:n}}function eX(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new te,color:new Ot};break;case"SpotLight":n={position:new te,direction:new te,color:new Ot,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new te,color:new Ot,distance:0,decay:0};break;case"HemisphereLight":n={direction:new te,skyColor:new Ot,groundColor:new Ot};break;case"RectAreaLight":n={color:new Ot,position:new te,halfWidth:new te,halfHeight:new te};break}return t[e.id]=n,n}}}function tX(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let nX=0;function rX(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function iX(t,e){const n=new eX,r=tX(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new te);const o=new te,a=new In,s=new In;function l(u,f){let h=0,d=0,y=0;for(let N=0;N<9;N++)i.probe[N].set(0,0,0);let v=0,g=0,p=0,x=0,_=0,T=0,w=0,M=0,b=0,A=0,E=0;u.sort(rX);const P=f===!0?Math.PI:1;for(let N=0,O=u.length;N<O;N++){const D=u[N],k=D.color,H=D.intensity,B=D.distance,F=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)h+=k.r*H*P,d+=k.g*H*P,y+=k.b*H*P;else if(D.isLightProbe){for(let q=0;q<9;q++)i.probe[q].addScaledVector(D.sh.coefficients[q],H);E++}else if(D.isDirectionalLight){const q=n.get(D);if(q.color.copy(D.color).multiplyScalar(D.intensity*P),D.castShadow){const K=D.shadow,z=r.get(D);z.shadowBias=K.bias,z.shadowNormalBias=K.normalBias,z.shadowRadius=K.radius,z.shadowMapSize=K.mapSize,i.directionalShadow[v]=z,i.directionalShadowMap[v]=F,i.directionalShadowMatrix[v]=D.shadow.matrix,T++}i.directional[v]=q,v++}else if(D.isSpotLight){const q=n.get(D);q.position.setFromMatrixPosition(D.matrixWorld),q.color.copy(k).multiplyScalar(H*P),q.distance=B,q.coneCos=Math.cos(D.angle),q.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),q.decay=D.decay,i.spot[p]=q;const K=D.shadow;if(D.map&&(i.spotLightMap[b]=D.map,b++,K.updateMatrices(D),D.castShadow&&A++),i.spotLightMatrix[p]=K.matrix,D.castShadow){const z=r.get(D);z.shadowBias=K.bias,z.shadowNormalBias=K.normalBias,z.shadowRadius=K.radius,z.shadowMapSize=K.mapSize,i.spotShadow[p]=z,i.spotShadowMap[p]=F,M++}p++}else if(D.isRectAreaLight){const q=n.get(D);q.color.copy(k).multiplyScalar(H),q.halfWidth.set(D.width*.5,0,0),q.halfHeight.set(0,D.height*.5,0),i.rectArea[x]=q,x++}else if(D.isPointLight){const q=n.get(D);if(q.color.copy(D.color).multiplyScalar(D.intensity*P),q.distance=D.distance,q.decay=D.decay,D.castShadow){const K=D.shadow,z=r.get(D);z.shadowBias=K.bias,z.shadowNormalBias=K.normalBias,z.shadowRadius=K.radius,z.shadowMapSize=K.mapSize,z.shadowCameraNear=K.camera.near,z.shadowCameraFar=K.camera.far,i.pointShadow[g]=z,i.pointShadowMap[g]=F,i.pointShadowMatrix[g]=D.shadow.matrix,w++}i.point[g]=q,g++}else if(D.isHemisphereLight){const q=n.get(D);q.skyColor.copy(D.color).multiplyScalar(H*P),q.groundColor.copy(D.groundColor).multiplyScalar(H*P),i.hemi[_]=q,_++}}x>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Oe.LTC_FLOAT_1,i.rectAreaLTC2=Oe.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Oe.LTC_HALF_1,i.rectAreaLTC2=Oe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=d,i.ambient[2]=y;const R=i.hash;(R.directionalLength!==v||R.pointLength!==g||R.spotLength!==p||R.rectAreaLength!==x||R.hemiLength!==_||R.numDirectionalShadows!==T||R.numPointShadows!==w||R.numSpotShadows!==M||R.numSpotMaps!==b||R.numLightProbes!==E)&&(i.directional.length=v,i.spot.length=p,i.rectArea.length=x,i.point.length=g,i.hemi.length=_,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=M,i.spotShadowMap.length=M,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=M+b-A,i.spotLightMap.length=b,i.numSpotLightShadowsWithMaps=A,i.numLightProbes=E,R.directionalLength=v,R.pointLength=g,R.spotLength=p,R.rectAreaLength=x,R.hemiLength=_,R.numDirectionalShadows=T,R.numPointShadows=w,R.numSpotShadows=M,R.numSpotMaps=b,R.numLightProbes=E,i.version=nX++)}function c(u,f){let h=0,d=0,y=0,v=0,g=0;const p=f.matrixWorldInverse;for(let x=0,_=u.length;x<_;x++){const T=u[x];if(T.isDirectionalLight){const w=i.directional[h];w.direction.setFromMatrixPosition(T.matrixWorld),o.setFromMatrixPosition(T.target.matrixWorld),w.direction.sub(o),w.direction.transformDirection(p),h++}else if(T.isSpotLight){const w=i.spot[y];w.position.setFromMatrixPosition(T.matrixWorld),w.position.applyMatrix4(p),w.direction.setFromMatrixPosition(T.matrixWorld),o.setFromMatrixPosition(T.target.matrixWorld),w.direction.sub(o),w.direction.transformDirection(p),y++}else if(T.isRectAreaLight){const w=i.rectArea[v];w.position.setFromMatrixPosition(T.matrixWorld),w.position.applyMatrix4(p),s.identity(),a.copy(T.matrixWorld),a.premultiply(p),s.extractRotation(a),w.halfWidth.set(T.width*.5,0,0),w.halfHeight.set(0,T.height*.5,0),w.halfWidth.applyMatrix4(s),w.halfHeight.applyMatrix4(s),v++}else if(T.isPointLight){const w=i.point[d];w.position.setFromMatrixPosition(T.matrixWorld),w.position.applyMatrix4(p),d++}else if(T.isHemisphereLight){const w=i.hemi[g];w.direction.setFromMatrixPosition(T.matrixWorld),w.direction.transformDirection(p),g++}}}return{setup:l,setupView:c,state:i}}function F2(t,e){const n=new iX(t,e),r=[],i=[];function o(){r.length=0,i.length=0}function a(f){r.push(f)}function s(f){i.push(f)}function l(f){n.setup(r,f)}function c(f){n.setupView(r,f)}return{init:o,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:c,pushLight:a,pushShadow:s}}function oX(t,e){let n=new WeakMap;function r(o,a=0){const s=n.get(o);let l;return s===void 0?(l=new F2(t,e),n.set(o,[l])):a>=s.length?(l=new F2(t,e),s.push(l)):l=s[a],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class aX extends Of{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=W8,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class sX extends Of{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const lX=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,cX=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function uX(t,e,n){let r=new uT;const i=new gt,o=new gt,a=new Zn,s=new aX({depthPacking:q8}),l=new sX,c={},u=n.maxTextureSize,f={[ws]:Vr,[Vr]:ws,[Jo]:Jo},h=new ba({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new gt},radius:{value:4}},vertexShader:lX,fragmentShader:cX}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const y=new jo;y.setAttribute("position",new To(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Gr(y,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Oj;let p=this.type;this.render=function(w,M,b){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||w.length===0)return;const A=t.getRenderTarget(),E=t.getActiveCubeFace(),P=t.getActiveMipmapLevel(),R=t.state;R.setBlending(hs),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);const N=p!==Ko&&this.type===Ko,O=p===Ko&&this.type!==Ko;for(let D=0,k=w.length;D<k;D++){const H=w[D],B=H.shadow;if(B===void 0){console.warn("THREE.WebGLShadowMap:",H,"has no shadow.");continue}if(B.autoUpdate===!1&&B.needsUpdate===!1)continue;i.copy(B.mapSize);const F=B.getFrameExtents();if(i.multiply(F),o.copy(B.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/F.x),i.x=o.x*F.x,B.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/F.y),i.y=o.y*F.y,B.mapSize.y=o.y)),B.map===null||N===!0||O===!0){const K=this.type!==Ko?{minFilter:Dr,magFilter:Dr}:{};B.map!==null&&B.map.dispose(),B.map=new Fl(i.x,i.y,K),B.map.texture.name=H.name+".shadowMap",B.camera.updateProjectionMatrix()}t.setRenderTarget(B.map),t.clear();const q=B.getViewportCount();for(let K=0;K<q;K++){const z=B.getViewport(K);a.set(o.x*z.x,o.y*z.y,o.x*z.z,o.y*z.w),R.viewport(a),B.updateMatrices(H,K),r=B.getFrustum(),T(M,b,B.camera,H,this.type)}B.isPointLightShadow!==!0&&this.type===Ko&&x(B,b),B.needsUpdate=!1}p=this.type,g.needsUpdate=!1,t.setRenderTarget(A,E,P)};function x(w,M){const b=e.update(v);h.defines.VSM_SAMPLES!==w.blurSamples&&(h.defines.VSM_SAMPLES=w.blurSamples,d.defines.VSM_SAMPLES=w.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new Fl(i.x,i.y)),h.uniforms.shadow_pass.value=w.map.texture,h.uniforms.resolution.value=w.mapSize,h.uniforms.radius.value=w.radius,t.setRenderTarget(w.mapPass),t.clear(),t.renderBufferDirect(M,null,b,h,v,null),d.uniforms.shadow_pass.value=w.mapPass.texture,d.uniforms.resolution.value=w.mapSize,d.uniforms.radius.value=w.radius,t.setRenderTarget(w.map),t.clear(),t.renderBufferDirect(M,null,b,d,v,null)}function _(w,M,b,A){let E=null;const P=b.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(P!==void 0)E=P;else if(E=b.isPointLight===!0?l:s,t.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const R=E.uuid,N=M.uuid;let O=c[R];O===void 0&&(O={},c[R]=O);let D=O[N];D===void 0&&(D=E.clone(),O[N]=D),E=D}if(E.visible=M.visible,E.wireframe=M.wireframe,A===Ko?E.side=M.shadowSide!==null?M.shadowSide:M.side:E.side=M.shadowSide!==null?M.shadowSide:f[M.side],E.alphaMap=M.alphaMap,E.alphaTest=M.alphaTest,E.map=M.map,E.clipShadows=M.clipShadows,E.clippingPlanes=M.clippingPlanes,E.clipIntersection=M.clipIntersection,E.displacementMap=M.displacementMap,E.displacementScale=M.displacementScale,E.displacementBias=M.displacementBias,E.wireframeLinewidth=M.wireframeLinewidth,E.linewidth=M.linewidth,b.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const R=t.properties.get(E);R.light=b}return E}function T(w,M,b,A,E){if(w.visible===!1)return;if(w.layers.test(M.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&E===Ko)&&(!w.frustumCulled||r.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,w.matrixWorld);const N=e.update(w),O=w.material;if(Array.isArray(O)){const D=N.groups;for(let k=0,H=D.length;k<H;k++){const B=D[k],F=O[B.materialIndex];if(F&&F.visible){const q=_(w,F,A,E);t.renderBufferDirect(b,null,N,q,w,B)}}}else if(O.visible){const D=_(w,O,A,E);t.renderBufferDirect(b,null,N,D,w,null)}}const R=w.children;for(let N=0,O=R.length;N<O;N++)T(R[N],M,b,A,E)}}function fX(t,e,n){const r=n.isWebGL2;function i(){let Q=!1;const le=new Zn;let ue=null;const ne=new Zn(0,0,0,0);return{setMask:function(ge){ue!==ge&&!Q&&(t.colorMask(ge,ge,ge,ge),ue=ge)},setLocked:function(ge){Q=ge},setClear:function(ge,Ie,rt,It,En){En===!0&&(ge*=It,Ie*=It,rt*=It),le.set(ge,Ie,rt,It),ne.equals(le)===!1&&(t.clearColor(ge,Ie,rt,It),ne.copy(le))},reset:function(){Q=!1,ue=null,ne.set(-1,0,0,0)}}}function o(){let Q=!1,le=null,ue=null,ne=null;return{setTest:function(ge){ge?fe(t.DEPTH_TEST):Re(t.DEPTH_TEST)},setMask:function(ge){le!==ge&&!Q&&(t.depthMask(ge),le=ge)},setFunc:function(ge){if(ue!==ge){switch(ge){case w8:t.depthFunc(t.NEVER);break;case S8:t.depthFunc(t.ALWAYS);break;case E8:t.depthFunc(t.LESS);break;case Av:t.depthFunc(t.LEQUAL);break;case T8:t.depthFunc(t.EQUAL);break;case A8:t.depthFunc(t.GEQUAL);break;case M8:t.depthFunc(t.GREATER);break;case P8:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}ue=ge}},setLocked:function(ge){Q=ge},setClear:function(ge){ne!==ge&&(t.clearDepth(ge),ne=ge)},reset:function(){Q=!1,le=null,ue=null,ne=null}}}function a(){let Q=!1,le=null,ue=null,ne=null,ge=null,Ie=null,rt=null,It=null,En=null;return{setTest:function(dt){Q||(dt?fe(t.STENCIL_TEST):Re(t.STENCIL_TEST))},setMask:function(dt){le!==dt&&!Q&&(t.stencilMask(dt),le=dt)},setFunc:function(dt,Tn,Dn){(ue!==dt||ne!==Tn||ge!==Dn)&&(t.stencilFunc(dt,Tn,Dn),ue=dt,ne=Tn,ge=Dn)},setOp:function(dt,Tn,Dn){(Ie!==dt||rt!==Tn||It!==Dn)&&(t.stencilOp(dt,Tn,Dn),Ie=dt,rt=Tn,It=Dn)},setLocked:function(dt){Q=dt},setClear:function(dt){En!==dt&&(t.clearStencil(dt),En=dt)},reset:function(){Q=!1,le=null,ue=null,ne=null,ge=null,Ie=null,rt=null,It=null,En=null}}}const s=new i,l=new o,c=new a,u=new WeakMap,f=new WeakMap;let h={},d={},y=new WeakMap,v=[],g=null,p=!1,x=null,_=null,T=null,w=null,M=null,b=null,A=null,E=new Ot(0,0,0),P=0,R=!1,N=null,O=null,D=null,k=null,H=null;const B=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let F=!1,q=0;const K=t.getParameter(t.VERSION);K.indexOf("WebGL")!==-1?(q=parseFloat(/^WebGL (\d)/.exec(K)[1]),F=q>=1):K.indexOf("OpenGL ES")!==-1&&(q=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),F=q>=2);let z=null,X={};const ee=t.getParameter(t.SCISSOR_BOX),me=t.getParameter(t.VIEWPORT),_e=new Zn().fromArray(ee),Ne=new Zn().fromArray(me);function We(Q,le,ue,ne){const ge=new Uint8Array(4),Ie=t.createTexture();t.bindTexture(Q,Ie),t.texParameteri(Q,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Q,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let rt=0;rt<ue;rt++)r&&(Q===t.TEXTURE_3D||Q===t.TEXTURE_2D_ARRAY)?t.texImage3D(le,0,t.RGBA,1,1,ne,0,t.RGBA,t.UNSIGNED_BYTE,ge):t.texImage2D(le+rt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,ge);return Ie}const Ue={};Ue[t.TEXTURE_2D]=We(t.TEXTURE_2D,t.TEXTURE_2D,1),Ue[t.TEXTURE_CUBE_MAP]=We(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Ue[t.TEXTURE_2D_ARRAY]=We(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Ue[t.TEXTURE_3D]=We(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),s.setClear(0,0,0,1),l.setClear(1),c.setClear(0),fe(t.DEPTH_TEST),l.setFunc(Av),Ye(!1),Ze(bC),fe(t.CULL_FACE),ke(hs);function fe(Q){h[Q]!==!0&&(t.enable(Q),h[Q]=!0)}function Re(Q){h[Q]!==!1&&(t.disable(Q),h[Q]=!1)}function Ee(Q,le){return d[Q]!==le?(t.bindFramebuffer(Q,le),d[Q]=le,r&&(Q===t.DRAW_FRAMEBUFFER&&(d[t.FRAMEBUFFER]=le),Q===t.FRAMEBUFFER&&(d[t.DRAW_FRAMEBUFFER]=le)),!0):!1}function G(Q,le){let ue=v,ne=!1;if(Q)if(ue=y.get(le),ue===void 0&&(ue=[],y.set(le,ue)),Q.isWebGLMultipleRenderTargets){const ge=Q.texture;if(ue.length!==ge.length||ue[0]!==t.COLOR_ATTACHMENT0){for(let Ie=0,rt=ge.length;Ie<rt;Ie++)ue[Ie]=t.COLOR_ATTACHMENT0+Ie;ue.length=ge.length,ne=!0}}else ue[0]!==t.COLOR_ATTACHMENT0&&(ue[0]=t.COLOR_ATTACHMENT0,ne=!0);else ue[0]!==t.BACK&&(ue[0]=t.BACK,ne=!0);ne&&(n.isWebGL2?t.drawBuffers(ue):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ue))}function lt(Q){return g!==Q?(t.useProgram(Q),g=Q,!0):!1}const be={[cl]:t.FUNC_ADD,[s8]:t.FUNC_SUBTRACT,[l8]:t.FUNC_REVERSE_SUBTRACT};if(r)be[EC]=t.MIN,be[TC]=t.MAX;else{const Q=e.get("EXT_blend_minmax");Q!==null&&(be[EC]=Q.MIN_EXT,be[TC]=Q.MAX_EXT)}const Le={[c8]:t.ZERO,[u8]:t.ONE,[f8]:t.SRC_COLOR,[U1]:t.SRC_ALPHA,[v8]:t.SRC_ALPHA_SATURATE,[m8]:t.DST_COLOR,[d8]:t.DST_ALPHA,[h8]:t.ONE_MINUS_SRC_COLOR,[F1]:t.ONE_MINUS_SRC_ALPHA,[g8]:t.ONE_MINUS_DST_COLOR,[p8]:t.ONE_MINUS_DST_ALPHA,[y8]:t.CONSTANT_COLOR,[_8]:t.ONE_MINUS_CONSTANT_COLOR,[x8]:t.CONSTANT_ALPHA,[b8]:t.ONE_MINUS_CONSTANT_ALPHA};function ke(Q,le,ue,ne,ge,Ie,rt,It,En,dt){if(Q===hs){p===!0&&(Re(t.BLEND),p=!1);return}if(p===!1&&(fe(t.BLEND),p=!0),Q!==a8){if(Q!==x||dt!==R){if((_!==cl||M!==cl)&&(t.blendEquation(t.FUNC_ADD),_=cl,M=cl),dt)switch(Q){case Su:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case j1:t.blendFunc(t.ONE,t.ONE);break;case wC:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case SC:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}else switch(Q){case Su:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case j1:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case wC:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case SC:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}T=null,w=null,b=null,A=null,E.set(0,0,0),P=0,x=Q,R=dt}return}ge=ge||le,Ie=Ie||ue,rt=rt||ne,(le!==_||ge!==M)&&(t.blendEquationSeparate(be[le],be[ge]),_=le,M=ge),(ue!==T||ne!==w||Ie!==b||rt!==A)&&(t.blendFuncSeparate(Le[ue],Le[ne],Le[Ie],Le[rt]),T=ue,w=ne,b=Ie,A=rt),(It.equals(E)===!1||En!==P)&&(t.blendColor(It.r,It.g,It.b,En),E.copy(It),P=En),x=Q,R=!1}function mt(Q,le){Q.side===Jo?Re(t.CULL_FACE):fe(t.CULL_FACE);let ue=Q.side===Vr;le&&(ue=!ue),Ye(ue),Q.blending===Su&&Q.transparent===!1?ke(hs):ke(Q.blending,Q.blendEquation,Q.blendSrc,Q.blendDst,Q.blendEquationAlpha,Q.blendSrcAlpha,Q.blendDstAlpha,Q.blendColor,Q.blendAlpha,Q.premultipliedAlpha),l.setFunc(Q.depthFunc),l.setTest(Q.depthTest),l.setMask(Q.depthWrite),s.setMask(Q.colorWrite);const ne=Q.stencilWrite;c.setTest(ne),ne&&(c.setMask(Q.stencilWriteMask),c.setFunc(Q.stencilFunc,Q.stencilRef,Q.stencilFuncMask),c.setOp(Q.stencilFail,Q.stencilZFail,Q.stencilZPass)),Pt(Q.polygonOffset,Q.polygonOffsetFactor,Q.polygonOffsetUnits),Q.alphaToCoverage===!0?fe(t.SAMPLE_ALPHA_TO_COVERAGE):Re(t.SAMPLE_ALPHA_TO_COVERAGE)}function Ye(Q){N!==Q&&(Q?t.frontFace(t.CW):t.frontFace(t.CCW),N=Q)}function Ze(Q){Q!==r8?(fe(t.CULL_FACE),Q!==O&&(Q===bC?t.cullFace(t.BACK):Q===i8?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Re(t.CULL_FACE),O=Q}function ht(Q){Q!==D&&(F&&t.lineWidth(Q),D=Q)}function Pt(Q,le,ue){Q?(fe(t.POLYGON_OFFSET_FILL),(k!==le||H!==ue)&&(t.polygonOffset(le,ue),k=le,H=ue)):Re(t.POLYGON_OFFSET_FILL)}function kt(Q){Q?fe(t.SCISSOR_TEST):Re(t.SCISSOR_TEST)}function $(Q){Q===void 0&&(Q=t.TEXTURE0+B-1),z!==Q&&(t.activeTexture(Q),z=Q)}function L(Q,le,ue){ue===void 0&&(z===null?ue=t.TEXTURE0+B-1:ue=z);let ne=X[ue];ne===void 0&&(ne={type:void 0,texture:void 0},X[ue]=ne),(ne.type!==Q||ne.texture!==le)&&(z!==ue&&(t.activeTexture(ue),z=ue),t.bindTexture(Q,le||Ue[Q]),ne.type=Q,ne.texture=le)}function re(){const Q=X[z];Q!==void 0&&Q.type!==void 0&&(t.bindTexture(Q.type,null),Q.type=void 0,Q.texture=void 0)}function ye(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function he(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function xe(){try{t.texSubImage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Ce(){try{t.texSubImage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Te(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Pe(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Y(){try{t.texStorage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Se(){try{t.texStorage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function de(){try{t.texImage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Qe(){try{t.texImage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Ge(Q){_e.equals(Q)===!1&&(t.scissor(Q.x,Q.y,Q.z,Q.w),_e.copy(Q))}function qe(Q){Ne.equals(Q)===!1&&(t.viewport(Q.x,Q.y,Q.z,Q.w),Ne.copy(Q))}function Ve(Q,le){let ue=f.get(le);ue===void 0&&(ue=new WeakMap,f.set(le,ue));let ne=ue.get(Q);ne===void 0&&(ne=t.getUniformBlockIndex(le,Q.name),ue.set(Q,ne))}function De(Q,le){const ne=f.get(le).get(Q);u.get(le)!==ne&&(t.uniformBlockBinding(le,ne,Q.__bindingPointIndex),u.set(le,ne))}function vt(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),h={},z=null,X={},d={},y=new WeakMap,v=[],g=null,p=!1,x=null,_=null,T=null,w=null,M=null,b=null,A=null,E=new Ot(0,0,0),P=0,R=!1,N=null,O=null,D=null,k=null,H=null,_e.set(0,0,t.canvas.width,t.canvas.height),Ne.set(0,0,t.canvas.width,t.canvas.height),s.reset(),l.reset(),c.reset()}return{buffers:{color:s,depth:l,stencil:c},enable:fe,disable:Re,bindFramebuffer:Ee,drawBuffers:G,useProgram:lt,setBlending:ke,setMaterial:mt,setFlipSided:Ye,setCullFace:Ze,setLineWidth:ht,setPolygonOffset:Pt,setScissorTest:kt,activeTexture:$,bindTexture:L,unbindTexture:re,compressedTexImage2D:ye,compressedTexImage3D:he,texImage2D:de,texImage3D:Qe,updateUBOMapping:Ve,uniformBlockBinding:De,texStorage2D:Y,texStorage3D:Se,texSubImage2D:xe,texSubImage3D:Ce,compressedTexSubImage2D:Te,compressedTexSubImage3D:Pe,scissor:Ge,viewport:qe,reset:vt}}function hX(t,e,n,r,i,o,a){const s=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,f=i.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),y=new WeakMap;let v;const g=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x($,L){return p?new OffscreenCanvas($,L):Vd("canvas")}function _($,L,re,ye){let he=1;if(($.width>ye||$.height>ye)&&(he=ye/Math.max($.width,$.height)),he<1||L===!0)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap){const xe=L?Ov:Math.floor,Ce=xe(he*$.width),Te=xe(he*$.height);v===void 0&&(v=x(Ce,Te));const Pe=re?x(Ce,Te):v;return Pe.width=Ce,Pe.height=Te,Pe.getContext("2d").drawImage($,0,0,Ce,Te),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+$.width+"x"+$.height+") to ("+Ce+"x"+Te+")."),Pe}else return"data"in $&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+$.width+"x"+$.height+")."),$;return $}function T($){return G1($.width)&&G1($.height)}function w($){return s?!1:$.wrapS!==eo||$.wrapT!==eo||$.minFilter!==Dr&&$.minFilter!==Mi}function M($,L){return $.generateMipmaps&&L&&$.minFilter!==Dr&&$.minFilter!==Mi}function b($){t.generateMipmap($)}function A($,L,re,ye,he=!1){if(s===!1)return L;if($!==null){if(t[$]!==void 0)return t[$];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let xe=L;if(L===t.RED&&(re===t.FLOAT&&(xe=t.R32F),re===t.HALF_FLOAT&&(xe=t.R16F),re===t.UNSIGNED_BYTE&&(xe=t.R8)),L===t.RED_INTEGER&&(re===t.UNSIGNED_BYTE&&(xe=t.R8UI),re===t.UNSIGNED_SHORT&&(xe=t.R16UI),re===t.UNSIGNED_INT&&(xe=t.R32UI),re===t.BYTE&&(xe=t.R8I),re===t.SHORT&&(xe=t.R16I),re===t.INT&&(xe=t.R32I)),L===t.RG&&(re===t.FLOAT&&(xe=t.RG32F),re===t.HALF_FLOAT&&(xe=t.RG16F),re===t.UNSIGNED_BYTE&&(xe=t.RG8)),L===t.RGBA){const Ce=he?Mv:zt.getTransfer(ye);re===t.FLOAT&&(xe=t.RGBA32F),re===t.HALF_FLOAT&&(xe=t.RGBA16F),re===t.UNSIGNED_BYTE&&(xe=Ce===tn?t.SRGB8_ALPHA8:t.RGBA8),re===t.UNSIGNED_SHORT_4_4_4_4&&(xe=t.RGBA4),re===t.UNSIGNED_SHORT_5_5_5_1&&(xe=t.RGB5_A1)}return(xe===t.R16F||xe===t.R32F||xe===t.RG16F||xe===t.RG32F||xe===t.RGBA16F||xe===t.RGBA32F)&&e.get("EXT_color_buffer_float"),xe}function E($,L,re){return M($,re)===!0||$.isFramebufferTexture&&$.minFilter!==Dr&&$.minFilter!==Mi?Math.log2(Math.max(L.width,L.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?L.mipmaps.length:1}function P($){return $===Dr||$===AC||$===px?t.NEAREST:t.LINEAR}function R($){const L=$.target;L.removeEventListener("dispose",R),O(L),L.isVideoTexture&&y.delete(L)}function N($){const L=$.target;L.removeEventListener("dispose",N),k(L)}function O($){const L=r.get($);if(L.__webglInit===void 0)return;const re=$.source,ye=g.get(re);if(ye){const he=ye[L.__cacheKey];he.usedTimes--,he.usedTimes===0&&D($),Object.keys(ye).length===0&&g.delete(re)}r.remove($)}function D($){const L=r.get($);t.deleteTexture(L.__webglTexture);const re=$.source,ye=g.get(re);delete ye[L.__cacheKey],a.memory.textures--}function k($){const L=$.texture,re=r.get($),ye=r.get(L);if(ye.__webglTexture!==void 0&&(t.deleteTexture(ye.__webglTexture),a.memory.textures--),$.depthTexture&&$.depthTexture.dispose(),$.isWebGLCubeRenderTarget)for(let he=0;he<6;he++){if(Array.isArray(re.__webglFramebuffer[he]))for(let xe=0;xe<re.__webglFramebuffer[he].length;xe++)t.deleteFramebuffer(re.__webglFramebuffer[he][xe]);else t.deleteFramebuffer(re.__webglFramebuffer[he]);re.__webglDepthbuffer&&t.deleteRenderbuffer(re.__webglDepthbuffer[he])}else{if(Array.isArray(re.__webglFramebuffer))for(let he=0;he<re.__webglFramebuffer.length;he++)t.deleteFramebuffer(re.__webglFramebuffer[he]);else t.deleteFramebuffer(re.__webglFramebuffer);if(re.__webglDepthbuffer&&t.deleteRenderbuffer(re.__webglDepthbuffer),re.__webglMultisampledFramebuffer&&t.deleteFramebuffer(re.__webglMultisampledFramebuffer),re.__webglColorRenderbuffer)for(let he=0;he<re.__webglColorRenderbuffer.length;he++)re.__webglColorRenderbuffer[he]&&t.deleteRenderbuffer(re.__webglColorRenderbuffer[he]);re.__webglDepthRenderbuffer&&t.deleteRenderbuffer(re.__webglDepthRenderbuffer)}if($.isWebGLMultipleRenderTargets)for(let he=0,xe=L.length;he<xe;he++){const Ce=r.get(L[he]);Ce.__webglTexture&&(t.deleteTexture(Ce.__webglTexture),a.memory.textures--),r.remove(L[he])}r.remove(L),r.remove($)}let H=0;function B(){H=0}function F(){const $=H;return $>=l&&console.warn("THREE.WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+l),H+=1,$}function q($){const L=[];return L.push($.wrapS),L.push($.wrapT),L.push($.wrapR||0),L.push($.magFilter),L.push($.minFilter),L.push($.anisotropy),L.push($.internalFormat),L.push($.format),L.push($.type),L.push($.generateMipmaps),L.push($.premultiplyAlpha),L.push($.flipY),L.push($.unpackAlignment),L.push($.colorSpace),L.join()}function K($,L){const re=r.get($);if($.isVideoTexture&&Pt($),$.isRenderTargetTexture===!1&&$.version>0&&re.__version!==$.version){const ye=$.image;if(ye===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ye.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{fe(re,$,L);return}}n.bindTexture(t.TEXTURE_2D,re.__webglTexture,t.TEXTURE0+L)}function z($,L){const re=r.get($);if($.version>0&&re.__version!==$.version){fe(re,$,L);return}n.bindTexture(t.TEXTURE_2D_ARRAY,re.__webglTexture,t.TEXTURE0+L)}function X($,L){const re=r.get($);if($.version>0&&re.__version!==$.version){fe(re,$,L);return}n.bindTexture(t.TEXTURE_3D,re.__webglTexture,t.TEXTURE0+L)}function ee($,L){const re=r.get($);if($.version>0&&re.__version!==$.version){Re(re,$,L);return}n.bindTexture(t.TEXTURE_CUBE_MAP,re.__webglTexture,t.TEXTURE0+L)}const me={[$1]:t.REPEAT,[eo]:t.CLAMP_TO_EDGE,[z1]:t.MIRRORED_REPEAT},_e={[Dr]:t.NEAREST,[AC]:t.NEAREST_MIPMAP_NEAREST,[px]:t.NEAREST_MIPMAP_LINEAR,[Mi]:t.LINEAR,[k8]:t.LINEAR_MIPMAP_NEAREST,[jd]:t.LINEAR_MIPMAP_LINEAR},Ne={[K8]:t.NEVER,[nH]:t.ALWAYS,[Y8]:t.LESS,[Z8]:t.LEQUAL,[Q8]:t.EQUAL,[tH]:t.GEQUAL,[J8]:t.GREATER,[eH]:t.NOTEQUAL};function We($,L,re){if(re?(t.texParameteri($,t.TEXTURE_WRAP_S,me[L.wrapS]),t.texParameteri($,t.TEXTURE_WRAP_T,me[L.wrapT]),($===t.TEXTURE_3D||$===t.TEXTURE_2D_ARRAY)&&t.texParameteri($,t.TEXTURE_WRAP_R,me[L.wrapR]),t.texParameteri($,t.TEXTURE_MAG_FILTER,_e[L.magFilter]),t.texParameteri($,t.TEXTURE_MIN_FILTER,_e[L.minFilter])):(t.texParameteri($,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri($,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),($===t.TEXTURE_3D||$===t.TEXTURE_2D_ARRAY)&&t.texParameteri($,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(L.wrapS!==eo||L.wrapT!==eo)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri($,t.TEXTURE_MAG_FILTER,P(L.magFilter)),t.texParameteri($,t.TEXTURE_MIN_FILTER,P(L.minFilter)),L.minFilter!==Dr&&L.minFilter!==Mi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),L.compareFunction&&(t.texParameteri($,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri($,t.TEXTURE_COMPARE_FUNC,Ne[L.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const ye=e.get("EXT_texture_filter_anisotropic");if(L.magFilter===Dr||L.minFilter!==px&&L.minFilter!==jd||L.type===es&&e.has("OES_texture_float_linear")===!1||s===!1&&L.type===Ud&&e.has("OES_texture_half_float_linear")===!1)return;(L.anisotropy>1||r.get(L).__currentAnisotropy)&&(t.texParameterf($,ye.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(L.anisotropy,i.getMaxAnisotropy())),r.get(L).__currentAnisotropy=L.anisotropy)}}function Ue($,L){let re=!1;$.__webglInit===void 0&&($.__webglInit=!0,L.addEventListener("dispose",R));const ye=L.source;let he=g.get(ye);he===void 0&&(he={},g.set(ye,he));const xe=q(L);if(xe!==$.__cacheKey){he[xe]===void 0&&(he[xe]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,re=!0),he[xe].usedTimes++;const Ce=he[$.__cacheKey];Ce!==void 0&&(he[$.__cacheKey].usedTimes--,Ce.usedTimes===0&&D(L)),$.__cacheKey=xe,$.__webglTexture=he[xe].texture}return re}function fe($,L,re){let ye=t.TEXTURE_2D;(L.isDataArrayTexture||L.isCompressedArrayTexture)&&(ye=t.TEXTURE_2D_ARRAY),L.isData3DTexture&&(ye=t.TEXTURE_3D);const he=Ue($,L),xe=L.source;n.bindTexture(ye,$.__webglTexture,t.TEXTURE0+re);const Ce=r.get(xe);if(xe.version!==Ce.__version||he===!0){n.activeTexture(t.TEXTURE0+re);const Te=zt.getPrimaries(zt.workingColorSpace),Pe=L.colorSpace===Pi?null:zt.getPrimaries(L.colorSpace),Y=L.colorSpace===Pi||Te===Pe?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,L.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,L.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Y);const Se=w(L)&&T(L.image)===!1;let de=_(L.image,Se,!1,u);de=kt(L,de);const Qe=T(de)||s,Ge=o.convert(L.format,L.colorSpace);let qe=o.convert(L.type),Ve=A(L.internalFormat,Ge,qe,L.colorSpace,L.isVideoTexture);We(ye,L,Qe);let De;const vt=L.mipmaps,Q=s&&L.isVideoTexture!==!0,le=Ce.__version===void 0||he===!0,ue=E(L,de,Qe);if(L.isDepthTexture)Ve=t.DEPTH_COMPONENT,s?L.type===es?Ve=t.DEPTH_COMPONENT32F:L.type===Ja?Ve=t.DEPTH_COMPONENT24:L.type===Al?Ve=t.DEPTH24_STENCIL8:Ve=t.DEPTH_COMPONENT16:L.type===es&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),L.format===Ml&&Ve===t.DEPTH_COMPONENT&&L.type!==oT&&L.type!==Ja&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),L.type=Ja,qe=o.convert(L.type)),L.format===Vu&&Ve===t.DEPTH_COMPONENT&&(Ve=t.DEPTH_STENCIL,L.type!==Al&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),L.type=Al,qe=o.convert(L.type))),le&&(Q?n.texStorage2D(t.TEXTURE_2D,1,Ve,de.width,de.height):n.texImage2D(t.TEXTURE_2D,0,Ve,de.width,de.height,0,Ge,qe,null));else if(L.isDataTexture)if(vt.length>0&&Qe){Q&&le&&n.texStorage2D(t.TEXTURE_2D,ue,Ve,vt[0].width,vt[0].height);for(let ne=0,ge=vt.length;ne<ge;ne++)De=vt[ne],Q?n.texSubImage2D(t.TEXTURE_2D,ne,0,0,De.width,De.height,Ge,qe,De.data):n.texImage2D(t.TEXTURE_2D,ne,Ve,De.width,De.height,0,Ge,qe,De.data);L.generateMipmaps=!1}else Q?(le&&n.texStorage2D(t.TEXTURE_2D,ue,Ve,de.width,de.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,de.width,de.height,Ge,qe,de.data)):n.texImage2D(t.TEXTURE_2D,0,Ve,de.width,de.height,0,Ge,qe,de.data);else if(L.isCompressedTexture)if(L.isCompressedArrayTexture){Q&&le&&n.texStorage3D(t.TEXTURE_2D_ARRAY,ue,Ve,vt[0].width,vt[0].height,de.depth);for(let ne=0,ge=vt.length;ne<ge;ne++)De=vt[ne],L.format!==to?Ge!==null?Q?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,ne,0,0,0,De.width,De.height,de.depth,Ge,De.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,ne,Ve,De.width,De.height,de.depth,0,De.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Q?n.texSubImage3D(t.TEXTURE_2D_ARRAY,ne,0,0,0,De.width,De.height,de.depth,Ge,qe,De.data):n.texImage3D(t.TEXTURE_2D_ARRAY,ne,Ve,De.width,De.height,de.depth,0,Ge,qe,De.data)}else{Q&&le&&n.texStorage2D(t.TEXTURE_2D,ue,Ve,vt[0].width,vt[0].height);for(let ne=0,ge=vt.length;ne<ge;ne++)De=vt[ne],L.format!==to?Ge!==null?Q?n.compressedTexSubImage2D(t.TEXTURE_2D,ne,0,0,De.width,De.height,Ge,De.data):n.compressedTexImage2D(t.TEXTURE_2D,ne,Ve,De.width,De.height,0,De.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Q?n.texSubImage2D(t.TEXTURE_2D,ne,0,0,De.width,De.height,Ge,qe,De.data):n.texImage2D(t.TEXTURE_2D,ne,Ve,De.width,De.height,0,Ge,qe,De.data)}else if(L.isDataArrayTexture)Q?(le&&n.texStorage3D(t.TEXTURE_2D_ARRAY,ue,Ve,de.width,de.height,de.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,de.width,de.height,de.depth,Ge,qe,de.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Ve,de.width,de.height,de.depth,0,Ge,qe,de.data);else if(L.isData3DTexture)Q?(le&&n.texStorage3D(t.TEXTURE_3D,ue,Ve,de.width,de.height,de.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,de.width,de.height,de.depth,Ge,qe,de.data)):n.texImage3D(t.TEXTURE_3D,0,Ve,de.width,de.height,de.depth,0,Ge,qe,de.data);else if(L.isFramebufferTexture){if(le)if(Q)n.texStorage2D(t.TEXTURE_2D,ue,Ve,de.width,de.height);else{let ne=de.width,ge=de.height;for(let Ie=0;Ie<ue;Ie++)n.texImage2D(t.TEXTURE_2D,Ie,Ve,ne,ge,0,Ge,qe,null),ne>>=1,ge>>=1}}else if(vt.length>0&&Qe){Q&&le&&n.texStorage2D(t.TEXTURE_2D,ue,Ve,vt[0].width,vt[0].height);for(let ne=0,ge=vt.length;ne<ge;ne++)De=vt[ne],Q?n.texSubImage2D(t.TEXTURE_2D,ne,0,0,Ge,qe,De):n.texImage2D(t.TEXTURE_2D,ne,Ve,Ge,qe,De);L.generateMipmaps=!1}else Q?(le&&n.texStorage2D(t.TEXTURE_2D,ue,Ve,de.width,de.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ge,qe,de)):n.texImage2D(t.TEXTURE_2D,0,Ve,Ge,qe,de);M(L,Qe)&&b(ye),Ce.__version=xe.version,L.onUpdate&&L.onUpdate(L)}$.__version=L.version}function Re($,L,re){if(L.image.length!==6)return;const ye=Ue($,L),he=L.source;n.bindTexture(t.TEXTURE_CUBE_MAP,$.__webglTexture,t.TEXTURE0+re);const xe=r.get(he);if(he.version!==xe.__version||ye===!0){n.activeTexture(t.TEXTURE0+re);const Ce=zt.getPrimaries(zt.workingColorSpace),Te=L.colorSpace===Pi?null:zt.getPrimaries(L.colorSpace),Pe=L.colorSpace===Pi||Ce===Te?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,L.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,L.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Pe);const Y=L.isCompressedTexture||L.image[0].isCompressedTexture,Se=L.image[0]&&L.image[0].isDataTexture,de=[];for(let ne=0;ne<6;ne++)!Y&&!Se?de[ne]=_(L.image[ne],!1,!0,c):de[ne]=Se?L.image[ne].image:L.image[ne],de[ne]=kt(L,de[ne]);const Qe=de[0],Ge=T(Qe)||s,qe=o.convert(L.format,L.colorSpace),Ve=o.convert(L.type),De=A(L.internalFormat,qe,Ve,L.colorSpace),vt=s&&L.isVideoTexture!==!0,Q=xe.__version===void 0||ye===!0;let le=E(L,Qe,Ge);We(t.TEXTURE_CUBE_MAP,L,Ge);let ue;if(Y){vt&&Q&&n.texStorage2D(t.TEXTURE_CUBE_MAP,le,De,Qe.width,Qe.height);for(let ne=0;ne<6;ne++){ue=de[ne].mipmaps;for(let ge=0;ge<ue.length;ge++){const Ie=ue[ge];L.format!==to?qe!==null?vt?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge,0,0,Ie.width,Ie.height,qe,Ie.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge,De,Ie.width,Ie.height,0,Ie.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):vt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge,0,0,Ie.width,Ie.height,qe,Ve,Ie.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge,De,Ie.width,Ie.height,0,qe,Ve,Ie.data)}}}else{ue=L.mipmaps,vt&&Q&&(ue.length>0&&le++,n.texStorage2D(t.TEXTURE_CUBE_MAP,le,De,de[0].width,de[0].height));for(let ne=0;ne<6;ne++)if(Se){vt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,0,0,de[ne].width,de[ne].height,qe,Ve,de[ne].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,De,de[ne].width,de[ne].height,0,qe,Ve,de[ne].data);for(let ge=0;ge<ue.length;ge++){const rt=ue[ge].image[ne].image;vt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge+1,0,0,rt.width,rt.height,qe,Ve,rt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge+1,De,rt.width,rt.height,0,qe,Ve,rt.data)}}else{vt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,0,0,qe,Ve,de[ne]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,De,qe,Ve,de[ne]);for(let ge=0;ge<ue.length;ge++){const Ie=ue[ge];vt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge+1,0,0,qe,Ve,Ie.image[ne]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ge+1,De,qe,Ve,Ie.image[ne])}}}M(L,Ge)&&b(t.TEXTURE_CUBE_MAP),xe.__version=he.version,L.onUpdate&&L.onUpdate(L)}$.__version=L.version}function Ee($,L,re,ye,he,xe){const Ce=o.convert(re.format,re.colorSpace),Te=o.convert(re.type),Pe=A(re.internalFormat,Ce,Te,re.colorSpace);if(!r.get(L).__hasExternalTextures){const Se=Math.max(1,L.width>>xe),de=Math.max(1,L.height>>xe);he===t.TEXTURE_3D||he===t.TEXTURE_2D_ARRAY?n.texImage3D(he,xe,Pe,Se,de,L.depth,0,Ce,Te,null):n.texImage2D(he,xe,Pe,Se,de,0,Ce,Te,null)}n.bindFramebuffer(t.FRAMEBUFFER,$),ht(L)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,ye,he,r.get(re).__webglTexture,0,Ze(L)):(he===t.TEXTURE_2D||he>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&he<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,ye,he,r.get(re).__webglTexture,xe),n.bindFramebuffer(t.FRAMEBUFFER,null)}function G($,L,re){if(t.bindRenderbuffer(t.RENDERBUFFER,$),L.depthBuffer&&!L.stencilBuffer){let ye=s===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(re||ht(L)){const he=L.depthTexture;he&&he.isDepthTexture&&(he.type===es?ye=t.DEPTH_COMPONENT32F:he.type===Ja&&(ye=t.DEPTH_COMPONENT24));const xe=Ze(L);ht(L)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,xe,ye,L.width,L.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,xe,ye,L.width,L.height)}else t.renderbufferStorage(t.RENDERBUFFER,ye,L.width,L.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,$)}else if(L.depthBuffer&&L.stencilBuffer){const ye=Ze(L);re&&ht(L)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,ye,t.DEPTH24_STENCIL8,L.width,L.height):ht(L)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ye,t.DEPTH24_STENCIL8,L.width,L.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,L.width,L.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,$)}else{const ye=L.isWebGLMultipleRenderTargets===!0?L.texture:[L.texture];for(let he=0;he<ye.length;he++){const xe=ye[he],Ce=o.convert(xe.format,xe.colorSpace),Te=o.convert(xe.type),Pe=A(xe.internalFormat,Ce,Te,xe.colorSpace),Y=Ze(L);re&&ht(L)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Y,Pe,L.width,L.height):ht(L)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Y,Pe,L.width,L.height):t.renderbufferStorage(t.RENDERBUFFER,Pe,L.width,L.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function lt($,L){if(L&&L.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,$),!(L.depthTexture&&L.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(L.depthTexture).__webglTexture||L.depthTexture.image.width!==L.width||L.depthTexture.image.height!==L.height)&&(L.depthTexture.image.width=L.width,L.depthTexture.image.height=L.height,L.depthTexture.needsUpdate=!0),K(L.depthTexture,0);const ye=r.get(L.depthTexture).__webglTexture,he=Ze(L);if(L.depthTexture.format===Ml)ht(L)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ye,0,he):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ye,0);else if(L.depthTexture.format===Vu)ht(L)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ye,0,he):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ye,0);else throw new Error("Unknown depthTexture format")}function be($){const L=r.get($),re=$.isWebGLCubeRenderTarget===!0;if($.depthTexture&&!L.__autoAllocateDepthBuffer){if(re)throw new Error("target.depthTexture not supported in Cube render targets");lt(L.__webglFramebuffer,$)}else if(re){L.__webglDepthbuffer=[];for(let ye=0;ye<6;ye++)n.bindFramebuffer(t.FRAMEBUFFER,L.__webglFramebuffer[ye]),L.__webglDepthbuffer[ye]=t.createRenderbuffer(),G(L.__webglDepthbuffer[ye],$,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,L.__webglFramebuffer),L.__webglDepthbuffer=t.createRenderbuffer(),G(L.__webglDepthbuffer,$,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function Le($,L,re){const ye=r.get($);L!==void 0&&Ee(ye.__webglFramebuffer,$,$.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),re!==void 0&&be($)}function ke($){const L=$.texture,re=r.get($),ye=r.get(L);$.addEventListener("dispose",N),$.isWebGLMultipleRenderTargets!==!0&&(ye.__webglTexture===void 0&&(ye.__webglTexture=t.createTexture()),ye.__version=L.version,a.memory.textures++);const he=$.isWebGLCubeRenderTarget===!0,xe=$.isWebGLMultipleRenderTargets===!0,Ce=T($)||s;if(he){re.__webglFramebuffer=[];for(let Te=0;Te<6;Te++)if(s&&L.mipmaps&&L.mipmaps.length>0){re.__webglFramebuffer[Te]=[];for(let Pe=0;Pe<L.mipmaps.length;Pe++)re.__webglFramebuffer[Te][Pe]=t.createFramebuffer()}else re.__webglFramebuffer[Te]=t.createFramebuffer()}else{if(s&&L.mipmaps&&L.mipmaps.length>0){re.__webglFramebuffer=[];for(let Te=0;Te<L.mipmaps.length;Te++)re.__webglFramebuffer[Te]=t.createFramebuffer()}else re.__webglFramebuffer=t.createFramebuffer();if(xe)if(i.drawBuffers){const Te=$.texture;for(let Pe=0,Y=Te.length;Pe<Y;Pe++){const Se=r.get(Te[Pe]);Se.__webglTexture===void 0&&(Se.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&$.samples>0&&ht($)===!1){const Te=xe?L:[L];re.__webglMultisampledFramebuffer=t.createFramebuffer(),re.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,re.__webglMultisampledFramebuffer);for(let Pe=0;Pe<Te.length;Pe++){const Y=Te[Pe];re.__webglColorRenderbuffer[Pe]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,re.__webglColorRenderbuffer[Pe]);const Se=o.convert(Y.format,Y.colorSpace),de=o.convert(Y.type),Qe=A(Y.internalFormat,Se,de,Y.colorSpace,$.isXRRenderTarget===!0),Ge=Ze($);t.renderbufferStorageMultisample(t.RENDERBUFFER,Ge,Qe,$.width,$.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Pe,t.RENDERBUFFER,re.__webglColorRenderbuffer[Pe])}t.bindRenderbuffer(t.RENDERBUFFER,null),$.depthBuffer&&(re.__webglDepthRenderbuffer=t.createRenderbuffer(),G(re.__webglDepthRenderbuffer,$,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(he){n.bindTexture(t.TEXTURE_CUBE_MAP,ye.__webglTexture),We(t.TEXTURE_CUBE_MAP,L,Ce);for(let Te=0;Te<6;Te++)if(s&&L.mipmaps&&L.mipmaps.length>0)for(let Pe=0;Pe<L.mipmaps.length;Pe++)Ee(re.__webglFramebuffer[Te][Pe],$,L,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Pe);else Ee(re.__webglFramebuffer[Te],$,L,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0);M(L,Ce)&&b(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(xe){const Te=$.texture;for(let Pe=0,Y=Te.length;Pe<Y;Pe++){const Se=Te[Pe],de=r.get(Se);n.bindTexture(t.TEXTURE_2D,de.__webglTexture),We(t.TEXTURE_2D,Se,Ce),Ee(re.__webglFramebuffer,$,Se,t.COLOR_ATTACHMENT0+Pe,t.TEXTURE_2D,0),M(Se,Ce)&&b(t.TEXTURE_2D)}n.unbindTexture()}else{let Te=t.TEXTURE_2D;if(($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(s?Te=$.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Te,ye.__webglTexture),We(Te,L,Ce),s&&L.mipmaps&&L.mipmaps.length>0)for(let Pe=0;Pe<L.mipmaps.length;Pe++)Ee(re.__webglFramebuffer[Pe],$,L,t.COLOR_ATTACHMENT0,Te,Pe);else Ee(re.__webglFramebuffer,$,L,t.COLOR_ATTACHMENT0,Te,0);M(L,Ce)&&b(Te),n.unbindTexture()}$.depthBuffer&&be($)}function mt($){const L=T($)||s,re=$.isWebGLMultipleRenderTargets===!0?$.texture:[$.texture];for(let ye=0,he=re.length;ye<he;ye++){const xe=re[ye];if(M(xe,L)){const Ce=$.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Te=r.get(xe).__webglTexture;n.bindTexture(Ce,Te),b(Ce),n.unbindTexture()}}}function Ye($){if(s&&$.samples>0&&ht($)===!1){const L=$.isWebGLMultipleRenderTargets?$.texture:[$.texture],re=$.width,ye=$.height;let he=t.COLOR_BUFFER_BIT;const xe=[],Ce=$.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Te=r.get($),Pe=$.isWebGLMultipleRenderTargets===!0;if(Pe)for(let Y=0;Y<L.length;Y++)n.bindFramebuffer(t.FRAMEBUFFER,Te.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Y,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Te.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Y,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Te.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Te.__webglFramebuffer);for(let Y=0;Y<L.length;Y++){xe.push(t.COLOR_ATTACHMENT0+Y),$.depthBuffer&&xe.push(Ce);const Se=Te.__ignoreDepthValues!==void 0?Te.__ignoreDepthValues:!1;if(Se===!1&&($.depthBuffer&&(he|=t.DEPTH_BUFFER_BIT),$.stencilBuffer&&(he|=t.STENCIL_BUFFER_BIT)),Pe&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Te.__webglColorRenderbuffer[Y]),Se===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[Ce]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Ce])),Pe){const de=r.get(L[Y]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,de,0)}t.blitFramebuffer(0,0,re,ye,0,0,re,ye,he,t.NEAREST),d&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,xe)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Pe)for(let Y=0;Y<L.length;Y++){n.bindFramebuffer(t.FRAMEBUFFER,Te.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Y,t.RENDERBUFFER,Te.__webglColorRenderbuffer[Y]);const Se=r.get(L[Y]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Te.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Y,t.TEXTURE_2D,Se,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Te.__webglMultisampledFramebuffer)}}function Ze($){return Math.min(f,$.samples)}function ht($){const L=r.get($);return s&&$.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&L.__useRenderToTexture!==!1}function Pt($){const L=a.render.frame;y.get($)!==L&&(y.set($,L),$.update())}function kt($,L){const re=$.colorSpace,ye=$.format,he=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||$.format===H1||re!==xa&&re!==Pi&&(zt.getTransfer(re)===tn?s===!1?e.has("EXT_sRGB")===!0&&ye===to?($.format=H1,$.minFilter=Mi,$.generateMipmaps=!1):L=zj.sRGBToLinear(L):(ye!==to||he!==ps)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",re)),L}this.allocateTextureUnit=F,this.resetTextureUnits=B,this.setTexture2D=K,this.setTexture2DArray=z,this.setTexture3D=X,this.setTextureCube=ee,this.rebindTextures=Le,this.setupRenderTarget=ke,this.updateRenderTargetMipmap=mt,this.updateMultisampleRenderTarget=Ye,this.setupDepthRenderbuffer=be,this.setupFrameBufferTexture=Ee,this.useMultisampledRTT=ht}function dX(t,e,n){const r=n.isWebGL2;function i(o,a=Pi){let s;const l=zt.getTransfer(a);if(o===ps)return t.UNSIGNED_BYTE;if(o===Dj)return t.UNSIGNED_SHORT_4_4_4_4;if(o===Lj)return t.UNSIGNED_SHORT_5_5_5_1;if(o===j8)return t.BYTE;if(o===U8)return t.SHORT;if(o===oT)return t.UNSIGNED_SHORT;if(o===Nj)return t.INT;if(o===Ja)return t.UNSIGNED_INT;if(o===es)return t.FLOAT;if(o===Ud)return r?t.HALF_FLOAT:(s=e.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(o===F8)return t.ALPHA;if(o===to)return t.RGBA;if(o===V8)return t.LUMINANCE;if(o===B8)return t.LUMINANCE_ALPHA;if(o===Ml)return t.DEPTH_COMPONENT;if(o===Vu)return t.DEPTH_STENCIL;if(o===H1)return s=e.get("EXT_sRGB"),s!==null?s.SRGB_ALPHA_EXT:null;if(o===$8)return t.RED;if(o===kj)return t.RED_INTEGER;if(o===z8)return t.RG;if(o===jj)return t.RG_INTEGER;if(o===Uj)return t.RGBA_INTEGER;if(o===mx||o===gx||o===vx||o===yx)if(l===tn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(o===mx)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===gx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===vx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===yx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(o===mx)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===gx)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===vx)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===yx)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===MC||o===PC||o===CC||o===RC)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(o===MC)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===PC)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===CC)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===RC)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===H8)return s=e.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===OC||o===IC)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(o===OC)return l===tn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(o===IC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===NC||o===DC||o===LC||o===kC||o===jC||o===UC||o===FC||o===VC||o===BC||o===$C||o===zC||o===HC||o===GC||o===WC)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(o===NC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===DC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===LC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===kC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===jC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===UC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===FC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===VC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===BC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===$C)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===zC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===HC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===GC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===WC)return l===tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===_x||o===qC||o===XC)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(o===_x)return l===tn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===qC)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===XC)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===G8||o===KC||o===YC||o===QC)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(o===_x)return s.COMPRESSED_RED_RGTC1_EXT;if(o===KC)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===YC)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===QC)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===Al?r?t.UNSIGNED_INT_24_8:(s=e.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null):t[o]!==void 0?t[o]:null}return{convert:i}}class pX extends si{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let Vh=class extends cr{constructor(){super(),this.isGroup=!0,this.type="Group"}};const mX={type:"move"};class $x{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Vh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Vh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new te),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Vh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new te),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,o=null,a=null;const s=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const v of e.hand.values()){const g=n.getJointPose(v,r),p=this._getHandJoint(c,v);g!==null&&(p.matrix.fromArray(g.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,p.jointRadius=g.radius),p.visible=g!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],h=u.position.distanceTo(f.position),d=.02,y=.005;c.inputState.pinching&&h>d+y?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=d-y&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,r),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));s!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(mX)))}return s!==null&&(s.visible=i!==null),l!==null&&(l.visible=o!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Vh;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class gX extends Qr{constructor(e,n,r,i,o,a,s,l,c,u){if(u=u!==void 0?u:Ml,u!==Ml&&u!==Vu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Ml&&(r=Ja),r===void 0&&u===Vu&&(r=Al),super(null,i,o,a,s,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=s!==void 0?s:Dr,this.minFilter=l!==void 0?l:Dr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class vX extends Ql{constructor(e,n){super();const r=this;let i=null,o=1,a=null,s="local-floor",l=1,c=null,u=null,f=null,h=null,d=null,y=null;const v=n.getContextAttributes();let g=null,p=null;const x=[],_=[],T=new si;T.layers.enable(1),T.viewport=new Zn;const w=new si;w.layers.enable(2),w.viewport=new Zn;const M=[T,w],b=new pX;b.layers.enable(1),b.layers.enable(2);let A=null,E=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(z){let X=x[z];return X===void 0&&(X=new $x,x[z]=X),X.getTargetRaySpace()},this.getControllerGrip=function(z){let X=x[z];return X===void 0&&(X=new $x,x[z]=X),X.getGripSpace()},this.getHand=function(z){let X=x[z];return X===void 0&&(X=new $x,x[z]=X),X.getHandSpace()};function P(z){const X=_.indexOf(z.inputSource);if(X===-1)return;const ee=x[X];ee!==void 0&&(ee.update(z.inputSource,z.frame,c||a),ee.dispatchEvent({type:z.type,data:z.inputSource}))}function R(){i.removeEventListener("select",P),i.removeEventListener("selectstart",P),i.removeEventListener("selectend",P),i.removeEventListener("squeeze",P),i.removeEventListener("squeezestart",P),i.removeEventListener("squeezeend",P),i.removeEventListener("end",R),i.removeEventListener("inputsourceschange",N);for(let z=0;z<x.length;z++){const X=_[z];X!==null&&(_[z]=null,x[z].disconnect(X))}A=null,E=null,e.setRenderTarget(g),d=null,h=null,f=null,i=null,p=null,K.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(z){o=z,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(z){s=z,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(z){c=z},this.getBaseLayer=function(){return h!==null?h:d},this.getBinding=function(){return f},this.getFrame=function(){return y},this.getSession=function(){return i},this.setSession=async function(z){if(i=z,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",P),i.addEventListener("selectstart",P),i.addEventListener("selectend",P),i.addEventListener("squeeze",P),i.addEventListener("squeezestart",P),i.addEventListener("squeezeend",P),i.addEventListener("end",R),i.addEventListener("inputsourceschange",N),v.xrCompatible!==!0&&await n.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const X={antialias:i.renderState.layers===void 0?v.antialias:!0,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(i,n,X),i.updateRenderState({baseLayer:d}),p=new Fl(d.framebufferWidth,d.framebufferHeight,{format:to,type:ps,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let X=null,ee=null,me=null;v.depth&&(me=v.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,X=v.stencil?Vu:Ml,ee=v.stencil?Al:Ja);const _e={colorFormat:n.RGBA8,depthFormat:me,scaleFactor:o};f=new XRWebGLBinding(i,n),h=f.createProjectionLayer(_e),i.updateRenderState({layers:[h]}),p=new Fl(h.textureWidth,h.textureHeight,{format:to,type:ps,depthTexture:new gX(h.textureWidth,h.textureHeight,ee,void 0,void 0,void 0,void 0,void 0,void 0,X),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0});const Ne=e.properties.get(p);Ne.__ignoreDepthValues=h.ignoreDepthValues}p.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await i.requestReferenceSpace(s),K.setContext(i),K.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function N(z){for(let X=0;X<z.removed.length;X++){const ee=z.removed[X],me=_.indexOf(ee);me>=0&&(_[me]=null,x[me].disconnect(ee))}for(let X=0;X<z.added.length;X++){const ee=z.added[X];let me=_.indexOf(ee);if(me===-1){for(let Ne=0;Ne<x.length;Ne++)if(Ne>=_.length){_.push(ee),me=Ne;break}else if(_[Ne]===null){_[Ne]=ee,me=Ne;break}if(me===-1)break}const _e=x[me];_e&&_e.connect(ee)}}const O=new te,D=new te;function k(z,X,ee){O.setFromMatrixPosition(X.matrixWorld),D.setFromMatrixPosition(ee.matrixWorld);const me=O.distanceTo(D),_e=X.projectionMatrix.elements,Ne=ee.projectionMatrix.elements,We=_e[14]/(_e[10]-1),Ue=_e[14]/(_e[10]+1),fe=(_e[9]+1)/_e[5],Re=(_e[9]-1)/_e[5],Ee=(_e[8]-1)/_e[0],G=(Ne[8]+1)/Ne[0],lt=We*Ee,be=We*G,Le=me/(-Ee+G),ke=Le*-Ee;X.matrixWorld.decompose(z.position,z.quaternion,z.scale),z.translateX(ke),z.translateZ(Le),z.matrixWorld.compose(z.position,z.quaternion,z.scale),z.matrixWorldInverse.copy(z.matrixWorld).invert();const mt=We+Le,Ye=Ue+Le,Ze=lt-ke,ht=be+(me-ke),Pt=fe*Ue/Ye*mt,kt=Re*Ue/Ye*mt;z.projectionMatrix.makePerspective(Ze,ht,Pt,kt,mt,Ye),z.projectionMatrixInverse.copy(z.projectionMatrix).invert()}function H(z,X){X===null?z.matrixWorld.copy(z.matrix):z.matrixWorld.multiplyMatrices(X.matrixWorld,z.matrix),z.matrixWorldInverse.copy(z.matrixWorld).invert()}this.updateCamera=function(z){if(i===null)return;b.near=w.near=T.near=z.near,b.far=w.far=T.far=z.far,(A!==b.near||E!==b.far)&&(i.updateRenderState({depthNear:b.near,depthFar:b.far}),A=b.near,E=b.far);const X=z.parent,ee=b.cameras;H(b,X);for(let me=0;me<ee.length;me++)H(ee[me],X);ee.length===2?k(b,T,w):b.projectionMatrix.copy(T.projectionMatrix),B(z,b,X)};function B(z,X,ee){ee===null?z.matrix.copy(X.matrixWorld):(z.matrix.copy(ee.matrixWorld),z.matrix.invert(),z.matrix.multiply(X.matrixWorld)),z.matrix.decompose(z.position,z.quaternion,z.scale),z.updateMatrixWorld(!0),z.projectionMatrix.copy(X.projectionMatrix),z.projectionMatrixInverse.copy(X.projectionMatrixInverse),z.isPerspectiveCamera&&(z.fov=Fd*2*Math.atan(1/z.projectionMatrix.elements[5]),z.zoom=1)}this.getCamera=function(){return b},this.getFoveation=function(){if(!(h===null&&d===null))return l},this.setFoveation=function(z){l=z,h!==null&&(h.fixedFoveation=z),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=z)};let F=null;function q(z,X){if(u=X.getViewerPose(c||a),y=X,u!==null){const ee=u.views;d!==null&&(e.setRenderTargetFramebuffer(p,d.framebuffer),e.setRenderTarget(p));let me=!1;ee.length!==b.cameras.length&&(b.cameras.length=0,me=!0);for(let _e=0;_e<ee.length;_e++){const Ne=ee[_e];let We=null;if(d!==null)We=d.getViewport(Ne);else{const fe=f.getViewSubImage(h,Ne);We=fe.viewport,_e===0&&(e.setRenderTargetTextures(p,fe.colorTexture,h.ignoreDepthValues?void 0:fe.depthStencilTexture),e.setRenderTarget(p))}let Ue=M[_e];Ue===void 0&&(Ue=new si,Ue.layers.enable(_e),Ue.viewport=new Zn,M[_e]=Ue),Ue.matrix.fromArray(Ne.transform.matrix),Ue.matrix.decompose(Ue.position,Ue.quaternion,Ue.scale),Ue.projectionMatrix.fromArray(Ne.projectionMatrix),Ue.projectionMatrixInverse.copy(Ue.projectionMatrix).invert(),Ue.viewport.set(We.x,We.y,We.width,We.height),_e===0&&(b.matrix.copy(Ue.matrix),b.matrix.decompose(b.position,b.quaternion,b.scale)),me===!0&&b.cameras.push(Ue)}}for(let ee=0;ee<x.length;ee++){const me=_[ee],_e=x[ee];me!==null&&_e!==void 0&&_e.update(me,X,c||a)}F&&F(z,X),X.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:X}),y=null}const K=new Zj;K.setAnimationLoop(q),this.setAnimationLoop=function(z){F=z},this.dispose=function(){}}}function yX(t,e){function n(g,p){g.matrixAutoUpdate===!0&&g.updateMatrix(),p.value.copy(g.matrix)}function r(g,p){p.color.getRGB(g.fogColor.value,Kj(t)),p.isFog?(g.fogNear.value=p.near,g.fogFar.value=p.far):p.isFogExp2&&(g.fogDensity.value=p.density)}function i(g,p,x,_,T){p.isMeshBasicMaterial||p.isMeshLambertMaterial?o(g,p):p.isMeshToonMaterial?(o(g,p),f(g,p)):p.isMeshPhongMaterial?(o(g,p),u(g,p)):p.isMeshStandardMaterial?(o(g,p),h(g,p),p.isMeshPhysicalMaterial&&d(g,p,T)):p.isMeshMatcapMaterial?(o(g,p),y(g,p)):p.isMeshDepthMaterial?o(g,p):p.isMeshDistanceMaterial?(o(g,p),v(g,p)):p.isMeshNormalMaterial?o(g,p):p.isLineBasicMaterial?(a(g,p),p.isLineDashedMaterial&&s(g,p)):p.isPointsMaterial?l(g,p,x,_):p.isSpriteMaterial?c(g,p):p.isShadowMaterial?(g.color.value.copy(p.color),g.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function o(g,p){g.opacity.value=p.opacity,p.color&&g.diffuse.value.copy(p.color),p.emissive&&g.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(g.map.value=p.map,n(p.map,g.mapTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,n(p.alphaMap,g.alphaMapTransform)),p.bumpMap&&(g.bumpMap.value=p.bumpMap,n(p.bumpMap,g.bumpMapTransform),g.bumpScale.value=p.bumpScale,p.side===Vr&&(g.bumpScale.value*=-1)),p.normalMap&&(g.normalMap.value=p.normalMap,n(p.normalMap,g.normalMapTransform),g.normalScale.value.copy(p.normalScale),p.side===Vr&&g.normalScale.value.negate()),p.displacementMap&&(g.displacementMap.value=p.displacementMap,n(p.displacementMap,g.displacementMapTransform),g.displacementScale.value=p.displacementScale,g.displacementBias.value=p.displacementBias),p.emissiveMap&&(g.emissiveMap.value=p.emissiveMap,n(p.emissiveMap,g.emissiveMapTransform)),p.specularMap&&(g.specularMap.value=p.specularMap,n(p.specularMap,g.specularMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest);const x=e.get(p).envMap;if(x&&(g.envMap.value=x,g.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=p.reflectivity,g.ior.value=p.ior,g.refractionRatio.value=p.refractionRatio),p.lightMap){g.lightMap.value=p.lightMap;const _=t._useLegacyLights===!0?Math.PI:1;g.lightMapIntensity.value=p.lightMapIntensity*_,n(p.lightMap,g.lightMapTransform)}p.aoMap&&(g.aoMap.value=p.aoMap,g.aoMapIntensity.value=p.aoMapIntensity,n(p.aoMap,g.aoMapTransform))}function a(g,p){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,p.map&&(g.map.value=p.map,n(p.map,g.mapTransform))}function s(g,p){g.dashSize.value=p.dashSize,g.totalSize.value=p.dashSize+p.gapSize,g.scale.value=p.scale}function l(g,p,x,_){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,g.size.value=p.size*x,g.scale.value=_*.5,p.map&&(g.map.value=p.map,n(p.map,g.uvTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,n(p.alphaMap,g.alphaMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest)}function c(g,p){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,g.rotation.value=p.rotation,p.map&&(g.map.value=p.map,n(p.map,g.mapTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,n(p.alphaMap,g.alphaMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest)}function u(g,p){g.specular.value.copy(p.specular),g.shininess.value=Math.max(p.shininess,1e-4)}function f(g,p){p.gradientMap&&(g.gradientMap.value=p.gradientMap)}function h(g,p){g.metalness.value=p.metalness,p.metalnessMap&&(g.metalnessMap.value=p.metalnessMap,n(p.metalnessMap,g.metalnessMapTransform)),g.roughness.value=p.roughness,p.roughnessMap&&(g.roughnessMap.value=p.roughnessMap,n(p.roughnessMap,g.roughnessMapTransform)),e.get(p).envMap&&(g.envMapIntensity.value=p.envMapIntensity)}function d(g,p,x){g.ior.value=p.ior,p.sheen>0&&(g.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),g.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(g.sheenColorMap.value=p.sheenColorMap,n(p.sheenColorMap,g.sheenColorMapTransform)),p.sheenRoughnessMap&&(g.sheenRoughnessMap.value=p.sheenRoughnessMap,n(p.sheenRoughnessMap,g.sheenRoughnessMapTransform))),p.clearcoat>0&&(g.clearcoat.value=p.clearcoat,g.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(g.clearcoatMap.value=p.clearcoatMap,n(p.clearcoatMap,g.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,n(p.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(g.clearcoatNormalMap.value=p.clearcoatNormalMap,n(p.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===Vr&&g.clearcoatNormalScale.value.negate())),p.iridescence>0&&(g.iridescence.value=p.iridescence,g.iridescenceIOR.value=p.iridescenceIOR,g.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(g.iridescenceMap.value=p.iridescenceMap,n(p.iridescenceMap,g.iridescenceMapTransform)),p.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=p.iridescenceThicknessMap,n(p.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),p.transmission>0&&(g.transmission.value=p.transmission,g.transmissionSamplerMap.value=x.texture,g.transmissionSamplerSize.value.set(x.width,x.height),p.transmissionMap&&(g.transmissionMap.value=p.transmissionMap,n(p.transmissionMap,g.transmissionMapTransform)),g.thickness.value=p.thickness,p.thicknessMap&&(g.thicknessMap.value=p.thicknessMap,n(p.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=p.attenuationDistance,g.attenuationColor.value.copy(p.attenuationColor)),p.anisotropy>0&&(g.anisotropyVector.value.set(p.anisotropy*Math.cos(p.anisotropyRotation),p.anisotropy*Math.sin(p.anisotropyRotation)),p.anisotropyMap&&(g.anisotropyMap.value=p.anisotropyMap,n(p.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=p.specularIntensity,g.specularColor.value.copy(p.specularColor),p.specularColorMap&&(g.specularColorMap.value=p.specularColorMap,n(p.specularColorMap,g.specularColorMapTransform)),p.specularIntensityMap&&(g.specularIntensityMap.value=p.specularIntensityMap,n(p.specularIntensityMap,g.specularIntensityMapTransform))}function y(g,p){p.matcap&&(g.matcap.value=p.matcap)}function v(g,p){const x=e.get(p).light;g.referencePosition.value.setFromMatrixPosition(x.matrixWorld),g.nearDistance.value=x.shadow.camera.near,g.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function _X(t,e,n,r){let i={},o={},a=[];const s=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(x,_){const T=_.program;r.uniformBlockBinding(x,T)}function c(x,_){let T=i[x.id];T===void 0&&(y(x),T=u(x),i[x.id]=T,x.addEventListener("dispose",g));const w=_.program;r.updateUBOMapping(x,w);const M=e.render.frame;o[x.id]!==M&&(h(x),o[x.id]=M)}function u(x){const _=f();x.__bindingPointIndex=_;const T=t.createBuffer(),w=x.__size,M=x.usage;return t.bindBuffer(t.UNIFORM_BUFFER,T),t.bufferData(t.UNIFORM_BUFFER,w,M),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,_,T),T}function f(){for(let x=0;x<s;x++)if(a.indexOf(x)===-1)return a.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(x){const _=i[x.id],T=x.uniforms,w=x.__cache;t.bindBuffer(t.UNIFORM_BUFFER,_);for(let M=0,b=T.length;M<b;M++){const A=T[M];if(d(A,M,w)===!0){const E=A.__offset,P=Array.isArray(A.value)?A.value:[A.value];let R=0;for(let N=0;N<P.length;N++){const O=P[N],D=v(O);typeof O=="number"?(A.__data[0]=O,t.bufferSubData(t.UNIFORM_BUFFER,E+R,A.__data)):O.isMatrix3?(A.__data[0]=O.elements[0],A.__data[1]=O.elements[1],A.__data[2]=O.elements[2],A.__data[3]=O.elements[0],A.__data[4]=O.elements[3],A.__data[5]=O.elements[4],A.__data[6]=O.elements[5],A.__data[7]=O.elements[0],A.__data[8]=O.elements[6],A.__data[9]=O.elements[7],A.__data[10]=O.elements[8],A.__data[11]=O.elements[0]):(O.toArray(A.__data,R),R+=D.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,E,A.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function d(x,_,T){const w=x.value;if(T[_]===void 0){if(typeof w=="number")T[_]=w;else{const M=Array.isArray(w)?w:[w],b=[];for(let A=0;A<M.length;A++)b.push(M[A].clone());T[_]=b}return!0}else if(typeof w=="number"){if(T[_]!==w)return T[_]=w,!0}else{const M=Array.isArray(T[_])?T[_]:[T[_]],b=Array.isArray(w)?w:[w];for(let A=0;A<M.length;A++){const E=M[A];if(E.equals(b[A])===!1)return E.copy(b[A]),!0}}return!1}function y(x){const _=x.uniforms;let T=0;const w=16;let M=0;for(let b=0,A=_.length;b<A;b++){const E=_[b],P={boundary:0,storage:0},R=Array.isArray(E.value)?E.value:[E.value];for(let N=0,O=R.length;N<O;N++){const D=R[N],k=v(D);P.boundary+=k.boundary,P.storage+=k.storage}if(E.__data=new Float32Array(P.storage/Float32Array.BYTES_PER_ELEMENT),E.__offset=T,b>0){M=T%w;const N=w-M;M!==0&&N-P.boundary<0&&(T+=w-M,E.__offset=T)}T+=P.storage}return M=T%w,M>0&&(T+=w-M),x.__size=T,x.__cache={},this}function v(x){const _={boundary:0,storage:0};return typeof x=="number"?(_.boundary=4,_.storage=4):x.isVector2?(_.boundary=8,_.storage=8):x.isVector3||x.isColor?(_.boundary=16,_.storage=12):x.isVector4?(_.boundary=16,_.storage=16):x.isMatrix3?(_.boundary=48,_.storage=48):x.isMatrix4?(_.boundary=64,_.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),_}function g(x){const _=x.target;_.removeEventListener("dispose",g);const T=a.indexOf(_.__bindingPointIndex);a.splice(T,1),t.deleteBuffer(i[_.id]),delete i[_.id],delete o[_.id]}function p(){for(const x in i)t.deleteBuffer(i[x]);a=[],i={},o={}}return{bind:l,update:c,dispose:p}}class dT{constructor(e={}){const{canvas:n=vH(),context:r=null,depth:i=!0,stencil:o=!0,alpha:a=!1,antialias:s=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let h;r!==null?h=r.getContextAttributes().alpha:h=a;const d=new Uint32Array(4),y=new Int32Array(4);let v=null,g=null;const p=[],x=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=jn,this._useLegacyLights=!1,this.toneMapping=ds,this.toneMappingExposure=1;const _=this;let T=!1,w=0,M=0,b=null,A=-1,E=null;const P=new Zn,R=new Zn;let N=null;const O=new Ot(0);let D=0,k=n.width,H=n.height,B=1,F=null,q=null;const K=new Zn(0,0,k,H),z=new Zn(0,0,k,H);let X=!1;const ee=new uT;let me=!1,_e=!1,Ne=null;const We=new In,Ue=new gt,fe=new te,Re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ee(){return b===null?B:1}let G=r;function lt(U,J){for(let ie=0;ie<U.length;ie++){const oe=U[ie],ae=n.getContext(oe,J);if(ae!==null)return ae}return null}try{const U={alpha:!0,depth:i,stencil:o,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${rT}`),n.addEventListener("webglcontextlost",vt,!1),n.addEventListener("webglcontextrestored",Q,!1),n.addEventListener("webglcontextcreationerror",le,!1),G===null){const J=["webgl2","webgl","experimental-webgl"];if(_.isWebGL1Renderer===!0&&J.shift(),G=lt(J,U),G===null)throw lt(J)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&G instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),G.getShaderPrecisionFormat===void 0&&(G.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let be,Le,ke,mt,Ye,Ze,ht,Pt,kt,$,L,re,ye,he,xe,Ce,Te,Pe,Y,Se,de,Qe,Ge,qe;function Ve(){be=new C7(G),Le=new S7(G,be,e),be.init(Le),Qe=new dX(G,be,Le),ke=new fX(G,be,Le),mt=new I7(G),Ye=new Qq,Ze=new hX(G,be,ke,Ye,Le,Qe,mt),ht=new T7(_),Pt=new P7(_),kt=new $H(G,Le),Ge=new b7(G,be,kt,Le),$=new R7(G,kt,mt,Ge),L=new k7(G,$,kt,mt),Y=new L7(G,Le,Ze),Ce=new E7(Ye),re=new Yq(_,ht,Pt,be,Le,Ge,Ce),ye=new yX(_,Ye),he=new Jq,xe=new oX(be,Le),Pe=new x7(_,ht,Pt,ke,L,h,l),Te=new uX(_,L,Le),qe=new _X(G,mt,Le,ke),Se=new w7(G,be,mt,Le),de=new O7(G,be,mt,Le),mt.programs=re.programs,_.capabilities=Le,_.extensions=be,_.properties=Ye,_.renderLists=he,_.shadowMap=Te,_.state=ke,_.info=mt}Ve();const De=new vX(_,G);this.xr=De,this.getContext=function(){return G},this.getContextAttributes=function(){return G.getContextAttributes()},this.forceContextLoss=function(){const U=be.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=be.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return B},this.setPixelRatio=function(U){U!==void 0&&(B=U,this.setSize(k,H,!1))},this.getSize=function(U){return U.set(k,H)},this.setSize=function(U,J,ie=!0){if(De.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}k=U,H=J,n.width=Math.floor(U*B),n.height=Math.floor(J*B),ie===!0&&(n.style.width=U+"px",n.style.height=J+"px"),this.setViewport(0,0,U,J)},this.getDrawingBufferSize=function(U){return U.set(k*B,H*B).floor()},this.setDrawingBufferSize=function(U,J,ie){k=U,H=J,B=ie,n.width=Math.floor(U*ie),n.height=Math.floor(J*ie),this.setViewport(0,0,U,J)},this.getCurrentViewport=function(U){return U.copy(P)},this.getViewport=function(U){return U.copy(K)},this.setViewport=function(U,J,ie,oe){U.isVector4?K.set(U.x,U.y,U.z,U.w):K.set(U,J,ie,oe),ke.viewport(P.copy(K).multiplyScalar(B).floor())},this.getScissor=function(U){return U.copy(z)},this.setScissor=function(U,J,ie,oe){U.isVector4?z.set(U.x,U.y,U.z,U.w):z.set(U,J,ie,oe),ke.scissor(R.copy(z).multiplyScalar(B).floor())},this.getScissorTest=function(){return X},this.setScissorTest=function(U){ke.setScissorTest(X=U)},this.setOpaqueSort=function(U){F=U},this.setTransparentSort=function(U){q=U},this.getClearColor=function(U){return U.copy(Pe.getClearColor())},this.setClearColor=function(){Pe.setClearColor.apply(Pe,arguments)},this.getClearAlpha=function(){return Pe.getClearAlpha()},this.setClearAlpha=function(){Pe.setClearAlpha.apply(Pe,arguments)},this.clear=function(U=!0,J=!0,ie=!0){let oe=0;if(U){let ae=!1;if(b!==null){const Fe=b.texture.format;ae=Fe===Uj||Fe===jj||Fe===kj}if(ae){const Fe=b.texture.type,Xe=Fe===ps||Fe===Ja||Fe===oT||Fe===Al||Fe===Dj||Fe===Lj,et=Pe.getClearColor(),tt=Pe.getClearAlpha(),yt=et.r,ct=et.g,at=et.b;Xe?(d[0]=yt,d[1]=ct,d[2]=at,d[3]=tt,G.clearBufferuiv(G.COLOR,0,d)):(y[0]=yt,y[1]=ct,y[2]=at,y[3]=tt,G.clearBufferiv(G.COLOR,0,y))}else oe|=G.COLOR_BUFFER_BIT}J&&(oe|=G.DEPTH_BUFFER_BIT),ie&&(oe|=G.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),G.clear(oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",vt,!1),n.removeEventListener("webglcontextrestored",Q,!1),n.removeEventListener("webglcontextcreationerror",le,!1),he.dispose(),xe.dispose(),Ye.dispose(),ht.dispose(),Pt.dispose(),L.dispose(),Ge.dispose(),qe.dispose(),re.dispose(),De.dispose(),De.removeEventListener("sessionstart",En),De.removeEventListener("sessionend",dt),Ne&&(Ne.dispose(),Ne=null),Tn.stop()};function vt(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function Q(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;const U=mt.autoReset,J=Te.enabled,ie=Te.autoUpdate,oe=Te.needsUpdate,ae=Te.type;Ve(),mt.autoReset=U,Te.enabled=J,Te.autoUpdate=ie,Te.needsUpdate=oe,Te.type=ae}function le(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function ue(U){const J=U.target;J.removeEventListener("dispose",ue),ne(J)}function ne(U){ge(U),Ye.remove(U)}function ge(U){const J=Ye.get(U).programs;J!==void 0&&(J.forEach(function(ie){re.releaseProgram(ie)}),U.isShaderMaterial&&re.releaseShaderCache(U))}this.renderBufferDirect=function(U,J,ie,oe,ae,Fe){J===null&&(J=Re);const Xe=ae.isMesh&&ae.matrixWorld.determinant()<0,et=lm(U,J,ie,oe,ae);ke.setMaterial(oe,Xe);let tt=ie.index,yt=1;if(oe.wireframe===!0){if(tt=$.getWireframeAttribute(ie),tt===void 0)return;yt=2}const ct=ie.drawRange,at=ie.attributes.position;let Vt=ct.start*yt,tr=(ct.start+ct.count)*yt;Fe!==null&&(Vt=Math.max(Vt,Fe.start*yt),tr=Math.min(tr,(Fe.start+Fe.count)*yt)),tt!==null?(Vt=Math.max(Vt,0),tr=Math.min(tr,tt.count)):at!=null&&(Vt=Math.max(Vt,0),tr=Math.min(tr,at.count));const An=tr-Vt;if(An<0||An===1/0)return;Ge.setup(ae,oe,et,ie,tt);let yi,Zt=Se;if(tt!==null&&(yi=kt.get(tt),Zt=de,Zt.setIndex(yi)),ae.isMesh)oe.wireframe===!0?(ke.setLineWidth(oe.wireframeLinewidth*Ee()),Zt.setMode(G.LINES)):Zt.setMode(G.TRIANGLES);else if(ae.isLine){let bt=oe.linewidth;bt===void 0&&(bt=1),ke.setLineWidth(bt*Ee()),ae.isLineSegments?Zt.setMode(G.LINES):ae.isLineLoop?Zt.setMode(G.LINE_LOOP):Zt.setMode(G.LINE_STRIP)}else ae.isPoints?Zt.setMode(G.POINTS):ae.isSprite&&Zt.setMode(G.TRIANGLES);if(ae.isInstancedMesh)Zt.renderInstances(Vt,An,ae.count);else if(ie.isInstancedBufferGeometry){const bt=ie._maxInstanceCount!==void 0?ie._maxInstanceCount:1/0,$s=Math.min(ie.instanceCount,bt);Zt.renderInstances(Vt,An,$s)}else Zt.render(Vt,An)};function Ie(U,J,ie){U.transparent===!0&&U.side===Jo&&U.forceSinglePass===!1?(U.side=Vr,U.needsUpdate=!0,cc(U,J,ie),U.side=ws,U.needsUpdate=!0,cc(U,J,ie),U.side=Jo):cc(U,J,ie)}this.compile=function(U,J,ie=null){ie===null&&(ie=U),g=xe.get(ie),g.init(),x.push(g),ie.traverseVisible(function(ae){ae.isLight&&ae.layers.test(J.layers)&&(g.pushLight(ae),ae.castShadow&&g.pushShadow(ae))}),U!==ie&&U.traverseVisible(function(ae){ae.isLight&&ae.layers.test(J.layers)&&(g.pushLight(ae),ae.castShadow&&g.pushShadow(ae))}),g.setupLights(_._useLegacyLights);const oe=new Set;return U.traverse(function(ae){const Fe=ae.material;if(Fe)if(Array.isArray(Fe))for(let Xe=0;Xe<Fe.length;Xe++){const et=Fe[Xe];Ie(et,ie,ae),oe.add(et)}else Ie(Fe,ie,ae),oe.add(Fe)}),x.pop(),g=null,oe},this.compileAsync=function(U,J,ie=null){const oe=this.compile(U,J,ie);return new Promise(ae=>{function Fe(){if(oe.forEach(function(Xe){Ye.get(Xe).currentProgram.isReady()&&oe.delete(Xe)}),oe.size===0){ae(U);return}setTimeout(Fe,10)}be.get("KHR_parallel_shader_compile")!==null?Fe():setTimeout(Fe,10)})};let rt=null;function It(U){rt&&rt(U)}function En(){Tn.stop()}function dt(){Tn.start()}const Tn=new Zj;Tn.setAnimationLoop(It),typeof self<"u"&&Tn.setContext(self),this.setAnimationLoop=function(U){rt=U,De.setAnimationLoop(U),U===null?Tn.stop():Tn.start()},De.addEventListener("sessionstart",En),De.addEventListener("sessionend",dt),this.render=function(U,J){if(J!==void 0&&J.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(T===!0)return;U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),J.parent===null&&J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),De.enabled===!0&&De.isPresenting===!0&&(De.cameraAutoUpdate===!0&&De.updateCamera(J),J=De.getCamera()),U.isScene===!0&&U.onBeforeRender(_,U,J,b),g=xe.get(U,x.length),g.init(),x.push(g),We.multiplyMatrices(J.projectionMatrix,J.matrixWorldInverse),ee.setFromProjectionMatrix(We),_e=this.localClippingEnabled,me=Ce.init(this.clippingPlanes,_e),v=he.get(U,p.length),v.init(),p.push(v),Dn(U,J,0,_.sortObjects),v.finish(),_.sortObjects===!0&&v.sort(F,q),this.info.render.frame++,me===!0&&Ce.beginShadows();const ie=g.state.shadowsArray;if(Te.render(ie,U,J),me===!0&&Ce.endShadows(),this.info.autoReset===!0&&this.info.reset(),Pe.render(v,U),g.setupLights(_._useLegacyLights),J.isArrayCamera){const oe=J.cameras;for(let ae=0,Fe=oe.length;ae<Fe;ae++){const Xe=oe[ae];vi(v,U,Xe,Xe.viewport)}}else vi(v,U,J);b!==null&&(Ze.updateMultisampleRenderTarget(b),Ze.updateRenderTargetMipmap(b)),U.isScene===!0&&U.onAfterRender(_,U,J),Ge.resetDefaultState(),A=-1,E=null,x.pop(),x.length>0?g=x[x.length-1]:g=null,p.pop(),p.length>0?v=p[p.length-1]:v=null};function Dn(U,J,ie,oe){if(U.visible===!1)return;if(U.layers.test(J.layers)){if(U.isGroup)ie=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(J);else if(U.isLight)g.pushLight(U),U.castShadow&&g.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||ee.intersectsSprite(U)){oe&&fe.setFromMatrixPosition(U.matrixWorld).applyMatrix4(We);const Xe=L.update(U),et=U.material;et.visible&&v.push(U,Xe,et,ie,fe.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(!U.frustumCulled||ee.intersectsObject(U))){const Xe=L.update(U),et=U.material;if(oe&&(U.boundingSphere!==void 0?(U.boundingSphere===null&&U.computeBoundingSphere(),fe.copy(U.boundingSphere.center)):(Xe.boundingSphere===null&&Xe.computeBoundingSphere(),fe.copy(Xe.boundingSphere.center)),fe.applyMatrix4(U.matrixWorld).applyMatrix4(We)),Array.isArray(et)){const tt=Xe.groups;for(let yt=0,ct=tt.length;yt<ct;yt++){const at=tt[yt],Vt=et[at.materialIndex];Vt&&Vt.visible&&v.push(U,Xe,Vt,ie,fe.z,at)}}else et.visible&&v.push(U,Xe,et,ie,fe.z,null)}}const Fe=U.children;for(let Xe=0,et=Fe.length;Xe<et;Xe++)Dn(Fe[Xe],J,ie,oe)}function vi(U,J,ie,oe){const ae=U.opaque,Fe=U.transmissive,Xe=U.transparent;g.setupLightsView(ie),me===!0&&Ce.setGlobalState(_.clippingPlanes,ie),Fe.length>0&&k_(ae,Fe,J,ie),oe&&ke.viewport(P.copy(oe)),ae.length>0&&lc(ae,J,ie),Fe.length>0&&lc(Fe,J,ie),Xe.length>0&&lc(Xe,J,ie),ke.buffers.depth.setTest(!0),ke.buffers.depth.setMask(!0),ke.buffers.color.setMask(!0),ke.setPolygonOffset(!1)}function k_(U,J,ie,oe){if((ie.isScene===!0?ie.overrideMaterial:null)!==null)return;const Fe=Le.isWebGL2;Ne===null&&(Ne=new Fl(1,1,{generateMipmaps:!0,type:be.has("EXT_color_buffer_half_float")?Ud:ps,minFilter:jd,samples:Fe?4:0})),_.getDrawingBufferSize(Ue),Fe?Ne.setSize(Ue.x,Ue.y):Ne.setSize(Ov(Ue.x),Ov(Ue.y));const Xe=_.getRenderTarget();_.setRenderTarget(Ne),_.getClearColor(O),D=_.getClearAlpha(),D<1&&_.setClearColor(16777215,.5),_.clear();const et=_.toneMapping;_.toneMapping=ds,lc(U,ie,oe),Ze.updateMultisampleRenderTarget(Ne),Ze.updateRenderTargetMipmap(Ne);let tt=!1;for(let yt=0,ct=J.length;yt<ct;yt++){const at=J[yt],Vt=at.object,tr=at.geometry,An=at.material,yi=at.group;if(An.side===Jo&&Vt.layers.test(oe.layers)){const Zt=An.side;An.side=Vr,An.needsUpdate=!0,Bo(Vt,ie,oe,tr,An,yi),An.side=Zt,An.needsUpdate=!0,tt=!0}}tt===!0&&(Ze.updateMultisampleRenderTarget(Ne),Ze.updateRenderTargetMipmap(Ne)),_.setRenderTarget(Xe),_.setClearColor(O,D),_.toneMapping=et}function lc(U,J,ie){const oe=J.isScene===!0?J.overrideMaterial:null;for(let ae=0,Fe=U.length;ae<Fe;ae++){const Xe=U[ae],et=Xe.object,tt=Xe.geometry,yt=oe===null?Xe.material:oe,ct=Xe.group;et.layers.test(ie.layers)&&Bo(et,J,ie,tt,yt,ct)}}function Bo(U,J,ie,oe,ae,Fe){U.onBeforeRender(_,J,ie,oe,ae,Fe),U.modelViewMatrix.multiplyMatrices(ie.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),ae.onBeforeRender(_,J,ie,oe,U,Fe),ae.transparent===!0&&ae.side===Jo&&ae.forceSinglePass===!1?(ae.side=Vr,ae.needsUpdate=!0,_.renderBufferDirect(ie,J,oe,ae,U,Fe),ae.side=ws,ae.needsUpdate=!0,_.renderBufferDirect(ie,J,oe,ae,U,Fe),ae.side=Jo):_.renderBufferDirect(ie,J,oe,ae,U,Fe),U.onAfterRender(_,J,ie,oe,ae,Fe)}function cc(U,J,ie){J.isScene!==!0&&(J=Re);const oe=Ye.get(U),ae=g.state.lights,Fe=g.state.shadowsArray,Xe=ae.state.version,et=re.getParameters(U,ae.state,Fe,J,ie),tt=re.getProgramCacheKey(et);let yt=oe.programs;oe.environment=U.isMeshStandardMaterial?J.environment:null,oe.fog=J.fog,oe.envMap=(U.isMeshStandardMaterial?Pt:ht).get(U.envMap||oe.environment),yt===void 0&&(U.addEventListener("dispose",ue),yt=new Map,oe.programs=yt);let ct=yt.get(tt);if(ct!==void 0){if(oe.currentProgram===ct&&oe.lightsStateVersion===Xe)return Bs(U,et),ct}else et.uniforms=re.getUniforms(U),U.onBuild(ie,et,_),U.onBeforeCompile(et,_),ct=re.acquireProgram(et,tt),yt.set(tt,ct),oe.uniforms=et.uniforms;const at=oe.uniforms;return(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(at.clippingPlanes=Ce.uniform),Bs(U,et),oe.needsLights=uc(U),oe.lightsStateVersion=Xe,oe.needsLights&&(at.ambientLightColor.value=ae.state.ambient,at.lightProbe.value=ae.state.probe,at.directionalLights.value=ae.state.directional,at.directionalLightShadows.value=ae.state.directionalShadow,at.spotLights.value=ae.state.spot,at.spotLightShadows.value=ae.state.spotShadow,at.rectAreaLights.value=ae.state.rectArea,at.ltc_1.value=ae.state.rectAreaLTC1,at.ltc_2.value=ae.state.rectAreaLTC2,at.pointLights.value=ae.state.point,at.pointLightShadows.value=ae.state.pointShadow,at.hemisphereLights.value=ae.state.hemi,at.directionalShadowMap.value=ae.state.directionalShadowMap,at.directionalShadowMatrix.value=ae.state.directionalShadowMatrix,at.spotShadowMap.value=ae.state.spotShadowMap,at.spotLightMatrix.value=ae.state.spotLightMatrix,at.spotLightMap.value=ae.state.spotLightMap,at.pointShadowMap.value=ae.state.pointShadowMap,at.pointShadowMatrix.value=ae.state.pointShadowMatrix),oe.currentProgram=ct,oe.uniformsList=null,ct}function sm(U){if(U.uniformsList===null){const J=U.currentProgram.getUniforms();U.uniformsList=zg.seqWithValue(J.seq,U.uniforms)}return U.uniformsList}function Bs(U,J){const ie=Ye.get(U);ie.outputColorSpace=J.outputColorSpace,ie.instancing=J.instancing,ie.instancingColor=J.instancingColor,ie.skinning=J.skinning,ie.morphTargets=J.morphTargets,ie.morphNormals=J.morphNormals,ie.morphColors=J.morphColors,ie.morphTargetsCount=J.morphTargetsCount,ie.numClippingPlanes=J.numClippingPlanes,ie.numIntersection=J.numClipIntersection,ie.vertexAlphas=J.vertexAlphas,ie.vertexTangents=J.vertexTangents,ie.toneMapping=J.toneMapping}function lm(U,J,ie,oe,ae){J.isScene!==!0&&(J=Re),Ze.resetTextureUnits();const Fe=J.fog,Xe=oe.isMeshStandardMaterial?J.environment:null,et=b===null?_.outputColorSpace:b.isXRRenderTarget===!0?b.texture.colorSpace:xa,tt=(oe.isMeshStandardMaterial?Pt:ht).get(oe.envMap||Xe),yt=oe.vertexColors===!0&&!!ie.attributes.color&&ie.attributes.color.itemSize===4,ct=!!ie.attributes.tangent&&(!!oe.normalMap||oe.anisotropy>0),at=!!ie.morphAttributes.position,Vt=!!ie.morphAttributes.normal,tr=!!ie.morphAttributes.color;let An=ds;oe.toneMapped&&(b===null||b.isXRRenderTarget===!0)&&(An=_.toneMapping);const yi=ie.morphAttributes.position||ie.morphAttributes.normal||ie.morphAttributes.color,Zt=yi!==void 0?yi.length:0,bt=Ye.get(oe),$s=g.state.lights;if(me===!0&&(_e===!0||U!==E)){const _n=U===E&&oe.id===A;Ce.setState(oe,U,_n)}let ln=!1;oe.version===bt.__version?(bt.needsLights&&bt.lightsStateVersion!==$s.state.version||bt.outputColorSpace!==et||ae.isInstancedMesh&&bt.instancing===!1||!ae.isInstancedMesh&&bt.instancing===!0||ae.isSkinnedMesh&&bt.skinning===!1||!ae.isSkinnedMesh&&bt.skinning===!0||ae.isInstancedMesh&&bt.instancingColor===!0&&ae.instanceColor===null||ae.isInstancedMesh&&bt.instancingColor===!1&&ae.instanceColor!==null||bt.envMap!==tt||oe.fog===!0&&bt.fog!==Fe||bt.numClippingPlanes!==void 0&&(bt.numClippingPlanes!==Ce.numPlanes||bt.numIntersection!==Ce.numIntersection)||bt.vertexAlphas!==yt||bt.vertexTangents!==ct||bt.morphTargets!==at||bt.morphNormals!==Vt||bt.morphColors!==tr||bt.toneMapping!==An||Le.isWebGL2===!0&&bt.morphTargetsCount!==Zt)&&(ln=!0):(ln=!0,bt.__version=oe.version);let mo=bt.currentProgram;ln===!0&&(mo=cc(oe,J,ae));let nh=!1,zs=!1,rh=!1;const Wn=mo.getUniforms(),go=bt.uniforms;if(ke.useProgram(mo.program)&&(nh=!0,zs=!0,rh=!0),oe.id!==A&&(A=oe.id,zs=!0),nh||E!==U){Wn.setValue(G,"projectionMatrix",U.projectionMatrix),Wn.setValue(G,"viewMatrix",U.matrixWorldInverse);const _n=Wn.map.cameraPosition;_n!==void 0&&_n.setValue(G,fe.setFromMatrixPosition(U.matrixWorld)),Le.logarithmicDepthBuffer&&Wn.setValue(G,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial)&&Wn.setValue(G,"isOrthographic",U.isOrthographicCamera===!0),E!==U&&(E=U,zs=!0,rh=!0)}if(ae.isSkinnedMesh){Wn.setOptional(G,ae,"bindMatrix"),Wn.setOptional(G,ae,"bindMatrixInverse");const _n=ae.skeleton;_n&&(Le.floatVertexTextures?(_n.boneTexture===null&&_n.computeBoneTexture(),Wn.setValue(G,"boneTexture",_n.boneTexture,Ze),Wn.setValue(G,"boneTextureSize",_n.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const ih=ie.morphAttributes;if((ih.position!==void 0||ih.normal!==void 0||ih.color!==void 0&&Le.isWebGL2===!0)&&Y.update(ae,ie,mo),(zs||bt.receiveShadow!==ae.receiveShadow)&&(bt.receiveShadow=ae.receiveShadow,Wn.setValue(G,"receiveShadow",ae.receiveShadow)),oe.isMeshGouraudMaterial&&oe.envMap!==null&&(go.envMap.value=tt,go.flipEnvMap.value=tt.isCubeTexture&&tt.isRenderTargetTexture===!1?-1:1),zs&&(Wn.setValue(G,"toneMappingExposure",_.toneMappingExposure),bt.needsLights&&th(go,rh),Fe&&oe.fog===!0&&ye.refreshFogUniforms(go,Fe),ye.refreshMaterialUniforms(go,oe,B,H,Ne),zg.upload(G,sm(bt),go,Ze)),oe.isShaderMaterial&&oe.uniformsNeedUpdate===!0&&(zg.upload(G,sm(bt),go,Ze),oe.uniformsNeedUpdate=!1),oe.isSpriteMaterial&&Wn.setValue(G,"center",ae.center),Wn.setValue(G,"modelViewMatrix",ae.modelViewMatrix),Wn.setValue(G,"normalMatrix",ae.normalMatrix),Wn.setValue(G,"modelMatrix",ae.matrixWorld),oe.isShaderMaterial||oe.isRawShaderMaterial){const _n=oe.uniformsGroups;for(let Jr=0,fc=_n.length;Jr<fc;Jr++)if(Le.isWebGL2){const Hs=_n[Jr];qe.update(Hs,mo),qe.bind(Hs,mo)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return mo}function th(U,J){U.ambientLightColor.needsUpdate=J,U.lightProbe.needsUpdate=J,U.directionalLights.needsUpdate=J,U.directionalLightShadows.needsUpdate=J,U.pointLights.needsUpdate=J,U.pointLightShadows.needsUpdate=J,U.spotLights.needsUpdate=J,U.spotLightShadows.needsUpdate=J,U.rectAreaLights.needsUpdate=J,U.hemisphereLights.needsUpdate=J}function uc(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(U,J,ie){Ye.get(U.texture).__webglTexture=J,Ye.get(U.depthTexture).__webglTexture=ie;const oe=Ye.get(U);oe.__hasExternalTextures=!0,oe.__hasExternalTextures&&(oe.__autoAllocateDepthBuffer=ie===void 0,oe.__autoAllocateDepthBuffer||be.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),oe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(U,J){const ie=Ye.get(U);ie.__webglFramebuffer=J,ie.__useDefaultFramebuffer=J===void 0},this.setRenderTarget=function(U,J=0,ie=0){b=U,w=J,M=ie;let oe=!0,ae=null,Fe=!1,Xe=!1;if(U){const tt=Ye.get(U);tt.__useDefaultFramebuffer!==void 0?(ke.bindFramebuffer(G.FRAMEBUFFER,null),oe=!1):tt.__webglFramebuffer===void 0?Ze.setupRenderTarget(U):tt.__hasExternalTextures&&Ze.rebindTextures(U,Ye.get(U.texture).__webglTexture,Ye.get(U.depthTexture).__webglTexture);const yt=U.texture;(yt.isData3DTexture||yt.isDataArrayTexture||yt.isCompressedArrayTexture)&&(Xe=!0);const ct=Ye.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(Array.isArray(ct[J])?ae=ct[J][ie]:ae=ct[J],Fe=!0):Le.isWebGL2&&U.samples>0&&Ze.useMultisampledRTT(U)===!1?ae=Ye.get(U).__webglMultisampledFramebuffer:Array.isArray(ct)?ae=ct[ie]:ae=ct,P.copy(U.viewport),R.copy(U.scissor),N=U.scissorTest}else P.copy(K).multiplyScalar(B).floor(),R.copy(z).multiplyScalar(B).floor(),N=X;if(ke.bindFramebuffer(G.FRAMEBUFFER,ae)&&Le.drawBuffers&&oe&&ke.drawBuffers(U,ae),ke.viewport(P),ke.scissor(R),ke.setScissorTest(N),Fe){const tt=Ye.get(U.texture);G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_CUBE_MAP_POSITIVE_X+J,tt.__webglTexture,ie)}else if(Xe){const tt=Ye.get(U.texture),yt=J||0;G.framebufferTextureLayer(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,tt.__webglTexture,ie||0,yt)}A=-1},this.readRenderTargetPixels=function(U,J,ie,oe,ae,Fe,Xe){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let et=Ye.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&Xe!==void 0&&(et=et[Xe]),et){ke.bindFramebuffer(G.FRAMEBUFFER,et);try{const tt=U.texture,yt=tt.format,ct=tt.type;if(yt!==to&&Qe.convert(yt)!==G.getParameter(G.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const at=ct===Ud&&(be.has("EXT_color_buffer_half_float")||Le.isWebGL2&&be.has("EXT_color_buffer_float"));if(ct!==ps&&Qe.convert(ct)!==G.getParameter(G.IMPLEMENTATION_COLOR_READ_TYPE)&&!(ct===es&&(Le.isWebGL2||be.has("OES_texture_float")||be.has("WEBGL_color_buffer_float")))&&!at){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}J>=0&&J<=U.width-oe&&ie>=0&&ie<=U.height-ae&&G.readPixels(J,ie,oe,ae,Qe.convert(yt),Qe.convert(ct),Fe)}finally{const tt=b!==null?Ye.get(b).__webglFramebuffer:null;ke.bindFramebuffer(G.FRAMEBUFFER,tt)}}},this.copyFramebufferToTexture=function(U,J,ie=0){const oe=Math.pow(2,-ie),ae=Math.floor(J.image.width*oe),Fe=Math.floor(J.image.height*oe);Ze.setTexture2D(J,0),G.copyTexSubImage2D(G.TEXTURE_2D,ie,0,0,U.x,U.y,ae,Fe),ke.unbindTexture()},this.copyTextureToTexture=function(U,J,ie,oe=0){const ae=J.image.width,Fe=J.image.height,Xe=Qe.convert(ie.format),et=Qe.convert(ie.type);Ze.setTexture2D(ie,0),G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,ie.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,ie.unpackAlignment),J.isDataTexture?G.texSubImage2D(G.TEXTURE_2D,oe,U.x,U.y,ae,Fe,Xe,et,J.image.data):J.isCompressedTexture?G.compressedTexSubImage2D(G.TEXTURE_2D,oe,U.x,U.y,J.mipmaps[0].width,J.mipmaps[0].height,Xe,J.mipmaps[0].data):G.texSubImage2D(G.TEXTURE_2D,oe,U.x,U.y,Xe,et,J.image),oe===0&&ie.generateMipmaps&&G.generateMipmap(G.TEXTURE_2D),ke.unbindTexture()},this.copyTextureToTexture3D=function(U,J,ie,oe,ae=0){if(_.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Fe=U.max.x-U.min.x+1,Xe=U.max.y-U.min.y+1,et=U.max.z-U.min.z+1,tt=Qe.convert(oe.format),yt=Qe.convert(oe.type);let ct;if(oe.isData3DTexture)Ze.setTexture3D(oe,0),ct=G.TEXTURE_3D;else if(oe.isDataArrayTexture)Ze.setTexture2DArray(oe,0),ct=G.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,oe.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,oe.unpackAlignment);const at=G.getParameter(G.UNPACK_ROW_LENGTH),Vt=G.getParameter(G.UNPACK_IMAGE_HEIGHT),tr=G.getParameter(G.UNPACK_SKIP_PIXELS),An=G.getParameter(G.UNPACK_SKIP_ROWS),yi=G.getParameter(G.UNPACK_SKIP_IMAGES),Zt=ie.isCompressedTexture?ie.mipmaps[0]:ie.image;G.pixelStorei(G.UNPACK_ROW_LENGTH,Zt.width),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,Zt.height),G.pixelStorei(G.UNPACK_SKIP_PIXELS,U.min.x),G.pixelStorei(G.UNPACK_SKIP_ROWS,U.min.y),G.pixelStorei(G.UNPACK_SKIP_IMAGES,U.min.z),ie.isDataTexture||ie.isData3DTexture?G.texSubImage3D(ct,ae,J.x,J.y,J.z,Fe,Xe,et,tt,yt,Zt.data):ie.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),G.compressedTexSubImage3D(ct,ae,J.x,J.y,J.z,Fe,Xe,et,tt,Zt.data)):G.texSubImage3D(ct,ae,J.x,J.y,J.z,Fe,Xe,et,tt,yt,Zt),G.pixelStorei(G.UNPACK_ROW_LENGTH,at),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,Vt),G.pixelStorei(G.UNPACK_SKIP_PIXELS,tr),G.pixelStorei(G.UNPACK_SKIP_ROWS,An),G.pixelStorei(G.UNPACK_SKIP_IMAGES,yi),ae===0&&oe.generateMipmaps&&G.generateMipmap(ct),ke.unbindTexture()},this.initTexture=function(U){U.isCubeTexture?Ze.setTextureCube(U,0):U.isData3DTexture?Ze.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?Ze.setTexture2DArray(U,0):Ze.setTexture2D(U,0),ke.unbindTexture()},this.resetState=function(){w=0,M=0,b=null,ke.reset(),Ge.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return na}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===aT?"display-p3":"srgb",n.unpackColorSpace=zt.workingColorSpace===x0?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===jn?Pl:Fj}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Pl?jn:xa}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class xX extends dT{}xX.prototype.isWebGL1Renderer=!0;class iU extends cr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class oU extends Of{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ot(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const V2=new In,q1=new w0,ig=new b0,og=new te;class bX extends cr{constructor(e=new jo,n=new oU){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),ig.copy(r.boundingSphere),ig.applyMatrix4(i),ig.radius+=o,e.ray.intersectsSphere(ig)===!1)return;V2.copy(i).invert(),q1.copy(e.ray).applyMatrix4(V2);const s=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,c=r.index,f=r.attributes.position;if(c!==null){const h=Math.max(0,a.start),d=Math.min(c.count,a.start+a.count);for(let y=h,v=d;y<v;y++){const g=c.getX(y);og.fromBufferAttribute(f,g),B2(og,g,l,i,e,n,this)}}else{const h=Math.max(0,a.start),d=Math.min(f.count,a.start+a.count);for(let y=h,v=d;y<v;y++)og.fromBufferAttribute(f,y),B2(og,y,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}}function B2(t,e,n,r,i,o,a){const s=q1.distanceSqToPoint(t);if(s<n){const l=new te;q1.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,object:a})}}class ml extends jo{constructor(e=1,n=32,r=16,i=0,o=Math.PI*2,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:o,thetaStart:a,thetaLength:s},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(a+s,Math.PI);let c=0;const u=[],f=new te,h=new te,d=[],y=[],v=[],g=[];for(let p=0;p<=r;p++){const x=[],_=p/r;let T=0;p===0&&a===0?T=.5/n:p===r&&l===Math.PI&&(T=-.5/n);for(let w=0;w<=n;w++){const M=w/n;f.x=-e*Math.cos(i+M*o)*Math.sin(a+_*s),f.y=e*Math.cos(a+_*s),f.z=e*Math.sin(i+M*o)*Math.sin(a+_*s),y.push(f.x,f.y,f.z),h.copy(f).normalize(),v.push(h.x,h.y,h.z),g.push(M+T,1-_),x.push(c++)}u.push(x)}for(let p=0;p<r;p++)for(let x=0;x<n;x++){const _=u[p][x+1],T=u[p][x],w=u[p+1][x],M=u[p+1][x+1];(p!==0||a>0)&&d.push(_,T,M),(p!==r-1||l<Math.PI)&&d.push(T,w,M)}this.setIndex(d),this.setAttribute("position",new Di(y,3)),this.setAttribute("normal",new Di(v,3)),this.setAttribute("uv",new Di(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ml(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class $2 extends Of{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ot(16777215),this.specular=new Ot(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vj,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=iT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}const z2={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class aU{constructor(e,n,r){const i=this;let o=!1,a=0,s=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(u){s++,o===!1&&i.onStart!==void 0&&i.onStart(u,a,s),o=!0},this.itemEnd=function(u){a++,i.onProgress!==void 0&&i.onProgress(u,a,s),a===s&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,h=c.length;f<h;f+=2){const d=c[f],y=c[f+1];if(d.global&&(d.lastIndex=0),d.test(u))return y}return null}}}const wX=new aU;class pT{constructor(e){this.manager=e!==void 0?e:wX,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,o){r.load(e,i,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}pT.DEFAULT_MATERIAL_NAME="__DEFAULT";class SX extends pT{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,a=z2.get(e);if(a!==void 0)return o.manager.itemStart(e),setTimeout(function(){n&&n(a),o.manager.itemEnd(e)},0),a;const s=Vd("img");function l(){u(),z2.add(e,this),n&&n(this),o.manager.itemEnd(e)}function c(f){u(),i&&i(f),o.manager.itemError(e),o.manager.itemEnd(e)}function u(){s.removeEventListener("load",l,!1),s.removeEventListener("error",c,!1)}return s.addEventListener("load",l,!1),s.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),o.manager.itemStart(e),s.src=e,s}}class EX extends pT{constructor(e){super(e)}load(e,n,r,i){const o=new Qr,a=new SX(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(s){o.image=s,o.needsUpdate=!0,n!==void 0&&n(o)},r,i),o}}class sU extends cr{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Ot(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}const zx=new In,H2=new te,G2=new te;class TX{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new gt(512,512),this.map=null,this.mapPass=null,this.matrix=new In,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new uT,this._frameExtents=new gt(1,1),this._viewportCount=1,this._viewports=[new Zn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;H2.setFromMatrixPosition(e.matrixWorld),n.position.copy(H2),G2.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(G2),n.updateMatrixWorld(),zx.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zx),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(zx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class AX extends TX{constructor(){super(new Jj(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class MX extends sU{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(cr.DEFAULT_UP),this.updateMatrix(),this.target=new cr,this.shadow=new AX}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class PX extends sU{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class CX{constructor(e,n,r=0,i=1/0){this.ray=new w0(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new lT,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return X1(e,this,r,n),r.sort(W2),r}intersectObjects(e,n=!0,r=[]){for(let i=0,o=e.length;i<o;i++)X1(e[i],this,r,n);return r.sort(W2),r}}function W2(t,e){return t.distance-e.distance}function X1(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let o=0,a=i.length;o<a;o++)X1(i[o],e,n,!0)}}class q2{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Sr(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:rT}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=rT);const X2={type:"change"},Hx={type:"start"},K2={type:"end"},ag=new w0,Y2=new Wa,RX=Math.cos(70*Bj.DEG2RAD);class lU extends Ql{constructor(e,n){super(),this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new te,this.cursor=new te,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:gc.ROTATE,MIDDLE:gc.DOLLY,RIGHT:gc.PAN},this.touches={ONE:Ga.ROTATE,TWO:Ga.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return s.phi},this.getAzimuthalAngle=function(){return s.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Y){Y.addEventListener("keydown",L),this._domElementKeyEvents=Y},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",L),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(X2),r.update(),o=i.NONE},this.update=function(){const Y=new te,Se=new Vl().setFromUnitVectors(e.up,new te(0,1,0)),de=Se.clone().invert(),Qe=new te,Ge=new Vl,qe=new te,Ve=2*Math.PI;return function(vt=null){const Q=r.object.position;Y.copy(Q).sub(r.target),Y.applyQuaternion(Se),s.setFromVector3(Y),r.autoRotate&&o===i.NONE&&R(E(vt)),r.enableDamping?(s.theta+=l.theta*r.dampingFactor,s.phi+=l.phi*r.dampingFactor):(s.theta+=l.theta,s.phi+=l.phi);let le=r.minAzimuthAngle,ue=r.maxAzimuthAngle;isFinite(le)&&isFinite(ue)&&(le<-Math.PI?le+=Ve:le>Math.PI&&(le-=Ve),ue<-Math.PI?ue+=Ve:ue>Math.PI&&(ue-=Ve),le<=ue?s.theta=Math.max(le,Math.min(ue,s.theta)):s.theta=s.theta>(le+ue)/2?Math.max(le,s.theta):Math.min(ue,s.theta)),s.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,s.phi)),s.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(u,r.dampingFactor):r.target.add(u),r.target.sub(r.cursor),r.target.clampLength(r.minTargetRadius,r.maxTargetRadius),r.target.add(r.cursor),r.zoomToCursor&&M||r.object.isOrthographicCamera?s.radius=q(s.radius):s.radius=q(s.radius*c),Y.setFromSpherical(s),Y.applyQuaternion(de),Q.copy(r.target).add(Y),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,u.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),u.set(0,0,0));let ne=!1;if(r.zoomToCursor&&M){let ge=null;if(r.object.isPerspectiveCamera){const Ie=Y.length();ge=q(Ie*c);const rt=Ie-ge;r.object.position.addScaledVector(T,rt),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Ie=new te(w.x,w.y,0);Ie.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/c)),r.object.updateProjectionMatrix(),ne=!0;const rt=new te(w.x,w.y,0);rt.unproject(r.object),r.object.position.sub(rt).add(Ie),r.object.updateMatrixWorld(),ge=Y.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;ge!==null&&(this.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(ge).add(r.object.position):(ag.origin.copy(r.object.position),ag.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(ag.direction))<RX?e.lookAt(r.target):(Y2.setFromNormalAndCoplanarPoint(r.object.up,r.target),ag.intersectPlane(Y2,r.target))))}else r.object.isOrthographicCamera&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/c)),r.object.updateProjectionMatrix(),ne=!0);return c=1,M=!1,ne||Qe.distanceToSquared(r.object.position)>a||8*(1-Ge.dot(r.object.quaternion))>a||qe.distanceToSquared(r.target)>0?(r.dispatchEvent(X2),Qe.copy(r.object.position),Ge.copy(r.object.quaternion),qe.copy(r.target),ne=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",he),r.domElement.removeEventListener("pointerdown",Ye),r.domElement.removeEventListener("pointercancel",ht),r.domElement.removeEventListener("wheel",$),r.domElement.removeEventListener("pointermove",Ze),r.domElement.removeEventListener("pointerup",ht),r._domElementKeyEvents!==null&&(r._domElementKeyEvents.removeEventListener("keydown",L),r._domElementKeyEvents=null)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=i.NONE;const a=1e-6,s=new q2,l=new q2;let c=1;const u=new te,f=new gt,h=new gt,d=new gt,y=new gt,v=new gt,g=new gt,p=new gt,x=new gt,_=new gt,T=new te,w=new gt;let M=!1;const b=[],A={};function E(Y){return Y!==null?2*Math.PI/60*r.autoRotateSpeed*Y:2*Math.PI/60/60*r.autoRotateSpeed}function P(){return Math.pow(.95,r.zoomSpeed)}function R(Y){l.theta-=Y}function N(Y){l.phi-=Y}const O=function(){const Y=new te;return function(de,Qe){Y.setFromMatrixColumn(Qe,0),Y.multiplyScalar(-de),u.add(Y)}}(),D=function(){const Y=new te;return function(de,Qe){r.screenSpacePanning===!0?Y.setFromMatrixColumn(Qe,1):(Y.setFromMatrixColumn(Qe,0),Y.crossVectors(r.object.up,Y)),Y.multiplyScalar(de),u.add(Y)}}(),k=function(){const Y=new te;return function(de,Qe){const Ge=r.domElement;if(r.object.isPerspectiveCamera){const qe=r.object.position;Y.copy(qe).sub(r.target);let Ve=Y.length();Ve*=Math.tan(r.object.fov/2*Math.PI/180),O(2*de*Ve/Ge.clientHeight,r.object.matrix),D(2*Qe*Ve/Ge.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(O(de*(r.object.right-r.object.left)/r.object.zoom/Ge.clientWidth,r.object.matrix),D(Qe*(r.object.top-r.object.bottom)/r.object.zoom/Ge.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function H(Y){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?c/=Y:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function B(Y){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?c*=Y:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function F(Y){if(!r.zoomToCursor)return;M=!0;const Se=r.domElement.getBoundingClientRect(),de=Y.clientX-Se.left,Qe=Y.clientY-Se.top,Ge=Se.width,qe=Se.height;w.x=de/Ge*2-1,w.y=-(Qe/qe)*2+1,T.set(w.x,w.y,1).unproject(r.object).sub(r.object.position).normalize()}function q(Y){return Math.max(r.minDistance,Math.min(r.maxDistance,Y))}function K(Y){f.set(Y.clientX,Y.clientY)}function z(Y){F(Y),p.set(Y.clientX,Y.clientY)}function X(Y){y.set(Y.clientX,Y.clientY)}function ee(Y){h.set(Y.clientX,Y.clientY),d.subVectors(h,f).multiplyScalar(r.rotateSpeed);const Se=r.domElement;R(2*Math.PI*d.x/Se.clientHeight),N(2*Math.PI*d.y/Se.clientHeight),f.copy(h),r.update()}function me(Y){x.set(Y.clientX,Y.clientY),_.subVectors(x,p),_.y>0?H(P()):_.y<0&&B(P()),p.copy(x),r.update()}function _e(Y){v.set(Y.clientX,Y.clientY),g.subVectors(v,y).multiplyScalar(r.panSpeed),k(g.x,g.y),y.copy(v),r.update()}function Ne(Y){F(Y),Y.deltaY<0?B(P()):Y.deltaY>0&&H(P()),r.update()}function We(Y){let Se=!1;switch(Y.code){case r.keys.UP:Y.ctrlKey||Y.metaKey||Y.shiftKey?N(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):k(0,r.keyPanSpeed),Se=!0;break;case r.keys.BOTTOM:Y.ctrlKey||Y.metaKey||Y.shiftKey?N(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):k(0,-r.keyPanSpeed),Se=!0;break;case r.keys.LEFT:Y.ctrlKey||Y.metaKey||Y.shiftKey?R(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):k(r.keyPanSpeed,0),Se=!0;break;case r.keys.RIGHT:Y.ctrlKey||Y.metaKey||Y.shiftKey?R(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):k(-r.keyPanSpeed,0),Se=!0;break}Se&&(Y.preventDefault(),r.update())}function Ue(){if(b.length===1)f.set(b[0].pageX,b[0].pageY);else{const Y=.5*(b[0].pageX+b[1].pageX),Se=.5*(b[0].pageY+b[1].pageY);f.set(Y,Se)}}function fe(){if(b.length===1)y.set(b[0].pageX,b[0].pageY);else{const Y=.5*(b[0].pageX+b[1].pageX),Se=.5*(b[0].pageY+b[1].pageY);y.set(Y,Se)}}function Re(){const Y=b[0].pageX-b[1].pageX,Se=b[0].pageY-b[1].pageY,de=Math.sqrt(Y*Y+Se*Se);p.set(0,de)}function Ee(){r.enableZoom&&Re(),r.enablePan&&fe()}function G(){r.enableZoom&&Re(),r.enableRotate&&Ue()}function lt(Y){if(b.length==1)h.set(Y.pageX,Y.pageY);else{const de=Pe(Y),Qe=.5*(Y.pageX+de.x),Ge=.5*(Y.pageY+de.y);h.set(Qe,Ge)}d.subVectors(h,f).multiplyScalar(r.rotateSpeed);const Se=r.domElement;R(2*Math.PI*d.x/Se.clientHeight),N(2*Math.PI*d.y/Se.clientHeight),f.copy(h)}function be(Y){if(b.length===1)v.set(Y.pageX,Y.pageY);else{const Se=Pe(Y),de=.5*(Y.pageX+Se.x),Qe=.5*(Y.pageY+Se.y);v.set(de,Qe)}g.subVectors(v,y).multiplyScalar(r.panSpeed),k(g.x,g.y),y.copy(v)}function Le(Y){const Se=Pe(Y),de=Y.pageX-Se.x,Qe=Y.pageY-Se.y,Ge=Math.sqrt(de*de+Qe*Qe);x.set(0,Ge),_.set(0,Math.pow(x.y/p.y,r.zoomSpeed)),H(_.y),p.copy(x)}function ke(Y){r.enableZoom&&Le(Y),r.enablePan&&be(Y)}function mt(Y){r.enableZoom&&Le(Y),r.enableRotate&&lt(Y)}function Ye(Y){r.enabled!==!1&&(b.length===0&&(r.domElement.setPointerCapture(Y.pointerId),r.domElement.addEventListener("pointermove",Ze),r.domElement.addEventListener("pointerup",ht)),xe(Y),Y.pointerType==="touch"?re(Y):Pt(Y))}function Ze(Y){r.enabled!==!1&&(Y.pointerType==="touch"?ye(Y):kt(Y))}function ht(Y){Ce(Y),b.length===0&&(r.domElement.releasePointerCapture(Y.pointerId),r.domElement.removeEventListener("pointermove",Ze),r.domElement.removeEventListener("pointerup",ht)),r.dispatchEvent(K2),o=i.NONE}function Pt(Y){let Se;switch(Y.button){case 0:Se=r.mouseButtons.LEFT;break;case 1:Se=r.mouseButtons.MIDDLE;break;case 2:Se=r.mouseButtons.RIGHT;break;default:Se=-1}switch(Se){case gc.DOLLY:if(r.enableZoom===!1)return;z(Y),o=i.DOLLY;break;case gc.ROTATE:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(r.enablePan===!1)return;X(Y),o=i.PAN}else{if(r.enableRotate===!1)return;K(Y),o=i.ROTATE}break;case gc.PAN:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(r.enableRotate===!1)return;K(Y),o=i.ROTATE}else{if(r.enablePan===!1)return;X(Y),o=i.PAN}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(Hx)}function kt(Y){switch(o){case i.ROTATE:if(r.enableRotate===!1)return;ee(Y);break;case i.DOLLY:if(r.enableZoom===!1)return;me(Y);break;case i.PAN:if(r.enablePan===!1)return;_e(Y);break}}function $(Y){r.enabled===!1||r.enableZoom===!1||o!==i.NONE||(Y.preventDefault(),r.dispatchEvent(Hx),Ne(Y),r.dispatchEvent(K2))}function L(Y){r.enabled===!1||r.enablePan===!1||We(Y)}function re(Y){switch(Te(Y),b.length){case 1:switch(r.touches.ONE){case Ga.ROTATE:if(r.enableRotate===!1)return;Ue(),o=i.TOUCH_ROTATE;break;case Ga.PAN:if(r.enablePan===!1)return;fe(),o=i.TOUCH_PAN;break;default:o=i.NONE}break;case 2:switch(r.touches.TWO){case Ga.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ee(),o=i.TOUCH_DOLLY_PAN;break;case Ga.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;G(),o=i.TOUCH_DOLLY_ROTATE;break;default:o=i.NONE}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(Hx)}function ye(Y){switch(Te(Y),o){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;lt(Y),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;be(Y),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ke(Y),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;mt(Y),r.update();break;default:o=i.NONE}}function he(Y){r.enabled!==!1&&Y.preventDefault()}function xe(Y){b.push(Y)}function Ce(Y){delete A[Y.pointerId];for(let Se=0;Se<b.length;Se++)if(b[Se].pointerId==Y.pointerId){b.splice(Se,1);return}}function Te(Y){let Se=A[Y.pointerId];Se===void 0&&(Se=new gt,A[Y.pointerId]=Se),Se.set(Y.pageX,Y.pageY)}function Pe(Y){const Se=Y.pointerId===b[0].pointerId?b[1]:b[0];return A[Se.pointerId]}r.domElement.addEventListener("contextmenu",he),r.domElement.addEventListener("pointerdown",Ye),r.domElement.addEventListener("pointercancel",ht),r.domElement.addEventListener("wheel",$,{passive:!1}),this.update()}}var Tu=Object.freeze({Linear:Object.freeze({None:function(t){return t},In:function(t){return t},Out:function(t){return t},InOut:function(t){return t}}),Quadratic:Object.freeze({In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}}),Cubic:Object.freeze({In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}}),Quartic:Object.freeze({In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}}),Quintic:Object.freeze({In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}}),Sinusoidal:Object.freeze({In:function(t){return 1-Math.sin((1-t)*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return .5*(1-Math.sin(Math.PI*(.5-t)))}}),Exponential:Object.freeze({In:function(t){return t===0?0:Math.pow(1024,t-1)},Out:function(t){return t===1?1:1-Math.pow(2,-10*t)},InOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}}),Circular:Object.freeze({In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}}),Elastic:Object.freeze({In:function(t){return t===0?0:t===1?1:-Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI)},Out:function(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t-.1)*5*Math.PI)+1},InOut:function(t){return t===0?0:t===1?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin((t-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(t){var e=1.70158;return t===1?1:t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return t===0?0:--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}}),Bounce:Object.freeze({In:function(t){return 1-Tu.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?Tu.Bounce.In(t*2)*.5:Tu.Bounce.Out(t*2-1)*.5+.5}}),generatePow:function(t){return t===void 0&&(t=4),t=t<Number.EPSILON?Number.EPSILON:t,t=t>1e4?1e4:t,{In:function(e){return Math.pow(e,t)},Out:function(e){return 1-Math.pow(1-e,t)},InOut:function(e){return e<.5?Math.pow(e*2,t)/2:(1-Math.pow(2-e*2,t))/2+.5}}}}),Bh=function(){return performance.now()},OX=function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return t.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(n){return e._tweens[n]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},t.prototype.remove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},t.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},t.prototype.update=function(e,n){e===void 0&&(e=Bh()),n===void 0&&(n=!0);var r=Object.keys(this._tweens);if(r.length!==0)for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<r.length;i++){var o=this._tweens[r[i]],a=!n;o&&o.update(e,a)===!1&&!n&&this.remove(o)}r=Object.keys(this._tweensAddedDuringUpdate)}},t}(),iu={Linear:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=iu.Utils.Linear;return e<0?o(t[0],t[1],r):e>1?o(t[n],t[n-1],n-r):o(t[i],t[i+1>n?n:i+1],r-i)},Bezier:function(t,e){for(var n=0,r=t.length-1,i=Math.pow,o=iu.Utils.Bernstein,a=0;a<=r;a++)n+=i(1-e,r-a)*i(e,a)*t[a]*o(r,a);return n},CatmullRom:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=iu.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(i=Math.floor(r=n*(1+e))),o(t[(i-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],r-i)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[n]-(o(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):o(t[i?i-1:0],t[i],t[n<i+1?n:i+1],t[n<i+2?n:i+2],r-i)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=iu.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var r=e;r>1;r--)n*=r;return t[e]=n,n}}(),CatmullRom:function(t,e,n,r,i){var o=(n-t)*.5,a=(r-e)*.5,s=i*i,l=i*s;return(2*e-2*n+o+a)*l+(-3*e+3*n-2*o-a)*s+o*i+e}}},IX=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),K1=new OX,NX=function(){function t(e,n){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Tu.Linear.None,this._interpolationFunction=iu.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=IX.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof n=="object"?(this._group=n,n.add(this)):n===!0&&(this._group=K1,K1.add(this))}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.getDuration=function(){return this._duration},t.prototype.to=function(e,n){if(n===void 0&&(n=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=n<0?0:n,this},t.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},t.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},t.prototype.start=function(e,n){if(e===void 0&&(e=Bh()),n===void 0&&(n=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var r in this._valuesStartRepeat)this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||n){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var o in this._valuesEnd)i[o]=this._valuesEnd[o];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n)}return this},t.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},t.prototype._setupProperties=function(e,n,r,i,o){for(var a in r){var s=e[a],l=Array.isArray(s),c=l?"array":typeof s,u=!l&&Array.isArray(r[a]);if(!(c==="undefined"||c==="function")){if(u){var f=r[a];if(f.length===0)continue;for(var h=[s],d=0,y=f.length;d<y;d+=1){var v=this._handleRelativeValue(s,f[d]);if(isNaN(v)){u=!1,console.warn("Found invalid interpolation list. Skipping.");break}h.push(v)}u&&(r[a]=h)}if((c==="object"||l)&&s&&!u){n[a]=l?[]:{};var g=s;for(var p in g)n[a][p]=g[p];i[a]=l?[]:{};var f=r[a];if(!this._isDynamic){var x={};for(var p in f)x[p]=f[p];r[a]=f=x}this._setupProperties(g,n[a],f,i[a],o)}else(typeof n[a]>"u"||o)&&(n[a]=s),l||(n[a]*=1),u?i[a]=r[a].slice().reverse():i[a]=n[a]||0}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},t.prototype.pause=function(e){return e===void 0&&(e=Bh()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},t.prototype.resume=function(e){return e===void 0&&(e=Bh()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},t.prototype.stopChainedTweens=function(){for(var e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this},t.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},t.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},t.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},t.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},t.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},t.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},t.prototype.easing=function(e){return e===void 0&&(e=Tu.Linear.None),this._easingFunction=e,this},t.prototype.interpolation=function(e){return e===void 0&&(e=iu.Linear),this._interpolationFunction=e,this},t.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._chainedTweens=e,this},t.prototype.onStart=function(e){return this._onStartCallback=e,this},t.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},t.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},t.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},t.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},t.prototype.onStop=function(e){return this._onStopCallback=e,this},t.prototype.update=function(e,n){var r=this,i;if(e===void 0&&(e=Bh()),n===void 0&&(n=t.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(n)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,s=this._duration+((i=this._repeatDelayTime)!==null&&i!==void 0?i:this._delayTime),l=this._duration+this._repeat*s,c=function(){if(r._duration===0||a>l)return 1;var v=Math.trunc(a/s),g=a-v*s,p=Math.min(g/r._duration,1);return p===0&&a===r._duration?1:p},u=c(),f=this._easingFunction(u);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,f),this._onUpdateCallback&&this._onUpdateCallback(this._object,u),this._duration===0||a>=this._duration)if(this._repeat>0){var h=Math.min(Math.trunc((a-this._duration)/s)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=h);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=s*h,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var d=0,y=this._chainedTweens.length;d<y;d++)this._chainedTweens[d].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(e,n,r,i){for(var o in r)if(n[o]!==void 0){var a=n[o]||0,s=r[o],l=Array.isArray(e[o]),c=Array.isArray(s),u=!l&&c;u?e[o]=this._interpolationFunction(s,i):typeof s=="object"&&s?this._updateProperties(e[o],a,s,i):(s=this._handleRelativeValue(a,s),typeof s=="number"&&(e[o]=a+(s-a)*i))}},t.prototype._handleRelativeValue=function(e,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?e+parseFloat(n):parseFloat(n)},t.prototype._swapEndStartRepeatValues=function(e){var n=this._valuesStartRepeat[e],r=this._valuesEnd[e];typeof r=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(r):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n},t.autoStartOnUpdate=!1,t}(),No=K1;No.getAll.bind(No);No.removeAll.bind(No);No.add.bind(No);No.remove.bind(No);var DX=No.update.bind(No),mT={};mT.match=VX;mT.parse=cU;var LX=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,kX=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,jX=/^(?:(min|max)-)?(.+)/,UX=/(em|rem|px|cm|mm|in|pt|pc)?$/,FX=/(dpi|dpcm|dppx)?$/;function VX(t,e){return cU(t).some(function(n){var r=n.inverse,i=n.type==="all"||e.type===n.type;if(i&&r||!(i||r))return!1;var o=n.expressions.every(function(a){var s=a.feature,l=a.modifier,c=a.value,u=e[s];if(!u)return!1;switch(s){case"orientation":case"scan":return u.toLowerCase()===c.toLowerCase();case"width":case"height":case"device-width":case"device-height":c=J2(c),u=J2(u);break;case"resolution":c=Z2(c),u=Z2(u);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":c=Q2(c),u=Q2(u);break;case"grid":case"color":case"color-index":case"monochrome":c=parseInt(c,10)||1,u=parseInt(u,10)||0;break}switch(l){case"min":return u>=c;case"max":return u<=c;default:return u===c}});return o&&!r||!o&&r})}function cU(t){return t.split(",").map(function(e){e=e.trim();var n=e.match(LX),r=n[1],i=n[2],o=n[3]||"",a={};return a.inverse=!!r&&r.toLowerCase()==="not",a.type=i?i.toLowerCase():"all",o=o.match(/\([^\)]+\)/g)||[],a.expressions=o.map(function(s){var l=s.match(kX),c=l[1].toLowerCase().match(jX);return{modifier:c[1],feature:c[2],value:l[2]}}),a})}function Q2(t){var e=Number(t),n;return e||(n=t.match(/^(\d+)\s*\/\s*(\d+)$/),e=n[1]/n[2]),e}function Z2(t){var e=parseFloat(t),n=String(t).match(FX)[1];switch(n){case"dpcm":return e/2.54;case"dppx":return e*96;default:return e}}function J2(t){var e=parseFloat(t),n=String(t).match(UX)[1];switch(n){case"em":return e*16;case"rem":return e*16;case"cm":return e*96/2.54;case"mm":return e*96/2.54/10;case"in":return e*96;case"pt":return e*72;case"pc":return e*72/12;default:return e}}var BX=mT.match,eR=typeof window<"u"?window.matchMedia:null;function $X(t,e,n){var r=this,i;eR&&!n&&(i=eR.call(window,t)),i?(this.matches=i.matches,this.media=i.media,i.addListener(s)):(this.matches=BX(t,e),this.media=t),this.addListener=o,this.removeListener=a,this.dispose=l;function o(c){i&&i.addListener(c)}function a(c){i&&i.removeListener(c)}function s(c){r.matches=c.matches,r.media=c.media}function l(){i&&i.removeListener(s)}}function zX(t,e,n){return new $X(t,e,n)}var HX=zX;const GX=Ft(HX);var WX=/[A-Z]/g,qX=/^ms-/,Gx={};function XX(t){return"-"+t.toLowerCase()}function uU(t){if(Gx.hasOwnProperty(t))return Gx[t];var e=t.replace(WX,XX);return Gx[t]=qX.test(e)?"-"+e:e}function KX(t,e){if(t===e)return!0;if(!t||!e)return!1;const n=Object.keys(t),r=Object.keys(e),i=n.length;if(r.length!==i)return!1;for(let o=0;o<i;o++){const a=n[o];if(t[a]!==e[a]||!Object.prototype.hasOwnProperty.call(e,a))return!1}return!0}var fU={exports:{}},YX="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",QX=YX,ZX=QX;function hU(){}function dU(){}dU.resetWarningCache=hU;var JX=function(){function t(r,i,o,a,s,l){if(l!==ZX){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:dU,resetWarningCache:hU};return n.PropTypes=n,n};fU.exports=JX();var eK=fU.exports;const je=Ft(eK),Ir=je.oneOfType([je.string,je.number]),gT={all:je.bool,grid:je.bool,aural:je.bool,braille:je.bool,handheld:je.bool,print:je.bool,projection:je.bool,screen:je.bool,tty:je.bool,tv:je.bool,embossed:je.bool},pU={orientation:je.oneOf(["portrait","landscape"]),scan:je.oneOf(["progressive","interlace"]),aspectRatio:je.string,deviceAspectRatio:je.string,height:Ir,deviceHeight:Ir,width:Ir,deviceWidth:Ir,color:je.bool,colorIndex:je.bool,monochrome:je.bool,resolution:Ir,type:Object.keys(gT)},{type:gOe,...tK}=pU,mU={minAspectRatio:je.string,maxAspectRatio:je.string,minDeviceAspectRatio:je.string,maxDeviceAspectRatio:je.string,minHeight:Ir,maxHeight:Ir,minDeviceHeight:Ir,maxDeviceHeight:Ir,minWidth:Ir,maxWidth:Ir,minDeviceWidth:Ir,maxDeviceWidth:Ir,minColor:je.number,maxColor:je.number,minColorIndex:je.number,maxColorIndex:je.number,minMonochrome:je.number,maxMonochrome:je.number,minResolution:Ir,maxResolution:Ir,...tK},nK={...gT,...mU};var rK={all:nK,types:gT,matchers:pU,features:mU};const iK=t=>`not ${t}`,oK=(t,e)=>{const n=uU(t);return typeof e=="number"&&(e=`${e}px`),e===!0?n:e===!1?iK(n):`(${n}: ${e})`},aK=t=>t.join(" and "),sK=t=>{const e=[];return Object.keys(rK.all).forEach(n=>{const r=t[n];r!=null&&e.push(oK(n,r))}),aK(e)},lK=V.createContext(void 0),cK=t=>t.query||sK(t),tR=t=>t?Object.keys(t).reduce((n,r)=>(n[uU(r)]=t[r],n),{}):void 0,gU=()=>{const t=V.useRef(!1);return V.useEffect(()=>{t.current=!0},[]),t.current},uK=t=>{const e=V.useContext(lK),n=()=>tR(t)||tR(e),[r,i]=V.useState(n);return V.useEffect(()=>{const o=n();KX(r,o)||i(o)},[t,e]),r},fK=t=>{const e=()=>cK(t),[n,r]=V.useState(e);return V.useEffect(()=>{const i=e();n!==i&&r(i)},[t]),n},hK=(t,e)=>{const n=()=>GX(t,e||{},!!e),[r,i]=V.useState(n),o=gU();return V.useEffect(()=>{if(o){const a=n();return i(a),()=>{a&&a.dispose()}}},[t,e]),r},dK=t=>{const[e,n]=V.useState(t.matches);return V.useEffect(()=>{const r=i=>{n(i.matches)};return t.addListener(r),n(t.matches),()=>{t.removeListener(r)}},[t]),e},Li=(t,e,n)=>{const r=uK(e),i=fK(t);if(!i)throw new Error("Invalid or missing MediaQuery!");const o=hK(i,r),a=dK(o),s=gU();return V.useEffect(()=>{s&&n&&n(a)},[a]),V.useEffect(()=>()=>{o&&o.dispose()},[]),a},pK=[{name:"UAE",lat:23.4241,lng:53.8478,code:"AE",total_emissions:17383.17817809094},{name:"India",lat:20.5937,lng:78.9629,code:"IN",total_emissions:38915.67683491868},{name:"Indonesia",lat:-.7893,lng:113.9213,code:"ID",total_emissions:14100.186512580369},{name:"USA",lat:37.0902,lng:-95.7129,code:"US",total_emissions:226647.7655949883},{name:"UK",lat:55.3781,lng:-3.436,code:"GB",total_emissions:118972.54967357231},{name:"Thailand",lat:15.87,lng:100.9925,code:"TH",total_emissions:3022.302272745106},{name:"Bahrain",lat:26.0667,lng:50.5577,code:"BH",total_emissions:2127.181144190014},{name:"Germany",lat:51.1657,lng:10.4515,code:"DE",total_emissions:11581.882568430101},{name:"Australia",lat:-25.2744,lng:133.7751,code:"AU",total_emissions:13225.260300362208},{name:"Canada",lat:56.1304,lng:-106.3468,code:"CA",total_emissions:9790.472671635243},{name:"Mexico",lat:23.6345,lng:-102.5528,code:"MX",total_emissions:26364.413410672252},{name:"China",lat:35.8617,lng:104.1954,code:"CN",total_emissions:327091.8346071095},{name:"Ireland",lat:53.1424,lng:-7.6921,code:"IE",total_emissions:216.74008501999998},{name:"Cyprus",lat:35.1264,lng:33.4299,code:"CY",total_emissions:2568.8833629102874},{name:"Czechia",lat:49.8175,lng:15.473,code:"CZ",total_emissions:2737.3500558415485},{name:"Russia",lat:61.524,lng:105.3188,code:"RU",total_emissions:103886.02437524701},{name:"Colombia",lat:4.5709,lng:-74.2973,code:"CO",total_emissions:3095.7561078148115},{name:"Egypt",lat:26.8206,lng:30.8025,code:"EG",total_emissions:4318.0114331784325},{name:"Italy",lat:41.8719,lng:12.5674,code:"IT",total_emissions:9074.62598421214},{name:"Norway",lat:60.472,lng:8.4689,code:"NO",total_emissions:11912.363356376447},{name:"South Africa",lat:-30.5595,lng:22.9375,code:"ZA",total_emissions:7513.045837996014},{name:"Switzerland",lat:46.8182,lng:8.2275,code:"CH",total_emissions:9501.869218605192},{name:"Japan",lat:36.2048,lng:138.2529,code:"JP",total_emissions:1836.2608004500057},{name:"Iraq",lat:33.2232,lng:43.6793,code:"IQ",total_emissions:15188.331962594335},{name:"Kazakhstan",lat:48.0196,lng:66.9237,code:"KZ",total_emissions:7768.91312157044},{name:"Kuwait",lat:29.3759,lng:47.9774,code:"KW",total_emissions:15921.810081781872},{name:"Libya",lat:26.3351,lng:17.2283,code:"LY",total_emissions:8146.450931798071},{name:"Ukraine",lat:48.3794,lng:31.1656,code:"UA",total_emissions:6221.653221905161},{name:"Iran",lat:32.4279,lng:53.688,code:"IR",total_emissions:43111.69333717274},{name:"Nigeria",lat:9.082,lng:8.6753,code:"NG",total_emissions:10243.434642540673},{name:"Korea",lat:35.9078,lng:127.7669,code:"KR",total_emissions:4103.6786217367035},{name:"Austria",lat:47.5162,lng:14.5501,code:"AT",total_emissions:1014.1617105033079},{name:"Poland",lat:51.9194,lng:19.1451,code:"PL",total_emissions:29470.19145508587},{name:"Brazil",lat:-14.235,lng:-51.9253,code:"BR",total_emissions:11116.453123797799},{name:"Ecuador",lat:-1.8312,lng:-78.1834,code:"EC",total_emissions:1922.4021016423264},{name:"Venezuela",lat:6.4238,lng:-66.5897,code:"VE",total_emissions:16900.996488655786},{name:"Oman",lat:21.4735,lng:55.9754,code:"OM",total_emissions:4386.740153922608},{name:"Malaysia",lat:4.2105,lng:101.9758,code:"MY",total_emissions:9130.304292377099},{name:"Qatar",lat:25.3548,lng:51.1839,code:"QA",total_emissions:8404.877185456387},{name:"Spain",lat:40.4637,lng:-3.7492,code:"ES",total_emissions:4584.290069151957},{name:"Saudi Arabia",lat:23.8859,lng:45.0792,code:"SA",total_emissions:68831.53710380488},{name:"Slovakia",lat:48.669,lng:19.699,code:"SK",total_emissions:104.49950780420204},{name:"Angola",lat:-11.2027,lng:17.8739,code:"AO",total_emissions:3281.2314940264782},{name:"Algeria",lat:28.0339,lng:1.6596,code:"DZ",total_emissions:14954.696918531457},{name:"Syria",lat:34.8021,lng:38.9968,code:"SY",total_emissions:1578.270985100816},{name:"France",lat:46.2276,lng:2.2137,code:"FR",total_emissions:17583.556638931055},{name:"Turkmenistan",lat:38.9697,lng:59.5563,code:"TM",total_emissions:4222.7028687985},{name:"Argentina",lat:-38.4161,lng:-63.6167,code:"AR",total_emissions:2038.9760778870866},{name:"Netherlands",lat:52.1326,lng:5.2913,code:"NL"}],mK={countries:pK};function gK(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function T0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Y1=t=>Array.isArray(t);function vU(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Bd(t){return typeof t=="string"||Array.isArray(t)}function nR(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function vT(t,e,n,r){if(typeof e=="function"){const[i,o]=nR(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=nR(r);e=e(n!==void 0?n:t.custom,i,o)}return e}function A0(t,e,n){const r=t.getProps();return vT(r,e,n!==void 0?n:r.custom,t)}const yT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_T=["initial",...yT],Hp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zl=new Set(Hp),la=t=>t*1e3,ca=t=>t/1e3,vK={type:"spring",stiffness:500,damping:25,restSpeed:10},yK=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),_K={type:"keyframes",duration:.8},xK={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},bK=(t,{keyframes:e})=>e.length>2?_K:Zl.has(t)?t.startsWith("scale")?yK(e[1]):vK:xK;function xT(t,e){return t?t[e]||t.default||t:void 0}const wK={skipAnimations:!1,useManualTiming:!1},SK=t=>t!==null;function M0(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(SK),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const Mr=t=>t;function EK(t){let e=new Set,n=new Set,r=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function s(c){o.has(c)&&(l.schedule(c),t()),c(a)}const l={schedule:(c,u=!1,f=!1)=>{const d=f&&r?e:n;return u&&o.add(c),d.has(c)||d.add(c),c},cancel:c=>{n.delete(c),o.delete(c)},process:c=>{if(a=c,r){i=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(s),r=!1,i&&(i=!1,l.process(c))}};return l}const sg=["read","resolveKeyframes","update","preRender","render","postRender"],TK=40;function yU(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=sg.reduce((p,x)=>(p[x]=EK(o),p),{}),{read:s,resolveKeyframes:l,update:c,preRender:u,render:f,postRender:h}=a,d=()=>{const p=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(p-i.timestamp,TK),1),i.timestamp=p,i.isProcessing=!0,s.process(i),l.process(i),c.process(i),u.process(i),f.process(i),h.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(d))},y=()=>{n=!0,r=!0,i.isProcessing||t(d)};return{schedule:sg.reduce((p,x)=>{const _=a[x];return p[x]=(T,w=!1,M=!1)=>(n||y(),_.schedule(T,w,M)),p},{}),cancel:p=>{for(let x=0;x<sg.length;x++)a[sg[x]].cancel(p)},state:i,steps:a}}const{schedule:Gt,cancel:Ss,state:or,steps:Wx}=yU(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mr,!0),_U=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,AK=1e-7,MK=12;function PK(t,e,n,r,i){let o,a,s=0;do a=e+(n-e)/2,o=_U(a,r,i)-t,o>0?n=a:e=a;while(Math.abs(o)>AK&&++s<MK);return a}function Gp(t,e,n,r){if(t===e&&n===r)return Mr;const i=o=>PK(o,0,1,t,n);return o=>o===0||o===1?o:_U(i(o),e,r)}const xU=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,bU=t=>e=>1-t(1-e),wU=Gp(.33,1.53,.69,.99),bT=bU(wU),SU=xU(bT),EU=t=>(t*=2)<1?.5*bT(t):.5*(2-Math.pow(2,-10*(t-1))),wT=t=>1-Math.sin(Math.acos(t)),TU=bU(wT),AU=xU(wT),MU=t=>/^0[^.\s]+$/u.test(t);function CK(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||MU(t):!0}let Q1=Mr;const PU=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),CU=t=>e=>typeof e=="string"&&e.startsWith(t),RU=CU("--"),RK=CU("var(--"),ST=t=>RK(t)?OK.test(t.split("/*")[0].trim()):!1,OK=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,IK=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function NK(t){const e=IK.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function OU(t,e,n=1){const[r,i]=NK(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const a=o.trim();return PU(a)?parseFloat(a):a}return ST(i)?OU(i,e,n+1):i}const Es=(t,e,n)=>n>e?e:n<t?t:n,Nf={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},$d={...Nf,transform:t=>Es(0,1,t)},lg={...Nf,default:1},Wp=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ba=Wp("deg"),Ao=Wp("%"),nt=Wp("px"),DK=Wp("vh"),LK=Wp("vw"),rR={...Ao,parse:t=>Ao.parse(t)/100,transform:t=>Ao.transform(t*100)},kK=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),iR=t=>t===Nf||t===nt,oR=(t,e)=>parseFloat(t.split(", ")[e]),aR=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return oR(i[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?oR(o[1],t):0}},jK=new Set(["x","y","z"]),UK=Hp.filter(t=>!jK.has(t));function FK(t){const e=[];return UK.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const $u={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:aR(4,13),y:aR(5,14)};$u.translateX=$u.x;$u.translateY=$u.y;const IU=t=>e=>e.test(t),VK={test:t=>t==="auto",parse:t=>t},NU=[Nf,nt,Ao,Ba,LK,DK,VK],sR=t=>NU.find(IU(t)),Cl=new Set;let Z1=!1,J1=!1;function DU(){if(J1){const t=Array.from(Cl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=FK(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,a])=>{var s;(s=r.getValue(o))===null||s===void 0||s.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}J1=!1,Z1=!1,Cl.forEach(t=>t.complete()),Cl.clear()}function LU(){Cl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(J1=!0)})}function BK(){LU(),DU()}class ET{constructor(e,n,r,i,o,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Cl.add(this),Z1||(Z1=!0,Gt.read(LU),Gt.resolveKeyframes(DU))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const a=i==null?void 0:i.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const l=r.readValue(n,s);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Cl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Cl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const ad=t=>Math.round(t*1e5)/1e5,TT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $K(t){return t==null}const zK=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,AT=(t,e)=>n=>!!(typeof n=="string"&&zK.test(n)&&n.startsWith(t)||e&&!$K(n)&&Object.prototype.hasOwnProperty.call(n,e)),kU=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,a,s]=r.match(TT);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(a),alpha:s!==void 0?parseFloat(s):1}},HK=t=>Es(0,255,t),qx={...Nf,transform:t=>Math.round(HK(t))},gl={test:AT("rgb","red"),parse:kU("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+qx.transform(t)+", "+qx.transform(e)+", "+qx.transform(n)+", "+ad($d.transform(r))+")"};function GK(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const ew={test:AT("#"),parse:GK,transform:gl.transform},ou={test:AT("hsl","hue"),parse:kU("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ao.transform(ad(e))+", "+Ao.transform(ad(n))+", "+ad($d.transform(r))+")"},_r={test:t=>gl.test(t)||ew.test(t)||ou.test(t),parse:t=>gl.test(t)?gl.parse(t):ou.test(t)?ou.parse(t):ew.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?gl.transform(t):ou.transform(t)},WK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function qK(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(TT))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(WK))===null||n===void 0?void 0:n.length)||0)>0}const jU="number",UU="color",XK="var",KK="var(",lR="${}",YK=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function zd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const s=e.replace(YK,l=>(_r.test(l)?(r.color.push(o),i.push(UU),n.push(_r.parse(l))):l.startsWith(KK)?(r.var.push(o),i.push(XK),n.push(l)):(r.number.push(o),i.push(jU),n.push(parseFloat(l))),++o,lR)).split(lR);return{values:n,split:s,indexes:r,types:i}}function FU(t){return zd(t).values}function VU(t){const{split:e,types:n}=zd(t),r=e.length;return i=>{let o="";for(let a=0;a<r;a++)if(o+=e[a],i[a]!==void 0){const s=n[a];s===jU?o+=ad(i[a]):s===UU?o+=_r.transform(i[a]):o+=i[a]}return o}}const QK=t=>typeof t=="number"?0:t;function ZK(t){const e=FU(t);return VU(t)(e.map(QK))}const Ts={test:qK,parse:FU,createTransformer:VU,getAnimatableNone:ZK},JK=new Set(["brightness","contrast","saturate","opacity"]);function eY(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(TT)||[];if(!r)return t;const i=n.replace(r,"");let o=JK.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const tY=/\b([a-z-]*)\(.*?\)/gu,tw={...Ts,getAnimatableNone:t=>{const e=t.match(tY);return e?e.map(eY).join(" "):t}},nY={borderWidth:nt,borderTopWidth:nt,borderRightWidth:nt,borderBottomWidth:nt,borderLeftWidth:nt,borderRadius:nt,radius:nt,borderTopLeftRadius:nt,borderTopRightRadius:nt,borderBottomRightRadius:nt,borderBottomLeftRadius:nt,width:nt,maxWidth:nt,height:nt,maxHeight:nt,top:nt,right:nt,bottom:nt,left:nt,padding:nt,paddingTop:nt,paddingRight:nt,paddingBottom:nt,paddingLeft:nt,margin:nt,marginTop:nt,marginRight:nt,marginBottom:nt,marginLeft:nt,backgroundPositionX:nt,backgroundPositionY:nt},rY={rotate:Ba,rotateX:Ba,rotateY:Ba,rotateZ:Ba,scale:lg,scaleX:lg,scaleY:lg,scaleZ:lg,skew:Ba,skewX:Ba,skewY:Ba,distance:nt,translateX:nt,translateY:nt,translateZ:nt,x:nt,y:nt,z:nt,perspective:nt,transformPerspective:nt,opacity:$d,originX:rR,originY:rR,originZ:nt},cR={...Nf,transform:Math.round},MT={...nY,...rY,zIndex:cR,size:nt,fillOpacity:$d,strokeOpacity:$d,numOctaves:cR},iY={...MT,color:_r,backgroundColor:_r,outlineColor:_r,fill:_r,stroke:_r,borderColor:_r,borderTopColor:_r,borderRightColor:_r,borderBottomColor:_r,borderLeftColor:_r,filter:tw,WebkitFilter:tw},PT=t=>iY[t];function BU(t,e){let n=PT(t);return n!==tw&&(n=Ts),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const oY=new Set(["auto","none","0"]);function aY(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!oY.has(o)&&zd(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=BU(n,i)}class $U extends ET{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),ST(c))){const u=OU(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!kK.has(r)||e.length!==2)return;const[i,o]=e,a=sR(i),s=sR(o);if(a!==s)if(iR(a)&&iR(s))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)CK(e[i])&&r.push(i);r.length&&aY(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$u[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const o=n.getValue(r);o&&o.jump(this.measuredOrigin,!1);const a=i.length-1,s=i[a];i[a]=$u[r](n.measureViewportBox(),window.getComputedStyle(n.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function CT(t){return typeof t=="function"}let Hg;function sY(){Hg=void 0}const Mo={now:()=>(Hg===void 0&&Mo.set(or.isProcessing||wK.useManualTiming?or.timestamp:performance.now()),Hg),set:t=>{Hg=t,queueMicrotask(sY)}},uR=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ts.test(t)||t==="0")&&!t.startsWith("url("));function lY(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function cY(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=uR(i,e),s=uR(o,e);return!a||!s?!1:lY(t)||(n==="spring"||CT(n))&&r}const uY=40;class zU{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",...s}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Mo.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:a,...s},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>uY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&BK(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Mo.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:o,delay:a,onComplete:s,onUpdate:l,isGenerator:c}=this.options;if(!c&&!cY(e,r,i,o))if(a)this.options.duration=0;else{l==null||l(M0(e,this.options,n)),s==null||s(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function HU(t,e){return e?t*(1e3/e):0}const fY=5;function GU(t,e,n){const r=Math.max(e-fY,0);return HU(n-t(r),e-r)}const Xx=.001,hY=.01,dY=10,pY=.05,mY=1;function gY({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,o,a=1-e;a=Es(pY,mY,a),t=Es(hY,dY,ca(t)),a<1?(i=c=>{const u=c*a,f=u*t,h=u-n,d=nw(c,a),y=Math.exp(-f);return Xx-h/d*y},o=c=>{const f=c*a*t,h=f*n+n,d=Math.pow(a,2)*Math.pow(c,2)*t,y=Math.exp(-f),v=nw(Math.pow(c,2),a);return(-i(c)+Xx>0?-1:1)*((h-d)*y)/v}):(i=c=>{const u=Math.exp(-c*t),f=(c-n)*t+1;return-Xx+u*f},o=c=>{const u=Math.exp(-c*t),f=(n-c)*(t*t);return u*f});const s=5/t,l=yY(i,o,s);if(t=la(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:t}}}const vY=12;function yY(t,e,n){let r=n;for(let i=1;i<vY;i++)r=r-t(r)/e(r);return r}function nw(t,e){return t*Math.sqrt(1-e*e)}const _Y=["duration","bounce"],xY=["stiffness","damping","mass"];function fR(t,e){return e.some(n=>t[n]!==void 0)}function bY(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!fR(t,xY)&&fR(t,_Y)){const n=gY(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function WU({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],o=t[t.length-1],a={done:!1,value:i},{stiffness:s,damping:l,mass:c,duration:u,velocity:f,isResolvedFromDuration:h}=bY({...r,velocity:-ca(r.velocity||0)}),d=f||0,y=l/(2*Math.sqrt(s*c)),v=o-i,g=ca(Math.sqrt(s/c)),p=Math.abs(v)<5;n||(n=p?.01:2),e||(e=p?.005:.5);let x;if(y<1){const _=nw(g,y);x=T=>{const w=Math.exp(-y*g*T);return o-w*((d+y*g*v)/_*Math.sin(_*T)+v*Math.cos(_*T))}}else if(y===1)x=_=>o-Math.exp(-g*_)*(v+(d+g*v)*_);else{const _=g*Math.sqrt(y*y-1);x=T=>{const w=Math.exp(-y*g*T),M=Math.min(_*T,300);return o-w*((d+y*g*v)*Math.sinh(M)+_*v*Math.cosh(M))/_}}return{calculatedDuration:h&&u||null,next:_=>{const T=x(_);if(h)a.done=_>=u;else{let w=0;y<1&&(w=_===0?la(d):GU(x,_,T));const M=Math.abs(w)<=n,b=Math.abs(o-T)<=e;a.done=M&&b}return a.value=a.done?o:T,a}}}function hR({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:s,max:l,restDelta:c=.5,restSpeed:u}){const f=t[0],h={done:!1,value:f},d=A=>s!==void 0&&A<s||l!==void 0&&A>l,y=A=>s===void 0?l:l===void 0||Math.abs(s-A)<Math.abs(l-A)?s:l;let v=n*e;const g=f+v,p=a===void 0?g:a(g);p!==g&&(v=p-f);const x=A=>-v*Math.exp(-A/r),_=A=>p+x(A),T=A=>{const E=x(A),P=_(A);h.done=Math.abs(E)<=c,h.value=h.done?p:P};let w,M;const b=A=>{d(h.value)&&(w=A,M=WU({keyframes:[h.value,y(h.value)],velocity:GU(_,A,h.value),damping:i,stiffness:o,restDelta:c,restSpeed:u}))};return b(0),{calculatedDuration:null,next:A=>{let E=!1;return!M&&w===void 0&&(E=!0,T(A),b(A)),w!==void 0&&A>=w?M.next(A-w):(!E&&T(A),h)}}}const wY=Gp(.42,0,1,1),SY=Gp(0,0,.58,1),qU=Gp(.42,0,.58,1),EY=t=>Array.isArray(t)&&typeof t[0]!="number",RT=t=>Array.isArray(t)&&typeof t[0]=="number",dR={linear:Mr,easeIn:wY,easeInOut:qU,easeOut:SY,circIn:wT,circInOut:AU,circOut:TU,backIn:bT,backInOut:SU,backOut:wU,anticipate:EU},pR=t=>{if(RT(t)){Q1(t.length===4);const[e,n,r,i]=t;return Gp(e,n,r,i)}else if(typeof t=="string")return Q1(dR[t]!==void 0),dR[t];return t},TY=(t,e)=>n=>e(t(n)),ua=(...t)=>t.reduce(TY),zu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},hn=(t,e,n)=>t+(e-t)*n;function Kx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function AY({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,a=0;if(!e)i=o=a=n;else{const s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;i=Kx(l,s,t+1/3),o=Kx(l,s,t),a=Kx(l,s,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}function Iv(t,e){return n=>n>0?e:t}const Yx=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},MY=[ew,gl,ou],PY=t=>MY.find(e=>e.test(t));function mR(t){const e=PY(t);if(!e)return!1;let n=e.parse(t);return e===ou&&(n=AY(n)),n}const gR=(t,e)=>{const n=mR(t),r=mR(e);if(!n||!r)return Iv(t,e);const i={...n};return o=>(i.red=Yx(n.red,r.red,o),i.green=Yx(n.green,r.green,o),i.blue=Yx(n.blue,r.blue,o),i.alpha=hn(n.alpha,r.alpha,o),gl.transform(i))},rw=new Set(["none","hidden"]);function CY(t,e){return rw.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function RY(t,e){return n=>hn(t,e,n)}function OT(t){return typeof t=="number"?RY:typeof t=="string"?ST(t)?Iv:_r.test(t)?gR:NY:Array.isArray(t)?XU:typeof t=="object"?_r.test(t)?gR:OY:Iv}function XU(t,e){const n=[...t],r=n.length,i=t.map((o,a)=>OT(o)(o,e[a]));return o=>{for(let a=0;a<r;a++)n[a]=i[a](o);return n}}function OY(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=OT(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function IY(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const a=e.types[o],s=t.indexes[a][i[a]],l=(n=t.values[s])!==null&&n!==void 0?n:0;r[o]=l,i[a]++}return r}const NY=(t,e)=>{const n=Ts.createTransformer(e),r=zd(t),i=zd(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?rw.has(t)&&!i.values.length||rw.has(e)&&!r.values.length?CY(t,e):ua(XU(IY(r,i),i.values),n):Iv(t,e)};function KU(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?hn(t,e,n):OT(t)(t,e)}function DY(t,e,n){const r=[],i=n||KU,o=t.length-1;for(let a=0;a<o;a++){let s=i(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Mr:e;s=ua(l,s)}r.push(s)}return r}function LY(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(Q1(o===e.length),o===1)return()=>e[0];if(o===2&&t[0]===t[1])return()=>e[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=DY(e,r,i),s=a.length,l=c=>{let u=0;if(s>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const f=zu(t[u],t[u+1],c);return a[u](f)};return n?c=>l(Es(t[0],t[o-1],c)):l}function kY(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=zu(0,e,r);t.push(hn(n,1,i))}}function jY(t){const e=[0];return kY(e,t.length-1),e}function UY(t,e){return t.map(n=>n*e)}function FY(t,e){return t.map(()=>e||qU).splice(0,t.length-1)}function Nv({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=EY(r)?r.map(pR):pR(r),o={done:!1,value:e[0]},a=UY(n&&n.length===e.length?n:jY(e),t),s=LY(a,e,{ease:Array.isArray(i)?i:FY(e,i)});return{calculatedDuration:t,next:l=>(o.value=s(l),o.done=l>=t,o)}}const vR=2e4;function VY(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<vR;)e+=n,r=t.next(e);return e>=vR?1/0:e}const BY=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Gt.update(e,!0),stop:()=>Ss(e),now:()=>or.isProcessing?or.timestamp:Mo.now()}},$Y={decay:hR,inertia:hR,tween:Nv,keyframes:Nv,spring:WU},zY=t=>t/100;class IT extends zU{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:o}=this.options,a=(i==null?void 0:i.KeyframeResolver)||ET,s=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new a(o,s,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:a=0}=this.options,s=CT(n)?n:$Y[n]||Nv;let l,c;s!==Nv&&typeof e[0]!="number"&&(l=ua(zY,KU(e[0],e[1])),e=[0,100]);const u=s({...this.options,keyframes:e});o==="mirror"&&(c=s({...this.options,keyframes:[...e].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=VY(u));const{calculatedDuration:f}=u,h=f+i,d=h*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:h,totalDuration:d}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:A}=this.options;return{done:!0,value:A[A.length-1]}}const{finalKeyframe:i,generator:o,mirroredGenerator:a,mapPercentToKeyframes:s,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:f}=r;if(this.startTime===null)return o.next(0);const{delay:h,repeat:d,repeatType:y,repeatDelay:v,onUpdate:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const p=this.currentTime-h*(this.speed>=0?1:-1),x=this.speed>=0?p<0:p>u;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let _=this.currentTime,T=o;if(d){const A=Math.min(this.currentTime,u)/f;let E=Math.floor(A),P=A%1;!P&&A>=1&&(P=1),P===1&&E--,E=Math.min(E,d+1),!!(E%2)&&(y==="reverse"?(P=1-P,v&&(P-=v/f)):y==="mirror"&&(T=a)),_=Es(0,1,P)*f}const w=x?{done:!1,value:l[0]}:T.next(_);s&&(w.value=s(w.value));let{done:M}=w;!x&&c!==null&&(M=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const b=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return b&&i!==void 0&&(w.value=M0(l,this.options,i)),g&&g(w.value),b&&this.finish(),w}get duration(){const{resolved:e}=this;return e?ca(e.calculatedDuration):0}get time(){return ca(this.currentTime)}set time(e){e=la(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ca(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=BY,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const HY=new Set(["opacity","clipPath","filter","transform"]),GY=10,WY=(t,e)=>{let n="";const r=Math.max(Math.round(e/GY),2);for(let i=0;i<r;i++)n+=t(zu(0,r-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function NT(t){let e;return()=>(e===void 0&&(e=t()),e)}const qY={linearEasing:void 0};function XY(t,e){const n=NT(t);return()=>{var r;return(r=qY[e])!==null&&r!==void 0?r:n()}}const Dv=XY(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function YU(t){return!!(typeof t=="function"&&Dv()||!t||typeof t=="string"&&(t in iw||Dv())||RT(t)||Array.isArray(t)&&t.every(YU))}const $h=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,iw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$h([0,.65,.55,1]),circOut:$h([.55,0,1,.45]),backIn:$h([.31,.01,.66,-.59]),backOut:$h([.33,1.53,.69,.99])};function QU(t,e){if(t)return typeof t=="function"&&Dv()?WY(t,e):RT(t)?$h(t):Array.isArray(t)?t.map(n=>QU(n,e)||iw.easeOut):iw[t]}function KY(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:a="loop",ease:s="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=QU(s,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function yR(t,e){t.timeline=e,t.onfinish=null}const YY=NT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Lv=10,QY=2e4;function ZY(t){return CT(t.type)||t.type==="spring"||!YU(t.ease)}function JY(t,e){const n=new IT({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let o=0;for(;!r.done&&o<QY;)r=n.sample(o),i.push(r.value),o+=Lv;return{times:void 0,keyframes:i,duration:o-Lv,ease:"linear"}}const ZU={anticipate:EU,backInOut:SU,circInOut:AU};function eQ(t){return t in ZU}class _R extends zU{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:o}=this.options;this.resolver=new $U(o,(a,s)=>this.onKeyframesResolved(a,s),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:o,ease:a,type:s,motionValue:l,name:c,startTime:u}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof a=="string"&&Dv()&&eQ(a)&&(a=ZU[a]),ZY(this.options)){const{onComplete:h,onUpdate:d,motionValue:y,element:v,...g}=this.options,p=JY(e,g);e=p.keyframes,e.length===1&&(e[1]=e[0]),i=p.duration,o=p.times,a=p.ease,s="keyframes"}const f=KY(l.owner.current,c,e,{...this.options,duration:i,times:o,ease:a});return f.startTime=u??this.calcStartTime(),this.pendingTimeline?(yR(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:h}=this.options;l.set(M0(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:i,times:o,type:s,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ca(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ca(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=la(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Mr;const{animation:r}=n;yR(r,e)}return Mr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:o,ease:a,times:s}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:f,element:h,...d}=this.options,y=new IT({...d,keyframes:r,duration:i,type:o,ease:a,times:s,isGenerator:!0}),v=la(this.time);c.setWithVelocity(y.sample(v-Lv).value,y.sample(v).value,Lv)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:o,damping:a,type:s}=e;return YY()&&r&&HY.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&o!=="mirror"&&a!==0&&s!=="inertia"}}const tQ=NT(()=>window.ScrollTimeline!==void 0);class nQ{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>tQ()&&i.attachTimeline?i.attachTimeline(e):n(i));return()=>{r.forEach((i,o)=>{i&&i(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function rQ({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:s,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const DT=(t,e,n,r={},i,o)=>a=>{const s=xT(r,t)||{},l=s.delay||r.delay||0;let{elapsed:c=0}=r;c=c-la(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...s,delay:-c,onUpdate:h=>{e.set(h),s.onUpdate&&s.onUpdate(h)},onComplete:()=>{a(),s.onComplete&&s.onComplete()},name:t,motionValue:e,element:o?void 0:i};rQ(s)||(u={...u,...bK(t,u)}),u.duration&&(u.duration=la(u.duration)),u.repeatDelay&&(u.repeatDelay=la(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(f=!0)),f&&!o&&e.get()!==void 0){const h=M0(u.keyframes,s);if(h!==void 0)return Gt.update(()=>{u.onUpdate(h),u.onComplete()}),new nQ([])}return!o&&_R.supports(u)?new _R(u):new IT(u)},iQ=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),oQ=t=>Y1(t)?t[t.length-1]||0:t;function LT(t,e){t.indexOf(e)===-1&&t.push(e)}function kT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class jT{constructor(){this.subscriptions=[]}add(e){return LT(this.subscriptions,e),()=>kT(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const a=this.subscriptions[o];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xR=30,aQ=t=>!isNaN(parseFloat(t));class sQ{constructor(e,n={}){this.version="11.11.17",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const o=Mo.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Mo.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=aQ(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new jT);const r=this.events[e].add(n);return e==="change"?()=>{r(),Gt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Mo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>xR)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,xR);return HU(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Hd(t,e){return new sQ(t,e)}function lQ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Hd(n))}function cQ(t,e){const n=A0(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const a in o){const s=oQ(o[a]);lQ(t,a,s)}}const UT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),uQ="framerAppearId",JU="data-"+UT(uQ);function eF(t){return t.props[JU]}const Ar=t=>!!(t&&t.getVelocity);function fQ(t){return!!(Ar(t)&&t.add)}function ow(t,e){const n=t.getValue("willChange");if(fQ(n))return n.add(e)}function hQ({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function tF(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var o;let{transition:a=t.getDefaultTransition(),transitionEnd:s,...l}=e;r&&(a=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const h=t.getValue(f,(o=t.latestValues[f])!==null&&o!==void 0?o:null),d=l[f];if(d===void 0||u&&hQ(u,f))continue;const y={delay:n,...xT(a||{},f)};let v=!1;if(window.MotionHandoffAnimation){const p=eF(t);if(p){const x=window.MotionHandoffAnimation(p,f,Gt);x!==null&&(y.startTime=x,v=!0)}}ow(t,f),h.start(DT(f,h,d,t.shouldReduceMotion&&Zl.has(f)?{type:!1}:y,t,v));const g=h.animation;g&&c.push(g)}return s&&Promise.all(c).then(()=>{Gt.update(()=>{s&&cQ(t,s)})}),c}function aw(t,e,n={}){var r;const i=A0(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const a=i?()=>Promise.all(tF(t,i,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=o;return dQ(t,e,u+c,f,h,n)}:()=>Promise.resolve(),{when:l}=o;if(l){const[c,u]=l==="beforeChildren"?[a,s]:[s,a];return c().then(()=>u())}else return Promise.all([a(),s(n.delay)])}function dQ(t,e,n=0,r=0,i=1,o){const a=[],s=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>s-c*r;return Array.from(t.variantChildren).sort(pQ).forEach((c,u)=>{c.notify("AnimationStart",e),a.push(aw(c,e,{...o,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(a)}function pQ(t,e){return t.sortNodePosition(e)}function mQ(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>aw(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=aw(t,e,n);else{const i=typeof e=="function"?A0(t,e,n.custom):e;r=Promise.all(tF(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const gQ=_T.length;function nF(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?nF(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<gQ;n++){const r=_T[n],i=t.props[r];(Bd(i)||i===!1)&&(e[r]=i)}return e}const vQ=[...yT].reverse(),yQ=yT.length;function _Q(t){return e=>Promise.all(e.map(({animation:n,options:r})=>mQ(t,n,r)))}function xQ(t){let e=_Q(t),n=bR(),r=!0;const i=l=>(c,u)=>{var f;const h=A0(t,u,l==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(h){const{transition:d,transitionEnd:y,...v}=h;c={...c,...v,...y}}return c};function o(l){e=l(t)}function a(l){const{props:c}=t,u=nF(t.parent)||{},f=[],h=new Set;let d={},y=1/0;for(let g=0;g<yQ;g++){const p=vQ[g],x=n[p],_=c[p]!==void 0?c[p]:u[p],T=Bd(_),w=p===l?x.isActive:null;w===!1&&(y=g);let M=_===u[p]&&_!==c[p]&&T;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),x.protectedKeys={...d},!x.isActive&&w===null||!_&&!x.prevProp||T0(_)||typeof _=="boolean")continue;const b=bQ(x.prevProp,_);let A=b||p===l&&x.isActive&&!M&&T||g>y&&T,E=!1;const P=Array.isArray(_)?_:[_];let R=P.reduce(i(p),{});w===!1&&(R={});const{prevResolvedValues:N={}}=x,O={...N,...R},D=B=>{A=!0,h.has(B)&&(E=!0,h.delete(B)),x.needsAnimating[B]=!0;const F=t.getValue(B);F&&(F.liveStyle=!1)};for(const B in O){const F=R[B],q=N[B];if(d.hasOwnProperty(B))continue;let K=!1;Y1(F)&&Y1(q)?K=!vU(F,q):K=F!==q,K?F!=null?D(B):h.add(B):F!==void 0&&h.has(B)?D(B):x.protectedKeys[B]=!0}x.prevProp=_,x.prevResolvedValues=R,x.isActive&&(d={...d,...R}),r&&t.blockInitialAnimation&&(A=!1),A&&(!(M&&b)||E)&&f.push(...P.map(B=>({animation:B,options:{type:p}})))}if(h.size){const g={};h.forEach(p=>{const x=t.getBaseTarget(p),_=t.getValue(p);_&&(_.liveStyle=!0),g[p]=x??null}),f.push({animation:g})}let v=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(f):Promise.resolve()}function s(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(h=>{var d;return(d=h.animationState)===null||d===void 0?void 0:d.setActive(l,c)}),n[l].isActive=c;const f=a(l);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:a,setActive:s,setAnimateFunction:o,getState:()=>n,reset:()=>{n=bR(),r=!0}}}function bQ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!vU(e,t):!1}function Ys(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bR(){return{animate:Ys(!0),whileInView:Ys(),whileHover:Ys(),whileTap:Ys(),whileDrag:Ys(),whileFocus:Ys(),exit:Ys()}}class Ls{constructor(e){this.isMounted=!1,this.node=e}update(){}}class wQ extends Ls{constructor(e){super(e),e.animationState||(e.animationState=xQ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();T0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let SQ=0;class EQ extends Ls{constructor(){super(...arguments),this.id=SQ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const TQ={animation:{Feature:wQ},exit:{Feature:EQ}},rF=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function P0(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const AQ=t=>e=>rF(e)&&t(e,P0(e));function ra(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function fa(t,e,n,r){return ra(t,e,AQ(n),r)}const wR=(t,e)=>Math.abs(t-e);function MQ(t,e){const n=wR(t.x,e.x),r=wR(t.y,e.y);return Math.sqrt(n**2+r**2)}class iF{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Zx(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,d=MQ(f.offset,{x:0,y:0})>=3;if(!h&&!d)return;const{point:y}=f,{timestamp:v}=or;this.history.push({...y,timestamp:v});const{onStart:g,onMove:p}=this.handlers;h||(g&&g(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Qx(h,this.transformPagePoint),Gt.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:d,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Zx(f.type==="pointercancel"?this.lastMoveEventInfo:Qx(h,this.transformPagePoint),this.history);this.startEvent&&d&&d(f,g),y&&y(f,g)},!rF(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=P0(e),s=Qx(a,this.transformPagePoint),{point:l}=s,{timestamp:c}=or;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,Zx(s,this.history)),this.removeListeners=ua(fa(this.contextWindow,"pointermove",this.handlePointerMove),fa(this.contextWindow,"pointerup",this.handlePointerUp),fa(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ss(this.updatePoint)}}function Qx(t,e){return e?{point:e(t.point)}:t}function SR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Zx({point:t},e){return{point:t,delta:SR(t,oF(e)),offset:SR(t,PQ(e)),velocity:CQ(e,.1)}}function PQ(t){return t[0]}function oF(t){return t[t.length-1]}function CQ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=oF(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>la(e)));)n--;if(!r)return{x:0,y:0};const o=ca(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function aF(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const ER=aF("dragHorizontal"),TR=aF("dragVertical");function sF(t){let e=!1;if(t==="y")e=TR();else if(t==="x")e=ER();else{const n=ER(),r=TR();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function lF(){const t=sF(!0);return t?(t(),!1):!0}function au(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const cF=1e-4,RQ=1-cF,OQ=1+cF,uF=.01,IQ=0-uF,NQ=0+uF;function pi(t){return t.max-t.min}function DQ(t,e,n){return Math.abs(t-e)<=n}function AR(t,e,n,r=.5){t.origin=r,t.originPoint=hn(e.min,e.max,t.origin),t.scale=pi(n)/pi(e),t.translate=hn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=RQ&&t.scale<=OQ||isNaN(t.scale))&&(t.scale=1),(t.translate>=IQ&&t.translate<=NQ||isNaN(t.translate))&&(t.translate=0)}function sd(t,e,n,r){AR(t.x,e.x,n.x,r?r.originX:void 0),AR(t.y,e.y,n.y,r?r.originY:void 0)}function MR(t,e,n){t.min=n.min+e.min,t.max=t.min+pi(e)}function LQ(t,e,n){MR(t.x,e.x,n.x),MR(t.y,e.y,n.y)}function PR(t,e,n){t.min=e.min-n.min,t.max=t.min+pi(e)}function ld(t,e,n){PR(t.x,e.x,n.x),PR(t.y,e.y,n.y)}function kQ(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?hn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?hn(n,t,r.max):Math.min(t,n)),t}function CR(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function jQ(t,{top:e,left:n,bottom:r,right:i}){return{x:CR(t.x,n,i),y:CR(t.y,e,r)}}function RR(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function UQ(t,e){return{x:RR(t.x,e.x),y:RR(t.y,e.y)}}function FQ(t,e){let n=.5;const r=pi(t),i=pi(e);return i>r?n=zu(e.min,e.max-r,t.min):r>i&&(n=zu(t.min,t.max-i,e.min)),Es(0,1,n)}function VQ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const sw=.35;function BQ(t=sw){return t===!1?t=0:t===!0&&(t=sw),{x:OR(t,"left","right"),y:OR(t,"top","bottom")}}function OR(t,e,n){return{min:IR(t,e),max:IR(t,n)}}function IR(t,e){return typeof t=="number"?t:t[e]||0}const NR=()=>({translate:0,scale:1,origin:0,originPoint:0}),su=()=>({x:NR(),y:NR()}),DR=()=>({min:0,max:0}),xn=()=>({x:DR(),y:DR()});function Ei(t){return[t("x"),t("y")]}function fF({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function $Q({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function zQ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Jx(t){return t===void 0||t===1}function lw({scale:t,scaleX:e,scaleY:n}){return!Jx(t)||!Jx(e)||!Jx(n)}function rl(t){return lw(t)||hF(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function hF(t){return LR(t.x)||LR(t.y)}function LR(t){return t&&t!=="0%"}function kv(t,e,n){const r=t-n,i=e*r;return n+i}function kR(t,e,n,r,i){return i!==void 0&&(t=kv(t,i,r)),kv(t,n,r)+e}function cw(t,e=0,n=1,r,i){t.min=kR(t.min,e,n,r,i),t.max=kR(t.max,e,n,r,i)}function dF(t,{x:e,y:n}){cw(t.x,e.translate,e.scale,e.originPoint),cw(t.y,n.translate,n.scale,n.originPoint)}const jR=.999999999999,UR=1.0000000000001;function HQ(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,a;for(let s=0;s<i;s++){o=n[s],a=o.projectionDelta;const{visualElement:l}=o.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&cu(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,dF(t,a)),r&&rl(o.latestValues)&&cu(t,o.latestValues))}e.x<UR&&e.x>jR&&(e.x=1),e.y<UR&&e.y>jR&&(e.y=1)}function lu(t,e){t.min=t.min+e,t.max=t.max+e}function FR(t,e,n,r,i=.5){const o=hn(t.min,t.max,i);cw(t,e,n,o,r)}function cu(t,e){FR(t.x,e.x,e.scaleX,e.scale,e.originX),FR(t.y,e.y,e.scaleY,e.scale,e.originY)}function pF(t,e){return fF(zQ(t.getBoundingClientRect(),e))}function GQ(t,e,n){const r=pF(t,n),{scroll:i}=e;return i&&(lu(r.x,i.offset.x),lu(r.y,i.offset.y)),r}const mF=({current:t})=>t?t.ownerDocument.defaultView:null,WQ=new WeakMap;class qQ{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(P0(u,"page").point)},o=(u,f)=>{const{drag:h,dragPropagation:d,onDragStart:y}=this.getProps();if(h&&!d&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=sF(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ei(g=>{let p=this.getAxisMotionValue(g).get()||0;if(Ao.test(p)){const{projection:x}=this.visualElement;if(x&&x.layout){const _=x.layout.layoutBox[g];_&&(p=pi(_)*(parseFloat(p)/100))}}this.originPoint[g]=p}),y&&Gt.postRender(()=>y(u,f)),ow(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},a=(u,f)=>{const{dragPropagation:h,dragDirectionLock:d,onDirectionLock:y,onDrag:v}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:g}=f;if(d&&this.currentDirection===null){this.currentDirection=XQ(g),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,g),this.updateAxis("y",f.point,g),this.visualElement.render(),v&&v(u,f)},s=(u,f)=>this.stop(u,f),l=()=>Ei(u=>{var f;return this.getAnimationState(u)==="paused"&&((f=this.getAxisMotionValue(u).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new iF(e,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:s,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:mF(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Gt.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!cg(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=kQ(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&au(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=jQ(i.layoutBox,n):this.constraints=!1,this.elastic=BQ(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ei(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=VQ(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!au(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=GQ(r,i.root,this.visualElement.getTransformPagePoint());let a=UQ(i.layout.layoutBox,o);if(n){const s=n($Q(a));this.hasMutatedConstraints=!!s,s&&(a=fF(s))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:s}=this.getProps(),l=this.constraints||{},c=Ei(u=>{if(!cg(u,n,this.currentDirection))return;let f=l&&l[u]||{};a&&(f={min:0,max:0});const h=i?200:1e6,d=i?40:1e7,y={type:"inertia",velocity:r?e[u]:0,bounceStiffness:h,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(s)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return ow(this.visualElement,e),r.start(DT(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ei(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ei(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ei(n=>{const{drag:r}=this.getProps();if(!cg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:s}=i.layout.layoutBox[n];o.set(e[n]-hn(a,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!au(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ei(a=>{const s=this.getAxisMotionValue(a);if(s&&this.constraints!==!1){const l=s.get();i[a]=FQ({min:l,max:l},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ei(a=>{if(!cg(a,e,null))return;const s=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];s.set(hn(l,c,i[a]))})}addListeners(){if(!this.visualElement.current)return;WQ.set(this.visualElement,this);const e=this.visualElement.current,n=fa(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();au(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Gt.read(r);const a=ra(window,"resize",()=>this.scalePositionWithinConstraints()),s=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ei(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:a=sw,dragMomentum:s=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:a,dragMomentum:s}}}function cg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function XQ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class KQ extends Ls{constructor(e){super(e),this.removeGroupControls=Mr,this.removeListeners=Mr,this.controls=new qQ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mr}unmount(){this.removeGroupControls(),this.removeListeners()}}const VR=t=>(e,n)=>{t&&Gt.postRender(()=>t(e,n))};class YQ extends Ls{constructor(){super(...arguments),this.removePointerDownListener=Mr}onPointerDown(e){this.session=new iF(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:mF(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:VR(e),onStart:VR(n),onMove:r,onEnd:(o,a)=>{delete this.session,i&&Gt.postRender(()=>i(o,a))}}}mount(){this.removePointerDownListener=fa(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const C0=V.createContext(null);function QQ(){const t=V.useContext(C0);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=V.useId();V.useEffect(()=>r(i),[]);const o=V.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,o]:[!0]}const FT=V.createContext({}),gF=V.createContext({}),Gg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function BR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Eh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(nt.test(t))t=parseFloat(t);else return t;const n=BR(t,e.target.x),r=BR(t,e.target.y);return`${n}% ${r}%`}},ZQ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Ts.parse(t);if(i.length>5)return r;const o=Ts.createTransformer(t),a=typeof i[0]!="number"?1:0,s=n.x.scale*e.x,l=n.y.scale*e.y;i[0+a]/=s,i[1+a]/=l;const c=hn(s,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),o(i)}},jv={};function JQ(t){Object.assign(jv,t)}const{schedule:VT,cancel:vOe}=yU(queueMicrotask,!1);class eZ extends V.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;JQ(tZ),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Gg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,a=r.projection;return a&&(a.isPresent=o,i||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Gt.postRender(()=>{const s=a.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),VT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function vF(t){const[e,n]=QQ(),r=V.useContext(FT);return S.jsx(eZ,{...t,layoutGroup:r,switchLayoutGroup:V.useContext(gF),isPresent:e,safeToRemove:n})}const tZ={borderRadius:{...Eh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Eh,borderTopRightRadius:Eh,borderBottomLeftRadius:Eh,borderBottomRightRadius:Eh,boxShadow:ZQ},yF=["TopLeft","TopRight","BottomLeft","BottomRight"],nZ=yF.length,$R=t=>typeof t=="string"?parseFloat(t):t,zR=t=>typeof t=="number"||nt.test(t);function rZ(t,e,n,r,i,o){i?(t.opacity=hn(0,n.opacity!==void 0?n.opacity:1,iZ(r)),t.opacityExit=hn(e.opacity!==void 0?e.opacity:1,0,oZ(r))):o&&(t.opacity=hn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<nZ;a++){const s=`border${yF[a]}Radius`;let l=HR(e,s),c=HR(n,s);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||zR(l)===zR(c)?(t[s]=Math.max(hn($R(l),$R(c),r),0),(Ao.test(c)||Ao.test(l))&&(t[s]+="%")):t[s]=c}(e.rotate||n.rotate)&&(t.rotate=hn(e.rotate||0,n.rotate||0,r))}function HR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const iZ=_F(0,.5,TU),oZ=_F(.5,.95,Mr);function _F(t,e,n){return r=>r<t?0:r>e?1:n(zu(t,e,r))}function GR(t,e){t.min=e.min,t.max=e.max}function xi(t,e){GR(t.x,e.x),GR(t.y,e.y)}function WR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function qR(t,e,n,r,i){return t-=e,t=kv(t,1/n,r),i!==void 0&&(t=kv(t,1/i,r)),t}function aZ(t,e=0,n=1,r=.5,i,o=t,a=t){if(Ao.test(e)&&(e=parseFloat(e),e=hn(a.min,a.max,e/100)-a.min),typeof e!="number")return;let s=hn(o.min,o.max,r);t===o&&(s-=e),t.min=qR(t.min,e,n,s,i),t.max=qR(t.max,e,n,s,i)}function XR(t,e,[n,r,i],o,a){aZ(t,e[n],e[r],e[i],e.scale,o,a)}const sZ=["x","scaleX","originX"],lZ=["y","scaleY","originY"];function KR(t,e,n,r){XR(t.x,e,sZ,n?n.x:void 0,r?r.x:void 0),XR(t.y,e,lZ,n?n.y:void 0,r?r.y:void 0)}function YR(t){return t.translate===0&&t.scale===1}function xF(t){return YR(t.x)&&YR(t.y)}function QR(t,e){return t.min===e.min&&t.max===e.max}function cZ(t,e){return QR(t.x,e.x)&&QR(t.y,e.y)}function ZR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function bF(t,e){return ZR(t.x,e.x)&&ZR(t.y,e.y)}function JR(t){return pi(t.x)/pi(t.y)}function eO(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class uZ{constructor(){this.members=[]}add(e){LT(this.members,e),e.scheduleRender()}remove(e){if(kT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function fZ(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||o||a)&&(r=`translate3d(${i}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:h,skewX:d,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),d&&(r+=`skewX(${d}deg) `),y&&(r+=`skewY(${y}deg) `)}const s=t.x.scale*e.x,l=t.y.scale*e.y;return(s!==1||l!==1)&&(r+=`scale(${s}, ${l})`),r||"none"}const hZ=(t,e)=>t.depth-e.depth;class dZ{constructor(){this.children=[],this.isDirty=!1}add(e){LT(this.children,e),this.isDirty=!0}remove(e){kT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(hZ),this.isDirty=!1,this.children.forEach(e)}}function Wg(t){const e=Ar(t)?t.get():t;return iQ(e)?e.toValue():e}function pZ(t,e){const n=Mo.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(Ss(r),t(o-e))};return Gt.read(r,!0),()=>Ss(r)}function mZ(t){return t instanceof SVGElement&&t.tagName!=="svg"}function gZ(t,e,n){const r=Ar(t)?t:Hd(t);return r.start(DT("",r,e,n)),r.animation}const il={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},zh=typeof window<"u"&&window.MotionDebug!==void 0,eb=["","X","Y","Z"],vZ={visibility:"hidden"},tO=1e3;let yZ=0;function tb(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function wF(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=eF(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Gt,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&wF(r)}function SF({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},s=e==null?void 0:e()){this.id=yZ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,zh&&(il.totalNodes=il.resolvedTargetDeltas=il.recalculatedProjection=0),this.nodes.forEach(bZ),this.nodes.forEach(AZ),this.nodes.forEach(MZ),this.nodes.forEach(wZ),zh&&window.MotionDebug.record(il)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new dZ)}addEventListener(a,s){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new jT),this.eventHandlers.get(a).add(s)}notifyListeners(a,...s){const l=this.eventHandlers.get(a);l&&l.notify(...s)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,s=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=mZ(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),s&&(c||l)&&(this.isLayoutDirty=!0),t){let f;const h=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=pZ(h,250),Gg.hasAnimatedSinceResize&&(Gg.hasAnimatedSinceResize=!1,this.nodes.forEach(rO))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:d,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||IZ,{onLayoutAnimationStart:g,onLayoutAnimationComplete:p}=u.getProps(),x=!this.targetLayout||!bF(this.targetLayout,y)||d,_=!h&&d;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,_);const T={...xT(v,"layout"),onPlay:g,onComplete:p};(u.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else h||rO(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ss(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(PZ),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&wF(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:s,layout:l}=this.options;if(s===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nO);return}this.isUpdating||this.nodes.forEach(EZ),this.isUpdating=!1,this.nodes.forEach(TZ),this.nodes.forEach(_Z),this.nodes.forEach(xZ),this.clearAllSnapshots();const s=Mo.now();or.delta=Es(0,1e3/60,s-or.timestamp),or.timestamp=s,or.isProcessing=!0,Wx.update.process(or),Wx.preRender.process(or),Wx.render.process(or),or.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,VT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(SZ),this.sharedNodes.forEach(CZ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let s=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(s=!1),s){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,s=this.projectionDelta&&!xF(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;a&&(s||rl(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const s=this.measurePageBox();let l=this.removeElementScroll(s);return a&&(l=this.removeTransform(l)),NZ(l),{animationId:this.root.animationId,measuredBox:s,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:s}=this.options;if(!s)return xn();const l=s.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(DZ))){const{scroll:u}=this.root;u&&(lu(l.x,u.offset.x),lu(l.y,u.offset.y))}return l}removeElementScroll(a){var s;const l=xn();if(xi(l,a),!((s=this.scroll)===null||s===void 0)&&s.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:h}=u;u!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&xi(l,a),lu(l.x,f.offset.x),lu(l.y,f.offset.y))}return l}applyTransform(a,s=!1){const l=xn();xi(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];!s&&u.options.layoutScroll&&u.scroll&&u!==u.root&&cu(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),rl(u.latestValues)&&cu(l,u.latestValues)}return rl(this.latestValues)&&cu(l,this.latestValues),l}removeTransform(a){const s=xn();xi(s,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!rl(c.latestValues))continue;lw(c.latestValues)&&c.updateSnapshot();const u=xn(),f=c.measurePageBox();xi(u,f),KR(s,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return rl(this.latestValues)&&KR(s,this.latestValues),s}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==or.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var s;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=or.timestamp,!this.targetDelta&&!this.relativeTarget){const d=this.getClosestProjectingParent();d&&d.layout&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xn(),this.relativeTargetOrigin=xn(),ld(this.relativeTargetOrigin,this.layout.layoutBox,d.layout.layoutBox),xi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=xn(),this.targetWithTransforms=xn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),LQ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xi(this.target,this.layout.layoutBox),dF(this.target,this.targetDelta)):xi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const d=this.getClosestProjectingParent();d&&!!d.resumingFrom==!!this.resumingFrom&&!d.options.layoutScroll&&d.target&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xn(),this.relativeTargetOrigin=xn(),ld(this.relativeTargetOrigin,this.target,d.target),xi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}zh&&il.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||lw(this.parent.latestValues)||hF(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const s=this.getLead(),l=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===or.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;xi(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,d=this.treeScale.y;HQ(this.layoutCorrected,this.treeScale,this.path,l),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=xn());const{target:y}=s;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(WR(this.prevProjectionDelta.x,this.projectionDelta.x),WR(this.prevProjectionDelta.y,this.projectionDelta.y)),sd(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==d||!eO(this.projectionDelta.x,this.prevProjectionDelta.x)||!eO(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),zh&&il.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var s;if((s=this.options.visualElement)===null||s===void 0||s.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=su(),this.projectionDelta=su(),this.projectionDeltaWithTransform=su()}setAnimationOrigin(a,s=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=su();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const h=xn(),d=l?l.source:void 0,y=this.layout?this.layout.source:void 0,v=d!==y,g=this.getStack(),p=!g||g.members.length<=1,x=!!(v&&!p&&this.options.crossfade===!0&&!this.path.some(OZ));this.animationProgress=0;let _;this.mixTargetDelta=T=>{const w=T/1e3;iO(f.x,a.x,w),iO(f.y,a.y,w),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ld(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),RZ(this.relativeTarget,this.relativeTargetOrigin,h,w),_&&cZ(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=xn()),xi(_,this.relativeTarget)),v&&(this.animationValues=u,rZ(u,c,this.latestValues,w,x,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ss(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gt.update(()=>{Gg.hasAnimatedSinceResize=!0,this.currentAnimation=gZ(0,tO,{...a,onUpdate:s=>{this.mixTargetDelta(s),a.onUpdate&&a.onUpdate(s)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:s,target:l,layout:c,latestValues:u}=a;if(!(!s||!l||!c)){if(this!==a&&this.layout&&c&&EF(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||xn();const f=pi(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+f;const h=pi(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+h}xi(s,l),cu(s,u),sd(this.projectionDeltaWithTransform,this.layoutCorrected,s,u)}}registerSharedNode(a,s){this.sharedNodes.has(a)||this.sharedNodes.set(a,new uZ),this.sharedNodes.get(a).add(s);const c=s.options.initialPromotionConfig;s.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(s):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:s}=this.options;return s?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:s}=this.options;return s?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:s,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let s=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(s=!0),!s)return;const c={};l.z&&tb("z",a,c,this.animationValues);for(let u=0;u<eb.length;u++)tb(`rotate${eb[u]}`,a,c,this.animationValues),tb(`skew${eb[u]}`,a,c,this.animationValues);a.render();for(const u in c)a.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);a.scheduleRender()}getProjectionStyles(a){var s,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return vZ;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Wg(a==null?void 0:a.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=Wg(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!rl(this.latestValues)&&(v.transform=u?u({},""):"none",this.hasProjected=!1),v}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=fZ(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x:d,y}=this.projectionDelta;c.transformOrigin=`${d.origin*100}% ${y.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(s=h.opacity)!==null&&s!==void 0?s:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const v in jv){if(h[v]===void 0)continue;const{correct:g,applyTo:p}=jv[v],x=c.transform==="none"?h[v]:g(h[v],f);if(p){const _=p.length;for(let T=0;T<_;T++)c[p[T]]=x}else c[v]=x}return this.options.layoutId&&(c.pointerEvents=f===this?Wg(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var s;return(s=a.currentAnimation)===null||s===void 0?void 0:s.stop()}),this.root.nodes.forEach(nO),this.root.sharedNodes.clear()}}}function _Z(t){t.updateLayout()}function xZ(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?Ei(f=>{const h=a?n.measuredBox[f]:n.layoutBox[f],d=pi(h);h.min=r[f].min,h.max=h.min+d}):EF(o,n.layoutBox,r)&&Ei(f=>{const h=a?n.measuredBox[f]:n.layoutBox[f],d=pi(r[f]);h.max=h.min+d,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+d)});const s=su();sd(s,r,n.layoutBox);const l=su();a?sd(l,t.applyTransform(i,!0),n.measuredBox):sd(l,r,n.layoutBox);const c=!xF(s);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:d}=f;if(h&&d){const y=xn();ld(y,n.layoutBox,h.layoutBox);const v=xn();ld(v,r,d.layoutBox),bF(y,v)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=y,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:s,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function bZ(t){zh&&il.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function wZ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function SZ(t){t.clearSnapshot()}function nO(t){t.clearMeasurements()}function EZ(t){t.isLayoutDirty=!1}function TZ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function rO(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function AZ(t){t.resolveTargetDelta()}function MZ(t){t.calcProjection()}function PZ(t){t.resetSkewAndRotation()}function CZ(t){t.removeLeadSnapshot()}function iO(t,e,n){t.translate=hn(e.translate,0,n),t.scale=hn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function oO(t,e,n,r){t.min=hn(e.min,n.min,r),t.max=hn(e.max,n.max,r)}function RZ(t,e,n,r){oO(t.x,e.x,n.x,r),oO(t.y,e.y,n.y,r)}function OZ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const IZ={duration:.45,ease:[.4,0,.1,1]},aO=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),sO=aO("applewebkit/")&&!aO("chrome/")?Math.round:Mr;function lO(t){t.min=sO(t.min),t.max=sO(t.max)}function NZ(t){lO(t.x),lO(t.y)}function EF(t,e,n){return t==="position"||t==="preserve-aspect"&&!DQ(JR(e),JR(n),.2)}function DZ(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const LZ=SF({attachResizeListener:(t,e)=>ra(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nb={current:void 0},TF=SF({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!nb.current){const t=new LZ({});t.mount(window),t.setOptions({layoutScroll:!0}),nb.current=t}return nb.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),kZ={pan:{Feature:YQ},drag:{Feature:KQ,ProjectionNode:TF,MeasureLayout:vF}};function cO(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(o,a)=>{if(o.pointerType==="touch"||lF())return;const s=t.getProps();t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",e);const l=s[r];l&&Gt.postRender(()=>l(o,a))};return fa(t.current,n,i,{passive:!t.getProps()[r]})}class jZ extends Ls{mount(){this.unmount=ua(cO(this.node,!0),cO(this.node,!1))}unmount(){}}class UZ extends Ls{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ua(ra(this.node.current,"focus",()=>this.onFocus()),ra(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const AF=(t,e)=>e?t===e?!0:AF(t,e.parentElement):!1;function rb(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,P0(n))}class FZ extends Ls{constructor(){super(...arguments),this.removeStartListeners=Mr,this.removeEndListeners=Mr,this.removeAccessibleListeners=Mr,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),o=fa(window,"pointerup",(s,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:f}=this.node.getProps(),h=!f&&!AF(this.node.current,s.target)?u:c;h&&Gt.update(()=>h(s,l))},{passive:!(r.onTap||r.onPointerUp)}),a=fa(window,"pointercancel",(s,l)=>this.cancelPress(s,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ua(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=s=>{s.key!=="Enter"||!this.checkPressEnd()||rb("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&Gt.postRender(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=ra(this.node.current,"keyup",a),rb("down",(s,l)=>{this.startPress(s,l)})},n=ra(this.node.current,"keydown",e),r=()=>{this.isPressing&&rb("cancel",(o,a)=>this.cancelPress(o,a))},i=ra(this.node.current,"blur",r);this.removeAccessibleListeners=ua(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Gt.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!lF()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Gt.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=fa(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=ra(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ua(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const uw=new WeakMap,ib=new WeakMap,VZ=t=>{const e=uw.get(t.target);e&&e(t)},BZ=t=>{t.forEach(VZ)};function $Z({root:t,...e}){const n=t||document;ib.has(n)||ib.set(n,{});const r=ib.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(BZ,{root:t,...e})),r[i]}function zZ(t,e,n){const r=$Z(e);return uw.set(t,n),r.observe(t),()=>{uw.delete(t),r.unobserve(t)}}const HZ={some:0,all:1};class GZ extends Ls{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:HZ[i]},s=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,o&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),h=c?u:f;h&&h(l)};return zZ(this.node.current,a,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(WZ(e,n))&&this.startObserver()}unmount(){}}function WZ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const qZ={inView:{Feature:GZ},tap:{Feature:FZ},focus:{Feature:UZ},hover:{Feature:jZ}},XZ={layout:{ProjectionNode:TF,MeasureLayout:vF}},BT=V.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),R0=V.createContext({}),$T=typeof window<"u",MF=$T?V.useLayoutEffect:V.useEffect,PF=V.createContext({strict:!1});function KZ(t,e,n,r,i){var o,a;const{visualElement:s}=V.useContext(R0),l=V.useContext(PF),c=V.useContext(C0),u=V.useContext(BT).reducedMotion,f=V.useRef();r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:s,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=f.current,d=V.useContext(gF);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&YZ(f.current,n,i,d);const y=V.useRef(!1);V.useInsertionEffect(()=>{h&&y.current&&h.update(n,c)});const v=n[JU],g=V.useRef(!!v&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,v))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,v)));return MF(()=>{h&&(y.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),VT.render(h.render),g.current&&h.animationState&&h.animationState.animateChanges())}),V.useEffect(()=>{h&&(!g.current&&h.animationState&&h.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var p;(p=window.MotionHandoffMarkAsComplete)===null||p===void 0||p.call(window,v)}),g.current=!1))}),h}function YZ(t,e,n,r){const{layoutId:i,layout:o,drag:a,dragConstraints:s,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:CF(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!a||s&&au(s),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function CF(t){if(t)return t.options.allowProjection!==!1?t.projection:CF(t.parent)}function QZ(t,e,n){return V.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):au(n)&&(n.current=r))},[e])}function O0(t){return T0(t.animate)||_T.some(e=>Bd(t[e]))}function RF(t){return!!(O0(t)||t.variants)}function ZZ(t,e){if(O0(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Bd(n)?n:void 0,animate:Bd(r)?r:void 0}}return t.inherit!==!1?e:{}}function JZ(t){const{initial:e,animate:n}=ZZ(t,V.useContext(R0));return V.useMemo(()=>({initial:e,animate:n}),[uO(e),uO(n)])}function uO(t){return Array.isArray(t)?t.join(" "):t}const fO={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Hu={};for(const t in fO)Hu[t]={isEnabled:e=>fO[t].some(n=>!!e[n])};function eJ(t){for(const e in t)Hu[e]={...Hu[e],...t[e]}}const tJ=Symbol.for("motionComponentSymbol");function nJ({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&eJ(t);function o(s,l){let c;const u={...V.useContext(BT),...s,layoutId:rJ(s)},{isStatic:f}=u,h=JZ(s),d=r(s,f);if(!f&&$T){iJ();const y=oJ(u);c=y.MeasureLayout,h.visualElement=KZ(i,d,u,e,y.ProjectionNode)}return S.jsxs(R0.Provider,{value:h,children:[c&&h.visualElement?S.jsx(c,{visualElement:h.visualElement,...u}):null,n(i,s,QZ(d,h.visualElement,l),d,f,h.visualElement)]})}const a=V.forwardRef(o);return a[tJ]=i,a}function rJ({layoutId:t}){const e=V.useContext(FT).id;return e&&t!==void 0?e+"-"+t:t}function iJ(t,e){V.useContext(PF).strict}function oJ(t){const{drag:e,layout:n}=Hu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const aJ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function zT(t){return typeof t!="string"||t.includes("-")?!1:!!(aJ.indexOf(t)>-1||/[A-Z]/u.test(t))}function OF(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const IF=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function NF(t,e,n,r){OF(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(IF.has(i)?i:UT(i),e.attrs[i])}function DF(t,{layout:e,layoutId:n}){return Zl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!jv[t]||t==="opacity")}function HT(t,e,n){var r;const{style:i}=t,o={};for(const a in i)(Ar(i[a])||e.style&&Ar(e.style[a])||DF(a,t)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[a]=i[a]);return o}function LF(t,e,n){const r=HT(t,e,n);for(const i in t)if(Ar(t[i])||Ar(e[i])){const o=Hp.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}function GT(t){const e=V.useRef(null);return e.current===null&&(e.current=t()),e.current}function sJ({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,o){const a={latestValues:lJ(r,i,o,t),renderState:e()};return n&&(a.mount=s=>n(r,s,a)),a}const kF=t=>(e,n)=>{const r=V.useContext(R0),i=V.useContext(C0),o=()=>sJ(t,e,r,i);return n?o():GT(o)};function lJ(t,e,n,r){const i={},o=r(t,{});for(const h in o)i[h]=Wg(o[h]);let{initial:a,animate:s}=t;const l=O0(t),c=RF(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),s===void 0&&(s=e.animate));let u=n?n.initial===!1:!1;u=u||a===!1;const f=u?s:a;if(f&&typeof f!="boolean"&&!T0(f)){const h=Array.isArray(f)?f:[f];for(let d=0;d<h.length;d++){const y=vT(t,h[d]);if(y){const{transitionEnd:v,transition:g,...p}=y;for(const x in p){let _=p[x];if(Array.isArray(_)){const T=u?_.length-1:0;_=_[T]}_!==null&&(i[x]=_)}for(const x in v)i[x]=v[x]}}}return i}const WT=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),jF=()=>({...WT(),attrs:{}}),UF=(t,e)=>e&&typeof t=="number"?e.transform(t):t,cJ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},uJ=Hp.length;function fJ(t,e,n){let r="",i=!0;for(let o=0;o<uJ;o++){const a=Hp[o],s=t[a];if(s===void 0)continue;let l=!0;if(typeof s=="number"?l=s===(a.startsWith("scale")?1:0):l=parseFloat(s)===0,!l||n){const c=UF(s,MT[a]);if(!l){i=!1;const u=cJ[a]||a;r+=`${u}(${c}) `}n&&(e[a]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function qT(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let a=!1,s=!1;for(const l in e){const c=e[l];if(Zl.has(l)){a=!0;continue}else if(RU(l)){i[l]=c;continue}else{const u=UF(c,MT[l]);l.startsWith("origin")?(s=!0,o[l]=u):r[l]=u}}if(e.transform||(a||n?r.transform=fJ(e,t.transform,n):r.transform&&(r.transform="none")),s){const{originX:l="50%",originY:c="50%",originZ:u=0}=o;r.transformOrigin=`${l} ${c} ${u}`}}function hO(t,e,n){return typeof t=="string"?t:nt.transform(e+n*t)}function hJ(t,e,n){const r=hO(e,t.x,t.width),i=hO(n,t.y,t.height);return`${r} ${i}`}const dJ={offset:"stroke-dashoffset",array:"stroke-dasharray"},pJ={offset:"strokeDashoffset",array:"strokeDasharray"};function mJ(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?dJ:pJ;t[o.offset]=nt.transform(-r);const a=nt.transform(e),s=nt.transform(n);t[o.array]=`${a} ${s}`}function XT(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:o,pathLength:a,pathSpacing:s=1,pathOffset:l=0,...c},u,f){if(qT(t,c,f),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:d,dimensions:y}=t;h.transform&&(y&&(d.transform=h.transform),delete h.transform),y&&(i!==void 0||o!==void 0||d.transform)&&(d.transformOrigin=hJ(y,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),a!==void 0&&mJ(h,a,s,l,!1)}const KT=t=>typeof t=="string"&&t.toLowerCase()==="svg",gJ={useVisualState:kF({scrapeMotionValuesFromProps:LF,createRenderState:jF,onMount:(t,e,{renderState:n,latestValues:r})=>{Gt.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Gt.render(()=>{XT(n,r,KT(e.tagName),t.transformTemplate),NF(e,n)})}})},vJ={useVisualState:kF({scrapeMotionValuesFromProps:HT,createRenderState:WT})};function FF(t,e,n){for(const r in e)!Ar(e[r])&&!DF(r,n)&&(t[r]=e[r])}function yJ({transformTemplate:t},e){return V.useMemo(()=>{const n=WT();return qT(n,e,t),Object.assign({},n.vars,n.style)},[e])}function _J(t,e){const n=t.style||{},r={};return FF(r,n,t),Object.assign(r,yJ(t,e)),r}function xJ(t,e){const n={},r=_J(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const bJ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Uv(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||bJ.has(t)}let VF=t=>!Uv(t);function wJ(t){t&&(VF=e=>e.startsWith("on")?!Uv(e):t(e))}try{wJ(require("@emotion/is-prop-valid").default)}catch{}function SJ(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(VF(i)||n===!0&&Uv(i)||!e&&!Uv(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function EJ(t,e,n,r){const i=V.useMemo(()=>{const o=jF();return XT(o,e,KT(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};FF(o,t.style,t),i.style={...o,...i.style}}return i}function TJ(t=!1){return(n,r,i,{latestValues:o},a)=>{const l=(zT(n)?EJ:xJ)(r,o,a,n),c=SJ(r,typeof n=="string",t),u=n!==V.Fragment?{...c,...l,ref:i}:{},{children:f}=r,h=V.useMemo(()=>Ar(f)?f.get():f,[f]);return V.createElement(n,{...u,children:h})}}function AJ(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...zT(r)?gJ:vJ,preloadedFeatures:t,useRender:TJ(i),createVisualElement:e,Component:r};return nJ(a)}}const fw={current:null},BF={current:!1};function MJ(){if(BF.current=!0,!!$T)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>fw.current=t.matches;t.addListener(e),e()}else fw.current=!1}function PJ(t,e,n){for(const r in e){const i=e[r],o=n[r];if(Ar(i))t.addValue(r,i);else if(Ar(o))t.addValue(r,Hd(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,Hd(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const dO=new WeakMap,CJ=[...NU,_r,Ts],RJ=t=>CJ.find(IU(t)),pO=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class OJ{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:a},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ET,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Mo.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Gt.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.blockInitialAnimation=!!o,this.isControllingVariants=O0(n),this.isVariantNode=RF(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const d=f[h];l[h]!==void 0&&Ar(d)&&d.set(l[h],!1)}}mount(e){this.current=e,dO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),BF.current||MJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:fw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){dO.delete(this.current),this.projection&&this.projection.unmount(),Ss(this.notifyUpdate),Ss(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Zl.has(e),i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&Gt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Hu){const n=Hu[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<pO.length;r++){const i=pO[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,a=e[o];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=PJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Hd(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(PU(i)||MU(i))?i=parseFloat(i):!RJ(i)&&Ts.test(n)&&(i=BU(e,n)),this.setBaseTarget(e,Ar(i)?i.get():i)),Ar(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=vT(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Ar(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new jT),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class $F extends OJ{constructor(){super(...arguments),this.KeyframeResolver=$U}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function IJ(t){return window.getComputedStyle(t)}class NJ extends $F{constructor(){super(...arguments),this.type="html",this.renderInstance=OF}readValueFromInstance(e,n){if(Zl.has(n)){const r=PT(n);return r&&r.default||0}else{const r=IJ(e),i=(RU(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return pF(e,n)}build(e,n,r){qT(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return HT(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ar(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class DJ extends $F{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Zl.has(n)){const r=PT(n);return r&&r.default||0}return n=IF.has(n)?n:UT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return LF(e,n,r)}build(e,n,r){XT(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){NF(e,n,r,i)}mount(e){this.isSVGTag=KT(e.tagName),super.mount(e)}}const LJ=(t,e)=>zT(t)?new DJ(e):new NJ(e,{allowProjection:t!==V.Fragment}),kJ=AJ({...TQ,...qZ,...kZ,...XZ},LJ),jt=gK(kJ);class jJ extends V.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function UJ({children:t,isPresent:e}){const n=V.useId(),r=V.useRef(null),i=V.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=V.useContext(BT);return V.useInsertionEffect(()=>{const{width:a,height:s,top:l,left:c}=i.current;if(e||!r.current||!a||!s)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return o&&(u.nonce=o),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${s}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),S.jsx(jJ,{isPresent:e,childRef:r,sizeRef:i,children:V.cloneElement(t,{ref:r})})}const FJ=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:a})=>{const s=GT(VJ),l=V.useId(),c=V.useCallback(f=>{s.set(f,!0);for(const h of s.values())if(!h)return;r&&r()},[s,r]),u=V.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:f=>(s.set(f,!1),()=>s.delete(f))}),o?[Math.random(),c]:[n,c]);return V.useMemo(()=>{s.forEach((f,h)=>s.set(h,!1))},[n]),V.useEffect(()=>{!n&&!s.size&&r&&r()},[n]),a==="popLayout"&&(t=S.jsx(UJ,{isPresent:n,children:t})),S.jsx(C0.Provider,{value:u,children:t})};function VJ(){return new Map}const ug=t=>t.key||"";function mO(t){const e=[];return V.Children.forEach(t,n=>{V.isValidElement(n)&&e.push(n)}),e}const Fv=({children:t,exitBeforeEnter:e,custom:n,initial:r=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const s=V.useMemo(()=>mO(t),[t]),l=s.map(ug),c=V.useRef(!0),u=V.useRef(s),f=GT(()=>new Map),[h,d]=V.useState(s),[y,v]=V.useState(s);MF(()=>{c.current=!1,u.current=s;for(let x=0;x<y.length;x++){const _=ug(y[x]);l.includes(_)?f.delete(_):f.get(_)!==!0&&f.set(_,!1)}},[y,l.length,l.join("-")]);const g=[];if(s!==h){let x=[...s];for(let _=0;_<y.length;_++){const T=y[_],w=ug(T);l.includes(w)||(x.splice(_,0,T),g.push(T))}a==="wait"&&g.length&&(x=g),v(mO(x)),d(s);return}const{forceRender:p}=V.useContext(FT);return S.jsx(S.Fragment,{children:y.map(x=>{const _=ug(x),T=s===y||l.includes(_),w=()=>{if(f.has(_))f.set(_,!0);else return;let M=!0;f.forEach(b=>{b||(M=!1)}),M&&(p==null||p(),v(u.current),i&&i())};return S.jsx(FJ,{isPresent:T,initial:!c.current||r?void 0:!1,custom:T?void 0:n,presenceAffectsLayout:o,mode:a,onExitComplete:T?void 0:w,children:x},_)})})};var BJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const $J=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zJ=(t,e)=>{const n=V.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,children:s,...l},c)=>V.createElement("svg",{ref:c,...BJ,width:i,height:i,stroke:r,strokeWidth:a?Number(o)*24/Number(i):o,className:`lucide lucide-${$J(t)}`,...l},[...e.map(([u,f])=>V.createElement(u,f)),...(Array.isArray(s)?s:[s])||[]]));return n.displayName=`${t}`,n};var Tt=zJ;const Bl=Tt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),qp=Tt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),HJ=Tt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),GJ=Tt("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),WJ=Tt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),qJ=Tt("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),YT=Tt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Vv=Tt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),uu=Tt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),qg=Tt("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),Fc=Tt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),gO=Tt("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]),Vc=Tt("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]),Xg=Tt("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),XJ=Tt("Globe2",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3v0a2 2 0 0 1 2 2v0c0 1.1.9 2 2 2v0a2 2 0 0 0 2-2v0c0-1.1.9-2 2-2h3.17",key:"1fi5u6"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2v0a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"xsiumc"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Gd=Tt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),zF=Tt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),KJ=Tt("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]),YJ=Tt("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),QJ=Tt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),HF=Tt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),ZJ=Tt("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),JJ=Tt("Mouse",[["rect",{x:"5",y:"2",width:"14",height:"20",rx:"7",key:"11ol66"}],["path",{d:"M12 6v4",key:"16clxf"}]]),eee=Tt("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),GF=Tt("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),tee=Tt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),nee=Tt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),ree=Tt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),hw=Tt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),vl=Tt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),iee=Tt("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),oee=Tt("Touchpad",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"M2 14h20",key:"myj16y"}],["path",{d:"M12 20v-6",key:"1rm09r"}]]),WF=Tt("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]),aee=Tt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),dw=Tt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),QT=Tt("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]),ho=Tt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),see=({onPause:t,isPlaying:e})=>{const n=[{icon:JJ,text:"Arrastrar",color:"from-blue-500/30 to-cyan-500/30"},{icon:oee,text:"Seleccionar",color:"from-purple-500/30 to-pink-500/30"},{icon:QJ,text:"Acercar",color:"from-green-500/30 to-emerald-500/30"},{icon:ZJ,text:"Alejar",color:"from-orange-500/30 to-red-500/30"}];return S.jsx("div",{className:"fixed inset-x-0 bottom-22 flex justify-center items-center",children:S.jsx(jt.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:260,damping:20},className:"w-auto",children:S.jsxs(jt.div,{className:"bg-gradient-to-t from-black/95 via-black/90 to-black/80 backdrop-blur-lg rounded-2xl p-3 shadow-lg border border-white/10 relative overflow-hidden min-w-[240px]",whileHover:{scale:1.02},transition:{type:"spring",stiffness:400,damping:30},children:[S.jsx("div",{className:"absolute -top-4 -left-4 w-24 h-24 bg-blue-500/10 rounded-full blur-2xl"}),S.jsx("div",{className:"absolute -bottom-4 -right-4 w-24 h-24 bg-purple-500/10 rounded-full blur-2xl"}),S.jsx("div",{className:"flex justify-center mb-3",children:S.jsxs(jt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(),className:"p-2 rounded-full bg-gradient-to-br from-white to-gray-200 hover:from-gray-100 hover:to-gray-300 transition-all text-black shadow-lg relative group",title:e?"Pausar":"Reproducir",children:[S.jsx("div",{className:"absolute inset-0 rounded-full bg-white/30 blur-md group-hover:blur-lg transition-all"}),S.jsx(jt.div,{className:"relative",animate:{rotate:e?0:360},transition:{duration:.5},children:e?S.jsx(eee,{size:15}):S.jsx(tee,{size:15})})]})}),S.jsx("div",{className:"grid grid-cols-4 gap-2 px-2",children:S.jsx(Fv,{children:n.map((r,i)=>S.jsxs(jt.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{delay:i*.1,type:"spring",stiffness:200,damping:20},className:"flex flex-col items-center gap-1 group bg-black/20 rounded-lg p-1.5 hover:bg-black/30 transition-colors",whileHover:{scale:1.02},children:[S.jsx(jt.div,{className:`p-1.5 rounded-md bg-gradient-to-br ${r.color} group-hover:shadow-sm transition-all duration-300 flex-shrink-0`,whileHover:{rotate:[0,-10,10,0]},transition:{duration:.5},children:S.jsx(r.icon,{size:10,className:"text-white"})}),S.jsx("span",{className:"text-xs text-white/90 font-medium text-center",children:r.text})]},r.text))})})]})})})},lee="/EmissionsPage/assets/logo-uni-C7alZO-b.png",cee=({isMobile:t})=>{const[e,n]=V.useState(!1);return V.useEffect(()=>{const r=()=>{n(window.scrollY>20)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]),S.jsxs("header",{className:`
        fixed top-0 w-full z-50
        transition-all duration-500 ease-in-out
        ${e?"bg-white/10":"bg-transparent"}
        backdrop-blur-md
      `,children:[S.jsxs("div",{className:`
        max-w-7xl mx-auto
        ${t?"px-4 py-2":"px-8 py-4"}
        flex ${t?"flex-col":"flex-row"}
        items-center gap-4
      `,children:[S.jsxs("div",{className:`
          flex-grow
          ${t?"order-2":"order-1"}
        `,children:[S.jsx("h1",{className:`
            font-['Exo_2'] font-light
            ${t?"text-lg":"text-2xl md:text-3xl"}
            text-white
            transition-all duration-500
            animate-slide-up-fade
          `,children:S.jsx("span",{className:"inline-block animate-fade-in opacity-0 [animation-delay:200ms]",children:"EMISIONES DE CARBONO GLOBALES"})}),S.jsxs("p",{className:`
            mt-2 font-['Exo_2'] 
            ${t?"text-xs":"text-sm md:text-base"}
            text-zinc-300/90
            animate-fade-in opacity-0 [animation-delay:600ms]
          `,children:["Modelado Predictivo de Emisiones de Carbono:",S.jsxs("span",{className:"hidden sm:inline",children:[" ","Enfoque Comparativo entre Sectores Empresariales y Públicos"]})]})]}),S.jsx("div",{className:`
          flex-shrink-0
          ${t?"order-1 -mb-2":"order-2 ml-4"}
        `,children:S.jsx("img",{src:lee,alt:"Logo Universidad",className:`
              object-contain
              transition-all duration-500
              ${t?"h-16":"h-20 md:h-24"}
              animate-fade-in opacity-0 [animation-delay:800ms]
              hover:scale-102
            `})})]}),S.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px",children:S.jsx("div",{className:`\r
          h-full mx-auto\r
          bg-gradient-radial from-white/20 to-transparent\r
          animate-gradient\r
        `})})]})},uee=({isMobile:t})=>{const[e,n]=V.useState(!1),r=["Luis Angel Cordova Gil","Jose Lopez Mercado","Raul Romo Alonso"];return S.jsxs(S.Fragment,{children:[S.jsxs(jt.button,{onClick:()=>n(!e),className:`
          fixed z-50 bottom-4 right-4 md:bottom-8 md:right-8
          flex items-center gap-2 px-4 py-3
          bg-gradient-to-r from-indigo-500/90 to-purple-600/90
          hover:from-indigo-500 hover:to-purple-600
          rounded-xl shadow-lg backdrop-blur-sm
          border border-white/10 transition-all duration-300
          text-white group
        `,whileHover:{scale:1.05},whileTap:{scale:.95},children:[S.jsx(dw,{className:"w-6 h-6"}),S.jsx("span",{className:"text-sm font-medium",children:"Equipo 25-1"}),S.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),S.jsxs("div",{className:"absolute -top-1 -right-1 w-3 h-3",children:[S.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-purple-400 opacity-75 animate-ping"}),S.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-purple-500"})]})]}),S.jsx(Fv,{children:e&&S.jsxs(jt.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:`
              fixed z-40 
              ${t?"bottom-20 right-4 left-4":"bottom-24 right-8 max-w-sm"}
              bg-gradient-to-br from-zinc-900/95 to-black/95 
              backdrop-blur-md rounded-2xl p-4 sm:p-6
              shadow-2xl border border-zinc-800/50
              transition-all duration-300 ease-in-out
            `,children:[S.jsx("div",{className:"absolute -top-3 -left-3 w-16 h-16 bg-blue-500 rounded-2xl -z-10 blur-2xl opacity-20"}),S.jsx("div",{className:"absolute -bottom-3 -right-3 w-16 h-16 bg-purple-500 rounded-2xl -z-10 blur-2xl opacity-20"}),S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[S.jsx(dw,{className:`${t?"w-5 h-5":"w-6 h-6"} text-blue-400`}),S.jsx("h2",{className:`
                  font-['Exo'] font-thin tracking-widest text-white
                  ${t?"text-xl":"text-2xl sm:text-3xl"}
                `,children:"Equipo 25-1-0015"})]}),S.jsx("button",{onClick:()=>n(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors duration-200",children:S.jsx(ho,{className:"w-5 h-5 text-zinc-400"})})]}),S.jsx("ul",{className:`space-y-2 ${t?"text-sm":"text-base"}`,children:r.map((i,o)=>S.jsxs(jt.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.1},className:`
                    p-2 sm:p-3 
                    hover:bg-white/5 rounded-xl 
                    transition-all duration-300 
                    font-['Exo'] text-zinc-300 tracking-wider 
                    cursor-pointer group relative overflow-hidden
                  `,children:[S.jsx("div",{className:`\r
                    absolute inset-0 \r
                    bg-gradient-to-r from-blue-500/10 to-purple-500/10 \r
                    translate-x-[-100%] group-hover:translate-x-0 \r
                    transition-transform duration-300\r
                  `}),S.jsx("span",{className:"relative",children:i})]},i))})]})})]})};function qF(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=qF(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function _t(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=qF(t))&&(r&&(r+=" "),r+=e);return r}var fee=Array.isArray,Zr=fee,hee=typeof ym=="object"&&ym&&ym.Object===Object&&ym,XF=hee,dee=XF,pee=typeof self=="object"&&self&&self.Object===Object&&self,mee=dee||pee||Function("return this")(),Uo=mee,gee=Uo,vee=gee.Symbol,Xp=vee,vO=Xp,KF=Object.prototype,yee=KF.hasOwnProperty,_ee=KF.toString,Th=vO?vO.toStringTag:void 0;function xee(t){var e=yee.call(t,Th),n=t[Th];try{t[Th]=void 0;var r=!0}catch{}var i=_ee.call(t);return r&&(e?t[Th]=n:delete t[Th]),i}var bee=xee,wee=Object.prototype,See=wee.toString;function Eee(t){return See.call(t)}var Tee=Eee,yO=Xp,Aee=bee,Mee=Tee,Pee="[object Null]",Cee="[object Undefined]",_O=yO?yO.toStringTag:void 0;function Ree(t){return t==null?t===void 0?Cee:Pee:_O&&_O in Object(t)?Aee(t):Mee(t)}var Ca=Ree;function Oee(t){return t!=null&&typeof t=="object"}var Ra=Oee,Iee=Ca,Nee=Ra,Dee="[object Symbol]";function Lee(t){return typeof t=="symbol"||Nee(t)&&Iee(t)==Dee}var Df=Lee,kee=Zr,jee=Df,Uee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fee=/^\w*$/;function Vee(t,e){if(kee(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||jee(t)?!0:Fee.test(t)||!Uee.test(t)||e!=null&&t in Object(e)}var ZT=Vee;function Bee(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ks=Bee;const Lf=Ft(ks);var $ee=Ca,zee=ks,Hee="[object AsyncFunction]",Gee="[object Function]",Wee="[object GeneratorFunction]",qee="[object Proxy]";function Xee(t){if(!zee(t))return!1;var e=$ee(t);return e==Gee||e==Wee||e==Hee||e==qee}var JT=Xee;const ot=Ft(JT);var Kee=Uo,Yee=Kee["__core-js_shared__"],Qee=Yee,ob=Qee,xO=function(){var t=/[^.]+$/.exec(ob&&ob.keys&&ob.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Zee(t){return!!xO&&xO in t}var Jee=Zee,ete=Function.prototype,tte=ete.toString;function nte(t){if(t!=null){try{return tte.call(t)}catch{}try{return t+""}catch{}}return""}var YF=nte,rte=JT,ite=Jee,ote=ks,ate=YF,ste=/[\\^$.*+?()[\]{}|]/g,lte=/^\[object .+?Constructor\]$/,cte=Function.prototype,ute=Object.prototype,fte=cte.toString,hte=ute.hasOwnProperty,dte=RegExp("^"+fte.call(hte).replace(ste,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function pte(t){if(!ote(t)||ite(t))return!1;var e=rte(t)?dte:lte;return e.test(ate(t))}var mte=pte;function gte(t,e){return t==null?void 0:t[e]}var vte=gte,yte=mte,_te=vte;function xte(t,e){var n=_te(t,e);return yte(n)?n:void 0}var Jl=xte,bte=Jl,wte=bte(Object,"create"),I0=wte,bO=I0;function Ste(){this.__data__=bO?bO(null):{},this.size=0}var Ete=Ste;function Tte(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Ate=Tte,Mte=I0,Pte="__lodash_hash_undefined__",Cte=Object.prototype,Rte=Cte.hasOwnProperty;function Ote(t){var e=this.__data__;if(Mte){var n=e[t];return n===Pte?void 0:n}return Rte.call(e,t)?e[t]:void 0}var Ite=Ote,Nte=I0,Dte=Object.prototype,Lte=Dte.hasOwnProperty;function kte(t){var e=this.__data__;return Nte?e[t]!==void 0:Lte.call(e,t)}var jte=kte,Ute=I0,Fte="__lodash_hash_undefined__";function Vte(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ute&&e===void 0?Fte:e,this}var Bte=Vte,$te=Ete,zte=Ate,Hte=Ite,Gte=jte,Wte=Bte;function kf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}kf.prototype.clear=$te;kf.prototype.delete=zte;kf.prototype.get=Hte;kf.prototype.has=Gte;kf.prototype.set=Wte;var qte=kf;function Xte(){this.__data__=[],this.size=0}var Kte=Xte;function Yte(t,e){return t===e||t!==t&&e!==e}var eA=Yte,Qte=eA;function Zte(t,e){for(var n=t.length;n--;)if(Qte(t[n][0],e))return n;return-1}var N0=Zte,Jte=N0,ene=Array.prototype,tne=ene.splice;function nne(t){var e=this.__data__,n=Jte(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():tne.call(e,n,1),--this.size,!0}var rne=nne,ine=N0;function one(t){var e=this.__data__,n=ine(e,t);return n<0?void 0:e[n][1]}var ane=one,sne=N0;function lne(t){return sne(this.__data__,t)>-1}var cne=lne,une=N0;function fne(t,e){var n=this.__data__,r=une(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var hne=fne,dne=Kte,pne=rne,mne=ane,gne=cne,vne=hne;function jf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}jf.prototype.clear=dne;jf.prototype.delete=pne;jf.prototype.get=mne;jf.prototype.has=gne;jf.prototype.set=vne;var D0=jf,yne=Jl,_ne=Uo,xne=yne(_ne,"Map"),tA=xne,wO=qte,bne=D0,wne=tA;function Sne(){this.size=0,this.__data__={hash:new wO,map:new(wne||bne),string:new wO}}var Ene=Sne;function Tne(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Ane=Tne,Mne=Ane;function Pne(t,e){var n=t.__data__;return Mne(e)?n[typeof e=="string"?"string":"hash"]:n.map}var L0=Pne,Cne=L0;function Rne(t){var e=Cne(this,t).delete(t);return this.size-=e?1:0,e}var One=Rne,Ine=L0;function Nne(t){return Ine(this,t).get(t)}var Dne=Nne,Lne=L0;function kne(t){return Lne(this,t).has(t)}var jne=kne,Une=L0;function Fne(t,e){var n=Une(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Vne=Fne,Bne=Ene,$ne=One,zne=Dne,Hne=jne,Gne=Vne;function Uf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Uf.prototype.clear=Bne;Uf.prototype.delete=$ne;Uf.prototype.get=zne;Uf.prototype.has=Hne;Uf.prototype.set=Gne;var nA=Uf,QF=nA,Wne="Expected a function";function rA(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Wne);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(rA.Cache||QF),n}rA.Cache=QF;var ZF=rA;const qne=Ft(ZF);var Xne=ZF,Kne=500;function Yne(t){var e=Xne(t,function(r){return n.size===Kne&&n.clear(),r}),n=e.cache;return e}var Qne=Yne,Zne=Qne,Jne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ere=/\\(\\)?/g,tre=Zne(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Jne,function(n,r,i,o){e.push(i?o.replace(ere,"$1"):r||n)}),e}),nre=tre;function rre(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var iA=rre,SO=Xp,ire=iA,ore=Zr,are=Df,sre=1/0,EO=SO?SO.prototype:void 0,TO=EO?EO.toString:void 0;function JF(t){if(typeof t=="string")return t;if(ore(t))return ire(t,JF)+"";if(are(t))return TO?TO.call(t):"";var e=t+"";return e=="0"&&1/t==-sre?"-0":e}var lre=JF,cre=lre;function ure(t){return t==null?"":cre(t)}var e4=ure,fre=Zr,hre=ZT,dre=nre,pre=e4;function mre(t,e){return fre(t)?t:hre(t,e)?[t]:dre(pre(t))}var t4=mre,gre=Df,vre=1/0;function yre(t){if(typeof t=="string"||gre(t))return t;var e=t+"";return e=="0"&&1/t==-vre?"-0":e}var k0=yre,_re=t4,xre=k0;function bre(t,e){e=_re(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[xre(e[n++])];return n&&n==r?t:void 0}var oA=bre,wre=oA;function Sre(t,e,n){var r=t==null?void 0:wre(t,e);return r===void 0?n:r}var n4=Sre;const fi=Ft(n4);function Ere(t){return t==null}var Tre=Ere;const ft=Ft(Tre);var Are=Ca,Mre=Zr,Pre=Ra,Cre="[object String]";function Rre(t){return typeof t=="string"||!Mre(t)&&Pre(t)&&Are(t)==Cre}var Ore=Rre;const Kp=Ft(Ore);var r4={exports:{}},$t={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aA=Symbol.for("react.element"),sA=Symbol.for("react.portal"),j0=Symbol.for("react.fragment"),U0=Symbol.for("react.strict_mode"),F0=Symbol.for("react.profiler"),V0=Symbol.for("react.provider"),B0=Symbol.for("react.context"),Ire=Symbol.for("react.server_context"),$0=Symbol.for("react.forward_ref"),z0=Symbol.for("react.suspense"),H0=Symbol.for("react.suspense_list"),G0=Symbol.for("react.memo"),W0=Symbol.for("react.lazy"),Nre=Symbol.for("react.offscreen"),i4;i4=Symbol.for("react.module.reference");function Vi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case aA:switch(t=t.type,t){case j0:case F0:case U0:case z0:case H0:return t;default:switch(t=t&&t.$$typeof,t){case Ire:case B0:case $0:case W0:case G0:case V0:return t;default:return e}}case sA:return e}}}$t.ContextConsumer=B0;$t.ContextProvider=V0;$t.Element=aA;$t.ForwardRef=$0;$t.Fragment=j0;$t.Lazy=W0;$t.Memo=G0;$t.Portal=sA;$t.Profiler=F0;$t.StrictMode=U0;$t.Suspense=z0;$t.SuspenseList=H0;$t.isAsyncMode=function(){return!1};$t.isConcurrentMode=function(){return!1};$t.isContextConsumer=function(t){return Vi(t)===B0};$t.isContextProvider=function(t){return Vi(t)===V0};$t.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===aA};$t.isForwardRef=function(t){return Vi(t)===$0};$t.isFragment=function(t){return Vi(t)===j0};$t.isLazy=function(t){return Vi(t)===W0};$t.isMemo=function(t){return Vi(t)===G0};$t.isPortal=function(t){return Vi(t)===sA};$t.isProfiler=function(t){return Vi(t)===F0};$t.isStrictMode=function(t){return Vi(t)===U0};$t.isSuspense=function(t){return Vi(t)===z0};$t.isSuspenseList=function(t){return Vi(t)===H0};$t.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===j0||t===F0||t===U0||t===z0||t===H0||t===Nre||typeof t=="object"&&t!==null&&(t.$$typeof===W0||t.$$typeof===G0||t.$$typeof===V0||t.$$typeof===B0||t.$$typeof===$0||t.$$typeof===i4||t.getModuleId!==void 0)};$t.typeOf=Vi;r4.exports=$t;var Dre=r4.exports,Lre=Ca,kre=Ra,jre="[object Number]";function Ure(t){return typeof t=="number"||kre(t)&&Lre(t)==jre}var o4=Ure;const Fre=Ft(o4);var Vre=o4;function Bre(t){return Vre(t)&&t!=+t}var $re=Bre;const Ff=Ft($re);var kr=function(e){return e===0?0:e>0?1:-1},yl=function(e){return Kp(e)&&e.indexOf("%")===e.length-1},Ae=function(e){return Fre(e)&&!Ff(e)},Vn=function(e){return Ae(e)||Kp(e)},zre=0,ec=function(e){var n=++zre;return"".concat(e||"").concat(n)},jr=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ae(e)&&!Kp(e))return r;var o;if(yl(e)){var a=e.indexOf("%");o=n*parseFloat(e.slice(0,a))/100}else o=+e;return Ff(o)&&(o=r),i&&o>n&&(o=n),o},Ya=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Hre=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Un=function(e,n){return Ae(e)&&Ae(n)?function(r){return e+r*(n-e)}:function(){return n}};function Bv(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):fi(r,e))===n})}function Au(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function pw(t){"@babel/helpers - typeof";return pw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pw(t)}var Gre=["viewBox","children"],Wre=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],AO=["points","pathLength"],ab={svg:Gre,polygon:AO,polyline:AO},lA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],$v=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(V.isValidElement(e)&&(r=e.props),!Lf(r))return null;var i={};return Object.keys(r).forEach(function(o){lA.includes(o)&&(i[o]=n||function(a){return r[o](r,a)})}),i},qre=function(e,n,r){return function(i){return e(n,r,i),null}},$l=function(e,n,r){if(!Lf(e)||pw(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var a=e[o];lA.includes(o)&&typeof a=="function"&&(i||(i={}),i[o]=qre(a,n,r))}),i},Xre=["children"],Kre=["children"];function MO(t,e){if(t==null)return{};var n=Yre(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Yre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function mw(t){"@babel/helpers - typeof";return mw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mw(t)}var PO={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},ha=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},CO=null,sb=null,cA=function t(e){if(e===CO&&Array.isArray(sb))return sb;var n=[];return V.Children.forEach(e,function(r){ft(r)||(Dre.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),sb=n,CO=e,n};function hi(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return ha(i)}):r=[ha(e)],cA(t).forEach(function(i){var o=fi(i,"type.displayName")||fi(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}function ai(t,e){var n=hi(t,e);return n&&n[0]}var RO=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Ae(r)||r<=0||!Ae(i)||i<=0)},Qre=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Zre=function(e){return e&&e.type&&Kp(e.type)&&Qre.indexOf(e.type)>=0},a4=function(e){return e&&mw(e)==="object"&&"clipDot"in e},Jre=function(e,n,r,i){var o,a=(o=ab==null?void 0:ab[i])!==null&&o!==void 0?o:[];return!ot(e)&&(i&&a.includes(n)||Wre.includes(n))||r&&lA.includes(n)},Ke=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(V.isValidElement(e)&&(i=e.props),!Lf(i))return null;var o={};return Object.keys(i).forEach(function(a){var s;Jre((s=i)===null||s===void 0?void 0:s[a],a,n,r)&&(o[a]=i[a])}),o},gw=function t(e,n){if(e===n)return!0;var r=V.Children.count(e);if(r!==V.Children.count(n))return!1;if(r===0)return!0;if(r===1)return OO(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=e[i],a=n[i];if(Array.isArray(o)||Array.isArray(a)){if(!t(o,a))return!1}else if(!OO(o,a))return!1}return!0},OO=function(e,n){if(ft(e)&&ft(n))return!0;if(!ft(e)&&!ft(n)){var r=e.props||{},i=r.children,o=MO(r,Xre),a=n.props||{},s=a.children,l=MO(a,Kre);return i&&s?Au(o,l)&&gw(i,s):!i&&!s?Au(o,l):!1}return!1},IO=function(e,n){var r=[],i={};return cA(e).forEach(function(o,a){if(Zre(o))r.push(o);else if(o){var s=ha(o.type),l=n[s]||{},c=l.handler,u=l.once;if(c&&(!u||!i[s])){var f=c(o,s,a);r.push(f),i[s]=!0}}}),r},eie=function(e){var n=e&&e.type;return n&&PO[n]?PO[n]:null},tie=function(e,n){return cA(n).indexOf(e)},nie=["children","width","height","viewBox","className","style","title","desc"];function vw(){return vw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vw.apply(this,arguments)}function rie(t,e){if(t==null)return{};var n=iie(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iie(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function yw(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,o=t.className,a=t.style,s=t.title,l=t.desc,c=rie(t,nie),u=i||{width:n,height:r,x:0,y:0},f=_t("recharts-surface",o);return W.createElement("svg",vw({},Ke(c,!0,"svg"),{className:f,width:n,height:r,style:a,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),W.createElement("title",null,s),W.createElement("desc",null,l),e)}var oie=["children","className"];function _w(){return _w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_w.apply(this,arguments)}function aie(t,e){if(t==null)return{};var n=sie(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sie(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var St=W.forwardRef(function(t,e){var n=t.children,r=t.className,i=aie(t,oie),o=_t("recharts-layer",r);return W.createElement("g",_w({className:o},Ke(i,!0),{ref:e}),n)}),ao=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function lie(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var cie=lie,uie=cie;function fie(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:uie(t,e,n)}var hie=fie,die="\\ud800-\\udfff",pie="\\u0300-\\u036f",mie="\\ufe20-\\ufe2f",gie="\\u20d0-\\u20ff",vie=pie+mie+gie,yie="\\ufe0e\\ufe0f",_ie="\\u200d",xie=RegExp("["+_ie+die+vie+yie+"]");function bie(t){return xie.test(t)}var s4=bie;function wie(t){return t.split("")}var Sie=wie,l4="\\ud800-\\udfff",Eie="\\u0300-\\u036f",Tie="\\ufe20-\\ufe2f",Aie="\\u20d0-\\u20ff",Mie=Eie+Tie+Aie,Pie="\\ufe0e\\ufe0f",Cie="["+l4+"]",xw="["+Mie+"]",bw="\\ud83c[\\udffb-\\udfff]",Rie="(?:"+xw+"|"+bw+")",c4="[^"+l4+"]",u4="(?:\\ud83c[\\udde6-\\uddff]){2}",f4="[\\ud800-\\udbff][\\udc00-\\udfff]",Oie="\\u200d",h4=Rie+"?",d4="["+Pie+"]?",Iie="(?:"+Oie+"(?:"+[c4,u4,f4].join("|")+")"+d4+h4+")*",Nie=d4+h4+Iie,Die="(?:"+[c4+xw+"?",xw,u4,f4,Cie].join("|")+")",Lie=RegExp(bw+"(?="+bw+")|"+Die+Nie,"g");function kie(t){return t.match(Lie)||[]}var jie=kie,Uie=Sie,Fie=s4,Vie=jie;function Bie(t){return Fie(t)?Vie(t):Uie(t)}var $ie=Bie,zie=hie,Hie=s4,Gie=$ie,Wie=e4;function qie(t){return function(e){e=Wie(e);var n=Hie(e)?Gie(e):void 0,r=n?n[0]:e.charAt(0),i=n?zie(n,1).join(""):e.slice(1);return r[t]()+i}}var Xie=qie,Kie=Xie,Yie=Kie("toUpperCase"),Qie=Yie;const q0=Ft(Qie);function Kt(t){return function(){return t}}const p4=Math.cos,zv=Math.sin,po=Math.sqrt,Hv=Math.PI,X0=2*Hv,ww=Math.PI,Sw=2*ww,ol=1e-6,Zie=Sw-ol;function m4(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Jie(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return m4;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class eoe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?m4:Jie(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=r-e,c=i-n,u=a-e,f=s-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>ol)if(!(Math.abs(f*l-c*u)>ol)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-a,y=i-s,v=l*l+c*c,g=d*d+y*y,p=Math.sqrt(v),x=Math.sqrt(h),_=o*Math.tan((ww-Math.acos((v+h-g)/(2*p*x)))/2),T=_/x,w=_/p;Math.abs(T-1)>ol&&this._append`L${e+T*u},${n+T*f}`,this._append`A${o},${o},0,0,${+(f*d>u*y)},${this._x1=e+w*l},${this._y1=n+w*c}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),c=e+s,u=n+l,f=1^a,h=a?i-o:o-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>ol||Math.abs(this._y1-u)>ol)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%Sw+Sw),h>Zie?this._append`A${r},${r},0,1,${f},${e-s},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:h>ol&&this._append`A${r},${r},0,${+(h>=ww)},${f},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function uA(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new eoe(e)}function fA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function g4(t){this._context=t}g4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function K0(t){return new g4(t)}function v4(t){return t[0]}function y4(t){return t[1]}function _4(t,e){var n=Kt(!0),r=null,i=K0,o=null,a=uA(s);t=typeof t=="function"?t:t===void 0?v4:Kt(t),e=typeof e=="function"?e:e===void 0?y4:Kt(e);function s(l){var c,u=(l=fA(l)).length,f,h=!1,d;for(r==null&&(o=i(d=a())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(f,c,l),+e(f,c,l));if(d)return o=null,d+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:Kt(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:Kt(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Kt(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),s):r},s}function fg(t,e,n){var r=null,i=Kt(!0),o=null,a=K0,s=null,l=uA(c);t=typeof t=="function"?t:t===void 0?v4:Kt(+t),e=typeof e=="function"?e:Kt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?y4:Kt(+n);function c(f){var h,d,y,v=(f=fA(f)).length,g,p=!1,x,_=new Array(v),T=new Array(v);for(o==null&&(s=a(x=l())),h=0;h<=v;++h){if(!(h<v&&i(g=f[h],h,f))===p)if(p=!p)d=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),y=h-1;y>=d;--y)s.point(_[y],T[y]);s.lineEnd(),s.areaEnd()}p&&(_[h]=+t(g,h,f),T[h]=+e(g,h,f),s.point(r?+r(g,h,f):_[h],n?+n(g,h,f):T[h]))}if(x)return s=null,x+""||null}function u(){return _4().defined(i).curve(a).context(o)}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:Kt(+f),r=null,c):t},c.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Kt(+f),c):t},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Kt(+f),c):r},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:Kt(+f),n=null,c):e},c.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Kt(+f),c):e},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Kt(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Kt(!!f),c):i},c.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),c):a},c.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),c):o},c}class x4{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function toe(t){return new x4(t,!0)}function noe(t){return new x4(t,!1)}const hA={draw(t,e){const n=po(e/Hv);t.moveTo(n,0),t.arc(0,0,n,0,X0)}},roe={draw(t,e){const n=po(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},b4=po(1/3),ioe=b4*2,ooe={draw(t,e){const n=po(e/ioe),r=n*b4;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},aoe={draw(t,e){const n=po(e),r=-n/2;t.rect(r,r,n,n)}},soe=.8908130915292852,w4=zv(Hv/10)/zv(7*Hv/10),loe=zv(X0/10)*w4,coe=-p4(X0/10)*w4,uoe={draw(t,e){const n=po(e*soe),r=loe*n,i=coe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const a=X0*o/5,s=p4(a),l=zv(a);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},lb=po(3),foe={draw(t,e){const n=-po(e/(lb*3));t.moveTo(0,n*2),t.lineTo(-lb*n,-n),t.lineTo(lb*n,-n),t.closePath()}},bi=-.5,wi=po(3)/2,Ew=1/po(12),hoe=(Ew/2+1)*3,doe={draw(t,e){const n=po(e/hoe),r=n/2,i=n*Ew,o=r,a=n*Ew+n,s=-o,l=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,l),t.lineTo(bi*r-wi*i,wi*r+bi*i),t.lineTo(bi*o-wi*a,wi*o+bi*a),t.lineTo(bi*s-wi*l,wi*s+bi*l),t.lineTo(bi*r+wi*i,bi*i-wi*r),t.lineTo(bi*o+wi*a,bi*a-wi*o),t.lineTo(bi*s+wi*l,bi*l-wi*s),t.closePath()}};function poe(t,e){let n=null,r=uA(i);t=typeof t=="function"?t:Kt(t||hA),e=typeof e=="function"?e:Kt(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Kt(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Kt(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function Gv(){}function Wv(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function S4(t){this._context=t}S4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Wv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Wv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function moe(t){return new S4(t)}function E4(t){this._context=t}E4.prototype={areaStart:Gv,areaEnd:Gv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Wv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function goe(t){return new E4(t)}function T4(t){this._context=t}T4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Wv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function voe(t){return new T4(t)}function A4(t){this._context=t}A4.prototype={areaStart:Gv,areaEnd:Gv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function yoe(t){return new A4(t)}function NO(t){return t<0?-1:1}function DO(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(NO(o)+NO(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function LO(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function cb(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function qv(t){this._context=t}qv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cb(this,this._t0,LO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,cb(this,LO(this,n=DO(this,t,e)),n);break;default:cb(this,this._t0,n=DO(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function M4(t){this._context=new P4(t)}(M4.prototype=Object.create(qv.prototype)).point=function(t,e){qv.prototype.point.call(this,e,t)};function P4(t){this._context=t}P4.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function _oe(t){return new qv(t)}function xoe(t){return new M4(t)}function C4(t){this._context=t}C4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=kO(t),i=kO(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function kO(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function boe(t){return new C4(t)}function Y0(t,e){this._context=t,this._t=e}Y0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function woe(t){return new Y0(t,.5)}function Soe(t){return new Y0(t,0)}function Eoe(t){return new Y0(t,1)}function Gu(t,e){if((a=t.length)>1)for(var n=1,r,i,o=t[e[0]],a,s=o.length;n<a;++n)for(i=o,o=t[e[n]],r=0;r<s;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Tw(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Toe(t,e){return t[e]}function Aoe(t){const e=[];return e.key=t,e}function Moe(){var t=Kt([]),e=Tw,n=Gu,r=Toe;function i(o){var a=Array.from(t.apply(this,arguments),Aoe),s,l=a.length,c=-1,u;for(const f of o)for(s=0,++c;s<l;++s)(a[s][c]=[0,+r(f,a[s].key,c,o)]).data=f;for(s=0,u=fA(e(a));s<l;++s)a[u[s]].index=s;return n(a,u),a}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Kt(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Kt(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?Tw:typeof o=="function"?o:Kt(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??Gu,i):n},i}function Poe(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,a;i<o;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}Gu(t,e)}}function Coe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var a=0,s=0;a<i;++a)s+=t[a][n][1]||0;r[n][1]+=r[n][0]=-s/2}Gu(t,e)}}function Roe(t,e){if(!(!((a=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,a;r<o;++r){for(var s=0,l=0,c=0;s<a;++s){for(var u=t[e[s]],f=u[r][1]||0,h=u[r-1][1]||0,d=(f-h)/2,y=0;y<s;++y){var v=t[e[y]],g=v[r][1]||0,p=v[r-1][1]||0;d+=g-p}l+=f,c+=d*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,Gu(t,e)}}function Wd(t){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wd(t)}var Ooe=["type","size","sizeType"];function Aw(){return Aw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Aw.apply(this,arguments)}function jO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jO(Object(n),!0).forEach(function(r){Ioe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ioe(t,e,n){return e=Noe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Noe(t){var e=Doe(t,"string");return Wd(e)=="symbol"?e:e+""}function Doe(t,e){if(Wd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Loe(t,e){if(t==null)return{};var n=koe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function koe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var R4={symbolCircle:hA,symbolCross:roe,symbolDiamond:ooe,symbolSquare:aoe,symbolStar:uoe,symbolTriangle:foe,symbolWye:doe},joe=Math.PI/180,Uoe=function(e){var n="symbol".concat(q0(e));return R4[n]||hA},Foe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*joe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Voe=function(e,n){R4["symbol".concat(q0(e))]=n},dA=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,o=i===void 0?64:i,a=e.sizeType,s=a===void 0?"area":a,l=Loe(e,Ooe),c=UO(UO({},l),{},{type:r,size:o,sizeType:s}),u=function(){var g=Uoe(r),p=poe().type(g).size(Foe(o,s,r));return p()},f=c.className,h=c.cx,d=c.cy,y=Ke(c,!0);return h===+h&&d===+d&&o===+o?W.createElement("path",Aw({},y,{className:_t("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(d,")"),d:u()})):null};dA.registerSymbol=Voe;function Wu(t){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wu(t)}function Mw(){return Mw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mw.apply(this,arguments)}function FO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Boe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FO(Object(n),!0).forEach(function(r){qd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $oe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zoe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I4(r.key),r)}}function Hoe(t,e,n){return e&&zoe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Goe(t,e,n){return e=Xv(e),Woe(t,O4()?Reflect.construct(e,n||[],Xv(t).constructor):e.apply(t,n))}function Woe(t,e){if(e&&(Wu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qoe(t)}function qoe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O4=function(){return!!t})()}function Xv(t){return Xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xv(t)}function Xoe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pw(t,e)}function Pw(t,e){return Pw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Pw(t,e)}function qd(t,e,n){return e=I4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I4(t){var e=Koe(t,"string");return Wu(e)=="symbol"?e:e+""}function Koe(t,e){if(Wu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Si=32,pA=function(t){function e(){return $oe(this,e),Goe(this,e,arguments)}return Xoe(e,t),Hoe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,o=Si/2,a=Si/6,s=Si/3,l=r.inactive?i:r.color;if(r.type==="plainline")return W.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:o,x2:Si,y2:o,className:"recharts-legend-icon"});if(r.type==="line")return W.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(o,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(o,`
            H`).concat(Si,"M").concat(2*s,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(o),className:"recharts-legend-icon"});if(r.type==="rect")return W.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Si/8,"h").concat(Si,"v").concat(Si*3/4,"h").concat(-Si,"z"),className:"recharts-legend-icon"});if(W.isValidElement(r.legendIcon)){var c=Boe({},r);return delete c.legendIcon,W.cloneElement(r.legendIcon,c)}return W.createElement(dA,{fill:l,cx:o,cy:o,size:Si,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,o=i.payload,a=i.iconSize,s=i.layout,l=i.formatter,c=i.inactiveColor,u={x:0,y:0,width:Si,height:Si},f={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(d,y){var v=d.formatter||l,g=_t(qd(qd({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",d.inactive));if(d.type==="none")return null;var p=ot(d.value)?null:d.value;ao(!ot(d.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=d.inactive?c:d.color;return W.createElement("li",Mw({className:g,style:f,key:"legend-item-".concat(y)},$l(r.props,d,y)),W.createElement(yw,{width:a,height:a,viewBox:u,style:h},r.renderIcon(d)),W.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},v?v(p,d,y):p))})}},{key:"render",value:function(){var r=this.props,i=r.payload,o=r.layout,a=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return W.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(V.PureComponent);qd(pA,"displayName","Legend");qd(pA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Yoe=D0;function Qoe(){this.__data__=new Yoe,this.size=0}var Zoe=Qoe;function Joe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var eae=Joe;function tae(t){return this.__data__.get(t)}var nae=tae;function rae(t){return this.__data__.has(t)}var iae=rae,oae=D0,aae=tA,sae=nA,lae=200;function cae(t,e){var n=this.__data__;if(n instanceof oae){var r=n.__data__;if(!aae||r.length<lae-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new sae(r)}return n.set(t,e),this.size=n.size,this}var uae=cae,fae=D0,hae=Zoe,dae=eae,pae=nae,mae=iae,gae=uae;function Vf(t){var e=this.__data__=new fae(t);this.size=e.size}Vf.prototype.clear=hae;Vf.prototype.delete=dae;Vf.prototype.get=pae;Vf.prototype.has=mae;Vf.prototype.set=gae;var N4=Vf,vae="__lodash_hash_undefined__";function yae(t){return this.__data__.set(t,vae),this}var _ae=yae;function xae(t){return this.__data__.has(t)}var bae=xae,wae=nA,Sae=_ae,Eae=bae;function Kv(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new wae;++e<n;)this.add(t[e])}Kv.prototype.add=Kv.prototype.push=Sae;Kv.prototype.has=Eae;var D4=Kv;function Tae(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var L4=Tae;function Aae(t,e){return t.has(e)}var k4=Aae,Mae=D4,Pae=L4,Cae=k4,Rae=1,Oae=2;function Iae(t,e,n,r,i,o){var a=n&Rae,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var f=-1,h=!0,d=n&Oae?new Mae:void 0;for(o.set(t,e),o.set(e,t);++f<s;){var y=t[f],v=e[f];if(r)var g=a?r(v,y,f,e,t,o):r(y,v,f,t,e,o);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!Pae(e,function(p,x){if(!Cae(d,x)&&(y===p||i(y,p,n,r,o)))return d.push(x)})){h=!1;break}}else if(!(y===v||i(y,v,n,r,o))){h=!1;break}}return o.delete(t),o.delete(e),h}var j4=Iae,Nae=Uo,Dae=Nae.Uint8Array,Lae=Dae;function kae(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var jae=kae;function Uae(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var mA=Uae,VO=Xp,BO=Lae,Fae=eA,Vae=j4,Bae=jae,$ae=mA,zae=1,Hae=2,Gae="[object Boolean]",Wae="[object Date]",qae="[object Error]",Xae="[object Map]",Kae="[object Number]",Yae="[object RegExp]",Qae="[object Set]",Zae="[object String]",Jae="[object Symbol]",ese="[object ArrayBuffer]",tse="[object DataView]",$O=VO?VO.prototype:void 0,ub=$O?$O.valueOf:void 0;function nse(t,e,n,r,i,o,a){switch(n){case tse:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ese:return!(t.byteLength!=e.byteLength||!o(new BO(t),new BO(e)));case Gae:case Wae:case Kae:return Fae(+t,+e);case qae:return t.name==e.name&&t.message==e.message;case Yae:case Zae:return t==e+"";case Xae:var s=Bae;case Qae:var l=r&zae;if(s||(s=$ae),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=Hae,a.set(t,e);var u=Vae(s(t),s(e),r,i,o,a);return a.delete(t),u;case Jae:if(ub)return ub.call(t)==ub.call(e)}return!1}var rse=nse;function ise(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var U4=ise,ose=U4,ase=Zr;function sse(t,e,n){var r=e(t);return ase(t)?r:ose(r,n(t))}var lse=sse;function cse(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}var use=cse;function fse(){return[]}var hse=fse,dse=use,pse=hse,mse=Object.prototype,gse=mse.propertyIsEnumerable,zO=Object.getOwnPropertySymbols,vse=zO?function(t){return t==null?[]:(t=Object(t),dse(zO(t),function(e){return gse.call(t,e)}))}:pse,yse=vse;function _se(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var xse=_se,bse=Ca,wse=Ra,Sse="[object Arguments]";function Ese(t){return wse(t)&&bse(t)==Sse}var Tse=Ese,HO=Tse,Ase=Ra,F4=Object.prototype,Mse=F4.hasOwnProperty,Pse=F4.propertyIsEnumerable,Cse=HO(function(){return arguments}())?HO:function(t){return Ase(t)&&Mse.call(t,"callee")&&!Pse.call(t,"callee")},gA=Cse,Yv={exports:{}};function Rse(){return!1}var Ose=Rse;Yv.exports;(function(t,e){var n=Uo,r=Ose,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a?n.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||r;t.exports=c})(Yv,Yv.exports);var V4=Yv.exports,Ise=9007199254740991,Nse=/^(?:0|[1-9]\d*)$/;function Dse(t,e){var n=typeof t;return e=e??Ise,!!e&&(n=="number"||n!="symbol"&&Nse.test(t))&&t>-1&&t%1==0&&t<e}var vA=Dse,Lse=9007199254740991;function kse(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Lse}var yA=kse,jse=Ca,Use=yA,Fse=Ra,Vse="[object Arguments]",Bse="[object Array]",$se="[object Boolean]",zse="[object Date]",Hse="[object Error]",Gse="[object Function]",Wse="[object Map]",qse="[object Number]",Xse="[object Object]",Kse="[object RegExp]",Yse="[object Set]",Qse="[object String]",Zse="[object WeakMap]",Jse="[object ArrayBuffer]",ele="[object DataView]",tle="[object Float32Array]",nle="[object Float64Array]",rle="[object Int8Array]",ile="[object Int16Array]",ole="[object Int32Array]",ale="[object Uint8Array]",sle="[object Uint8ClampedArray]",lle="[object Uint16Array]",cle="[object Uint32Array]",nn={};nn[tle]=nn[nle]=nn[rle]=nn[ile]=nn[ole]=nn[ale]=nn[sle]=nn[lle]=nn[cle]=!0;nn[Vse]=nn[Bse]=nn[Jse]=nn[$se]=nn[ele]=nn[zse]=nn[Hse]=nn[Gse]=nn[Wse]=nn[qse]=nn[Xse]=nn[Kse]=nn[Yse]=nn[Qse]=nn[Zse]=!1;function ule(t){return Fse(t)&&Use(t.length)&&!!nn[jse(t)]}var fle=ule;function hle(t){return function(e){return t(e)}}var B4=hle,Qv={exports:{}};Qv.exports;(function(t,e){var n=XF,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,a=o&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=s})(Qv,Qv.exports);var dle=Qv.exports,ple=fle,mle=B4,GO=dle,WO=GO&&GO.isTypedArray,gle=WO?mle(WO):ple,$4=gle,vle=xse,yle=gA,_le=Zr,xle=V4,ble=vA,wle=$4,Sle=Object.prototype,Ele=Sle.hasOwnProperty;function Tle(t,e){var n=_le(t),r=!n&&yle(t),i=!n&&!r&&xle(t),o=!n&&!r&&!i&&wle(t),a=n||r||i||o,s=a?vle(t.length,String):[],l=s.length;for(var c in t)(e||Ele.call(t,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ble(c,l)))&&s.push(c);return s}var Ale=Tle,Mle=Object.prototype;function Ple(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Mle;return t===n}var Cle=Ple;function Rle(t,e){return function(n){return t(e(n))}}var z4=Rle,Ole=z4,Ile=Ole(Object.keys,Object),Nle=Ile,Dle=Cle,Lle=Nle,kle=Object.prototype,jle=kle.hasOwnProperty;function Ule(t){if(!Dle(t))return Lle(t);var e=[];for(var n in Object(t))jle.call(t,n)&&n!="constructor"&&e.push(n);return e}var Fle=Ule,Vle=JT,Ble=yA;function $le(t){return t!=null&&Ble(t.length)&&!Vle(t)}var Yp=$le,zle=Ale,Hle=Fle,Gle=Yp;function Wle(t){return Gle(t)?zle(t):Hle(t)}var Q0=Wle,qle=lse,Xle=yse,Kle=Q0;function Yle(t){return qle(t,Kle,Xle)}var Qle=Yle,qO=Qle,Zle=1,Jle=Object.prototype,ece=Jle.hasOwnProperty;function tce(t,e,n,r,i,o){var a=n&Zle,s=qO(t),l=s.length,c=qO(e),u=c.length;if(l!=u&&!a)return!1;for(var f=l;f--;){var h=s[f];if(!(a?h in e:ece.call(e,h)))return!1}var d=o.get(t),y=o.get(e);if(d&&y)return d==e&&y==t;var v=!0;o.set(t,e),o.set(e,t);for(var g=a;++f<l;){h=s[f];var p=t[h],x=e[h];if(r)var _=a?r(x,p,h,e,t,o):r(p,x,h,t,e,o);if(!(_===void 0?p===x||i(p,x,n,r,o):_)){v=!1;break}g||(g=h=="constructor")}if(v&&!g){var T=t.constructor,w=e.constructor;T!=w&&"constructor"in t&&"constructor"in e&&!(typeof T=="function"&&T instanceof T&&typeof w=="function"&&w instanceof w)&&(v=!1)}return o.delete(t),o.delete(e),v}var nce=tce,rce=Jl,ice=Uo,oce=rce(ice,"DataView"),ace=oce,sce=Jl,lce=Uo,cce=sce(lce,"Promise"),uce=cce,fce=Jl,hce=Uo,dce=fce(hce,"Set"),H4=dce,pce=Jl,mce=Uo,gce=pce(mce,"WeakMap"),vce=gce,Cw=ace,Rw=tA,Ow=uce,Iw=H4,Nw=vce,G4=Ca,Bf=YF,XO="[object Map]",yce="[object Object]",KO="[object Promise]",YO="[object Set]",QO="[object WeakMap]",ZO="[object DataView]",_ce=Bf(Cw),xce=Bf(Rw),bce=Bf(Ow),wce=Bf(Iw),Sce=Bf(Nw),al=G4;(Cw&&al(new Cw(new ArrayBuffer(1)))!=ZO||Rw&&al(new Rw)!=XO||Ow&&al(Ow.resolve())!=KO||Iw&&al(new Iw)!=YO||Nw&&al(new Nw)!=QO)&&(al=function(t){var e=G4(t),n=e==yce?t.constructor:void 0,r=n?Bf(n):"";if(r)switch(r){case _ce:return ZO;case xce:return XO;case bce:return KO;case wce:return YO;case Sce:return QO}return e});var Ece=al,fb=N4,Tce=j4,Ace=rse,Mce=nce,JO=Ece,eI=Zr,tI=V4,Pce=$4,Cce=1,nI="[object Arguments]",rI="[object Array]",hg="[object Object]",Rce=Object.prototype,iI=Rce.hasOwnProperty;function Oce(t,e,n,r,i,o){var a=eI(t),s=eI(e),l=a?rI:JO(t),c=s?rI:JO(e);l=l==nI?hg:l,c=c==nI?hg:c;var u=l==hg,f=c==hg,h=l==c;if(h&&tI(t)){if(!tI(e))return!1;a=!0,u=!1}if(h&&!u)return o||(o=new fb),a||Pce(t)?Tce(t,e,n,r,i,o):Ace(t,e,l,n,r,i,o);if(!(n&Cce)){var d=u&&iI.call(t,"__wrapped__"),y=f&&iI.call(e,"__wrapped__");if(d||y){var v=d?t.value():t,g=y?e.value():e;return o||(o=new fb),i(v,g,n,r,o)}}return h?(o||(o=new fb),Mce(t,e,n,r,i,o)):!1}var Ice=Oce,Nce=Ice,oI=Ra;function W4(t,e,n,r,i){return t===e?!0:t==null||e==null||!oI(t)&&!oI(e)?t!==t&&e!==e:Nce(t,e,n,r,W4,i)}var _A=W4,Dce=N4,Lce=_A,kce=1,jce=2;function Uce(t,e,n,r){var i=n.length,o=i,a=!r;if(t==null)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var l=s[0],c=t[l],u=s[1];if(a&&s[2]){if(c===void 0&&!(l in t))return!1}else{var f=new Dce;if(r)var h=r(c,u,l,t,e,f);if(!(h===void 0?Lce(u,c,kce|jce,r,f):h))return!1}}return!0}var Fce=Uce,Vce=ks;function Bce(t){return t===t&&!Vce(t)}var q4=Bce,$ce=q4,zce=Q0;function Hce(t){for(var e=zce(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,$ce(i)]}return e}var Gce=Hce;function Wce(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var X4=Wce,qce=Fce,Xce=Gce,Kce=X4;function Yce(t){var e=Xce(t);return e.length==1&&e[0][2]?Kce(e[0][0],e[0][1]):function(n){return n===t||qce(n,t,e)}}var Qce=Yce;function Zce(t,e){return t!=null&&e in Object(t)}var Jce=Zce,eue=t4,tue=gA,nue=Zr,rue=vA,iue=yA,oue=k0;function aue(t,e,n){e=eue(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=oue(e[r]);if(!(o=t!=null&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&iue(i)&&rue(a,i)&&(nue(t)||tue(t)))}var sue=aue,lue=Jce,cue=sue;function uue(t,e){return t!=null&&cue(t,e,lue)}var fue=uue,hue=_A,due=n4,pue=fue,mue=ZT,gue=q4,vue=X4,yue=k0,_ue=1,xue=2;function bue(t,e){return mue(t)&&gue(e)?vue(yue(t),e):function(n){var r=due(n,t);return r===void 0&&r===e?pue(n,t):hue(e,r,_ue|xue)}}var wue=bue;function Sue(t){return t}var $f=Sue;function Eue(t){return function(e){return e==null?void 0:e[t]}}var Tue=Eue,Aue=oA;function Mue(t){return function(e){return Aue(e,t)}}var Pue=Mue,Cue=Tue,Rue=Pue,Oue=ZT,Iue=k0;function Nue(t){return Oue(t)?Cue(Iue(t)):Rue(t)}var Due=Nue,Lue=Qce,kue=wue,jue=$f,Uue=Zr,Fue=Due;function Vue(t){return typeof t=="function"?t:t==null?jue:typeof t=="object"?Uue(t)?kue(t[0],t[1]):Lue(t):Fue(t)}var Fo=Vue;function Bue(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var K4=Bue;function $ue(t){return t!==t}var zue=$ue;function Hue(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var Gue=Hue,Wue=K4,que=zue,Xue=Gue;function Kue(t,e,n){return e===e?Xue(t,e,n):Wue(t,que,n)}var Yue=Kue,Que=Yue;function Zue(t,e){var n=t==null?0:t.length;return!!n&&Que(t,e,0)>-1}var Jue=Zue;function efe(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var tfe=efe;function nfe(){}var rfe=nfe,hb=H4,ife=rfe,ofe=mA,afe=1/0,sfe=hb&&1/ofe(new hb([,-0]))[1]==afe?function(t){return new hb(t)}:ife,lfe=sfe,cfe=D4,ufe=Jue,ffe=tfe,hfe=k4,dfe=lfe,pfe=mA,mfe=200;function gfe(t,e,n){var r=-1,i=ufe,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=ffe;else if(o>=mfe){var c=e?null:dfe(t);if(c)return pfe(c);a=!1,i=hfe,l=new cfe}else l=e?[]:s;e:for(;++r<o;){var u=t[r],f=e?e(u):u;if(u=n||u!==0?u:0,a&&f===f){for(var h=l.length;h--;)if(l[h]===f)continue e;e&&l.push(f),s.push(u)}else i(l,f,n)||(l!==s&&l.push(f),s.push(u))}return s}var vfe=gfe,yfe=Fo,_fe=vfe;function xfe(t,e){return t&&t.length?_fe(t,yfe(e)):[]}var bfe=xfe;const aI=Ft(bfe);function Y4(t,e,n){return e===!0?aI(t,n):ot(e)?aI(t,e):t}function qu(t){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qu(t)}var wfe=["ref"];function sI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sI(Object(n),!0).forEach(function(r){Z0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Z4(r.key),r)}}function Efe(t,e,n){return e&&lI(t.prototype,e),n&&lI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tfe(t,e,n){return e=Zv(e),Afe(t,Q4()?Reflect.construct(e,n||[],Zv(t).constructor):e.apply(t,n))}function Afe(t,e){if(e&&(qu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mfe(t)}function Mfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Q4=function(){return!!t})()}function Zv(t){return Zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zv(t)}function Pfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dw(t,e)}function Dw(t,e){return Dw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Dw(t,e)}function Z0(t,e,n){return e=Z4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z4(t){var e=Cfe(t,"string");return qu(e)=="symbol"?e:e+""}function Cfe(t,e){if(qu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rfe(t,e){if(t==null)return{};var n=Ofe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ofe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ife(t){return t.value}function Nfe(t,e){if(W.isValidElement(t))return W.cloneElement(t,e);if(typeof t=="function")return W.createElement(t,e);e.ref;var n=Rfe(e,wfe);return W.createElement(pA,n)}var cI=1,da=function(t){function e(){var n;Sfe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Tfe(this,e,[].concat(i)),Z0(n,"lastBoundingBox",{width:-1,height:-1}),n}return Pfe(e,t),Efe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>cI||Math.abs(i.height-this.lastBoundingBox.height)>cI)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Xo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,o=i.layout,a=i.align,s=i.verticalAlign,l=i.margin,c=i.chartWidth,u=i.chartHeight,f,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&o==="vertical"){var d=this.getBBoxSnapshot();f={left:((c||0)-d.width)/2}}else f=a==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var y=this.getBBoxSnapshot();h={top:((u||0)-y.height)/2}}else h=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Xo(Xo({},f),h)}},{key:"render",value:function(){var r=this,i=this.props,o=i.content,a=i.width,s=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,u=i.payload,f=Xo(Xo({position:"absolute",width:a||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return W.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(d){r.wrapperNode=d}},Nfe(o,Xo(Xo({},this.props),{},{payload:Y4(u,c,Ife)})))}}],[{key:"getWithHeight",value:function(r,i){var o=Xo(Xo({},this.defaultProps),r.props),a=o.layout;return a==="vertical"&&Ae(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(V.PureComponent);Z0(da,"displayName","Legend");Z0(da,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var uI=Xp,Dfe=gA,Lfe=Zr,fI=uI?uI.isConcatSpreadable:void 0;function kfe(t){return Lfe(t)||Dfe(t)||!!(fI&&t&&t[fI])}var jfe=kfe,Ufe=U4,Ffe=jfe;function J4(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Ffe),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?J4(s,e-1,n,r,i):Ufe(i,s):r||(i[i.length]=s)}return i}var eV=J4;function Vfe(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(n(o[l],l,o)===!1)break}return e}}var Bfe=Vfe,$fe=Bfe,zfe=$fe(),Hfe=zfe,Gfe=Hfe,Wfe=Q0;function qfe(t,e){return t&&Gfe(t,e,Wfe)}var tV=qfe,Xfe=Yp;function Kfe(t,e){return function(n,r){if(n==null)return n;if(!Xfe(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}var Yfe=Kfe,Qfe=tV,Zfe=Yfe,Jfe=Zfe(Qfe),xA=Jfe,ehe=xA,the=Yp;function nhe(t,e){var n=-1,r=the(t)?Array(t.length):[];return ehe(t,function(i,o,a){r[++n]=e(i,o,a)}),r}var nV=nhe;function rhe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var ihe=rhe,hI=Df;function ohe(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,o=hI(t),a=e!==void 0,s=e===null,l=e===e,c=hI(e);if(!s&&!c&&!o&&t>e||o&&a&&l&&!s&&!c||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}var ahe=ohe,she=ahe;function lhe(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var l=she(i[r],o[r]);if(l){if(r>=s)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var che=lhe,db=iA,uhe=oA,fhe=Fo,hhe=nV,dhe=ihe,phe=B4,mhe=che,ghe=$f,vhe=Zr;function yhe(t,e,n){e.length?e=db(e,function(o){return vhe(o)?function(a){return uhe(a,o.length===1?o[0]:o)}:o}):e=[ghe];var r=-1;e=db(e,phe(fhe));var i=hhe(t,function(o,a,s){var l=db(e,function(c){return c(o)});return{criteria:l,index:++r,value:o}});return dhe(i,function(o,a){return mhe(o,a,n)})}var _he=yhe;function xhe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var bhe=xhe,whe=bhe,dI=Math.max;function She(t,e,n){return e=dI(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=dI(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),whe(t,this,s)}}var Ehe=She;function The(t){return function(){return t}}var Ahe=The,Mhe=Jl,Phe=function(){try{var t=Mhe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),rV=Phe,Che=Ahe,pI=rV,Rhe=$f,Ohe=pI?function(t,e){return pI(t,"toString",{configurable:!0,enumerable:!1,value:Che(e),writable:!0})}:Rhe,Ihe=Ohe,Nhe=800,Dhe=16,Lhe=Date.now;function khe(t){var e=0,n=0;return function(){var r=Lhe(),i=Dhe-(r-n);if(n=r,i>0){if(++e>=Nhe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var jhe=khe,Uhe=Ihe,Fhe=jhe,Vhe=Fhe(Uhe),Bhe=Vhe,$he=$f,zhe=Ehe,Hhe=Bhe;function Ghe(t,e){return Hhe(zhe(t,e,$he),t+"")}var Whe=Ghe,qhe=eA,Xhe=Yp,Khe=vA,Yhe=ks;function Qhe(t,e,n){if(!Yhe(n))return!1;var r=typeof e;return(r=="number"?Xhe(n)&&Khe(e,n.length):r=="string"&&e in n)?qhe(n[e],t):!1}var J0=Qhe,Zhe=eV,Jhe=_he,ede=Whe,mI=J0,tde=ede(function(t,e){if(t==null)return[];var n=e.length;return n>1&&mI(t,e[0],e[1])?e=[]:n>2&&mI(e[0],e[1],e[2])&&(e=[e[0]]),Jhe(t,Zhe(e,1),[])}),nde=tde;const bA=Ft(nde);function Xd(t){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xd(t)}function Lw(){return Lw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lw.apply(this,arguments)}function rde(t,e){return sde(t)||ade(t,e)||ode(t,e)||ide()}function ide(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ode(t,e){if(t){if(typeof t=="string")return gI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gI(t,e)}}function gI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ade(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function sde(t){if(Array.isArray(t))return t}function vI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vI(Object(n),!0).forEach(function(r){lde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lde(t,e,n){return e=cde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cde(t){var e=ude(t,"string");return Xd(e)=="symbol"?e:e+""}function ude(t,e){if(Xd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fde(t){return Array.isArray(t)&&Vn(t[0])&&Vn(t[1])?t.join(" ~ "):t}var hde=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,o=i===void 0?{}:i,a=e.itemStyle,s=a===void 0?{}:a,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,f=e.formatter,h=e.itemSorter,d=e.wrapperClassName,y=e.labelClassName,v=e.label,g=e.labelFormatter,p=e.accessibilityLayer,x=p===void 0?!1:p,_=function(){if(u&&u.length){var N={padding:0,margin:0},O=(h?bA(u,h):u).map(function(D,k){if(D.type==="none")return null;var H=pb({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},s),B=D.formatter||f||fde,F=D.value,q=D.name,K=F,z=q;if(B&&K!=null&&z!=null){var X=B(F,q,D,k,u);if(Array.isArray(X)){var ee=rde(X,2);K=ee[0],z=ee[1]}else K=X}return W.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:H},Vn(z)?W.createElement("span",{className:"recharts-tooltip-item-name"},z):null,Vn(z)?W.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,W.createElement("span",{className:"recharts-tooltip-item-value"},K),W.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return W.createElement("ul",{className:"recharts-tooltip-item-list",style:N},O)}return null},T=pb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),w=pb({margin:0},c),M=!ft(v),b=M?v:"",A=_t("recharts-default-tooltip",d),E=_t("recharts-tooltip-label",y);M&&g&&u!==void 0&&u!==null&&(b=g(v,u));var P=x?{role:"status","aria-live":"assertive"}:{};return W.createElement("div",Lw({className:A,style:T},P),W.createElement("p",{className:E,style:w},W.isValidElement(b)?b:"".concat(b)),_())};function Kd(t){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kd(t)}function dg(t,e,n){return e=dde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dde(t){var e=pde(t,"string");return Kd(e)=="symbol"?e:e+""}function pde(t,e){if(Kd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ah="recharts-tooltip-wrapper",mde={visibility:"hidden"};function gde(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return _t(Ah,dg(dg(dg(dg({},"".concat(Ah,"-right"),Ae(n)&&e&&Ae(e.x)&&n>=e.x),"".concat(Ah,"-left"),Ae(n)&&e&&Ae(e.x)&&n<e.x),"".concat(Ah,"-bottom"),Ae(r)&&e&&Ae(e.y)&&r>=e.y),"".concat(Ah,"-top"),Ae(r)&&e&&Ae(e.y)&&r<e.y))}function yI(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,a=t.reverseDirection,s=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(o&&Ae(o[r]))return o[r];var u=n[r]-s-i,f=n[r]+i;if(e[r])return a[r]?u:f;if(a[r]){var h=u,d=l[r];return h<d?Math.max(f,l[r]):Math.max(u,l[r])}var y=f+s,v=l[r]+c;return y>v?Math.max(u,l[r]):Math.max(f,l[r])}function vde(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function yde(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,o=t.reverseDirection,a=t.tooltipBox,s=t.useTranslate3d,l=t.viewBox,c,u,f;return a.height>0&&a.width>0&&n?(u=yI({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),f=yI({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),c=vde({translateX:u,translateY:f,useTranslate3d:s})):c=mde,{cssProperties:c,cssClasses:gde({translateX:u,translateY:f,coordinate:n})}}function Xu(t){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xu(t)}function _I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_I(Object(n),!0).forEach(function(r){jw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_I(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _de(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oV(r.key),r)}}function bde(t,e,n){return e&&xde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wde(t,e,n){return e=Jv(e),Sde(t,iV()?Reflect.construct(e,n||[],Jv(t).constructor):e.apply(t,n))}function Sde(t,e){if(e&&(Xu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ede(t)}function Ede(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iV=function(){return!!t})()}function Jv(t){return Jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jv(t)}function Tde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kw(t,e)}function kw(t,e){return kw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kw(t,e)}function jw(t,e,n){return e=oV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oV(t){var e=Ade(t,"string");return Xu(e)=="symbol"?e:e+""}function Ade(t,e){if(Xu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bI=1,Mde=function(t){function e(){var n;_de(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=wde(this,e,[].concat(i)),jw(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),jw(n,"handleKeyDown",function(a){if(a.key==="Escape"){var s,l,c,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(c=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),n}return Tde(e,t),bde(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>bI||Math.abs(r.height-this.state.lastBoundingBox.height)>bI)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.children,u=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,d=i.offset,y=i.position,v=i.reverseDirection,g=i.useTranslate3d,p=i.viewBox,x=i.wrapperStyle,_=yde({allowEscapeViewBox:a,coordinate:u,offsetTopLeft:d,position:y,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:p}),T=_.cssClasses,w=_.cssProperties,M=xI(xI({transition:h&&o?"transform ".concat(s,"ms ").concat(l):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&f?"visible":"hidden",position:"absolute",top:0,left:0},x);return W.createElement("div",{tabIndex:-1,className:T,style:M,ref:function(A){r.wrapperNode=A}},c)}}])}(V.PureComponent),Pde=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},so={isSsr:Pde(),get:function(e){return so[e]},set:function(e,n){if(typeof e=="string")so[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(i){so[i]=e[i]})}}};function Ku(t){"@babel/helpers - typeof";return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ku(t)}function wI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wI(Object(n),!0).forEach(function(r){wA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sV(r.key),r)}}function Ode(t,e,n){return e&&Rde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ide(t,e,n){return e=ey(e),Nde(t,aV()?Reflect.construct(e,n||[],ey(t).constructor):e.apply(t,n))}function Nde(t,e){if(e&&(Ku(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dde(t)}function Dde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aV=function(){return!!t})()}function ey(t){return ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ey(t)}function Lde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uw(t,e)}function Uw(t,e){return Uw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Uw(t,e)}function wA(t,e,n){return e=sV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sV(t){var e=kde(t,"string");return Ku(e)=="symbol"?e:e+""}function kde(t,e){if(Ku(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ku(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jde(t){return t.dataKey}function Ude(t,e){return W.isValidElement(t)?W.cloneElement(t,e):typeof t=="function"?W.createElement(t,e):W.createElement(hde,e)}var Lr=function(t){function e(){return Cde(this,e),Ide(this,e,arguments)}return Lde(e,t),Ode(e,[{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.content,u=i.coordinate,f=i.filterNull,h=i.isAnimationActive,d=i.offset,y=i.payload,v=i.payloadUniqBy,g=i.position,p=i.reverseDirection,x=i.useTranslate3d,_=i.viewBox,T=i.wrapperStyle,w=y??[];f&&w.length&&(w=Y4(y.filter(function(b){return b.value!=null&&(b.hide!==!0||r.props.includeHidden)}),v,jde));var M=w.length>0;return W.createElement(Mde,{allowEscapeViewBox:a,animationDuration:s,animationEasing:l,isAnimationActive:h,active:o,coordinate:u,hasPayload:M,offset:d,position:g,reverseDirection:p,useTranslate3d:x,viewBox:_,wrapperStyle:T},Ude(c,SI(SI({},this.props),{},{payload:w})))}}])}(V.PureComponent);wA(Lr,"displayName","Tooltip");wA(Lr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!so.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Fde=Uo,Vde=function(){return Fde.Date.now()},Bde=Vde,$de=/\s/;function zde(t){for(var e=t.length;e--&&$de.test(t.charAt(e)););return e}var Hde=zde,Gde=Hde,Wde=/^\s+/;function qde(t){return t&&t.slice(0,Gde(t)+1).replace(Wde,"")}var Xde=qde,Kde=Xde,EI=ks,Yde=Df,TI=NaN,Qde=/^[-+]0x[0-9a-f]+$/i,Zde=/^0b[01]+$/i,Jde=/^0o[0-7]+$/i,epe=parseInt;function tpe(t){if(typeof t=="number")return t;if(Yde(t))return TI;if(EI(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=EI(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Kde(t);var n=Zde.test(t);return n||Jde.test(t)?epe(t.slice(2),n?2:8):Qde.test(t)?TI:+t}var lV=tpe,npe=ks,mb=Bde,AI=lV,rpe="Expected a function",ipe=Math.max,ope=Math.min;function ape(t,e,n){var r,i,o,a,s,l,c=0,u=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(rpe);e=AI(e)||0,npe(n)&&(u=!!n.leading,f="maxWait"in n,o=f?ipe(AI(n.maxWait)||0,e):o,h="trailing"in n?!!n.trailing:h);function d(M){var b=r,A=i;return r=i=void 0,c=M,a=t.apply(A,b),a}function y(M){return c=M,s=setTimeout(p,e),u?d(M):a}function v(M){var b=M-l,A=M-c,E=e-b;return f?ope(E,o-A):E}function g(M){var b=M-l,A=M-c;return l===void 0||b>=e||b<0||f&&A>=o}function p(){var M=mb();if(g(M))return x(M);s=setTimeout(p,v(M))}function x(M){return s=void 0,h&&r?d(M):(r=i=void 0,a)}function _(){s!==void 0&&clearTimeout(s),c=0,r=l=i=s=void 0}function T(){return s===void 0?a:x(mb())}function w(){var M=mb(),b=g(M);if(r=arguments,i=this,l=M,b){if(s===void 0)return y(l);if(f)return clearTimeout(s),s=setTimeout(p,e),d(l)}return s===void 0&&(s=setTimeout(p,e)),a}return w.cancel=_,w.flush=T,w}var spe=ape,lpe=spe,cpe=ks,upe="Expected a function";function fpe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(upe);return cpe(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),lpe(t,e,{leading:r,maxWait:e,trailing:i})}var hpe=fpe;const cV=Ft(hpe);function Yd(t){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(t)}function MI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MI(Object(n),!0).forEach(function(r){dpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dpe(t,e,n){return e=ppe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ppe(t){var e=mpe(t,"string");return Yd(e)=="symbol"?e:e+""}function mpe(t,e){if(Yd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Yd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gpe(t,e){return xpe(t)||_pe(t,e)||ype(t,e)||vpe()}function vpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ype(t,e){if(t){if(typeof t=="string")return PI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PI(t,e)}}function PI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _pe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function xpe(t){if(Array.isArray(t))return t}var Yu=V.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=t.width,a=o===void 0?"100%":o,s=t.height,l=s===void 0?"100%":s,c=t.minWidth,u=c===void 0?0:c,f=t.minHeight,h=t.maxHeight,d=t.children,y=t.debounce,v=y===void 0?0:y,g=t.id,p=t.className,x=t.onResize,_=t.style,T=_===void 0?{}:_,w=V.useRef(null),M=V.useRef();M.current=x,V.useImperativeHandle(e,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var b=V.useState({containerWidth:i.width,containerHeight:i.height}),A=gpe(b,2),E=A[0],P=A[1],R=V.useCallback(function(O,D){P(function(k){var H=Math.round(O),B=Math.round(D);return k.containerWidth===H&&k.containerHeight===B?k:{containerWidth:H,containerHeight:B}})},[]);V.useEffect(function(){var O=function(q){var K,z=q[0].contentRect,X=z.width,ee=z.height;R(X,ee),(K=M.current)===null||K===void 0||K.call(M,X,ee)};v>0&&(O=cV(O,v,{trailing:!0,leading:!1}));var D=new ResizeObserver(O),k=w.current.getBoundingClientRect(),H=k.width,B=k.height;return R(H,B),D.observe(w.current),function(){D.disconnect()}},[R,v]);var N=V.useMemo(function(){var O=E.containerWidth,D=E.containerHeight;if(O<0||D<0)return null;ao(yl(a)||yl(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),ao(!n||n>0,"The aspect(%s) must be greater than zero.",n);var k=yl(a)?O:a,H=yl(l)?D:l;n&&n>0&&(k?H=k/n:H&&(k=H*n),h&&H>h&&(H=h)),ao(k>0||H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,H,a,l,u,f,n);var B=!Array.isArray(d)&&ha(d.type).endsWith("Chart");return W.Children.map(d,function(F){return W.isValidElement(F)?V.cloneElement(F,pg({width:k,height:H},B?{style:pg({height:"100%",width:"100%",maxHeight:H,maxWidth:k},F.props.style)}:{})):F})},[n,d,l,h,f,u,E,a]);return W.createElement("div",{id:g?"".concat(g):void 0,className:_t("recharts-responsive-container",p),style:pg(pg({},T),{},{width:a,height:l,minWidth:u,minHeight:f,maxHeight:h}),ref:w},N)}),Qd=function(e){return null};Qd.displayName="Cell";function Zd(t){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zd(t)}function CI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CI(Object(n),!0).forEach(function(r){bpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bpe(t,e,n){return e=wpe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wpe(t){var e=Spe(t,"string");return Zd(e)=="symbol"?e:e+""}function Spe(t,e){if(Zd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Zd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nc={widthCache:{},cacheCount:0},Epe=2e3,Tpe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},RI="recharts_measurement_span";function Ape(t){var e=Fw({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var cd=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||so.isSsr)return{width:0,height:0};var r=Ape(n),i=JSON.stringify({text:e,copyStyle:r});if(Nc.widthCache[i])return Nc.widthCache[i];try{var o=document.getElementById(RI);o||(o=document.createElement("span"),o.setAttribute("id",RI),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=Fw(Fw({},Tpe),r);Object.assign(o.style,a),o.textContent="".concat(e);var s=o.getBoundingClientRect(),l={width:s.width,height:s.height};return Nc.widthCache[i]=l,++Nc.cacheCount>Epe&&(Nc.cacheCount=0,Nc.widthCache={}),l}catch{return{width:0,height:0}}},Mpe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Jd(t){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jd(t)}function ty(t,e){return Ope(t)||Rpe(t,e)||Cpe(t,e)||Ppe()}function Ppe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cpe(t,e){if(t){if(typeof t=="string")return OI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OI(t,e)}}function OI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Rpe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Ope(t){if(Array.isArray(t))return t}function Ipe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function II(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Dpe(r.key),r)}}function Npe(t,e,n){return e&&II(t.prototype,e),n&&II(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dpe(t){var e=Lpe(t,"string");return Jd(e)=="symbol"?e:e+""}function Lpe(t,e){if(Jd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var NI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,DI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,kpe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,jpe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,uV={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Upe=Object.keys(uV),fu="NaN";function Fpe(t,e){return t*uV[e]}var mg=function(){function t(e,n){Ipe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!kpe.test(n)&&(this.num=NaN,this.unit=""),Upe.includes(n)&&(this.num=Fpe(e,n),this.unit="px")}return Npe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=jpe.exec(n))!==null&&r!==void 0?r:[],o=ty(i,3),a=o[1],s=o[2];return new t(parseFloat(a),s??"")}}])}();function fV(t){if(t.includes(fu))return fu;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=NI.exec(e))!==null&&n!==void 0?n:[],i=ty(r,4),o=i[1],a=i[2],s=i[3],l=mg.parse(o??""),c=mg.parse(s??""),u=a==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return fu;e=e.replace(NI,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=DI.exec(e))!==null&&f!==void 0?f:[],d=ty(h,4),y=d[1],v=d[2],g=d[3],p=mg.parse(y??""),x=mg.parse(g??""),_=v==="+"?p.add(x):p.subtract(x);if(_.isNaN())return fu;e=e.replace(DI,_.toString())}return e}var LI=/\(([^()]*)\)/;function Vpe(t){for(var e=t;e.includes("(");){var n=LI.exec(e),r=ty(n,2),i=r[1];e=e.replace(LI,fV(i))}return e}function Bpe(t){var e=t.replace(/\s+/g,"");return e=Vpe(e),e=fV(e),e}function $pe(t){try{return Bpe(t)}catch{return fu}}function gb(t){var e=$pe(t.slice(5,-1));return e===fu?"":e}var zpe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Hpe=["dx","dy","angle","className","breakAll"];function Vw(){return Vw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vw.apply(this,arguments)}function kI(t,e){if(t==null)return{};var n=Gpe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Gpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function jI(t,e){return Kpe(t)||Xpe(t,e)||qpe(t,e)||Wpe()}function Wpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qpe(t,e){if(t){if(typeof t=="string")return UI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UI(t,e)}}function UI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xpe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Kpe(t){if(Array.isArray(t))return t}var hV=/[ \f\n\r\t\v\u2028\u2029]+/,dV=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var o=[];ft(n)||(r?o=n.toString().split(""):o=n.toString().split(hV));var a=o.map(function(l){return{word:l,width:cd(l,i).width}}),s=r?0:cd(" ",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}},Ype=function(e,n,r,i,o){var a=e.maxLines,s=e.children,l=e.style,c=e.breakAll,u=Ae(a),f=s,h=function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k.reduce(function(H,B){var F=B.word,q=B.width,K=H[H.length-1];if(K&&(i==null||o||K.width+q+r<Number(i)))K.words.push(F),K.width+=q+r;else{var z={words:[F],width:q};H.push(z)}return H},[])},d=h(n),y=function(k){return k.reduce(function(H,B){return H.width>B.width?H:B})};if(!u)return d;for(var v="…",g=function(k){var H=f.slice(0,k),B=dV({breakAll:c,style:l,children:H+v}).wordsWithComputedWidth,F=h(B),q=F.length>a||y(F).width>Number(i);return[q,F]},p=0,x=f.length-1,_=0,T;p<=x&&_<=f.length-1;){var w=Math.floor((p+x)/2),M=w-1,b=g(M),A=jI(b,2),E=A[0],P=A[1],R=g(w),N=jI(R,1),O=N[0];if(!E&&!O&&(p=w+1),E&&O&&(x=w-1),!E&&O){T=P;break}_++}return T||d},FI=function(e){var n=ft(e)?[]:e.toString().split(hV);return[{words:n}]},Qpe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,o=e.style,a=e.breakAll,s=e.maxLines;if((n||r)&&!so.isSsr){var l,c,u=dV({breakAll:a,children:i,style:o});if(u){var f=u.wordsWithComputedWidth,h=u.spaceWidth;l=f,c=h}else return FI(i);return Ype({breakAll:a,children:i,maxLines:s,style:o},l,c,n,r)}return FI(i)},VI="#808080",zl=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.lineHeight,s=a===void 0?"1em":a,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,f=u===void 0?!1:u,h=e.textAnchor,d=h===void 0?"start":h,y=e.verticalAnchor,v=y===void 0?"end":y,g=e.fill,p=g===void 0?VI:g,x=kI(e,zpe),_=V.useMemo(function(){return Qpe({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:f,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,f,x.style,x.width]),T=x.dx,w=x.dy,M=x.angle,b=x.className,A=x.breakAll,E=kI(x,Hpe);if(!Vn(r)||!Vn(o))return null;var P=r+(Ae(T)?T:0),R=o+(Ae(w)?w:0),N;switch(v){case"start":N=gb("calc(".concat(c,")"));break;case"middle":N=gb("calc(".concat((_.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:N=gb("calc(".concat(_.length-1," * -").concat(s,")"));break}var O=[];if(f){var D=_[0].width,k=x.width;O.push("scale(".concat((Ae(k)?k/D:1)/D,")"))}return M&&O.push("rotate(".concat(M,", ").concat(P,", ").concat(R,")")),O.length&&(E.transform=O.join(" ")),W.createElement("text",Vw({},Ke(E,!0),{x:P,y:R,className:_t("recharts-text",b),textAnchor:d,fill:p.includes("url")?VI:p}),_.map(function(H,B){var F=H.words.join(A?"":" ");return W.createElement("tspan",{x:P,dy:B===0?N:s,key:"".concat(F,"-").concat(B)},F)}))};function ms(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Zpe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function SA(t){let e,n,r;t.length!==2?(e=ms,n=(s,l)=>ms(t(s),l),r=(s,l)=>t(s)-l):(e=t===ms||t===Zpe?t:Jpe,n=t,r=t);function i(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(s[f],l)<0?c=f+1:u=f}while(c<u)}return c}function o(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(s[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function a(s,l,c=0,u=s.length){const f=i(s,l,c,u-1);return f>c&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:a,right:o}}function Jpe(){return 0}function pV(t){return t===null?NaN:+t}function*eme(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const tme=SA(ms),Qp=tme.right;SA(pV).center;class BI extends Map{constructor(e,n=ime){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get($I(this,e))}has(e){return super.has($I(this,e))}set(e,n){return super.set(nme(this,e),n)}delete(e){return super.delete(rme(this,e))}}function $I({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function nme({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function rme({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function ime(t){return t!==null&&typeof t=="object"?t.valueOf():t}function ome(t=ms){if(t===ms)return mV;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function mV(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const ame=Math.sqrt(50),sme=Math.sqrt(10),lme=Math.sqrt(2);function ny(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=ame?10:o>=sme?5:o>=lme?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/a,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?ny(t,e,n*2):[s,l,c]}function Bw(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?ny(e,t,n):ny(t,e,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let c=0;c<s;++c)l[c]=(o-c)/-a;else for(let c=0;c<s;++c)l[c]=(o-c)*a;else if(a<0)for(let c=0;c<s;++c)l[c]=(i+c)/-a;else for(let c=0;c<s;++c)l[c]=(i+c)*a;return l}function $w(t,e,n){return e=+e,t=+t,n=+n,ny(t,e,n)[2]}function zw(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?$w(e,t,n):$w(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function zI(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function HI(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function gV(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?mV:ome(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),d=Math.max(n,Math.floor(e-c*f/l+h)),y=Math.min(r,Math.floor(e+(l-c)*f/l+h));gV(t,e,d,y,i)}const o=t[e];let a=n,s=r;for(Mh(t,n,e),i(t[r],o)>0&&Mh(t,n,r);a<s;){for(Mh(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}i(t[n],o)===0?Mh(t,n,s):(++s,Mh(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Mh(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function cme(t,e,n){if(t=Float64Array.from(eme(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return HI(t);if(e>=1)return zI(t);var r,i=(r-1)*e,o=Math.floor(i),a=zI(gV(t,o).subarray(0,o+1)),s=HI(t.subarray(o+1));return a+(s-a)*(i-o)}}function ume(t,e,n=pV){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}}function fme(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Bi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Oa(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Hw=Symbol("implicit");function EA(){var t=new BI,e=[],n=[],r=Hw;function i(o){let a=t.get(o);if(a===void 0){if(r!==Hw)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new BI;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return EA(e,n).unknown(r)},Bi.apply(i,arguments),i}function ep(){var t=EA().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,s=!1,l=0,c=0,u=.5;delete t.unknown;function f(){var h=e().length,d=i<r,y=d?i:r,v=d?r:i;o=(v-y)/Math.max(1,h-l+c*2),s&&(o=Math.floor(o)),y+=(v-y-o*(h-l))*u,a=o*(1-l),s&&(y=Math.round(y),a=Math.round(a));var g=fme(h).map(function(p){return y+o*p});return n(d?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,f()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(h){return arguments.length?(s=!!h,f()):s},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),f()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},t.copy=function(){return ep(e(),[r,i]).round(s).paddingInner(l).paddingOuter(c).align(u)},Bi.apply(f(),arguments)}function vV(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return vV(e())},t}function ud(){return vV(ep.apply(null,arguments).paddingInner(1))}function TA(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function yV(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Zp(){}var tp=.7,ry=1/tp,Mu="\\s*([+-]?\\d+)\\s*",np="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Po="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hme=/^#([0-9a-f]{3,8})$/,dme=new RegExp(`^rgb\\(${Mu},${Mu},${Mu}\\)$`),pme=new RegExp(`^rgb\\(${Po},${Po},${Po}\\)$`),mme=new RegExp(`^rgba\\(${Mu},${Mu},${Mu},${np}\\)$`),gme=new RegExp(`^rgba\\(${Po},${Po},${Po},${np}\\)$`),vme=new RegExp(`^hsl\\(${np},${Po},${Po}\\)$`),yme=new RegExp(`^hsla\\(${np},${Po},${Po},${np}\\)$`),GI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};TA(Zp,rp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:WI,formatHex:WI,formatHex8:_me,formatHsl:xme,formatRgb:qI,toString:qI});function WI(){return this.rgb().formatHex()}function _me(){return this.rgb().formatHex8()}function xme(){return _V(this).formatHsl()}function qI(){return this.rgb().formatRgb()}function rp(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=hme.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?XI(e):n===3?new qr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?gg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?gg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=dme.exec(t))?new qr(e[1],e[2],e[3],1):(e=pme.exec(t))?new qr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=mme.exec(t))?gg(e[1],e[2],e[3],e[4]):(e=gme.exec(t))?gg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=vme.exec(t))?QI(e[1],e[2]/100,e[3]/100,1):(e=yme.exec(t))?QI(e[1],e[2]/100,e[3]/100,e[4]):GI.hasOwnProperty(t)?XI(GI[t]):t==="transparent"?new qr(NaN,NaN,NaN,0):null}function XI(t){return new qr(t>>16&255,t>>8&255,t&255,1)}function gg(t,e,n,r){return r<=0&&(t=e=n=NaN),new qr(t,e,n,r)}function bme(t){return t instanceof Zp||(t=rp(t)),t?(t=t.rgb(),new qr(t.r,t.g,t.b,t.opacity)):new qr}function Gw(t,e,n,r){return arguments.length===1?bme(t):new qr(t,e,n,r??1)}function qr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}TA(qr,Gw,yV(Zp,{brighter(t){return t=t==null?ry:Math.pow(ry,t),new qr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?tp:Math.pow(tp,t),new qr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new qr(Rl(this.r),Rl(this.g),Rl(this.b),iy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:KI,formatHex:KI,formatHex8:wme,formatRgb:YI,toString:YI}));function KI(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}`}function wme(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}${_l((isNaN(this.opacity)?1:this.opacity)*255)}`}function YI(){const t=iy(this.opacity);return`${t===1?"rgb(":"rgba("}${Rl(this.r)}, ${Rl(this.g)}, ${Rl(this.b)}${t===1?")":`, ${t})`}`}function iy(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Rl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _l(t){return t=Rl(t),(t<16?"0":"")+t.toString(16)}function QI(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new no(t,e,n,r)}function _V(t){if(t instanceof no)return new no(t.h,t.s,t.l,t.opacity);if(t instanceof Zp||(t=rp(t)),!t)return new no;if(t instanceof no)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new no(a,s,l,t.opacity)}function Sme(t,e,n,r){return arguments.length===1?_V(t):new no(t,e,n,r??1)}function no(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}TA(no,Sme,yV(Zp,{brighter(t){return t=t==null?ry:Math.pow(ry,t),new no(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?tp:Math.pow(tp,t),new no(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new qr(vb(t>=240?t-240:t+120,i,r),vb(t,i,r),vb(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new no(ZI(this.h),vg(this.s),vg(this.l),iy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=iy(this.opacity);return`${t===1?"hsl(":"hsla("}${ZI(this.h)}, ${vg(this.s)*100}%, ${vg(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ZI(t){return t=(t||0)%360,t<0?t+360:t}function vg(t){return Math.max(0,Math.min(1,t||0))}function vb(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const AA=t=>()=>t;function Eme(t,e){return function(n){return t+n*e}}function Tme(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Ame(t){return(t=+t)==1?xV:function(e,n){return n-e?Tme(e,n,t):AA(isNaN(e)?n:e)}}function xV(t,e){var n=e-t;return n?Eme(t,n):AA(isNaN(t)?e:t)}const JI=function t(e){var n=Ame(e);function r(i,o){var a=n((i=Gw(i)).r,(o=Gw(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),c=xV(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function Mme(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Pme(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Cme(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=zf(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function Rme(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function oy(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ome(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=zf(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Ww=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yb=new RegExp(Ww.source,"g");function Ime(t){return function(){return t}}function Nme(t){return function(e){return t(e)+""}}function Dme(t,e){var n=Ww.lastIndex=yb.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(t=t+"",e=e+"";(r=Ww.exec(t))&&(i=yb.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:oy(r,i)})),n=yb.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?Nme(l[0].x):Ime(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)s[(f=l[u]).i]=f.x(c);return s.join("")})}function zf(t,e){var n=typeof e,r;return e==null||n==="boolean"?AA(e):(n==="number"?oy:n==="string"?(r=rp(e))?(e=r,JI):Dme:e instanceof rp?JI:e instanceof Date?Rme:Pme(e)?Mme:Array.isArray(e)?Cme:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ome:oy)(t,e)}function MA(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Lme(t,e){e===void 0&&(e=t,t=zf);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function kme(t){return function(){return t}}function ay(t){return+t}var eN=[0,1];function Ur(t){return t}function qw(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:kme(isNaN(e)?NaN:.5)}function jme(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Ume(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=qw(i,r),o=n(a,o)):(r=qw(r,i),o=n(o,a)),function(s){return o(r(s))}}function Fme(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=qw(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var l=Qp(t,s,1,r)-1;return o[l](i[l](s))}}function Jp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function e_(){var t=eN,e=eN,n=zf,r,i,o,a=Ur,s,l,c;function u(){var h=Math.min(t.length,e.length);return a!==Ur&&(a=jme(t[0],t[h-1])),s=h>2?Fme:Ume,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?o:(l||(l=s(t.map(r),e,n)))(r(a(h)))}return f.invert=function(h){return a(i((c||(c=s(e,t.map(r),oy)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,ay),u()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=MA,u()},f.clamp=function(h){return arguments.length?(a=h?!0:Ur,u()):a!==Ur},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,d){return r=h,i=d,u()}}function PA(){return e_()(Ur,Ur)}function Vme(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function sy(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Qu(t){return t=sy(Math.abs(t)),t?t[1]:NaN}function Bme(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function $me(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var zme=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ip(t){if(!(e=zme.exec(t)))throw new Error("invalid format: "+t);var e;return new CA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ip.prototype=CA.prototype;function CA(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}CA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Hme(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var bV;function Gme(t,e){var n=sy(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(bV=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+sy(t,Math.max(0,e+o-1))[0]}function tN(t,e){var n=sy(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const nN={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Vme,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>tN(t*100,e),r:tN,s:Gme,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function rN(t){return t}var iN=Array.prototype.map,oN=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Wme(t){var e=t.grouping===void 0||t.thousands===void 0?rN:Bme(iN.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?rN:$me(iN.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=ip(f);var h=f.fill,d=f.align,y=f.sign,v=f.symbol,g=f.zero,p=f.width,x=f.comma,_=f.precision,T=f.trim,w=f.type;w==="n"?(x=!0,w="g"):nN[w]||(_===void 0&&(_=12),T=!0,w="g"),(g||h==="0"&&d==="=")&&(g=!0,h="0",d="=");var M=v==="$"?n:v==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",b=v==="$"?r:/[%p]/.test(w)?a:"",A=nN[w],E=/[defgprs%]/.test(w);_=_===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function P(R){var N=M,O=b,D,k,H;if(w==="c")O=A(R)+O,R="";else{R=+R;var B=R<0||1/R<0;if(R=isNaN(R)?l:A(Math.abs(R),_),T&&(R=Hme(R)),B&&+R==0&&y!=="+"&&(B=!1),N=(B?y==="("?y:s:y==="-"||y==="("?"":y)+N,O=(w==="s"?oN[8+bV/3]:"")+O+(B&&y==="("?")":""),E){for(D=-1,k=R.length;++D<k;)if(H=R.charCodeAt(D),48>H||H>57){O=(H===46?i+R.slice(D+1):R.slice(D))+O,R=R.slice(0,D);break}}}x&&!g&&(R=e(R,1/0));var F=N.length+R.length+O.length,q=F<p?new Array(p-F+1).join(h):"";switch(x&&g&&(R=e(q+R,q.length?p-O.length:1/0),q=""),d){case"<":R=N+R+O+q;break;case"=":R=N+q+R+O;break;case"^":R=q.slice(0,F=q.length>>1)+N+R+O+q.slice(F);break;default:R=q+N+R+O;break}return o(R)}return P.toString=function(){return f+""},P}function u(f,h){var d=c((f=ip(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(Qu(h)/3)))*3,v=Math.pow(10,-y),g=oN[8+y/3];return function(p){return d(v*p)+g}}return{format:c,formatPrefix:u}}var yg,RA,wV;qme({thousands:",",grouping:[3],currency:["$",""]});function qme(t){return yg=Wme(t),RA=yg.format,wV=yg.formatPrefix,yg}function Xme(t){return Math.max(0,-Qu(Math.abs(t)))}function Kme(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Qu(e)/3)))*3-Qu(Math.abs(t)))}function Yme(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Qu(e)-Qu(t))+1}function SV(t,e,n,r){var i=zw(t,e,n),o;switch(r=ip(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Kme(i,a))&&(r.precision=o),wV(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Yme(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Xme(i))&&(r.precision=o-(r.type==="%")*2);break}}return RA(r)}function js(t){var e=t.domain;return t.ticks=function(n){var r=e();return Bw(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return SV(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],l,c,u=10;for(s<a&&(c=a,a=s,s=c,c=i,i=o,o=c);u-- >0;){if(c=$w(a,s,n),c===l)return r[i]=a,r[o]=s,e(r);if(c>0)a=Math.floor(a/c)*c,s=Math.ceil(s/c)*c;else if(c<0)a=Math.ceil(a*c)/c,s=Math.floor(s*c)/c;else break;l=c}return t},t}function ly(){var t=PA();return t.copy=function(){return Jp(t,ly())},Bi.apply(t,arguments),js(t)}function EV(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,ay),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return EV(t).unknown(e)},t=arguments.length?Array.from(t,ay):[0,1],js(n)}function TV(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function aN(t){return Math.log(t)}function sN(t){return Math.exp(t)}function Qme(t){return-Math.log(-t)}function Zme(t){return-Math.exp(-t)}function Jme(t){return isFinite(t)?+("1e"+t):t<0?0:t}function ege(t){return t===10?Jme:t===Math.E?Math.exp:e=>Math.pow(t,e)}function tge(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function lN(t){return(e,n)=>-t(-e,n)}function OA(t){const e=t(aN,sN),n=e.domain;let r=10,i,o;function a(){return i=tge(r),o=ege(r),n()[0]<0?(i=lN(i),o=lN(o),t(Qme,Zme)):t(aN,sN),e}return e.base=function(s){return arguments.length?(r=+s,a()):r},e.domain=function(s){return arguments.length?(n(s),a()):n()},e.ticks=s=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=i(c),d=i(u),y,v;const g=s==null?10:+s;let p=[];if(!(r%1)&&d-h<g){if(h=Math.floor(h),d=Math.ceil(d),c>0){for(;h<=d;++h)for(y=1;y<r;++y)if(v=h<0?y/o(-h):y*o(h),!(v<c)){if(v>u)break;p.push(v)}}else for(;h<=d;++h)for(y=r-1;y>=1;--y)if(v=h>0?y/o(-h):y*o(h),!(v<c)){if(v>u)break;p.push(v)}p.length*2<g&&(p=Bw(c,u,g))}else p=Bw(h,d,Math.min(d-h,g)).map(o);return f?p.reverse():p},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=ip(l)).precision==null&&(l.trim=!0),l=RA(l)),s===1/0)return l;const c=Math.max(1,r*s/e.ticks().length);return u=>{let f=u/o(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},e.nice=()=>n(TV(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),e}function AV(){const t=OA(e_()).domain([1,10]);return t.copy=()=>Jp(t,AV()).base(t.base()),Bi.apply(t,arguments),t}function cN(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function uN(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function IA(t){var e=1,n=t(cN(e),uN(e));return n.constant=function(r){return arguments.length?t(cN(e=+r),uN(e)):e},js(n)}function MV(){var t=IA(e_());return t.copy=function(){return Jp(t,MV()).constant(t.constant())},Bi.apply(t,arguments)}function fN(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function nge(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function rge(t){return t<0?-t*t:t*t}function NA(t){var e=t(Ur,Ur),n=1;function r(){return n===1?t(Ur,Ur):n===.5?t(nge,rge):t(fN(n),fN(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},js(e)}function DA(){var t=NA(e_());return t.copy=function(){return Jp(t,DA()).exponent(t.exponent())},Bi.apply(t,arguments),t}function ige(){return DA.apply(null,arguments).exponent(.5)}function hN(t){return Math.sign(t)*t*t}function oge(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function PV(){var t=PA(),e=[0,1],n=!1,r;function i(o){var a=oge(t(o));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(o){return t.invert(hN(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,ay)).map(hN)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return PV(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Bi.apply(i,arguments),js(i)}function CV(){var t=[],e=[],n=[],r;function i(){var a=0,s=Math.max(1,e.length);for(n=new Array(s-1);++a<s;)n[a-1]=ume(t,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:e[Qp(n,a)]}return o.invertExtent=function(a){var s=e.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let s of a)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(ms),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return CV().domain(t).range(e).unknown(r)},Bi.apply(o,arguments)}function RV(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function a(l){return l!=null&&l<=l?i[Qp(r,l,0,n)]:o}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,s()):[t,e]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(o=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return RV().domain([t,e]).range(i).unknown(o)},Bi.apply(js(a),arguments)}function OV(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[Qp(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return OV().domain(t).range(e).unknown(n)},Bi.apply(i,arguments)}const _b=new Date,xb=new Date;function Gn(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const l=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;let c;do l.push(c=new Date(+o)),e(o,s),t(o);while(c<o&&o<a);return l},i.filter=o=>Gn(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(_b.setTime(+o),xb.setTime(+a),t(_b),t(xb),Math.floor(n(_b,xb))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const cy=Gn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);cy.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Gn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):cy);cy.range;const ia=1e3,Ii=ia*60,oa=Ii*60,wa=oa*24,LA=wa*7,dN=wa*30,bb=wa*365,xl=Gn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ia)},(t,e)=>(e-t)/ia,t=>t.getUTCSeconds());xl.range;const kA=Gn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ia)},(t,e)=>{t.setTime(+t+e*Ii)},(t,e)=>(e-t)/Ii,t=>t.getMinutes());kA.range;const jA=Gn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ii)},(t,e)=>(e-t)/Ii,t=>t.getUTCMinutes());jA.range;const UA=Gn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ia-t.getMinutes()*Ii)},(t,e)=>{t.setTime(+t+e*oa)},(t,e)=>(e-t)/oa,t=>t.getHours());UA.range;const FA=Gn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*oa)},(t,e)=>(e-t)/oa,t=>t.getUTCHours());FA.range;const em=Gn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ii)/wa,t=>t.getDate()-1);em.range;const t_=Gn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/wa,t=>t.getUTCDate()-1);t_.range;const IV=Gn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/wa,t=>Math.floor(t/wa));IV.range;function tc(t){return Gn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ii)/LA)}const n_=tc(0),uy=tc(1),age=tc(2),sge=tc(3),Zu=tc(4),lge=tc(5),cge=tc(6);n_.range;uy.range;age.range;sge.range;Zu.range;lge.range;cge.range;function nc(t){return Gn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/LA)}const r_=nc(0),fy=nc(1),uge=nc(2),fge=nc(3),Ju=nc(4),hge=nc(5),dge=nc(6);r_.range;fy.range;uge.range;fge.range;Ju.range;hge.range;dge.range;const VA=Gn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());VA.range;const BA=Gn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());BA.range;const Sa=Gn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Sa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Gn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Sa.range;const Ea=Gn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ea.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Gn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ea.range;function NV(t,e,n,r,i,o){const a=[[xl,1,ia],[xl,5,5*ia],[xl,15,15*ia],[xl,30,30*ia],[o,1,Ii],[o,5,5*Ii],[o,15,15*Ii],[o,30,30*Ii],[i,1,oa],[i,3,3*oa],[i,6,6*oa],[i,12,12*oa],[r,1,wa],[r,2,2*wa],[n,1,LA],[e,1,dN],[e,3,3*dN],[t,1,bb]];function s(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const d=f&&typeof f.range=="function"?f:l(c,u,f),y=d?d.range(c,+u+1):[];return h?y.reverse():y}function l(c,u,f){const h=Math.abs(u-c)/f,d=SA(([,,g])=>g).right(a,h);if(d===a.length)return t.every(zw(c/bb,u/bb,f));if(d===0)return cy.every(Math.max(zw(c,u,f),1));const[y,v]=a[h/a[d-1][2]<a[d][2]/h?d-1:d];return y.every(v)}return[s,l]}const[pge,mge]=NV(Ea,BA,r_,IV,FA,jA),[gge,vge]=NV(Sa,VA,n_,em,UA,kA);function wb(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Sb(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ph(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function yge(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,c=Ch(i),u=Rh(i),f=Ch(o),h=Rh(o),d=Ch(a),y=Rh(a),v=Ch(s),g=Rh(s),p=Ch(l),x=Rh(l),_={a:B,A:F,b:q,B:K,c:null,d:_N,e:_N,f:Bge,g:Qge,G:Jge,H:Uge,I:Fge,j:Vge,L:DV,m:$ge,M:zge,p:z,q:X,Q:wN,s:SN,S:Hge,u:Gge,U:Wge,V:qge,w:Xge,W:Kge,x:null,X:null,y:Yge,Y:Zge,Z:eve,"%":bN},T={a:ee,A:me,b:_e,B:Ne,c:null,d:xN,e:xN,f:ive,g:pve,G:gve,H:tve,I:nve,j:rve,L:kV,m:ove,M:ave,p:We,q:Ue,Q:wN,s:SN,S:sve,u:lve,U:cve,V:uve,w:fve,W:hve,x:null,X:null,y:dve,Y:mve,Z:vve,"%":bN},w={a:P,A:R,b:N,B:O,c:D,d:vN,e:vN,f:Dge,g:gN,G:mN,H:yN,I:yN,j:Rge,L:Nge,m:Cge,M:Oge,p:E,q:Pge,Q:kge,s:jge,S:Ige,u:Sge,U:Ege,V:Tge,w:wge,W:Age,x:k,X:H,y:gN,Y:mN,Z:Mge,"%":Lge};_.x=M(n,_),_.X=M(r,_),_.c=M(e,_),T.x=M(n,T),T.X=M(r,T),T.c=M(e,T);function M(fe,Re){return function(Ee){var G=[],lt=-1,be=0,Le=fe.length,ke,mt,Ye;for(Ee instanceof Date||(Ee=new Date(+Ee));++lt<Le;)fe.charCodeAt(lt)===37&&(G.push(fe.slice(be,lt)),(mt=pN[ke=fe.charAt(++lt)])!=null?ke=fe.charAt(++lt):mt=ke==="e"?" ":"0",(Ye=Re[ke])&&(ke=Ye(Ee,mt)),G.push(ke),be=lt+1);return G.push(fe.slice(be,lt)),G.join("")}}function b(fe,Re){return function(Ee){var G=Ph(1900,void 0,1),lt=A(G,fe,Ee+="",0),be,Le;if(lt!=Ee.length)return null;if("Q"in G)return new Date(G.Q);if("s"in G)return new Date(G.s*1e3+("L"in G?G.L:0));if(Re&&!("Z"in G)&&(G.Z=0),"p"in G&&(G.H=G.H%12+G.p*12),G.m===void 0&&(G.m="q"in G?G.q:0),"V"in G){if(G.V<1||G.V>53)return null;"w"in G||(G.w=1),"Z"in G?(be=Sb(Ph(G.y,0,1)),Le=be.getUTCDay(),be=Le>4||Le===0?fy.ceil(be):fy(be),be=t_.offset(be,(G.V-1)*7),G.y=be.getUTCFullYear(),G.m=be.getUTCMonth(),G.d=be.getUTCDate()+(G.w+6)%7):(be=wb(Ph(G.y,0,1)),Le=be.getDay(),be=Le>4||Le===0?uy.ceil(be):uy(be),be=em.offset(be,(G.V-1)*7),G.y=be.getFullYear(),G.m=be.getMonth(),G.d=be.getDate()+(G.w+6)%7)}else("W"in G||"U"in G)&&("w"in G||(G.w="u"in G?G.u%7:"W"in G?1:0),Le="Z"in G?Sb(Ph(G.y,0,1)).getUTCDay():wb(Ph(G.y,0,1)).getDay(),G.m=0,G.d="W"in G?(G.w+6)%7+G.W*7-(Le+5)%7:G.w+G.U*7-(Le+6)%7);return"Z"in G?(G.H+=G.Z/100|0,G.M+=G.Z%100,Sb(G)):wb(G)}}function A(fe,Re,Ee,G){for(var lt=0,be=Re.length,Le=Ee.length,ke,mt;lt<be;){if(G>=Le)return-1;if(ke=Re.charCodeAt(lt++),ke===37){if(ke=Re.charAt(lt++),mt=w[ke in pN?Re.charAt(lt++):ke],!mt||(G=mt(fe,Ee,G))<0)return-1}else if(ke!=Ee.charCodeAt(G++))return-1}return G}function E(fe,Re,Ee){var G=c.exec(Re.slice(Ee));return G?(fe.p=u.get(G[0].toLowerCase()),Ee+G[0].length):-1}function P(fe,Re,Ee){var G=d.exec(Re.slice(Ee));return G?(fe.w=y.get(G[0].toLowerCase()),Ee+G[0].length):-1}function R(fe,Re,Ee){var G=f.exec(Re.slice(Ee));return G?(fe.w=h.get(G[0].toLowerCase()),Ee+G[0].length):-1}function N(fe,Re,Ee){var G=p.exec(Re.slice(Ee));return G?(fe.m=x.get(G[0].toLowerCase()),Ee+G[0].length):-1}function O(fe,Re,Ee){var G=v.exec(Re.slice(Ee));return G?(fe.m=g.get(G[0].toLowerCase()),Ee+G[0].length):-1}function D(fe,Re,Ee){return A(fe,e,Re,Ee)}function k(fe,Re,Ee){return A(fe,n,Re,Ee)}function H(fe,Re,Ee){return A(fe,r,Re,Ee)}function B(fe){return a[fe.getDay()]}function F(fe){return o[fe.getDay()]}function q(fe){return l[fe.getMonth()]}function K(fe){return s[fe.getMonth()]}function z(fe){return i[+(fe.getHours()>=12)]}function X(fe){return 1+~~(fe.getMonth()/3)}function ee(fe){return a[fe.getUTCDay()]}function me(fe){return o[fe.getUTCDay()]}function _e(fe){return l[fe.getUTCMonth()]}function Ne(fe){return s[fe.getUTCMonth()]}function We(fe){return i[+(fe.getUTCHours()>=12)]}function Ue(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var Re=M(fe+="",_);return Re.toString=function(){return fe},Re},parse:function(fe){var Re=b(fe+="",!1);return Re.toString=function(){return fe},Re},utcFormat:function(fe){var Re=M(fe+="",T);return Re.toString=function(){return fe},Re},utcParse:function(fe){var Re=b(fe+="",!0);return Re.toString=function(){return fe},Re}}}var pN={"-":"",_:" ",0:"0"},er=/^\s*\d+/,_ge=/^%/,xge=/[\\^$*+?|[\]().{}]/g;function Lt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function bge(t){return t.replace(xge,"\\$&")}function Ch(t){return new RegExp("^(?:"+t.map(bge).join("|")+")","i")}function Rh(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function wge(t,e,n){var r=er.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Sge(t,e,n){var r=er.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Ege(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Tge(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Age(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function mN(t,e,n){var r=er.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function gN(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Mge(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Pge(t,e,n){var r=er.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Cge(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function vN(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Rge(t,e,n){var r=er.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function yN(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Oge(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ige(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Nge(t,e,n){var r=er.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Dge(t,e,n){var r=er.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Lge(t,e,n){var r=_ge.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function kge(t,e,n){var r=er.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function jge(t,e,n){var r=er.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function _N(t,e){return Lt(t.getDate(),e,2)}function Uge(t,e){return Lt(t.getHours(),e,2)}function Fge(t,e){return Lt(t.getHours()%12||12,e,2)}function Vge(t,e){return Lt(1+em.count(Sa(t),t),e,3)}function DV(t,e){return Lt(t.getMilliseconds(),e,3)}function Bge(t,e){return DV(t,e)+"000"}function $ge(t,e){return Lt(t.getMonth()+1,e,2)}function zge(t,e){return Lt(t.getMinutes(),e,2)}function Hge(t,e){return Lt(t.getSeconds(),e,2)}function Gge(t){var e=t.getDay();return e===0?7:e}function Wge(t,e){return Lt(n_.count(Sa(t)-1,t),e,2)}function LV(t){var e=t.getDay();return e>=4||e===0?Zu(t):Zu.ceil(t)}function qge(t,e){return t=LV(t),Lt(Zu.count(Sa(t),t)+(Sa(t).getDay()===4),e,2)}function Xge(t){return t.getDay()}function Kge(t,e){return Lt(uy.count(Sa(t)-1,t),e,2)}function Yge(t,e){return Lt(t.getFullYear()%100,e,2)}function Qge(t,e){return t=LV(t),Lt(t.getFullYear()%100,e,2)}function Zge(t,e){return Lt(t.getFullYear()%1e4,e,4)}function Jge(t,e){var n=t.getDay();return t=n>=4||n===0?Zu(t):Zu.ceil(t),Lt(t.getFullYear()%1e4,e,4)}function eve(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Lt(e/60|0,"0",2)+Lt(e%60,"0",2)}function xN(t,e){return Lt(t.getUTCDate(),e,2)}function tve(t,e){return Lt(t.getUTCHours(),e,2)}function nve(t,e){return Lt(t.getUTCHours()%12||12,e,2)}function rve(t,e){return Lt(1+t_.count(Ea(t),t),e,3)}function kV(t,e){return Lt(t.getUTCMilliseconds(),e,3)}function ive(t,e){return kV(t,e)+"000"}function ove(t,e){return Lt(t.getUTCMonth()+1,e,2)}function ave(t,e){return Lt(t.getUTCMinutes(),e,2)}function sve(t,e){return Lt(t.getUTCSeconds(),e,2)}function lve(t){var e=t.getUTCDay();return e===0?7:e}function cve(t,e){return Lt(r_.count(Ea(t)-1,t),e,2)}function jV(t){var e=t.getUTCDay();return e>=4||e===0?Ju(t):Ju.ceil(t)}function uve(t,e){return t=jV(t),Lt(Ju.count(Ea(t),t)+(Ea(t).getUTCDay()===4),e,2)}function fve(t){return t.getUTCDay()}function hve(t,e){return Lt(fy.count(Ea(t)-1,t),e,2)}function dve(t,e){return Lt(t.getUTCFullYear()%100,e,2)}function pve(t,e){return t=jV(t),Lt(t.getUTCFullYear()%100,e,2)}function mve(t,e){return Lt(t.getUTCFullYear()%1e4,e,4)}function gve(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ju(t):Ju.ceil(t),Lt(t.getUTCFullYear()%1e4,e,4)}function vve(){return"+0000"}function bN(){return"%"}function wN(t){return+t}function SN(t){return Math.floor(+t/1e3)}var Dc,UV,FV;yve({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function yve(t){return Dc=yge(t),UV=Dc.format,Dc.parse,FV=Dc.utcFormat,Dc.utcParse,Dc}function _ve(t){return new Date(t)}function xve(t){return t instanceof Date?+t:+new Date(+t)}function $A(t,e,n,r,i,o,a,s,l,c){var u=PA(),f=u.invert,h=u.domain,d=c(".%L"),y=c(":%S"),v=c("%I:%M"),g=c("%I %p"),p=c("%a %d"),x=c("%b %d"),_=c("%B"),T=c("%Y");function w(M){return(l(M)<M?d:s(M)<M?y:a(M)<M?v:o(M)<M?g:r(M)<M?i(M)<M?p:x:n(M)<M?_:T)(M)}return u.invert=function(M){return new Date(f(M))},u.domain=function(M){return arguments.length?h(Array.from(M,xve)):h().map(_ve)},u.ticks=function(M){var b=h();return t(b[0],b[b.length-1],M??10)},u.tickFormat=function(M,b){return b==null?w:c(b)},u.nice=function(M){var b=h();return(!M||typeof M.range!="function")&&(M=e(b[0],b[b.length-1],M??10)),M?h(TV(b,M)):u},u.copy=function(){return Jp(u,$A(t,e,n,r,i,o,a,s,l,c))},u}function bve(){return Bi.apply($A(gge,vge,Sa,VA,n_,em,UA,kA,xl,UV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wve(){return Bi.apply($A(pge,mge,Ea,BA,r_,t_,FA,jA,xl,FV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function i_(){var t=0,e=1,n,r,i,o,a=Ur,s=!1,l;function c(f){return f==null||isNaN(f=+f)?l:a(i===0?.5:(f=(o(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([t,e]=f,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(f){return arguments.length?(s=!!f,c):s},c.interpolator=function(f){return arguments.length?(a=f,c):a};function u(f){return function(h){var d,y;return arguments.length?([d,y]=h,a=f(d,y),c):[a(0),a(1)]}}return c.range=u(zf),c.rangeRound=u(MA),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return o=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),c}}function Us(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function VV(){var t=js(i_()(Ur));return t.copy=function(){return Us(t,VV())},Oa.apply(t,arguments)}function BV(){var t=OA(i_()).domain([1,10]);return t.copy=function(){return Us(t,BV()).base(t.base())},Oa.apply(t,arguments)}function $V(){var t=IA(i_());return t.copy=function(){return Us(t,$V()).constant(t.constant())},Oa.apply(t,arguments)}function zA(){var t=NA(i_());return t.copy=function(){return Us(t,zA()).exponent(t.exponent())},Oa.apply(t,arguments)}function Sve(){return zA.apply(null,arguments).exponent(.5)}function zV(){var t=[],e=Ur;function n(r){if(r!=null&&!isNaN(r=+r))return e((Qp(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ms),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>cme(t,o/r))},n.copy=function(){return zV(e).domain(t)},Oa.apply(n,arguments)}function o_(){var t=0,e=.5,n=1,r=1,i,o,a,s,l,c=Ur,u,f=!1,h;function d(v){return isNaN(v=+v)?h:(v=.5+((v=+u(v))-o)*(r*v<r*o?s:l),c(f?Math.max(0,Math.min(1,v)):v))}d.domain=function(v){return arguments.length?([t,e,n]=v,i=u(t=+t),o=u(e=+e),a=u(n=+n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,d):[t,e,n]},d.clamp=function(v){return arguments.length?(f=!!v,d):f},d.interpolator=function(v){return arguments.length?(c=v,d):c};function y(v){return function(g){var p,x,_;return arguments.length?([p,x,_]=g,c=Lme(v,[p,x,_]),d):[c(0),c(.5),c(1)]}}return d.range=y(zf),d.rangeRound=y(MA),d.unknown=function(v){return arguments.length?(h=v,d):h},function(v){return u=v,i=v(t),o=v(e),a=v(n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,d}}function HV(){var t=js(o_()(Ur));return t.copy=function(){return Us(t,HV())},Oa.apply(t,arguments)}function GV(){var t=OA(o_()).domain([.1,1,10]);return t.copy=function(){return Us(t,GV()).base(t.base())},Oa.apply(t,arguments)}function WV(){var t=IA(o_());return t.copy=function(){return Us(t,WV()).constant(t.constant())},Oa.apply(t,arguments)}function HA(){var t=NA(o_());return t.copy=function(){return Us(t,HA()).exponent(t.exponent())},Oa.apply(t,arguments)}function Eve(){return HA.apply(null,arguments).exponent(.5)}const EN=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ep,scaleDiverging:HV,scaleDivergingLog:GV,scaleDivergingPow:HA,scaleDivergingSqrt:Eve,scaleDivergingSymlog:WV,scaleIdentity:EV,scaleImplicit:Hw,scaleLinear:ly,scaleLog:AV,scaleOrdinal:EA,scalePoint:ud,scalePow:DA,scaleQuantile:CV,scaleQuantize:RV,scaleRadial:PV,scaleSequential:VV,scaleSequentialLog:BV,scaleSequentialPow:zA,scaleSequentialQuantile:zV,scaleSequentialSqrt:Sve,scaleSequentialSymlog:$V,scaleSqrt:ige,scaleSymlog:MV,scaleThreshold:OV,scaleTime:bve,scaleUtc:wve,tickFormat:SV},Symbol.toStringTag,{value:"Module"}));var Tve=Df;function Ave(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(a!=null&&(s===void 0?a===a&&!Tve(a):n(a,s)))var s=a,l=o}return l}var a_=Ave;function Mve(t,e){return t>e}var qV=Mve,Pve=a_,Cve=qV,Rve=$f;function Ove(t){return t&&t.length?Pve(t,Rve,Cve):void 0}var Ive=Ove;const ts=Ft(Ive);function Nve(t,e){return t<e}var XV=Nve,Dve=a_,Lve=XV,kve=$f;function jve(t){return t&&t.length?Dve(t,kve,Lve):void 0}var Uve=jve;const s_=Ft(Uve);var Fve=iA,Vve=Fo,Bve=nV,$ve=Zr;function zve(t,e){var n=$ve(t)?Fve:Bve;return n(t,Vve(e))}var Hve=zve,Gve=eV,Wve=Hve;function qve(t,e){return Gve(Wve(t,e),1)}var Xve=qve;const Kve=Ft(Xve);var Yve=_A;function Qve(t,e){return Yve(t,e)}var Zve=Qve;const Hl=Ft(Zve);var Hf=1e9,Jve={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},WA,un=!0,Fi="[DecimalError] ",Ol=Fi+"Invalid argument: ",GA=Fi+"Exponent out of range: ",Gf=Math.floor,sl=Math.pow,eye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,li,Xn=1e7,rn=7,KV=9007199254740991,hy=Gf(KV/rn),ze={};ze.absoluteValue=ze.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ze.comparedTo=ze.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};ze.decimalPlaces=ze.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*rn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};ze.dividedBy=ze.div=function(t){return pa(this,new this.constructor(t))};ze.dividedToIntegerBy=ze.idiv=function(t){var e=this,n=e.constructor;return qt(pa(e,new n(t),0,1),n.precision)};ze.equals=ze.eq=function(t){return!this.cmp(t)};ze.exponent=function(){return Nn(this)};ze.greaterThan=ze.gt=function(t){return this.cmp(t)>0};ze.greaterThanOrEqualTo=ze.gte=function(t){return this.cmp(t)>=0};ze.isInteger=ze.isint=function(){return this.e>this.d.length-2};ze.isNegative=ze.isneg=function(){return this.s<0};ze.isPositive=ze.ispos=function(){return this.s>0};ze.isZero=function(){return this.s===0};ze.lessThan=ze.lt=function(t){return this.cmp(t)<0};ze.lessThanOrEqualTo=ze.lte=function(t){return this.cmp(t)<1};ze.logarithm=ze.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(li))throw Error(Fi+"NaN");if(n.s<1)throw Error(Fi+(n.s?"NaN":"-Infinity"));return n.eq(li)?new r(0):(un=!1,e=pa(op(n,o),op(t,o),o),un=!0,qt(e,i))};ze.minus=ze.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?ZV(e,t):YV(e,(t.s=-t.s,t))};ze.modulo=ze.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Fi+"NaN");return n.s?(un=!1,e=pa(n,t,0,1).times(t),un=!0,n.minus(e)):qt(new r(n),i)};ze.naturalExponential=ze.exp=function(){return QV(this)};ze.naturalLogarithm=ze.ln=function(){return op(this)};ze.negated=ze.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ze.plus=ze.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?YV(e,t):ZV(e,(t.s=-t.s,t))};ze.precision=ze.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ol+t);if(e=Nn(i)+1,r=i.d.length-1,n=r*rn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};ze.squareRoot=ze.sqrt=function(){var t,e,n,r,i,o,a,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(Fi+"NaN")}for(t=Nn(s),un=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=bo(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Gf((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=a=n+3;;)if(o=r,r=o.plus(pa(s,o,a+2)).times(.5),bo(o.d).slice(0,a)===(e=bo(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(qt(o,n+1,0),o.times(o).eq(s)){r=o;break}}else if(e!="9999")break;a+=4}return un=!0,qt(r,n)};ze.times=ze.mul=function(t){var e,n,r,i,o,a,s,l,c,u=this,f=u.constructor,h=u.d,d=(t=new f(t)).d;if(!u.s||!t.s)return new f(0);for(t.s*=u.s,n=u.e+t.e,l=h.length,c=d.length,l<c&&(o=h,h=d,d=o,a=l,l=c,c=a),o=[],a=l+c,r=a;r--;)o.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)s=o[i]+d[r]*h[i-r-1]+e,o[i--]=s%Xn|0,e=s/Xn|0;o[i]=(o[i]+e)%Xn|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,un?qt(t,f.precision):t};ze.toDecimalPlaces=ze.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Do(t,0,Hf),e===void 0?e=r.rounding:Do(e,0,8),qt(n,t+Nn(n)+1,e))};ze.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Gl(r,!0):(Do(t,0,Hf),e===void 0?e=i.rounding:Do(e,0,8),r=qt(new i(r),t+1,e),n=Gl(r,!0,t+1)),n};ze.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?Gl(i):(Do(t,0,Hf),e===void 0?e=o.rounding:Do(e,0,8),r=qt(new o(i),t+Nn(i)+1,e),n=Gl(r.abs(),!1,t+Nn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};ze.toInteger=ze.toint=function(){var t=this,e=t.constructor;return qt(new e(t),Nn(t)+1,e.rounding)};ze.toNumber=function(){return+this};ze.toPower=ze.pow=function(t){var e,n,r,i,o,a,s=this,l=s.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(li);if(s=new l(s),!s.s){if(t.s<1)throw Error(Fi+"Infinity");return s}if(s.eq(li))return s;if(r=l.precision,t.eq(li))return qt(s,r);if(e=t.e,n=t.d.length-1,a=e>=n,o=s.s,a){if((n=u<0?-u:u)<=KV){for(i=new l(li),e=Math.ceil(r/rn+4),un=!1;n%2&&(i=i.times(s),AN(i.d,e)),n=Gf(n/2),n!==0;)s=s.times(s),AN(s.d,e);return un=!0,t.s<0?new l(li).div(i):qt(i,r)}}else if(o<0)throw Error(Fi+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,s.s=1,un=!1,i=t.times(op(s,r+c)),un=!0,i=QV(i),i.s=o,i};ze.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Nn(i),r=Gl(i,n<=o.toExpNeg||n>=o.toExpPos)):(Do(t,1,Hf),e===void 0?e=o.rounding:Do(e,0,8),i=qt(new o(i),t,e),n=Nn(i),r=Gl(i,t<=n||n<=o.toExpNeg,t)),r};ze.toSignificantDigits=ze.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Do(t,1,Hf),e===void 0?e=r.rounding:Do(e,0,8)),qt(new r(n),t,e)};ze.toString=ze.valueOf=ze.val=ze.toJSON=ze[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Nn(t),n=t.constructor;return Gl(t,e<=n.toExpNeg||e>=n.toExpPos)};function YV(t,e){var n,r,i,o,a,s,l,c,u=t.constructor,f=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),un?qt(e,f):e;if(l=t.d,c=e.d,a=t.e,i=e.e,l=l.slice(),o=a-i,o){for(o<0?(r=l,o=-o,s=c.length):(r=c,i=a,s=l.length),a=Math.ceil(f/rn),s=a>s?a+1:s+1,o>s&&(o=s,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(s=l.length,o=c.length,s-o<0&&(o=s,r=c,c=l,l=r),n=0;o;)n=(l[--o]=l[o]+c[o]+n)/Xn|0,l[o]%=Xn;for(n&&(l.unshift(n),++i),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=i,un?qt(e,f):e}function Do(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Ol+t)}function bo(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",n=rn-r.length,n&&(o+=qa(n)),o+=r;a=t[e],r=a+"",n=rn-r.length,n&&(o+=qa(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var pa=function(){function t(r,i){var o,a=0,s=r.length;for(r=r.slice();s--;)o=r[s]*i+a,r[s]=o%Xn|0,a=o/Xn|0;return a&&r.unshift(a),r}function e(r,i,o,a){var s,l;if(o!=a)l=o>a?1:-1;else for(s=l=0;s<o;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function n(r,i,o){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*Xn+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,a){var s,l,c,u,f,h,d,y,v,g,p,x,_,T,w,M,b,A,E=r.constructor,P=r.s==i.s?1:-1,R=r.d,N=i.d;if(!r.s)return new E(r);if(!i.s)throw Error(Fi+"Division by zero");for(l=r.e-i.e,b=N.length,w=R.length,d=new E(P),y=d.d=[],c=0;N[c]==(R[c]||0);)++c;if(N[c]>(R[c]||0)&&--l,o==null?x=o=E.precision:a?x=o+(Nn(r)-Nn(i))+1:x=o,x<0)return new E(0);if(x=x/rn+2|0,c=0,b==1)for(u=0,N=N[0],x++;(c<w||u)&&x--;c++)_=u*Xn+(R[c]||0),y[c]=_/N|0,u=_%N|0;else{for(u=Xn/(N[0]+1)|0,u>1&&(N=t(N,u),R=t(R,u),b=N.length,w=R.length),T=b,v=R.slice(0,b),g=v.length;g<b;)v[g++]=0;A=N.slice(),A.unshift(0),M=N[0],N[1]>=Xn/2&&++M;do u=0,s=e(N,v,b,g),s<0?(p=v[0],b!=g&&(p=p*Xn+(v[1]||0)),u=p/M|0,u>1?(u>=Xn&&(u=Xn-1),f=t(N,u),h=f.length,g=v.length,s=e(f,v,h,g),s==1&&(u--,n(f,b<h?A:N,h))):(u==0&&(s=u=1),f=N.slice()),h=f.length,h<g&&f.unshift(0),n(v,f,g),s==-1&&(g=v.length,s=e(N,v,b,g),s<1&&(u++,n(v,b<g?A:N,g))),g=v.length):s===0&&(u++,v=[0]),y[c++]=u,s&&v[0]?v[g++]=R[T]||0:(v=[R[T]],g=1);while((T++<w||v[0]!==void 0)&&x--)}return y[0]||y.shift(),d.e=l,qt(d,a?o+Nn(d)+1:o)}}();function QV(t,e){var n,r,i,o,a,s,l=0,c=0,u=t.constructor,f=u.precision;if(Nn(t)>16)throw Error(GA+Nn(t));if(!t.s)return new u(li);for(e==null?(un=!1,s=f):s=e,a=new u(.03125);t.abs().gte(.1);)t=t.times(a),c+=5;for(r=Math.log(sl(2,c))/Math.LN10*2+5|0,s+=r,n=i=o=new u(li),u.precision=s;;){if(i=qt(i.times(t),s),n=n.times(++l),a=o.plus(pa(i,n,s)),bo(a.d).slice(0,s)===bo(o.d).slice(0,s)){for(;c--;)o=qt(o.times(o),s);return u.precision=f,e==null?(un=!0,qt(o,f)):o}o=a}}function Nn(t){for(var e=t.e*rn,n=t.d[0];n>=10;n/=10)e++;return e}function Eb(t,e,n){if(e>t.LN10.sd())throw un=!0,n&&(t.precision=n),Error(Fi+"LN10 precision limit exceeded");return qt(new t(t.LN10),e)}function qa(t){for(var e="";t--;)e+="0";return e}function op(t,e){var n,r,i,o,a,s,l,c,u,f=1,h=10,d=t,y=d.d,v=d.constructor,g=v.precision;if(d.s<1)throw Error(Fi+(d.s?"NaN":"-Infinity"));if(d.eq(li))return new v(0);if(e==null?(un=!1,c=g):c=e,d.eq(10))return e==null&&(un=!0),Eb(v,c);if(c+=h,v.precision=c,n=bo(y),r=n.charAt(0),o=Nn(d),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)d=d.times(t),n=bo(d.d),r=n.charAt(0),f++;o=Nn(d),r>1?(d=new v("0."+n),o++):d=new v(r+"."+n.slice(1))}else return l=Eb(v,c+2,g).times(o+""),d=op(new v(r+"."+n.slice(1)),c-h).plus(l),v.precision=g,e==null?(un=!0,qt(d,g)):d;for(s=a=d=pa(d.minus(li),d.plus(li),c),u=qt(d.times(d),c),i=3;;){if(a=qt(a.times(u),c),l=s.plus(pa(a,new v(i),c)),bo(l.d).slice(0,c)===bo(s.d).slice(0,c))return s=s.times(2),o!==0&&(s=s.plus(Eb(v,c+2,g).times(o+""))),s=pa(s,new v(f),c),v.precision=g,e==null?(un=!0,qt(s,g)):s;s=l,i+=2}}function TN(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Gf(n/rn),t.d=[],r=(n+1)%rn,n<0&&(r+=rn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=rn;r<i;)t.d.push(+e.slice(r,r+=rn));e=e.slice(r),r=rn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),un&&(t.e>hy||t.e<-hy))throw Error(GA+n)}else t.s=0,t.e=0,t.d=[0];return t}function qt(t,e,n){var r,i,o,a,s,l,c,u,f=t.d;for(a=1,o=f[0];o>=10;o/=10)a++;if(r=e-a,r<0)r+=rn,i=e,c=f[u=0];else{if(u=Math.ceil((r+1)/rn),o=f.length,u>=o)return t;for(c=o=f[u],a=1;o>=10;o/=10)a++;r%=rn,i=r-rn+a}if(n!==void 0&&(o=sl(10,a-i-1),s=c/o%10|0,l=e<0||f[u+1]!==void 0||c%o,l=n<4?(s||l)&&(n==0||n==(t.s<0?3:2)):s>5||s==5&&(n==4||l||n==6&&(r>0?i>0?c/sl(10,a-i):0:f[u-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return l?(o=Nn(t),f.length=1,e=e-o-1,f[0]=sl(10,(rn-e%rn)%rn),t.e=Gf(-e/rn)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=u,o=1,u--):(f.length=u+1,o=sl(10,rn-r),f[u]=i>0?(c/sl(10,a-i)%sl(10,i)|0)*o:0),l)for(;;)if(u==0){(f[0]+=o)==Xn&&(f[0]=1,++t.e);break}else{if(f[u]+=o,f[u]!=Xn)break;f[u--]=0,o=1}for(r=f.length;f[--r]===0;)f.pop();if(un&&(t.e>hy||t.e<-hy))throw Error(GA+Nn(t));return t}function ZV(t,e){var n,r,i,o,a,s,l,c,u,f,h=t.constructor,d=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),un?qt(e,d):e;if(l=t.d,f=e.d,r=e.e,c=t.e,l=l.slice(),a=c-r,a){for(u=a<0,u?(n=l,a=-a,s=f.length):(n=f,r=c,s=l.length),i=Math.max(Math.ceil(d/rn),s)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=l.length,s=f.length,u=i<s,u&&(s=i),i=0;i<s;i++)if(l[i]!=f[i]){u=l[i]<f[i];break}a=0}for(u&&(n=l,l=f,f=n,e.s=-e.s),s=l.length,i=f.length-s;i>0;--i)l[s++]=0;for(i=f.length;i>a;){if(l[--i]<f[i]){for(o=i;o&&l[--o]===0;)l[o]=Xn-1;--l[o],l[i]+=Xn}l[i]-=f[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,un?qt(e,d):e):new h(0)}function Gl(t,e,n){var r,i=Nn(t),o=bo(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+qa(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+qa(-i-1)+o,n&&(r=n-a)>0&&(o+=qa(r))):i>=a?(o+=qa(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+qa(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=qa(r))),t.s<0?"-"+o:o}function AN(t,e){if(t.length>e)return t.length=e,!0}function JV(t){var e,n,r;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Ol+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return TN(a,o.toString())}else if(typeof o!="string")throw Error(Ol+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,eye.test(o))TN(a,o);else throw Error(Ol+o)}if(i.prototype=ze,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=JV,i.config=i.set=tye,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function tye(t){if(!t||typeof t!="object")throw Error(Fi+"Object expected");var e,n,r,i=["precision",1,Hf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Gf(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Ol+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ol+n+": "+r);return this}var WA=JV(Jve);li=new WA(1);const Ht=WA;function nye(t){return aye(t)||oye(t)||iye(t)||rye()}function rye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iye(t,e){if(t){if(typeof t=="string")return Xw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xw(t,e)}}function oye(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function aye(t){if(Array.isArray(t))return Xw(t)}function Xw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var sye=function(e){return e},e5={"@@functional/placeholder":!0},t5=function(e){return e===e5},MN=function(e){return function n(){return arguments.length===0||arguments.length===1&&t5(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},lye=function t(e,n){return e===1?n:MN(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter(function(s){return s!==e5}).length;return a>=e?n.apply(void 0,i):t(e-a,MN(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var u=i.map(function(f){return t5(f)?l.shift():f});return n.apply(void 0,nye(u).concat(l))}))})},l_=function(e){return lye(e.length,e)},Kw=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},cye=l_(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),uye=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return sye;var i=n.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce(function(s,l){return l(s)},o.apply(void 0,arguments))}},Yw=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},n5=function(e){var n=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n&&o.every(function(s,l){return s===n[l]})||(n=o,r=e.apply(void 0,o)),r}};function fye(t){var e;return t===0?e=1:e=Math.floor(new Ht(t).abs().log(10).toNumber())+1,e}function hye(t,e,n){for(var r=new Ht(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var dye=l_(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),pye=l_(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),mye=l_(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const c_={rangeStep:hye,getDigitCount:fye,interpolateNumber:dye,uninterpolateNumber:pye,uninterpolateTruncation:mye};function Qw(t){return yye(t)||vye(t)||r5(t)||gye()}function gye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vye(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function yye(t){if(Array.isArray(t))return Zw(t)}function ap(t,e){return bye(t)||xye(t,e)||r5(t,e)||_ye()}function _ye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r5(t,e){if(t){if(typeof t=="string")return Zw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zw(t,e)}}function Zw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xye(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw o}}return n}}function bye(t){if(Array.isArray(t))return t}function i5(t){var e=ap(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function o5(t,e,n){if(t.lte(0))return new Ht(0);var r=c_.getDigitCount(t.toNumber()),i=new Ht(10).pow(r),o=t.div(i),a=r!==1?.05:.1,s=new Ht(Math.ceil(o.div(a).toNumber())).add(n).mul(a),l=s.mul(i);return e?l:new Ht(Math.ceil(l))}function wye(t,e,n){var r=1,i=new Ht(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new Ht(10).pow(c_.getDigitCount(t)-1),i=new Ht(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Ht(Math.floor(t)))}else t===0?i=new Ht(Math.floor((e-1)/2)):n||(i=new Ht(Math.floor(t)));var a=Math.floor((e-1)/2),s=uye(cye(function(l){return i.add(new Ht(l-a).mul(r)).toNumber()}),Kw);return s(0,e)}function a5(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Ht(0),tickMin:new Ht(0),tickMax:new Ht(0)};var o=o5(new Ht(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new Ht(0):(a=new Ht(t).add(e).div(2),a=a.sub(new Ht(a).mod(o)));var s=Math.ceil(a.sub(t).div(o).toNumber()),l=Math.ceil(new Ht(e).sub(a).div(o).toNumber()),c=s+l+1;return c>n?a5(t,e,n,r,i+1):(c<n&&(l=e>0?l+(n-c):l,s=e>0?s:s+(n-c)),{step:o,tickMin:a.sub(new Ht(s).mul(o)),tickMax:a.add(new Ht(l).mul(o))})}function Sye(t){var e=ap(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),s=i5([n,r]),l=ap(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var f=u===1/0?[c].concat(Qw(Kw(0,i-1).map(function(){return 1/0}))):[].concat(Qw(Kw(0,i-1).map(function(){return-1/0})),[u]);return n>r?Yw(f):f}if(c===u)return wye(c,i,o);var h=a5(c,u,a,o),d=h.step,y=h.tickMin,v=h.tickMax,g=c_.rangeStep(y,v.add(new Ht(.1).mul(d)),d);return n>r?Yw(g):g}function Eye(t,e){var n=ap(t,2),r=n[0],i=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=i5([r,i]),s=ap(a,2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var u=Math.max(e,2),f=o5(new Ht(c).sub(l).div(u-1),o,0),h=[].concat(Qw(c_.rangeStep(new Ht(l),new Ht(c).sub(new Ht(.99).mul(f)),f)),[c]);return r>i?Yw(h):h}var Tye=n5(Sye),Aye=n5(Eye),Mye="Invariant failed";function Wl(t,e){throw new Error(Mye)}var Pye=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}function dy(){return dy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dy.apply(this,arguments)}function Cye(t,e){return Nye(t)||Iye(t,e)||Oye(t,e)||Rye()}function Rye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oye(t,e){if(t){if(typeof t=="string")return PN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PN(t,e)}}function PN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Iye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Nye(t){if(Array.isArray(t))return t}function Dye(t,e){if(t==null)return{};var n=Lye(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lye(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function kye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c5(r.key),r)}}function Uye(t,e,n){return e&&jye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fye(t,e,n){return e=py(e),Vye(t,s5()?Reflect.construct(e,n||[],py(t).constructor):e.apply(t,n))}function Vye(t,e){if(e&&(ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bye(t)}function Bye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s5=function(){return!!t})()}function py(t){return py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},py(t)}function $ye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jw(t,e)}function Jw(t,e){return Jw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Jw(t,e)}function l5(t,e,n){return e=c5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c5(t){var e=zye(t,"string");return ef(e)=="symbol"?e:e+""}function zye(t,e){if(ef(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tm=function(t){function e(){return kye(this,e),Fye(this,e,arguments)}return $ye(e,t),Uye(e,[{key:"render",value:function(){var r=this.props,i=r.offset,o=r.layout,a=r.width,s=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,f=r.yAxis,h=Dye(r,Pye),d=Ke(h,!1);this.props.direction==="x"&&u.type!=="number"&&Wl();var y=l.map(function(v){var g=c(v,s),p=g.x,x=g.y,_=g.value,T=g.errorVal;if(!T)return null;var w=[],M,b;if(Array.isArray(T)){var A=Cye(T,2);M=A[0],b=A[1]}else M=b=T;if(o==="vertical"){var E=u.scale,P=x+i,R=P+a,N=P-a,O=E(_-M),D=E(_+b);w.push({x1:D,y1:R,x2:D,y2:N}),w.push({x1:O,y1:P,x2:D,y2:P}),w.push({x1:O,y1:R,x2:O,y2:N})}else if(o==="horizontal"){var k=f.scale,H=p+i,B=H-a,F=H+a,q=k(_-M),K=k(_+b);w.push({x1:B,y1:K,x2:F,y2:K}),w.push({x1:H,y1:q,x2:H,y2:K}),w.push({x1:B,y1:q,x2:F,y2:q})}return W.createElement(St,dy({className:"recharts-errorBar",key:"bar-".concat(w.map(function(z){return"".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))},d),w.map(function(z){return W.createElement("line",dy({},z,{key:"line-".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))}))});return W.createElement(St,{className:"recharts-errorBars"},y)}}])}(W.Component);l5(tm,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});l5(tm,"displayName","ErrorBar");function sp(t){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sp(t)}function CN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CN(Object(n),!0).forEach(function(r){Hye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hye(t,e,n){return e=Gye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gye(t){var e=Wye(t,"string");return sp(e)=="symbol"?e:e+""}function Wye(t,e){if(sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var u5=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=ai(n,da);if(!a)return null;var s=da.defaultProps,l=s!==void 0?Qs(Qs({},s),a.props):{},c;return a.props&&a.props.payload?c=a.props&&a.props.payload:o==="children"?c=(r||[]).reduce(function(u,f){var h=f.item,d=f.props,y=d.sectors||d.data||[];return u.concat(y.map(function(v){return{type:a.props.iconType||h.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):c=(r||[]).map(function(u){var f=u.item,h=f.type.defaultProps,d=h!==void 0?Qs(Qs({},h),f.props):{},y=d.dataKey,v=d.name,g=d.legendType,p=d.hide;return{inactive:p,dataKey:y,type:l.iconType||g||"square",color:qA(f),value:v||y,payload:d}}),Qs(Qs(Qs({},l),da.getWithHeight(a,i)),{},{payload:c,item:a})};function lp(t){"@babel/helpers - typeof";return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lp(t)}function RN(t){return Yye(t)||Kye(t)||Xye(t)||qye()}function qye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xye(t,e){if(t){if(typeof t=="string")return eS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eS(t,e)}}function Kye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Yye(t){if(Array.isArray(t))return eS(t)}function eS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ON(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ON(Object(n),!0).forEach(function(r){Pu(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ON(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pu(t,e,n){return e=Qye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qye(t){var e=Zye(t,"string");return lp(e)=="symbol"?e:e+""}function Zye(t,e){if(lp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sn(t,e,n){return ft(t)||ft(e)?n:Vn(e)?fi(t,e,n):ot(e)?e(t):n}function fd(t,e,n,r){var i=Kve(t,function(s){return Sn(s,e)});if(n==="number"){var o=i.filter(function(s){return Ae(s)||parseFloat(s)});return o.length?[s_(o),ts(o)]:[1/0,-1/0]}var a=r?i.filter(function(s){return!ft(s)}):i;return a.map(function(s){return Vn(s)||s instanceof Date?s:""})}var Jye=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,s=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(s<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,c=0;c<s;c++){var u=c>0?i[c-1].coordinate:i[s-1].coordinate,f=i[c].coordinate,h=c>=s-1?i[0].coordinate:i[c+1].coordinate,d=void 0;if(kr(f-u)!==kr(h-f)){var y=[];if(kr(h-f)===kr(l[1]-l[0])){d=h;var v=f+l[1]-l[0];y[0]=Math.min(v,(v+u)/2),y[1]=Math.max(v,(v+u)/2)}else{d=u;var g=h+l[1]-l[0];y[0]=Math.min(f,(g+f)/2),y[1]=Math.max(f,(g+f)/2)}var p=[Math.min(f,(d+f)/2),Math.max(f,(d+f)/2)];if(e>p[0]&&e<=p[1]||e>=y[0]&&e<=y[1]){a=i[c].index;break}}else{var x=Math.min(u,h),_=Math.max(u,h);if(e>(x+f)/2&&e<=(_+f)/2){a=i[c].index;break}}}else for(var T=0;T<s;T++)if(T===0&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T>0&&T<s-1&&e>(r[T].coordinate+r[T-1].coordinate)/2&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T===s-1&&e>(r[T].coordinate+r[T-1].coordinate)/2){a=r[T].index;break}return a},qA=function(e){var n,r=e,i=r.type.displayName,o=(n=e.type)!==null&&n!==void 0&&n.defaultProps?yn(yn({},e.type.defaultProps),e.props):e.props,a=o.stroke,s=o.fill,l;switch(i){case"Line":l=a;break;case"Area":case"Radar":l=a&&a!=="none"?a:s;break;default:l=s;break}return l},e0e=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var a={},s=Object.keys(o),l=0,c=s.length;l<c;l++)for(var u=o[s[l]].stackGroups,f=Object.keys(u),h=0,d=f.length;h<d;h++){var y=u[f[h]],v=y.items,g=y.cateAxisId,p=v.filter(function(b){return ha(b.type).indexOf("Bar")>=0});if(p&&p.length){var x=p[0].type.defaultProps,_=x!==void 0?yn(yn({},x),p[0].props):p[0].props,T=_.barSize,w=_[g];a[w]||(a[w]=[]);var M=ft(T)?n:T;a[w].push({item:p[0],stackList:p.slice(1),barSize:ft(M)?void 0:jr(M,r,0)})}}return a},t0e=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,s=e.maxBarSize,l=a.length;if(l<1)return null;var c=jr(n,i,0,!0),u,f=[];if(a[0].barSize===+a[0].barSize){var h=!1,d=i/l,y=a.reduce(function(T,w){return T+w.barSize||0},0);y+=(l-1)*c,y>=i&&(y-=(l-1)*c,c=0),y>=i&&d>0&&(h=!0,d*=.9,y=l*d);var v=(i-y)/2>>0,g={offset:v-c,size:0};u=a.reduce(function(T,w){var M={item:w.item,position:{offset:g.offset+g.size+c,size:h?d:w.barSize}},b=[].concat(RN(T),[M]);return g=b[b.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(A){b.push({item:A,position:g})}),b},f)}else{var p=jr(r,i,0,!0);i-2*p-(l-1)*c<=0&&(c=0);var x=(i-2*p-(l-1)*c)/l;x>1&&(x>>=0);var _=s===+s?Math.min(x,s):x;u=a.reduce(function(T,w,M){var b=[].concat(RN(T),[{item:w.item,position:{offset:p+(x+c)*M+(x-_)/2,size:_}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(A){b.push({item:A,position:b[b.length-1].position})}),b},f)}return u},n0e=function(e,n,r,i){var o=r.children,a=r.width,s=r.margin,l=a-(s.left||0)-(s.right||0),c=u5({children:o,legendWidth:l});if(c){var u=i||{},f=u.width,h=u.height,d=c.align,y=c.verticalAlign,v=c.layout;if((v==="vertical"||v==="horizontal"&&y==="middle")&&d!=="center"&&Ae(e[d]))return yn(yn({},e),{},Pu({},d,e[d]+(f||0)));if((v==="horizontal"||v==="vertical"&&d==="center")&&y!=="middle"&&Ae(e[y]))return yn(yn({},e),{},Pu({},y,e[y]+(h||0)))}return e},r0e=function(e,n,r){return ft(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},f5=function(e,n,r,i,o){var a=n.props.children,s=hi(a,tm).filter(function(c){return r0e(i,o,c.props.direction)});if(s&&s.length){var l=s.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var f=Sn(u,r);if(ft(f))return c;var h=Array.isArray(f)?[s_(f),ts(f)]:[f,f],d=l.reduce(function(y,v){var g=Sn(u,v,0),p=h[0]-Math.abs(Array.isArray(g)?g[0]:g),x=h[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(p,y[0]),Math.max(x,y[1])]},[1/0,-1/0]);return[Math.min(d[0],c[0]),Math.max(d[1],c[1])]},[1/0,-1/0])}return null},i0e=function(e,n,r,i,o){var a=n.map(function(s){return f5(e,s,r,o,i)}).filter(function(s){return!ft(s)});return a&&a.length?a.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},h5=function(e,n,r,i,o){var a=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&f5(e,l,c,i)||fd(e,c,r,o)});if(r==="number")return a.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var s={};return a.reduce(function(l,c){for(var u=0,f=c.length;u<f;u++)s[c[u]]||(s[c[u]]=!0,l.push(c[u]));return l},[])},d5=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},p5=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var o,a,s=e.map(function(l){return l.coordinate===n&&(o=!0),l.coordinate===r&&(a=!0),l.coordinate});return o||s.push(n),a||s.push(r),s},aa=function(e,n,r){if(!e)return null;var i=e.scale,o=e.duplicateDomain,a=e.type,s=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?kr(s[0]-s[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(f){var h=o?o.indexOf(f):f;return{coordinate:i(h)+c,value:f,offset:c}});return u.filter(function(f){return!Ff(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:i(f)+c,value:f,index:h,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+c,value:f,offset:c}}):i.domain().map(function(f,h){return{coordinate:i(f)+c,value:o?o[f]:f,index:h,offset:c}})},Tb=new WeakMap,_g=function(e,n){if(typeof n!="function")return e;Tb.has(e)||Tb.set(e,new WeakMap);var r=Tb.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},m5=function(e,n,r){var i=e.scale,o=e.type,a=e.layout,s=e.axisType;if(i==="auto")return a==="radial"&&s==="radiusAxis"?{scale:ep(),realScaleType:"band"}:a==="radial"&&s==="angleAxis"?{scale:ly(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:ud(),realScaleType:"point"}:o==="category"?{scale:ep(),realScaleType:"band"}:{scale:ly(),realScaleType:"linear"};if(Kp(i)){var l="scale".concat(q0(i));return{scale:(EN[l]||ud)(),realScaleType:EN[l]?l:"point"}}return ot(i)?{scale:i}:{scale:ud(),realScaleType:"point"}},IN=1e-4,g5=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),o=Math.min(i[0],i[1])-IN,a=Math.max(i[0],i[1])+IN,s=e(n[0]),l=e(n[r-1]);(s<o||s>a||l<o||l>a)&&e.domain([n[0],n[r-1]])}},o0e=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},a0e=function(e,n){if(!n||n.length!==2||!Ae(n[0])||!Ae(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),o=[e[0],e[1]];return(!Ae(e[0])||e[0]<r)&&(o[0]=r),(!Ae(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},s0e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0,s=0;s<n;++s){var l=Ff(e[s][r][1])?e[s][r][0]:e[s][r][1];l>=0?(e[s][r][0]=o,e[s][r][1]=o+l,o=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+l,a=e[s][r][1])}},l0e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0;a<n;++a){var s=Ff(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=o,e[a][r][1]=o+s,o=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},c0e={sign:s0e,expand:Poe,none:Gu,silhouette:Coe,wiggle:Roe,positive:l0e},u0e=function(e,n,r){var i=n.map(function(s){return s.props.dataKey}),o=c0e[r],a=Moe().keys(i).value(function(s,l){return+Sn(s,l,0)}).order(Tw).offset(o);return a(e)},f0e=function(e,n,r,i,o,a){if(!e)return null;var s=a?n.reverse():n,l={},c=s.reduce(function(f,h){var d,y=(d=h.type)!==null&&d!==void 0&&d.defaultProps?yn(yn({},h.type.defaultProps),h.props):h.props,v=y.stackId,g=y.hide;if(g)return f;var p=y[r],x=f[p]||{hasStack:!1,stackGroups:{}};if(Vn(v)){var _=x.stackGroups[v]||{numericAxisId:r,cateAxisId:i,items:[]};_.items.push(h),x.hasStack=!0,x.stackGroups[v]=_}else x.stackGroups[ec("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return yn(yn({},f),{},Pu({},p,x))},l),u={};return Object.keys(c).reduce(function(f,h){var d=c[h];if(d.hasStack){var y={};d.stackGroups=Object.keys(d.stackGroups).reduce(function(v,g){var p=d.stackGroups[g];return yn(yn({},v),{},Pu({},g,{numericAxisId:r,cateAxisId:i,items:p.items,stackedData:u0e(e,p.items,o)}))},y)}return yn(yn({},f),{},Pu({},h,d))},u)},v5=function(e,n){var r=n.realScaleType,i=n.type,o=n.tickCount,a=n.originalDomain,s=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=Tye(c,o,s);return e.domain([s_(u),ts(u)]),{niceTicks:u}}if(o&&i==="number"){var f=e.domain(),h=Aye(f,o,s);return{niceTicks:h}}return null};function my(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,o=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!ft(i[e.dataKey])){var s=Bv(n,"value",i[e.dataKey]);if(s)return s.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var l=Sn(i,ft(a)?e.dataKey:a);return ft(l)?null:e.scale(l)}var NN=function(e){var n=e.axis,r=e.ticks,i=e.offset,o=e.bandSize,a=e.entry,s=e.index;if(n.type==="category")return r[s]?r[s].coordinate+i:null;var l=Sn(a,n.dataKey,n.domain[s]);return ft(l)?null:n.scale(l)-o/2+i},h0e=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},d0e=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?yn(yn({},e.type.defaultProps),e.props):e.props,o=i.stackId;if(Vn(o)){var a=n[o];if(a){var s=a.items.indexOf(e);return s>=0?a.stackedData[s]:null}}return null},p0e=function(e){return e.reduce(function(n,r){return[s_(r.concat([n[0]]).filter(Ae)),ts(r.concat([n[1]]).filter(Ae))]},[1/0,-1/0])},y5=function(e,n,r){return Object.keys(e).reduce(function(i,o){var a=e[o],s=a.stackedData,l=s.reduce(function(c,u){var f=p0e(u.slice(n,r+1));return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},DN=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,LN=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,tS=function(e,n,r){if(ot(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Ae(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(DN.test(e[0])){var o=+DN.exec(e[0])[1];i[0]=n[0]-o}else ot(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Ae(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(LN.test(e[1])){var a=+LN.exec(e[1])[1];i[1]=n[1]+a}else ot(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},gy=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var o=bA(n,function(f){return f.coordinate}),a=1/0,s=1,l=o.length;s<l;s++){var c=o[s],u=o[s-1];a=Math.min((c.coordinate||0)-(u.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},kN=function(e,n,r){return!e||!e.length||Hl(e,fi(r,"type.defaultProps.domain"))?n:e},_5=function(e,n){var r=e.type.defaultProps?yn(yn({},e.type.defaultProps),e.props):e.props,i=r.dataKey,o=r.name,a=r.unit,s=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return yn(yn({},Ke(e,!1)),{},{dataKey:i,unit:a,formatter:s,name:o||i,color:qA(e),value:Sn(n,i),type:l,payload:n,chartType:c,hide:u})};function cp(t){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cp(t)}function jN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jN(Object(n),!0).forEach(function(r){x5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function x5(t,e,n){return e=m0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m0e(t){var e=g0e(t,"string");return cp(e)=="symbol"?e:e+""}function g0e(t,e){if(cp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function v0e(t,e){return b0e(t)||x0e(t,e)||_0e(t,e)||y0e()}function y0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _0e(t,e){if(t){if(typeof t=="string")return UN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UN(t,e)}}function UN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function x0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function b0e(t){if(Array.isArray(t))return t}var vy=Math.PI/180,w0e=function(e){return e*180/Math.PI},Qt=function(e,n,r,i){return{x:e+Math.cos(-vy*i)*r,y:n+Math.sin(-vy*i)*r}},b5=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},S0e=function(e,n,r,i,o){var a=e.width,s=e.height,l=e.startAngle,c=e.endAngle,u=jr(e.cx,a,a/2),f=jr(e.cy,s,s/2),h=b5(a,s,r),d=jr(e.innerRadius,h,0),y=jr(e.outerRadius,h,h*.8),v=Object.keys(n);return v.reduce(function(g,p){var x=n[p],_=x.domain,T=x.reversed,w;if(ft(x.range))i==="angleAxis"?w=[l,c]:i==="radiusAxis"&&(w=[d,y]),T&&(w=[w[1],w[0]]);else{w=x.range;var M=w,b=v0e(M,2);l=b[0],c=b[1]}var A=m5(x,o),E=A.realScaleType,P=A.scale;P.domain(_).range(w),g5(P);var R=v5(P,Qo(Qo({},x),{},{realScaleType:E})),N=Qo(Qo(Qo({},x),R),{},{range:w,radius:y,realScaleType:E,scale:P,cx:u,cy:f,innerRadius:d,outerRadius:y,startAngle:l,endAngle:c});return Qo(Qo({},g),{},x5({},p,N))},{})},E0e=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-a,2))},T0e=function(e,n){var r=e.x,i=e.y,o=n.cx,a=n.cy,s=E0e({x:r,y:i},{x:o,y:a});if(s<=0)return{radius:s};var l=(r-o)/s,c=Math.acos(l);return i>a&&(c=2*Math.PI-c),{radius:s,angle:w0e(c),angleInRadian:c}},A0e=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360),a=Math.min(i,o);return{startAngle:n-a*360,endAngle:r-a*360}},M0e=function(e,n){var r=n.startAngle,i=n.endAngle,o=Math.floor(r/360),a=Math.floor(i/360),s=Math.min(o,a);return e+s*360},FN=function(e,n){var r=e.x,i=e.y,o=T0e({x:r,y:i},n),a=o.radius,s=o.angle,l=n.innerRadius,c=n.outerRadius;if(a<l||a>c)return!1;if(a===0)return!0;var u=A0e(n),f=u.startAngle,h=u.endAngle,d=s,y;if(f<=h){for(;d>h;)d-=360;for(;d<f;)d+=360;y=d>=f&&d<=h}else{for(;d>f;)d-=360;for(;d<h;)d+=360;y=d>=h&&d<=f}return y?Qo(Qo({},n),{},{radius:a,angle:M0e(d,n)}):null},w5=function(e){return!V.isValidElement(e)&&!ot(e)&&typeof e!="boolean"?e.className:""};function up(t){"@babel/helpers - typeof";return up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},up(t)}var P0e=["offset"];function C0e(t){return N0e(t)||I0e(t)||O0e(t)||R0e()}function R0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O0e(t,e){if(t){if(typeof t=="string")return nS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nS(t,e)}}function I0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function N0e(t){if(Array.isArray(t))return nS(t)}function nS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function D0e(t,e){if(t==null)return{};var n=L0e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function L0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function VN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ln(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VN(Object(n),!0).forEach(function(r){k0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k0e(t,e,n){return e=j0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j0e(t){var e=U0e(t,"string");return up(e)=="symbol"?e:e+""}function U0e(t,e){if(up(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(up(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fp(){return fp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fp.apply(this,arguments)}var F0e=function(e){var n=e.value,r=e.formatter,i=ft(e.children)?n:e.children;return ot(r)?r(i):i},V0e=function(e,n){var r=kr(n-e),i=Math.min(Math.abs(n-e),360);return r*i},B0e=function(e,n,r){var i=e.position,o=e.viewBox,a=e.offset,s=e.className,l=o,c=l.cx,u=l.cy,f=l.innerRadius,h=l.outerRadius,d=l.startAngle,y=l.endAngle,v=l.clockWise,g=(f+h)/2,p=V0e(d,y),x=p>=0?1:-1,_,T;i==="insideStart"?(_=d+x*a,T=v):i==="insideEnd"?(_=y-x*a,T=!v):i==="end"&&(_=y+x*a,T=v),T=p<=0?T:!T;var w=Qt(c,u,g,_),M=Qt(c,u,g,_+(T?1:-1)*359),b="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(T?0:1,`,
    `).concat(M.x,",").concat(M.y),A=ft(e.id)?ec("recharts-radial-line-"):e.id;return W.createElement("text",fp({},r,{dominantBaseline:"central",className:_t("recharts-radial-bar-label",s)}),W.createElement("defs",null,W.createElement("path",{id:A,d:b})),W.createElement("textPath",{xlinkHref:"#".concat(A)},n))},$0e=function(e){var n=e.viewBox,r=e.offset,i=e.position,o=n,a=o.cx,s=o.cy,l=o.innerRadius,c=o.outerRadius,u=o.startAngle,f=o.endAngle,h=(u+f)/2;if(i==="outside"){var d=Qt(a,s,c+r,h),y=d.x,v=d.y;return{x:y,y:v,textAnchor:y>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var g=(l+c)/2,p=Qt(a,s,g,h),x=p.x,_=p.y;return{x,y:_,textAnchor:"middle",verticalAnchor:"middle"}},z0e=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,o=e.position,a=n,s=a.x,l=a.y,c=a.width,u=a.height,f=u>=0?1:-1,h=f*i,d=f>0?"end":"start",y=f>0?"start":"end",v=c>=0?1:-1,g=v*i,p=v>0?"end":"start",x=v>0?"start":"end";if(o==="top"){var _={x:s+c/2,y:l-f*i,textAnchor:"middle",verticalAnchor:d};return Ln(Ln({},_),r?{height:Math.max(l-r.y,0),width:c}:{})}if(o==="bottom"){var T={x:s+c/2,y:l+u+h,textAnchor:"middle",verticalAnchor:y};return Ln(Ln({},T),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(o==="left"){var w={x:s-g,y:l+u/2,textAnchor:p,verticalAnchor:"middle"};return Ln(Ln({},w),r?{width:Math.max(w.x-r.x,0),height:u}:{})}if(o==="right"){var M={x:s+c+g,y:l+u/2,textAnchor:x,verticalAnchor:"middle"};return Ln(Ln({},M),r?{width:Math.max(r.x+r.width-M.x,0),height:u}:{})}var b=r?{width:c,height:u}:{};return o==="insideLeft"?Ln({x:s+g,y:l+u/2,textAnchor:x,verticalAnchor:"middle"},b):o==="insideRight"?Ln({x:s+c-g,y:l+u/2,textAnchor:p,verticalAnchor:"middle"},b):o==="insideTop"?Ln({x:s+c/2,y:l+h,textAnchor:"middle",verticalAnchor:y},b):o==="insideBottom"?Ln({x:s+c/2,y:l+u-h,textAnchor:"middle",verticalAnchor:d},b):o==="insideTopLeft"?Ln({x:s+g,y:l+h,textAnchor:x,verticalAnchor:y},b):o==="insideTopRight"?Ln({x:s+c-g,y:l+h,textAnchor:p,verticalAnchor:y},b):o==="insideBottomLeft"?Ln({x:s+g,y:l+u-h,textAnchor:x,verticalAnchor:d},b):o==="insideBottomRight"?Ln({x:s+c-g,y:l+u-h,textAnchor:p,verticalAnchor:d},b):Lf(o)&&(Ae(o.x)||yl(o.x))&&(Ae(o.y)||yl(o.y))?Ln({x:s+jr(o.x,c),y:l+jr(o.y,u),textAnchor:"end",verticalAnchor:"end"},b):Ln({x:s+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},b)},H0e=function(e){return"cx"in e&&Ae(e.cx)};function Qn(t){var e=t.offset,n=e===void 0?5:e,r=D0e(t,P0e),i=Ln({offset:n},r),o=i.viewBox,a=i.position,s=i.value,l=i.children,c=i.content,u=i.className,f=u===void 0?"":u,h=i.textBreakAll;if(!o||ft(s)&&ft(l)&&!V.isValidElement(c)&&!ot(c))return null;if(V.isValidElement(c))return V.cloneElement(c,i);var d;if(ot(c)){if(d=V.createElement(c,i),V.isValidElement(d))return d}else d=F0e(i);var y=H0e(o),v=Ke(i,!0);if(y&&(a==="insideStart"||a==="insideEnd"||a==="end"))return B0e(i,d,v);var g=y?$0e(i):z0e(i);return W.createElement(zl,fp({className:_t("recharts-label",f)},v,g,{breakAll:h}),d)}Qn.displayName="Label";var S5=function(e){var n=e.cx,r=e.cy,i=e.angle,o=e.startAngle,a=e.endAngle,s=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,f=e.x,h=e.y,d=e.top,y=e.left,v=e.width,g=e.height,p=e.clockWise,x=e.labelViewBox;if(x)return x;if(Ae(v)&&Ae(g)){if(Ae(f)&&Ae(h))return{x:f,y:h,width:v,height:g};if(Ae(d)&&Ae(y))return{x:d,y,width:v,height:g}}return Ae(f)&&Ae(h)?{x:f,y:h,width:0,height:0}:Ae(n)&&Ae(r)?{cx:n,cy:r,startAngle:o||i||0,endAngle:a||i||0,innerRadius:c||0,outerRadius:u||l||s||0,clockWise:p}:e.viewBox?e.viewBox:{}},G0e=function(e,n){return e?e===!0?W.createElement(Qn,{key:"label-implicit",viewBox:n}):Vn(e)?W.createElement(Qn,{key:"label-implicit",viewBox:n,value:e}):V.isValidElement(e)?e.type===Qn?V.cloneElement(e,{key:"label-implicit",viewBox:n}):W.createElement(Qn,{key:"label-implicit",content:e,viewBox:n}):ot(e)?W.createElement(Qn,{key:"label-implicit",content:e,viewBox:n}):Lf(e)?W.createElement(Qn,fp({viewBox:n},e,{key:"label-implicit"})):null:null},W0e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=S5(e),a=hi(i,Qn).map(function(l,c){return V.cloneElement(l,{viewBox:n||o,key:"label-".concat(c)})});if(!r)return a;var s=G0e(e.label,n||o);return[s].concat(C0e(a))};Qn.parseViewBox=S5;Qn.renderCallByParent=W0e;function q0e(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var X0e=q0e;const K0e=Ft(X0e);function hp(t){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hp(t)}var Y0e=["valueAccessor"],Q0e=["data","dataKey","clockWise","id","textBreakAll"];function Z0e(t){return n_e(t)||t_e(t)||e_e(t)||J0e()}function J0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e_e(t,e){if(t){if(typeof t=="string")return rS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rS(t,e)}}function t_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function n_e(t){if(Array.isArray(t))return rS(t)}function rS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yy(){return yy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yy.apply(this,arguments)}function BN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $N(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BN(Object(n),!0).forEach(function(r){r_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function r_e(t,e,n){return e=i_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i_e(t){var e=o_e(t,"string");return hp(e)=="symbol"?e:e+""}function o_e(t,e){if(hp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zN(t,e){if(t==null)return{};var n=a_e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function a_e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var s_e=function(e){return Array.isArray(e.value)?K0e(e.value):e.value};function Co(t){var e=t.valueAccessor,n=e===void 0?s_e:e,r=zN(t,Y0e),i=r.data,o=r.dataKey,a=r.clockWise,s=r.id,l=r.textBreakAll,c=zN(r,Q0e);return!i||!i.length?null:W.createElement(St,{className:"recharts-label-list"},i.map(function(u,f){var h=ft(o)?n(u,f):Sn(u&&u.payload,o),d=ft(s)?{}:{id:"".concat(s,"-").concat(f)};return W.createElement(Qn,yy({},Ke(u,!0),c,d,{parentViewBox:u.parentViewBox,value:h,textBreakAll:l,viewBox:Qn.parseViewBox(ft(a)?u:$N($N({},u),{},{clockWise:a})),key:"label-".concat(f),index:f}))}))}Co.displayName="LabelList";function l_e(t,e){return t?t===!0?W.createElement(Co,{key:"labelList-implicit",data:e}):W.isValidElement(t)||ot(t)?W.createElement(Co,{key:"labelList-implicit",data:e,content:t}):Lf(t)?W.createElement(Co,yy({data:e},t,{key:"labelList-implicit"})):null:null}function c_e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=hi(r,Co).map(function(a,s){return V.cloneElement(a,{data:e,key:"labelList-".concat(s)})});if(!n)return i;var o=l_e(t.label,e);return[o].concat(Z0e(i))}Co.renderCallByParent=c_e;function dp(t){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dp(t)}function iS(){return iS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iS.apply(this,arguments)}function HN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function GN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HN(Object(n),!0).forEach(function(r){u_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function u_e(t,e,n){return e=f_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f_e(t){var e=h_e(t,"string");return dp(e)=="symbol"?e:e+""}function h_e(t,e){if(dp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var d_e=function(e,n){var r=kr(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},xg=function(e){var n=e.cx,r=e.cy,i=e.radius,o=e.angle,a=e.sign,s=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(s?1:-1)+i,f=Math.asin(l/u)/vy,h=c?o:o+a*f,d=Qt(n,r,u,h),y=Qt(n,r,i,h),v=c?o-a*f:o,g=Qt(n,r,u*Math.cos(f*vy),v);return{center:d,circleTangency:y,lineTangency:g,theta:f}},E5=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.startAngle,s=e.endAngle,l=d_e(a,s),c=a+l,u=Qt(n,r,o,a),f=Qt(n,r,o,c),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>c),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var d=Qt(n,r,i,a),y=Qt(n,r,i,c);h+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=c),`,
            `).concat(d.x,",").concat(d.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},p_e=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,s=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,f=kr(u-c),h=xg({cx:n,cy:r,radius:o,angle:c,sign:f,cornerRadius:a,cornerIsExternal:l}),d=h.circleTangency,y=h.lineTangency,v=h.theta,g=xg({cx:n,cy:r,radius:o,angle:u,sign:-f,cornerRadius:a,cornerIsExternal:l}),p=g.circleTangency,x=g.lineTangency,_=g.theta,T=l?Math.abs(c-u):Math.abs(c-u)-v-_;if(T<0)return s?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):E5({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:c,endAngle:u});var w="M ".concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(d.x,",").concat(d.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(T>180),",").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
  `);if(i>0){var M=xg({cx:n,cy:r,radius:i,angle:c,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),b=M.circleTangency,A=M.lineTangency,E=M.theta,P=xg({cx:n,cy:r,radius:i,angle:u,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),R=P.circleTangency,N=P.lineTangency,O=P.theta,D=l?Math.abs(c-u):Math.abs(c-u)-E-O;if(D<0&&a===0)return"".concat(w,"L").concat(n,",").concat(r,"Z");w+="L".concat(N.x,",").concat(N.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(R.x,",").concat(R.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(D>180),",").concat(+(f>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,"Z")}else w+="L".concat(n,",").concat(r,"Z");return w},m_e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},T5=function(e){var n=GN(GN({},m_e),e),r=n.cx,i=n.cy,o=n.innerRadius,a=n.outerRadius,s=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,u=n.startAngle,f=n.endAngle,h=n.className;if(a<o||u===f)return null;var d=_t("recharts-sector",h),y=a-o,v=jr(s,y,0,!0),g;return v>0&&Math.abs(u-f)<360?g=p_e({cx:r,cy:i,innerRadius:o,outerRadius:a,cornerRadius:Math.min(v,y/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:f}):g=E5({cx:r,cy:i,innerRadius:o,outerRadius:a,startAngle:u,endAngle:f}),W.createElement("path",iS({},Ke(n,!0),{className:d,d:g,role:"img"}))};function pp(t){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(t)}function oS(){return oS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oS.apply(this,arguments)}function WN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WN(Object(n),!0).forEach(function(r){g_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g_e(t,e,n){return e=v_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v_e(t){var e=y_e(t,"string");return pp(e)=="symbol"?e:e+""}function y_e(t,e){if(pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var XN={curveBasisClosed:goe,curveBasisOpen:voe,curveBasis:moe,curveBumpX:toe,curveBumpY:noe,curveLinearClosed:yoe,curveLinear:K0,curveMonotoneX:_oe,curveMonotoneY:xoe,curveNatural:boe,curveStep:woe,curveStepAfter:Eoe,curveStepBefore:Soe},bg=function(e){return e.x===+e.x&&e.y===+e.y},Oh=function(e){return e.x},Ih=function(e){return e.y},__e=function(e,n){if(ot(e))return e;var r="curve".concat(q0(e));return(r==="curveMonotone"||r==="curveBump")&&n?XN["".concat(r).concat(n==="vertical"?"Y":"X")]:XN[r]||K0},x_e=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,o=i===void 0?[]:i,a=e.baseLine,s=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=__e(r,s),f=c?o.filter(function(v){return bg(v)}):o,h;if(Array.isArray(a)){var d=c?a.filter(function(v){return bg(v)}):a,y=f.map(function(v,g){return qN(qN({},v),{},{base:d[g]})});return s==="vertical"?h=fg().y(Ih).x1(Oh).x0(function(v){return v.base.x}):h=fg().x(Oh).y1(Ih).y0(function(v){return v.base.y}),h.defined(bg).curve(u),h(y)}return s==="vertical"&&Ae(a)?h=fg().y(Ih).x1(Oh).x0(a):Ae(a)?h=fg().x(Oh).y1(Ih).y0(a):h=_4().x(Oh).y(Ih),h.defined(bg).curve(u),h(f)},Il=function(e){var n=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?x_e(e):i;return W.createElement("path",oS({},Ke(e,!1),$v(e),{className:_t("recharts-curve",n),d:a,ref:o}))},b_e=Object.getOwnPropertyNames,w_e=Object.getOwnPropertySymbols,S_e=Object.prototype.hasOwnProperty;function KN(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function wg(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var o=i.cache,a=o.get(n),s=o.get(r);if(a&&s)return a===r&&s===n;o.set(n,r),o.set(r,n);var l=t(n,r,i);return o.delete(n),o.delete(r),l}}function YN(t){return b_e(t).concat(w_e(t))}var A5=Object.hasOwn||function(t,e){return S_e.call(t,e)};function Wf(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var M5="_owner",QN=Object.getOwnPropertyDescriptor,ZN=Object.keys;function E_e(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function T_e(t,e){return Wf(t.getTime(),e.getTime())}function JN(t,e,n){if(t.size!==e.size)return!1;for(var r={},i=t.entries(),o=0,a,s;(a=i.next())&&!a.done;){for(var l=e.entries(),c=!1,u=0;(s=l.next())&&!s.done;){var f=a.value,h=f[0],d=f[1],y=s.value,v=y[0],g=y[1];!c&&!r[u]&&(c=n.equals(h,v,o,u,t,e,n)&&n.equals(d,g,h,v,t,e,n))&&(r[u]=!0),u++}if(!c)return!1;o++}return!0}function A_e(t,e,n){var r=ZN(t),i=r.length;if(ZN(e).length!==i)return!1;for(var o;i-- >0;)if(o=r[i],o===M5&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!A5(e,o)||!n.equals(t[o],e[o],o,o,t,e,n))return!1;return!0}function Nh(t,e,n){var r=YN(t),i=r.length;if(YN(e).length!==i)return!1;for(var o,a,s;i-- >0;)if(o=r[i],o===M5&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!A5(e,o)||!n.equals(t[o],e[o],o,o,t,e,n)||(a=QN(t,o),s=QN(e,o),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable)))return!1;return!0}function M_e(t,e){return Wf(t.valueOf(),e.valueOf())}function P_e(t,e){return t.source===e.source&&t.flags===e.flags}function eD(t,e,n){if(t.size!==e.size)return!1;for(var r={},i=t.values(),o,a;(o=i.next())&&!o.done;){for(var s=e.values(),l=!1,c=0;(a=s.next())&&!a.done;)!l&&!r[c]&&(l=n.equals(o.value,a.value,o.value,a.value,t,e,n))&&(r[c]=!0),c++;if(!l)return!1}return!0}function C_e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}var R_e="[object Arguments]",O_e="[object Boolean]",I_e="[object Date]",N_e="[object Map]",D_e="[object Number]",L_e="[object Object]",k_e="[object RegExp]",j_e="[object Set]",U_e="[object String]",F_e=Array.isArray,tD=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,nD=Object.assign,V_e=Object.prototype.toString.call.bind(Object.prototype.toString);function B_e(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,a=t.areRegExpsEqual,s=t.areSetsEqual,l=t.areTypedArraysEqual;return function(u,f,h){if(u===f)return!0;if(u==null||f==null||typeof u!="object"||typeof f!="object")return u!==u&&f!==f;var d=u.constructor;if(d!==f.constructor)return!1;if(d===Object)return i(u,f,h);if(F_e(u))return e(u,f,h);if(tD!=null&&tD(u))return l(u,f,h);if(d===Date)return n(u,f,h);if(d===RegExp)return a(u,f,h);if(d===Map)return r(u,f,h);if(d===Set)return s(u,f,h);var y=V_e(u);return y===I_e?n(u,f,h):y===k_e?a(u,f,h):y===N_e?r(u,f,h):y===j_e?s(u,f,h):y===L_e?typeof u.then!="function"&&typeof f.then!="function"&&i(u,f,h):y===R_e?i(u,f,h):y===O_e||y===D_e||y===U_e?o(u,f,h):!1}}function $_e(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Nh:E_e,areDatesEqual:T_e,areMapsEqual:r?KN(JN,Nh):JN,areObjectsEqual:r?Nh:A_e,arePrimitiveWrappersEqual:M_e,areRegExpsEqual:P_e,areSetsEqual:r?KN(eD,Nh):eD,areTypedArraysEqual:r?Nh:C_e};if(n&&(i=nD({},i,n(i))),e){var o=wg(i.areArraysEqual),a=wg(i.areMapsEqual),s=wg(i.areObjectsEqual),l=wg(i.areSetsEqual);i=nD({},i,{areArraysEqual:o,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:l})}return i}function z_e(t){return function(e,n,r,i,o,a,s){return t(e,n,s)}}function H_e(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,o=t.strict;if(r)return function(l,c){var u=r(),f=u.cache,h=f===void 0?e?new WeakMap:void 0:f,d=u.meta;return n(l,c,{cache:h,equals:i,meta:d,strict:o})};if(e)return function(l,c){return n(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var a={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,c){return n(l,c,a)}}var G_e=Fs();Fs({strict:!0});Fs({circular:!0});Fs({circular:!0,strict:!0});Fs({createInternalComparator:function(){return Wf}});Fs({strict:!0,createInternalComparator:function(){return Wf}});Fs({circular:!0,createInternalComparator:function(){return Wf}});Fs({circular:!0,createInternalComparator:function(){return Wf},strict:!0});function Fs(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,o=t.strict,a=o===void 0?!1:o,s=$_e(t),l=B_e(s),c=r?r(l):z_e(l);return H_e({circular:n,comparator:l,createState:i,equals:c,strict:a})}function W_e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function rD(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(o){n<0&&(n=o),o-n>e?(t(o),n=-1):W_e(i)};requestAnimationFrame(r)}function aS(t){"@babel/helpers - typeof";return aS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aS(t)}function q_e(t){return Q_e(t)||Y_e(t)||K_e(t)||X_e()}function X_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K_e(t,e){if(t){if(typeof t=="string")return iD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iD(t,e)}}function iD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Y_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Q_e(t){if(Array.isArray(t))return t}function Z_e(){var t={},e=function(){return null},n=!1,r=function i(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var a=o,s=q_e(a),l=s[0],c=s.slice(1);if(typeof l=="number"){rD(i.bind(null,c),l);return}i(l),rD(i.bind(null,c));return}aS(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function mp(t){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mp(t)}function oD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(n),!0).forEach(function(r){P5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P5(t,e,n){return e=J_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J_e(t){var e=exe(t,"string");return mp(e)==="symbol"?e:String(e)}function exe(t,e){if(mp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var txe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},nxe=function(e){return e},rxe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},hd=function(e,n){return Object.keys(n).reduce(function(r,i){return aD(aD({},r),{},P5({},i,e(i,n[i])))},{})},sD=function(e,n,r){return e.map(function(i){return"".concat(rxe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function ixe(t,e){return sxe(t)||axe(t,e)||C5(t,e)||oxe()}function oxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function axe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function sxe(t){if(Array.isArray(t))return t}function lxe(t){return fxe(t)||uxe(t)||C5(t)||cxe()}function cxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C5(t,e){if(t){if(typeof t=="string")return sS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sS(t,e)}}function uxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fxe(t){if(Array.isArray(t))return sS(t)}function sS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _y=1e-4,R5=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},O5=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},lD=function(e,n){return function(r){var i=R5(e,n);return O5(i,r)}},hxe=function(e,n){return function(r){var i=R5(e,n),o=[].concat(lxe(i.map(function(a,s){return a*s}).slice(1)),[0]);return O5(o,r)}},cD=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],a=n[2],s=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,o=0,a=1,s=1;break;case"ease":i=.25,o=.1,a=.25,s=1;break;case"ease-in":i=.42,o=0,a=1,s=1;break;case"ease-out":i=.42,o=0,a=.58,s=1;break;case"ease-in-out":i=0,o=0,a=.58,s=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=ixe(c,4);i=u[0],o=u[1],a=u[2],s=u[3]}}}var f=lD(i,a),h=lD(o,s),d=hxe(i,a),y=function(p){return p>1?1:p<0?0:p},v=function(p){for(var x=p>1?1:p,_=x,T=0;T<8;++T){var w=f(_)-x,M=d(_);if(Math.abs(w-x)<_y||M<_y)return h(_);_=y(_-w/M)}return h(_)};return v.isStepper=!1,v},dxe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,o=i===void 0?8:i,a=e.dt,s=a===void 0?17:a,l=function(u,f,h){var d=-(u-f)*r,y=h*o,v=h+(d-y)*s/1e3,g=h*s/1e3+u;return Math.abs(g-f)<_y&&Math.abs(v)<_y?[f,0]:[g,v]};return l.isStepper=!0,l.dt=s,l},pxe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return cD(i);case"spring":return dxe();default:if(i.split("(")[0]==="cubic-bezier")return cD(i)}return typeof i=="function"?i:null};function gp(t){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gp(t)}function uD(t){return vxe(t)||gxe(t)||I5(t)||mxe()}function mxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vxe(t){if(Array.isArray(t))return cS(t)}function fD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fD(Object(n),!0).forEach(function(r){lS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lS(t,e,n){return e=yxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yxe(t){var e=_xe(t,"string");return gp(e)==="symbol"?e:String(e)}function _xe(t,e){if(gp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xxe(t,e){return Sxe(t)||wxe(t,e)||I5(t,e)||bxe()}function bxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I5(t,e){if(t){if(typeof t=="string")return cS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cS(t,e)}}function cS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wxe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Sxe(t){if(Array.isArray(t))return t}var xy=function(e,n,r){return e+(n-e)*r},uS=function(e){var n=e.from,r=e.to;return n!==r},Exe=function t(e,n,r){var i=hd(function(o,a){if(uS(a)){var s=e(a.from,a.to,a.velocity),l=xxe(s,2),c=l[0],u=l[1];return rr(rr({},a),{},{from:c,velocity:u})}return a},n);return r<1?hd(function(o,a){return uS(a)?rr(rr({},a),{},{velocity:xy(a.velocity,i[o].velocity,r),from:xy(a.from,i[o].from,r)}):a},n):t(e,i,r-1)};const Txe=function(t,e,n,r,i){var o=txe(t,e),a=o.reduce(function(g,p){return rr(rr({},g),{},lS({},p,[t[p],e[p]]))},{}),s=o.reduce(function(g,p){return rr(rr({},g),{},lS({},p,{from:t[p],velocity:0,to:e[p]}))},{}),l=-1,c,u,f=function(){return null},h=function(){return hd(function(p,x){return x.from},s)},d=function(){return!Object.values(s).filter(uS).length},y=function(p){c||(c=p);var x=p-c,_=x/n.dt;s=Exe(n,s,_),i(rr(rr(rr({},t),e),h())),c=p,d()||(l=requestAnimationFrame(f))},v=function(p){u||(u=p);var x=(p-u)/r,_=hd(function(w,M){return xy.apply(void 0,uD(M).concat([n(x)]))},a);if(i(rr(rr(rr({},t),e),_)),x<1)l=requestAnimationFrame(f);else{var T=hd(function(w,M){return xy.apply(void 0,uD(M).concat([n(1)]))},a);i(rr(rr(rr({},t),e),T))}};return f=n.isStepper?y:v,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function tf(t){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tf(t)}var Axe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Mxe(t,e){if(t==null)return{};var n=Pxe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Pxe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Ab(t){return Ixe(t)||Oxe(t)||Rxe(t)||Cxe()}function Cxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rxe(t,e){if(t){if(typeof t=="string")return fS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fS(t,e)}}function Oxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ixe(t){if(Array.isArray(t))return fS(t)}function fS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hD(Object(n),!0).forEach(function(r){Hh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hh(t,e,n){return e=N5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,N5(r.key),r)}}function Lxe(t,e,n){return e&&Dxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function N5(t){var e=kxe(t,"string");return tf(e)==="symbol"?e:String(e)}function kxe(t,e){if(tf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(tf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hS(t,e)}function hS(t,e){return hS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hS(t,e)}function Uxe(t){var e=Fxe();return function(){var r=by(t),i;if(e){var o=by(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return dS(this,i)}}function dS(t,e){if(e&&(tf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pS(t)}function pS(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fxe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function by(t){return by=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},by(t)}var co=function(t){jxe(n,t);var e=Uxe(n);function n(r,i){var o;Nxe(this,n),o=e.call(this,r,i);var a=o.props,s=a.isActive,l=a.attributeName,c=a.from,u=a.to,f=a.steps,h=a.children,d=a.duration;if(o.handleStyleChange=o.handleStyleChange.bind(pS(o)),o.changeStyle=o.changeStyle.bind(pS(o)),!s||d<=0)return o.state={style:{}},typeof h=="function"&&(o.state={style:u}),dS(o);if(f&&f.length)o.state={style:f[0].style};else if(c){if(typeof h=="function")return o.state={style:c},dS(o);o.state={style:l?Hh({},l,c):c}}else o.state={style:{}};return o}return Lxe(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,a=i.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.isActive,s=o.canBegin,l=o.attributeName,c=o.shouldReAnimate,u=o.to,f=o.from,h=this.state.style;if(s){if(!a){var d={style:l?Hh({},l,u):u};this.state&&h&&(l&&h[l]!==u||!l&&h!==u)&&this.setState(d);return}if(!(G_e(i.to,u)&&i.canBegin&&i.isActive)){var y=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=y||c?f:i.to;if(this.state&&h){var g={style:l?Hh({},l,v):v};(l&&h[l]!==v||!l&&h!==v)&&this.setState(g)}this.runAnimation(qi(qi({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,a=i.from,s=i.to,l=i.duration,c=i.easing,u=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,d=Txe(a,s,pxe(c),l,this.changeStyle),y=function(){o.stopJSAnimation=d()};this.manager.start([h,u,y,l,f])}},{key:"runStepAnimation",value:function(i){var o=this,a=i.steps,s=i.begin,l=i.onAnimationStart,c=a[0],u=c.style,f=c.duration,h=f===void 0?0:f,d=function(v,g,p){if(p===0)return v;var x=g.duration,_=g.easing,T=_===void 0?"ease":_,w=g.style,M=g.properties,b=g.onAnimationEnd,A=p>0?a[p-1]:g,E=M||Object.keys(w);if(typeof T=="function"||T==="spring")return[].concat(Ab(v),[o.runJSAnimation.bind(o,{from:A.style,to:w,duration:x,easing:T}),x]);var P=sD(E,x,T),R=qi(qi(qi({},A.style),w),{},{transition:P});return[].concat(Ab(v),[R,x,b]).filter(nxe)};return this.manager.start([l].concat(Ab(a.reduce(d,[u,Math.max(h,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Z_e());var o=i.begin,a=i.duration,s=i.attributeName,l=i.to,c=i.easing,u=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,d=i.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof c=="function"||typeof d=="function"||c==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var v=s?Hh({},s,l):l,g=sD(Object.keys(v),a,c);y.start([u,o,qi(qi({},v),{},{transition:g}),a,f])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=Mxe(i,Axe),c=V.Children.count(o),u=this.state.style;if(typeof o=="function")return o(u);if(!s||c===0||a<=0)return o;var f=function(d){var y=d.props,v=y.style,g=v===void 0?{}:v,p=y.className,x=V.cloneElement(d,qi(qi({},l),{},{style:qi(qi({},g),u),className:p}));return x};return c===1?f(V.Children.only(o)):W.createElement("div",null,V.Children.map(o,function(h){return f(h)}))}}]),n}(V.PureComponent);co.displayName="Animate";co.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};co.propTypes={from:je.oneOfType([je.object,je.string]),to:je.oneOfType([je.object,je.string]),attributeName:je.string,duration:je.number,begin:je.number,easing:je.oneOfType([je.string,je.func]),steps:je.arrayOf(je.shape({duration:je.number.isRequired,style:je.object.isRequired,easing:je.oneOfType([je.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),je.func]),properties:je.arrayOf("string"),onAnimationEnd:je.func})),children:je.oneOfType([je.node,je.func]),isActive:je.bool,canBegin:je.bool,onAnimationEnd:je.func,shouldReAnimate:je.bool,onAnimationStart:je.func,onAnimationReStart:je.func};je.object,je.object,je.object,je.element;je.object,je.object,je.object,je.oneOfType([je.array,je.element]),je.any;function vp(t){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(t)}function wy(){return wy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wy.apply(this,arguments)}function Vxe(t,e){return Hxe(t)||zxe(t,e)||$xe(t,e)||Bxe()}function Bxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $xe(t,e){if(t){if(typeof t=="string")return dD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dD(t,e)}}function dD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zxe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Hxe(t){if(Array.isArray(t))return t}function pD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pD(Object(n),!0).forEach(function(r){Gxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gxe(t,e,n){return e=Wxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wxe(t){var e=qxe(t,"string");return vp(e)=="symbol"?e:e+""}function qxe(t,e){if(vp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gD=function(e,n,r,i,o){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,u;if(a>0&&o instanceof Array){for(var f=[0,0,0,0],h=0,d=4;h<d;h++)f[h]=o[h]>a?a:o[h];u="M".concat(e,",").concat(n+s*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(c,",").concat(e+l*f[0],",").concat(n)),u+="L ".concat(e+r-l*f[1],",").concat(n),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+s*f[1])),u+="L ".concat(e+r,",").concat(n+i-s*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(c,`,
        `).concat(e+r-l*f[2],",").concat(n+i)),u+="L ".concat(e+l*f[3],",").concat(n+i),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+i-s*f[3])),u+="Z"}else if(a>0&&o===+o&&o>0){var y=Math.min(a,o);u="M ".concat(e,",").concat(n+s*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+l*y,",").concat(n,`
            L `).concat(e+r-l*y,",").concat(n,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+r,",").concat(n+s*y,`
            L `).concat(e+r,",").concat(n+i-s*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+r-l*y,",").concat(n+i,`
            L `).concat(e+l*y,",").concat(n+i,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e,",").concat(n+i-s*y," Z")}else u="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return u},Xxe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,o=n.x,a=n.y,s=n.width,l=n.height;if(Math.abs(s)>0&&Math.abs(l)>0){var c=Math.min(o,o+s),u=Math.max(o,o+s),f=Math.min(a,a+l),h=Math.max(a,a+l);return r>=c&&r<=u&&i>=f&&i<=h}return!1},Kxe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},XA=function(e){var n=mD(mD({},Kxe),e),r=V.useRef(),i=V.useState(-1),o=Vxe(i,2),a=o[0],s=o[1];V.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&s(T)}catch{}},[]);var l=n.x,c=n.y,u=n.width,f=n.height,h=n.radius,d=n.className,y=n.animationEasing,v=n.animationDuration,g=n.animationBegin,p=n.isAnimationActive,x=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||f!==+f||u===0||f===0)return null;var _=_t("recharts-rectangle",d);return x?W.createElement(co,{canBegin:a>0,from:{width:u,height:f,x:l,y:c},to:{width:u,height:f,x:l,y:c},duration:v,animationEasing:y,isActive:x},function(T){var w=T.width,M=T.height,b=T.x,A=T.y;return W.createElement(co,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:v,isActive:p,easing:y},W.createElement("path",wy({},Ke(n,!0),{className:_,d:gD(b,A,w,M,h),ref:r})))}):W.createElement("path",wy({},Ke(n,!0),{className:_,d:gD(l,c,u,f,h)}))},Yxe=["points","className","baseLinePoints","connectNulls"];function hu(){return hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hu.apply(this,arguments)}function Qxe(t,e){if(t==null)return{};var n=Zxe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Zxe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vD(t){return nbe(t)||tbe(t)||ebe(t)||Jxe()}function Jxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ebe(t,e){if(t){if(typeof t=="string")return mS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mS(t,e)}}function tbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nbe(t){if(Array.isArray(t))return mS(t)}function mS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var yD=function(e){return e&&e.x===+e.x&&e.y===+e.y},rbe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){yD(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),yD(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},dd=function(e,n){var r=rbe(e);n&&(r=[r.reduce(function(o,a){return[].concat(vD(o),vD(a))},[])]);var i=r.map(function(o){return o.reduce(function(a,s,l){return"".concat(a).concat(l===0?"M":"L").concat(s.x,",").concat(s.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},ibe=function(e,n,r){var i=dd(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(dd(n.reverse(),r).slice(1))},obe=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,o=e.connectNulls,a=Qxe(e,Yxe);if(!n||!n.length)return null;var s=_t("recharts-polygon",r);if(i&&i.length){var l=a.stroke&&a.stroke!=="none",c=ibe(n,i,o);return W.createElement("g",{className:s},W.createElement("path",hu({},Ke(a,!0),{fill:c.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:c})),l?W.createElement("path",hu({},Ke(a,!0),{fill:"none",d:dd(n,o)})):null,l?W.createElement("path",hu({},Ke(a,!0),{fill:"none",d:dd(i,o)})):null)}var u=dd(n,o);return W.createElement("path",hu({},Ke(a,!0),{fill:u.slice(-1)==="Z"?a.fill:"none",className:s,d:u}))};function gS(){return gS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gS.apply(this,arguments)}var nm=function(e){var n=e.cx,r=e.cy,i=e.r,o=e.className,a=_t("recharts-dot",o);return n===+n&&r===+r&&i===+i?W.createElement("circle",gS({},Ke(e,!1),$v(e),{className:a,cx:n,cy:r,r:i})):null};function yp(t){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yp(t)}var abe=["x","y","top","left","width","height","className"];function vS(){return vS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vS.apply(this,arguments)}function _D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sbe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_D(Object(n),!0).forEach(function(r){lbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_D(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lbe(t,e,n){return e=cbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cbe(t){var e=ube(t,"string");return yp(e)=="symbol"?e:e+""}function ube(t,e){if(yp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fbe(t,e){if(t==null)return{};var n=hbe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hbe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var dbe=function(e,n,r,i,o,a){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},pbe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.top,s=a===void 0?0:a,l=e.left,c=l===void 0?0:l,u=e.width,f=u===void 0?0:u,h=e.height,d=h===void 0?0:h,y=e.className,v=fbe(e,abe),g=sbe({x:r,y:o,top:s,left:c,width:f,height:d},v);return!Ae(r)||!Ae(o)||!Ae(f)||!Ae(d)||!Ae(s)||!Ae(c)?null:W.createElement("path",vS({},Ke(g,!0),{className:_t("recharts-cross",y),d:dbe(r,o,f,d,s,c)}))},mbe=a_,gbe=qV,vbe=Fo;function ybe(t,e){return t&&t.length?mbe(t,vbe(e),gbe):void 0}var _be=ybe;const xbe=Ft(_be);var bbe=a_,wbe=Fo,Sbe=XV;function Ebe(t,e){return t&&t.length?bbe(t,wbe(e),Sbe):void 0}var Tbe=Ebe;const Abe=Ft(Tbe);var Mbe=["cx","cy","angle","ticks","axisLine"],Pbe=["ticks","tick","angle","tickFormatter","stroke"];function nf(t){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nf(t)}function pd(){return pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pd.apply(this,arguments)}function xD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xD(Object(n),!0).forEach(function(r){u_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bD(t,e){if(t==null)return{};var n=Cbe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Cbe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Rbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L5(r.key),r)}}function Obe(t,e,n){return e&&wD(t.prototype,e),n&&wD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ibe(t,e,n){return e=Sy(e),Nbe(t,D5()?Reflect.construct(e,n||[],Sy(t).constructor):e.apply(t,n))}function Nbe(t,e){if(e&&(nf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dbe(t)}function Dbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D5=function(){return!!t})()}function Sy(t){return Sy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sy(t)}function Lbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yS(t,e)}function yS(t,e){return yS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yS(t,e)}function u_(t,e,n){return e=L5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L5(t){var e=kbe(t,"string");return nf(e)=="symbol"?e:e+""}function kbe(t,e){if(nf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var f_=function(t){function e(){return Rbe(this,e),Ibe(this,e,arguments)}return Lbe(e,t),Obe(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,o=this.props,a=o.angle,s=o.cx,l=o.cy;return Qt(s,l,i,a)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,o=r.cy,a=r.angle,s=r.ticks,l=xbe(s,function(u){return u.coordinate||0}),c=Abe(s,function(u){return u.coordinate||0});return{cx:i,cy:o,startAngle:a,endAngle:a,innerRadius:c.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,a=r.angle,s=r.ticks,l=r.axisLine,c=bD(r,Mbe),u=s.reduce(function(y,v){return[Math.min(y[0],v.coordinate),Math.max(y[1],v.coordinate)]},[1/0,-1/0]),f=Qt(i,o,u[0],a),h=Qt(i,o,u[1],a),d=Zs(Zs(Zs({},Ke(c,!1)),{},{fill:"none"},Ke(l,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return W.createElement("line",pd({className:"recharts-polar-radius-axis-line"},d))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,a=i.tick,s=i.angle,l=i.tickFormatter,c=i.stroke,u=bD(i,Pbe),f=this.getTickTextAnchor(),h=Ke(u,!1),d=Ke(a,!1),y=o.map(function(v,g){var p=r.getTickValueCoord(v),x=Zs(Zs(Zs(Zs({textAnchor:f,transform:"rotate(".concat(90-s,", ").concat(p.x,", ").concat(p.y,")")},h),{},{stroke:"none",fill:c},d),{},{index:g},p),{},{payload:v});return W.createElement(St,pd({className:_t("recharts-polar-radius-axis-tick",w5(a)),key:"tick-".concat(v.coordinate)},$l(r.props,v,g)),e.renderTickItem(a,x,l?l(v.value,g):v.value))});return W.createElement(St,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.axisLine,a=r.tick;return!i||!i.length?null:W.createElement(St,{className:_t("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),a&&this.renderTicks(),Qn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,o){var a;return W.isValidElement(r)?a=W.cloneElement(r,i):ot(r)?a=r(i):a=W.createElement(zl,pd({},i,{className:"recharts-polar-radius-axis-tick-value"}),o),a}}])}(V.PureComponent);u_(f_,"displayName","PolarRadiusAxis");u_(f_,"axisType","radiusAxis");u_(f_,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function rf(t){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rf(t)}function fl(){return fl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fl.apply(this,arguments)}function SD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Js(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SD(Object(n),!0).forEach(function(r){h_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ED(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j5(r.key),r)}}function Ube(t,e,n){return e&&ED(t.prototype,e),n&&ED(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fbe(t,e,n){return e=Ey(e),Vbe(t,k5()?Reflect.construct(e,n||[],Ey(t).constructor):e.apply(t,n))}function Vbe(t,e){if(e&&(rf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bbe(t)}function Bbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k5=function(){return!!t})()}function Ey(t){return Ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ey(t)}function $be(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_S(t,e)}function _S(t,e){return _S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_S(t,e)}function h_(t,e,n){return e=j5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j5(t){var e=zbe(t,"string");return rf(e)=="symbol"?e:e+""}function zbe(t,e){if(rf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hbe=Math.PI/180,TD=1e-5,d_=function(t){function e(){return jbe(this,e),Fbe(this,e,arguments)}return $be(e,t),Ube(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.cx,a=i.cy,s=i.radius,l=i.orientation,c=i.tickSize,u=c||8,f=Qt(o,a,s,r.coordinate),h=Qt(o,a,s+(l==="inner"?-1:1)*u,r.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,o=Math.cos(-r.coordinate*Hbe),a;return o>TD?a=i==="outer"?"start":"end":o<-TD?a=i==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,a=r.radius,s=r.axisLine,l=r.axisLineType,c=Js(Js({},Ke(this.props,!1)),{},{fill:"none"},Ke(s,!1));if(l==="circle")return W.createElement(nm,fl({className:"recharts-polar-angle-axis-line"},c,{cx:i,cy:o,r:a}));var u=this.props.ticks,f=u.map(function(h){return Qt(i,o,a,h.coordinate)});return W.createElement(obe,fl({className:"recharts-polar-angle-axis-line"},c,{points:f}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,a=i.tick,s=i.tickLine,l=i.tickFormatter,c=i.stroke,u=Ke(this.props,!1),f=Ke(a,!1),h=Js(Js({},u),{},{fill:"none"},Ke(s,!1)),d=o.map(function(y,v){var g=r.getTickLineCoord(y),p=r.getTickTextAnchor(y),x=Js(Js(Js({textAnchor:p},u),{},{stroke:"none",fill:c},f),{},{index:v,payload:y,x:g.x2,y:g.y2});return W.createElement(St,fl({className:_t("recharts-polar-angle-axis-tick",w5(a)),key:"tick-".concat(y.coordinate)},$l(r.props,y,v)),s&&W.createElement("line",fl({className:"recharts-polar-angle-axis-tick-line"},h,g)),a&&e.renderTickItem(a,x,l?l(y.value,v):y.value))});return W.createElement(St,{className:"recharts-polar-angle-axis-ticks"},d)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.radius,a=r.axisLine;return o<=0||!i||!i.length?null:W.createElement(St,{className:_t("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,o){var a;return W.isValidElement(r)?a=W.cloneElement(r,i):ot(r)?a=r(i):a=W.createElement(zl,fl({},i,{className:"recharts-polar-angle-axis-tick-value"}),o),a}}])}(V.PureComponent);h_(d_,"displayName","PolarAngleAxis");h_(d_,"axisType","angleAxis");h_(d_,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Gbe=z4,Wbe=Gbe(Object.getPrototypeOf,Object),qbe=Wbe,Xbe=Ca,Kbe=qbe,Ybe=Ra,Qbe="[object Object]",Zbe=Function.prototype,Jbe=Object.prototype,U5=Zbe.toString,e1e=Jbe.hasOwnProperty,t1e=U5.call(Object);function n1e(t){if(!Ybe(t)||Xbe(t)!=Qbe)return!1;var e=Kbe(t);if(e===null)return!0;var n=e1e.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&U5.call(n)==t1e}var r1e=n1e;const i1e=Ft(r1e);var o1e=Ca,a1e=Ra,s1e="[object Boolean]";function l1e(t){return t===!0||t===!1||a1e(t)&&o1e(t)==s1e}var c1e=l1e;const u1e=Ft(c1e);function _p(t){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_p(t)}function Ty(){return Ty=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ty.apply(this,arguments)}function f1e(t,e){return m1e(t)||p1e(t,e)||d1e(t,e)||h1e()}function h1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d1e(t,e){if(t){if(typeof t=="string")return AD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AD(t,e)}}function AD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p1e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function m1e(t){if(Array.isArray(t))return t}function MD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MD(Object(n),!0).forEach(function(r){g1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g1e(t,e,n){return e=v1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v1e(t){var e=y1e(t,"string");return _p(e)=="symbol"?e:e+""}function y1e(t,e){if(_p(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_p(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CD=function(e,n,r,i,o){var a=r-i,s;return s="M ".concat(e,",").concat(n),s+="L ".concat(e+r,",").concat(n),s+="L ".concat(e+r-a/2,",").concat(n+o),s+="L ".concat(e+r-a/2-i,",").concat(n+o),s+="L ".concat(e,",").concat(n," Z"),s},_1e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},x1e=function(e){var n=PD(PD({},_1e),e),r=V.useRef(),i=V.useState(-1),o=f1e(i,2),a=o[0],s=o[1];V.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&s(_)}catch{}},[]);var l=n.x,c=n.y,u=n.upperWidth,f=n.lowerWidth,h=n.height,d=n.className,y=n.animationEasing,v=n.animationDuration,g=n.animationBegin,p=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||f!==+f||h!==+h||u===0&&f===0||h===0)return null;var x=_t("recharts-trapezoid",d);return p?W.createElement(co,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:c},to:{upperWidth:u,lowerWidth:f,height:h,x:l,y:c},duration:v,animationEasing:y,isActive:p},function(_){var T=_.upperWidth,w=_.lowerWidth,M=_.height,b=_.x,A=_.y;return W.createElement(co,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:v,easing:y},W.createElement("path",Ty({},Ke(n,!0),{className:x,d:CD(b,A,T,w,M),ref:r})))}):W.createElement("g",null,W.createElement("path",Ty({},Ke(n,!0),{className:x,d:CD(l,c,u,f,h)})))},b1e=["option","shapeType","propTransformer","activeClassName","isActive"];function xp(t){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xp(t)}function w1e(t,e){if(t==null)return{};var n=S1e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function S1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function RD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ay(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RD(Object(n),!0).forEach(function(r){E1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function E1e(t,e,n){return e=T1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T1e(t){var e=A1e(t,"string");return xp(e)=="symbol"?e:e+""}function A1e(t,e){if(xp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function M1e(t,e){return Ay(Ay({},e),t)}function P1e(t,e){return t==="symbols"}function OD(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return W.createElement(XA,n);case"trapezoid":return W.createElement(x1e,n);case"sector":return W.createElement(T5,n);case"symbols":if(P1e(e))return W.createElement(dA,n);break;default:return null}}function C1e(t){return V.isValidElement(t)?t.props:t}function F5(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?M1e:r,o=t.activeClassName,a=o===void 0?"recharts-active-shape":o,s=t.isActive,l=w1e(t,b1e),c;if(V.isValidElement(e))c=V.cloneElement(e,Ay(Ay({},l),C1e(e)));else if(ot(e))c=e(l);else if(i1e(e)&&!u1e(e)){var u=i(e,l);c=W.createElement(OD,{shapeType:n,elementProps:u})}else{var f=l;c=W.createElement(OD,{shapeType:n,elementProps:f})}return s?W.createElement(St,{className:a},c):c}function p_(t,e){return e!=null&&"trapezoids"in t.props}function m_(t,e){return e!=null&&"sectors"in t.props}function bp(t,e){return e!=null&&"points"in t.props}function R1e(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,o=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&o}function O1e(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function I1e(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function N1e(t,e){var n;return p_(t,e)?n=R1e:m_(t,e)?n=O1e:bp(t,e)&&(n=I1e),n}function D1e(t,e){var n;return p_(t,e)?n="trapezoids":m_(t,e)?n="sectors":bp(t,e)&&(n="points"),n}function L1e(t,e){if(p_(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(m_(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return bp(t,e)?e.payload:{}}function k1e(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=D1e(n,e),o=L1e(n,e),a=r.filter(function(l,c){var u=Hl(o,l),f=n.props[i].filter(function(y){var v=N1e(n,e);return v(y,e)}),h=n.props[i].indexOf(f[f.length-1]),d=c===h;return u&&d}),s=r.indexOf(a[a.length-1]);return s}var Kg;function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(t)}function du(){return du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},du.apply(this,arguments)}function ID(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ID(Object(n),!0).forEach(function(r){Ci(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ID(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ND(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B5(r.key),r)}}function U1e(t,e,n){return e&&ND(t.prototype,e),n&&ND(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function F1e(t,e,n){return e=My(e),V1e(t,V5()?Reflect.construct(e,n||[],My(t).constructor):e.apply(t,n))}function V1e(t,e){if(e&&(of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B1e(t)}function B1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V5=function(){return!!t})()}function My(t){return My=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},My(t)}function $1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xS(t,e)}function xS(t,e){return xS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xS(t,e)}function Ci(t,e,n){return e=B5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B5(t){var e=z1e(t,"string");return of(e)=="symbol"?e:e+""}function z1e(t,e){if(of(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ia=function(t){function e(n){var r;return j1e(this,e),r=F1e(this,e,[n]),Ci(r,"pieRef",null),Ci(r,"sectorRefs",[]),Ci(r,"id",ec("recharts-pie-")),Ci(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),ot(i)&&i()}),Ci(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),ot(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return $1e(e,t),U1e(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.label,s=o.labelLine,l=o.dataKey,c=o.valueKey,u=Ke(this.props,!1),f=Ke(a,!1),h=Ke(s,!1),d=a&&a.offsetRadius||20,y=r.map(function(v,g){var p=(v.startAngle+v.endAngle)/2,x=Qt(v.cx,v.cy,v.outerRadius+d,p),_=Xt(Xt(Xt(Xt({},u),v),{},{stroke:"none"},f),{},{index:g,textAnchor:e.getTextAnchor(x.x,v.cx)},x),T=Xt(Xt(Xt(Xt({},u),v),{},{fill:"none",stroke:v.fill},h),{},{index:g,points:[Qt(v.cx,v.cy,v.outerRadius,p),x]}),w=l;return ft(l)&&ft(c)?w="value":ft(l)&&(w=c),W.createElement(St,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(g)},s&&e.renderLabelLineItem(s,T,"line"),e.renderLabelItem(a,_,Sn(v,w)))});return W.createElement(St,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(r){var i=this,o=this.props,a=o.activeShape,s=o.blendStroke,l=o.inactiveShape;return r.map(function(c,u){if((c==null?void 0:c.startAngle)===0&&(c==null?void 0:c.endAngle)===0&&r.length!==1)return null;var f=i.isActiveIndex(u),h=l&&i.hasActiveIndex()?l:null,d=f?a:h,y=Xt(Xt({},c),{},{stroke:s?c.fill:c.stroke,tabIndex:-1});return W.createElement(St,du({ref:function(g){g&&!i.sectorRefs.includes(g)&&i.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},$l(i.props,c,u),{key:"sector-".concat(c==null?void 0:c.startAngle,"-").concat(c==null?void 0:c.endAngle,"-").concat(c.midAngle,"-").concat(u)}),W.createElement(F5,du({option:d,isActive:f,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,o=i.sectors,a=i.isAnimationActive,s=i.animationBegin,l=i.animationDuration,c=i.animationEasing,u=i.animationId,f=this.state,h=f.prevSectors,d=f.prevIsAnimationActive;return W.createElement(co,{begin:s,duration:l,isActive:a,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(d),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var v=y.t,g=[],p=o&&o[0],x=p.startAngle;return o.forEach(function(_,T){var w=h&&h[T],M=T>0?fi(_,"paddingAngle",0):0;if(w){var b=Un(w.endAngle-w.startAngle,_.endAngle-_.startAngle),A=Xt(Xt({},_),{},{startAngle:x+M,endAngle:x+b(v)+M});g.push(A),x=A.endAngle}else{var E=_.endAngle,P=_.startAngle,R=Un(0,E-P),N=R(v),O=Xt(Xt({},_),{},{startAngle:x+M,endAngle:x+N+M});g.push(O),x=O.endAngle}}),W.createElement(St,null,r.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var a=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"ArrowRight":{var s=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,o=r.isAnimationActive,a=this.state.prevSectors;return o&&i&&i.length&&(!a||!Hl(a,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,o=i.hide,a=i.sectors,s=i.className,l=i.label,c=i.cx,u=i.cy,f=i.innerRadius,h=i.outerRadius,d=i.isAnimationActive,y=this.state.isAnimationFinished;if(o||!a||!a.length||!Ae(c)||!Ae(u)||!Ae(f)||!Ae(h))return null;var v=_t("recharts-pie",s);return W.createElement(St,{tabIndex:this.props.rootTabIndex,className:v,ref:function(p){r.pieRef=p}},this.renderSectors(),l&&this.renderLabels(a),Qn.renderCallByParent(this.props,null,!1),(!d||y)&&Co.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,o){if(W.isValidElement(r))return W.cloneElement(r,i);if(ot(r))return r(i);var a=_t("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return W.createElement(Il,du({},i,{key:o,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(r,i,o){if(W.isValidElement(r))return W.cloneElement(r,i);var a=o;if(ot(r)&&(a=r(i),W.isValidElement(a)))return a;var s=_t("recharts-pie-label-text",typeof r!="boolean"&&!ot(r)?r.className:"");return W.createElement(zl,du({},i,{alignmentBaseline:"middle",className:s}),a)}}])}(V.PureComponent);Kg=Ia;Ci(Ia,"displayName","Pie");Ci(Ia,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!so.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ci(Ia,"parseDeltaAngle",function(t,e){var n=kr(e-t),r=Math.min(Math.abs(e-t),360);return n*r});Ci(Ia,"getRealPieData",function(t){var e=t.data,n=t.children,r=Ke(t,!1),i=hi(n,Qd);return e&&e.length?e.map(function(o,a){return Xt(Xt(Xt({payload:o},r),o),i&&i[a]&&i[a].props)}):i&&i.length?i.map(function(o){return Xt(Xt({},r),o.props)}):[]});Ci(Ia,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,o=e.height,a=b5(i,o),s=r+jr(t.cx,i,i/2),l=n+jr(t.cy,o,o/2),c=jr(t.innerRadius,a,0),u=jr(t.outerRadius,a,a*.8),f=t.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:s,cy:l,innerRadius:c,outerRadius:u,maxRadius:f}});Ci(Ia,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?Xt(Xt({},e.type.defaultProps),e.props):e.props,i=Kg.getRealPieData(r);if(!i||!i.length)return null;var o=r.cornerRadius,a=r.startAngle,s=r.endAngle,l=r.paddingAngle,c=r.dataKey,u=r.nameKey,f=r.valueKey,h=r.tooltipType,d=Math.abs(r.minAngle),y=Kg.parseCoordinateOfPie(r,n),v=Kg.parseDeltaAngle(a,s),g=Math.abs(v),p=c;ft(c)&&ft(f)?(ao(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),p="value"):ft(c)&&(ao(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),p=f);var x=i.filter(function(A){return Sn(A,p,0)!==0}).length,_=(g>=360?x:x-1)*l,T=g-x*d-_,w=i.reduce(function(A,E){var P=Sn(E,p,0);return A+(Ae(P)?P:0)},0),M;if(w>0){var b;M=i.map(function(A,E){var P=Sn(A,p,0),R=Sn(A,u,E),N=(Ae(P)?P:0)/w,O;E?O=b.endAngle+kr(v)*l*(P!==0?1:0):O=a;var D=O+kr(v)*((P!==0?d:0)+N*T),k=(O+D)/2,H=(y.innerRadius+y.outerRadius)/2,B=[{name:R,value:P,payload:A,dataKey:p,type:h}],F=Qt(y.cx,y.cy,H,k);return b=Xt(Xt(Xt({percent:N,cornerRadius:o,name:R,tooltipPayload:B,midAngle:k,middleRadius:H,tooltipPosition:F},A),y),{},{value:Sn(A,p),startAngle:O,endAngle:D,payload:A,paddingAngle:kr(v)*l}),b})}return Xt(Xt({},y),{},{sectors:M,data:i})});var H1e=Math.ceil,G1e=Math.max;function W1e(t,e,n,r){for(var i=-1,o=G1e(H1e((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}var q1e=W1e,X1e=lV,DD=1/0,K1e=17976931348623157e292;function Y1e(t){if(!t)return t===0?t:0;if(t=X1e(t),t===DD||t===-DD){var e=t<0?-1:1;return e*K1e}return t===t?t:0}var $5=Y1e,Q1e=q1e,Z1e=J0,Mb=$5;function J1e(t){return function(e,n,r){return r&&typeof r!="number"&&Z1e(e,n,r)&&(n=r=void 0),e=Mb(e),n===void 0?(n=e,e=0):n=Mb(n),r=r===void 0?e<n?1:-1:Mb(r),Q1e(e,n,r,t)}}var ewe=J1e,twe=ewe,nwe=twe(),rwe=nwe;const Py=Ft(rwe);function wp(t){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wp(t)}function LD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LD(Object(n),!0).forEach(function(r){z5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function z5(t,e,n){return e=iwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iwe(t){var e=owe(t,"string");return wp(e)=="symbol"?e:e+""}function owe(t,e){if(wp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var awe=["Webkit","Moz","O","ms"],swe=function(e,n){var r=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=awe.reduce(function(o,a){return kD(kD({},o),{},z5({},a+r,n))},{});return i[e]=n,i};function af(t){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},af(t)}function Cy(){return Cy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cy.apply(this,arguments)}function jD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jD(Object(n),!0).forEach(function(r){ii(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G5(r.key),r)}}function cwe(t,e,n){return e&&UD(t.prototype,e),n&&UD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function uwe(t,e,n){return e=Ry(e),fwe(t,H5()?Reflect.construct(e,n||[],Ry(t).constructor):e.apply(t,n))}function fwe(t,e){if(e&&(af(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hwe(t)}function hwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H5=function(){return!!t})()}function Ry(t){return Ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ry(t)}function dwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bS(t,e)}function bS(t,e){return bS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bS(t,e)}function ii(t,e,n){return e=G5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G5(t){var e=pwe(t,"string");return af(e)=="symbol"?e:e+""}function pwe(t,e){if(af(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mwe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,o=e.x,a=e.width,s=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=ud().domain(Py(0,l)).range([o,o+a-s]),u=c.domain().map(function(f){return c(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:u}},FD=function(e){return e.changedTouches&&!!e.changedTouches.length},sf=function(t){function e(n){var r;return lwe(this,e),r=uwe(this,e,[n]),ii(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),ii(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),ii(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,o=i.endIndex,a=i.onDragEnd,s=i.startIndex;a==null||a({endIndex:o,startIndex:s})}),r.detachDragEndListener()}),ii(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),ii(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),ii(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),ii(r,"handleSlideDragStart",function(i){var o=FD(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return dwe(e,t),cwe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,o=r.endX,a=this.state.scaleValues,s=this.props,l=s.gap,c=s.data,u=c.length-1,f=Math.min(i,o),h=Math.max(i,o),d=e.getIndexInRange(a,f),y=e.getIndexInRange(a,h);return{startIndex:d-d%l,endIndex:y===u?u:y-y%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,o=i.data,a=i.tickFormatter,s=i.dataKey,l=Sn(o[r],s,r);return ot(a)?a(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,o=i.slideMoveStartX,a=i.startX,s=i.endX,l=this.props,c=l.x,u=l.width,f=l.travellerWidth,h=l.startIndex,d=l.endIndex,y=l.onChange,v=r.pageX-o;v>0?v=Math.min(v,c+u-f-s,c+u-f-a):v<0&&(v=Math.max(v,c-a,c-s));var g=this.getIndex({startX:a+v,endX:s+v});(g.startIndex!==h||g.endIndex!==d)&&y&&y(g),this.setState({startX:a+v,endX:s+v,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var o=FD(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,o=i.brushMoveStartX,a=i.movingTravellerId,s=i.endX,l=i.startX,c=this.state[a],u=this.props,f=u.x,h=u.width,d=u.travellerWidth,y=u.onChange,v=u.gap,g=u.data,p={startX:this.state.startX,endX:this.state.endX},x=r.pageX-o;x>0?x=Math.min(x,f+h-d-c):x<0&&(x=Math.max(x,f-c)),p[a]=c+x;var _=this.getIndex(p),T=_.startIndex,w=_.endIndex,M=function(){var A=g.length-1;return a==="startX"&&(s>l?T%v===0:w%v===0)||s<l&&w===A||a==="endX"&&(s>l?w%v===0:T%v===0)||s>l&&w===A};this.setState(ii(ii({},a,c+x),"brushMoveStartX",r.pageX),function(){y&&M()&&y(_)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var o=this,a=this.state,s=a.scaleValues,l=a.startX,c=a.endX,u=this.state[i],f=s.indexOf(u);if(f!==-1){var h=f+r;if(!(h===-1||h>=s.length)){var d=s[h];i==="startX"&&d>=c||i==="endX"&&d<=l||this.setState(ii({},i,d),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.fill,c=r.stroke;return W.createElement("rect",{stroke:c,fill:l,x:i,y:o,width:a,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.data,c=r.children,u=r.padding,f=V.Children.only(c);return f?W.cloneElement(f,{x:i,y:o,width:a,height:s,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var o,a,s=this,l=this.props,c=l.y,u=l.travellerWidth,f=l.height,h=l.traveller,d=l.ariaLabel,y=l.data,v=l.startIndex,g=l.endIndex,p=Math.max(r,this.props.x),x=Pb(Pb({},Ke(this.props,!1)),{},{x:p,y:c,width:u,height:f}),_=d||"Min value: ".concat((o=y[v])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=y[g])===null||a===void 0?void 0:a.name);return W.createElement(St,{tabIndex:0,role:"slider","aria-label":_,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),s.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,x))}},{key:"renderSlide",value:function(r,i){var o=this.props,a=o.y,s=o.height,l=o.stroke,c=o.travellerWidth,u=Math.min(r,i)+c,f=Math.max(Math.abs(i-r)-c,0);return W.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:a,width:f,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,o=r.endIndex,a=r.y,s=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,f=u.startX,h=u.endX,d=5,y={pointerEvents:"none",fill:c};return W.createElement(St,{className:"recharts-brush-texts"},W.createElement(zl,Cy({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-d,y:a+s/2},y),this.getTextOfTick(i)),W.createElement(zl,Cy({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+l+d,y:a+s/2},y),this.getTextOfTick(o)))}},{key:"render",value:function(){var r=this.props,i=r.data,o=r.className,a=r.children,s=r.x,l=r.y,c=r.width,u=r.height,f=r.alwaysShowText,h=this.state,d=h.startX,y=h.endX,v=h.isTextActive,g=h.isSlideMoving,p=h.isTravellerMoving,x=h.isTravellerFocused;if(!i||!i.length||!Ae(s)||!Ae(l)||!Ae(c)||!Ae(u)||c<=0||u<=0)return null;var _=_t("recharts-brush",o),T=W.Children.count(a)===1,w=swe("userSelect","none");return W.createElement(St,{className:_,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),T&&this.renderPanorama(),this.renderSlide(d,y),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(y,"endX"),(v||g||p||x||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,o=r.y,a=r.width,s=r.height,l=r.stroke,c=Math.floor(o+s/2)-1;return W.createElement(W.Fragment,null,W.createElement("rect",{x:i,y:o,width:a,height:s,fill:l,stroke:"none"}),W.createElement("line",{x1:i+1,y1:c,x2:i+a-1,y2:c,fill:"none",stroke:"#fff"}),W.createElement("line",{x1:i+1,y1:c+2,x2:i+a-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var o;return W.isValidElement(r)?o=W.cloneElement(r,i):ot(r)?o=r(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(r,i){var o=r.data,a=r.width,s=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,f=r.endIndex;if(o!==i.prevData||c!==i.prevUpdateId)return Pb({prevData:o,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:a},o&&o.length?mwe({data:o,width:a,x:s,travellerWidth:l,startIndex:u,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||s!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([s,s+a-l]);var h=i.scale.domain().map(function(d){return i.scale(d)});return{prevData:o,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var o=r.length,a=0,s=o-1;s-a>1;){var l=Math.floor((a+s)/2);r[l]>i?s=l:a=l}return i>=r[s]?s:a}}])}(V.PureComponent);ii(sf,"displayName","Brush");ii(sf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var gwe=xA;function vwe(t,e){var n;return gwe(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}var ywe=vwe,_we=L4,xwe=Fo,bwe=ywe,wwe=Zr,Swe=J0;function Ewe(t,e,n){var r=wwe(t)?_we:bwe;return n&&Swe(t,e,n)&&(e=void 0),r(t,xwe(e))}var Twe=Ewe;const Awe=Ft(Twe);var Ro=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},VD=rV;function Mwe(t,e,n){e=="__proto__"&&VD?VD(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Pwe=Mwe,Cwe=Pwe,Rwe=tV,Owe=Fo;function Iwe(t,e){var n={};return e=Owe(e),Rwe(t,function(r,i,o){Cwe(n,i,e(r,i,o))}),n}var Nwe=Iwe;const Dwe=Ft(Nwe);function Lwe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var kwe=Lwe,jwe=xA;function Uwe(t,e){var n=!0;return jwe(t,function(r,i,o){return n=!!e(r,i,o),n}),n}var Fwe=Uwe,Vwe=kwe,Bwe=Fwe,$we=Fo,zwe=Zr,Hwe=J0;function Gwe(t,e,n){var r=zwe(t)?Vwe:Bwe;return n&&Hwe(t,e,n)&&(e=void 0),r(t,$we(e))}var Wwe=Gwe;const W5=Ft(Wwe);var qwe=["x","y"];function Sp(t){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sp(t)}function wS(){return wS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wS.apply(this,arguments)}function BD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BD(Object(n),!0).forEach(function(r){Xwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xwe(t,e,n){return e=Kwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kwe(t){var e=Ywe(t,"string");return Sp(e)=="symbol"?e:e+""}function Ywe(t,e){if(Sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qwe(t,e){if(t==null)return{};var n=Zwe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Zwe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Jwe(t,e){var n=t.x,r=t.y,i=Qwe(t,qwe),o="".concat(n),a=parseInt(o,10),s="".concat(r),l=parseInt(s,10),c="".concat(e.height||i.height),u=parseInt(c,10),f="".concat(e.width||i.width),h=parseInt(f,10);return Dh(Dh(Dh(Dh(Dh({},e),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:u,width:h,name:e.name,radius:e.radius})}function $D(t){return W.createElement(F5,wS({shapeType:"rectangle",propTransformer:Jwe,activeClassName:"recharts-active-bar"},t))}var eSe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var o=typeof r=="number";return o?e(r,i):(o||Wl(),n)}},tSe=["value","background"],q5;function lf(t){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(t)}function nSe(t,e){if(t==null)return{};var n=rSe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rSe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Oy(){return Oy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oy.apply(this,arguments)}function zD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zD(Object(n),!0).forEach(function(r){ns(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,K5(r.key),r)}}function oSe(t,e,n){return e&&HD(t.prototype,e),n&&HD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function aSe(t,e,n){return e=Iy(e),sSe(t,X5()?Reflect.construct(e,n||[],Iy(t).constructor):e.apply(t,n))}function sSe(t,e){if(e&&(lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lSe(t)}function lSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X5=function(){return!!t})()}function Iy(t){return Iy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Iy(t)}function cSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SS(t,e)}function SS(t,e){return SS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},SS(t,e)}function ns(t,e,n){return e=K5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K5(t){var e=uSe(t,"string");return lf(e)=="symbol"?e:e+""}function uSe(t,e){if(lf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rc=function(t){function e(){var n;iSe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=aSe(this,e,[].concat(i)),ns(n,"state",{isAnimationFinished:!1}),ns(n,"id",ec("recharts-bar-")),ns(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),ns(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return cSe(e,t),oSe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,o=this.props,a=o.shape,s=o.dataKey,l=o.activeIndex,c=o.activeBar,u=Ke(this.props,!1);return r&&r.map(function(f,h){var d=h===l,y=d?c:a,v=Cn(Cn(Cn({},u),f),{},{isActive:d,option:y,index:h,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return W.createElement(St,Oy({className:"recharts-bar-rectangle"},$l(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value)}),W.createElement($D,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,o=i.data,a=i.layout,s=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,f=i.animationId,h=this.state.prevData;return W.createElement(co,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(d){var y=d.t,v=o.map(function(g,p){var x=h&&h[p];if(x){var _=Un(x.x,g.x),T=Un(x.y,g.y),w=Un(x.width,g.width),M=Un(x.height,g.height);return Cn(Cn({},g),{},{x:_(y),y:T(y),width:w(y),height:M(y)})}if(a==="horizontal"){var b=Un(0,g.height),A=b(y);return Cn(Cn({},g),{},{y:g.y+g.height-A,height:A})}var E=Un(0,g.width),P=E(y);return Cn(Cn({},g),{},{width:P})});return W.createElement(St,null,r.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,o=r.isAnimationActive,a=this.state.prevData;return o&&i&&i.length&&(!a||!Hl(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,o=i.data,a=i.dataKey,s=i.activeIndex,l=Ke(this.props.background,!1);return o.map(function(c,u){c.value;var f=c.background,h=nSe(c,tSe);if(!f)return null;var d=Cn(Cn(Cn(Cn(Cn({},h),{},{fill:"#eee"},f),l),$l(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:u,className:"recharts-bar-background-rectangle"});return W.createElement($D,Oy({key:"background-bar-".concat(u),option:r.props.background,isActive:u===s},d))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,s=o.xAxis,l=o.yAxis,c=o.layout,u=o.children,f=hi(u,tm);if(!f)return null;var h=c==="vertical"?a[0].height/2:a[0].width/2,d=function(g,p){var x=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:x,errorVal:Sn(g,p)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return W.createElement(St,y,f.map(function(v){return W.cloneElement(v,{key:"error-bar-".concat(i,"-").concat(v.props.dataKey),data:a,xAxis:s,yAxis:l,layout:c,offset:h,dataPointFormatter:d})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.data,a=r.className,s=r.xAxis,l=r.yAxis,c=r.left,u=r.top,f=r.width,h=r.height,d=r.isAnimationActive,y=r.background,v=r.id;if(i||!o||!o.length)return null;var g=this.state.isAnimationFinished,p=_t("recharts-bar",a),x=s&&s.allowDataOverflow,_=l&&l.allowDataOverflow,T=x||_,w=ft(v)?this.id:v;return W.createElement(St,{className:p},x||_?W.createElement("defs",null,W.createElement("clipPath",{id:"clipPath-".concat(w)},W.createElement("rect",{x:x?c:c-f/2,y:_?u:u-h/2,width:x?f:f*2,height:_?h:h*2}))):null,W.createElement(St,{className:"recharts-bar-rectangles",clipPath:T?"url(#clipPath-".concat(w,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(T,w),(!d||g)&&Co.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(V.PureComponent);q5=rc;ns(rc,"displayName","Bar");ns(rc,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!so.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ns(rc,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,a=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,f=t.displayedData,h=t.offset,d=o0e(r,n);if(!d)return null;var y=e.layout,v=n.type.defaultProps,g=v!==void 0?Cn(Cn({},v),n.props):n.props,p=g.dataKey,x=g.children,_=g.minPointSize,T=y==="horizontal"?a:o,w=c?T.scale.domain():null,M=h0e({numericAxis:T}),b=hi(x,Qd),A=f.map(function(E,P){var R,N,O,D,k,H;c?R=a0e(c[u+P],w):(R=Sn(E,p),Array.isArray(R)||(R=[M,R]));var B=eSe(_,q5.defaultProps.minPointSize)(R[1],P);if(y==="horizontal"){var F,q=[a.scale(R[0]),a.scale(R[1])],K=q[0],z=q[1];N=NN({axis:o,ticks:s,bandSize:i,offset:d.offset,entry:E,index:P}),O=(F=z??K)!==null&&F!==void 0?F:void 0,D=d.size;var X=K-z;if(k=Number.isNaN(X)?0:X,H={x:N,y:a.y,width:D,height:a.height},Math.abs(B)>0&&Math.abs(k)<Math.abs(B)){var ee=kr(k||B)*(Math.abs(B)-Math.abs(k));O-=ee,k+=ee}}else{var me=[o.scale(R[0]),o.scale(R[1])],_e=me[0],Ne=me[1];if(N=_e,O=NN({axis:a,ticks:l,bandSize:i,offset:d.offset,entry:E,index:P}),D=Ne-_e,k=d.size,H={x:o.x,y:O,width:o.width,height:k},Math.abs(B)>0&&Math.abs(D)<Math.abs(B)){var We=kr(D||B)*(Math.abs(B)-Math.abs(D));D+=We}}return Cn(Cn(Cn({},E),{},{x:N,y:O,width:D,height:k,value:c?R:R[1],payload:E,background:H},b&&b[P]&&b[P].props),{},{tooltipPayload:[_5(n,E)],tooltipPosition:{x:N+D/2,y:O+k/2}})});return Cn({data:A,layout:y},h)});function Ep(t){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(t)}function fSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Y5(r.key),r)}}function hSe(t,e,n){return e&&GD(t.prototype,e),n&&GD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function WD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WD(Object(n),!0).forEach(function(r){g_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g_(t,e,n){return e=Y5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y5(t){var e=dSe(t,"string");return Ep(e)=="symbol"?e:e+""}function dSe(t,e){if(Ep(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KA=function(e,n,r,i,o){var a=e.width,s=e.height,l=e.layout,c=e.children,u=Object.keys(n),f={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},h=!!ai(c,rc);return u.reduce(function(d,y){var v=n[y],g=v.orientation,p=v.domain,x=v.padding,_=x===void 0?{}:x,T=v.mirror,w=v.reversed,M="".concat(g).concat(T?"Mirror":""),b,A,E,P,R;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var N=p[1]-p[0],O=1/0,D=v.categoricalDomain.sort();if(D.forEach(function(me,_e){_e>0&&(O=Math.min((me||0)-(D[_e-1]||0),O))}),Number.isFinite(O)){var k=O/N,H=v.layout==="vertical"?r.height:r.width;if(v.padding==="gap"&&(b=k*H/2),v.padding==="no-gap"){var B=jr(e.barCategoryGap,k*H),F=k*H/2;b=F-B-(F-B)/H*B}}}i==="xAxis"?A=[r.left+(_.left||0)+(b||0),r.left+r.width-(_.right||0)-(b||0)]:i==="yAxis"?A=l==="horizontal"?[r.top+r.height-(_.bottom||0),r.top+(_.top||0)]:[r.top+(_.top||0)+(b||0),r.top+r.height-(_.bottom||0)-(b||0)]:A=v.range,w&&(A=[A[1],A[0]]);var q=m5(v,o,h),K=q.scale,z=q.realScaleType;K.domain(p).range(A),g5(K);var X=v5(K,Yi(Yi({},v),{},{realScaleType:z}));i==="xAxis"?(R=g==="top"&&!T||g==="bottom"&&T,E=r.left,P=f[M]-R*v.height):i==="yAxis"&&(R=g==="left"&&!T||g==="right"&&T,E=f[M]-R*v.width,P=r.top);var ee=Yi(Yi(Yi({},v),X),{},{realScaleType:z,x:E,y:P,scale:K,width:i==="xAxis"?r.width:v.width,height:i==="yAxis"?r.height:v.height});return ee.bandSize=gy(ee,X),!v.hide&&i==="xAxis"?f[M]+=(R?-1:1)*ee.height:v.hide||(f[M]+=(R?-1:1)*ee.width),Yi(Yi({},d),{},g_({},y,ee))},{})},Q5=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return{x:Math.min(r,o),y:Math.min(i,a),width:Math.abs(o-r),height:Math.abs(a-i)}},pSe=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2;return Q5({x:n,y:r},{x:i,y:o})},Z5=function(){function t(e){fSe(this,t),this.scale=e}return hSe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(n)+s}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?n>=i&&n<=o:n>=o&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();g_(Z5,"EPS",1e-4);var YA=function(e){var n=Object.keys(e).reduce(function(r,i){return Yi(Yi({},r),{},g_({},i,Z5.create(e[i])))},{});return Yi(Yi({},n),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.bandAware,s=o.position;return Dwe(i,function(l,c){return n[c].apply(l,{bandAware:a,position:s})})},isInRange:function(i){return W5(i,function(o,a){return n[a].isInRange(o)})}})};function mSe(t){return(t%180+180)%180}var gSe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=mSe(i),a=o*Math.PI/180,s=Math.atan(r/n),l=a>s&&a<Math.PI-s?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)},vSe=Fo,ySe=Yp,_Se=Q0;function xSe(t){return function(e,n,r){var i=Object(e);if(!ySe(e)){var o=vSe(n);e=_Se(e),n=function(s){return o(i[s],s,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}var bSe=xSe,wSe=$5;function SSe(t){var e=wSe(t),n=e%1;return e===e?n?e-n:e:0}var ESe=SSe,TSe=K4,ASe=Fo,MSe=ESe,PSe=Math.max;function CSe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:MSe(n);return i<0&&(i=PSe(r+i,0)),TSe(t,ASe(e),i)}var RSe=CSe,OSe=bSe,ISe=RSe,NSe=OSe(ISe),DSe=NSe;const LSe=Ft(DSe);var kSe=qne(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),QA=V.createContext(void 0),ZA=V.createContext(void 0),J5=V.createContext(void 0),eB=V.createContext({}),tB=V.createContext(void 0),nB=V.createContext(0),rB=V.createContext(0),qD=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,o=n.offset,a=e.clipPathId,s=e.children,l=e.width,c=e.height,u=kSe(o);return W.createElement(QA.Provider,{value:r},W.createElement(ZA.Provider,{value:i},W.createElement(eB.Provider,{value:o},W.createElement(J5.Provider,{value:u},W.createElement(tB.Provider,{value:a},W.createElement(nB.Provider,{value:c},W.createElement(rB.Provider,{value:l},s)))))))},jSe=function(){return V.useContext(tB)},iB=function(e){var n=V.useContext(QA);n==null&&Wl();var r=n[e];return r==null&&Wl(),r},USe=function(){var e=V.useContext(QA);return Ya(e)},FSe=function(){var e=V.useContext(ZA),n=LSe(e,function(r){return W5(r.domain,Number.isFinite)});return n||Ya(e)},oB=function(e){var n=V.useContext(ZA);n==null&&Wl();var r=n[e];return r==null&&Wl(),r},VSe=function(){var e=V.useContext(J5);return e},BSe=function(){return V.useContext(eB)},JA=function(){return V.useContext(rB)},eM=function(){return V.useContext(nB)};function cf(t){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(t)}function $Se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sB(r.key),r)}}function HSe(t,e,n){return e&&zSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function GSe(t,e,n){return e=Ny(e),WSe(t,aB()?Reflect.construct(e,n||[],Ny(t).constructor):e.apply(t,n))}function WSe(t,e){if(e&&(cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qSe(t)}function qSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aB=function(){return!!t})()}function Ny(t){return Ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ny(t)}function XSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ES(t,e)}function ES(t,e){return ES=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ES(t,e)}function XD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XD(Object(n),!0).forEach(function(r){tM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tM(t,e,n){return e=sB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sB(t){var e=KSe(t,"string");return cf(e)=="symbol"?e:e+""}function KSe(t,e){if(cf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YSe(t,e){return eEe(t)||JSe(t,e)||ZSe(t,e)||QSe()}function QSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZSe(t,e){if(t){if(typeof t=="string")return YD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YD(t,e)}}function YD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function JSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function eEe(t){if(Array.isArray(t))return t}function TS(){return TS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TS.apply(this,arguments)}var tEe=function(e,n){var r;return W.isValidElement(e)?r=W.cloneElement(e,n):ot(e)?r=e(n):r=W.createElement("line",TS({},n,{className:"recharts-reference-line-line"})),r},nEe=function(e,n,r,i,o,a,s,l,c){var u=o.x,f=o.y,h=o.width,d=o.height;if(r){var y=c.y,v=e.y.apply(y,{position:a});if(Ro(c,"discard")&&!e.y.isInRange(v))return null;var g=[{x:u+h,y:v},{x:u,y:v}];return l==="left"?g.reverse():g}if(n){var p=c.x,x=e.x.apply(p,{position:a});if(Ro(c,"discard")&&!e.x.isInRange(x))return null;var _=[{x,y:f+d},{x,y:f}];return s==="top"?_.reverse():_}if(i){var T=c.segment,w=T.map(function(M){return e.apply(M,{position:a})});return Ro(c,"discard")&&Awe(w,function(M){return!e.isInRange(M)})?null:w}return null};function rEe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,o=t.yAxisId,a=t.shape,s=t.className,l=t.alwaysShow,c=jSe(),u=iB(i),f=oB(o),h=VSe();if(!c||!h)return null;ao(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=YA({x:u.scale,y:f.scale}),y=Vn(e),v=Vn(n),g=r&&r.length===2,p=nEe(d,y,v,g,h,t.position,u.orientation,f.orientation,t);if(!p)return null;var x=YSe(p,2),_=x[0],T=_.x,w=_.y,M=x[1],b=M.x,A=M.y,E=Ro(t,"hidden")?"url(#".concat(c,")"):void 0,P=KD(KD({clipPath:E},Ke(t,!0)),{},{x1:T,y1:w,x2:b,y2:A});return W.createElement(St,{className:_t("recharts-reference-line",s)},tEe(a,P),Qn.renderCallByParent(t,pSe({x1:T,y1:w,x2:b,y2:A})))}var nM=function(t){function e(){return $Se(this,e),GSe(this,e,arguments)}return XSe(e,t),HSe(e,[{key:"render",value:function(){return W.createElement(rEe,this.props)}}])}(W.Component);tM(nM,"displayName","ReferenceLine");tM(nM,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function AS(){return AS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AS.apply(this,arguments)}function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}function QD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QD(Object(n),!0).forEach(function(r){v_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oEe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cB(r.key),r)}}function aEe(t,e,n){return e&&oEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function sEe(t,e,n){return e=Dy(e),lEe(t,lB()?Reflect.construct(e,n||[],Dy(t).constructor):e.apply(t,n))}function lEe(t,e){if(e&&(uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cEe(t)}function cEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lB=function(){return!!t})()}function Dy(t){return Dy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dy(t)}function uEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MS(t,e)}function MS(t,e){return MS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},MS(t,e)}function v_(t,e,n){return e=cB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cB(t){var e=fEe(t,"string");return uf(e)=="symbol"?e:e+""}function fEe(t,e){if(uf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hEe=function(e){var n=e.x,r=e.y,i=e.xAxis,o=e.yAxis,a=YA({x:i.scale,y:o.scale}),s=a.apply({x:n,y:r},{bandAware:!0});return Ro(e,"discard")&&!a.isInRange(s)?null:s},y_=function(t){function e(){return iEe(this,e),sEe(this,e,arguments)}return uEe(e,t),aEe(e,[{key:"render",value:function(){var r=this.props,i=r.x,o=r.y,a=r.r,s=r.alwaysShow,l=r.clipPathId,c=Vn(i),u=Vn(o);if(ao(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var f=hEe(this.props);if(!f)return null;var h=f.x,d=f.y,y=this.props,v=y.shape,g=y.className,p=Ro(this.props,"hidden")?"url(#".concat(l,")"):void 0,x=ZD(ZD({clipPath:p},Ke(this.props,!0)),{},{cx:h,cy:d});return W.createElement(St,{className:_t("recharts-reference-dot",g)},e.renderDot(v,x),Qn.renderCallByParent(this.props,{x:h-a,y:d-a,width:2*a,height:2*a}))}}])}(W.Component);v_(y_,"displayName","ReferenceDot");v_(y_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});v_(y_,"renderDot",function(t,e){var n;return W.isValidElement(t)?n=W.cloneElement(t,e):ot(t)?n=t(e):n=W.createElement(nm,AS({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function PS(){return PS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PS.apply(this,arguments)}function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function JD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JD(Object(n),!0).forEach(function(r){__(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pEe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fB(r.key),r)}}function mEe(t,e,n){return e&&pEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gEe(t,e,n){return e=Ly(e),vEe(t,uB()?Reflect.construct(e,n||[],Ly(t).constructor):e.apply(t,n))}function vEe(t,e){if(e&&(ff(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yEe(t)}function yEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uB=function(){return!!t})()}function Ly(t){return Ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ly(t)}function _Ee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CS(t,e)}function CS(t,e){return CS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},CS(t,e)}function __(t,e,n){return e=fB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fB(t){var e=xEe(t,"string");return ff(e)=="symbol"?e:e+""}function xEe(t,e){if(ff(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bEe=function(e,n,r,i,o){var a=o.x1,s=o.x2,l=o.y1,c=o.y2,u=o.xAxis,f=o.yAxis;if(!u||!f)return null;var h=YA({x:u.scale,y:f.scale}),d={x:e?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(l,{position:"start"}):h.y.rangeMin},y={x:n?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(c,{position:"end"}):h.y.rangeMax};return Ro(o,"discard")&&(!h.isInRange(d)||!h.isInRange(y))?null:Q5(d,y)},x_=function(t){function e(){return dEe(this,e),gEe(this,e,arguments)}return _Ee(e,t),mEe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,o=r.x2,a=r.y1,s=r.y2,l=r.className,c=r.alwaysShow,u=r.clipPathId;ao(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Vn(i),h=Vn(o),d=Vn(a),y=Vn(s),v=this.props.shape;if(!f&&!h&&!d&&!y&&!v)return null;var g=bEe(f,h,d,y,this.props);if(!g&&!v)return null;var p=Ro(this.props,"hidden")?"url(#".concat(u,")"):void 0;return W.createElement(St,{className:_t("recharts-reference-area",l)},e.renderRect(v,eL(eL({clipPath:p},Ke(this.props,!0)),g)),Qn.renderCallByParent(this.props,g))}}])}(W.Component);__(x_,"displayName","ReferenceArea");__(x_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});__(x_,"renderRect",function(t,e){var n;return W.isValidElement(t)?n=W.cloneElement(t,e):ot(t)?n=t(e):n=W.createElement(XA,PS({},e,{className:"recharts-reference-area-rect"})),n});function hB(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function wEe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return gSe(r,n)}function SEe(t,e,n){var r=n==="width",i=t.x,o=t.y,a=t.width,s=t.height;return e===1?{start:r?i:o,end:r?i+a:o+s}:{start:r?i+a:o+s,end:r?i:o}}function ky(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function EEe(t,e){return hB(t,e+1)}function TEe(t,e,n,r,i){for(var o=(r||[]).slice(),a=e.start,s=e.end,l=0,c=1,u=a,f=function(){var y=r==null?void 0:r[l];if(y===void 0)return{v:hB(r,c)};var v=l,g,p=function(){return g===void 0&&(g=n(y,v)),g},x=y.coordinate,_=l===0||ky(t,x,p,u,s);_||(l=0,u=a,c+=1),_&&(u=x+t*(p()/2+i),l+=c)},h;c<=o.length;)if(h=f(),h)return h.v;return[]}function Tp(t){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tp(t)}function tL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tL(Object(n),!0).forEach(function(r){AEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AEe(t,e,n){return e=MEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MEe(t){var e=PEe(t,"string");return Tp(e)=="symbol"?e:e+""}function PEe(t,e){if(Tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CEe(t,e,n,r,i){for(var o=(r||[]).slice(),a=o.length,s=e.start,l=e.end,c=function(h){var d=o[h],y,v=function(){return y===void 0&&(y=n(d,h)),y};if(h===a-1){var g=t*(d.coordinate+t*v()/2-l);o[h]=d=xr(xr({},d),{},{tickCoord:g>0?d.coordinate-g*t:d.coordinate})}else o[h]=d=xr(xr({},d),{},{tickCoord:d.coordinate});var p=ky(t,d.tickCoord,v,s,l);p&&(l=d.tickCoord-t*(v()/2+i),o[h]=xr(xr({},d),{},{isShow:!0}))},u=a-1;u>=0;u--)c(u);return o}function REe(t,e,n,r,i,o){var a=(r||[]).slice(),s=a.length,l=e.start,c=e.end;if(o){var u=r[s-1],f=n(u,s-1),h=t*(u.coordinate+t*f/2-c);a[s-1]=u=xr(xr({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate});var d=ky(t,u.tickCoord,function(){return f},l,c);d&&(c=u.tickCoord-t*(f/2+i),a[s-1]=xr(xr({},u),{},{isShow:!0}))}for(var y=o?s-1:s,v=function(x){var _=a[x],T,w=function(){return T===void 0&&(T=n(_,x)),T};if(x===0){var M=t*(_.coordinate-t*w()/2-l);a[x]=_=xr(xr({},_),{},{tickCoord:M<0?_.coordinate-M*t:_.coordinate})}else a[x]=_=xr(xr({},_),{},{tickCoord:_.coordinate});var b=ky(t,_.tickCoord,w,l,c);b&&(l=_.tickCoord+t*(w()/2+i),a[x]=xr(xr({},_),{},{isShow:!0}))},g=0;g<y;g++)v(g);return a}function rM(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,a=t.minTickGap,s=t.orientation,l=t.interval,c=t.tickFormatter,u=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(Ae(l)||so.isSsr)return EEe(i,typeof l=="number"&&Ae(l)?l:0);var h=[],d=s==="top"||s==="bottom"?"width":"height",y=u&&d==="width"?cd(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},v=function(_,T){var w=ot(c)?c(_.value,T):_.value;return d==="width"?wEe(cd(w,{fontSize:e,letterSpacing:n}),y,f):cd(w,{fontSize:e,letterSpacing:n})[d]},g=i.length>=2?kr(i[1].coordinate-i[0].coordinate):1,p=SEe(o,g,d);return l==="equidistantPreserveStart"?TEe(g,p,v,i,a):(l==="preserveStart"||l==="preserveStartEnd"?h=REe(g,p,v,i,a,l==="preserveStartEnd"):h=CEe(g,p,v,i,a),h.filter(function(x){return x.isShow}))}var OEe=["viewBox"],IEe=["viewBox"],NEe=["ticks"];function hf(t){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(t)}function pu(){return pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pu.apply(this,arguments)}function nL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nL(Object(n),!0).forEach(function(r){iM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cb(t,e){if(t==null)return{};var n=DEe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function LEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pB(r.key),r)}}function kEe(t,e,n){return e&&rL(t.prototype,e),n&&rL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jEe(t,e,n){return e=jy(e),UEe(t,dB()?Reflect.construct(e,n||[],jy(t).constructor):e.apply(t,n))}function UEe(t,e){if(e&&(hf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FEe(t)}function FEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dB=function(){return!!t})()}function jy(t){return jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jy(t)}function VEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RS(t,e)}function RS(t,e){return RS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},RS(t,e)}function iM(t,e,n){return e=pB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pB(t){var e=BEe(t,"string");return hf(e)=="symbol"?e:e+""}function BEe(t,e){if(hf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qf=function(t){function e(n){var r;return LEe(this,e),r=jEe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return VEe(e,t),kEe(e,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,a=Cb(r,OEe),s=this.props,l=s.viewBox,c=Cb(s,IEe);return!Au(o,l)||!Au(a,c)||!Au(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,a=i.y,s=i.width,l=i.height,c=i.orientation,u=i.tickSize,f=i.mirror,h=i.tickMargin,d,y,v,g,p,x,_=f?-1:1,T=r.tickSize||u,w=Ae(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":d=y=r.coordinate,g=a+ +!f*l,v=g-_*T,x=v-_*h,p=w;break;case"left":v=g=r.coordinate,y=o+ +!f*s,d=y-_*T,p=d-_*h,x=w;break;case"right":v=g=r.coordinate,y=o+ +f*s,d=y+_*T,p=d+_*h,x=w;break;default:d=y=r.coordinate,g=a+ +f*l,v=g+_*T,x=v+_*h,p=w;break}return{line:{x1:d,y1:v,x2:y,y2:g},tick:{x:p,y:x}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a;switch(i){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,f=Cr(Cr(Cr({},Ke(this.props,!1)),Ke(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!c||l==="bottom"&&c);f=Cr(Cr({},f),{},{x1:i,y1:o+h*s,x2:i+a,y2:o+h*s})}else{var d=+(l==="left"&&!c||l==="right"&&c);f=Cr(Cr({},f),{},{x1:i+d*a,y1:o,x2:i+d*a,y2:o+s})}return W.createElement("line",pu({},f,{className:_t("recharts-cartesian-axis-line",fi(u,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var a=this,s=this.props,l=s.tickLine,c=s.stroke,u=s.tick,f=s.tickFormatter,h=s.unit,d=rM(Cr(Cr({},this.props),{},{ticks:r}),i,o),y=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),g=Ke(this.props,!1),p=Ke(u,!1),x=Cr(Cr({},g),{},{fill:"none"},Ke(l,!1)),_=d.map(function(T,w){var M=a.getTickLineCoord(T),b=M.line,A=M.tick,E=Cr(Cr(Cr(Cr({textAnchor:y,verticalAnchor:v},g),{},{stroke:"none",fill:c},p),A),{},{index:w,payload:T,visibleTicksCount:d.length,tickFormatter:f});return W.createElement(St,pu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},$l(a.props,T,w)),l&&W.createElement("line",pu({},x,b,{className:_t("recharts-cartesian-axis-tick-line",fi(l,"className"))})),u&&e.renderTickItem(u,E,"".concat(ot(f)?f(T.value,w):T.value).concat(h||"")))});return W.createElement("g",{className:"recharts-cartesian-axis-ticks"},_)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,a=i.width,s=i.height,l=i.ticksGenerator,c=i.className,u=i.hide;if(u)return null;var f=this.props,h=f.ticks,d=Cb(f,NEe),y=h;return ot(l)&&(y=h&&h.length>0?l(this.props):l(d)),a<=0||s<=0||!y||!y.length?null:W.createElement(St,{className:_t("recharts-cartesian-axis",c),ref:function(g){r.layerReference=g}},o&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),Qn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var a;return W.isValidElement(r)?a=W.cloneElement(r,i):ot(r)?a=r(i):a=W.createElement(zl,pu({},i,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(V.Component);iM(qf,"displayName","CartesianAxis");iM(qf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var $Ee=["x1","y1","x2","y2","key"],zEe=["offset"];function ql(t){"@babel/helpers - typeof";return ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ql(t)}function iL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Er(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iL(Object(n),!0).forEach(function(r){HEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HEe(t,e,n){return e=GEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GEe(t){var e=WEe(t,"string");return ql(e)=="symbol"?e:e+""}function WEe(t,e){if(ql(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ql(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bl(){return bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bl.apply(this,arguments)}function oL(t,e){if(t==null)return{};var n=qEe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var XEe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,o=e.y,a=e.width,s=e.height,l=e.ry;return W.createElement("rect",{x:i,y:o,ry:l,width:a,height:s,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function mB(t,e){var n;if(W.isValidElement(t))n=W.cloneElement(t,e);else if(ot(t))n=t(e);else{var r=e.x1,i=e.y1,o=e.x2,a=e.y2,s=e.key,l=oL(e,$Ee),c=Ke(l,!1);c.offset;var u=oL(c,zEe);n=W.createElement("line",bl({},u,{x1:r,y1:i,x2:o,y2:a,fill:"none",key:s}))}return n}function KEe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,o=t.horizontalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,l){var c=Er(Er({},t),{},{x1:e,y1:s,x2:e+n,y2:s,key:"line-".concat(l),index:l});return mB(i,c)});return W.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function YEe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,o=t.verticalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,l){var c=Er(Er({},t),{},{x1:s,y1:e,x2:s,y2:e+n,key:"line-".concat(l),index:l});return mB(i,c)});return W.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function QEe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,o=t.width,a=t.height,s=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var u=s.map(function(h){return Math.round(h+i-i)}).sort(function(h,d){return h-d});i!==u[0]&&u.unshift(0);var f=u.map(function(h,d){var y=!u[d+1],v=y?i+a-h:u[d+1]-h;if(v<=0)return null;var g=d%e.length;return W.createElement("rect",{key:"react-".concat(d),y:h,x:r,height:v,width:o,stroke:"none",fill:e[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return W.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function ZEe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,o=t.x,a=t.y,s=t.width,l=t.height,c=t.verticalPoints;if(!n||!r||!r.length)return null;var u=c.map(function(h){return Math.round(h+o-o)}).sort(function(h,d){return h-d});o!==u[0]&&u.unshift(0);var f=u.map(function(h,d){var y=!u[d+1],v=y?o+s-h:u[d+1]-h;if(v<=0)return null;var g=d%r.length;return W.createElement("rect",{key:"react-".concat(d),x:h,y:a,width:v,height:l,stroke:"none",fill:r[g],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return W.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var JEe=function(e,n){var r=e.xAxis,i=e.width,o=e.height,a=e.offset;return p5(rM(Er(Er(Er({},qf.defaultProps),r),{},{ticks:aa(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.left,a.left+a.width,n)},eTe=function(e,n){var r=e.yAxis,i=e.width,o=e.height,a=e.offset;return p5(rM(Er(Er(Er({},qf.defaultProps),r),{},{ticks:aa(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.top,a.top+a.height,n)},Lc={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Xf(t){var e,n,r,i,o,a,s=JA(),l=eM(),c=BSe(),u=Er(Er({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Lc.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Lc.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Lc.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Lc.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:Lc.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:Lc.verticalFill,x:Ae(t.x)?t.x:c.left,y:Ae(t.y)?t.y:c.top,width:Ae(t.width)?t.width:c.width,height:Ae(t.height)?t.height:c.height}),f=u.x,h=u.y,d=u.width,y=u.height,v=u.syncWithTicks,g=u.horizontalValues,p=u.verticalValues,x=USe(),_=FSe();if(!Ae(d)||d<=0||!Ae(y)||y<=0||!Ae(f)||f!==+f||!Ae(h)||h!==+h)return null;var T=u.verticalCoordinatesGenerator||JEe,w=u.horizontalCoordinatesGenerator||eTe,M=u.horizontalPoints,b=u.verticalPoints;if((!M||!M.length)&&ot(w)){var A=g&&g.length,E=w({yAxis:_?Er(Er({},_),{},{ticks:A?g:_.ticks}):void 0,width:s,height:l,offset:c},A?!0:v);ao(Array.isArray(E),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(ql(E),"]")),Array.isArray(E)&&(M=E)}if((!b||!b.length)&&ot(T)){var P=p&&p.length,R=T({xAxis:x?Er(Er({},x),{},{ticks:P?p:x.ticks}):void 0,width:s,height:l,offset:c},P?!0:v);ao(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(ql(R),"]")),Array.isArray(R)&&(b=R)}return W.createElement("g",{className:"recharts-cartesian-grid"},W.createElement(XEe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),W.createElement(KEe,bl({},u,{offset:c,horizontalPoints:M,xAxis:x,yAxis:_})),W.createElement(YEe,bl({},u,{offset:c,verticalPoints:b,xAxis:x,yAxis:_})),W.createElement(QEe,bl({},u,{horizontalPoints:M})),W.createElement(ZEe,bl({},u,{verticalPoints:b})))}Xf.displayName="CartesianGrid";var tTe=["type","layout","connectNulls","ref"],nTe=["key"];function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function aL(t,e){if(t==null)return{};var n=rTe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rTe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function md(){return md=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},md.apply(this,arguments)}function sL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ri(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sL(Object(n),!0).forEach(function(r){Qi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kc(t){return sTe(t)||aTe(t)||oTe(t)||iTe()}function iTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oTe(t,e){if(t){if(typeof t=="string")return OS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OS(t,e)}}function aTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sTe(t){if(Array.isArray(t))return OS(t)}function OS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vB(r.key),r)}}function cTe(t,e,n){return e&&lL(t.prototype,e),n&&lL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function uTe(t,e,n){return e=Uy(e),fTe(t,gB()?Reflect.construct(e,n||[],Uy(t).constructor):e.apply(t,n))}function fTe(t,e){if(e&&(df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hTe(t)}function hTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gB=function(){return!!t})()}function Uy(t){return Uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uy(t)}function dTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IS(t,e)}function IS(t,e){return IS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},IS(t,e)}function Qi(t,e,n){return e=vB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vB(t){var e=pTe(t,"string");return df(e)=="symbol"?e:e+""}function pTe(t,e){if(df(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var As=function(t){function e(){var n;lTe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=uTe(this,e,[].concat(i)),Qi(n,"state",{isAnimationFinished:!0,totalLength:0}),Qi(n,"generateSimpleStrokeDasharray",function(a,s){return"".concat(s,"px ").concat(a-s,"px")}),Qi(n,"getStrokeDasharray",function(a,s,l){var c=l.reduce(function(p,x){return p+x});if(!c)return n.generateSimpleStrokeDasharray(s,a);for(var u=Math.floor(a/c),f=a%c,h=s-a,d=[],y=0,v=0;y<l.length;v+=l[y],++y)if(v+l[y]>f){d=[].concat(kc(l.slice(0,y)),[f-v]);break}var g=d.length%2===0?[0,h]:[h];return[].concat(kc(e.repeat(l,u)),kc(d),g).map(function(p){return"".concat(p,"px")}).join(", ")}),Qi(n,"id",ec("recharts-line-")),Qi(n,"pathRef",function(a){n.mainCurve=a}),Qi(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Qi(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return dTe(e,t),cTe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.points,s=o.xAxis,l=o.yAxis,c=o.layout,u=o.children,f=hi(u,tm);if(!f)return null;var h=function(v,g){return{x:v.x,y:v.y,value:v.value,errorVal:Sn(v.payload,g)}},d={clipPath:r?"url(#clipPath-".concat(i,")"):null};return W.createElement(St,d,f.map(function(y){return W.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:a,xAxis:s,yAxis:l,layout:c,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,i,o){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,c=s.points,u=s.dataKey,f=Ke(this.props,!1),h=Ke(l,!0),d=c.map(function(v,g){var p=ri(ri(ri({key:"dot-".concat(g),r:3},f),h),{},{value:v.value,dataKey:u,cx:v.x,cy:v.y,index:g,payload:v.payload});return e.renderDotItem(l,p)}),y={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return W.createElement(St,md({className:"recharts-line-dots",key:"dots"},y),d)}},{key:"renderCurveStatically",value:function(r,i,o,a){var s=this.props,l=s.type,c=s.layout,u=s.connectNulls;s.ref;var f=aL(s,tTe),h=ri(ri(ri({},Ke(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:r},a),{},{type:l,layout:c,connectNulls:u});return W.createElement(Il,md({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var o=this,a=this.props,s=a.points,l=a.strokeDasharray,c=a.isAnimationActive,u=a.animationBegin,f=a.animationDuration,h=a.animationEasing,d=a.animationId,y=a.animateNewValues,v=a.width,g=a.height,p=this.state,x=p.prevPoints,_=p.totalLength;return W.createElement(co,{begin:u,duration:f,isActive:c,easing:h,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(T){var w=T.t;if(x){var M=x.length/s.length,b=s.map(function(N,O){var D=Math.floor(O*M);if(x[D]){var k=x[D],H=Un(k.x,N.x),B=Un(k.y,N.y);return ri(ri({},N),{},{x:H(w),y:B(w)})}if(y){var F=Un(v*2,N.x),q=Un(g/2,N.y);return ri(ri({},N),{},{x:F(w),y:q(w)})}return ri(ri({},N),{},{x:N.x,y:N.y})});return o.renderCurveStatically(b,r,i)}var A=Un(0,_),E=A(w),P;if(l){var R="".concat(l).split(/[,\s]+/gim).map(function(N){return parseFloat(N)});P=o.getStrokeDasharray(E,_,R)}else P=o.generateSimpleStrokeDasharray(_,E);return o.renderCurveStatically(s,r,i,{strokeDasharray:P})})}},{key:"renderCurve",value:function(r,i){var o=this.props,a=o.points,s=o.isAnimationActive,l=this.state,c=l.prevPoints,u=l.totalLength;return s&&a&&a.length&&(!c&&u>0||!Hl(c,a))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(a,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,a=i.dot,s=i.points,l=i.className,c=i.xAxis,u=i.yAxis,f=i.top,h=i.left,d=i.width,y=i.height,v=i.isAnimationActive,g=i.id;if(o||!s||!s.length)return null;var p=this.state.isAnimationFinished,x=s.length===1,_=_t("recharts-line",l),T=c&&c.allowDataOverflow,w=u&&u.allowDataOverflow,M=T||w,b=ft(g)?this.id:g,A=(r=Ke(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},E=A.r,P=E===void 0?3:E,R=A.strokeWidth,N=R===void 0?2:R,O=a4(a)?a:{},D=O.clipDot,k=D===void 0?!0:D,H=P*2+N;return W.createElement(St,{className:_},T||w?W.createElement("defs",null,W.createElement("clipPath",{id:"clipPath-".concat(b)},W.createElement("rect",{x:T?h:h-d/2,y:w?f:f-y/2,width:T?d:d*2,height:w?y:y*2})),!k&&W.createElement("clipPath",{id:"clipPath-dots-".concat(b)},W.createElement("rect",{x:h-H/2,y:f-H/2,width:d+H,height:y+H}))):null,!x&&this.renderCurve(M,b),this.renderErrorBar(M,b),(x||a)&&this.renderDots(M,k,b),(!v||p)&&Co.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var o=r.length%2!==0?[].concat(kc(r),[0]):r,a=[],s=0;s<i;++s)a=[].concat(kc(a),kc(o));return a}},{key:"renderDotItem",value:function(r,i){var o;if(W.isValidElement(r))o=W.cloneElement(r,i);else if(ot(r))o=r(i);else{var a=i.key,s=aL(i,nTe),l=_t("recharts-line-dot",typeof r!="boolean"?r.className:"");o=W.createElement(nm,md({key:a},s,{className:l}))}return o}}])}(V.PureComponent);Qi(As,"displayName","Line");Qi(As,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!so.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Qi(As,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,a=t.dataKey,s=t.bandSize,l=t.displayedData,c=t.offset,u=e.layout,f=l.map(function(h,d){var y=Sn(h,a);return u==="horizontal"?{x:my({axis:n,ticks:i,bandSize:s,entry:h,index:d}),y:ft(y)?null:r.scale(y),value:y,payload:h}:{x:ft(y)?null:n.scale(y),y:my({axis:r,ticks:o,bandSize:s,entry:h,index:d}),value:y,payload:h}});return ri({points:f,layout:u},c)});var mTe=["layout","type","stroke","connectNulls","isRange","ref"],gTe=["key"],yB;function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}function _B(t,e){if(t==null)return{};var n=vTe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vTe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function wl(){return wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wl.apply(this,arguments)}function cL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cL(Object(n),!0).forEach(function(r){wo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bB(r.key),r)}}function _Te(t,e,n){return e&&uL(t.prototype,e),n&&uL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function xTe(t,e,n){return e=Fy(e),bTe(t,xB()?Reflect.construct(e,n||[],Fy(t).constructor):e.apply(t,n))}function bTe(t,e){if(e&&(pf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wTe(t)}function wTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xB=function(){return!!t})()}function Fy(t){return Fy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fy(t)}function STe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NS(t,e)}function NS(t,e){return NS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},NS(t,e)}function wo(t,e,n){return e=bB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bB(t){var e=ETe(t,"string");return pf(e)=="symbol"?e:e+""}function ETe(t,e){if(pf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(pf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lo=function(t){function e(){var n;yTe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=xTe(this,e,[].concat(i)),wo(n,"state",{isAnimationFinished:!0}),wo(n,"id",ec("recharts-area-")),wo(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ot(a)&&a()}),wo(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ot(a)&&a()}),n}return STe(e,t),_Te(e,[{key:"renderDots",value:function(r,i,o){var a=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(a&&!s)return null;var l=this.props,c=l.dot,u=l.points,f=l.dataKey,h=Ke(this.props,!1),d=Ke(c,!0),y=u.map(function(g,p){var x=$a($a($a({key:"dot-".concat(p),r:3},h),d),{},{index:p,cx:g.x,cy:g.y,dataKey:f,value:g.value,payload:g.payload,points:u});return e.renderDotItem(c,x)}),v={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return W.createElement(St,wl({className:"recharts-area-dots"},v),y)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,o=i.baseLine,a=i.points,s=i.strokeWidth,l=a[0].x,c=a[a.length-1].x,u=r*Math.abs(l-c),f=ts(a.map(function(h){return h.y||0}));return Ae(o)&&typeof o=="number"?f=Math.max(o,f):o&&Array.isArray(o)&&o.length&&(f=Math.max(ts(o.map(function(h){return h.y||0})),f)),Ae(f)?W.createElement("rect",{x:l<c?l:l-u,y:0,width:u,height:Math.floor(f+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,o=i.baseLine,a=i.points,s=i.strokeWidth,l=a[0].y,c=a[a.length-1].y,u=r*Math.abs(l-c),f=ts(a.map(function(h){return h.x||0}));return Ae(o)&&typeof o=="number"?f=Math.max(o,f):o&&Array.isArray(o)&&o.length&&(f=Math.max(ts(o.map(function(h){return h.x||0})),f)),Ae(f)?W.createElement("rect",{x:0,y:l<c?l:l-u,width:f+(s?parseInt("".concat(s),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,o,a){var s=this.props,l=s.layout,c=s.type,u=s.stroke,f=s.connectNulls,h=s.isRange;s.ref;var d=_B(s,mTe);return W.createElement(St,{clipPath:o?"url(#clipPath-".concat(a,")"):null},W.createElement(Il,wl({},Ke(d,!0),{points:r,connectNulls:f,type:c,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),u!=="none"&&W.createElement(Il,wl({},Ke(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:f,fill:"none",points:r})),u!=="none"&&h&&W.createElement(Il,wl({},Ke(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var o=this,a=this.props,s=a.points,l=a.baseLine,c=a.isAnimationActive,u=a.animationBegin,f=a.animationDuration,h=a.animationEasing,d=a.animationId,y=this.state,v=y.prevPoints,g=y.prevBaseLine;return W.createElement(co,{begin:u,duration:f,isActive:c,easing:h,from:{t:0},to:{t:1},key:"area-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var x=p.t;if(v){var _=v.length/s.length,T=s.map(function(A,E){var P=Math.floor(E*_);if(v[P]){var R=v[P],N=Un(R.x,A.x),O=Un(R.y,A.y);return $a($a({},A),{},{x:N(x),y:O(x)})}return A}),w;if(Ae(l)&&typeof l=="number"){var M=Un(g,l);w=M(x)}else if(ft(l)||Ff(l)){var b=Un(g,0);w=b(x)}else w=l.map(function(A,E){var P=Math.floor(E*_);if(g[P]){var R=g[P],N=Un(R.x,A.x),O=Un(R.y,A.y);return $a($a({},A),{},{x:N(x),y:O(x)})}return A});return o.renderAreaStatically(T,w,r,i)}return W.createElement(St,null,W.createElement("defs",null,W.createElement("clipPath",{id:"animationClipPath-".concat(i)},o.renderClipRect(x))),W.createElement(St,{clipPath:"url(#animationClipPath-".concat(i,")")},o.renderAreaStatically(s,l,r,i)))})}},{key:"renderArea",value:function(r,i){var o=this.props,a=o.points,s=o.baseLine,l=o.isAnimationActive,c=this.state,u=c.prevPoints,f=c.prevBaseLine,h=c.totalLength;return l&&a&&a.length&&(!u&&h>0||!Hl(u,a)||!Hl(f,s))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(a,s,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,a=i.dot,s=i.points,l=i.className,c=i.top,u=i.left,f=i.xAxis,h=i.yAxis,d=i.width,y=i.height,v=i.isAnimationActive,g=i.id;if(o||!s||!s.length)return null;var p=this.state.isAnimationFinished,x=s.length===1,_=_t("recharts-area",l),T=f&&f.allowDataOverflow,w=h&&h.allowDataOverflow,M=T||w,b=ft(g)?this.id:g,A=(r=Ke(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},E=A.r,P=E===void 0?3:E,R=A.strokeWidth,N=R===void 0?2:R,O=a4(a)?a:{},D=O.clipDot,k=D===void 0?!0:D,H=P*2+N;return W.createElement(St,{className:_},T||w?W.createElement("defs",null,W.createElement("clipPath",{id:"clipPath-".concat(b)},W.createElement("rect",{x:T?u:u-d/2,y:w?c:c-y/2,width:T?d:d*2,height:w?y:y*2})),!k&&W.createElement("clipPath",{id:"clipPath-dots-".concat(b)},W.createElement("rect",{x:u-H/2,y:c-H/2,width:d+H,height:y+H}))):null,x?null:this.renderArea(M,b),(a||x)&&this.renderDots(M,k,b),(!v||p)&&Co.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(V.PureComponent);yB=Lo;wo(Lo,"displayName","Area");wo(Lo,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!so.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});wo(Lo,"getBaseValue",function(t,e,n,r){var i=t.layout,o=t.baseValue,a=e.props.baseValue,s=a??o;if(Ae(s)&&typeof s=="number")return s;var l=i==="horizontal"?r:n,c=l.scale.domain();if(l.type==="number"){var u=Math.max(c[0],c[1]),f=Math.min(c[0],c[1]);return s==="dataMin"?f:s==="dataMax"||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return s==="dataMin"?c[0]:s==="dataMax"?c[1]:c[0]});wo(Lo,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,o=t.xAxisTicks,a=t.yAxisTicks,s=t.bandSize,l=t.dataKey,c=t.stackedData,u=t.dataStartIndex,f=t.displayedData,h=t.offset,d=e.layout,y=c&&c.length,v=yB.getBaseValue(e,n,r,i),g=d==="horizontal",p=!1,x=f.map(function(T,w){var M;y?M=c[u+w]:(M=Sn(T,l),Array.isArray(M)?p=!0:M=[v,M]);var b=M[1]==null||y&&Sn(T,l)==null;return g?{x:my({axis:r,ticks:o,bandSize:s,entry:T,index:w}),y:b?null:i.scale(M[1]),value:M,payload:T}:{x:b?null:r.scale(M[1]),y:my({axis:i,ticks:a,bandSize:s,entry:T,index:w}),value:M,payload:T}}),_;return y||p?_=x.map(function(T){var w=Array.isArray(T.value)?T.value[0]:null;return g?{x:T.x,y:w!=null&&T.y!=null?i.scale(w):null}:{x:w!=null?r.scale(w):null,y:T.y}}):_=g?i.scale(v):r.scale(v),$a({points:x,baseLine:_,layout:d,isRange:p},h)});wo(Lo,"renderDotItem",function(t,e){var n;if(W.isValidElement(t))n=W.cloneElement(t,e);else if(ot(t))n=t(e);else{var r=_t("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,o=_B(e,gTe);n=W.createElement(nm,wl({},o,{key:i,className:r}))}return n});function mf(t){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(t)}function TTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ATe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,EB(r.key),r)}}function MTe(t,e,n){return e&&ATe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function PTe(t,e,n){return e=Vy(e),CTe(t,wB()?Reflect.construct(e,n||[],Vy(t).constructor):e.apply(t,n))}function CTe(t,e){if(e&&(mf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RTe(t)}function RTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wB=function(){return!!t})()}function Vy(t){return Vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vy(t)}function OTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DS(t,e)}function DS(t,e){return DS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},DS(t,e)}function SB(t,e,n){return e=EB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EB(t){var e=ITe(t,"string");return mf(e)=="symbol"?e:e+""}function ITe(t,e){if(mf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LS(){return LS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LS.apply(this,arguments)}function NTe(t){var e=t.xAxisId,n=JA(),r=eM(),i=iB(e);return i==null?null:W.createElement(qf,LS({},i,{className:_t("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return aa(a,!0)}}))}var Vo=function(t){function e(){return TTe(this,e),PTe(this,e,arguments)}return OTe(e,t),MTe(e,[{key:"render",value:function(){return W.createElement(NTe,this.props)}}])}(W.Component);SB(Vo,"displayName","XAxis");SB(Vo,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function gf(t){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(t)}function DTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LTe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MB(r.key),r)}}function kTe(t,e,n){return e&&LTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jTe(t,e,n){return e=By(e),UTe(t,TB()?Reflect.construct(e,n||[],By(t).constructor):e.apply(t,n))}function UTe(t,e){if(e&&(gf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FTe(t)}function FTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TB=function(){return!!t})()}function By(t){return By=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},By(t)}function VTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kS(t,e)}function kS(t,e){return kS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kS(t,e)}function AB(t,e,n){return e=MB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MB(t){var e=BTe(t,"string");return gf(e)=="symbol"?e:e+""}function BTe(t,e){if(gf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jS(){return jS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jS.apply(this,arguments)}var $Te=function(e){var n=e.yAxisId,r=JA(),i=eM(),o=oB(n);return o==null?null:W.createElement(qf,jS({},o,{className:_t("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return aa(s,!0)}}))},uo=function(t){function e(){return DTe(this,e),jTe(this,e,arguments)}return VTe(e,t),kTe(e,[{key:"render",value:function(){return W.createElement($Te,this.props)}}])}(W.Component);AB(uo,"displayName","YAxis");AB(uo,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function fL(t){return WTe(t)||GTe(t)||HTe(t)||zTe()}function zTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HTe(t,e){if(t){if(typeof t=="string")return US(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return US(t,e)}}function GTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function WTe(t){if(Array.isArray(t))return US(t)}function US(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var FS=function(e,n,r,i,o){var a=hi(e,nM),s=hi(e,y_),l=[].concat(fL(a),fL(s)),c=hi(e,x_),u="".concat(i,"Id"),f=i[0],h=n;if(l.length&&(h=l.reduce(function(v,g){if(g.props[u]===r&&Ro(g.props,"extendDomain")&&Ae(g.props[f])){var p=g.props[f];return[Math.min(v[0],p),Math.max(v[1],p)]}return v},h)),c.length){var d="".concat(f,"1"),y="".concat(f,"2");h=c.reduce(function(v,g){if(g.props[u]===r&&Ro(g.props,"extendDomain")&&Ae(g.props[d])&&Ae(g.props[y])){var p=g.props[d],x=g.props[y];return[Math.min(v[0],p,x),Math.max(v[1],p,x)]}return v},h)}return o&&o.length&&(h=o.reduce(function(v,g){return Ae(g)?[Math.min(v[0],g),Math.max(v[1],g)]:v},h)),h},PB={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function o(l,c,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var d=new i(u,f||l,h),y=n?n+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],d]:l._events[y].push(d):(l._events[y]=d,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},s.prototype.listeners=function(c){var u=n?n+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,y=new Array(d);h<d;h++)y[h]=f[h].fn;return y},s.prototype.listenerCount=function(c){var u=n?n+c:c,f=this._events[u];return f?f.fn?1:f.length:0},s.prototype.emit=function(c,u,f,h,d,y){var v=n?n+c:c;if(!this._events[v])return!1;var g=this._events[v],p=arguments.length,x,_;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),p){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,f),!0;case 4:return g.fn.call(g.context,u,f,h),!0;case 5:return g.fn.call(g.context,u,f,h,d),!0;case 6:return g.fn.call(g.context,u,f,h,d,y),!0}for(_=1,x=new Array(p-1);_<p;_++)x[_-1]=arguments[_];g.fn.apply(g.context,x)}else{var T=g.length,w;for(_=0;_<T;_++)switch(g[_].once&&this.removeListener(c,g[_].fn,void 0,!0),p){case 1:g[_].fn.call(g[_].context);break;case 2:g[_].fn.call(g[_].context,u);break;case 3:g[_].fn.call(g[_].context,u,f);break;case 4:g[_].fn.call(g[_].context,u,f,h);break;default:if(!x)for(w=1,x=new Array(p-1);w<p;w++)x[w-1]=arguments[w];g[_].fn.apply(g[_].context,x)}}return!0},s.prototype.on=function(c,u,f){return o(this,c,u,f,!1)},s.prototype.once=function(c,u,f){return o(this,c,u,f,!0)},s.prototype.removeListener=function(c,u,f,h){var d=n?n+c:c;if(!this._events[d])return this;if(!u)return a(this,d),this;var y=this._events[d];if(y.fn)y.fn===u&&(!h||y.once)&&(!f||y.context===f)&&a(this,d);else{for(var v=0,g=[],p=y.length;v<p;v++)(y[v].fn!==u||h&&!y[v].once||f&&y[v].context!==f)&&g.push(y[v]);g.length?this._events[d]=g.length===1?g[0]:g:a(this,d)}return this},s.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})(PB);var qTe=PB.exports;const XTe=Ft(qTe);var Rb=new XTe,Ob="recharts.syncMouseEvents";function Ap(t){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ap(t)}function KTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YTe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CB(r.key),r)}}function QTe(t,e,n){return e&&YTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ib(t,e,n){return e=CB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CB(t){var e=ZTe(t,"string");return Ap(e)=="symbol"?e:e+""}function ZTe(t,e){if(Ap(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var JTe=function(){function t(){KTe(this,t),Ib(this,"activeIndex",0),Ib(this,"coordinateList",[]),Ib(this,"layout","horizontal")}return QTe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,o=i===void 0?null:i,a=n.container,s=a===void 0?null:a,l=n.layout,c=l===void 0?null:l,u=n.offset,f=u===void 0?null:u,h=n.mouseHandlerCallback,d=h===void 0?null:h;this.coordinateList=(r=o??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=c??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=d??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,a=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=o+l+c,h=a+this.offset.top+s/2+u;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function eAe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Ae(r)&&Ae(i))return!0}return!1}function tAe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function RB(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle,a=Qt(e,n,r,i),s=Qt(e,n,r,o);return{points:[a,s],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function nAe(t,e,n){var r,i,o,a;if(t==="horizontal")r=e.x,o=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,f=e.angle,h=Qt(s,l,c,f),d=Qt(s,l,u,f);r=h.x,i=h.y,o=d.x,a=d.y}else return RB(e);return[{x:r,y:i},{x:o,y:a}]}function Mp(t){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mp(t)}function hL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hL(Object(n),!0).forEach(function(r){rAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rAe(t,e,n){return e=iAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iAe(t){var e=oAe(t,"string");return Mp(e)=="symbol"?e:e+""}function oAe(t,e){if(Mp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Mp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aAe(t){var e,n,r=t.element,i=t.tooltipEventType,o=t.isActive,a=t.activeCoordinate,s=t.activePayload,l=t.offset,c=t.activeTooltipIndex,u=t.tooltipAxisBandSize,f=t.layout,h=t.chartName,d=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!d||!o||!a||h!=="ScatterChart"&&i!=="axis")return null;var y,v=Il;if(h==="ScatterChart")y=a,v=pbe;else if(h==="BarChart")y=tAe(f,a,l,u),v=XA;else if(f==="radial"){var g=RB(a),p=g.cx,x=g.cy,_=g.radius,T=g.startAngle,w=g.endAngle;y={cx:p,cy:x,startAngle:T,endAngle:w,innerRadius:_,outerRadius:_},v=T5}else y={points:nAe(f,a,l)},v=Il;var M=Sg(Sg(Sg(Sg({stroke:"#ccc",pointerEvents:"none"},l),y),Ke(d,!1)),{},{payload:s,payloadIndex:c,className:_t("recharts-tooltip-cursor",d.className)});return V.isValidElement(d)?V.cloneElement(d,M):V.createElement(v,M)}var sAe=["item"],lAe=["children","className","width","height","style","compact","title","desc"];function vf(t){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(t)}function mu(){return mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mu.apply(this,arguments)}function dL(t,e){return fAe(t)||uAe(t,e)||IB(t,e)||cAe()}function cAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function fAe(t){if(Array.isArray(t))return t}function pL(t,e){if(t==null)return{};var n=hAe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hAe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function dAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pAe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,NB(r.key),r)}}function mAe(t,e,n){return e&&pAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gAe(t,e,n){return e=$y(e),vAe(t,OB()?Reflect.construct(e,n||[],$y(t).constructor):e.apply(t,n))}function vAe(t,e){if(e&&(vf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yAe(t)}function yAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OB=function(){return!!t})()}function $y(t){return $y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$y(t)}function _Ae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VS(t,e)}function VS(t,e){return VS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},VS(t,e)}function yf(t){return wAe(t)||bAe(t)||IB(t)||xAe()}function xAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IB(t,e){if(t){if(typeof t=="string")return BS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BS(t,e)}}function bAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wAe(t){if(Array.isArray(t))return BS(t)}function BS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ce(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mL(Object(n),!0).forEach(function(r){it(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function it(t,e,n){return e=NB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NB(t){var e=SAe(t,"string");return vf(e)=="symbol"?e:e+""}function SAe(t,e){if(vf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var EAe={xAxis:["bottom","top"],yAxis:["left","right"]},TAe={width:"100%",height:"100%"},DB={x:0,y:0};function Eg(t){return t}var AAe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},MAe=function(e,n,r,i){var o=n.find(function(u){return u&&u.index===r});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,s=i.radius;return ce(ce(ce({},i),Qt(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var l=o.coordinate,c=i.angle;return ce(ce(ce({},i),Qt(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return DB},b_=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,a=(r??[]).reduce(function(s,l){var c=l.props.data;return c&&c.length?[].concat(yf(s),yf(c)):s},[]);return a.length>0?a:e&&e.length&&Ae(i)&&Ae(o)?e.slice(i,o+1):[]};function LB(t){return t==="number"?[0,"auto"]:void 0}var $S=function(e,n,r,i){var o=e.graphicalItems,a=e.tooltipAxis,s=b_(n,e);return r<0||!o||!o.length||r>=s.length?null:o.reduce(function(l,c){var u,f=(u=c.props.data)!==null&&u!==void 0?u:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(a.dataKey&&!a.allowDuplicatedCategory){var d=f===void 0?s:f;h=Bv(d,a.dataKey,i)}else h=f&&f[r]||s[r];return h?[].concat(yf(l),[_5(c,h)]):l},[])},gL=function(e,n,r,i){var o=i||{x:e.chartX,y:e.chartY},a=AAe(o,r),s=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=Jye(a,s,c,l);if(u>=0&&c){var f=c[u]&&c[u].value,h=$S(e,n,u,f),d=MAe(r,s,u,o);return{activeTooltipIndex:u,activeLabel:f,activePayload:h,activeCoordinate:d}}return null},PAe=function(e,n){var r=n.axes,i=n.graphicalItems,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,f=e.children,h=e.stackOffset,d=d5(u,o);return r.reduce(function(y,v){var g,p=v.type.defaultProps!==void 0?ce(ce({},v.type.defaultProps),v.props):v.props,x=p.type,_=p.dataKey,T=p.allowDataOverflow,w=p.allowDuplicatedCategory,M=p.scale,b=p.ticks,A=p.includeHidden,E=p[a];if(y[E])return y;var P=b_(e.data,{graphicalItems:i.filter(function(X){var ee,me=a in X.props?X.props[a]:(ee=X.type.defaultProps)===null||ee===void 0?void 0:ee[a];return me===E}),dataStartIndex:l,dataEndIndex:c}),R=P.length,N,O,D;eAe(p.domain,T,x)&&(N=tS(p.domain,null,T),d&&(x==="number"||M!=="auto")&&(D=fd(P,_,"category")));var k=LB(x);if(!N||N.length===0){var H,B=(H=p.domain)!==null&&H!==void 0?H:k;if(_){if(N=fd(P,_,x),x==="category"&&d){var F=Hre(N);w&&F?(O=N,N=Py(0,R)):w||(N=kN(B,N,v).reduce(function(X,ee){return X.indexOf(ee)>=0?X:[].concat(yf(X),[ee])},[]))}else if(x==="category")w?N=N.filter(function(X){return X!==""&&!ft(X)}):N=kN(B,N,v).reduce(function(X,ee){return X.indexOf(ee)>=0||ee===""||ft(ee)?X:[].concat(yf(X),[ee])},[]);else if(x==="number"){var q=i0e(P,i.filter(function(X){var ee,me,_e=a in X.props?X.props[a]:(ee=X.type.defaultProps)===null||ee===void 0?void 0:ee[a],Ne="hide"in X.props?X.props.hide:(me=X.type.defaultProps)===null||me===void 0?void 0:me.hide;return _e===E&&(A||!Ne)}),_,o,u);q&&(N=q)}d&&(x==="number"||M!=="auto")&&(D=fd(P,_,"category"))}else d?N=Py(0,R):s&&s[E]&&s[E].hasStack&&x==="number"?N=h==="expand"?[0,1]:y5(s[E].stackGroups,l,c):N=h5(P,i.filter(function(X){var ee=a in X.props?X.props[a]:X.type.defaultProps[a],me="hide"in X.props?X.props.hide:X.type.defaultProps.hide;return ee===E&&(A||!me)}),x,u,!0);if(x==="number")N=FS(f,N,E,o,b),B&&(N=tS(B,N,T));else if(x==="category"&&B){var K=B,z=N.every(function(X){return K.indexOf(X)>=0});z&&(N=K)}}return ce(ce({},y),{},it({},E,ce(ce({},p),{},{axisType:o,domain:N,categoricalDomain:D,duplicateDomain:O,originalDomain:(g=p.domain)!==null&&g!==void 0?g:k,isCategorical:d,layout:u})))},{})},CAe=function(e,n){var r=n.graphicalItems,i=n.Axis,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,f=e.children,h=b_(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),d=h.length,y=d5(u,o),v=-1;return r.reduce(function(g,p){var x=p.type.defaultProps!==void 0?ce(ce({},p.type.defaultProps),p.props):p.props,_=x[a],T=LB("number");if(!g[_]){v++;var w;return y?w=Py(0,d):s&&s[_]&&s[_].hasStack?(w=y5(s[_].stackGroups,l,c),w=FS(f,w,_,o)):(w=tS(T,h5(h,r.filter(function(M){var b,A,E=a in M.props?M.props[a]:(b=M.type.defaultProps)===null||b===void 0?void 0:b[a],P="hide"in M.props?M.props.hide:(A=M.type.defaultProps)===null||A===void 0?void 0:A.hide;return E===_&&!P}),"number",u),i.defaultProps.allowDataOverflow),w=FS(f,w,_,o)),ce(ce({},g),{},it({},_,ce(ce({axisType:o},i.defaultProps),{},{hide:!0,orientation:fi(EAe,"".concat(o,".").concat(v%2),null),domain:w,originalDomain:T,isCategorical:y,layout:u})))}return g},{})},RAe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,o=n.AxisComp,a=n.graphicalItems,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.children,f="".concat(i,"Id"),h=hi(u,o),d={};return h&&h.length?d=PAe(e,{axes:h,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:c}):a&&a.length&&(d=CAe(e,{Axis:o,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:c})),d},OAe=function(e){var n=Ya(e),r=aa(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:bA(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:gy(n,r)}},vL=function(e){var n=e.children,r=e.defaultShowTooltip,i=ai(n,sf),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},IAe=function(e){return!e||!e.length?!1:e.some(function(n){var r=ha(n&&n.type);return r&&r.indexOf("Bar")>=0})},yL=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},NAe=function(e,n){var r=e.props,i=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,s=e.yAxisMap,l=s===void 0?{}:s,c=r.width,u=r.height,f=r.children,h=r.margin||{},d=ai(f,sf),y=ai(f,da),v=Object.keys(l).reduce(function(w,M){var b=l[M],A=b.orientation;return!b.mirror&&!b.hide?ce(ce({},w),{},it({},A,w[A]+b.width)):w},{left:h.left||0,right:h.right||0}),g=Object.keys(a).reduce(function(w,M){var b=a[M],A=b.orientation;return!b.mirror&&!b.hide?ce(ce({},w),{},it({},A,fi(w,"".concat(A))+b.height)):w},{top:h.top||0,bottom:h.bottom||0}),p=ce(ce({},g),v),x=p.bottom;d&&(p.bottom+=d.props.height||sf.defaultProps.height),y&&n&&(p=n0e(p,i,r,n));var _=c-p.left-p.right,T=u-p.top-p.bottom;return ce(ce({brushBottom:x},p),{},{width:Math.max(_,0),height:Math.max(T,0)})},DAe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},w_=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,o=i===void 0?"axis":i,a=e.validateTooltipEventTypes,s=a===void 0?["axis"]:a,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,f=e.defaultProps,h=function(p,x){var _=x.graphicalItems,T=x.stackGroups,w=x.offset,M=x.updateId,b=x.dataStartIndex,A=x.dataEndIndex,E=p.barSize,P=p.layout,R=p.barGap,N=p.barCategoryGap,O=p.maxBarSize,D=yL(P),k=D.numericAxisName,H=D.cateAxisName,B=IAe(_),F=[];return _.forEach(function(q,K){var z=b_(p.data,{graphicalItems:[q],dataStartIndex:b,dataEndIndex:A}),X=q.type.defaultProps!==void 0?ce(ce({},q.type.defaultProps),q.props):q.props,ee=X.dataKey,me=X.maxBarSize,_e=X["".concat(k,"Id")],Ne=X["".concat(H,"Id")],We={},Ue=l.reduce(function(Pt,kt){var $=x["".concat(kt.axisType,"Map")],L=X["".concat(kt.axisType,"Id")];$&&$[L]||kt.axisType==="zAxis"||Wl();var re=$[L];return ce(ce({},Pt),{},it(it({},kt.axisType,re),"".concat(kt.axisType,"Ticks"),aa(re)))},We),fe=Ue[H],Re=Ue["".concat(H,"Ticks")],Ee=T&&T[_e]&&T[_e].hasStack&&d0e(q,T[_e].stackGroups),G=ha(q.type).indexOf("Bar")>=0,lt=gy(fe,Re),be=[],Le=B&&e0e({barSize:E,stackGroups:T,totalSize:DAe(Ue,H)});if(G){var ke,mt,Ye=ft(me)?O:me,Ze=(ke=(mt=gy(fe,Re,!0))!==null&&mt!==void 0?mt:Ye)!==null&&ke!==void 0?ke:0;be=t0e({barGap:R,barCategoryGap:N,bandSize:Ze!==lt?Ze:lt,sizeList:Le[Ne],maxBarSize:Ye}),Ze!==lt&&(be=be.map(function(Pt){return ce(ce({},Pt),{},{position:ce(ce({},Pt.position),{},{offset:Pt.position.offset-Ze/2})})}))}var ht=q&&q.type&&q.type.getComposedData;ht&&F.push({props:ce(ce({},ht(ce(ce({},Ue),{},{displayedData:z,props:p,dataKey:ee,item:q,bandSize:lt,barPosition:be,offset:w,stackedData:Ee,layout:P,dataStartIndex:b,dataEndIndex:A}))),{},it(it(it({key:q.key||"item-".concat(K)},k,Ue[k]),H,Ue[H]),"animationId",M)),childIndex:tie(q,p.children),item:q})}),F},d=function(p,x){var _=p.props,T=p.dataStartIndex,w=p.dataEndIndex,M=p.updateId;if(!RO({props:_}))return null;var b=_.children,A=_.layout,E=_.stackOffset,P=_.data,R=_.reverseStackOrder,N=yL(A),O=N.numericAxisName,D=N.cateAxisName,k=hi(b,r),H=f0e(P,k,"".concat(O,"Id"),"".concat(D,"Id"),E,R),B=l.reduce(function(X,ee){var me="".concat(ee.axisType,"Map");return ce(ce({},X),{},it({},me,RAe(_,ce(ce({},ee),{},{graphicalItems:k,stackGroups:ee.axisType===O&&H,dataStartIndex:T,dataEndIndex:w}))))},{}),F=NAe(ce(ce({},B),{},{props:_,graphicalItems:k}),x==null?void 0:x.legendBBox);Object.keys(B).forEach(function(X){B[X]=u(_,B[X],F,X.replace("Map",""),n)});var q=B["".concat(D,"Map")],K=OAe(q),z=h(_,ce(ce({},B),{},{dataStartIndex:T,dataEndIndex:w,updateId:M,graphicalItems:k,stackGroups:H,offset:F}));return ce(ce({formattedGraphicalItems:z,graphicalItems:k,offset:F,stackGroups:H},K),B)},y=function(g){function p(x){var _,T,w;return dAe(this,p),w=gAe(this,p,[x]),it(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),it(w,"accessibilityManager",new JTe),it(w,"handleLegendBBoxUpdate",function(M){if(M){var b=w.state,A=b.dataStartIndex,E=b.dataEndIndex,P=b.updateId;w.setState(ce({legendBBox:M},d({props:w.props,dataStartIndex:A,dataEndIndex:E,updateId:P},ce(ce({},w.state),{},{legendBBox:M}))))}}),it(w,"handleReceiveSyncEvent",function(M,b,A){if(w.props.syncId===M){if(A===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(b)}}),it(w,"handleBrushChange",function(M){var b=M.startIndex,A=M.endIndex;if(b!==w.state.dataStartIndex||A!==w.state.dataEndIndex){var E=w.state.updateId;w.setState(function(){return ce({dataStartIndex:b,dataEndIndex:A},d({props:w.props,dataStartIndex:b,dataEndIndex:A,updateId:E},w.state))}),w.triggerSyncEvent({dataStartIndex:b,dataEndIndex:A})}}),it(w,"handleMouseEnter",function(M){var b=w.getMouseInfo(M);if(b){var A=ce(ce({},b),{},{isTooltipActive:!0});w.setState(A),w.triggerSyncEvent(A);var E=w.props.onMouseEnter;ot(E)&&E(A,M)}}),it(w,"triggeredAfterMouseMove",function(M){var b=w.getMouseInfo(M),A=b?ce(ce({},b),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(A),w.triggerSyncEvent(A);var E=w.props.onMouseMove;ot(E)&&E(A,M)}),it(w,"handleItemMouseEnter",function(M){w.setState(function(){return{isTooltipActive:!0,activeItem:M,activePayload:M.tooltipPayload,activeCoordinate:M.tooltipPosition||{x:M.cx,y:M.cy}}})}),it(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),it(w,"handleMouseMove",function(M){M.persist(),w.throttleTriggeredAfterMouseMove(M)}),it(w,"handleMouseLeave",function(M){w.throttleTriggeredAfterMouseMove.cancel();var b={isTooltipActive:!1};w.setState(b),w.triggerSyncEvent(b);var A=w.props.onMouseLeave;ot(A)&&A(b,M)}),it(w,"handleOuterEvent",function(M){var b=eie(M),A=fi(w.props,"".concat(b));if(b&&ot(A)){var E,P;/.*touch.*/i.test(b)?P=w.getMouseInfo(M.changedTouches[0]):P=w.getMouseInfo(M),A((E=P)!==null&&E!==void 0?E:{},M)}}),it(w,"handleClick",function(M){var b=w.getMouseInfo(M);if(b){var A=ce(ce({},b),{},{isTooltipActive:!0});w.setState(A),w.triggerSyncEvent(A);var E=w.props.onClick;ot(E)&&E(A,M)}}),it(w,"handleMouseDown",function(M){var b=w.props.onMouseDown;if(ot(b)){var A=w.getMouseInfo(M);b(A,M)}}),it(w,"handleMouseUp",function(M){var b=w.props.onMouseUp;if(ot(b)){var A=w.getMouseInfo(M);b(A,M)}}),it(w,"handleTouchMove",function(M){M.changedTouches!=null&&M.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(M.changedTouches[0])}),it(w,"handleTouchStart",function(M){M.changedTouches!=null&&M.changedTouches.length>0&&w.handleMouseDown(M.changedTouches[0])}),it(w,"handleTouchEnd",function(M){M.changedTouches!=null&&M.changedTouches.length>0&&w.handleMouseUp(M.changedTouches[0])}),it(w,"triggerSyncEvent",function(M){w.props.syncId!==void 0&&Rb.emit(Ob,w.props.syncId,M,w.eventEmitterSymbol)}),it(w,"applySyncEvent",function(M){var b=w.props,A=b.layout,E=b.syncMethod,P=w.state.updateId,R=M.dataStartIndex,N=M.dataEndIndex;if(M.dataStartIndex!==void 0||M.dataEndIndex!==void 0)w.setState(ce({dataStartIndex:R,dataEndIndex:N},d({props:w.props,dataStartIndex:R,dataEndIndex:N,updateId:P},w.state)));else if(M.activeTooltipIndex!==void 0){var O=M.chartX,D=M.chartY,k=M.activeTooltipIndex,H=w.state,B=H.offset,F=H.tooltipTicks;if(!B)return;if(typeof E=="function")k=E(F,M);else if(E==="value"){k=-1;for(var q=0;q<F.length;q++)if(F[q].value===M.activeLabel){k=q;break}}var K=ce(ce({},B),{},{x:B.left,y:B.top}),z=Math.min(O,K.x+K.width),X=Math.min(D,K.y+K.height),ee=F[k]&&F[k].value,me=$S(w.state,w.props.data,k),_e=F[k]?{x:A==="horizontal"?F[k].coordinate:z,y:A==="horizontal"?X:F[k].coordinate}:DB;w.setState(ce(ce({},M),{},{activeLabel:ee,activeCoordinate:_e,activePayload:me,activeTooltipIndex:k}))}else w.setState(M)}),it(w,"renderCursor",function(M){var b,A=w.state,E=A.isTooltipActive,P=A.activeCoordinate,R=A.activePayload,N=A.offset,O=A.activeTooltipIndex,D=A.tooltipAxisBandSize,k=w.getTooltipEventType(),H=(b=M.props.active)!==null&&b!==void 0?b:E,B=w.props.layout,F=M.key||"_recharts-cursor";return W.createElement(aAe,{key:F,activeCoordinate:P,activePayload:R,activeTooltipIndex:O,chartName:n,element:M,isActive:H,layout:B,offset:N,tooltipAxisBandSize:D,tooltipEventType:k})}),it(w,"renderPolarAxis",function(M,b,A){var E=fi(M,"type.axisType"),P=fi(w.state,"".concat(E,"Map")),R=M.type.defaultProps,N=R!==void 0?ce(ce({},R),M.props):M.props,O=P&&P[N["".concat(E,"Id")]];return V.cloneElement(M,ce(ce({},O),{},{className:_t(E,O.className),key:M.key||"".concat(b,"-").concat(A),ticks:aa(O,!0)}))}),it(w,"renderPolarGrid",function(M){var b=M.props,A=b.radialLines,E=b.polarAngles,P=b.polarRadius,R=w.state,N=R.radiusAxisMap,O=R.angleAxisMap,D=Ya(N),k=Ya(O),H=k.cx,B=k.cy,F=k.innerRadius,q=k.outerRadius;return V.cloneElement(M,{polarAngles:Array.isArray(E)?E:aa(k,!0).map(function(K){return K.coordinate}),polarRadius:Array.isArray(P)?P:aa(D,!0).map(function(K){return K.coordinate}),cx:H,cy:B,innerRadius:F,outerRadius:q,key:M.key||"polar-grid",radialLines:A})}),it(w,"renderLegend",function(){var M=w.state.formattedGraphicalItems,b=w.props,A=b.children,E=b.width,P=b.height,R=w.props.margin||{},N=E-(R.left||0)-(R.right||0),O=u5({children:A,formattedGraphicalItems:M,legendWidth:N,legendContent:c});if(!O)return null;var D=O.item,k=pL(O,sAe);return V.cloneElement(D,ce(ce({},k),{},{chartWidth:E,chartHeight:P,margin:R,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),it(w,"renderTooltip",function(){var M,b=w.props,A=b.children,E=b.accessibilityLayer,P=ai(A,Lr);if(!P)return null;var R=w.state,N=R.isTooltipActive,O=R.activeCoordinate,D=R.activePayload,k=R.activeLabel,H=R.offset,B=(M=P.props.active)!==null&&M!==void 0?M:N;return V.cloneElement(P,{viewBox:ce(ce({},H),{},{x:H.left,y:H.top}),active:B,label:k,payload:B?D:[],coordinate:O,accessibilityLayer:E})}),it(w,"renderBrush",function(M){var b=w.props,A=b.margin,E=b.data,P=w.state,R=P.offset,N=P.dataStartIndex,O=P.dataEndIndex,D=P.updateId;return V.cloneElement(M,{key:M.key||"_recharts-brush",onChange:_g(w.handleBrushChange,M.props.onChange),data:E,x:Ae(M.props.x)?M.props.x:R.left,y:Ae(M.props.y)?M.props.y:R.top+R.height+R.brushBottom-(A.bottom||0),width:Ae(M.props.width)?M.props.width:R.width,startIndex:N,endIndex:O,updateId:"brush-".concat(D)})}),it(w,"renderReferenceElement",function(M,b,A){if(!M)return null;var E=w,P=E.clipPathId,R=w.state,N=R.xAxisMap,O=R.yAxisMap,D=R.offset,k=M.type.defaultProps||{},H=M.props,B=H.xAxisId,F=B===void 0?k.xAxisId:B,q=H.yAxisId,K=q===void 0?k.yAxisId:q;return V.cloneElement(M,{key:M.key||"".concat(b,"-").concat(A),xAxis:N[F],yAxis:O[K],viewBox:{x:D.left,y:D.top,width:D.width,height:D.height},clipPathId:P})}),it(w,"renderActivePoints",function(M){var b=M.item,A=M.activePoint,E=M.basePoint,P=M.childIndex,R=M.isRange,N=[],O=b.props.key,D=b.item.type.defaultProps!==void 0?ce(ce({},b.item.type.defaultProps),b.item.props):b.item.props,k=D.activeDot,H=D.dataKey,B=ce(ce({index:P,dataKey:H,cx:A.x,cy:A.y,r:4,fill:qA(b.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},Ke(k,!1)),$v(k));return N.push(p.renderActiveDot(k,B,"".concat(O,"-activePoint-").concat(P))),E?N.push(p.renderActiveDot(k,ce(ce({},B),{},{cx:E.x,cy:E.y}),"".concat(O,"-basePoint-").concat(P))):R&&N.push(null),N}),it(w,"renderGraphicChild",function(M,b,A){var E=w.filterFormatItem(M,b,A);if(!E)return null;var P=w.getTooltipEventType(),R=w.state,N=R.isTooltipActive,O=R.tooltipAxis,D=R.activeTooltipIndex,k=R.activeLabel,H=w.props.children,B=ai(H,Lr),F=E.props,q=F.points,K=F.isRange,z=F.baseLine,X=E.item.type.defaultProps!==void 0?ce(ce({},E.item.type.defaultProps),E.item.props):E.item.props,ee=X.activeDot,me=X.hide,_e=X.activeBar,Ne=X.activeShape,We=!!(!me&&N&&B&&(ee||_e||Ne)),Ue={};P!=="axis"&&B&&B.props.trigger==="click"?Ue={onClick:_g(w.handleItemMouseEnter,M.props.onClick)}:P!=="axis"&&(Ue={onMouseLeave:_g(w.handleItemMouseLeave,M.props.onMouseLeave),onMouseEnter:_g(w.handleItemMouseEnter,M.props.onMouseEnter)});var fe=V.cloneElement(M,ce(ce({},E.props),Ue));function Re(kt){return typeof O.dataKey=="function"?O.dataKey(kt.payload):null}if(We)if(D>=0){var Ee,G;if(O.dataKey&&!O.allowDuplicatedCategory){var lt=typeof O.dataKey=="function"?Re:"payload.".concat(O.dataKey.toString());Ee=Bv(q,lt,k),G=K&&z&&Bv(z,lt,k)}else Ee=q==null?void 0:q[D],G=K&&z&&z[D];if(Ne||_e){var be=M.props.activeIndex!==void 0?M.props.activeIndex:D;return[V.cloneElement(M,ce(ce(ce({},E.props),Ue),{},{activeIndex:be})),null,null]}if(!ft(Ee))return[fe].concat(yf(w.renderActivePoints({item:E,activePoint:Ee,basePoint:G,childIndex:D,isRange:K})))}else{var Le,ke=(Le=w.getItemByXY(w.state.activeCoordinate))!==null&&Le!==void 0?Le:{graphicalItem:fe},mt=ke.graphicalItem,Ye=mt.item,Ze=Ye===void 0?M:Ye,ht=mt.childIndex,Pt=ce(ce(ce({},E.props),Ue),{},{activeIndex:ht});return[V.cloneElement(Ze,Pt),null,null]}return K?[fe,null,null]:[fe,null]}),it(w,"renderCustomized",function(M,b,A){return V.cloneElement(M,ce(ce({key:"recharts-customized-".concat(A)},w.props),w.state))}),it(w,"renderMap",{CartesianGrid:{handler:Eg,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Eg},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Eg},YAxis:{handler:Eg},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((_=x.id)!==null&&_!==void 0?_:ec("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=cV(w.triggeredAfterMouseMove,(T=x.throttleDelay)!==null&&T!==void 0?T:1e3/60),w.state={},w}return _Ae(p,g),mAe(p,[{key:"componentDidMount",value:function(){var _,T;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var _=this.props,T=_.children,w=_.data,M=_.height,b=_.layout,A=ai(T,Lr);if(A){var E=A.props.defaultIndex;if(!(typeof E!="number"||E<0||E>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[E]&&this.state.tooltipTicks[E].value,R=$S(this.state,w,E,P),N=this.state.tooltipTicks[E].coordinate,O=(this.state.offset.top+M)/2,D=b==="horizontal",k=D?{x:N,y:O}:{y:N,x:O},H=this.state.formattedGraphicalItems.find(function(F){var q=F.item;return q.type.name==="Scatter"});H&&(k=ce(ce({},k),H.props.points[E].tooltipPosition),R=H.props.points[E].tooltipPayload);var B={activeTooltipIndex:E,isTooltipActive:!0,activeLabel:P,activePayload:R,activeCoordinate:k};this.setState(B),this.renderCursor(A),this.accessibilityManager.setIndex(E)}}}},{key:"getSnapshotBeforeUpdate",value:function(_,T){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==T.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==_.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==_.margin){var w,M;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(M=this.props.margin.top)!==null&&M!==void 0?M:0}})}return null}},{key:"componentDidUpdate",value:function(_){gw([ai(_.children,Lr)],[ai(this.props.children,Lr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var _=ai(this.props.children,Lr);if(_&&typeof _.props.shared=="boolean"){var T=_.props.shared?"axis":"item";return s.indexOf(T)>=0?T:o}return o}},{key:"getMouseInfo",value:function(_){if(!this.container)return null;var T=this.container,w=T.getBoundingClientRect(),M=Mpe(w),b={chartX:Math.round(_.pageX-M.left),chartY:Math.round(_.pageY-M.top)},A=w.width/T.offsetWidth||1,E=this.inRange(b.chartX,b.chartY,A);if(!E)return null;var P=this.state,R=P.xAxisMap,N=P.yAxisMap,O=this.getTooltipEventType();if(O!=="axis"&&R&&N){var D=Ya(R).scale,k=Ya(N).scale,H=D&&D.invert?D.invert(b.chartX):null,B=k&&k.invert?k.invert(b.chartY):null;return ce(ce({},b),{},{xValue:H,yValue:B})}var F=gL(this.state,this.props.data,this.props.layout,E);return F?ce(ce({},b),F):null}},{key:"inRange",value:function(_,T){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,M=this.props.layout,b=_/w,A=T/w;if(M==="horizontal"||M==="vertical"){var E=this.state.offset,P=b>=E.left&&b<=E.left+E.width&&A>=E.top&&A<=E.top+E.height;return P?{x:b,y:A}:null}var R=this.state,N=R.angleAxisMap,O=R.radiusAxisMap;if(N&&O){var D=Ya(N);return FN({x:b,y:A},D)}return null}},{key:"parseEventsOfWrapper",value:function(){var _=this.props.children,T=this.getTooltipEventType(),w=ai(_,Lr),M={};w&&T==="axis"&&(w.props.trigger==="click"?M={onClick:this.handleClick}:M={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var b=$v(this.props,this.handleOuterEvent);return ce(ce({},b),M)}},{key:"addListener",value:function(){Rb.on(Ob,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Rb.removeListener(Ob,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(_,T,w){for(var M=this.state.formattedGraphicalItems,b=0,A=M.length;b<A;b++){var E=M[b];if(E.item===_||E.props.key===_.key||T===ha(E.item.type)&&w===E.childIndex)return E}return null}},{key:"renderClipPath",value:function(){var _=this.clipPathId,T=this.state.offset,w=T.left,M=T.top,b=T.height,A=T.width;return W.createElement("defs",null,W.createElement("clipPath",{id:_},W.createElement("rect",{x:w,y:M,height:b,width:A})))}},{key:"getXScales",value:function(){var _=this.state.xAxisMap;return _?Object.entries(_).reduce(function(T,w){var M=dL(w,2),b=M[0],A=M[1];return ce(ce({},T),{},it({},b,A.scale))},{}):null}},{key:"getYScales",value:function(){var _=this.state.yAxisMap;return _?Object.entries(_).reduce(function(T,w){var M=dL(w,2),b=M[0],A=M[1];return ce(ce({},T),{},it({},b,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(_){var T;return(T=this.state.xAxisMap)===null||T===void 0||(T=T[_])===null||T===void 0?void 0:T.scale}},{key:"getYScaleByAxisId",value:function(_){var T;return(T=this.state.yAxisMap)===null||T===void 0||(T=T[_])===null||T===void 0?void 0:T.scale}},{key:"getItemByXY",value:function(_){var T=this.state,w=T.formattedGraphicalItems,M=T.activeItem;if(w&&w.length)for(var b=0,A=w.length;b<A;b++){var E=w[b],P=E.props,R=E.item,N=R.type.defaultProps!==void 0?ce(ce({},R.type.defaultProps),R.props):R.props,O=ha(R.type);if(O==="Bar"){var D=(P.data||[]).find(function(F){return Xxe(_,F)});if(D)return{graphicalItem:E,payload:D}}else if(O==="RadialBar"){var k=(P.data||[]).find(function(F){return FN(_,F)});if(k)return{graphicalItem:E,payload:k}}else if(p_(E,M)||m_(E,M)||bp(E,M)){var H=k1e({graphicalItem:E,activeTooltipItem:M,itemData:N.data}),B=N.activeIndex===void 0?H:N.activeIndex;return{graphicalItem:ce(ce({},E),{},{childIndex:B}),payload:bp(E,M)?N.data[H]:E.props.data[H]}}}return null}},{key:"render",value:function(){var _=this;if(!RO(this))return null;var T=this.props,w=T.children,M=T.className,b=T.width,A=T.height,E=T.style,P=T.compact,R=T.title,N=T.desc,O=pL(T,lAe),D=Ke(O,!1);if(P)return W.createElement(qD,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},W.createElement(yw,mu({},D,{width:b,height:A,title:R,desc:N}),this.renderClipPath(),IO(w,this.renderMap)));if(this.props.accessibilityLayer){var k,H;D.tabIndex=(k=this.props.tabIndex)!==null&&k!==void 0?k:0,D.role=(H=this.props.role)!==null&&H!==void 0?H:"application",D.onKeyDown=function(F){_.accessibilityManager.keyboardEvent(F)},D.onFocus=function(){_.accessibilityManager.focus()}}var B=this.parseEventsOfWrapper();return W.createElement(qD,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},W.createElement("div",mu({className:_t("recharts-wrapper",M),style:ce({position:"relative",cursor:"default",width:b,height:A},E)},B,{ref:function(q){_.container=q}}),W.createElement(yw,mu({},D,{width:b,height:A,title:R,desc:N,style:TAe}),this.renderClipPath(),IO(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(V.Component);it(y,"displayName",n),it(y,"defaultProps",ce({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),it(y,"getDerivedStateFromProps",function(g,p){var x=g.dataKey,_=g.data,T=g.children,w=g.width,M=g.height,b=g.layout,A=g.stackOffset,E=g.margin,P=p.dataStartIndex,R=p.dataEndIndex;if(p.updateId===void 0){var N=vL(g);return ce(ce(ce({},N),{},{updateId:0},d(ce(ce({props:g},N),{},{updateId:0}),p)),{},{prevDataKey:x,prevData:_,prevWidth:w,prevHeight:M,prevLayout:b,prevStackOffset:A,prevMargin:E,prevChildren:T})}if(x!==p.prevDataKey||_!==p.prevData||w!==p.prevWidth||M!==p.prevHeight||b!==p.prevLayout||A!==p.prevStackOffset||!Au(E,p.prevMargin)){var O=vL(g),D={chartX:p.chartX,chartY:p.chartY,isTooltipActive:p.isTooltipActive},k=ce(ce({},gL(p,_,b)),{},{updateId:p.updateId+1}),H=ce(ce(ce({},O),D),k);return ce(ce(ce({},H),d(ce({props:g},H),p)),{},{prevDataKey:x,prevData:_,prevWidth:w,prevHeight:M,prevLayout:b,prevStackOffset:A,prevMargin:E,prevChildren:T})}if(!gw(T,p.prevChildren)){var B,F,q,K,z=ai(T,sf),X=z&&(B=(F=z.props)===null||F===void 0?void 0:F.startIndex)!==null&&B!==void 0?B:P,ee=z&&(q=(K=z.props)===null||K===void 0?void 0:K.endIndex)!==null&&q!==void 0?q:R,me=X!==P||ee!==R,_e=!ft(_),Ne=_e&&!me?p.updateId:p.updateId+1;return ce(ce({updateId:Ne},d(ce(ce({props:g},p),{},{updateId:Ne,dataStartIndex:X,dataEndIndex:ee}),p)),{},{prevChildren:T,dataStartIndex:X,dataEndIndex:ee})}return null}),it(y,"renderActiveDot",function(g,p,x){var _;return V.isValidElement(g)?_=V.cloneElement(g,p):ot(g)?_=g(p):_=W.createElement(nm,p),W.createElement(St,{className:"recharts-active-dot",key:x},_)});var v=V.forwardRef(function(p,x){return W.createElement(y,mu({},p,{ref:x}))});return v.displayName=y.displayName,v},kB=w_({chartName:"LineChart",GraphicalChild:As,axisComponents:[{axisType:"xAxis",AxisComp:Vo},{axisType:"yAxis",AxisComp:uo}],formatAxisMap:KA}),LAe=w_({chartName:"BarChart",GraphicalChild:rc,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Vo},{axisType:"yAxis",AxisComp:uo}],formatAxisMap:KA}),kAe=w_({chartName:"PieChart",GraphicalChild:Ia,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:d_},{axisType:"radiusAxis",AxisComp:f_}],formatAxisMap:S0e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),jB=w_({chartName:"AreaChart",GraphicalChild:Lo,axisComponents:[{axisType:"xAxis",AxisComp:Vo},{axisType:"yAxis",AxisComp:uo}],formatAxisMap:KA});const jAe=({country:t,onClose:e,controlsRef:n})=>{const[r,i]=V.useState(null),[o,a]=V.useState(null),[s,l]=V.useState(null),[c,u]=V.useState(null),[f,h]=V.useState(null),[d,y]=V.useState(!0),[v,g]=V.useState(!1),[p,x]=V.useState("resumen"),[_,T]=V.useState(!1),w="https://web-production-2cf89.up.railway.app",M={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},b=[{id:"resumen",label:"Resumen",icon:KJ},{id:"empresas",label:"Empresas",icon:Vv},{id:"produccion",label:"Producción",icon:Vc}],A=()=>{n!=null&&n.current&&(n.current.autoRotate=!0),e()},E=()=>{n!=null&&n.current&&(n.current.autoRotate=!n.current.autoRotate,g(n.current.autoRotate))};if(V.useEffect(()=>(n!=null&&n.current&&(n.current.autoRotate=!1),()=>{n!=null&&n.current&&(n.current.autoRotate=!0)}),[n]),V.useEffect(()=>{const H=()=>{window.innerWidth>768&&T(!1)};return window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)},[]),V.useEffect(()=>{(async()=>{if(t!=null&&t.name){y(!0),h(null);try{const[B,F,q,K]=await Promise.all([fetch(`${w}/stats/country/${encodeURIComponent(t.name)}`),fetch(`${w}/stats/historical/${encodeURIComponent(t.name)}`),fetch(`${w}/stats/companies/${encodeURIComponent(t.name)}`),fetch(`${w}/stats/production/${encodeURIComponent(t.name)}`)]);if(!B.ok||!F.ok||!q.ok||!K.ok)throw new Error("Error al cargar los datos");const[z,X,ee,me]=await Promise.all([B.json(),F.json(),q.json(),K.json()]);i(z),a(X),l(ee),u(me)}catch(B){h(B instanceof Error?B.message:"Error desconocido")}finally{y(!1)}}})()},[t]),!t)return null;const P=({children:H})=>S.jsxs(Fv,{children:[S.jsx(jt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:A},"modal-overlay"),S.jsx(jt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"fixed inset-0 flex items-center justify-center z-50",onClick:B=>B.stopPropagation(),children:S.jsx("div",{className:"w-[95vw] md:w-[90vw] max-w-[800px] h-[95vh] md:h-[90vh] overflow-hidden backdrop-blur-xl bg-black/80 rounded-xl shadow-2xl border border-white/10",children:S.jsx("div",{className:"relative h-full flex flex-col",children:H})})},"modal-content")]}),R=({activeTab:H,setActiveTab:B,tabs:F,isMobileMenuOpen:q,setIsMobileMenuOpen:K})=>S.jsx(jt.div,{className:`${q?"fixed inset-0 bg-black/90 z-50 flex items-center justify-center":"flex gap-2 mt-4 bg-gray-900/50 p-1 rounded-lg overflow-x-auto md:overflow-visible"}`,initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:S.jsx("div",{className:`flex ${q?"flex-col w-full p-6":"flex-row gap-2"}`,children:F.map((z,X)=>S.jsxs(jt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{B(z.id),K(!1)},className:`
                            flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-300
                            ${q?"w-full justify-center mb-4":""}
                            ${H===z.id?"bg-gradient-to-r from-green-500/20 to-blue-500/20 text-white border border-green-500/30":"text-gray-400 hover:text-white hover:bg-gray-800/50"}
                        `,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:X*.1},children:[S.jsx(z.icon,{size:18}),z.label]},z.id))})}),N=({title:H,value:B,icon:F,trend:q,description:K})=>S.jsx(jt.div,{className:"relative overflow-hidden bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-4 md:p-6 rounded-xl border border-gray-700 hover:border-green-500/30 transition-all duration-500",whileHover:{scale:1.02,y:-5},initial:"hidden",animate:"visible",variants:M,children:S.jsx("div",{className:"relative z-10",children:S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsxs("div",{children:[S.jsxs("p",{className:"text-xs md:text-sm text-gray-400 flex items-center gap-2",children:[H,S.jsx(zF,{size:14,className:"text-gray-500 hover:text-gray-300 cursor-help"})]}),S.jsx("p",{className:"text-xl md:text-3xl font-bold mt-2 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:S.jsx(jt.span,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:B})}),K&&S.jsx("p",{className:"text-xs md:text-sm text-gray-400 mt-1",children:K}),q&&S.jsxs(jt.span,{className:`inline-flex items-center gap-1 px-2 py-1 mt-2 text-xs md:text-sm rounded ${q>0?"bg-red-500/20 text-red-400 border border-red-500/30":"bg-green-500/20 text-green-400 border border-green-500/30"}`,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:[q>0?"↑":"↓"," ",Math.abs(q),"%",S.jsx(Bl,{size:14})]})]}),S.jsx("div",{className:`p-2 md:p-3 rounded-xl bg-gradient-to-br ${q>0?"from-red-500/20 to-orange-500/20 border border-red-500/30":"from-green-500/20 to-blue-500/20 border border-green-500/30"}`,children:S.jsx(F,{className:"h-4 w-4 md:h-6 md:w-6 text-white"})})]})})}),O=()=>S.jsxs("div",{className:"flex-none sticky top-0 z-50 bg-black/80 backdrop-blur-xl p-4 md:p-6 pb-4 border-b border-white/10",children:[S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[S.jsx(jt.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"relative group",children:S.jsx("img",{src:`https://flagcdn.com/w40/${t.code.toLowerCase()}.png`,alt:`Bandera de ${t.name}`,className:"h-6 md:h-8 rounded shadow-lg transition-transform duration-300 group-hover:scale-110"})}),S.jsxs("div",{children:[S.jsxs(jt.h2,{className:"text-xl md:text-3xl font-bold bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent flex items-center gap-2",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},children:[t.name,S.jsx(Gd,{className:"h-4 w-4 md:h-6 md:w-6 text-green-400"})]}),S.jsxs(jt.p,{className:"text-xs md:text-sm text-gray-400 mt-1 flex items-center gap-2",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1},children:[S.jsx(iee,{size:14}),"Panel de Control de Emisiones CO₂"]})]})]}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx(jt.button,{className:"md:hidden p-2 rounded-lg bg-gray-800/50 text-white",onClick:()=>T(!_),children:S.jsx(HF,{size:20})}),S.jsx(jt.button,{whileHover:{scale:1.1,rotate:180},whileTap:{scale:.9},onClick:E,className:`hidden md:block p-3 rounded-lg backdrop-blur-md transition-all duration-300 ${v?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-gray-800/50 text-white hover:bg-gray-700/50"}`,children:S.jsx(nee,{size:20})}),S.jsx(jt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:A,className:"p-2 md:p-3 rounded-lg bg-gray-800/50 backdrop-blur-md hover:bg-red-500/20 hover:text-red-400 transition-all duration-300",children:S.jsx(ho,{size:20})})]})]}),S.jsx("div",{className:"hidden md:block",children:S.jsx(R,{activeTab:p,setActiveTab:x,tabs:b,isMobileMenuOpen:_,setIsMobileMenuOpen:T})})]}),D=({data:H})=>S.jsxs(jt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-4 md:p-6 rounded-xl border border-gray-700",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-lg md:text-xl font-semibold bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:"Emisiones Históricas"}),S.jsx("p",{className:"text-xs md:text-sm text-gray-400 mt-1",children:"Evolución temporal de emisiones de CO₂"})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(QT,{className:"h-4 w-4 md:h-5 md:w-5 text-gray-400"}),S.jsx(WJ,{className:"h-4 w-4 md:h-5 md:w-5 text-gray-400"})]})]}),S.jsx("div",{className:"h-[250px] md:h-[300px] w-full",children:S.jsx(Yu,{width:"100%",height:"100%",children:S.jsxs(jB,{data:H,margin:{top:5,right:10,left:0,bottom:5},children:[S.jsx("defs",{children:S.jsxs("linearGradient",{id:"colorEmissions",x1:"0",y1:"0",x2:"0",y2:"1",children:[S.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.8}),S.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]})}),S.jsx(Xf,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),S.jsx(Vo,{dataKey:"year",stroke:"#fff",tick:{fill:"#9CA3AF",fontSize:"12px"}}),S.jsx(uo,{stroke:"#fff",tick:{fill:"#9CA3AF",fontSize:"12px"},width:40}),S.jsx(Lr,{contentStyle:{backgroundColor:"rgba(0,0,0,0.8)",backdropFilter:"blur(12px)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",fontSize:"12px"}}),S.jsx(Lo,{type:"monotone",dataKey:"total_emissions",stroke:"#10B981",strokeWidth:2,fillOpacity:1,fill:"url(#colorEmissions)",name:"Emisiones (MtCO₂e)"})]})})})]}),k=()=>{if(d)return S.jsx(jt.div,{className:"flex-1 overflow-y-auto space-y-4 p-4 md:p-6",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},children:[1,2,3].map(B=>S.jsx(jt.div,{className:"h-20 md:h-24 w-full bg-gradient-to-r from-gray-800/50 to-gray-700/50 rounded-xl overflow-hidden",variants:M,children:S.jsx("div",{className:"h-full w-full animate-pulse bg-gradient-to-r from-transparent via-white/5 to-transparent"})},`loading-${B}`))});if(f)return S.jsxs(jt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex-1 overflow-y-auto m-4 md:m-6 bg-red-900/50 border border-red-500/30 p-4 rounded-xl flex items-center gap-3",children:[S.jsx(qp,{className:"h-5 w-5 text-red-400"}),S.jsx("p",{className:"text-red-200 text-sm md:text-base",children:f})]});const H=()=>{var B;switch(p){case"resumen":return r&&S.jsxs(jt.div,{className:"space-y-4 md:space-y-6",children:[S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[S.jsx(N,{title:"Emisiones Totales",value:`${(B=r.total_emissions)==null?void 0:B.toFixed(2)} MtCO₂e`,icon:Bl,trend:-2.5,description:"Emisiones totales de CO₂ equivalente"}),S.jsx(N,{title:"Empresas Registradas",value:r.number_of_companies,icon:Vv,description:"Total de empresas monitoreadas"}),S.jsx(N,{title:"Sectores Activos",value:r.number_of_sectors,icon:GF,description:"Sectores industriales principales"})]}),(o==null?void 0:o.timeline)&&S.jsx(D,{data:o.timeline})]});case"empresas":return(s==null?void 0:s.companies)&&S.jsx(jt.div,{className:"space-y-3",children:s.companies.sort((F,q)=>q.total_emissions-F.total_emissions).slice(0,5).map((F,q)=>S.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-4 rounded-xl border border-gray-700",children:[S.jsx("h3",{className:"text-lg font-semibold",children:F.name}),S.jsxs("p",{className:"text-sm text-gray-400",children:[F.emissions_percentage.toFixed(1),"% del total"]})]},F.name))});case"produccion":return(c==null?void 0:c.products)&&S.jsx(jt.div,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.products.map((F,q)=>S.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-4 rounded-xl border border-gray-700",children:[S.jsx("h3",{className:"text-lg font-semibold",children:F.name}),S.jsxs("p",{className:"text-sm text-gray-400",children:[F.volume," ",F.unit]})]},F.name))});default:return null}};return S.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:S.jsx(Fv,{mode:"wait",children:S.jsx(jt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:H()},p)})})};return S.jsx(P,{children:S.jsxs("div",{className:"flex flex-col h-full",children:[S.jsx(O,{}),_&&S.jsx(R,{activeTab:p,setActiveTab:x,tabs:b,isMobileMenuOpen:_,setIsMobileMenuOpen:T}),S.jsx(k,{})]})})},UAe=({isVisible:t,onClose:e})=>{const[n,r]=V.useState(null),[i,o]=V.useState(null),[a,s]=V.useState(!0),[l,c]=V.useState(null),[u,f]=V.useState("resumen"),h=Li({maxWidth:640}),d=Li({minWidth:641,maxWidth:1024});Li({minWidth:1025,maxWidth:1440});const y="https://web-production-2cf89.up.railway.app",v=V.useMemo(()=>({container:`fixed inset-0 z-50 w-full h-full overflow-y-auto bg-black/90 backdrop-blur-xl p-4 sm:p-6
                ${h?"top-0":d?"top-16":"top-20"} 
                text-white`,grid:`grid ${h?"grid-cols-1":"grid-cols-2"} gap-4`,chart:{height:h?250:d?300:350,margin:{top:20,right:h?10:20,left:h?10:20,bottom:h?80:60}}}),[h,d]);V.useEffect(()=>{let b=!0;return(async()=>{if(t){s(!0),c(null);try{const E=new AbortController,P=setTimeout(()=>E.abort(),1e4),[R,N]=await Promise.all([fetch(`${y}/stats/global`,{signal:E.signal}),fetch(`${y}/stats/companies/global`,{signal:E.signal})]);if(clearTimeout(P),!R.ok||!N.ok)throw new Error("Error al cargar los datos globales");const[O,D]=await Promise.all([R.json(),N.json()]);b&&(r(O),o(D))}catch(E){E.name==="AbortError"?c("Tiempo de espera agotado. Por favor, intente nuevamente."):(console.error("Error:",E),c(E.message))}finally{b&&s(!1)}}})(),()=>{b=!1}},[t,y]);const g=["#10B981","#F59E0B","#3B82F6","#EC4899","#8B5CF6","#06B6D4","#34D399","#FBBF24"],p={"Investor-owned Company":{icon:"💼",name:"Empresas Privadas",color:"#FF6B6B",hoverIcon:"💰",percentage:61.5,companies:75,emissions:"440.2K"},"State-owned Entity":{icon:"🏛️",name:"Empresas Estatales",color:"#4ECDC4",hoverIcon:"🏢",percentage:29.5,companies:36,emissions:"464.6K"},"Nation State":{icon:"🏴",name:"Estados Nacionales",color:"#45B7D1",hoverIcon:"🌐",percentage:9.02,companies:11,emissions:"516.2K"}},x=V.useMemo(()=>Object.entries(p).map(([b,A])=>({name:A.name,value:A.percentage,icon:A.icon,hoverIcon:A.hoverIcon,color:A.color,companies:A.companies,emissions:A.emissions})),[]),_=({title:b,value:A,icon:E,color:P,description:R})=>S.jsx("div",{className:"bg-white/5 backdrop-blur-lg p-4 sm:p-6 rounded-2xl border border-white/10 hover:border-white/20 transition-all duration-300 transform hover:-translate-y-1",children:S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsxs("div",{className:"flex-1",children:[S.jsx("p",{className:"text-sm text-gray-400 font-medium",children:b}),S.jsx("p",{className:"text-2xl sm:text-4xl font-bold mt-2 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:A}),R&&S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:R})]}),S.jsx("div",{className:`p-3 rounded-xl ${P} bg-opacity-10 hidden sm:block`,children:S.jsx(E,{className:`h-6 w-6 ${P}`})})]})}),T=b=>b>=1e6?`${(b/1e6).toFixed(1)}M`:b>=1e3?`${(b/1e3).toFixed(1)}K`:b.toFixed(1),w=[{id:"resumen",label:"Resumen",icon:hw},{id:"empresas",label:"Empresas",icon:Vv},{id:"sectores",label:"Sectores",icon:GF}],M=({active:b,payload:A})=>{if(b&&A&&A.length){const E=A[0].payload;return S.jsxs("div",{className:"bg-black/90 backdrop-blur-xl p-4 rounded-xl border border-white/10 shadow-xl",children:[S.jsxs("p",{className:"text-base sm:text-lg font-bold mb-2",children:[E.icon," ",E.name," ",E.hoverIcon]}),S.jsxs("p",{className:"text-xs sm:text-sm text-gray-300",children:["📊 Porcentaje: ",E.value,"%"]}),S.jsxs("p",{className:"text-xs sm:text-sm text-gray-300",children:["🏢 Empresas: ",E.companies]}),S.jsxs("p",{className:"text-xs sm:text-sm text-gray-300",children:["📈 Emisiones: ",E.emissions," MtCO₂e"]})]})}return null};return t?S.jsxs("div",{className:v.container,children:[S.jsxs("div",{className:"flex justify-between items-center mb-6 sm:mb-8",children:[S.jsxs("div",{children:[S.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-3 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:[S.jsx(Gd,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-400"}),"Emisiones Globales"]}),S.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:"Panel de Control de Emisiones CO₂"})]}),S.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-white/10 transition-all duration-300","aria-label":"Cerrar panel",children:S.jsx(ho,{size:20})})]}),S.jsx("div",{className:"flex gap-2 mb-6 bg-white/5 p-1 rounded-xl overflow-x-auto",children:w.map(b=>S.jsxs("button",{onClick:()=>f(b.id),className:`flex items-center gap-2 px-3 sm:px-4 py-2 rounded-lg transition-all duration-300 text-xs sm:text-sm whitespace-nowrap
              ${u===b.id?"bg-gradient-to-r from-green-400/20 to-blue-500/20 text-white shadow-lg border border-white/10":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[S.jsx(b.icon,{size:16}),b.label]},b.id))}),a?S.jsxs("div",{className:"text-center py-8",children:[S.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-green-400 mx-auto mb-3"}),S.jsx("p",{className:"text-sm text-gray-400",children:"Cargando datos globales..."})]}):l?S.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 p-4 rounded-xl flex items-center gap-3",children:[S.jsx(qp,{className:"h-5 w-5 text-red-400"}),S.jsx("p",{className:"text-red-200",children:l})]}):S.jsxs("div",{className:"space-y-6",children:[u==="resumen"&&S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:v.grid,children:[S.jsx(_,{title:"Emisiones Globales Totales",value:`${T(n.total_emissions)} MtCO₂e`,icon:aee,color:"text-green-400"}),S.jsx(_,{title:"Empresas Globales",value:n.number_of_companies,icon:Vv,color:"text-blue-400"})]}),S.jsxs("div",{className:"bg-white/5 p-4 sm:p-6 rounded-2xl border border-white/10",children:[S.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-6 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:"Top 10 Emisores Globales"}),S.jsx(Yu,{width:"100%",height:v.chart.height,children:S.jsxs(LAe,{data:i.companies,margin:v.chart.margin,children:[S.jsx(Xf,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),S.jsx(Vo,{dataKey:"name",stroke:"#fff",angle:-45,textAnchor:"end",height:60,tick:{fontSize:h?8:10}}),S.jsx(uo,{stroke:"#fff",tick:{fontSize:h?8:10},width:h?30:40}),S.jsx(Lr,{contentStyle:{backgroundColor:"rgba(0,0,0,0.8)",backdropFilter:"blur(12px)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",fontSize:h?"12px":"14px"},formatter:b=>[`${T(b)} MtCO₂e`,"Emisiones"]}),S.jsx(rc,{dataKey:"total_emissions",radius:[4,4,0,0],children:i.companies.map((b,A)=>S.jsx(Qd,{fill:g[A%g.length]},`cell-${A}`))})]})})]})]}),u==="sectores"&&S.jsxs("div",{className:"bg-white/5 p-4 sm:p-8 rounded-2xl border border-white/10",children:[S.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-2 text-center bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:"🌍 Distribución Global por Tipo de Entidad 📊"}),S.jsx("p",{className:"text-center text-gray-400 text-xs sm:text-sm mb-8",children:"✨ Análisis de la Estructura Empresarial Global 🔍"}),S.jsxs("div",{className:`grid ${h?"grid-cols-1":"grid-cols-2"} gap-8`,children:[S.jsxs("div",{className:"relative",children:[S.jsx(Yu,{width:"100%",height:300,children:S.jsxs(kAe,{children:[S.jsx(Ia,{data:x,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:h?"50%":"60%",outerRadius:h?"70%":"80%",paddingAngle:2,children:x.map((b,A)=>S.jsx(Qd,{fill:b.color,stroke:"rgba(255,255,255,0.1)",strokeWidth:2},`cell-${A}`))}),S.jsx(Lr,{content:M})]})}),S.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:S.jsxs("div",{className:"text-center",children:[S.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"Total"}),S.jsx("p",{className:"text-xl sm:text-2xl font-bold text-white",children:"120"}),S.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"Empresas"})]})})]}),S.jsx("div",{className:"space-y-4 overflow-y-auto max-h-[300px] pr-2",children:x.map(b=>S.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10 hover:border-white/20 transition-all duration-300",style:{borderLeft:`4px solid ${b.color}`},children:[S.jsxs("div",{className:"flex items-center justify-between mb-2",children:[S.jsxs("span",{className:"text-base sm:text-lg font-bold flex items-center gap-2",children:[b.icon," ",b.name]}),S.jsxs("span",{className:"text-xs sm:text-sm px-3 py-1.5 bg-white/5 rounded-lg font-medium",children:[b.value,"%"]})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[S.jsxs("div",{className:"bg-white/5 p-2 rounded-lg",children:[S.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"Empresas"}),S.jsxs("p",{className:"text-base sm:text-lg font-bold",children:[b.companies," 🏢"]})]}),S.jsxs("div",{className:"bg-white/5 p-2 rounded-lg",children:[S.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"Emisiones"}),S.jsxs("p",{className:"text-base sm:text-lg font-bold",children:[b.emissions," 📈"]})]})]})]},b.name))})]})]}),u==="empresas"&&S.jsxs("div",{className:"bg-white/5 p-4 sm:p-6 rounded-2xl border border-white/10",children:[S.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-4 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:"Principales Emisores Globales"}),S.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:i.companies.map((b,A)=>S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center p-4 bg-white/5 hover:bg-white/10 rounded-xl border border-white/10 hover:border-white/20 transition-all duration-300 cursor-pointer group gap-2 sm:gap-0",children:[S.jsxs("div",{children:[S.jsx("p",{className:"font-medium group-hover:text-green-400 transition-colors",children:b.name}),S.jsx("span",{className:"inline-block px-3 py-1 text-xs bg-white/5 rounded-lg mt-2",children:b.sector})]}),S.jsxs("div",{className:"text-left sm:text-right w-full sm:w-auto",children:[S.jsxs("p",{className:"font-bold",children:[T(b.total_emissions)," MtCO₂e"]}),S.jsxs("p",{className:"text-xs sm:text-sm text-gray-400",children:[(b.total_emissions/n.total_emissions*100).toFixed(1),"% del total"]})]})]},b.name))})]})]})]}):null},Nb="https://web-production-2cf89.up.railway.app",FAe=({isVisible:t,onClose:e})=>{const[n,r]=V.useState([]),[i,o]=V.useState([]),[a,s]=V.useState(null),[l,c]=V.useState(null),[u,f]=V.useState(null),[h,d]=V.useState(!1),[y,v]=V.useState(null),[g,p]=V.useState("country"),x=Li({maxWidth:640});Li({minWidth:641,maxWidth:1024}),Li({minWidth:1025,maxWidth:1440});const _={container:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 sm:p-6 md:p-8 animate-fadeIn z-[9999]",modal:`w-full max-w-[95vw] sm:max-w-[85vw] md:max-w-[900px] max-h-[90vh] overflow-y-auto 
        bg-gradient-to-br from-gray-900/95 to-black/95 rounded-2xl sm:rounded-3xl 
        p-4 sm:p-6 md:p-8 text-white shadow-2xl border border-gray-700/50 animate-slideUp relative z-[10000]`,title:`text-2xl sm:text-3xl font-bold flex items-center gap-2 sm:gap-3 
                text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-blue-600`,gridContainer:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4"};V.useEffect(()=>{t&&T()},[t]),V.useEffect(()=>{a&&w(a)},[a]);const T=async()=>{d(!0),v(null);try{const O=await fetch(`${Nb}/countries/list`);if(!O.ok)throw new Error(`Error fetching countries: ${O.statusText}`);const D=await O.json();r(Array.isArray(D.countries)?D.countries:[])}catch(O){console.error("Error:",O),v("Error loading countries")}finally{d(!1)}},w=async O=>{if(!(O!=null&&O.name)){v("Invalid country data");return}d(!0),v(null);try{const D=await fetch(`${Nb}/stats/production/${encodeURIComponent(O.name)}`);if(!D.ok)throw new Error(`Error fetching commodities for ${O.name}`);const k=await D.json();o(Array.isArray(k.products)?k.products:[])}catch(D){console.error("Error:",D),v(`Error loading commodities for ${O.name}`)}finally{d(!1)}},M=async(O,D)=>{if(!O||!D){v("Country or commodity not selected");return}d(!0),v(null);try{const k=await fetch(`${Nb}/model/simulation/${encodeURIComponent(O.name)}/${encodeURIComponent(D.name)}`);if(!k.ok)throw new Error("Error fetching simulation data");const H=await k.json();f(H),p("results")}catch(k){v(`Error fetching simulation: ${k.message}`)}finally{d(!1)}},b=O=>new Intl.NumberFormat("en-US",{maximumFractionDigits:2,minimumFractionDigits:2}).format(O),A=({metrics:O})=>S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[{label:"RMSE",value:O.rmse,desc:"Error Cuadrático Medio"},{label:"MAE",value:O.mae,desc:"Error Absoluto Medio"},{label:"R² Score",value:`${(O.r2_score*100).toFixed(2)}%`,desc:"Coeficiente de Determinación"}].map(D=>S.jsxs("div",{className:`bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-4 sm:p-6 rounded-xl \r
                              border border-gray-700/50 hover:border-blue-500/50 transition-all duration-300 \r
                              transform hover:-translate-y-1 hover:shadow-lg hover:shadow-blue-500/20`,children:[S.jsx("div",{className:"text-sm text-blue-400 font-medium",children:D.label}),S.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white mt-2 mb-1",children:b(D.value)}),S.jsx("div",{className:"text-xs text-gray-400",children:D.desc})]},D.label))}),E=()=>S.jsx("div",{className:"flex items-center justify-center p-8 sm:p-12",children:S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"w-12 sm:w-16 h-12 sm:h-16 border-4 border-blue-500/20 border-t-blue-500 rounded-full animate-spin"}),S.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:S.jsx("div",{className:"w-6 sm:w-8 h-6 sm:h-8 border-4 border-purple-500/20 border-t-purple-500 rounded-full animate-spin"})})]})}),P=({message:O})=>S.jsxs("div",{className:`bg-red-900/30 backdrop-blur-sm border border-red-500/50 p-4 sm:p-6 rounded-xl \r
                        flex items-center gap-3 animate-fadeIn`,children:[S.jsx(qp,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-400"}),S.jsx("p",{className:"text-sm sm:text-base text-red-200",children:O})]}),R=({simulationResults:O})=>S.jsx("div",{className:"h-[300px] sm:h-[400px] w-full",children:S.jsx(Yu,{children:S.jsxs(kB,{data:O.simulation_results,children:[S.jsx(Xf,{strokeDasharray:"3 3",stroke:"#374151"}),S.jsx(Vo,{dataKey:"reduction_percentage",stroke:"#9CA3AF",label:x?null:{value:"Reducción (%)",position:"bottom",fill:"#9CA3AF"},tick:{fontSize:x?10:12}}),S.jsx(uo,{stroke:"#9CA3AF",yAxisId:"left",label:x?null:{value:"Emisiones (MtCO2e)",angle:-90,position:"insideLeft",fill:"#9CA3AF"},tick:{fontSize:x?10:12},width:x?40:60}),S.jsx(uo,{stroke:"#9CA3AF",yAxisId:"right",orientation:"right",label:x?null:{value:"Eficiencia",angle:90,position:"insideRight",fill:"#9CA3AF"},tick:{fontSize:x?10:12},width:x?40:60}),S.jsx(Lr,{contentStyle:{backgroundColor:"rgba(17, 24, 39, 0.9)",border:"1px solid rgba(59, 130, 246, 0.5)",borderRadius:"0.5rem",backdropFilter:"blur(4px)",fontSize:x?"12px":"14px"}}),S.jsx(da,{wrapperStyle:{fontSize:x?"12px":"14px"}}),S.jsx(As,{yAxisId:"left",type:"monotone",dataKey:"predicted_emissions",stroke:"#3B82F6",strokeWidth:2,dot:{fill:"#3B82F6",r:x?3:4},activeDot:{r:x?5:6,fill:"#60A5FA"},name:"Emisiones Proyectadas"}),S.jsx(As,{yAxisId:"right",type:"monotone",dataKey:"reduction_efficiency",stroke:"#10B981",strokeWidth:2,dot:{fill:"#10B981",r:x?3:4},activeDot:{r:x?5:6,fill:"#34D399"},name:"Eficiencia de Reducción"})]})})}),N=()=>{if(h)return S.jsx(E,{});if(y)return S.jsx(P,{message:y});switch(g){case"country":return S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 animate-fadeIn",children:n.map((O,D)=>S.jsx("button",{onClick:()=>{s(O),p("commodity")},className:`group p-4 sm:p-6 bg-gradient-to-br from-gray-900/90 to-gray-800/90 rounded-xl\r
                                         border border-gray-700/50 hover:border-blue-500/50 transition-all duration-300\r
                                         transform hover:-translate-y-1 hover:shadow-lg hover:shadow-blue-500/20`,style:{animation:`fadeIn 0.5s ease-out ${D*.1}s backwards`},children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("span",{className:"text-base sm:text-lg font-medium",children:O.name}),S.jsx(uu,{className:"text-blue-400 transform group-hover:translate-x-1 transition-transform duration-300"})]})},O.name))});case"commodity":return S.jsxs("div",{className:"space-y-4 sm:space-y-6 animate-fadeIn",children:[S.jsxs("button",{onClick:()=>{p("country"),s(null)},className:"flex items-center gap-2 text-sm text-blue-400 hover:text-blue-300 transition-colors",children:[S.jsx(uu,{size:16,className:"rotate-180"}),"Volver a países"]}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:i.map((O,D)=>S.jsx("button",{onClick:()=>{c(O),M(a,O)},className:`group p-4 sm:p-6 bg-gradient-to-br from-gray-900/90 to-gray-800/90 rounded-xl\r
                                             border border-gray-700/50 hover:border-blue-500/50 transition-all duration-300\r
                                             transform hover:-translate-y-1 hover:shadow-lg hover:shadow-blue-500/20`,style:{animation:`fadeIn 0.5s ease-out ${D*.1}s backwards`},children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("span",{className:"text-base sm:text-lg font-medium",children:O.name}),S.jsx(uu,{className:"text-blue-400 transform group-hover:translate-x-1 transition-transform duration-300"})]})},D))})]});case"results":return S.jsxs("div",{className:"space-y-4 sm:space-y-6 animate-fadeIn",children:[S.jsxs("button",{onClick:()=>{p("commodity"),f(null)},className:"flex items-center gap-2 text-sm text-blue-400 hover:text-blue-300 transition-colors",children:[S.jsx(uu,{size:16,className:"rotate-180"}),"Volver a commodities"]}),S.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-4 sm:p-8 rounded-2xl border border-gray-700/50",children:[S.jsx("h3",{className:"text-xl font-semibold mb-6 text-blue-400",children:"Métricas del Modelo"}),S.jsx(A,{metrics:u.model_metrics})]}),S.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-4 sm:p-8 rounded-2xl border border-gray-700/50",children:[S.jsx("h3",{className:"text-xl font-semibold mb-6 text-blue-400",children:"Resultados de la Simulación"}),S.jsx(R,{simulationResults:u})]}),S.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 p-4 sm:p-8 rounded-2xl border border-gray-700/50",children:[S.jsx("h3",{className:"text-xl font-semibold mb-6 text-blue-400",children:"Recomendaciones"}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[{label:"Reducción Óptima",value:`${u.recommendations.optimal_reduction}%`},{label:"Reducción de Emisiones",value:`${b(u.recommendations.emissions_reduction)} MtCO2e`},{label:"Eficiencia",value:b(u.recommendations.reduction_efficiency)},{label:"Mejora Porcentual",value:`${b(u.recommendations.improvement_percentage)}%`}].map((O,D)=>S.jsxs("div",{className:"bg-gray-800/50 p-4 sm:p-6 rounded-xl border border-gray-700/50 hover:border-blue-500/50 transition-all duration-300",children:[S.jsx("p",{className:"text-sm text-gray-400 mb-2",children:O.label}),S.jsx("p",{className:"text-xl sm:text-2xl font-bold text-white",children:O.value})]},O.label))})]})]})}};return t?S.jsx("div",{className:_.container,children:S.jsxs("div",{className:_.modal,children:[S.jsxs("div",{className:_.header,children:[S.jsxs("div",{children:[S.jsxs("h2",{className:_.title,children:[S.jsx(Bl,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-500"}),"Simulador de Emisiones"]}),S.jsxs("p",{className:"text-xs sm:text-sm text-gray-400 mt-1 sm:mt-2",children:[g==="country"&&"Selecciona un país para comenzar",g==="commodity"&&`Commodities disponibles para ${a==null?void 0:a.name}`,g==="results"&&`${a==null?void 0:a.name} - ${l==null?void 0:l.name}`]})]}),S.jsx("button",{onClick:e,className:"p-2 rounded-xl hover:bg-gray-800/50 transition-all duration-300 group","aria-label":"Cerrar",children:S.jsx(ho,{className:"h-5 w-5 sm:h-6 sm:w-6 text-gray-400 group-hover:text-red-400 transition-colors"})})]}),N()]})}):null},UB=document.createElement("style");UB.textContent=`
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    
    @keyframes slideUp {
        from { 
            opacity: 0;
            transform: translateY(20px);
        }
        to { 
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .animate-fadeIn {
        animation: fadeIn 0.5s ease-out;
    }
    
    .animate-slideUp {
        animation: slideUp 0.5s ease-out;
    }
    `;document.head.appendChild(UB);const _L="https://web-production-2cf89.up.railway.app",VAe=({isVisible:t,onClose:e})=>{const[n,r]=V.useState([]),[i,o]=V.useState(null),[a,s]=V.useState(null),[l,c]=V.useState(!1),[u,f]=V.useState(null),h=Li({maxWidth:640}),y={container:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 sm:p-6 md:p-8 animate-fadeIn",modal:`w-full max-w-[95vw] sm:max-w-[85vw] md:max-w-[900px] max-h-[90vh] overflow-y-auto 
                bg-gradient-to-br from-slate-900/95 to-black/95 rounded-2xl sm:rounded-3xl 
                p-4 sm:p-6 md:p-8 text-white shadow-2xl border border-cyan-900/50 animate-slideUp 
                backdrop-blur-xl relative z-[10000]`,header:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6 sm:mb-8",title:"text-2xl sm:text-3xl font-bold flex items-center gap-2 sm:gap-3 tracking-wider",gridContainer:`grid grid-cols-1 sm:grid-cols-2 ${Li({minWidth:641,maxWidth:1024})?"lg:grid-cols-3":""} gap-3 sm:gap-4`};V.useEffect(()=>{t&&v()},[t]);const v=async()=>{c(!0),f(null);try{const b=await fetch(`${_L}/countries/list`);if(!b.ok)throw new Error("Error fetching countries");const A=await b.json();r(A.countries)}catch{f("Error loading countries")}finally{c(!1)}},g=async b=>{c(!0),f(null);try{const A=await fetch(`${_L}/model/country_predictions/${encodeURIComponent(b.name)}`);if(!A.ok)throw new Error("Error fetching predictions");const E=await A.json();s(E)}catch{f(`Error loading predictions for ${b.name}`)}finally{c(!1)}},p=b=>new Intl.NumberFormat("en-US",{maximumFractionDigits:2,minimumFractionDigits:2}).format(b),x=({title:b,children:A})=>S.jsxs("div",{className:`bg-gradient-to-br from-slate-900/90 to-black/90 p-4 sm:p-8 rounded-2xl \r
                        border border-cyan-900/50 hover:border-cyan-500/50 transition-all duration-500 \r
                        mb-4 sm:mb-6 backdrop-blur-xl shadow-lg shadow-cyan-500/20`,children:[S.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6 text-cyan-400 tracking-wider",children:b}),A]}),_=({metrics:b})=>S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[{label:"RMSE",value:b.rmse,desc:"Error Cuadrático Medio"},{label:"R² Score",value:b.r2_score,desc:"Coeficiente de Determinación"},{label:"Tiempo",value:`${b.training_time.toFixed(2)}s`,desc:"Duración del Entrenamiento"}].map((A,E)=>S.jsxs("div",{className:`bg-gradient-to-br from-slate-900/90 to-black/90 p-4 sm:p-6 rounded-xl \r
                             border border-cyan-900/50 hover:border-cyan-500/50 transition-all duration-300 \r
                             backdrop-blur-xl`,style:{animation:`fadeIn 0.5s ease-out ${E*.1}s backwards`},children:[S.jsx("div",{className:"text-sm text-cyan-400 font-medium tracking-wider",children:A.label}),S.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white mt-2 mb-1 font-mono",children:p(A.value)}),S.jsx("div",{className:"text-xs text-gray-400",children:A.desc})]},A.label))}),T=({predictions:b})=>S.jsx("div",{className:"h-[300px] sm:h-[400px] w-full",children:S.jsx(Yu,{children:S.jsxs(kB,{data:b.predictions.historical.concat(b.predictions.forecast),children:[S.jsx(Xf,{strokeDasharray:"3 3",stroke:"#1e293b"}),S.jsx(Vo,{dataKey:"year",stroke:"#94a3b8",label:h?null:{value:"Año",position:"bottom",fill:"#94a3b8"},tick:{fontSize:h?10:12}}),S.jsx(uo,{stroke:"#94a3b8",label:h?null:{value:"Emisiones (MtCO2e)",angle:-90,position:"insideLeft",fill:"#94a3b8"},tick:{fontSize:h?10:12},width:h?40:60}),S.jsx(Lr,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.9)",border:"1px solid rgba(6, 182, 212, 0.5)",borderRadius:"0.5rem",backdropFilter:"blur(4px)",fontSize:h?"12px":"14px"}}),S.jsx(da,{wrapperStyle:{fontSize:h?"12px":"14px"}}),S.jsx(As,{type:"monotone",dataKey:"emissions",stroke:"#06b6d4",strokeWidth:2,dot:{fill:"#06b6d4",r:h?3:4},activeDot:{r:h?5:6,fill:"#22d3ee"},name:"Emisiones Históricas"}),S.jsx(As,{type:"monotone",dataKey:"forecast",stroke:"#14b8a6",strokeWidth:2,dot:{fill:"#14b8a6",r:h?3:4},activeDot:{r:h?5:6,fill:"#2dd4bf"},name:"Predicciones",strokeDasharray:"5 5"})]})})}),w=b=>{switch(b){case"POSITIVO":return"#10b981";case"ALERTA":return"#ef4444";default:return"#f59e0b"}},M=()=>l?S.jsx("div",{className:"flex items-center justify-center p-8 sm:p-12",children:S.jsx("div",{className:"w-12 sm:w-16 h-12 sm:h-16 border-4 border-cyan-500/20 border-t-cyan-500 rounded-full animate-spin"})}):u?S.jsxs("div",{className:"bg-red-900/30 backdrop-blur-sm border border-red-500/50 p-4 sm:p-6 rounded-xl flex items-center gap-3",children:[S.jsx(qp,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-400"}),S.jsx("p",{className:"text-sm sm:text-base text-red-200",children:u})]}):i?S.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[S.jsxs("button",{onClick:()=>{o(null),s(null)},className:"flex items-center gap-2 text-sm text-cyan-400 hover:text-cyan-300 transition-colors tracking-wider",children:[S.jsx(uu,{className:"rotate-180"}),"Volver a países"]}),a&&S.jsxs(S.Fragment,{children:[S.jsx(x,{title:"Métricas del Modelo",children:S.jsx(_,{metrics:a.metrics})}),S.jsx(x,{title:"Predicción de Emisiones",children:S.jsx(T,{predictions:a})}),S.jsxs(x,{title:"Estado y Recomendaciones",children:[S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 mb-4 sm:mb-6",children:S.jsxs("div",{className:"bg-slate-800/50 p-4 sm:p-6 rounded-xl border border-cyan-900/50 backdrop-blur-xl",children:[S.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-4 tracking-wider",style:{color:w(a.status.current_state)},children:["Estado: ",a.status.current_state]}),S.jsx("p",{className:"text-sm sm:text-base text-gray-300",children:a.status.message}),S.jsxs("div",{className:"mt-4 space-y-2",children:[S.jsxs("p",{className:"text-xs sm:text-sm text-gray-400",children:["Tendencia Anual: ",S.jsxs("span",{className:"text-cyan-400 font-mono",children:[a.status.annual_trend.toFixed(1),"%"]})]}),S.jsxs("p",{className:"text-xs sm:text-sm text-gray-400",children:["Cambio Reciente: ",S.jsxs("span",{className:"text-cyan-400 font-mono",children:[a.status.recent_change.toFixed(1),"%"]})]}),S.jsxs("p",{className:"text-xs sm:text-sm text-gray-400",children:["Cambio Proyectado: ",S.jsxs("span",{className:"text-cyan-400 font-mono",children:[a.status.forecast_change.toFixed(1),"%"]})]})]})]})}),S.jsxs("div",{className:"bg-slate-800/50 p-4 sm:p-6 rounded-xl border border-cyan-900/50 backdrop-blur-xl",children:[S.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-4 text-cyan-400 tracking-wider",children:"Recomendaciones"}),S.jsx("ul",{className:"space-y-2",children:a.recommendations.map((b,A)=>S.jsxs("li",{className:"flex items-start gap-2 text-sm sm:text-base text-gray-300 hover:text-cyan-300 transition-colors",children:[S.jsx("div",{className:"mt-1 text-cyan-400",children:"•"}),b]},A))})]})]})]})]}):S.jsx("div",{className:y.gridContainer,children:n.map((b,A)=>S.jsx("button",{onClick:()=>{o(b),g(b)},className:`group p-4 sm:p-6 bg-gradient-to-br from-slate-900/90 to-black/90 rounded-xl \r
                                     border border-cyan-900/50 hover:border-cyan-500/50 transition-all duration-300 \r
                                     transform hover:-translate-y-1 backdrop-blur-xl`,style:{animation:`fadeIn 0.5s ease-out ${A*.1}s backwards`},children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("span",{className:"text-base sm:text-lg font-medium tracking-wider",children:b.name}),S.jsx(uu,{className:"text-cyan-400 transform group-hover:translate-x-1 transition-transform duration-300"})]})},b.name))});return t?S.jsx("div",{className:y.container,children:S.jsxs("div",{className:y.modal,children:[S.jsxs("div",{className:y.header,children:[S.jsxs("div",{children:[S.jsxs("h2",{className:y.title,children:[S.jsx(Bl,{className:"h-6 w-6 sm:h-8 sm:w-8 text-cyan-500"}),S.jsx("span",{className:"bg-gradient-to-r from-cyan-400 to-teal-400 text-transparent bg-clip-text",children:"Predicción de Emisiones"})]}),S.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-1 sm:mt-2",children:i?i.name:"Selecciona un país para comenzar"})]}),S.jsx("button",{onClick:e,className:"p-2 rounded-xl hover:bg-slate-800/50 transition-all duration-300 group","aria-label":"Cerrar",children:S.jsx(ho,{className:"h-5 w-5 sm:h-6 sm:w-6 text-gray-400 group-hover:text-red-400 transition-colors"})})]}),M()]})}):null},BAe="https://web-production-2cf89.up.railway.app",$Ae=({isVisible:t,onClose:e})=>{const[n,r]=V.useState(null),[i,o]=V.useState(!1),[a,s]=V.useState(null),l=Li({maxWidth:640});Li({minWidth:641,maxWidth:1024});const c={container:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 sm:p-6 md:p-8 animate-fadeIn",modal:`w-full max-w-[95vw] sm:max-w-[85vw] md:max-w-[900px] max-h-[90vh] overflow-y-auto 
                bg-gradient-to-br from-slate-900/95 to-black/95 rounded-2xl sm:rounded-3xl 
                p-4 sm:p-6 md:p-8 text-white shadow-2xl border border-cyan-900/50 animate-slideUp relative z-[10000]`,header:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6 sm:mb-8",title:"text-2xl sm:text-3xl font-bold tracking-wider",gridContainer:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6"};V.useEffect(()=>{t&&u()},[t]);const u=async()=>{o(!0),s(null);try{const v=await fetch(`${BAe}/model/predictions`);if(!v.ok)throw new Error("Error fetching predictions");const g=await v.json();r(g)}catch{s("Error loading predictions")}finally{o(!1)}},f=({title:v,children:g})=>S.jsxs("div",{className:`bg-gradient-to-br from-slate-900/90 to-black/90 p-4 sm:p-8 rounded-2xl \r
                        border border-cyan-900/50 hover:border-cyan-500/50 transition-all duration-500 \r
                        mb-4 sm:mb-6 backdrop-blur-xl shadow-lg shadow-cyan-500/20`,children:[S.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6 text-cyan-400 tracking-wider",children:v}),g]}),h=({predictions:v})=>{var g,p;return S.jsx("div",{className:"h-[300px] sm:h-[400px] w-full",children:S.jsx(Yu,{children:S.jsxs(jB,{data:(p=v==null?void 0:v.predictions)==null?void 0:p.historical.concat((g=v==null?void 0:v.predictions)==null?void 0:g.forecast),children:[S.jsx("defs",{children:S.jsxs("linearGradient",{id:"colorGlobalEmissions",x1:"0",y1:"0",x2:"0",y2:"1",children:[S.jsx("stop",{offset:"5%",stopColor:"#06b6d4",stopOpacity:.3}),S.jsx("stop",{offset:"95%",stopColor:"#06b6d4",stopOpacity:0})]})}),S.jsx(Xf,{strokeDasharray:"3 3",stroke:"#1e293b"}),S.jsx(Vo,{dataKey:"year",stroke:"#94a3b8",label:l?null:{value:"Año",position:"bottom",fill:"#94a3b8"},tick:{fontSize:l?10:12}}),S.jsx(uo,{stroke:"#94a3b8",label:l?null:{value:"Emisiones (MtCO2e)",angle:-90,position:"insideLeft",fill:"#94a3b8"},tick:{fontSize:l?10:12},width:l?40:60}),S.jsx(Lr,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.9)",border:"1px solid rgba(6, 182, 212, 0.5)",borderRadius:"0.5rem",backdropFilter:"blur(4px)",fontSize:l?"12px":"14px"}}),S.jsx(da,{wrapperStyle:{fontSize:l?"12px":"14px"}}),S.jsx(Lo,{type:"monotone",dataKey:"emissions",stroke:"#06b6d4",strokeWidth:2,fillOpacity:1,fill:"url(#colorGlobalEmissions)",name:"Emisiones Históricas"}),S.jsx(Lo,{type:"monotone",dataKey:"emissions",stroke:"#14b8a6",strokeWidth:2,fillOpacity:.3,fill:"url(#colorGlobalEmissions)",name:"Predicciones",strokeDasharray:"5 5"})]})})})},d=({metrics:v})=>S.jsx("div",{className:"bg-slate-800/50 p-4 sm:p-6 rounded-xl border border-cyan-900/50 backdrop-blur-xl",children:S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[S.jsxs("div",{children:[S.jsx("h4",{className:"text-xs sm:text-sm text-gray-400",children:"RMSE"}),S.jsx("div",{className:"text-xl sm:text-2xl font-bold text-cyan-400",children:v==null?void 0:v.rmse.toFixed(2)})]}),S.jsxs("div",{children:[S.jsx("h4",{className:"text-xs sm:text-sm text-gray-400",children:"R² Score"}),S.jsx("div",{className:"text-xl sm:text-2xl font-bold text-cyan-400",children:v==null?void 0:v.r2_score.toFixed(2)})]}),S.jsxs("div",{className:"sm:col-span-2",children:[S.jsx("h4",{className:"text-xs sm:text-sm text-gray-400",children:"Tiempo de Entrenamiento"}),S.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-cyan-400",children:[v==null?void 0:v.training_time.toFixed(2),"s"]})]})]})}),y=()=>{var v,g,p,x,_,T,w;return i?S.jsx("div",{className:"flex items-center justify-center p-8 sm:p-12",children:S.jsx("div",{className:"w-12 sm:w-16 h-12 sm:h-16 border-4 border-cyan-500/20 border-t-cyan-500 rounded-full animate-spin"})}):a?S.jsxs("div",{className:"bg-red-900/30 backdrop-blur-sm border border-red-500/50 p-4 sm:p-6 rounded-xl flex items-center gap-3",children:[S.jsx(qp,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-400"}),S.jsx("p",{className:"text-sm sm:text-base text-red-200",children:a})]}):S.jsxs(S.Fragment,{children:[S.jsx(f,{title:"Emisiones Globales",children:S.jsx(h,{predictions:n})}),S.jsxs("div",{className:c.gridContainer,children:[S.jsx(f,{title:"Métricas del Modelo",children:S.jsx(d,{metrics:n==null?void 0:n.metrics})}),S.jsx(f,{title:"Proyecciones",children:S.jsx("div",{className:"bg-slate-800/50 p-4 sm:p-6 rounded-xl border border-cyan-900/50 backdrop-blur-xl",children:S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("h4",{className:"text-xs sm:text-sm text-gray-400",children:"Emisiones Futuras Estimadas"}),S.jsx("div",{className:"max-h-[200px] overflow-y-auto pr-2",children:(v=n==null?void 0:n.predictions)==null?void 0:v.forecast.map((M,b)=>S.jsxs("div",{className:"mt-2",children:[S.jsxs("span",{className:"text-sm sm:text-base text-gray-300",children:[M.year,": "]}),S.jsxs("span",{className:"text-sm sm:text-base text-cyan-400 font-mono",children:[M.emissions.toFixed(2)," MtCO2e"]})]},b))})]}),S.jsxs("div",{className:"mt-4",children:[S.jsx("h4",{className:"text-xs sm:text-sm text-gray-400",children:"Cambio Porcentual"}),S.jsxs("div",{className:"text-lg sm:text-xl font-bold text-cyan-400",children:[((((x=(p=n==null?void 0:n.predictions)==null?void 0:p.forecast[((g=n==null?void 0:n.predictions)==null?void 0:g.forecast.length)-1])==null?void 0:x.emissions)/((w=(T=n==null?void 0:n.predictions)==null?void 0:T.historical[((_=n==null?void 0:n.predictions)==null?void 0:_.historical.length)-1])==null?void 0:w.emissions)-1)*100).toFixed(2),"%"]})]})]})})})]})]})};return t?S.jsx("div",{className:c.container,children:S.jsxs("div",{className:c.modal,children:[S.jsxs("div",{className:c.header,children:[S.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[S.jsx(Gd,{className:"h-6 w-6 sm:h-8 sm:w-8 text-cyan-500"}),S.jsx("h2",{className:`${c.title} bg-gradient-to-r from-cyan-400 to-teal-400 text-transparent bg-clip-text`,children:"Predicciones Globales de CO2"})]}),S.jsx("button",{onClick:e,className:"p-2 rounded-xl hover:bg-slate-800/50 transition-all duration-300 group","aria-label":"Cerrar",children:S.jsx(ho,{className:"h-5 w-5 sm:h-6 sm:w-6 text-gray-400 group-hover:text-red-400 transition-colors"})})]}),y()]})}):null},gu=({title:t,description:e,icon:n,className:r=""})=>{const[i,o]=V.useState(!1);return S.jsxs("div",{className:`
                relative overflow-hidden p-6 rounded-xl
                bg-gradient-to-br from-gray-900/90 to-black
                border border-gray-800/50 backdrop-blur-lg
                transform transition-all duration-500 ease-in-out
                hover:scale-102 hover:shadow-xl hover:shadow-blue-900/20
                group
                ${r}
            `,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),S.jsxs("div",{className:"relative z-10",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[S.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-gray-800/80 to-gray-900/80 group-hover:from-blue-900/20 group-hover:to-purple-900/20 transition-all duration-500",children:S.jsx(n,{className:"w-7 h-7 text-blue-400 group-hover:text-blue-300 transition-colors duration-500"})}),S.jsx("h4",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-300 group-hover:from-blue-300 group-hover:to-purple-300 transition-all duration-500",children:t})]}),S.jsx("p",{className:"text-gray-400 leading-relaxed group-hover:text-gray-300 transition-colors duration-500",children:e})]}),i&&S.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-purple-500/5 rounded-xl animate-pulse-slow"})]})},jc=({title:t,description:e,icon:n})=>S.jsx("div",{className:"group p-4 bg-gradient-to-br from-black/40 to-gray-900/40 rounded-xl border border-gray-800/50 hover:border-blue-500/30 hover:from-blue-900/10 hover:to-purple-900/10 transition-all duration-500",children:S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-gray-800/50 to-gray-900/50 group-hover:from-blue-900/30 group-hover:to-purple-900/30 transition-all duration-500",children:S.jsx(n,{className:"w-6 h-6 text-blue-400 group-hover:text-blue-300 transition-colors duration-500"})}),S.jsxs("div",{children:[S.jsx("h5",{className:"font-semibold text-blue-300 group-hover:text-blue-200 transition-colors duration-500",children:t}),S.jsx("p",{className:"text-gray-400 text-sm group-hover:text-gray-300 transition-colors duration-500",children:e})]})]})}),Db=({title:t,icon:e,demands:n})=>S.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-900/10 to-blue-900/10 hover:from-purple-900/20 hover:to-blue-900/20 rounded-xl border border-purple-500/20 hover:border-purple-500/30 transition-all duration-500 group",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[S.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-gray-800/50 to-gray-900/50 group-hover:from-purple-900/30 group-hover:to-blue-900/30 transition-all duration-500",children:S.jsx(e,{className:"w-7 h-7 text-purple-400 group-hover:text-purple-300 transition-colors duration-500"})}),S.jsx("h4",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-blue-400 group-hover:from-purple-300 group-hover:to-blue-300 transition-all duration-500",children:t})]}),S.jsx("ul",{className:"space-y-4",children:n.map((r,i)=>S.jsxs("li",{className:"flex items-center gap-3 text-gray-300 group-hover:text-gray-200 transition-colors duration-500",children:[S.jsx("span",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-purple-500 to-blue-500 group-hover:from-purple-400 group-hover:to-blue-400 transition-all duration-500"}),r]},i))})]}),on={Earth:()=>S.jsxs("div",{className:"relative w-8 h-8 group",children:[S.jsx(XJ,{className:"w-8 h-8 text-emerald-400 group-hover:text-emerald-300 transition-colors duration-500 animate-pulse",strokeWidth:1.5}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/20 to-green-500/20 rounded-full blur-xl animate-pulse-slow opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),Crisis:()=>S.jsxs("div",{className:"relative w-8 h-8 group",children:[S.jsx(Xg,{className:"w-8 h-8 text-red-400 group-hover:text-red-300 transition-colors duration-500",strokeWidth:1.5}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/20 to-orange-500/20 rounded-full blur-xl animate-pulse-slow opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),Action:()=>S.jsxs("div",{className:"relative w-8 h-8 group",children:[S.jsx(Bl,{className:"w-8 h-8 text-blue-400 group-hover:text-blue-300 transition-colors duration-500",strokeWidth:1.5}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-indigo-500/20 rounded-full blur-xl animate-pulse-slow opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),Warning:()=>S.jsxs("div",{className:"relative w-8 h-8 group",children:[S.jsx(HJ,{className:"w-8 h-8 text-purple-400 group-hover:text-purple-300 transition-colors duration-500",strokeWidth:1.5}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full blur-xl animate-pulse-slow opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),Wind:()=>S.jsxs("div",{className:"relative w-8 h-8 group",children:[S.jsx(QT,{className:"w-8 h-8 text-cyan-400 group-hover:text-cyan-300 transition-colors duration-500",strokeWidth:1.5}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 rounded-full blur-xl animate-pulse-slow opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),Leaf:()=>S.jsxs("div",{className:"relative w-8 h-8 group",children:[S.jsx(YJ,{className:"w-8 h-8 text-green-400 group-hover:text-green-300 transition-colors duration-500",strokeWidth:1.5}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/20 to-emerald-500/20 rounded-full blur-xl animate-pulse-slow opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),Cloud:()=>S.jsxs("div",{className:"relative w-8 h-8 group",children:[S.jsx(qg,{className:"w-8 h-8 text-sky-400 group-hover:text-sky-300 transition-colors duration-500",strokeWidth:1.5}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-sky-500/20 to-blue-500/20 rounded-full blur-xl animate-pulse-slow opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]})},zAe=[{id:"purpose",icon:on.Earth,label:"Misión Global",color:"from-emerald-600 to-green-800",gradient:"from-emerald-900/50 to-green-900/50",hoverGradient:"group-hover:from-emerald-800/60 group-hover:to-green-800/60",bgGlow:"from-emerald-500/10 to-green-500/10",textGradient:"from-emerald-400 to-green-300"},{id:"crisis",icon:on.Crisis,label:"Crisis Climática",color:"from-red-600 to-orange-700",gradient:"from-red-900/50 to-orange-900/50",hoverGradient:"group-hover:from-red-800/60 group-hover:to-orange-800/60",bgGlow:"from-red-500/10 to-orange-500/10",textGradient:"from-red-400 to-orange-300"},{id:"action",icon:on.Action,label:"Acción Ciudadana",color:"from-blue-600 to-indigo-800",gradient:"from-blue-900/50 to-indigo-900/50",hoverGradient:"group-hover:from-blue-800/60 group-hover:to-indigo-800/60",bgGlow:"from-blue-500/10 to-indigo-500/10",textGradient:"from-blue-400 to-indigo-300"},{id:"demands",icon:on.Warning,label:"Exigencias",color:"from-purple-600 to-pink-700",gradient:"from-purple-900/50 to-pink-900/50",hoverGradient:"group-hover:from-purple-800/60 group-hover:to-pink-800/60",bgGlow:"from-purple-500/10 to-pink-500/10",textGradient:"from-purple-400 to-pink-300"}],HAe=({section:t,isActive:e,onClick:n})=>S.jsxs("button",{onClick:n,className:`
            relative group flex items-center gap-3 px-6 py-3 rounded-xl
            transition-all duration-500 ease-in-out
            ${e?`bg-gradient-to-r ${t.color} scale-105 shadow-lg shadow-${t.color}/20`:"bg-gradient-to-r from-gray-800/50 to-gray-900/50 hover:from-gray-800/70 hover:to-gray-900/70"}
        `,children:[S.jsx(t.icon,{}),S.jsx("span",{className:`
            font-medium whitespace-nowrap
            ${e?"text-white":"text-gray-300 group-hover:text-white"}
            transition-colors duration-500
        `,children:t.label}),e&&S.jsx("div",{className:`
                absolute inset-0 bg-gradient-to-r ${t.bgGlow}
                rounded-xl blur-xl animate-pulse-slow
            `})]}),GAe=({onClick:t})=>S.jsx("button",{onClick:t,className:"p-3 rounded-xl bg-gradient-to-br from-gray-800/50 to-gray-900/50 hover:from-red-900/50 hover:to-red-800/50 transition-all duration-500 group",children:S.jsx(ho,{className:"w-6 h-6 text-gray-400 group-hover:text-red-300 transition-colors duration-500"})}),xL=()=>S.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[S.jsx("h3",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-green-300 leading-tight sm:text-5xl",children:"Nuestra Misión por el Planeta"}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[S.jsx(gu,{title:"Visualización de Impacto",description:"Análisis en tiempo real de las emisiones globales y visualización de datos climáticos para crear conciencia sobre la crisis ambiental actual.",icon:on.Earth,className:"border-emerald-500/20 hover:border-emerald-500/30"}),S.jsx(gu,{title:"Educación Ambiental",description:"Información actualizada y accesible sobre el cambio climático, sus efectos en ecosistemas y comunidades, y soluciones prácticas.",icon:on.Cloud,className:"border-emerald-500/20 hover:border-emerald-500/30"}),S.jsx(gu,{title:"Movilización Global",description:"Red global de activistas y organizaciones unidas por la justicia climática, facilitando la colaboración y el impacto colectivo.",icon:on.Action,className:"border-emerald-500/20 hover:border-emerald-500/30"}),S.jsx(gu,{title:"Soluciones Climáticas",description:"Propuestas innovadoras para la reducción de emisiones y transición energética, adaptadas a diferentes contextos y necesidades.",icon:on.Leaf,className:"border-emerald-500/20 hover:border-emerald-500/30"})]})]}),WAe=()=>S.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[S.jsx("h3",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-red-400 to-orange-300 leading-tight sm:text-5xl",children:"Crisis Climática: Tiempo de Actuar"}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[S.jsx("div",{className:"lg:col-span-2",children:S.jsxs("div",{className:"bg-gradient-to-br from-black/60 to-red-950/30 p-8 rounded-xl border border-red-500/30 space-y-6 hover:from-black/70 hover:to-red-950/40 transition-all duration-500",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx(on.Crisis,{}),S.jsx("h4",{className:"text-3xl font-bold text-red-400",children:"Punto Crítico Global"})]}),S.jsxs("div",{className:"relative overflow-hidden rounded-xl aspect-video bg-gradient-to-br from-gray-900/80 to-black",children:[S.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:S.jsxs("div",{className:"text-center space-y-4",children:[S.jsx("div",{className:"text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-orange-500",children:"1.5°C"}),S.jsx("div",{className:"text-xl text-gray-400",children:"Límite crítico de calentamiento global"}),S.jsx("div",{className:"mt-4 max-w-lg mx-auto text-gray-300",children:"Estamos al borde de un punto sin retorno. Las emisiones actuales nos dirigen hacia un calentamiento catastrófico si no actuamos de inmediato."})]})}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"})]})]})}),S.jsxs("div",{className:"space-y-6",children:[S.jsx(gu,{title:"Impacto Global",description:"Los efectos son ya evidentes: eventos climáticos extremos, pérdida acelerada de biodiversidad y riesgos crecientes para millones de personas.",icon:on.Earth,className:"border-red-500/20 hover:border-red-500/30"}),S.jsx(gu,{title:"Urgencia Inmediata",description:"La comunidad científica advierte que la próxima década es crucial para implementar cambios sistémicos y evitar daños irreversibles.",icon:on.Warning,className:"border-red-500/20 hover:border-red-500/30"})]})]})]}),qAe=()=>S.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[S.jsx("h3",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-indigo-300 leading-tight sm:text-5xl",children:"Acción Climática: El Poder del Cambio"}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[S.jsxs("div",{className:"bg-gradient-to-br from-black/60 to-blue-950/30 p-8 rounded-xl border border-blue-500/30 hover:from-black/70 hover:to-blue-950/40 transition-all duration-500",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[S.jsx(on.Wind,{}),S.jsx("h4",{className:"text-2xl font-bold text-blue-400",children:"Acciones Individuales"})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx(jc,{title:"Huella de Carbono",description:"Monitorea y reduce tu impacto ambiental personal mediante cambios conscientes.",icon:on.Leaf}),S.jsx(jc,{title:"Movilidad Sostenible",description:"Prioriza opciones de transporte eco-amigables y reduce emisiones en tus desplazamientos.",icon:on.Wind}),S.jsx(jc,{title:"Consumo Responsable",description:"Adopta hábitos de consumo consciente y apoya productos y servicios sostenibles.",icon:on.Earth})]})]}),S.jsxs("div",{className:"bg-gradient-to-br from-black/60 to-indigo-950/30 p-8 rounded-xl border border-indigo-500/30 hover:from-black/70 hover:to-indigo-950/40 transition-all duration-500",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[S.jsx(on.Action,{}),S.jsx("h4",{className:"text-2xl font-bold text-indigo-400",children:"Acción Comunitaria"})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx(jc,{title:"Activismo Climático",description:"Únete a movimientos locales y globales que luchan por la justicia climática.",icon:on.Crisis}),S.jsx(jc,{title:"Educación y Conciencia",description:"Comparte conocimiento y motiva a otros a unirse a la causa ambiental.",icon:on.Cloud}),S.jsx(jc,{title:"Iniciativas Locales",description:"Participa en proyectos comunitarios de sostenibilidad y regeneración ambiental.",icon:on.Earth})]})]})]}),S.jsxs("div",{className:"relative mt-8 p-8 bg-gradient-to-br from-black/60 to-blue-950/30 rounded-xl border border-blue-500/30 hover:from-black/70 hover:to-blue-950/40 transition-all duration-500",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[S.jsx(on.Action,{}),S.jsx("h4",{className:"text-2xl font-bold text-blue-400",children:"Impacto Global del Movimiento"})]}),S.jsxs("div",{className:"aspect-video bg-gradient-to-br from-gray-900/80 to-black rounded-xl overflow-hidden relative",children:[S.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:S.jsxs("div",{className:"text-center space-y-4",children:[S.jsx("div",{className:"text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-indigo-500 animate-pulse",children:"2.1M+"}),S.jsx("div",{className:"text-xl text-gray-400",children:"Activistas Unidos por el Clima"})]})}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"})]})]})]}),XAe=()=>S.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[S.jsx("h3",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-300 leading-tight sm:text-5xl",children:"Exigencias para el Cambio"}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[S.jsx(Db,{title:"Para Gobiernos",icon:on.Warning,demands:["Declaración inmediata de emergencia climática global","Transición completa a energías renovables para 2035","Eliminación de subsidios a combustibles fósiles","Implementación de leyes estrictas de protección ambiental","Inversión en infraestructura verde y resiliente"]}),S.jsx(Db,{title:"Para Empresas",icon:on.Crisis,demands:["Compromiso de neutralidad de carbono para 2030","Transparencia total en emisiones y impacto ambiental","Inversión significativa en tecnologías limpias","Transformación hacia cadenas de suministro sostenibles","Priorización de la economía circular"]}),S.jsx(Db,{title:"Para Instituciones",icon:on.Leaf,demands:["Desinversión completa de combustibles fósiles","Integración de educación climática en programas","Impulso a la investigación en soluciones verdes","Adopción de políticas de cero residuos","Promoción de prácticas sostenibles"]})]}),S.jsx("div",{className:"mt-8 p-8 bg-gradient-to-br from-black/60 to-purple-950/30 rounded-xl border border-purple-500/30 hover:from-black/70 hover:to-purple-950/40 transition-all duration-500",children:S.jsxs("div",{className:"text-center space-y-6",children:[S.jsx("div",{className:"flex justify-center mb-4",children:S.jsx(on.Earth,{})}),S.jsx("h4",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-300",children:"El Momento de Actuar es Ahora"}),S.jsx("p",{className:"text-gray-300 max-w-3xl mx-auto text-lg leading-relaxed",children:"Cada voz cuenta, cada acción suma en la lucha contra el cambio climático. Unidos podemos crear el cambio que nuestro planeta necesita para las generaciones presentes y futuras."})]})})]}),KAe=({isVisible:t,onClose:e})=>{const[n,r]=V.useState("purpose"),[i,o]=V.useState(!1);if(V.useEffect(()=>(t&&(o(!0),document.body.style.overflow="hidden"),()=>{document.body.style.overflow="unset"}),[t]),!t)return null;const a=()=>{switch(n){case"purpose":return S.jsx(xL,{});case"crisis":return S.jsx(WAe,{});case"action":return S.jsx(qAe,{});case"demands":return S.jsx(XAe,{});default:return S.jsx(xL,{})}};return S.jsxs("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-xl z-50",children:[S.jsx("div",{className:"h-full overflow-y-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-gray-800",children:S.jsx("div",{className:"container mx-auto p-4",children:S.jsxs("div",{className:"w-full max-w-7xl mx-auto bg-gradient-to-br from-gray-900 to-black rounded-2xl overflow-hidden shadow-2xl border border-gray-800/50",children:[S.jsxs("div",{className:"sticky top-0 z-20 bg-gradient-to-br from-gray-900 to-black border-b border-gray-800/50",children:[S.jsxs("div",{className:"relative p-6 md:p-8 overflow-hidden",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5 animate-pulse-slow"}),S.jsxs("div",{className:"relative z-10 flex justify-between items-center",children:[S.jsxs("div",{className:"flex items-center gap-6",children:[S.jsx(on.Earth,{}),S.jsxs("div",{children:[S.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-300 to-purple-300",children:"Acción por el Clima"}),S.jsx("p",{className:"text-gray-400 mt-2",children:"Unidos por un futuro sostenible"})]})]}),S.jsx(GAe,{onClick:e})]})]}),S.jsx("div",{className:"flex gap-3 p-4 bg-black/50 overflow-x-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-gray-800",children:zAe.map(s=>S.jsx(HAe,{section:s,isActive:n===s.id,onClick:()=>r(s.id)},s.id))})]}),S.jsx("div",{className:"p-6 md:p-8",children:a()})]})})}),S.jsx("style",{children:`
    .scrollbar-thin::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }

    .scrollbar-thin::-webkit-scrollbar-track {
        background: transparent;
    }

    .scrollbar-thin::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 3px;
    }

    .scrollbar-thin::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.2);
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes pulse-slow {
        0%, 100% {
            opacity: 1;
        }
        50% {
            opacity: 0.5;
        }
    }

    .animate-fadeIn {
        animation: fadeIn 0.5s ease-out forwards;
    }

    .animate-pulse-slow {
        animation: pulse-slow 3s ease-in-out infinite;
    }
`})]})},YAe=({title:t,description:e,icon:n,className:r=""})=>{const[i,o]=V.useState(!1);return S.jsxs("div",{className:`
                relative overflow-hidden p-6 rounded-xl
                bg-gradient-to-br from-gray-900/90 to-black
                border border-gray-800/50 backdrop-blur-lg
                transform transition-all duration-500 ease-in-out
                hover:scale-102 hover:shadow-xl hover:shadow-blue-900/20
                group
                ${r}
            `,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),S.jsxs("div",{className:"relative z-10",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[S.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-gray-800/80 to-gray-900/80 group-hover:from-blue-900/20 group-hover:to-purple-900/20 transition-all duration-500",children:S.jsx(n,{className:"w-6 h-6 text-blue-400 group-hover:text-blue-300 transition-colors duration-500"})}),S.jsx("h3",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-300 group-hover:from-blue-300 group-hover:to-purple-300 transition-all duration-500",children:t})]}),S.jsx("p",{className:"text-gray-400 leading-relaxed group-hover:text-gray-300 transition-colors duration-500",children:e})]}),i&&S.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-purple-500/5 rounded-xl animate-pulse-slow"})]})},QAe=({value:t,onChange:e})=>S.jsxs("div",{className:"relative group",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-900/20 to-purple-900/20 rounded-xl blur-sm opacity-75 group-hover:opacity-100 transition duration-300"}),S.jsxs("div",{className:"relative flex items-center",children:[S.jsx("input",{type:"text",placeholder:"Buscar términos...",value:t,onChange:e,className:`w-full px-12 py-4 bg-gradient-to-br from-gray-900 to-black rounded-xl \r
                          border border-gray-800/50 text-gray-300 placeholder-gray-500\r
                          focus:outline-none focus:border-blue-500/50 focus:ring-2 focus:ring-blue-500/20\r
                          transition-all duration-300`}),S.jsx("div",{className:"absolute left-4 text-gray-500",children:S.jsx(ree,{className:"w-5 h-5"})})]})]}),ZAe=({active:t,onClick:e,icon:n,label:r,gradient:i})=>S.jsxs("button",{onClick:e,className:`
            relative group flex items-center gap-3 px-6 py-3 rounded-xl
            transition-all duration-500 ease-in-out whitespace-nowrap
            ${t?`bg-gradient-to-r ${i} scale-105 shadow-lg`:"bg-gradient-to-br from-gray-900 to-black hover:from-gray-800 hover:to-gray-900"}
        `,children:[S.jsx(n,{className:`w-5 h-5 ${t?"text-white":"text-gray-400 group-hover:text-white"} transition-colors duration-300`}),S.jsx("span",{className:`font-medium ${t?"text-white":"text-gray-400 group-hover:text-white"} transition-colors duration-300`,children:r}),t&&S.jsx("div",{className:"absolute inset-0 bg-white/10 rounded-xl animate-pulse-slow"})]}),Lb={general:{icon:YT,title:"Conceptos Generales",gradient:"from-emerald-600 to-green-800",hoverGradient:"group-hover:from-emerald-800/60 group-hover:to-green-800/60",bgGlow:"from-emerald-500/10 to-green-500/10",textGradient:"from-emerald-400 to-green-300",items:[{title:"Carbon Majors Database",description:"Base de datos integral que monitorea y rastrea las emisiones globales de gases de efecto invernadero desde 1854, vinculándolas directamente con las empresas responsables de su producción.",icon:Fc,color:"emerald"},{title:"Gases de Efecto Invernadero",description:"Conjunto de gases atmosféricos que retienen el calor y son los principales responsables del cambio climático. Incluyen dióxido de carbono (CO2), metano (CH4), óxido nitroso (N2O) y otros.",icon:qg,color:"emerald"},{title:"MtCO2e",description:"Medida estandarizada que representa Millones de toneladas de CO2 equivalente. Permite comparar el impacto de diferentes gases de efecto invernadero en una única escala.",icon:Fc,color:"emerald"}]},empresas:{icon:Vc,title:"Tipos de Empresas",gradient:"from-blue-600 to-indigo-800",hoverGradient:"group-hover:from-blue-800/60 group-hover:to-indigo-800/60",bgGlow:"from-blue-500/10 to-indigo-500/10",textGradient:"from-blue-400 to-indigo-300",items:[{title:"Empresas Privadas",description:"Corporaciones de propiedad privada que participan en la extracción, producción y distribución de combustibles fósiles. Su principal objetivo es maximizar el retorno para los accionistas.",icon:Vc,color:"blue"},{title:"Empresas Estatales",description:"Compañías donde el estado mantiene una participación mayoritaria (>50%). Estas entidades suelen tener objetivos tanto comerciales como de política pública nacional.",icon:Vc,color:"blue"},{title:"Productores Nacionales",description:"Entidades directamente controladas por gobiernos nacionales, especialmente comunes en el sector del carbón. Operan bajo directrices estatales específicas.",icon:Vc,color:"blue"}]},datos:{icon:Fc,title:"Fuentes de Datos",gradient:"from-purple-600 to-pink-700",hoverGradient:"group-hover:from-purple-800/60 group-hover:to-pink-800/60",bgGlow:"from-purple-500/10 to-pink-500/10",textGradient:"from-purple-400 to-pink-300",items:[{title:"Datos Autorreportados",description:"Información directamente proporcionada por las empresas a través de sus informes anuales, informes de sostenibilidad y documentación oficial corporativa.",icon:Fc,color:"purple"},{title:"Fuentes Externas",description:"Datos obtenidos de agencias especializadas como la EIA, Oil & Gas Journal, y otras fuentes confiables cuando no hay datos directos disponibles.",icon:zF,color:"purple"},{title:"Verificación y Validación",description:"Proceso riguroso de validación que combina múltiples fuentes y metodologías estandarizadas para asegurar la precisión y confiabilidad de los datos.",icon:Fc,color:"purple"}]},emisiones:{icon:Xg,title:"Tipos de Emisiones",gradient:"from-red-600 to-orange-700",hoverGradient:"group-hover:from-red-800/60 group-hover:to-orange-800/60",bgGlow:"from-red-500/10 to-orange-500/10",textGradient:"from-red-400 to-orange-300",items:[{title:"Emisiones Directas (Scope 1)",description:"Emisiones generadas directamente por las operaciones y actividades controladas por la empresa, incluyendo la producción, procesamiento y transporte.",icon:Xg,color:"red"},{title:"Emisiones Indirectas (Scope 3)",description:"Emisiones resultantes del uso final de los productos vendidos por la empresa, representando a menudo la mayor parte del impacto climático total.",icon:qg,color:"red"},{title:"Emisiones Fugitivas",description:"Liberaciones no intencionales de gases durante los procesos de extracción, procesamiento y transporte, incluyendo fugas y venteos.",icon:qg,color:"red"}]},combustibles:{icon:gO,title:"Combustibles",gradient:"from-amber-600 to-orange-700",hoverGradient:"group-hover:from-amber-800/60 group-hover:to-orange-800/60",bgGlow:"from-amber-500/10 to-orange-500/10",textGradient:"from-amber-400 to-orange-300",items:[{title:"Petróleo y GNL",description:"Medido en barriles. Incluye petróleo crudo y líquidos de gas natural. Principal fuente de combustible para el transporte global.",icon:gO,color:"amber"},{title:"Gas Natural",description:"Medido en pies cúbicos. Fuente crucial para la generación eléctrica y calefacción industrial. Considerado más limpio que otros combustibles fósiles.",icon:Xg,color:"amber"},{title:"Carbón",description:"Medido en toneladas. Incluye carbón térmico y metalúrgico. Sigue siendo una fuente significativa de energía en muchos países en desarrollo.",icon:Vc,color:"amber"}]}},JAe=(t,e)=>Object.entries(t).reduce((n,[r,i])=>{const o=i.items.filter(a=>a.title.toLowerCase().includes(e.toLowerCase())||a.description.toLowerCase().includes(e.toLowerCase()));return o.length>0&&(n[r]={...i,items:o,matchCount:o.length}),n},{}),eMe=({searchTerm:t,onSearchChange:e,onClose:n})=>S.jsxs("div",{className:"relative p-6 bg-gradient-to-br from-gray-900 to-black border-b border-gray-800/50",children:[S.jsx("div",{className:"absolute inset-0 bg-blue-500/5 animate-pulse-slow"}),S.jsxs("div",{className:"relative flex items-center justify-between mb-6",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-600/20 to-purple-600/20 rounded-xl backdrop-blur-sm",children:S.jsx(YT,{className:"w-7 h-7 text-blue-400"})}),S.jsxs("div",{children:[S.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-400",children:"Diccionario de Carbono"}),S.jsx("p",{className:"text-gray-400 mt-1",children:"Guía completa de términos y conceptos"})]})]}),S.jsx("button",{onClick:n,className:"p-3 rounded-xl bg-gradient-to-br from-gray-800/50 to-gray-900/50 hover:from-red-900/50 hover:to-red-800/50 transition-all duration-300 group",children:S.jsx(ho,{className:"w-6 h-6 text-gray-400 group-hover:text-red-300 transition-colors duration-300"})})]}),S.jsx(QAe,{value:t,onChange:e})]}),tMe=({activeSection:t,setActiveSection:e,sections:n})=>S.jsx("div",{className:"overflow-x-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-gray-800",children:S.jsx("div",{className:"flex gap-2 p-4 bg-black/50",children:Object.entries(n).map(([r,i])=>S.jsx(ZAe,{active:t===r,onClick:()=>e(r),icon:i.icon,label:i.title,gradient:i.gradient},r))})}),nMe=({section:t,animateCards:e})=>S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:t.items.map((n,r)=>S.jsx(YAe,{title:n.title,description:n.description,icon:n.icon,className:`
                    transform transition-all duration-500
                    ${e?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}
                    border-${n.color}-500/20 hover:border-${n.color}-500/30
                `,style:{transitionDelay:`${r*100}ms`}},`${n.title}-${r}`))}),rMe=()=>S.jsx("div",{className:"p-4 bg-gradient-to-br from-gray-900 to-black border-t border-gray-800/50",children:S.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[S.jsxs("span",{className:"flex items-center gap-2",children:[S.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 animate-pulse"}),"Actualizado 2024"]}),S.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-400",children:"Carbon Majors Database"})]})}),iMe=()=>S.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center p-6",children:[S.jsx(Fc,{className:"w-16 h-16 text-gray-600 mb-4"}),S.jsx("h3",{className:"text-xl font-bold text-gray-400 mb-2",children:"No se encontraron resultados"}),S.jsx("p",{className:"text-gray-500 max-w-md",children:"Intenta buscar con otros términos o navega por las categorías disponibles"})]}),oMe=()=>S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:[...Array(6)].map((t,e)=>S.jsx("div",{className:`h-48 rounded-xl bg-gradient-to-br from-gray-900/90 to-black\r
                         border border-gray-800/50 animate-pulse`},e))}),aMe=({isVisible:t,onClose:e})=>{const[n,r]=V.useState("general"),[i,o]=V.useState(""),[a,s]=V.useState(!1);if(V.useEffect(()=>(t&&(s(!0),document.body.style.overflow="hidden"),()=>{document.body.style.overflow="unset"}),[t]),!t)return null;const l=JAe(Lb,i),c=i?l[n]:Lb[n];return S.jsxs("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-xl z-50",children:[S.jsx("div",{className:"h-full overflow-hidden",children:S.jsx("div",{className:"container mx-auto p-4",children:S.jsxs("div",{className:"w-full max-w-7xl mx-auto bg-gradient-to-br from-gray-900 to-black rounded-2xl overflow-hidden shadow-2xl border border-gray-800/50",children:[S.jsx(eMe,{searchTerm:i,onSearchChange:u=>o(u.target.value),onClose:e}),S.jsx(tMe,{activeSection:n,setActiveSection:r,sections:Lb}),S.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-300px)] scrollbar-thin scrollbar-track-transparent scrollbar-thumb-gray-800",children:c?S.jsx(nMe,{section:c,animateCards:a}):i?S.jsx(iMe,{}):S.jsx(oMe,{})}),S.jsx(rMe,{})]})})}),S.jsx("style",{children:`
                    .scrollbar-thin::-webkit-scrollbar {
                        width: 6px;
                        height: 6px;
                    }

                    .scrollbar-thin::-webkit-scrollbar-track {
                        background: transparent;
                    }

                    .scrollbar-thin::-webkit-scrollbar-thumb {
                        background: rgba(255, 255, 255, 0.1);
                        border-radius: 3px;
                    }

                    .scrollbar-thin::-webkit-scrollbar-thumb:hover {
                        background: rgba(255, 255, 255, 0.2);
                    }

                    @keyframes fadeIn {
                        from {
                            opacity: 0;
                            transform: translateY(10px);
                        }
                        to {
                            opacity: 1;
                            transform: translateY(0);
                        }
                    }

                    @keyframes pulse-slow {
                        0%, 100% {
                            opacity: 1;
                        }
                        50% {
                            opacity: 0.5;
                        }
                    }

                    .animate-fadeIn {
                        animation: fadeIn 0.5s ease-out forwards;
                    }

                    .animate-pulse-slow {
                        animation: pulse-slow 3s ease-in-out infinite;
                    }
                `})]})},sMe="/EmissionsPage/sounds/mixkit-relaxing-harp-sweep-2628.mp3",lMe=({onComplete:t})=>{const[e,n]=V.useState(!1),[r,i]=V.useState(!1),[o,a]=V.useState(!1),[s,l]=V.useState(!1),[c,u]=V.useState(!1),[f,h]=V.useState(!1),d=V.useRef(null),y=V.useRef(null),v=V.useRef(null),g=V.useRef(null),p=async()=>{try{const _=new Audio(sMe);g.current=_,_.preload="auto",_.volume=.5,_.onerror=T=>{var w,M;console.error("Error loading audio:",T),console.error("Error code:",(w=_.error)==null?void 0:w.code),console.error("Error message:",(M=_.error)==null?void 0:M.message),u(!0)},_.oncanplaythrough=async()=>{try{await _.play(),console.log("Audio playing successfully")}catch(T){if(console.error("Play error:",T),T.name==="NotAllowedError"){const w=async()=>{try{await _.play(),document.removeEventListener("click",w)}catch(M){console.error("Retry play error:",M)}};document.addEventListener("click",w)}}}}catch(_){console.error("Audio setup error:",_),u(!0)}},x=()=>{l(!0),n(!0),p().catch(console.error),setTimeout(()=>{i(!0)},1e3),setTimeout(()=>{a(!0),setTimeout(()=>{n(!1),t()},1e3)},5e3)};return V.useEffect(()=>()=>{g.current&&(g.current.pause(),g.current=null)},[]),V.useEffect(()=>{var k;if(!e)return;let _;const T=new iU,w=new si(75,window.innerWidth/window.innerHeight,.1,1e3),M=new dT({alpha:!0,antialias:!0});M.setSize(window.innerWidth,window.innerHeight),M.setPixelRatio(Math.min(window.devicePixelRatio,2)),(k=d.current)==null||k.appendChild(M.domElement);const b=new ba({uniforms:{time:{value:0},progress:{value:0},noiseScale:{value:5}},vertexShader:`
        uniform float time;
        uniform float progress;
        varying vec2 vUv;
        varying vec3 vNormal;
        varying vec3 vPosition;
        
        vec3 mod289(vec3 x) {
          return x - floor(x * (1.0 / 289.0)) * 289.0;
        }
        vec4 mod289(vec4 x) {
          return x - floor(x * (1.0 / 289.0)) * 289.0;
        }
        vec4 permute(vec4 x) {
          return mod289(((x*34.0)+1.0)*x);
        }
        vec4 taylorInvSqrt(vec4 r) {
          return 1.79284291400159 - 0.85373472095314 * r;
        }
        vec3 fade(vec3 t) {
          return t*t*t*(t*(t*6.0-15.0)+10.0);
        }

        float noise(vec3 P) {
          vec3 i0 = mod289(floor(P));
          vec3 i1 = mod289(i0 + vec3(1.0));
          vec3 f0 = fract(P);
          vec3 f1 = f0 - vec3(1.0);
          vec3 f = fade(f0);
          vec4 ix = vec4(i0.x, i1.x, i0.x, i1.x);
          vec4 iy = vec4(i0.yy, i1.yy);
          vec4 iz0 = i0.zzzz;
          vec4 iz1 = i1.zzzz;
          vec4 ixy = permute(permute(ix) + iy);
          vec4 ixy0 = permute(ixy + iz0);
          vec4 ixy1 = permute(ixy + iz1);
          vec4 gx0 = ixy0 * (1.0 / 7.0);
          vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
          gx0 = fract(gx0);
          vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
          vec4 sz0 = step(gz0, vec4(0.0));
          gx0 -= sz0 * (step(0.0, gx0) - 0.5);
          gy0 -= sz0 * (step(0.0, gy0) - 0.5);
          vec4 gx1 = ixy1 * (1.0 / 7.0);
          vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
          gx1 = fract(gx1);
          vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
          vec4 sz1 = step(gz1, vec4(0.0));
          gx1 -= sz1 * (step(0.0, gx1) - 0.5);
          gy1 -= sz1 * (step(0.0, gy1) - 0.5);
          vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
          vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
          vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
          vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
          vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
          vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
          vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
          vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
          vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
          g000 *= norm0.x;
          g010 *= norm0.y;
          g100 *= norm0.z;
          g110 *= norm0.w;
          vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
          g001 *= norm1.x;
          g011 *= norm1.y;
          g101 *= norm1.z;
          g111 *= norm1.w;
          float n000 = dot(g000, f0);
          float n100 = dot(g100, vec3(f1.x, f0.yz));
          float n010 = dot(g010, vec3(f0.x, f1.y, f0.z));
          float n110 = dot(g110, vec3(f1.xy, f0.z));
          float n001 = dot(g001, vec3(f0.xy, f1.z));
          float n101 = dot(g101, vec3(f1.x, f0.y, f1.z));
          float n011 = dot(g011, vec3(f0.x, f1.yz));
          float n111 = dot(g111, f1);
          vec3 fade_xyz = fade(f0);
          vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
          vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
          float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
          return 2.2 * n_xyz;
        }
        
        void main() {
          vUv = uv;
          vNormal = normalize(normalMatrix * normal);
          vPosition = position;
          
          vec3 pos = position;
          float noiseValue = noise(pos * 0.1 + time * 0.2);
          
          float displacement = sin(time * 2.0 + noiseValue * 5.0) * 0.2;
          pos += normal * displacement * progress;
          
          float bounce = sin(progress * 3.14159) * (1.0 - progress) * 0.3;
          pos *= mix(0.0, 1.0 + bounce, progress);
          
          gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
        }
      `,fragmentShader:`
        uniform float time;
        uniform float progress;
        uniform float noiseScale;
        varying vec2 vUv;
        varying vec3 vNormal;
        varying vec3 vPosition;
        
        void main() {
          vec3 baseColor = vec3(0.133, 0.694, 0.298);
          vec3 highlightColor = vec3(0.831, 0.976, 0.839);
          vec3 accentColor = vec3(0.047, 0.416, 0.137);
          
          float fresnel = pow(1.0 - dot(vNormal, vec3(0.0, 0.0, 1.0)), 3.0);
          
          float pattern1 = sin(vPosition.x * noiseScale + time * 2.0) * 
                          sin(vPosition.y * noiseScale + time * 1.5) * 
                          sin(vPosition.z * noiseScale + time);
          
          float pattern2 = cos(vPosition.x * noiseScale * 0.5 - time) * 
                          cos(vPosition.y * noiseScale * 0.5 - time * 1.2);
          
          float pulse1 = (sin(time * 2.0) * 0.5 + 0.5) * 0.2;
          float pulse2 = (sin(time * 3.0 + pattern1) * 0.5 + 0.5) * 0.15;
          
          vec3 color1 = mix(baseColor, highlightColor, fresnel + pulse1);
          vec3 color2 = mix(color1, accentColor, pattern1 * 0.5 + pattern2 * 0.3);
          vec3 finalColor = mix(color2, highlightColor, fresnel * pulse2);
          
          float rainbow = sin(vPosition.x * 2.0 + time) * 0.1;
          finalColor += vec3(rainbow, rainbow * 0.5, -rainbow) * (1.0 - fresnel);
          
          float opacity = progress * (1.0 + fresnel * 0.5);
          
          gl_FragColor = vec4(finalColor, opacity);
        }
      `,transparent:!0}),A=new ml(5,128,128),E=new Gr(A,b);y.current=E,T.add(E),w.position.z=15;const P=new lU(w,M.domElement);v.current=P,P.enableDamping=!0,P.dampingFactor=.05,P.rotateSpeed=.5,P.enableZoom=!1,P.enablePan=!1,P.autoRotate=!0,P.autoRotateSpeed=1,E.rotation.x=.4;let R=0,N=0;const O=()=>{_=requestAnimationFrame(O),R+=.01,N<1&&(N+=.02,b.uniforms.progress.value=Bj.smoothstep(N,0,1)),b.uniforms.time.value=R,b.uniforms.noiseScale.value=5+Math.sin(R)*2,E.rotation.y+=.003,P.update(),M.render(T,w)};O();const D=()=>{w.aspect=window.innerWidth/window.innerHeight,w.updateProjectionMatrix(),M.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",D),()=>{var H;cancelAnimationFrame(_),window.removeEventListener("resize",D),(H=d.current)==null||H.removeChild(M.domElement)}},[e,t]),s?e?S.jsxs("div",{className:`fixed inset-0 z-50 bg-gradient-to-b from-[#E7F0DC]/90 to-[#597445]/90 
        transition-opacity duration-1000 ${o?"opacity-0":"opacity-100"}`,children:[S.jsx("div",{ref:d,className:"absolute inset-0"}),S.jsxs("div",{className:`absolute inset-0 flex flex-col items-center justify-center
          transition-all duration-1000 ease-out
          ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}
          ${o?"opacity-0 scale-95":""}`,children:[S.jsx("h1",{className:"text-6xl font-bold text-[#2A3B1F] mb-6 tracking-wide animate-float",children:"EcoSphere"}),S.jsx("p",{className:"text-2xl text-[#2A3B1F]/90 mb-12 max-w-md text-center animate-float-delayed",children:"Explora el impacto ambiental global"}),S.jsx("div",{className:"flex gap-8",children:[WF,Bl,QT,hw].map((_,T)=>S.jsx(_,{className:`w-8 h-8 text-[#2A3B1F] transition-all duration-300
                hover:scale-110 hover:text-[#2A3B1F]/80
                animate-bounce-in
                ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,style:{transitionDelay:`${T*100}ms`,animationDelay:`${T*150}ms`}},T))})]})]}):null:S.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-b from-[#E7F0DC]/90 to-[#597445]/90",children:S.jsxs("button",{onClick:x,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),className:`
            group relative overflow-hidden
            flex items-center gap-3 px-8 py-4 
            text-xl font-bold text-white
            bg-[#2A3B1F] rounded-xl
            transition-all duration-500 ease-out
            transform hover:scale-105
            ${f?"shadow-lg shadow-[#2A3B1F]/30":""}
          `,children:[S.jsx("div",{className:`
            absolute inset-0 bg-gradient-to-r from-[#3da063] via-[#2A3B1F] to-[#3da063] opacity-0
            group-hover:opacity-100 transition-opacity duration-500
            bg-[length:200%_100%] animate-shimmer
          `}),S.jsxs("div",{className:"relative flex items-center gap-3",children:[S.jsx(hw,{className:`
              w-6 h-6 transition-transform duration-500
              ${f?"scale-110 rotate-12":""}
            `}),S.jsx("span",{className:`
              transform transition-all duration-500
              ${f?"translate-x-1":""}
            `,children:"Iniciar Experiencia"})]}),S.jsx("div",{className:`
            absolute inset-0 pointer-events-none
            opacity-0 group-hover:opacity-100
            transition-opacity duration-500
          `,children:[...Array(3)].map((_,T)=>S.jsx("div",{className:`
                  absolute w-1 h-1 bg-white rounded-full
                  animate-particle opacity-75
                `,style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${T*.2}s`}},T))})]})})};var bL={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},cMe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],a=t[n++],s=t[n++],l=((i&7)<<18|(o&63)<<12|(a&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},VB={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],a=i+1<t.length,s=a?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=o>>2,f=(o&3)<<4|s>>4;let h=(s&15)<<2|c>>6,d=c&63;l||(d=64,a||(h=64)),r.push(n[u],n[f],n[h],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(FB(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):cMe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||s==null||c==null||f==null)throw new uMe;const h=o<<2|s>>4;if(r.push(h),c!==64){const d=s<<4&240|c>>2;if(r.push(d),f!==64){const y=c<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uMe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fMe=function(t){const e=FB(t);return VB.encodeByteArray(e,!0)},zy=function(t){return fMe(t).replace(/\./g,"")},hMe=function(t){try{return VB.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dMe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pMe=()=>dMe().__FIREBASE_DEFAULTS__,mMe=()=>{if(typeof process>"u"||typeof bL>"u")return;const t=bL.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gMe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hMe(t[1]);return e&&JSON.parse(e)},oM=()=>{try{return pMe()||mMe()||gMe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vMe=t=>{var e,n;return(n=(e=oM())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yMe=t=>{const e=vMe(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},BB=()=>{var t;return(t=oM())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xMe(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[zy(JSON.stringify(n)),zy(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bMe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wMe(){var t;const e=(t=oM())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SMe(){return!wMe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EMe(){try{return typeof indexedDB=="object"}catch{return!1}}function TMe(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AMe="FirebaseError";class Kf extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=AMe,Object.setPrototypeOf(this,Kf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$B.prototype.create)}}class $B{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?MMe(o,r):"Error",s=`${this.serviceName}: ${a} (${i}).`;return new Kf(i,s,r)}}function MMe(t,e){return t.replace(PMe,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const PMe=/\{\$([^}]+)}/g;function zS(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],a=e[i];if(wL(o)&&wL(a)){if(!zS(o,a))return!1}else if(o!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function wL(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(t){return t&&t._delegate?t._delegate:t}class Pp{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CMe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _Me;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OMe(e))try{this.getOrInitializeService({instanceIdentifier:ll})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ll){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ll){return this.instances.has(e)}getOptions(e=ll){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(o);r===s&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RMe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ll){return this.component?this.component.multipleInstances?e:ll:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RMe(t){return t===ll?void 0:t}function OMe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IMe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CMe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Rt||(Rt={}));const NMe={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},DMe=Rt.INFO,LMe={[Rt.DEBUG]:"log",[Rt.VERBOSE]:"log",[Rt.INFO]:"info",[Rt.WARN]:"warn",[Rt.ERROR]:"error"},kMe=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=LMe[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zB{constructor(e){this.name=e,this._logLevel=DMe,this._logHandler=kMe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NMe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rt.DEBUG,...e),this._logHandler(this,Rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rt.VERBOSE,...e),this._logHandler(this,Rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rt.INFO,...e),this._logHandler(this,Rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rt.WARN,...e),this._logHandler(this,Rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rt.ERROR,...e),this._logHandler(this,Rt.ERROR,...e)}}const jMe=(t,e)=>e.some(n=>t instanceof n);let SL,EL;function UMe(){return SL||(SL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FMe(){return EL||(EL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HB=new WeakMap,HS=new WeakMap,GB=new WeakMap,kb=new WeakMap,aM=new WeakMap;function VMe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(gs(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&HB.set(n,t)}).catch(()=>{}),aM.set(e,t),e}function BMe(t){if(HS.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});HS.set(t,e)}let GS={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return HS.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GB.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $Me(t){GS=t(GS)}function zMe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(jb(this),e,...n);return GB.set(r,e.sort?e.sort():[e]),gs(r)}:FMe().includes(t)?function(...e){return t.apply(jb(this),e),gs(HB.get(this))}:function(...e){return gs(t.apply(jb(this),e))}}function HMe(t){return typeof t=="function"?zMe(t):(t instanceof IDBTransaction&&BMe(t),jMe(t,UMe())?new Proxy(t,GS):t)}function gs(t){if(t instanceof IDBRequest)return VMe(t);if(kb.has(t))return kb.get(t);const e=HMe(t);return e!==t&&(kb.set(t,e),aM.set(e,t)),e}const jb=t=>aM.get(t);function GMe(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),s=gs(a);return r&&a.addEventListener("upgradeneeded",l=>{r(gs(a.result),l.oldVersion,l.newVersion,gs(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),s.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),s}const WMe=["get","getKey","getAll","getAllKeys","count"],qMe=["put","add","delete","clear"],Ub=new Map;function TL(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ub.get(e))return Ub.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=qMe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||WMe.includes(n)))return;const o=async function(a,...s){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(s.shift())),(await Promise.all([c[n](...s),i&&l.done]))[0]};return Ub.set(e,o),o}$Me(t=>({...t,get:(e,n,r)=>TL(e,n)||t.get(e,n,r),has:(e,n)=>!!TL(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XMe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KMe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function KMe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const WS="@firebase/app",AL="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new zB("@firebase/app"),YMe="@firebase/app-compat",QMe="@firebase/analytics-compat",ZMe="@firebase/analytics",JMe="@firebase/app-check-compat",ePe="@firebase/app-check",tPe="@firebase/auth",nPe="@firebase/auth-compat",rPe="@firebase/database",iPe="@firebase/data-connect",oPe="@firebase/database-compat",aPe="@firebase/functions",sPe="@firebase/functions-compat",lPe="@firebase/installations",cPe="@firebase/installations-compat",uPe="@firebase/messaging",fPe="@firebase/messaging-compat",hPe="@firebase/performance",dPe="@firebase/performance-compat",pPe="@firebase/remote-config",mPe="@firebase/remote-config-compat",gPe="@firebase/storage",vPe="@firebase/storage-compat",yPe="@firebase/firestore",_Pe="@firebase/vertexai",xPe="@firebase/firestore-compat",bPe="firebase",wPe="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="[DEFAULT]",SPe={[WS]:"fire-core",[YMe]:"fire-core-compat",[ZMe]:"fire-analytics",[QMe]:"fire-analytics-compat",[ePe]:"fire-app-check",[JMe]:"fire-app-check-compat",[tPe]:"fire-auth",[nPe]:"fire-auth-compat",[rPe]:"fire-rtdb",[iPe]:"fire-data-connect",[oPe]:"fire-rtdb-compat",[aPe]:"fire-fn",[sPe]:"fire-fn-compat",[lPe]:"fire-iid",[cPe]:"fire-iid-compat",[uPe]:"fire-fcm",[fPe]:"fire-fcm-compat",[hPe]:"fire-perf",[dPe]:"fire-perf-compat",[pPe]:"fire-rc",[mPe]:"fire-rc-compat",[gPe]:"fire-gcs",[vPe]:"fire-gcs-compat",[yPe]:"fire-fst",[xPe]:"fire-fst-compat",[_Pe]:"fire-vertex","fire-js":"fire-js",[bPe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy=new Map,EPe=new Map,XS=new Map;function ML(t,e){try{t.container.addComponent(e)}catch(n){Ta.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gy(t){const e=t.name;if(XS.has(e))return Ta.debug(`There were multiple attempts to register component ${e}.`),!1;XS.set(e,t);for(const n of Hy.values())ML(n,t);for(const n of EPe.values())ML(n,t);return!0}function TPe(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const APe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vs=new $B("app","Firebase",APe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MPe{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PPe=wPe;function WB(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qS,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw vs.create("bad-app-name",{appName:String(i)});if(n||(n=BB()),!n)throw vs.create("no-options");const o=Hy.get(i);if(o){if(zS(n,o.options)&&zS(r,o.config))return o;throw vs.create("duplicate-app",{appName:i})}const a=new IMe(i);for(const l of XS.values())a.addComponent(l);const s=new MPe(n,r,a);return Hy.set(i,s),s}function CPe(t=qS){const e=Hy.get(t);if(!e&&t===qS&&BB())return WB();if(!e)throw vs.create("no-app",{appName:t});return e}function Cu(t,e,n){var r;let i=(r=SPe[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const s=[`Unable to register library "${i}" with version "${e}":`];o&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ta.warn(s.join(" "));return}Gy(new Pp(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RPe="firebase-heartbeat-database",OPe=1,Cp="firebase-heartbeat-store";let Fb=null;function qB(){return Fb||(Fb=GMe(RPe,OPe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cp)}catch(n){console.warn(n)}}}}).catch(t=>{throw vs.create("idb-open",{originalErrorMessage:t.message})})),Fb}async function IPe(t){try{const n=(await qB()).transaction(Cp),r=await n.objectStore(Cp).get(XB(t));return await n.done,r}catch(e){if(e instanceof Kf)Ta.warn(e.message);else{const n=vs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ta.warn(n.message)}}}async function PL(t,e){try{const r=(await qB()).transaction(Cp,"readwrite");await r.objectStore(Cp).put(e,XB(t)),await r.done}catch(n){if(n instanceof Kf)Ta.warn(n.message);else{const r=vs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ta.warn(r.message)}}}function XB(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NPe=1024,DPe=30*24*60*60*1e3;class LPe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jPe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=CL();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const s=new Date(a.date).valueOf();return Date.now()-s<=DPe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ta.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=CL(),{heartbeatsToSend:r,unsentEntries:i}=kPe(this._heartbeatsCache.heartbeats),o=zy(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ta.warn(n),""}}}function CL(){return new Date().toISOString().substring(0,10)}function kPe(t,e=NPe){const n=[];let r=t.slice();for(const i of t){const o=n.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),RL(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),RL(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class jPe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EMe()?TMe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await IPe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return PL(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return PL(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function RL(t){return zy(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UPe(t){Gy(new Pp("platform-logger",e=>new XMe(e),"PRIVATE")),Gy(new Pp("heartbeat",e=>new LPe(e),"PRIVATE")),Cu(WS,AL,t),Cu(WS,AL,"esm2017"),Cu("fire-js","")}UPe("");var FPe="firebase",VPe="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cu(FPe,VPe,"app");var OL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nl,KB;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,A){function E(){}E.prototype=A.prototype,b.D=A.prototype,b.prototype=new E,b.prototype.constructor=b,b.C=function(P,R,N){for(var O=Array(arguments.length-2),D=2;D<arguments.length;D++)O[D-2]=arguments[D];return A.prototype[R].apply(P,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,A,E){E||(E=0);var P=Array(16);if(typeof A=="string")for(var R=0;16>R;++R)P[R]=A.charCodeAt(E++)|A.charCodeAt(E++)<<8|A.charCodeAt(E++)<<16|A.charCodeAt(E++)<<24;else for(R=0;16>R;++R)P[R]=A[E++]|A[E++]<<8|A[E++]<<16|A[E++]<<24;A=b.g[0],E=b.g[1],R=b.g[2];var N=b.g[3],O=A+(N^E&(R^N))+P[0]+3614090360&4294967295;A=E+(O<<7&4294967295|O>>>25),O=N+(R^A&(E^R))+P[1]+3905402710&4294967295,N=A+(O<<12&4294967295|O>>>20),O=R+(E^N&(A^E))+P[2]+606105819&4294967295,R=N+(O<<17&4294967295|O>>>15),O=E+(A^R&(N^A))+P[3]+3250441966&4294967295,E=R+(O<<22&4294967295|O>>>10),O=A+(N^E&(R^N))+P[4]+4118548399&4294967295,A=E+(O<<7&4294967295|O>>>25),O=N+(R^A&(E^R))+P[5]+1200080426&4294967295,N=A+(O<<12&4294967295|O>>>20),O=R+(E^N&(A^E))+P[6]+2821735955&4294967295,R=N+(O<<17&4294967295|O>>>15),O=E+(A^R&(N^A))+P[7]+4249261313&4294967295,E=R+(O<<22&4294967295|O>>>10),O=A+(N^E&(R^N))+P[8]+1770035416&4294967295,A=E+(O<<7&4294967295|O>>>25),O=N+(R^A&(E^R))+P[9]+2336552879&4294967295,N=A+(O<<12&4294967295|O>>>20),O=R+(E^N&(A^E))+P[10]+4294925233&4294967295,R=N+(O<<17&4294967295|O>>>15),O=E+(A^R&(N^A))+P[11]+2304563134&4294967295,E=R+(O<<22&4294967295|O>>>10),O=A+(N^E&(R^N))+P[12]+1804603682&4294967295,A=E+(O<<7&4294967295|O>>>25),O=N+(R^A&(E^R))+P[13]+4254626195&4294967295,N=A+(O<<12&4294967295|O>>>20),O=R+(E^N&(A^E))+P[14]+2792965006&4294967295,R=N+(O<<17&4294967295|O>>>15),O=E+(A^R&(N^A))+P[15]+1236535329&4294967295,E=R+(O<<22&4294967295|O>>>10),O=A+(R^N&(E^R))+P[1]+4129170786&4294967295,A=E+(O<<5&4294967295|O>>>27),O=N+(E^R&(A^E))+P[6]+3225465664&4294967295,N=A+(O<<9&4294967295|O>>>23),O=R+(A^E&(N^A))+P[11]+643717713&4294967295,R=N+(O<<14&4294967295|O>>>18),O=E+(N^A&(R^N))+P[0]+3921069994&4294967295,E=R+(O<<20&4294967295|O>>>12),O=A+(R^N&(E^R))+P[5]+3593408605&4294967295,A=E+(O<<5&4294967295|O>>>27),O=N+(E^R&(A^E))+P[10]+38016083&4294967295,N=A+(O<<9&4294967295|O>>>23),O=R+(A^E&(N^A))+P[15]+3634488961&4294967295,R=N+(O<<14&4294967295|O>>>18),O=E+(N^A&(R^N))+P[4]+3889429448&4294967295,E=R+(O<<20&4294967295|O>>>12),O=A+(R^N&(E^R))+P[9]+568446438&4294967295,A=E+(O<<5&4294967295|O>>>27),O=N+(E^R&(A^E))+P[14]+3275163606&4294967295,N=A+(O<<9&4294967295|O>>>23),O=R+(A^E&(N^A))+P[3]+4107603335&4294967295,R=N+(O<<14&4294967295|O>>>18),O=E+(N^A&(R^N))+P[8]+1163531501&4294967295,E=R+(O<<20&4294967295|O>>>12),O=A+(R^N&(E^R))+P[13]+2850285829&4294967295,A=E+(O<<5&4294967295|O>>>27),O=N+(E^R&(A^E))+P[2]+4243563512&4294967295,N=A+(O<<9&4294967295|O>>>23),O=R+(A^E&(N^A))+P[7]+1735328473&4294967295,R=N+(O<<14&4294967295|O>>>18),O=E+(N^A&(R^N))+P[12]+2368359562&4294967295,E=R+(O<<20&4294967295|O>>>12),O=A+(E^R^N)+P[5]+4294588738&4294967295,A=E+(O<<4&4294967295|O>>>28),O=N+(A^E^R)+P[8]+2272392833&4294967295,N=A+(O<<11&4294967295|O>>>21),O=R+(N^A^E)+P[11]+1839030562&4294967295,R=N+(O<<16&4294967295|O>>>16),O=E+(R^N^A)+P[14]+4259657740&4294967295,E=R+(O<<23&4294967295|O>>>9),O=A+(E^R^N)+P[1]+2763975236&4294967295,A=E+(O<<4&4294967295|O>>>28),O=N+(A^E^R)+P[4]+1272893353&4294967295,N=A+(O<<11&4294967295|O>>>21),O=R+(N^A^E)+P[7]+4139469664&4294967295,R=N+(O<<16&4294967295|O>>>16),O=E+(R^N^A)+P[10]+3200236656&4294967295,E=R+(O<<23&4294967295|O>>>9),O=A+(E^R^N)+P[13]+681279174&4294967295,A=E+(O<<4&4294967295|O>>>28),O=N+(A^E^R)+P[0]+3936430074&4294967295,N=A+(O<<11&4294967295|O>>>21),O=R+(N^A^E)+P[3]+3572445317&4294967295,R=N+(O<<16&4294967295|O>>>16),O=E+(R^N^A)+P[6]+76029189&4294967295,E=R+(O<<23&4294967295|O>>>9),O=A+(E^R^N)+P[9]+3654602809&4294967295,A=E+(O<<4&4294967295|O>>>28),O=N+(A^E^R)+P[12]+3873151461&4294967295,N=A+(O<<11&4294967295|O>>>21),O=R+(N^A^E)+P[15]+530742520&4294967295,R=N+(O<<16&4294967295|O>>>16),O=E+(R^N^A)+P[2]+3299628645&4294967295,E=R+(O<<23&4294967295|O>>>9),O=A+(R^(E|~N))+P[0]+4096336452&4294967295,A=E+(O<<6&4294967295|O>>>26),O=N+(E^(A|~R))+P[7]+1126891415&4294967295,N=A+(O<<10&4294967295|O>>>22),O=R+(A^(N|~E))+P[14]+2878612391&4294967295,R=N+(O<<15&4294967295|O>>>17),O=E+(N^(R|~A))+P[5]+4237533241&4294967295,E=R+(O<<21&4294967295|O>>>11),O=A+(R^(E|~N))+P[12]+1700485571&4294967295,A=E+(O<<6&4294967295|O>>>26),O=N+(E^(A|~R))+P[3]+2399980690&4294967295,N=A+(O<<10&4294967295|O>>>22),O=R+(A^(N|~E))+P[10]+4293915773&4294967295,R=N+(O<<15&4294967295|O>>>17),O=E+(N^(R|~A))+P[1]+2240044497&4294967295,E=R+(O<<21&4294967295|O>>>11),O=A+(R^(E|~N))+P[8]+1873313359&4294967295,A=E+(O<<6&4294967295|O>>>26),O=N+(E^(A|~R))+P[15]+4264355552&4294967295,N=A+(O<<10&4294967295|O>>>22),O=R+(A^(N|~E))+P[6]+2734768916&4294967295,R=N+(O<<15&4294967295|O>>>17),O=E+(N^(R|~A))+P[13]+1309151649&4294967295,E=R+(O<<21&4294967295|O>>>11),O=A+(R^(E|~N))+P[4]+4149444226&4294967295,A=E+(O<<6&4294967295|O>>>26),O=N+(E^(A|~R))+P[11]+3174756917&4294967295,N=A+(O<<10&4294967295|O>>>22),O=R+(A^(N|~E))+P[2]+718787259&4294967295,R=N+(O<<15&4294967295|O>>>17),O=E+(N^(R|~A))+P[9]+3951481745&4294967295,b.g[0]=b.g[0]+A&4294967295,b.g[1]=b.g[1]+(R+(O<<21&4294967295|O>>>11))&4294967295,b.g[2]=b.g[2]+R&4294967295,b.g[3]=b.g[3]+N&4294967295}r.prototype.u=function(b,A){A===void 0&&(A=b.length);for(var E=A-this.blockSize,P=this.B,R=this.h,N=0;N<A;){if(R==0)for(;N<=E;)i(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<A;)if(P[R++]=b.charCodeAt(N++),R==this.blockSize){i(this,P),R=0;break}}else for(;N<A;)if(P[R++]=b[N++],R==this.blockSize){i(this,P),R=0;break}}this.h=R,this.o+=A},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var A=1;A<b.length-8;++A)b[A]=0;var E=8*this.o;for(A=b.length-8;A<b.length;++A)b[A]=E&255,E/=256;for(this.u(b),b=Array(16),A=E=0;4>A;++A)for(var P=0;32>P;P+=8)b[E++]=this.g[A]>>>P&255;return b};function o(b,A){var E=s;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=A(b)}function a(b,A){this.h=A;for(var E=[],P=!0,R=b.length-1;0<=R;R--){var N=b[R]|0;P&&N==A||(E[R]=N,P=!1)}this.g=E}var s={};function l(b){return-128<=b&&128>b?o(b,function(A){return new a([A|0],0>A?-1:0)}):new a([b|0],0>b?-1:0)}function c(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return g(c(-b));for(var A=[],E=1,P=0;b>=E;P++)A[P]=b/E|0,E*=4294967296;return new a(A,0)}function u(b,A){if(b.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(b.charAt(0)=="-")return g(u(b.substring(1),A));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(A,8)),P=f,R=0;R<b.length;R+=8){var N=Math.min(8,b.length-R),O=parseInt(b.substring(R,R+N),A);8>N?(N=c(Math.pow(A,N)),P=P.j(N).add(c(O))):(P=P.j(E),P=P.add(c(O)))}return P}var f=l(0),h=l(1),d=l(16777216);t=a.prototype,t.m=function(){if(v(this))return-g(this).m();for(var b=0,A=1,E=0;E<this.g.length;E++){var P=this.i(E);b+=(0<=P?P:4294967296+P)*A,A*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(y(this))return"0";if(v(this))return"-"+g(this).toString(b);for(var A=c(Math.pow(b,6)),E=this,P="";;){var R=T(E,A).g;E=p(E,R.j(A));var N=((0<E.g.length?E.g[0]:E.h)>>>0).toString(b);if(E=R,y(E))return N+P;for(;6>N.length;)N="0"+N;P=N+P}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function y(b){if(b.h!=0)return!1;for(var A=0;A<b.g.length;A++)if(b.g[A]!=0)return!1;return!0}function v(b){return b.h==-1}t.l=function(b){return b=p(this,b),v(b)?-1:y(b)?0:1};function g(b){for(var A=b.g.length,E=[],P=0;P<A;P++)E[P]=~b.g[P];return new a(E,~b.h).add(h)}t.abs=function(){return v(this)?g(this):this},t.add=function(b){for(var A=Math.max(this.g.length,b.g.length),E=[],P=0,R=0;R<=A;R++){var N=P+(this.i(R)&65535)+(b.i(R)&65535),O=(N>>>16)+(this.i(R)>>>16)+(b.i(R)>>>16);P=O>>>16,N&=65535,O&=65535,E[R]=O<<16|N}return new a(E,E[E.length-1]&-2147483648?-1:0)};function p(b,A){return b.add(g(A))}t.j=function(b){if(y(this)||y(b))return f;if(v(this))return v(b)?g(this).j(g(b)):g(g(this).j(b));if(v(b))return g(this.j(g(b)));if(0>this.l(d)&&0>b.l(d))return c(this.m()*b.m());for(var A=this.g.length+b.g.length,E=[],P=0;P<2*A;P++)E[P]=0;for(P=0;P<this.g.length;P++)for(var R=0;R<b.g.length;R++){var N=this.i(P)>>>16,O=this.i(P)&65535,D=b.i(R)>>>16,k=b.i(R)&65535;E[2*P+2*R]+=O*k,x(E,2*P+2*R),E[2*P+2*R+1]+=N*k,x(E,2*P+2*R+1),E[2*P+2*R+1]+=O*D,x(E,2*P+2*R+1),E[2*P+2*R+2]+=N*D,x(E,2*P+2*R+2)}for(P=0;P<A;P++)E[P]=E[2*P+1]<<16|E[2*P];for(P=A;P<2*A;P++)E[P]=0;return new a(E,0)};function x(b,A){for(;(b[A]&65535)!=b[A];)b[A+1]+=b[A]>>>16,b[A]&=65535,A++}function _(b,A){this.g=b,this.h=A}function T(b,A){if(y(A))throw Error("division by zero");if(y(b))return new _(f,f);if(v(b))return A=T(g(b),A),new _(g(A.g),g(A.h));if(v(A))return A=T(b,g(A)),new _(g(A.g),A.h);if(30<b.g.length){if(v(b)||v(A))throw Error("slowDivide_ only works with positive integers.");for(var E=h,P=A;0>=P.l(b);)E=w(E),P=w(P);var R=M(E,1),N=M(P,1);for(P=M(P,2),E=M(E,2);!y(P);){var O=N.add(P);0>=O.l(b)&&(R=R.add(E),N=O),P=M(P,1),E=M(E,1)}return A=p(b,R.j(A)),new _(R,A)}for(R=f;0<=b.l(A);){for(E=Math.max(1,Math.floor(b.m()/A.m())),P=Math.ceil(Math.log(E)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),N=c(E),O=N.j(A);v(O)||0<O.l(b);)E-=P,N=c(E),O=N.j(A);y(N)&&(N=h),R=R.add(N),b=p(b,O)}return new _(R,b)}t.A=function(b){return T(this,b).h},t.and=function(b){for(var A=Math.max(this.g.length,b.g.length),E=[],P=0;P<A;P++)E[P]=this.i(P)&b.i(P);return new a(E,this.h&b.h)},t.or=function(b){for(var A=Math.max(this.g.length,b.g.length),E=[],P=0;P<A;P++)E[P]=this.i(P)|b.i(P);return new a(E,this.h|b.h)},t.xor=function(b){for(var A=Math.max(this.g.length,b.g.length),E=[],P=0;P<A;P++)E[P]=this.i(P)^b.i(P);return new a(E,this.h^b.h)};function w(b){for(var A=b.g.length+1,E=[],P=0;P<A;P++)E[P]=b.i(P)<<1|b.i(P-1)>>>31;return new a(E,b.h)}function M(b,A){var E=A>>5;A%=32;for(var P=b.g.length-E,R=[],N=0;N<P;N++)R[N]=0<A?b.i(N+E)>>>A|b.i(N+E+1)<<32-A:b.i(N+E);return new a(R,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,KB=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,Nl=a}).apply(typeof OL<"u"?OL:typeof self<"u"?self:typeof window<"u"?window:{});var Tg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YB,Gh,QB,Yg,KS,ZB,JB,e$;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,C,I){return m==Array.prototype||m==Object.prototype||(m[C]=I.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tg=="object"&&Tg];for(var C=0;C<m.length;++C){var I=m[C];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function i(m,C){if(C)e:{var I=r;m=m.split(".");for(var j=0;j<m.length-1;j++){var Z=m[j];if(!(Z in I))break e;I=I[Z]}m=m[m.length-1],j=I[m],C=C(j),C!=j&&C!=null&&e(I,m,{configurable:!0,writable:!0,value:C})}}function o(m,C){m instanceof String&&(m+="");var I=0,j=!1,Z={next:function(){if(!j&&I<m.length){var se=I++;return{value:C(se,m[se]),done:!1}}return j=!0,{done:!0,value:void 0}}};return Z[Symbol.iterator]=function(){return Z},Z}i("Array.prototype.values",function(m){return m||function(){return o(this,function(C,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},s=this||self;function l(m){var C=typeof m;return C=C!="object"?C:m?Array.isArray(m)?"array":C:"null",C=="array"||C=="object"&&typeof m.length=="number"}function c(m){var C=typeof m;return C=="object"&&m!=null||C=="function"}function u(m,C,I){return m.call.apply(m.bind,arguments)}function f(m,C,I){if(!m)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var Z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Z,j),m.apply(C,Z)}}return function(){return m.apply(C,arguments)}}function h(m,C,I){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,h.apply(null,arguments)}function d(m,C){var I=Array.prototype.slice.call(arguments,1);return function(){var j=I.slice();return j.push.apply(j,arguments),m.apply(this,j)}}function y(m,C){function I(){}I.prototype=C.prototype,m.aa=C.prototype,m.prototype=new I,m.prototype.constructor=m,m.Qb=function(j,Z,se){for(var Me=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)Me[Wt-2]=arguments[Wt];return C.prototype[Z].apply(j,Me)}}function v(m){const C=m.length;if(0<C){const I=Array(C);for(let j=0;j<C;j++)I[j]=m[j];return I}return[]}function g(m,C){for(let I=1;I<arguments.length;I++){const j=arguments[I];if(l(j)){const Z=m.length||0,se=j.length||0;m.length=Z+se;for(let Me=0;Me<se;Me++)m[Z+Me]=j[Me]}else m.push(j)}}class p{constructor(C,I){this.i=C,this.j=I,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function x(m){return/^[\s\xa0]*$/.test(m)}function _(){var m=s.navigator;return m&&(m=m.userAgent)?m:""}function T(m){return T[" "](m),m}T[" "]=function(){};var w=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function M(m,C,I){for(const j in m)C.call(I,m[j],j,m)}function b(m,C){for(const I in m)C.call(void 0,m[I],I,m)}function A(m){const C={};for(const I in m)C[I]=m[I];return C}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(m,C){let I,j;for(let Z=1;Z<arguments.length;Z++){j=arguments[Z];for(I in j)m[I]=j[I];for(let se=0;se<E.length;se++)I=E[se],Object.prototype.hasOwnProperty.call(j,I)&&(m[I]=j[I])}}function R(m){var C=1;m=m.split(":");const I=[];for(;0<C&&m.length;)I.push(m.shift()),C--;return m.length&&I.push(m.join(":")),I}function N(m){s.setTimeout(()=>{throw m},0)}function O(){var m=q;let C=null;return m.g&&(C=m.g,m.g=m.g.next,m.g||(m.h=null),C.next=null),C}class D{constructor(){this.h=this.g=null}add(C,I){const j=k.get();j.set(C,I),this.h?this.h.next=j:this.g=j,this.h=j}}var k=new p(()=>new H,m=>m.reset());class H{constructor(){this.next=this.g=this.h=null}set(C,I){this.h=C,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let B,F=!1,q=new D,K=()=>{const m=s.Promise.resolve(void 0);B=()=>{m.then(z)}};var z=()=>{for(var m;m=O();){try{m.h.call(m.g)}catch(I){N(I)}var C=k;C.j(m),100>C.h&&(C.h++,m.next=C.g,C.g=m)}F=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(m,C){this.type=m,this.g=this.target=C,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var m=!1,C=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const I=()=>{};s.addEventListener("test",I,C),s.removeEventListener("test",I,C)}catch{}return m}();function _e(m,C){if(ee.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var I=this.type=m.type,j=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=C,C=m.relatedTarget){if(w){e:{try{T(C.nodeName);var Z=!0;break e}catch{}Z=!1}Z||(C=null)}}else I=="mouseover"?C=m.fromElement:I=="mouseout"&&(C=m.toElement);this.relatedTarget=C,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Ne[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&_e.aa.h.call(this)}}y(_e,ee);var Ne={2:"touch",3:"pen",4:"mouse"};_e.prototype.h=function(){_e.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var We="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function fe(m,C,I,j,Z){this.listener=m,this.proxy=null,this.src=C,this.type=I,this.capture=!!j,this.ha=Z,this.key=++Ue,this.da=this.fa=!1}function Re(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ee(m){this.src=m,this.g={},this.h=0}Ee.prototype.add=function(m,C,I,j,Z){var se=m.toString();m=this.g[se],m||(m=this.g[se]=[],this.h++);var Me=lt(m,C,j,Z);return-1<Me?(C=m[Me],I||(C.fa=!1)):(C=new fe(C,this.src,se,!!j,Z),C.fa=I,m.push(C)),C};function G(m,C){var I=C.type;if(I in m.g){var j=m.g[I],Z=Array.prototype.indexOf.call(j,C,void 0),se;(se=0<=Z)&&Array.prototype.splice.call(j,Z,1),se&&(Re(C),m.g[I].length==0&&(delete m.g[I],m.h--))}}function lt(m,C,I,j){for(var Z=0;Z<m.length;++Z){var se=m[Z];if(!se.da&&se.listener==C&&se.capture==!!I&&se.ha==j)return Z}return-1}var be="closure_lm_"+(1e6*Math.random()|0),Le={};function ke(m,C,I,j,Z){if(Array.isArray(C)){for(var se=0;se<C.length;se++)ke(m,C[se],I,j,Z);return null}return I=re(I),m&&m[We]?m.K(C,I,c(j)?!!j.capture:!!j,Z):mt(m,C,I,!1,j,Z)}function mt(m,C,I,j,Z,se){if(!C)throw Error("Invalid event type");var Me=c(Z)?!!Z.capture:!!Z,Wt=$(m);if(Wt||(m[be]=Wt=new Ee(m)),I=Wt.add(C,I,j,Me,se),I.proxy)return I;if(j=Ye(),I.proxy=j,j.src=m,j.listener=I,m.addEventListener)me||(Z=Me),Z===void 0&&(Z=!1),m.addEventListener(C.toString(),j,Z);else if(m.attachEvent)m.attachEvent(Pt(C.toString()),j);else if(m.addListener&&m.removeListener)m.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Ye(){function m(I){return C.call(m.src,m.listener,I)}const C=kt;return m}function Ze(m,C,I,j,Z){if(Array.isArray(C))for(var se=0;se<C.length;se++)Ze(m,C[se],I,j,Z);else j=c(j)?!!j.capture:!!j,I=re(I),m&&m[We]?(m=m.i,C=String(C).toString(),C in m.g&&(se=m.g[C],I=lt(se,I,j,Z),-1<I&&(Re(se[I]),Array.prototype.splice.call(se,I,1),se.length==0&&(delete m.g[C],m.h--)))):m&&(m=$(m))&&(C=m.g[C.toString()],m=-1,C&&(m=lt(C,I,j,Z)),(I=-1<m?C[m]:null)&&ht(I))}function ht(m){if(typeof m!="number"&&m&&!m.da){var C=m.src;if(C&&C[We])G(C.i,m);else{var I=m.type,j=m.proxy;C.removeEventListener?C.removeEventListener(I,j,m.capture):C.detachEvent?C.detachEvent(Pt(I),j):C.addListener&&C.removeListener&&C.removeListener(j),(I=$(C))?(G(I,m),I.h==0&&(I.src=null,C[be]=null)):Re(m)}}}function Pt(m){return m in Le?Le[m]:Le[m]="on"+m}function kt(m,C){if(m.da)m=!0;else{C=new _e(C,this);var I=m.listener,j=m.ha||m.src;m.fa&&ht(m),m=I.call(j,C)}return m}function $(m){return m=m[be],m instanceof Ee?m:null}var L="__closure_events_fn_"+(1e9*Math.random()>>>0);function re(m){return typeof m=="function"?m:(m[L]||(m[L]=function(C){return m.handleEvent(C)}),m[L])}function ye(){X.call(this),this.i=new Ee(this),this.M=this,this.F=null}y(ye,X),ye.prototype[We]=!0,ye.prototype.removeEventListener=function(m,C,I,j){Ze(this,m,C,I,j)};function he(m,C){var I,j=m.F;if(j)for(I=[];j;j=j.F)I.push(j);if(m=m.M,j=C.type||C,typeof C=="string")C=new ee(C,m);else if(C instanceof ee)C.target=C.target||m;else{var Z=C;C=new ee(j,m),P(C,Z)}if(Z=!0,I)for(var se=I.length-1;0<=se;se--){var Me=C.g=I[se];Z=xe(Me,j,!0,C)&&Z}if(Me=C.g=m,Z=xe(Me,j,!0,C)&&Z,Z=xe(Me,j,!1,C)&&Z,I)for(se=0;se<I.length;se++)Me=C.g=I[se],Z=xe(Me,j,!1,C)&&Z}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var m=this.i,C;for(C in m.g){for(var I=m.g[C],j=0;j<I.length;j++)Re(I[j]);delete m.g[C],m.h--}}this.F=null},ye.prototype.K=function(m,C,I,j){return this.i.add(String(m),C,!1,I,j)},ye.prototype.L=function(m,C,I,j){return this.i.add(String(m),C,!0,I,j)};function xe(m,C,I,j){if(C=m.i.g[String(C)],!C)return!0;C=C.concat();for(var Z=!0,se=0;se<C.length;++se){var Me=C[se];if(Me&&!Me.da&&Me.capture==I){var Wt=Me.listener,nr=Me.ha||Me.src;Me.fa&&G(m.i,Me),Z=Wt.call(nr,j)!==!1&&Z}}return Z&&!j.defaultPrevented}function Ce(m,C,I){if(typeof m=="function")I&&(m=h(m,I));else if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:s.setTimeout(m,C||0)}function Te(m){m.g=Ce(()=>{m.g=null,m.i&&(m.i=!1,Te(m))},m.l);const C=m.h;m.h=null,m.m.apply(null,C)}class Pe extends X{constructor(C,I){super(),this.m=C,this.l=I,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:Te(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Y(m){X.call(this),this.h=m,this.g={}}y(Y,X);var Se=[];function de(m){M(m.g,function(C,I){this.g.hasOwnProperty(I)&&ht(C)},m),m.g={}}Y.prototype.N=function(){Y.aa.N.call(this),de(this)},Y.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qe=s.JSON.stringify,Ge=s.JSON.parse,qe=class{stringify(m){return s.JSON.stringify(m,void 0)}parse(m){return s.JSON.parse(m,void 0)}};function Ve(){}Ve.prototype.h=null;function De(m){return m.h||(m.h=m.i())}function vt(){}var Q={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function le(){ee.call(this,"d")}y(le,ee);function ue(){ee.call(this,"c")}y(ue,ee);var ne={},ge=null;function Ie(){return ge=ge||new ye}ne.La="serverreachability";function rt(m){ee.call(this,ne.La,m)}y(rt,ee);function It(m){const C=Ie();he(C,new rt(C))}ne.STAT_EVENT="statevent";function En(m,C){ee.call(this,ne.STAT_EVENT,m),this.stat=C}y(En,ee);function dt(m){const C=Ie();he(C,new En(C,m))}ne.Ma="timingevent";function Tn(m,C){ee.call(this,ne.Ma,m),this.size=C}y(Tn,ee);function Dn(m,C){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){m()},C)}function vi(){this.g=!0}vi.prototype.xa=function(){this.g=!1};function k_(m,C,I,j,Z,se){m.info(function(){if(m.g)if(se)for(var Me="",Wt=se.split("&"),nr=0;nr<Wt.length;nr++){var Dt=Wt[nr].split("=");if(1<Dt.length){var hr=Dt[0];Dt=Dt[1];var dr=hr.split("_");Me=2<=dr.length&&dr[1]=="type"?Me+(hr+"="+Dt+"&"):Me+(hr+"=redacted&")}}else Me=null;else Me=se;return"XMLHTTP REQ ("+j+") [attempt "+Z+"]: "+C+`
`+I+`
`+Me})}function lc(m,C,I,j,Z,se,Me){m.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+Z+"]: "+C+`
`+I+`
`+se+" "+Me})}function Bo(m,C,I,j){m.info(function(){return"XMLHTTP TEXT ("+C+"): "+sm(m,I)+(j?" "+j:"")})}function cc(m,C){m.info(function(){return"TIMEOUT: "+C})}vi.prototype.info=function(){};function sm(m,C){if(!m.g)return C;if(!C)return null;try{var I=JSON.parse(C);if(I){for(m=0;m<I.length;m++)if(Array.isArray(I[m])){var j=I[m];if(!(2>j.length)){var Z=j[1];if(Array.isArray(Z)&&!(1>Z.length)){var se=Z[0];if(se!="noop"&&se!="stop"&&se!="close")for(var Me=1;Me<Z.length;Me++)Z[Me]=""}}}}return Qe(I)}catch{return C}}var Bs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},lm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},th;function uc(){}y(uc,Ve),uc.prototype.g=function(){return new XMLHttpRequest},uc.prototype.i=function(){return{}},th=new uc;function U(m,C,I,j){this.j=m,this.i=C,this.l=I,this.R=j||1,this.U=new Y(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new J}function J(){this.i=null,this.g="",this.h=!1}var ie={},oe={};function ae(m,C,I){m.L=1,m.v=cm(Jr(C)),m.m=I,m.P=!0,Fe(m,null)}function Fe(m,C){m.F=Date.now(),tt(m),m.A=Jr(m.v);var I=m.A,j=m.R;Array.isArray(j)||(j=[String(j)]),HM(I.i,"t",j),m.C=0,I=m.j.J,m.h=new J,m.g=lP(m.j,I?C:null,!m.m),0<m.O&&(m.M=new Pe(h(m.Y,m,m.g),m.O)),C=m.U,I=m.g,j=m.ca;var Z="readystatechange";Array.isArray(Z)||(Z&&(Se[0]=Z.toString()),Z=Se);for(var se=0;se<Z.length;se++){var Me=ke(I,Z[se],j||C.handleEvent,!1,C.h||C);if(!Me)break;C.g[Me.key]=Me}C=m.H?A(m.H):{},m.m?(m.u||(m.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,C)):(m.u="GET",m.g.ea(m.A,m.u,null,C)),It(),k_(m.i,m.u,m.A,m.l,m.R,m.m)}U.prototype.ca=function(m){m=m.target;const C=this.M;C&&$o(m)==3?C.j():this.Y(m)},U.prototype.Y=function(m){try{if(m==this.g)e:{const dr=$o(this.g);var C=this.g.Ba();const pc=this.g.Z();if(!(3>dr)&&(dr!=3||this.g&&(this.h.h||this.g.oa()||QM(this.g)))){this.J||dr!=4||C==7||(C==8||0>=pc?It(3):It(2)),ct(this);var I=this.g.Z();this.X=I;t:if(Xe(this)){var j=QM(this.g);m="";var Z=j.length,se=$o(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vt(this),at(this);var Me="";break t}this.h.i=new s.TextDecoder}for(C=0;C<Z;C++)this.h.h=!0,m+=this.h.i.decode(j[C],{stream:!(se&&C==Z-1)});j.length=0,this.h.g+=m,this.C=0,Me=this.h.g}else Me=this.g.oa();if(this.o=I==200,lc(this.i,this.u,this.A,this.l,this.R,dr,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Wt,nr=this.g;if((Wt=nr.g?nr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Wt)){var Dt=Wt;break t}}Dt=null}if(I=Dt)Bo(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tr(this,I);else{this.o=!1,this.s=3,dt(12),Vt(this),at(this);break e}}if(this.P){I=!0;let $i;for(;!this.J&&this.C<Me.length;)if($i=et(this,Me),$i==oe){dr==4&&(this.s=4,dt(14),I=!1),Bo(this.i,this.l,null,"[Incomplete Response]");break}else if($i==ie){this.s=4,dt(15),Bo(this.i,this.l,Me,"[Invalid Chunk]"),I=!1;break}else Bo(this.i,this.l,$i,null),tr(this,$i);if(Xe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dr!=4||Me.length!=0||this.h.h||(this.s=1,dt(16),I=!1),this.o=this.o&&I,!I)Bo(this.i,this.l,Me,"[Invalid Chunked Response]"),Vt(this),at(this);else if(0<Me.length&&!this.W){this.W=!0;var hr=this.j;hr.g==this&&hr.ba&&!hr.M&&(hr.j.info("Great, no buffering proxy detected. Bytes received: "+Me.length),V_(hr),hr.M=!0,dt(11))}}else Bo(this.i,this.l,Me,null),tr(this,Me);dr==4&&Vt(this),this.o&&!this.J&&(dr==4?iP(this.j,this):(this.o=!1,tt(this)))}else Cz(this.g),I==400&&0<Me.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Vt(this),at(this)}}}catch{}finally{}};function Xe(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function et(m,C){var I=m.C,j=C.indexOf(`
`,I);return j==-1?oe:(I=Number(C.substring(I,j)),isNaN(I)?ie:(j+=1,j+I>C.length?oe:(C=C.slice(j,j+I),m.C=j+I,C)))}U.prototype.cancel=function(){this.J=!0,Vt(this)};function tt(m){m.S=Date.now()+m.I,yt(m,m.I)}function yt(m,C){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Dn(h(m.ba,m),C)}function ct(m){m.B&&(s.clearTimeout(m.B),m.B=null)}U.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(cc(this.i,this.A),this.L!=2&&(It(),dt(17)),Vt(this),this.s=2,at(this)):yt(this,this.S-m)};function at(m){m.j.G==0||m.J||iP(m.j,m)}function Vt(m){ct(m);var C=m.M;C&&typeof C.ma=="function"&&C.ma(),m.M=null,de(m.U),m.g&&(C=m.g,m.g=null,C.abort(),C.ma())}function tr(m,C){try{var I=m.j;if(I.G!=0&&(I.g==m||$s(I.h,m))){if(!m.K&&$s(I.h,m)&&I.G==3){try{var j=I.Da.g.parse(C)}catch{j=null}if(Array.isArray(j)&&j.length==3){var Z=j;if(Z[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<m.F)mm(I),dm(I);else break e;F_(I),dt(18)}}else I.za=Z[1],0<I.za-I.T&&37500>Z[2]&&I.F&&I.v==0&&!I.C&&(I.C=Dn(h(I.Za,I),6e3));if(1>=bt(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Gs(I,11)}else if((m.K||I.g==m)&&mm(I),!x(C))for(Z=I.Da.g.parse(C),C=0;C<Z.length;C++){let Dt=Z[C];if(I.T=Dt[0],Dt=Dt[1],I.G==2)if(Dt[0]=="c"){I.K=Dt[1],I.ia=Dt[2];const hr=Dt[3];hr!=null&&(I.la=hr,I.j.info("VER="+I.la));const dr=Dt[4];dr!=null&&(I.Aa=dr,I.j.info("SVER="+I.Aa));const pc=Dt[5];pc!=null&&typeof pc=="number"&&0<pc&&(j=1.5*pc,I.L=j,I.j.info("backChannelRequestTimeoutMs_="+j)),j=I;const $i=m.g;if($i){const vm=$i.g?$i.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vm){var se=j.h;se.g||vm.indexOf("spdy")==-1&&vm.indexOf("quic")==-1&&vm.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(ln(se,se.h),se.h=null))}if(j.D){const B_=$i.g?$i.g.getResponseHeader("X-HTTP-Session-Id"):null;B_&&(j.ya=B_,Jt(j.I,j.D,B_))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-m.F,I.j.info("Handshake RTT: "+I.R+"ms")),j=I;var Me=m;if(j.qa=sP(j,j.J?j.ia:null,j.W),Me.K){mo(j.h,Me);var Wt=Me,nr=j.L;nr&&(Wt.I=nr),Wt.B&&(ct(Wt),tt(Wt)),j.g=Me}else nP(j);0<I.i.length&&pm(I)}else Dt[0]!="stop"&&Dt[0]!="close"||Gs(I,7);else I.G==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?Gs(I,7):U_(I):Dt[0]!="noop"&&I.l&&I.l.ta(Dt),I.v=0)}}It(4)}catch{}}var An=class{constructor(m,C){this.g=m,this.map=C}};function yi(m){this.l=m||10,s.PerformanceNavigationTiming?(m=s.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zt(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function bt(m){return m.h?1:m.g?m.g.size:0}function $s(m,C){return m.h?m.h==C:m.g?m.g.has(C):!1}function ln(m,C){m.g?m.g.add(C):m.h=C}function mo(m,C){m.h&&m.h==C?m.h=null:m.g&&m.g.has(C)&&m.g.delete(C)}yi.prototype.cancel=function(){if(this.i=nh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function nh(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let C=m.i;for(const I of m.g.values())C=C.concat(I.D);return C}return v(m.i)}function zs(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(l(m)){for(var C=[],I=m.length,j=0;j<I;j++)C.push(m[j]);return C}C=[],I=0;for(j in m)C[I++]=m[j];return C}function rh(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(l(m)||typeof m=="string"){var C=[];m=m.length;for(var I=0;I<m;I++)C.push(I);return C}C=[],I=0;for(const j in m)C[I++]=j;return C}}}function Wn(m,C){if(m.forEach&&typeof m.forEach=="function")m.forEach(C,void 0);else if(l(m)||typeof m=="string")Array.prototype.forEach.call(m,C,void 0);else for(var I=rh(m),j=zs(m),Z=j.length,se=0;se<Z;se++)C.call(void 0,j[se],I&&I[se],m)}var go=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ih(m,C){if(m){m=m.split("&");for(var I=0;I<m.length;I++){var j=m[I].indexOf("="),Z=null;if(0<=j){var se=m[I].substring(0,j);Z=m[I].substring(j+1)}else se=m[I];C(se,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function _n(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof _n){this.h=m.h,fc(this,m.j),this.o=m.o,this.g=m.g,Hs(this,m.s),this.l=m.l;var C=m.i,I=new sh;I.i=C.i,C.g&&(I.g=new Map(C.g),I.h=C.h),VM(this,I),this.m=m.m}else m&&(C=String(m).match(go))?(this.h=!1,fc(this,C[1]||"",!0),this.o=oh(C[2]||""),this.g=oh(C[3]||"",!0),Hs(this,C[4]),this.l=oh(C[5]||"",!0),VM(this,C[6]||"",!0),this.m=oh(C[7]||"")):(this.h=!1,this.i=new sh(null,this.h))}_n.prototype.toString=function(){var m=[],C=this.j;C&&m.push(ah(C,BM,!0),":");var I=this.g;return(I||C=="file")&&(m.push("//"),(C=this.o)&&m.push(ah(C,BM,!0),"@"),m.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&m.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&m.push("/"),m.push(ah(I,I.charAt(0)=="/"?_z:yz,!0))),(I=this.i.toString())&&m.push("?",I),(I=this.m)&&m.push("#",ah(I,bz)),m.join("")};function Jr(m){return new _n(m)}function fc(m,C,I){m.j=I?oh(C,!0):C,m.j&&(m.j=m.j.replace(/:$/,""))}function Hs(m,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);m.s=C}else m.s=null}function VM(m,C,I){C instanceof sh?(m.i=C,wz(m.i,m.h)):(I||(C=ah(C,xz)),m.i=new sh(C,m.h))}function Jt(m,C,I){m.i.set(C,I)}function cm(m){return Jt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function oh(m,C){return m?C?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function ah(m,C,I){return typeof m=="string"?(m=encodeURI(m).replace(C,vz),I&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function vz(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var BM=/[#\/\?@]/g,yz=/[#\?:]/g,_z=/[#\?]/g,xz=/[#\?@]/g,bz=/#/g;function sh(m,C){this.h=this.g=null,this.i=m||null,this.j=!!C}function Na(m){m.g||(m.g=new Map,m.h=0,m.i&&ih(m.i,function(C,I){m.add(decodeURIComponent(C.replace(/\+/g," ")),I)}))}t=sh.prototype,t.add=function(m,C){Na(this),this.i=null,m=hc(this,m);var I=this.g.get(m);return I||this.g.set(m,I=[]),I.push(C),this.h+=1,this};function $M(m,C){Na(m),C=hc(m,C),m.g.has(C)&&(m.i=null,m.h-=m.g.get(C).length,m.g.delete(C))}function zM(m,C){return Na(m),C=hc(m,C),m.g.has(C)}t.forEach=function(m,C){Na(this),this.g.forEach(function(I,j){I.forEach(function(Z){m.call(C,Z,j,this)},this)},this)},t.na=function(){Na(this);const m=Array.from(this.g.values()),C=Array.from(this.g.keys()),I=[];for(let j=0;j<C.length;j++){const Z=m[j];for(let se=0;se<Z.length;se++)I.push(C[j])}return I},t.V=function(m){Na(this);let C=[];if(typeof m=="string")zM(this,m)&&(C=C.concat(this.g.get(hc(this,m))));else{m=Array.from(this.g.values());for(let I=0;I<m.length;I++)C=C.concat(m[I])}return C},t.set=function(m,C){return Na(this),this.i=null,m=hc(this,m),zM(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[C]),this.h+=1,this},t.get=function(m,C){return m?(m=this.V(m),0<m.length?String(m[0]):C):C};function HM(m,C,I){$M(m,C),0<I.length&&(m.i=null,m.g.set(hc(m,C),v(I)),m.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],C=Array.from(this.g.keys());for(var I=0;I<C.length;I++){var j=C[I];const se=encodeURIComponent(String(j)),Me=this.V(j);for(j=0;j<Me.length;j++){var Z=se;Me[j]!==""&&(Z+="="+encodeURIComponent(String(Me[j]))),m.push(Z)}}return this.i=m.join("&")};function hc(m,C){return C=String(C),m.j&&(C=C.toLowerCase()),C}function wz(m,C){C&&!m.j&&(Na(m),m.i=null,m.g.forEach(function(I,j){var Z=j.toLowerCase();j!=Z&&($M(this,j),HM(this,Z,I))},m)),m.j=C}function Sz(m,C){const I=new vi;if(s.Image){const j=new Image;j.onload=d(Da,I,"TestLoadImage: loaded",!0,C,j),j.onerror=d(Da,I,"TestLoadImage: error",!1,C,j),j.onabort=d(Da,I,"TestLoadImage: abort",!1,C,j),j.ontimeout=d(Da,I,"TestLoadImage: timeout",!1,C,j),s.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=m}else C(!1)}function Ez(m,C){const I=new vi,j=new AbortController,Z=setTimeout(()=>{j.abort(),Da(I,"TestPingServer: timeout",!1,C)},1e4);fetch(m,{signal:j.signal}).then(se=>{clearTimeout(Z),se.ok?Da(I,"TestPingServer: ok",!0,C):Da(I,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(Z),Da(I,"TestPingServer: error",!1,C)})}function Da(m,C,I,j,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),j(I)}catch{}}function Tz(){this.g=new qe}function Az(m,C,I){const j=I||"";try{Wn(m,function(Z,se){let Me=Z;c(Z)&&(Me=Qe(Z)),C.push(j+se+"="+encodeURIComponent(Me))})}catch(Z){throw C.push(j+"type="+encodeURIComponent("_badmap")),Z}}function um(m){this.l=m.Ub||null,this.j=m.eb||!1}y(um,Ve),um.prototype.g=function(){return new fm(this.l,this.j)},um.prototype.i=function(m){return function(){return m}}({});function fm(m,C){ye.call(this),this.D=m,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(fm,ye),t=fm.prototype,t.open=function(m,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=C,this.readyState=1,ch(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(C.body=m),(this.D||s).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lh(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ch(this)),this.g&&(this.readyState=3,ch(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;GM(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function GM(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var C=m.value?m.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!m.done}))&&(this.response=this.responseText+=C)}m.done?lh(this):ch(this),this.readyState==3&&GM(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,lh(this))},t.Qa=function(m){this.g&&(this.response=m,lh(this))},t.ga=function(){this.g&&lh(this)};function lh(m){m.readyState=4,m.l=null,m.j=null,m.v=null,ch(m)}t.setRequestHeader=function(m,C){this.u.append(m,C)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],C=this.h.entries();for(var I=C.next();!I.done;)I=I.value,m.push(I[0]+": "+I[1]),I=C.next();return m.join(`\r
`)};function ch(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(fm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function WM(m){let C="";return M(m,function(I,j){C+=j,C+=":",C+=I,C+=`\r
`}),C}function j_(m,C,I){e:{for(j in I){var j=!1;break e}j=!0}j||(I=WM(I),typeof m=="string"?I!=null&&encodeURIComponent(String(I)):Jt(m,C,I))}function gn(m){ye.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(gn,ye);var Mz=/^https?$/i,Pz=["POST","PUT"];t=gn.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,C,I,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);C=C?C.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():th.g(),this.v=this.o?De(this.o):De(th),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(C,String(m),!0),this.B=!1}catch(se){qM(this,se);return}if(m=I||"",I=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var Z in j)I.set(Z,j[Z]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const se of j.keys())I.set(se,j.get(se));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(I.keys()).find(se=>se.toLowerCase()=="content-type"),Z=s.FormData&&m instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Pz,C,void 0))||j||Z||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,Me]of I)this.g.setRequestHeader(se,Me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{YM(this),this.u=!0,this.g.send(m),this.u=!1}catch(se){qM(this,se)}};function qM(m,C){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=C,m.m=5,XM(m),hm(m)}function XM(m){m.A||(m.A=!0,he(m,"complete"),he(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,he(this,"complete"),he(this,"abort"),hm(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hm(this,!0)),gn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?KM(this):this.bb())},t.bb=function(){KM(this)};function KM(m){if(m.h&&typeof a<"u"&&(!m.v[1]||$o(m)!=4||m.Z()!=2)){if(m.u&&$o(m)==4)Ce(m.Ea,0,m);else if(he(m,"readystatechange"),$o(m)==4){m.h=!1;try{const Me=m.Z();e:switch(Me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var I;if(!(I=C)){var j;if(j=Me===0){var Z=String(m.D).match(go)[1]||null;!Z&&s.self&&s.self.location&&(Z=s.self.location.protocol.slice(0,-1)),j=!Mz.test(Z?Z.toLowerCase():"")}I=j}if(I)he(m,"complete"),he(m,"success");else{m.m=6;try{var se=2<$o(m)?m.g.statusText:""}catch{se=""}m.l=se+" ["+m.Z()+"]",XM(m)}}finally{hm(m)}}}}function hm(m,C){if(m.g){YM(m);const I=m.g,j=m.v[0]?()=>{}:null;m.g=null,m.v=null,C||he(m,"ready");try{I.onreadystatechange=j}catch{}}}function YM(m){m.I&&(s.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function $o(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<$o(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var C=this.g.responseText;return m&&C.indexOf(m)==0&&(C=C.substring(m.length)),Ge(C)}};function QM(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Cz(m){const C={};m=(m.g&&2<=$o(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<m.length;j++){if(x(m[j]))continue;var I=R(m[j]);const Z=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const se=C[Z]||[];C[Z]=se,se.push(I)}b(C,function(j){return j.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function uh(m,C,I){return I&&I.internalChannelParams&&I.internalChannelParams[m]||C}function ZM(m){this.Aa=0,this.i=[],this.j=new vi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=uh("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=uh("baseRetryDelayMs",5e3,m),this.cb=uh("retryDelaySeedMs",1e4,m),this.Wa=uh("forwardChannelMaxRetries",2,m),this.wa=uh("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new yi(m&&m.concurrentRequestLimit),this.Da=new Tz,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ZM.prototype,t.la=8,t.G=1,t.connect=function(m,C,I,j){dt(0),this.W=m,this.H=C||{},I&&j!==void 0&&(this.H.OSID=I,this.H.OAID=j),this.F=this.X,this.I=sP(this,null,this.W),pm(this)};function U_(m){if(JM(m),m.G==3){var C=m.U++,I=Jr(m.I);if(Jt(I,"SID",m.K),Jt(I,"RID",C),Jt(I,"TYPE","terminate"),fh(m,I),C=new U(m,m.j,C),C.L=2,C.v=cm(Jr(I)),I=!1,s.navigator&&s.navigator.sendBeacon)try{I=s.navigator.sendBeacon(C.v.toString(),"")}catch{}!I&&s.Image&&(new Image().src=C.v,I=!0),I||(C.g=lP(C.j,null),C.g.ea(C.v)),C.F=Date.now(),tt(C)}aP(m)}function dm(m){m.g&&(V_(m),m.g.cancel(),m.g=null)}function JM(m){dm(m),m.u&&(s.clearTimeout(m.u),m.u=null),mm(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&s.clearTimeout(m.s),m.s=null)}function pm(m){if(!Zt(m.h)&&!m.s){m.s=!0;var C=m.Ga;B||K(),F||(B(),F=!0),q.add(C,m),m.B=0}}function Rz(m,C){return bt(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=C.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Dn(h(m.Ga,m,C),oP(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const Z=new U(this,this.j,m);let se=this.o;if(this.S&&(se?(se=A(se),P(se,this.S)):se=this.S),this.m!==null||this.O||(Z.H=se,se=null),this.P)e:{for(var C=0,I=0;I<this.i.length;I++){t:{var j=this.i[I];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(C+=j,4096<C){C=I;break e}if(C===4096||I===this.i.length-1){C=I+1;break e}}C=1e3}else C=1e3;C=tP(this,Z,C),I=Jr(this.I),Jt(I,"RID",m),Jt(I,"CVER",22),this.D&&Jt(I,"X-HTTP-Session-Id",this.D),fh(this,I),se&&(this.O?C="headers="+encodeURIComponent(String(WM(se)))+"&"+C:this.m&&j_(I,this.m,se)),ln(this.h,Z),this.Ua&&Jt(I,"TYPE","init"),this.P?(Jt(I,"$req",C),Jt(I,"SID","null"),Z.T=!0,ae(Z,I,null)):ae(Z,I,C),this.G=2}}else this.G==3&&(m?eP(this,m):this.i.length==0||Zt(this.h)||eP(this))};function eP(m,C){var I;C?I=C.l:I=m.U++;const j=Jr(m.I);Jt(j,"SID",m.K),Jt(j,"RID",I),Jt(j,"AID",m.T),fh(m,j),m.m&&m.o&&j_(j,m.m,m.o),I=new U(m,m.j,I,m.B+1),m.m===null&&(I.H=m.o),C&&(m.i=C.D.concat(m.i)),C=tP(m,I,1e3),I.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),ln(m.h,I),ae(I,j,C)}function fh(m,C){m.H&&M(m.H,function(I,j){Jt(C,j,I)}),m.l&&Wn({},function(I,j){Jt(C,j,I)})}function tP(m,C,I){I=Math.min(m.i.length,I);var j=m.l?h(m.l.Na,m.l,m):null;e:{var Z=m.i;let se=-1;for(;;){const Me=["count="+I];se==-1?0<I?(se=Z[0].g,Me.push("ofs="+se)):se=0:Me.push("ofs="+se);let Wt=!0;for(let nr=0;nr<I;nr++){let Dt=Z[nr].g;const hr=Z[nr].map;if(Dt-=se,0>Dt)se=Math.max(0,Z[nr].g-100),Wt=!1;else try{Az(hr,Me,"req"+Dt+"_")}catch{j&&j(hr)}}if(Wt){j=Me.join("&");break e}}}return m=m.i.splice(0,I),C.D=m,j}function nP(m){if(!m.g&&!m.u){m.Y=1;var C=m.Fa;B||K(),F||(B(),F=!0),q.add(C,m),m.v=0}}function F_(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Dn(h(m.Fa,m),oP(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,rP(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Dn(h(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),dm(this),rP(this))};function V_(m){m.A!=null&&(s.clearTimeout(m.A),m.A=null)}function rP(m){m.g=new U(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var C=Jr(m.qa);Jt(C,"RID","rpc"),Jt(C,"SID",m.K),Jt(C,"AID",m.T),Jt(C,"CI",m.F?"0":"1"),!m.F&&m.ja&&Jt(C,"TO",m.ja),Jt(C,"TYPE","xmlhttp"),fh(m,C),m.m&&m.o&&j_(C,m.m,m.o),m.L&&(m.g.I=m.L);var I=m.g;m=m.ia,I.L=1,I.v=cm(Jr(C)),I.m=null,I.P=!0,Fe(I,m)}t.Za=function(){this.C!=null&&(this.C=null,dm(this),F_(this),dt(19))};function mm(m){m.C!=null&&(s.clearTimeout(m.C),m.C=null)}function iP(m,C){var I=null;if(m.g==C){mm(m),V_(m),m.g=null;var j=2}else if($s(m.h,C))I=C.D,mo(m.h,C),j=1;else return;if(m.G!=0){if(C.o)if(j==1){I=C.m?C.m.length:0,C=Date.now()-C.F;var Z=m.B;j=Ie(),he(j,new Tn(j,I)),pm(m)}else nP(m);else if(Z=C.s,Z==3||Z==0&&0<C.X||!(j==1&&Rz(m,C)||j==2&&F_(m)))switch(I&&0<I.length&&(C=m.h,C.i=C.i.concat(I)),Z){case 1:Gs(m,5);break;case 4:Gs(m,10);break;case 3:Gs(m,6);break;default:Gs(m,2)}}}function oP(m,C){let I=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(I*=2),I*C}function Gs(m,C){if(m.j.info("Error code "+C),C==2){var I=h(m.fb,m),j=m.Xa;const Z=!j;j=new _n(j||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||fc(j,"https"),cm(j),Z?Sz(j.toString(),I):Ez(j.toString(),I)}else dt(2);m.G=0,m.l&&m.l.sa(C),aP(m),JM(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function aP(m){if(m.G=0,m.ka=[],m.l){const C=nh(m.h);(C.length!=0||m.i.length!=0)&&(g(m.ka,C),g(m.ka,m.i),m.h.i.length=0,v(m.i),m.i.length=0),m.l.ra()}}function sP(m,C,I){var j=I instanceof _n?Jr(I):new _n(I);if(j.g!="")C&&(j.g=C+"."+j.g),Hs(j,j.s);else{var Z=s.location;j=Z.protocol,C=C?C+"."+Z.hostname:Z.hostname,Z=+Z.port;var se=new _n(null);j&&fc(se,j),C&&(se.g=C),Z&&Hs(se,Z),I&&(se.l=I),j=se}return I=m.D,C=m.ya,I&&C&&Jt(j,I,C),Jt(j,"VER",m.la),fh(m,j),j}function lP(m,C,I){if(C&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=m.Ca&&!m.pa?new gn(new um({eb:I})):new gn(m.pa),C.Ha(m.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function cP(){}t=cP.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function gm(){}gm.prototype.g=function(m,C){return new ei(m,C)};function ei(m,C){ye.call(this),this.g=new ZM(C),this.l=m,this.h=C&&C.messageUrlParams||null,m=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(m?m["X-WebChannel-Content-Type"]=C.messageContentType:m={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(m?m["X-WebChannel-Client-Profile"]=C.va:m={"X-WebChannel-Client-Profile":C.va}),this.g.S=m,(m=C&&C.Sb)&&!x(m)&&(this.g.m=m),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!x(C)&&(this.g.D=C,m=this.h,m!==null&&C in m&&(m=this.h,C in m&&delete m[C])),this.j=new dc(this)}y(ei,ye),ei.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ei.prototype.close=function(){U_(this.g)},ei.prototype.o=function(m){var C=this.g;if(typeof m=="string"){var I={};I.__data__=m,m=I}else this.u&&(I={},I.__data__=Qe(m),m=I);C.i.push(new An(C.Ya++,m)),C.G==3&&pm(C)},ei.prototype.N=function(){this.g.l=null,delete this.j,U_(this.g),delete this.g,ei.aa.N.call(this)};function uP(m){le.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var C=m.__sm__;if(C){e:{for(const I in C){m=I;break e}m=void 0}(this.i=m)&&(m=this.i,C=C!==null&&m in C?C[m]:void 0),this.data=C}else this.data=m}y(uP,le);function fP(){ue.call(this),this.status=1}y(fP,ue);function dc(m){this.g=m}y(dc,cP),dc.prototype.ua=function(){he(this.g,"a")},dc.prototype.ta=function(m){he(this.g,new uP(m))},dc.prototype.sa=function(m){he(this.g,new fP)},dc.prototype.ra=function(){he(this.g,"b")},gm.prototype.createWebChannel=gm.prototype.g,ei.prototype.send=ei.prototype.o,ei.prototype.open=ei.prototype.m,ei.prototype.close=ei.prototype.close,e$=function(){return new gm},JB=function(){return Ie()},ZB=ne,KS={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bs.NO_ERROR=0,Bs.TIMEOUT=8,Bs.HTTP_ERROR=6,Yg=Bs,lm.COMPLETE="complete",QB=lm,vt.EventType=Q,Q.OPEN="a",Q.CLOSE="b",Q.ERROR="c",Q.MESSAGE="d",ye.prototype.listen=ye.prototype.K,Gh=vt,gn.prototype.listenOnce=gn.prototype.L,gn.prototype.getLastError=gn.prototype.Ka,gn.prototype.getLastErrorCode=gn.prototype.Ba,gn.prototype.getStatus=gn.prototype.Z,gn.prototype.getResponseJson=gn.prototype.Oa,gn.prototype.getResponseText=gn.prototype.oa,gn.prototype.send=gn.prototype.ea,gn.prototype.setWithCredentials=gn.prototype.Ha,YB=gn}).apply(typeof Tg<"u"?Tg:typeof self<"u"?self:typeof window<"u"?window:{});const IL="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yf="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=new zB("@firebase/firestore");function Bc(){return Xl.logLevel}function Be(t,...e){if(Xl.logLevel<=Rt.DEBUG){const n=e.map(sM);Xl.debug(`Firestore (${Yf}): ${t}`,...n)}}function Aa(t,...e){if(Xl.logLevel<=Rt.ERROR){const n=e.map(sM);Xl.error(`Firestore (${Yf}): ${t}`,...n)}}function xf(t,...e){if(Xl.logLevel<=Rt.WARN){const n=e.map(sM);Xl.warn(`Firestore (${Yf}): ${t}`,...n)}}function sM(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t="Unexpected state"){const e=`FIRESTORE (${Yf}) INTERNAL ASSERTION FAILED: `+t;throw Aa(e),new Error(e)}function Ut(t,e){t||st()}function pt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends Kf{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BPe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(br.UNAUTHENTICATED))}shutdown(){}}class $Pe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zPe{constructor(e){this.t=e,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ut(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new ys;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ys,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},s=l=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>s(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?s(l):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ys)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ut(typeof r.accessToken=="string"),new t$(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ut(e===null||typeof e=="string"),new br(e)}}class HPe{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=br.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class GPe{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new HPe(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WPe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qPe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ut(this.o===void 0);const r=o=>{o.error!=null&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,Be("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ut(typeof n.token=="string"),this.R=n.token,new WPe(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XPe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=XPe(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function Mt(t,e){return t<e?-1:t>e?1:0}function bf(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{static now(){return Bn.fromMillis(Date.now())}static fromDate(e){return Bn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Bn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new He(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new He(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new He(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{static fromTimestamp(e){return new ut(e)}static min(){return new ut(new Bn(0,0))}static max(){return new ut(new Bn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n,r){n===void 0?n=0:n>e.length&&st(),r===void 0?r=e.length-n:r>e.length-n&&st(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Rp.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Rp?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),a=n.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class an extends Rp{construct(e,n,r){return new an(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new He(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new an(n)}static emptyPath(){return new an([])}}const KPe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sr extends Rp{construct(e,n,r){return new sr(e,n,r)}static isValidIdentifier(e){return KPe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new sr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new He(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new He(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new He(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else s==="`"?(a=!a,i++):s!=="."||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new He(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sr(n)}static emptyPath(){return new sr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.path=e}static fromPath(e){return new Je(an.fromString(e))}static fromName(e){return new Je(an.fromString(e).popFirst(5))}static empty(){return new Je(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&an.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return an.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new an(e.slice()))}}function YPe(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ut.fromTimestamp(r===1e9?new Bn(n+1,0):new Bn(n,r));return new Ms(i,Je.empty(),e)}function QPe(t){return new Ms(t.readTime,t.key,-1)}class Ms{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ms(ut.min(),Je.empty(),-1)}static max(){return new Ms(ut.max(),Je.empty(),-1)}}function ZPe(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Je.comparator(t.documentKey,e.documentKey),n!==0?n:Mt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JPe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eCe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qf(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==JPe)throw t;Be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new pe((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof pe?n:pe.resolve(n)}catch(n){return pe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):pe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):pe.reject(n)}static resolve(e){return new pe((n,r)=>{n(e)})}static reject(e){return new pe((n,r)=>{r(e)})}static waitFor(e){return new pe((n,r)=>{let i=0,o=0,a=!1;e.forEach(s=>{++i,s.next(()=>{++o,a&&o===i&&n()},l=>r(l))}),a=!0,o===i&&n()})}static or(e){let n=pe.resolve(!1);for(const r of e)n=n.next(i=>i?pe.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new pe((r,i)=>{const o=e.length,a=new Array(o);let s=0;for(let l=0;l<o;l++){const c=l;n(e[c]).next(u=>{a[c]=u,++s,s===o&&r(a)},u=>i(u))}})}static doWhile(e,n){return new pe((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function tCe(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}S_.oe=-1;function E_(t){return t==null}function Wy(t){return t===0&&1/t==-1/0}function nCe(t){return typeof t=="number"&&Number.isInteger(t)&&!Wy(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rCe(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=NL(e)),e=iCe(t.get(n),e);return NL(e)}function iCe(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function NL(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ic(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function r$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n){this.comparator=e,this.root=n||ar.EMPTY}insert(e,n){return new mn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ar.BLACK,null,null))}remove(e){return new mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ar.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ag(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ag(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ag(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ag(this.root,e,this.comparator,!0)}}class Ag{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ar{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??ar.RED,this.left=i??ar.EMPTY,this.right=o??ar.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new ar(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ar.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ar.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}ar.EMPTY=null,ar.RED=!0,ar.BLACK=!1;ar.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(e,n,r,i,o){return this}insert(e,n,r){return new ar(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.comparator=e,this.data=new mn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new LL(this.data.getIterator())}getIteratorFrom(e){return new LL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $n(this.comparator);return n.data=e,n}}class LL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.fields=e,e.sort(sr.comparator)}static empty(){return new ro([])}unionWith(e){let n=new $n(sr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ro(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bf(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i$ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new i$("Invalid base64 string: "+o):o}}(e);return new fr(n)}static fromUint8Array(e){const n=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new fr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fr.EMPTY_BYTE_STRING=new fr("");const oCe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(t){if(Ut(!!t),typeof t=="string"){let e=0;const n=oCe.exec(t);if(Ut(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bn(t.seconds),nanos:bn(t.nanos)}}function bn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cs(t){return typeof t=="string"?fr.fromBase64String(t):fr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function T_(t){const e=t.mapValue.fields.__previous_value__;return lM(e)?T_(e):e}function Op(t){const e=Ps(t.mapValue.fields.__local_write_time__.timestampValue);return new Bn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aCe{constructor(e,n,r,i,o,a,s,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=s,this.longPollingOptions=l,this.useFetchStreams=c}}class Ip{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ip("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ip&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Rs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?lM(t)?4:lCe(t)?9007199254740991:sCe(t)?10:11:st()}function ko(t,e){if(t===e)return!0;const n=Rs(t);if(n!==Rs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Op(t).isEqual(Op(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const a=Ps(i.timestampValue),s=Ps(o.timestampValue);return a.seconds===s.seconds&&a.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Cs(i.bytesValue).isEqual(Cs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return bn(i.geoPointValue.latitude)===bn(o.geoPointValue.latitude)&&bn(i.geoPointValue.longitude)===bn(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return bn(i.integerValue)===bn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const a=bn(i.doubleValue),s=bn(o.doubleValue);return a===s?Wy(a)===Wy(s):isNaN(a)&&isNaN(s)}return!1}(t,e);case 9:return bf(t.arrayValue.values||[],e.arrayValue.values||[],ko);case 10:case 11:return function(i,o){const a=i.mapValue.fields||{},s=o.mapValue.fields||{};if(DL(a)!==DL(s))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(s[l]===void 0||!ko(a[l],s[l])))return!1;return!0}(t,e);default:return st()}}function Np(t,e){return(t.values||[]).find(n=>ko(n,e))!==void 0}function wf(t,e){if(t===e)return 0;const n=Rs(t),r=Rs(e);if(n!==r)return Mt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Mt(t.booleanValue,e.booleanValue);case 2:return function(o,a){const s=bn(o.integerValue||o.doubleValue),l=bn(a.integerValue||a.doubleValue);return s<l?-1:s>l?1:s===l?0:isNaN(s)?isNaN(l)?0:-1:1}(t,e);case 3:return kL(t.timestampValue,e.timestampValue);case 4:return kL(Op(t),Op(e));case 5:return Mt(t.stringValue,e.stringValue);case 6:return function(o,a){const s=Cs(o),l=Cs(a);return s.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const s=o.split("/"),l=a.split("/");for(let c=0;c<s.length&&c<l.length;c++){const u=Mt(s[c],l[c]);if(u!==0)return u}return Mt(s.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const s=Mt(bn(o.latitude),bn(a.latitude));return s!==0?s:Mt(bn(o.longitude),bn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return jL(t.arrayValue,e.arrayValue);case 10:return function(o,a){var s,l,c,u;const f=o.fields||{},h=a.fields||{},d=(s=f.value)===null||s===void 0?void 0:s.arrayValue,y=(l=h.value)===null||l===void 0?void 0:l.arrayValue,v=Mt(((c=d==null?void 0:d.values)===null||c===void 0?void 0:c.length)||0,((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:jL(d,y)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Mg.mapValue&&a===Mg.mapValue)return 0;if(o===Mg.mapValue)return 1;if(a===Mg.mapValue)return-1;const s=o.fields||{},l=Object.keys(s),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const h=Mt(l[f],u[f]);if(h!==0)return h;const d=wf(s[l[f]],c[u[f]]);if(d!==0)return d}return Mt(l.length,u.length)}(t.mapValue,e.mapValue);default:throw st()}}function kL(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Mt(t,e);const n=Ps(t),r=Ps(e),i=Mt(n.seconds,r.seconds);return i!==0?i:Mt(n.nanos,r.nanos)}function jL(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=wf(n[i],r[i]);if(o)return o}return Mt(n.length,r.length)}function Sf(t){return YS(t)}function YS(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ps(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Je.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=YS(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${YS(n.fields[a])}`;return i+"}"}(t.mapValue):st()}function Qg(t){switch(Rs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=T_(t);return e?16+Qg(e):16;case 5:return 2*t.stringValue.length;case 6:return Cs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Qg(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ic(r.fields,(o,a)=>{i+=o.length+Qg(a)}),i}(t.mapValue);default:throw st()}}function UL(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function QS(t){return!!t&&"integerValue"in t}function cM(t){return!!t&&"arrayValue"in t}function FL(t){return!!t&&"nullValue"in t}function VL(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zg(t){return!!t&&"mapValue"in t}function sCe(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function gd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ic(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=gd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=gd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function lCe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.value=e}static empty(){return new Ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Zg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=gd(n)}setAll(e){let n=sr.emptyPath(),r={},i=[];e.forEach((a,s)=>{if(!n.isImmediateParentOf(s)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=s.popLast()}a?r[s.lastSegment()]=gd(a):i.push(s.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Zg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ko(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Zg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ic(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Ri(gd(this.value))}}function o$(t){const e=[];return ic(t.fields,(n,r)=>{const i=new sr([n]);if(Zg(r)){const o=o$(r.mapValue).fields;if(o.length===0)e.push(i);else for(const a of o)e.push(i.child(a))}else e.push(i)}),new ro(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n,r,i,o,a,s){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=s}static newInvalidDocument(e){return new Tr(e,0,ut.min(),ut.min(),ut.min(),Ri.empty(),0)}static newFoundDocument(e,n,r,i){return new Tr(e,1,n,ut.min(),r,i,0)}static newNoDocument(e,n){return new Tr(e,2,n,ut.min(),ut.min(),Ri.empty(),0)}static newUnknownDocument(e,n){return new Tr(e,3,n,ut.min(),ut.min(),Ri.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n){this.position=e,this.inclusive=n}}function BL(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],a=t.position[i];if(o.field.isKeyField()?r=Je.comparator(Je.fromName(a.referenceValue),n.key):r=wf(a,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function $L(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ko(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n="asc"){this.field=e,this.dir=n}}function cCe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${}class On extends a${constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new fCe(e,n,r):n==="array-contains"?new pCe(e,r):n==="in"?new mCe(e,r):n==="not-in"?new gCe(e,r):n==="array-contains-any"?new vCe(e,r):new On(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new hCe(e,r):new dCe(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(wf(n,this.value)):n!==null&&Rs(this.value)===Rs(n)&&this.matchesComparison(wf(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return st()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fo extends a${constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new fo(e,n)}matches(e){return s$(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function s$(t){return t.op==="and"}function l$(t){return uCe(t)&&s$(t)}function uCe(t){for(const e of t.filters)if(e instanceof fo)return!1;return!0}function ZS(t){if(t instanceof On)return t.field.canonicalString()+t.op.toString()+Sf(t.value);if(l$(t))return t.filters.map(e=>ZS(e)).join(",");{const e=t.filters.map(n=>ZS(n)).join(",");return`${t.op}(${e})`}}function c$(t,e){return t instanceof On?function(r,i){return i instanceof On&&r.op===i.op&&r.field.isEqual(i.field)&&ko(r.value,i.value)}(t,e):t instanceof fo?function(r,i){return i instanceof fo&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,s)=>o&&c$(a,i.filters[s]),!0):!1}(t,e):void st()}function u$(t){return t instanceof On?function(n){return`${n.field.canonicalString()} ${n.op} ${Sf(n.value)}`}(t):t instanceof fo?function(n){return n.op.toString()+" {"+n.getFilters().map(u$).join(" ,")+"}"}(t):"Filter"}class fCe extends On{constructor(e,n,r){super(e,n,r),this.key=Je.fromName(r.referenceValue)}matches(e){const n=Je.comparator(e.key,this.key);return this.matchesComparison(n)}}class hCe extends On{constructor(e,n){super(e,"in",n),this.keys=f$("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class dCe extends On{constructor(e,n){super(e,"not-in",n),this.keys=f$("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function f$(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Je.fromName(r.referenceValue))}class pCe extends On{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cM(n)&&Np(n.arrayValue,this.value)}}class mCe extends On{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Np(this.value.arrayValue,n)}}class gCe extends On{constructor(e,n){super(e,"not-in",n)}matches(e){if(Np(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Np(this.value.arrayValue,n)}}class vCe extends On{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cM(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Np(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yCe{constructor(e,n=null,r=[],i=[],o=null,a=null,s=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=s,this.ue=null}}function zL(t,e=null,n=[],r=[],i=null,o=null,a=null){return new yCe(t,e,n,r,i,o,a)}function uM(t){const e=pt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ZS(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),E_(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Sf(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Sf(r)).join(",")),e.ue=n}return e.ue}function fM(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cCe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!c$(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$L(t.startAt,e.startAt)&&$L(t.endAt,e.endAt)}function JS(t){return Je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n=null,r=[],i=[],o=null,a="F",s=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=s,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function _Ce(t,e,n,r,i,o,a,s){return new Jf(t,e,n,r,i,o,a,s)}function h$(t){return new Jf(t)}function HL(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function d$(t){return t.collectionGroup!==null}function vd(t){const e=pt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let s=new $n(sr.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(s=s.add(c.field))})}),s})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Dp(o,r))}),n.has(sr.keyField().canonicalString())||e.ce.push(new Dp(sr.keyField(),r))}return e.ce}function Oo(t){const e=pt(t);return e.le||(e.le=xCe(e,vd(t))),e.le}function xCe(t,e){if(t.limitType==="F")return zL(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Dp(i.field,o)});const n=t.endAt?new qy(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new qy(t.startAt.position,t.startAt.inclusive):null;return zL(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function eE(t,e){const n=t.filters.concat([e]);return new Jf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xy(t,e,n){return new Jf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function A_(t,e){return fM(Oo(t),Oo(e))&&t.limitType===e.limitType}function p$(t){return`${uM(Oo(t))}|lt:${t.limitType}`}function $c(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>u$(i)).join(", ")}]`),E_(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Sf(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Sf(i)).join(",")),`Target(${r})`}(Oo(t))}; limitType=${t.limitType})`}function M_(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Je.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of vd(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,s,l){const c=BL(a,s,l);return a.inclusive?c<=0:c<0}(r.startAt,vd(r),i)||r.endAt&&!function(a,s,l){const c=BL(a,s,l);return a.inclusive?c>=0:c>0}(r.endAt,vd(r),i))}(t,e)}function bCe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function m$(t){return(e,n)=>{let r=!1;for(const i of vd(t)){const o=wCe(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function wCe(t,e,n){const r=t.field.isKeyField()?Je.comparator(e.key,n.key):function(o,a,s){const l=a.data.field(o),c=s.data.field(o);return l!==null&&c!==null?wf(l,c):st()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ic(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return r$(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SCe=new mn(Je.comparator);function Ma(){return SCe}const g$=new mn(Je.comparator);function Wh(...t){let e=g$;for(const n of t)e=e.insert(n.key,n);return e}function v$(t){let e=g$;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Sl(){return yd()}function y$(){return yd()}function yd(){return new oc(t=>t.toString(),(t,e)=>t.isEqual(e))}const ECe=new mn(Je.comparator),TCe=new $n(Je.comparator);function At(...t){let e=TCe;for(const n of t)e=e.add(n);return e}const ACe=new $n(Mt);function MCe(){return ACe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wy(e)?"-0":e}}function _$(t){return{integerValue:""+t}}function PCe(t,e){return nCe(e)?_$(e):hM(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(){this._=void 0}}function CCe(t,e,n){return t instanceof Ky?function(i,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&lM(o)&&(o=T_(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof Lp?b$(t,e):t instanceof kp?w$(t,e):function(i,o){const a=x$(i,o),s=GL(a)+GL(i.Pe);return QS(a)&&QS(i.Pe)?_$(s):hM(i.serializer,s)}(t,e)}function RCe(t,e,n){return t instanceof Lp?b$(t,e):t instanceof kp?w$(t,e):n}function x$(t,e){return t instanceof Yy?function(r){return QS(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Ky extends P_{}class Lp extends P_{constructor(e){super(),this.elements=e}}function b$(t,e){const n=S$(e);for(const r of t.elements)n.some(i=>ko(i,r))||n.push(r);return{arrayValue:{values:n}}}class kp extends P_{constructor(e){super(),this.elements=e}}function w$(t,e){let n=S$(e);for(const r of t.elements)n=n.filter(i=>!ko(i,r));return{arrayValue:{values:n}}}class Yy extends P_{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function GL(t){return bn(t.integerValue||t.doubleValue)}function S$(t){return cM(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function OCe(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Lp&&i instanceof Lp||r instanceof kp&&i instanceof kp?bf(r.elements,i.elements,ko):r instanceof Yy&&i instanceof Yy?ko(r.Pe,i.Pe):r instanceof Ky&&i instanceof Ky}(t.transform,e.transform)}class ICe{constructor(e,n){this.version=e,this.transformResults=n}}class ma{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ma}static exists(e){return new ma(void 0,e)}static updateTime(e){return new ma(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class C_{}function E$(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new A$(t.key,ma.none()):new rm(t.key,t.data,ma.none());{const n=t.data,r=Ri.empty();let i=new $n(sr.comparator);for(let o of e.fields)if(!i.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new ac(t.key,r,new ro(i.toArray()),ma.none())}}function NCe(t,e,n){t instanceof rm?function(i,o,a){const s=i.value.clone(),l=qL(i.fieldTransforms,o,a.transformResults);s.setAll(l),o.convertToFoundDocument(a.version,s).setHasCommittedMutations()}(t,e,n):t instanceof ac?function(i,o,a){if(!Jg(i.precondition,o))return void o.convertToUnknownDocument(a.version);const s=qL(i.fieldTransforms,o,a.transformResults),l=o.data;l.setAll(T$(i)),l.setAll(s),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function _d(t,e,n,r){return t instanceof rm?function(o,a,s,l){if(!Jg(o.precondition,a))return s;const c=o.value.clone(),u=XL(o.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ac?function(o,a,s,l){if(!Jg(o.precondition,a))return s;const c=XL(o.fieldTransforms,l,a),u=a.data;return u.setAll(T$(o)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),s===null?null:s.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(o,a,s){return Jg(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):s}(t,e,n)}function DCe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=x$(r.transform,i||null);o!=null&&(n===null&&(n=Ri.empty()),n.set(r.field,o))}return n||null}function WL(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&bf(r,i,(o,a)=>OCe(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class rm extends C_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ac extends C_{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function T$(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function qL(t,e,n){const r=new Map;Ut(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,RCe(a,s,n[i]))}return r}function XL(t,e,n){const r=new Map;for(const i of t){const o=i.transform,a=n.data.field(i.field);r.set(i.field,CCe(o,a,e))}return r}class A$ extends C_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LCe extends C_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kCe{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&NCe(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_d(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_d(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=y$();return this.mutations.forEach(i=>{const o=e.get(i.key),a=o.overlayedDocument;let s=this.applyToLocalView(a,o.mutatedFields);s=n.has(i.key)?null:s;const l=E$(a,s);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(ut.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),At())}isEqual(e){return this.batchId===e.batchId&&bf(this.mutations,e.mutations,(n,r)=>WL(n,r))&&bf(this.baseMutations,e.baseMutations,(n,r)=>WL(n,r))}}class dM{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ut(e.mutations.length===r.length);let i=function(){return ECe}();const o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new dM(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jCe{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UCe{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pn,Ct;function FCe(t){switch(t){default:return st();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function M$(t){if(t===void 0)return Aa("GRPC error has no .code"),ve.UNKNOWN;switch(t){case Pn.OK:return ve.OK;case Pn.CANCELLED:return ve.CANCELLED;case Pn.UNKNOWN:return ve.UNKNOWN;case Pn.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case Pn.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case Pn.INTERNAL:return ve.INTERNAL;case Pn.UNAVAILABLE:return ve.UNAVAILABLE;case Pn.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case Pn.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case Pn.NOT_FOUND:return ve.NOT_FOUND;case Pn.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case Pn.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case Pn.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case Pn.ABORTED:return ve.ABORTED;case Pn.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case Pn.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case Pn.DATA_LOSS:return ve.DATA_LOSS;default:return st()}}(Ct=Pn||(Pn={}))[Ct.OK=0]="OK",Ct[Ct.CANCELLED=1]="CANCELLED",Ct[Ct.UNKNOWN=2]="UNKNOWN",Ct[Ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ct[Ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ct[Ct.NOT_FOUND=5]="NOT_FOUND",Ct[Ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ct[Ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ct[Ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ct[Ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ct[Ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ct[Ct.ABORTED=10]="ABORTED",Ct[Ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ct[Ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ct[Ct.INTERNAL=13]="INTERNAL",Ct[Ct.UNAVAILABLE=14]="UNAVAILABLE",Ct[Ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VCe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BCe=new Nl([4294967295,4294967295],0);function KL(t){const e=VCe().encode(t),n=new KB;return n.update(e),new Uint8Array(n.digest())}function YL(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Nl([n,r],0),new Nl([i,o],0)]}class pM{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qh(`Invalid padding: ${n}`);if(r<0)throw new qh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qh(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Nl.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(Nl.fromNumber(r)));return i.compare(BCe)===1&&(i=new Nl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=KL(e),[r,i]=YL(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(r,i,o);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new pM(o,i,n);return r.forEach(s=>a.insert(s)),a}insert(e){if(this.Te===0)return;const n=KL(e),[r,i]=YL(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(r,i,o);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,im.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new R_(ut.min(),i,new mn(Mt),Ma(),At())}}class im{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new im(r,n,At(),At(),At())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class P${constructor(e,n){this.targetId=e,this.me=n}}class C${constructor(e,n,r=fr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class QL{constructor(){this.fe=0,this.ge=ZL(),this.pe=fr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=At(),n=At(),r=At();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:st()}}),new im(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ZL()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ut(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $Ce{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ma(),this.qe=Pg(),this.Qe=Pg(),this.Ke=new mn(Mt)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:st()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const o=i.target;if(JS(o))if(r===0){const a=new Je(o.path);this.We(n,a,Tr.newNoDocument(a,ut.min()))}else Ut(r===1);else{const a=this.Ze(n);if(a!==r){const s=this.Xe(e),l=s?this.et(s,e,a):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let a,s;try{a=Cs(r).toUint8Array()}catch(l){if(l instanceof i$)return xf("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{s=new pM(a,i,o)}catch(l){return xf(l instanceof qh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return s.Te===0?null:s}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const a=this.Le.nt(),s=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(s)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.Be.forEach((o,a)=>{const s=this.Ye(a);if(s){if(o.current&&JS(s.target)){const l=new Je(s.target.path);this.st(l).has(a)||this.ot(a,l)||this.We(a,l,Tr.newNoDocument(l,e))}o.be&&(n.set(a,o.ve()),o.Ce())}});let r=At();this.Qe.forEach((o,a)=>{let s=!0;a.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(r=r.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const i=new R_(e,n,this.Ke,this.ke,r);return this.ke=Ma(),this.qe=Pg(),this.Qe=Pg(),this.Ke=new mn(Mt),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new QL,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new $n(Mt),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new $n(Mt),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||Be("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new QL),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Pg(){return new mn(Je.comparator)}function ZL(){return new mn(Je.comparator)}const zCe={asc:"ASCENDING",desc:"DESCENDING"},HCe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GCe={and:"AND",or:"OR"};class WCe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tE(t,e){return t.useProto3Json||E_(e)?e:{value:e}}function Qy(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function R$(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qCe(t,e){return Qy(t,e.toTimestamp())}function Io(t){return Ut(!!t),ut.fromTimestamp(function(n){const r=Ps(n);return new Bn(r.seconds,r.nanos)}(t))}function mM(t,e){return nE(t,e).canonicalString()}function nE(t,e){const n=function(i){return new an(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function O$(t){const e=an.fromString(t);return Ut(k$(e)),e}function rE(t,e){return mM(t.databaseId,e.path)}function Vb(t,e){const n=O$(e);if(n.get(1)!==t.databaseId.projectId)throw new He(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new He(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Je(N$(n))}function I$(t,e){return mM(t.databaseId,e)}function XCe(t){const e=O$(t);return e.length===4?an.emptyPath():N$(e)}function iE(t){return new an(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function N$(t){return Ut(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function JL(t,e,n){return{name:rE(t,e),fields:n.value.mapValue.fields}}function KCe(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:st()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,u){return c.useProto3Json?(Ut(u===void 0||typeof u=="string"),fr.fromBase64String(u||"")):(Ut(u===void 0||u instanceof Buffer||u instanceof Uint8Array),fr.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,s=a&&function(c){const u=c.code===void 0?ve.UNKNOWN:M$(c.code);return new He(u,c.message||"")}(a);n=new C$(r,i,o,s||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Vb(t,r.document.name),o=Io(r.document.updateTime),a=r.document.createTime?Io(r.document.createTime):ut.min(),s=new Ri({mapValue:{fields:r.document.fields}}),l=Tr.newFoundDocument(i,o,a,s),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ev(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Vb(t,r.document),o=r.readTime?Io(r.readTime):ut.min(),a=Tr.newNoDocument(i,o),s=r.removedTargetIds||[];n=new ev([],s,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Vb(t,r.document),o=r.removedTargetIds||[];n=new ev([],o,i,null)}else{if(!("filter"in e))return st();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,a=new UCe(i,o),s=r.targetId;n=new P$(s,a)}}return n}function YCe(t,e){let n;if(e instanceof rm)n={update:JL(t,e.key,e.value)};else if(e instanceof A$)n={delete:rE(t,e.key)};else if(e instanceof ac)n={update:JL(t,e.key,e.data),updateMask:o2e(e.fieldMask)};else{if(!(e instanceof LCe))return st();n={verify:rE(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,a){const s=a.transform;if(s instanceof Ky)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof Lp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof kp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof Yy)return{fieldPath:a.field.canonicalString(),increment:s.Pe};throw st()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:qCe(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:st()}(t,e.precondition)),n}function QCe(t,e){return t&&t.length>0?(Ut(e!==void 0),t.map(n=>function(i,o){let a=i.updateTime?Io(i.updateTime):Io(o);return a.isEqual(ut.min())&&(a=Io(o)),new ICe(a,i.transformResults||[])}(n,e))):[]}function ZCe(t,e){return{documents:[I$(t,e.path)]}}function JCe(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=I$(t,i);const o=function(c){if(c.length!==0)return L$(fo.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:zc(h.field),direction:n2e(h.dir)}}(u))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const s=tE(t,e.limit);return s!==null&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:n,parent:i}}function e2e(t){let e=XCe(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ut(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];n.where&&(o=function(f){const h=D$(f);return h instanceof fo&&l$(h)?h.getFilters():[h]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(h=>function(y){return new Dp(Hc(y.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(h))}(n.orderBy));let s=null;n.limit&&(s=function(f){let h;return h=typeof f=="object"?f.value:f,E_(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(f){const h=!!f.before,d=f.values||[];return new qy(d,h)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const h=!f.before,d=f.values||[];return new qy(d,h)}(n.endAt)),_Ce(e,i,a,o,s,"F",l,c)}function t2e(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function D$(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hc(n.unaryFilter.field);return On.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Hc(n.unaryFilter.field);return On.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Hc(n.unaryFilter.field);return On.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Hc(n.unaryFilter.field);return On.create(a,"!=",{nullValue:"NULL_VALUE"});default:return st()}}(t):t.fieldFilter!==void 0?function(n){return On.create(Hc(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fo.create(n.compositeFilter.filters.map(r=>D$(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return st()}}(n.compositeFilter.op))}(t):st()}function n2e(t){return zCe[t]}function r2e(t){return HCe[t]}function i2e(t){return GCe[t]}function zc(t){return{fieldPath:t.canonicalString()}}function Hc(t){return sr.fromServerFormat(t.fieldPath)}function L$(t){return t instanceof On?function(n){if(n.op==="=="){if(VL(n.value))return{unaryFilter:{field:zc(n.field),op:"IS_NAN"}};if(FL(n.value))return{unaryFilter:{field:zc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(VL(n.value))return{unaryFilter:{field:zc(n.field),op:"IS_NOT_NAN"}};if(FL(n.value))return{unaryFilter:{field:zc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zc(n.field),op:r2e(n.op),value:n.value}}}(t):t instanceof fo?function(n){const r=n.getFilters().map(i=>L$(i));return r.length===1?r[0]:{compositeFilter:{op:i2e(n.op),filters:r}}}(t):st()}function o2e(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function k$(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n,r,i,o=ut.min(),a=ut.min(),s=fr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=s,this.expectedCount=l}withSequenceNumber(e){return new rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2e{constructor(e){this.ht=e}}function s2e(t){const e=e2e({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2e{constructor(){this.ln=new c2e}addToCollectionParentIndex(e,n){return this.ln.add(n),pe.resolve()}getCollectionParents(e,n){return pe.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return pe.resolve()}deleteFieldIndex(e,n){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,n){return pe.resolve()}getDocumentsMatchingTarget(e,n){return pe.resolve(null)}getIndexType(e,n){return pe.resolve(0)}getFieldIndexes(e,n){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,n){return pe.resolve(Ms.min())}getMinOffsetFromCollectionGroup(e,n){return pe.resolve(Ms.min())}updateCollectionGroup(e,n,r){return pe.resolve()}updateIndexEntries(e,n){return pe.resolve()}}class c2e{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new $n(an.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $n(an.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zr{static withCacheSize(e){return new zr(e,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zr.DEFAULT_COLLECTION_PERCENTILE=10,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zr.DEFAULT=new zr(41943040,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zr.DISABLED=new zr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Ef(0)}static Qn(){return new Ef(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk([t,e],[n,r]){const i=Mt(t,n);return i===0?Mt(e,r):i}class u2e{constructor(e){this.Gn=e,this.buffer=new $n(tk),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();tk(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class f2e{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zf(n)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Qf(n)}await this.Yn(3e5)})}}class h2e{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return pe.resolve(S_.oe);const r=new u2e(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(ek)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ek):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,o,a,s,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,a=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,s=Date.now(),this.removeTargets(e,r,n))).next(f=>(o=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),Bc()<=Rt.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-u}ms
	Determined least recently used ${i} in `+(s-a)+`ms
	Removed ${o} targets in `+(l-s)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}}function d2e(t,e){return new h2e(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2e{constructor(){this.changes=new oc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?pe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2e{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2e{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&_d(r.mutation,i,ro.empty(),Bn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,At()).next(()=>r))}getLocalViewOfDocuments(e,n,r=At()){const i=Sl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let a=Wh();return o.forEach((s,l)=>{a=a.insert(s,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Sl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,At()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,s)=>{n.set(a,s)})})}computeViews(e,n,r,i){let o=Ma();const a=yd(),s=function(){return yd()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof ac)?o=o.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),_d(u.mutation,c,u.mutation.getFieldMask(),Bn.now())):a.set(c.key,ro.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,u)=>a.set(c,u)),n.forEach((c,u)=>{var f;return s.set(c,new m2e(u,(f=a.get(c))!==null&&f!==void 0?f:null))}),s))}recalculateAndSaveOverlays(e,n){const r=yd();let i=new mn((a,s)=>a-s),o=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const s of a)s.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||ro.empty();u=s.applyToLocalView(c,u),r.set(l,u);const f=(i.get(s.batchId)||At()).add(l);i=i.insert(s.batchId,f)})}).next(()=>{const a=[],s=i.getReverseIterator();for(;s.hasNext();){const l=s.getNext(),c=l.key,u=l.value,f=y$();u.forEach(h=>{if(!o.has(h)){const d=E$(n.get(h),r.get(h));d!==null&&f.set(h,d),o=o.add(h)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,f))}return pe.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return Je.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):d$(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):pe.resolve(Sl());let s=-1,l=o;return a.next(c=>pe.forEach(c,(u,f)=>(s<f.largestBatchId&&(s=f.largestBatchId),o.get(u)?pe.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,At())).next(u=>({batchId:s,changes:v$(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Je(n)).next(r=>{let i=Wh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let a=Wh();return this.indexManager.getCollectionParents(e,o).next(s=>pe.forEach(s,l=>{const c=function(f,h){return new Jf(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((f,h)=>{a=a.insert(f,h)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(a=>{o.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,Tr.newInvalidDocument(u)))});let s=Wh();return a.forEach((l,c)=>{const u=o.get(l);u!==void 0&&_d(u.mutation,c,ro.empty(),Bn.now()),M_(n,c)&&(s=s.insert(l,c))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2e{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return pe.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Io(i.createTime)}}(n)),pe.resolve()}getNamedQuery(e,n){return pe.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:s2e(i.bundledQuery),readTime:Io(i.readTime)}}(n)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2e{constructor(){this.overlays=new mn(Je.comparator),this.Er=new Map}getOverlay(e,n){return pe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Sl();return pe.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.Tt(e,n,o)}),pe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Er.delete(r)),pe.resolve()}getOverlaysForCollection(e,n,r){const i=Sl(),o=n.length+1,a=new Je(n.child("")),s=this.overlays.getIteratorFrom(a);for(;s.hasNext();){const l=s.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new mn((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=o.get(c.largestBatchId);u===null&&(u=Sl(),o=o.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const s=Sl(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>s.set(c,u)),!(s.size()>=i)););return pe.resolve(s)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new jCe(n,r));let o=this.Er.get(n);o===void 0&&(o=At(),this.Er.set(n,o)),this.Er.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2e{constructor(){this.sessionToken=fr.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(){this.dr=new $n(Kn.Ar),this.Rr=new $n(Kn.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new Kn(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new Kn(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new Je(new an([])),r=new Kn(n,e),i=new Kn(n,e+1),o=[];return this.Rr.forEachInRange([r,i],a=>{this.gr(a),o.push(a.key)}),o}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new Je(new an([])),r=new Kn(n,e),i=new Kn(n,e+1);let o=At();return this.Rr.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new Kn(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Kn{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return Je.comparator(e.key,n.key)||Mt(e.br,n.br)}static Vr(e,n){return Mt(e.br,n.br)||Je.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2e{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new $n(Kn.Ar)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new kCe(o,n,r,i);this.mutationQueue.push(a);for(const s of i)this.vr=this.vr.add(new Kn(s.key,o)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return pe.resolve(a)}lookupMutationBatch(e,n){return pe.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),o=i<0?0:i;return pe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Kn(n,0),i=new Kn(n,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],a=>{const s=this.Cr(a.br);o.push(s)}),pe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $n(Mt);return n.forEach(i=>{const o=new Kn(i,0),a=new Kn(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,a],s=>{r=r.add(s.br)})}),pe.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Je.isDocumentKey(o)||(o=o.child(""));const a=new Kn(new Je(o),0);let s=new $n(Mt);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(s=s.add(l.br)),!0)},a),pe.resolve(this.Mr(s))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ut(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return pe.forEach(n.mutations,i=>{const o=new Kn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new Kn(n,0),i=this.vr.firstAfterOrEqual(r);return pe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2e{constructor(e){this.Nr=e,this.docs=function(){return new mn(Je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,a=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return pe.resolve(r?r.document.mutableCopy():Tr.newInvalidDocument(n))}getEntries(e,n){let r=Ma();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Tr.newInvalidDocument(i))}),pe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Ma();const a=n.path,s=new Je(a.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||ZPe(QPe(u),r)<=0||(i.has(u.key)||M_(n,u))&&(o=o.insert(u.key,u.mutableCopy()))}return pe.resolve(o)}getAllFromCollectionGroup(e,n,r,i){st()}Lr(e,n){return pe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new w2e(this)}getSize(e){return pe.resolve(this.size)}}class w2e extends p2e{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),pe.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2e{constructor(e){this.persistence=e,this.Br=new oc(n=>uM(n),fM),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.kr=0,this.qr=new gM,this.targetCount=0,this.Qr=Ef.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),pe.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Ef(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,pe.resolve()}updateTargetData(e,n){return this.Un(n),pe.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Br.forEach((a,s)=>{s.sequenceNumber<=n&&r.get(s.targetId)===null&&(this.Br.delete(a),o.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),pe.waitFor(o).next(()=>i)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return pe.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),pe.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),pe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),pe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return pe.resolve(r)}containsKey(e,n){return pe.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(e,n){this.Kr={},this.overlays={},this.$r=new S_(0),this.Ur=!1,this.Ur=!0,this.Wr=new _2e,this.referenceDelegate=e(this),this.Gr=new S2e(this),this.indexManager=new l2e,this.remoteDocumentCache=function(i){return new b2e(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new a2e(n),this.jr=new v2e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new y2e,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new x2e(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){Be("MemoryPersistence","Starting transaction:",e);const i=new E2e(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,n){return pe.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class E2e extends eCe{constructor(e){super(),this.currentSequenceNumber=e}}class vM{constructor(e){this.persistence=e,this.Zr=new gM,this.Xr=null}static ei(e){return new vM(e)}get ti(){if(this.Xr)return this.Xr;throw st()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),pe.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),pe.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.ti,r=>{const i=Je.fromPath(r);return this.ni(e,i).next(o=>{o||n.removeEntry(i,ut.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return pe.or([()=>pe.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class Zy{constructor(e,n){this.persistence=e,this.ri=new oc(r=>rCe(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=d2e(this,n)}static ei(e,n){return new Zy(e,n)}Hr(){}Jr(e){return pe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return pe.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?pe.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Lr(e,a=>this.ir(e,a,n).next(s=>{s||(r++,o.removeEntry(a,ut.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),pe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),pe.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),pe.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qg(e.data.value)),n}ir(e,n,r){return pe.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return pe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=At(),i=At();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new yM(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2e{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return SMe()?8:tCe(bMe())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Xi(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.es(e,n,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new T2e;return this.ts(e,n,a).next(s=>{if(o.result=s,this.Hi)return this.ns(e,n,a,s.size)})}).next(()=>o.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(Bc()<=Rt.DEBUG&&Be("QueryEngine","SDK will not create cache indexes for query:",$c(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),pe.resolve()):(Bc()<=Rt.DEBUG&&Be("QueryEngine","Query:",$c(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Bc()<=Rt.DEBUG&&Be("QueryEngine","The SDK decides to create cache indexes for query:",$c(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Oo(n))):pe.resolve())}Xi(e,n){if(HL(n))return pe.resolve(null);let r=Oo(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Xy(n,null,"F"),r=Oo(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const a=At(...o);return this.Zi.getDocuments(e,a).next(s=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.rs(n,s);return this.ss(n,c,a,l.readTime)?this.Xi(e,Xy(n,null,"F")):this.os(e,c,n,l)}))})))}es(e,n,r,i){return HL(n)||i.isEqual(ut.min())?pe.resolve(null):this.Zi.getDocuments(e,r).next(o=>{const a=this.rs(n,o);return this.ss(n,a,r,i)?pe.resolve(null):(Bc()<=Rt.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$c(n)),this.os(e,a,n,YPe(i,-1)).next(s=>s))})}rs(e,n){let r=new $n(m$(e));return n.forEach((i,o)=>{M_(e,o)&&(r=r.add(o))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,n,r){return Bc()<=Rt.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",$c(n)),this.Zi.getDocumentsMatchingQuery(e,n,Ms.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2e{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new mn(Mt),this.cs=new oc(o=>uM(o),fM),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new g2e(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function P2e(t,e,n,r){return new M2e(t,e,n,r)}async function U$(t,e){const n=pt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],s=[];let l=At();for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of o){s.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ts:c,removedBatchIds:a,addedBatchIds:s}))})})}function C2e(t,e){const n=pt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.hs.newChangeBuffer({trackRemovals:!0});return function(s,l,c,u){const f=c.batch,h=f.keys();let d=pe.resolve();return h.forEach(y=>{d=d.next(()=>u.getEntry(l,y)).next(v=>{const g=c.docVersions.get(y);Ut(g!==null),v.version.compareTo(g)<0&&(f.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),d.next(()=>s.mutationQueue.removeMutationBatch(l,f))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(s){let l=At();for(let c=0;c<s.mutationResults.length;++c)s.mutationResults[c].transformResults.length>0&&(l=l.add(s.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function F$(t){const e=pt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function R2e(t,e){const n=pt(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const s=[];e.targetChanges.forEach((u,f)=>{const h=i.get(f);if(!h)return;s.push(n.Gr.removeMatchingKeys(o,u.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(o,u.addedDocuments,f)));let d=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?d=d.withResumeToken(fr.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):u.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(u.resumeToken,r)),i=i.insert(f,d),function(v,g,p){return v.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size>0}(h,d,u)&&s.push(n.Gr.updateTargetData(o,d))});let l=Ma(),c=At();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,u))}),s.push(O2e(o,a,e.documentUpdates).next(u=>{l=u.Is,c=u.Es})),!r.isEqual(ut.min())){const u=n.Gr.getLastRemoteSnapshotVersion(o).next(f=>n.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));s.push(u)}return pe.waitFor(s).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(n.us=i,o))}function O2e(t,e,n){let r=At(),i=At();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let a=Ma();return n.forEach((s,l)=>{const c=o.get(s);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(s)),l.isNoDocument()&&l.version.isEqual(ut.min())?(e.removeEntry(s,l.readTime),a=a.insert(s,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(s,l)):Be("LocalStore","Ignoring outdated watch update for ",s,". Current version:",c.version," Watch version:",l.version)}),{Is:a,Es:i}})}function I2e(t,e){const n=pt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function N2e(t,e){const n=pt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(o=>o?(i=o,pe.resolve(i)):n.Gr.allocateTargetId(r).next(a=>(i=new rs(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function oE(t,e,n){const r=pt(t),i=r.us.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Zf(a))throw a;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function nk(t,e,n){const r=pt(t);let i=ut.min(),o=At();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const f=pt(l),h=f.cs.get(u);return h!==void 0?pe.resolve(f.us.get(h)):f.Gr.getTargetData(c,u)}(r,a,Oo(e)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(a,s.targetId).next(l=>{o=l})}).next(()=>r._s.getDocumentsMatchingQuery(a,e,n?i:ut.min(),n?o:At())).next(s=>(D2e(r,bCe(e),s),{documents:s,ds:o})))}function D2e(t,e,n){let r=t.ls.get(e)||ut.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ls.set(e,r)}class rk{constructor(){this.activeTargetIds=MCe()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class L2e{constructor(){this._o=new rk,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new rk,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2e{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cg=null;function Bb(){return Cg===null?Cg=function(){return 268435456+Math.round(2147483648*Math.random())}():Cg++,"0x"+Cg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2e{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr="WebChannelConnection";class F2e extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(n,r,i,o,a){const s=Bb(),l=this.No(n,r.toUriEncodedString());Be("RestConnection",`Sending RPC '${n}' ${s}:`,l,i);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(c,o,a),this.Bo(n,l,c,i).then(u=>(Be("RestConnection",`Received RPC '${n}' ${s}: `,u),u),u=>{throw xf("RestConnection",`RPC '${n}' ${s} failed with error: `,u,"url: ",l,"request:",i),u})}ko(n,r,i,o,a,s){return this.Oo(n,r,i,o,a)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yf}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,a)=>n[a]=o),i&&i.headers.forEach((o,a)=>n[a]=o)}No(n,r){const i=j2e[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){const o=Bb();return new Promise((a,s)=>{const l=new YB;l.setWithCredentials(!0),l.listenOnce(QB.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Yg.NO_ERROR:const u=l.getResponseJson();Be(yr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),a(u);break;case Yg.TIMEOUT:Be(yr,`RPC '${e}' ${o} timed out`),s(new He(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Yg.HTTP_ERROR:const f=l.getStatus();if(Be(yr,`RPC '${e}' ${o} failed with status:`,f,"response text:",l.getResponseText()),f>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const d=h==null?void 0:h.error;if(d&&d.status&&d.message){const y=function(g){const p=g.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(p)>=0?p:ve.UNKNOWN}(d.status);s(new He(y,d.message))}else s(new He(ve.UNKNOWN,"Server responded with status "+l.getStatus()))}else s(new He(ve.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Be(yr,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);Be(yr,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",c,r,15)})}qo(e,n,r){const i=Bb(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=e$(),s=JB(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=o.join("");Be(yr,`Creating RPC '${e}' stream ${i}: ${u}`,l);const f=a.createWebChannel(u,l);let h=!1,d=!1;const y=new U2e({Eo:g=>{d?Be(yr,`Not sending because RPC '${e}' stream ${i} is closed:`,g):(h||(Be(yr,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),Be(yr,`RPC '${e}' stream ${i} sending:`,g),f.send(g))},Ao:()=>f.close()}),v=(g,p,x)=>{g.listen(p,_=>{try{x(_)}catch(T){setTimeout(()=>{throw T},0)}})};return v(f,Gh.EventType.OPEN,()=>{d||(Be(yr,`RPC '${e}' stream ${i} transport opened.`),y.So())}),v(f,Gh.EventType.CLOSE,()=>{d||(d=!0,Be(yr,`RPC '${e}' stream ${i} transport closed`),y.Do())}),v(f,Gh.EventType.ERROR,g=>{d||(d=!0,xf(yr,`RPC '${e}' stream ${i} transport errored:`,g),y.Do(new He(ve.UNAVAILABLE,"The operation could not be completed")))}),v(f,Gh.EventType.MESSAGE,g=>{var p;if(!d){const x=g.data[0];Ut(!!x);const _=x,T=(_==null?void 0:_.error)||((p=_[0])===null||p===void 0?void 0:p.error);if(T){Be(yr,`RPC '${e}' stream ${i} received error:`,T);const w=T.status;let M=function(E){const P=Pn[E];if(P!==void 0)return M$(P)}(w),b=T.message;M===void 0&&(M=ve.INTERNAL,b="Unknown error status: "+w+" with message "+T.message),d=!0,y.Do(new He(M,b)),f.close()}else Be(yr,`RPC '${e}' stream ${i} received:`,x),y.vo(x)}}),v(s,ZB.STAT_EVENT,g=>{g.stat===KS.PROXY?Be(yr,`RPC '${e}' stream ${i} detected buffering proxy`):g.stat===KS.NOPROXY&&Be(yr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.bo()},0),y}}function $b(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t){return new WCe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(e,n,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(e,n,r,i,o,a,s,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=s,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new V$(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(Aa(n.toString()),Aa("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new He(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class V2e extends B${constructor(e,n,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=KCe(this.serializer,e),r=function(o){if(!("targetChange"in o))return ut.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?ut.min():a.readTime?Io(a.readTime):ut.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=iE(this.serializer),n.addTarget=function(o,a){let s;const l=a.target;if(s=JS(l)?{documents:ZCe(o,l)}:{query:JCe(o,l).ct},s.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){s.resumeToken=R$(o,a.resumeToken);const c=tE(o,a.expectedCount);c!==null&&(s.expectedCount=c)}else if(a.snapshotVersion.compareTo(ut.min())>0){s.readTime=Qy(o,a.snapshotVersion.toTimestamp());const c=tE(o,a.expectedCount);c!==null&&(s.expectedCount=c)}return s}(this.serializer,e);const r=t2e(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=iE(this.serializer),n.removeTarget=e,this.c_(n)}}class B2e extends B${constructor(e,n,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Ut(!!e.streamToken),this.lastStreamToken=e.streamToken,Ut(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=QCe(e.writeResults,e.commitTime),r=Io(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=iE(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>YCe(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2e extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new He(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Oo(e,nE(n,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new He(ve.UNKNOWN,o.toString())})}ko(e,n,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.ko(e,nE(n,r),i,a,s,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new He(ve.UNKNOWN,a.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class z2e{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Aa(n),this.C_=!1):Be("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2e{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(a=>{r.enqueueAndForget(async()=>{sc(this)&&(Be("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=pt(l);c.k_.add(4),await om(c),c.K_.set("Unknown"),c.k_.delete(4),await I_(c)}(this))})}),this.K_=new z2e(r,i)}}async function I_(t){if(sc(t))for(const e of t.q_)await e(!0)}async function om(t){for(const e of t.q_)await e(!1)}function $$(t,e){const n=pt(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),wM(n)?bM(n):eh(n).s_()&&xM(n,e))}function _M(t,e){const n=pt(t),r=eh(n);n.B_.delete(e),r.s_()&&z$(n,e),n.B_.size===0&&(r.s_()?r.a_():sc(n)&&n.K_.set("Unknown"))}function xM(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}eh(t).V_(e)}function z$(t,e){t.U_.xe(e),eh(t).m_(e)}function bM(t){t.U_=new $Ce({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),eh(t).start(),t.K_.F_()}function wM(t){return sc(t)&&!eh(t).i_()&&t.B_.size>0}function sc(t){return pt(t).k_.size===0}function H$(t){t.U_=void 0}async function G2e(t){t.K_.set("Online")}async function W2e(t){t.B_.forEach((e,n)=>{xM(t,e)})}async function q2e(t,e){H$(t),wM(t)?(t.K_.O_(e),bM(t)):t.K_.set("Unknown")}async function X2e(t,e,n){if(t.K_.set("Online"),e instanceof C$&&e.state===2&&e.cause)try{await async function(i,o){const a=o.cause;for(const s of o.targetIds)i.B_.has(s)&&(await i.remoteSyncer.rejectListen(s,a),i.B_.delete(s),i.U_.removeTarget(s))}(t,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jy(t,r)}else if(e instanceof ev?t.U_.$e(e):e instanceof P$?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(ut.min()))try{const r=await F$(t.localStore);n.compareTo(r)>=0&&await function(o,a){const s=o.U_.it(a);return s.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=o.B_.get(c);u&&o.B_.set(c,u.withResumeToken(l.resumeToken,a))}}),s.targetMismatches.forEach((l,c)=>{const u=o.B_.get(l);if(!u)return;o.B_.set(l,u.withResumeToken(fr.EMPTY_BYTE_STRING,u.snapshotVersion)),z$(o,l);const f=new rs(u.target,l,c,u.sequenceNumber);xM(o,f)}),o.remoteSyncer.applyRemoteEvent(s)}(t,n)}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),await Jy(t,r)}}async function Jy(t,e,n){if(!Zf(e))throw e;t.k_.add(1),await om(t),t.K_.set("Offline"),n||(n=()=>F$(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Be("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await I_(t)})}function G$(t,e){return e().catch(n=>Jy(t,n,e))}async function N_(t){const e=pt(t),n=Os(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;K2e(e);)try{const i=await I2e(e.localStore,r);if(i===null){e.L_.length===0&&n.a_();break}r=i.batchId,Y2e(e,i)}catch(i){await Jy(e,i)}W$(e)&&q$(e)}function K2e(t){return sc(t)&&t.L_.length<10}function Y2e(t,e){t.L_.push(e);const n=Os(t);n.s_()&&n.f_&&n.g_(e.mutations)}function W$(t){return sc(t)&&!Os(t).i_()&&t.L_.length>0}function q$(t){Os(t).start()}async function Q2e(t){Os(t).w_()}async function Z2e(t){const e=Os(t);for(const n of t.L_)e.g_(n.mutations)}async function J2e(t,e,n){const r=t.L_.shift(),i=dM.from(r,e,n);await G$(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await N_(t)}async function eRe(t,e){e&&Os(t).f_&&await async function(r,i){if(function(a){return FCe(a)&&a!==ve.ABORTED}(i.code)){const o=r.L_.shift();Os(r).__(),await G$(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await N_(r)}}(t,e),W$(t)&&q$(t)}async function ok(t,e){const n=pt(t);n.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=sc(n);n.k_.add(3),await om(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await I_(n)}async function tRe(t,e){const n=pt(t);e?(n.k_.delete(2),await I_(n)):e||(n.k_.add(2),await om(n),n.K_.set("Unknown"))}function eh(t){return t.W_||(t.W_=function(n,r,i){const o=pt(n);return o.b_(),new V2e(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Ro:G2e.bind(null,t),mo:W2e.bind(null,t),po:q2e.bind(null,t),R_:X2e.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),wM(t)?bM(t):t.K_.set("Unknown")):(await t.W_.stop(),H$(t))})),t.W_}function Os(t){return t.G_||(t.G_=function(n,r,i){const o=pt(n);return o.b_(),new B2e(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:Q2e.bind(null,t),po:eRe.bind(null,t),p_:Z2e.bind(null,t),y_:J2e.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await N_(t)):(await t.G_.stop(),t.L_.length>0&&(Be("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const a=Date.now()+r,s=new SM(e,n,a,i,o);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function EM(t,e){if(Aa("AsyncQueue",`${e}: ${t}`),Zf(t))return new He(ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{static emptySet(e){return new Ru(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Je.comparator(n.key,r.key):(n,r)=>Je.comparator(n.key,r.key),this.keyedMap=Wh(),this.sortedSet=new mn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ru)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ru;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this.z_=new mn(Je.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):st():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Tf{constructor(e,n,r,i,o,a,s,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=s,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const a=[];return n.forEach(s=>{a.push({type:0,doc:s})}),new Tf(e,n,Ru.emptySet(n),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&A_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nRe{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class rRe{constructor(){this.queries=sk(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=pt(n),o=i.queries;i.queries=sk(),o.forEach((a,s)=>{for(const l of s.J_)l.onError(r)})})(this,new He(ve.ABORTED,"Firestore shutting down"))}}function sk(){return new oc(t=>p$(t),A_)}async function iRe(t,e){const n=pt(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new nRe,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=await n.onListen(i,!0);break;case 1:o.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const s=EM(a,`Initialization of query '${$c(e.query)}' failed`);return void e.onError(s)}n.queries.set(i,o),o.J_.push(e),e.ea(n.onlineState),o.H_&&e.ta(o.H_)&&TM(n)}async function oRe(t,e){const n=pt(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const a=o.J_.indexOf(e);a>=0&&(o.J_.splice(a,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aRe(t,e){const n=pt(t);let r=!1;for(const i of e){const o=i.query,a=n.queries.get(o);if(a){for(const s of a.J_)s.ta(i)&&(r=!0);a.H_=i}}r&&TM(n)}function sRe(t,e,n){const r=pt(t),i=r.queries.get(e);if(i)for(const o of i.J_)o.onError(n);r.queries.delete(e)}function TM(t){t.X_.forEach(e=>{e.next()})}var aE,lk;(lk=aE||(aE={})).na="default",lk.Cache="cache";class lRe{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Tf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Tf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==aE.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${constructor(e){this.key=e}}class K${constructor(e){this.key=e}}class cRe{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=At(),this.mutatedKeys=At(),this.Va=m$(e),this.ma=new Ru(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new ak,i=n?n.ma:this.ma;let o=n?n.mutatedKeys:this.mutatedKeys,a=i,s=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{const h=i.get(u),d=M_(this.query,f)?f:null,y=!!h&&this.mutatedKeys.has(h.key),v=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let g=!1;h&&d?h.data.isEqual(d.data)?y!==v&&(r.track({type:3,doc:d}),g=!0):this.ya(h,d)||(r.track({type:2,doc:d}),g=!0,(l&&this.Va(d,l)>0||c&&this.Va(d,c)<0)&&(s=!0)):!h&&d?(r.track({type:0,doc:d}),g=!0):h&&!d&&(r.track({type:1,doc:h}),g=!0,(l||c)&&(s=!0)),g&&(d?(a=a.add(d),o=v?o.add(u):o.delete(u)):(a=a.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{ma:a,pa:r,ss:s,mutatedKeys:o}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const a=e.pa.j_();a.sort((u,f)=>function(d,y){const v=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return v(d)-v(y)}(u.type,f.type)||this.Va(u.doc,f.doc)),this.wa(r),i=i!=null&&i;const s=n&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,c=l!==this.Aa;return this.Aa=l,a.length!==0||c?{snapshot:new Tf(this.query,e.ma,o,a,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:s}:{ba:s}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new ak,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=At(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new K$(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new X$(r))}),n}va(e){this.da=e.ds,this.Ra=At();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Tf.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class uRe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class fRe{constructor(e){this.key=e,this.Fa=!1}}class hRe{constructor(e,n,r,i,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ma={},this.xa=new oc(s=>p$(s),A_),this.Oa=new Map,this.Na=new Set,this.La=new mn(Je.comparator),this.Ba=new Map,this.ka=new gM,this.qa={},this.Qa=new Map,this.Ka=Ef.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function dRe(t,e,n=!0){const r=tz(t);let i;const o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=await Y$(r,e,n,!0),i}async function pRe(t,e){const n=tz(t);await Y$(n,e,!0,!1)}async function Y$(t,e,n,r){const i=await N2e(t.localStore,Oo(e)),o=i.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let s;return r&&(s=await mRe(t,e,o,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&$$(t.remoteStore,i),s}async function mRe(t,e,n,r,i){t.Ua=(f,h,d)=>async function(v,g,p,x){let _=g.view.ga(p);_.ss&&(_=await nk(v.localStore,g.query,!1).then(({documents:b})=>g.view.ga(b,_)));const T=x&&x.targetChanges.get(g.targetId),w=x&&x.targetMismatches.get(g.targetId)!=null,M=g.view.applyChanges(_,v.isPrimaryClient,T,w);return uk(v,g.targetId,M.ba),M.snapshot}(t,f,h,d);const o=await nk(t.localStore,e,!0),a=new cRe(e,o.ds),s=a.ga(o.documents),l=im.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=a.applyChanges(s,t.isPrimaryClient,l);uk(t,n,c.ba);const u=new uRe(e,n,a);return t.xa.set(e,u),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),c.snapshot}async function gRe(t,e,n){const r=pt(t),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(a=>!A_(a,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await oE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&_M(r.remoteStore,i.targetId),sE(r,i.targetId)}).catch(Qf)):(sE(r,i.targetId),await oE(r.localStore,i.targetId,!0))}async function vRe(t,e){const n=pt(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_M(n.remoteStore,r.targetId))}async function yRe(t,e,n){const r=TRe(t);try{const i=await function(a,s){const l=pt(a),c=Bn.now(),u=s.reduce((d,y)=>d.add(y.key),At());let f,h;return l.persistence.runTransaction("Locally write mutations","readwrite",d=>{let y=Ma(),v=At();return l.hs.getEntries(d,u).next(g=>{y=g,y.forEach((p,x)=>{x.isValidDocument()||(v=v.add(p))})}).next(()=>l.localDocuments.getOverlayedDocuments(d,y)).next(g=>{f=g;const p=[];for(const x of s){const _=DCe(x,f.get(x.key).overlayedDocument);_!=null&&p.push(new ac(x.key,_,o$(_.value.mapValue),ma.exists(!0)))}return l.mutationQueue.addMutationBatch(d,c,p,s)}).next(g=>{h=g;const p=g.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(d,g.batchId,p)})}).then(()=>({batchId:h.batchId,changes:v$(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,s,l){let c=a.qa[a.currentUser.toKey()];c||(c=new mn(Mt)),c=c.insert(s,l),a.qa[a.currentUser.toKey()]=c}(r,i.batchId,n),await am(r,i.changes),await N_(r.remoteStore)}catch(i){const o=EM(i,"Failed to persist write");n.reject(o)}}async function Q$(t,e){const n=pt(t);try{const r=await R2e(n.localStore,e);e.targetChanges.forEach((i,o)=>{const a=n.Ba.get(o);a&&(Ut(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.Fa=!0:i.modifiedDocuments.size>0?Ut(a.Fa):i.removedDocuments.size>0&&(Ut(a.Fa),a.Fa=!1))}),await am(n,r,e)}catch(r){await Qf(r)}}function ck(t,e,n){const r=pt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((o,a)=>{const s=a.view.ea(e);s.snapshot&&i.push(s.snapshot)}),function(a,s){const l=pt(a);l.onlineState=s;let c=!1;l.queries.forEach((u,f)=>{for(const h of f.J_)h.ea(s)&&(c=!0)}),c&&TM(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _Re(t,e,n){const r=pt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),o=i&&i.key;if(o){let a=new mn(Je.comparator);a=a.insert(o,Tr.newNoDocument(o,ut.min()));const s=At().add(o),l=new R_(ut.min(),new Map,new mn(Mt),a,s);await Q$(r,l),r.La=r.La.remove(o),r.Ba.delete(e),AM(r)}else await oE(r.localStore,e,!1).then(()=>sE(r,e,n)).catch(Qf)}async function xRe(t,e){const n=pt(t),r=e.batch.batchId;try{const i=await C2e(n.localStore,e);J$(n,r,null),Z$(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await am(n,i)}catch(i){await Qf(i)}}async function bRe(t,e,n){const r=pt(t);try{const i=await function(a,s){const l=pt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,s).next(f=>(Ut(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,s)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);J$(r,e,n),Z$(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await am(r,i)}catch(i){await Qf(i)}}function Z$(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function J$(t,e,n){const r=pt(t);let i=r.qa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function sE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||ez(t,r)})}function ez(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(_M(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),AM(t))}function uk(t,e,n){for(const r of n)r instanceof X$?(t.ka.addReference(r.key,e),wRe(t,r)):r instanceof K$?(Be("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||ez(t,r.key)):st()}function wRe(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(Be("SyncEngine","New document in limbo: "+n),t.Na.add(r),AM(t))}function AM(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new Je(an.fromString(e)),r=t.Ka.next();t.Ba.set(r,new fRe(n)),t.La=t.La.insert(n,r),$$(t.remoteStore,new rs(Oo(h$(n.path)),r,"TargetPurposeLimboResolution",S_.oe))}}async function am(t,e,n){const r=pt(t),i=[],o=[],a=[];r.xa.isEmpty()||(r.xa.forEach((s,l)=>{a.push(r.Ua(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=yM.zi(l.targetId,c);o.push(f)}}))}),await Promise.all(a),r.Ma.R_(i),await async function(l,c){const u=pt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>pe.forEach(c,h=>pe.forEach(h.Wi,d=>u.persistence.referenceDelegate.addReference(f,h.targetId,d)).next(()=>pe.forEach(h.Gi,d=>u.persistence.referenceDelegate.removeReference(f,h.targetId,d)))))}catch(f){if(!Zf(f))throw f;Be("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const h=f.targetId;if(!f.fromCache){const d=u.us.get(h),y=d.snapshotVersion,v=d.withLastLimboFreeSnapshotVersion(y);u.us=u.us.insert(h,v)}}}(r.localStore,o))}async function SRe(t,e){const n=pt(t);if(!n.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=await U$(n.localStore,e);n.currentUser=e,function(o,a){o.Qa.forEach(s=>{s.forEach(l=>{l.reject(new He(ve.CANCELLED,a))})}),o.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await am(n,r.Ts)}}function ERe(t,e){const n=pt(t),r=n.Ba.get(e);if(r&&r.Fa)return At().add(r.key);{let i=At();const o=n.Oa.get(e);if(!o)return i;for(const a of o){const s=n.xa.get(a);i=i.unionWith(s.view.fa)}return i}}function tz(t){const e=pt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Q$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ERe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_Re.bind(null,e),e.Ma.R_=aRe.bind(null,e.eventManager),e.Ma.Wa=sRe.bind(null,e.eventManager),e}function TRe(t){const e=pt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xRe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bRe.bind(null,e),e}class e0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=O_(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return P2e(this.persistence,new A2e,e.initialUser,this.serializer)}ja(e){return new j$(vM.ei,this.serializer)}za(e){return new L2e}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}e0.provider={build:()=>new e0};class ARe extends e0{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Ut(this.persistence.referenceDelegate instanceof Zy);const r=this.persistence.referenceDelegate.garbageCollector;return new f2e(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?zr.withCacheSize(this.cacheSizeBytes):zr.DEFAULT;return new j$(r=>Zy.ei(r,n),this.serializer)}}class lE{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ck(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=SRe.bind(null,this.syncEngine),await tRe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new rRe}()}createDatastore(e){const n=O_(e.databaseInfo.databaseId),r=function(o){return new F2e(o)}(e.databaseInfo);return function(o,a,s,l){return new $2e(o,a,s,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,a,s){return new H2e(r,i,o,a,s)}(this.localStore,this.datastore,e.asyncQueue,n=>ck(this.syncEngine,n,0),function(){return ik.p()?new ik:new k2e}())}createSyncEngine(e,n){return function(i,o,a,s,l,c,u){const f=new hRe(i,o,a,s,l,c);return u&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=pt(i);Be("RemoteStore","RemoteStore shutting down."),o.k_.add(5),await om(o),o.Q_.shutdown(),o.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}lE.provider={build:()=>new lE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MRe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Aa("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PRe{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=br.UNAUTHENTICATED,this.clientId=n$.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{Be("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Be("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=EM(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zb(t,e){t.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await U$(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fk(t,e){t.asyncQueue.verifyOperationInProgress();const n=await CRe(t);Be("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ok(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ok(e.remoteStore,i)),t._onlineComponents=e}async function CRe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Be("FirestoreClient","Using user provided OfflineComponentProvider");try{await zb(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ve.FAILED_PRECONDITION||i.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;xf("Error using user provided cache. Falling back to memory cache: "+n),await zb(t,new e0)}}else Be("FirestoreClient","Using default OfflineComponentProvider"),await zb(t,new ARe(void 0));return t._offlineComponents}async function nz(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Be("FirestoreClient","Using user provided OnlineComponentProvider"),await fk(t,t._uninitializedComponentsProvider._online)):(Be("FirestoreClient","Using default OnlineComponentProvider"),await fk(t,new lE))),t._onlineComponents}function RRe(t){return nz(t).then(e=>e.syncEngine)}async function ORe(t){const e=await nz(t),n=e.eventManager;return n.onListen=dRe.bind(null,e.syncEngine),n.onUnlisten=gRe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=pRe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vRe.bind(null,e.syncEngine),n}function IRe(t,e,n={}){const r=new ys;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,s,l,c){const u=new MRe({next:h=>{u.eu(),a.enqueueAndForget(()=>oRe(o,f)),h.fromCache&&l.source==="server"?c.reject(new He(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),f=new lRe(s,u,{includeMetadataChanges:!0,ua:!0});return iRe(o,f)}(await ORe(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rz(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iz(t,e,n){if(!n)throw new He(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function NRe(t,e,n,r){if(e===!0&&r===!0)throw new He(ve.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dk(t){if(!Je.isDocumentKey(t))throw new He(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function pk(t){if(Je.isDocumentKey(t))throw new He(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function D_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":st()}function t0(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new He(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=D_(t);throw new He(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new He(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new He(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NRe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rz((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new He(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new He(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new He(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class L_{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mk({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new He(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mk(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new BPe;switch(r.type){case"firstParty":return new GPe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new He(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=hk.get(n);r&&(Be("ComponentProvider","Removing Datastore"),hk.delete(n),r.terminate())}(this),Promise.resolve()}}function DRe(t,e,n,r={}){var i;const o=(t=t0(t,L_))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&xf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let s,l;if(typeof r.mockUserToken=="string")s=r.mockUserToken,l=br.MOCK_USER;else{s=xMe(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new He(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new br(c)}t._authCredentials=new $Pe(new t$(s,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vs(this.firestore,e,this._query)}}class ki{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ki(this.firestore,e,this._key)}}class _s extends Vs{constructor(e,n,r){super(e,n,h$(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ki(this.firestore,null,new Je(e))}withConverter(e){return new _s(this.firestore,e,this._path)}}function oz(t,e,...n){if(t=_f(t),iz("collection","path",e),t instanceof L_){const r=an.fromString(e,...n);return pk(r),new _s(t,null,r)}{if(!(t instanceof ki||t instanceof _s))throw new He(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(an.fromString(e,...n));return pk(r),new _s(t.firestore,null,r)}}function LRe(t,e,...n){if(t=_f(t),arguments.length===1&&(e=n$.newId()),iz("doc","path",e),t instanceof L_){const r=an.fromString(e,...n);return dk(r),new ki(t,null,new Je(r))}{if(!(t instanceof ki||t instanceof _s))throw new He(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(an.fromString(e,...n));return dk(r),new ki(t.firestore,t instanceof _s?t.converter:null,new Je(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new V$(this,"async_queue_retry"),this.fu=()=>{const r=$b();r&&Be("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=$b();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=$b();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new ys;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Zf(e))throw e;Be("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(a){let s=a.message||"";return a.stack&&(s=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),s}(r);throw Aa("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=SM.createAndSchedule(this,e,n,r,o=>this.Su(o));return this.du.push(i),i}pu(){this.Au&&st()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class MM extends L_{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new gk,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gk(e),this._firestoreClient=void 0,await e}}}function kRe(t,e){const n=typeof t=="object"?t:CPe(),r=typeof t=="string"?t:"(default)",i=TPe(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=yMe("firestore");o&&DRe(i,...o)}return i}function az(t){if(t._terminated)throw new He(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||jRe(t),t._firestoreClient}function jRe(t){var e,n,r;const i=t._freezeSettings(),o=function(s,l,c,u){return new aCe(s,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,rz(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new PRe(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(s){const l=s==null?void 0:s._online.build();return{_offline:s==null?void 0:s._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Af(fr.fromBase64String(e))}catch(n){throw new He(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Af(fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new He(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new He(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new He(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const URe=/^__.*__$/;class FRe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ac(e,this.data,this.fieldMask,n,this.fieldTransforms):new rm(e,this.data,n,this.fieldTransforms)}}function lz(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class OM{constructor(e,n,r,i,o,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new OM(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return n0(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(lz(this.Mu)&&URe.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class VRe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||O_(e)}$u(e,n,r,i=!1){return new OM({Mu:e,methodName:n,Ku:r,path:sr.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cz(t){const e=t._freezeSettings(),n=O_(t._databaseId);return new VRe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function BRe(t,e,n,r,i,o={}){const a=t.$u(o.merge||o.mergeFields?2:0,e,n,i);hz("Data must be an object, but it was:",a,r);const s=uz(r,a);let l,c;if(o.merge)l=new ro(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const u=[];for(const f of o.mergeFields){const h=zRe(e,f,n);if(!a.contains(h))throw new He(ve.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);GRe(u,h)||u.push(h)}l=new ro(u),c=a.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=a.fieldTransforms;return new FRe(new Ri(s),l,c)}function $Re(t,e,n,r=!1){return IM(n,t.$u(r?4:3,e))}function IM(t,e){if(fz(t=_f(t)))return hz("Unsupported field value:",e,t),uz(t,e);if(t instanceof sz)return function(r,i){if(!lz(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const o=[];let a=0;for(const s of r){let l=IM(s,i.ku(a));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),a++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=_f(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PCe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Bn.fromDate(r);return{timestampValue:Qy(i.serializer,o)}}if(r instanceof Bn){const o=new Bn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qy(i.serializer,o)}}if(r instanceof CM)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Af)return{bytesValue:R$(i.serializer,r._byteString)};if(r instanceof ki){const o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.qu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:mM(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof RM)return function(a,s){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw s.qu("VectorValues must only contain numeric values.");return hM(s.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${D_(r)}`)}(t,e)}function uz(t,e){const n={};return r$(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ic(t,(r,i)=>{const o=IM(i,e.Ou(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function fz(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Bn||t instanceof CM||t instanceof Af||t instanceof ki||t instanceof sz||t instanceof RM)}function hz(t,e,n){if(!fz(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=D_(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function zRe(t,e,n){if((e=_f(e))instanceof PM)return e._internalPath;if(typeof e=="string")return dz(t,e);throw n0("Field path arguments must be of type string or ",t,!1,void 0,n)}const HRe=new RegExp("[~\\*/\\[\\]]");function dz(t,e,n){if(e.search(HRe)>=0)throw n0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new PM(...e.split("."))._internalPath}catch{throw n0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function n0(t,e,n,r,i){const o=r&&!r.isEmpty(),a=i!==void 0;let s=`Function ${e}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new He(ve.INVALID_ARGUMENT,s+t+l)}function GRe(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ki(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WRe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(NM("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WRe extends pz{data(){return super.data()}}function NM(t,e){return typeof e=="string"?dz(t,e):e instanceof PM?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qRe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new He(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class DM{}class LM extends DM{}function XRe(t,e,...n){let r=[];e instanceof DM&&r.push(e),r=r.concat(n),function(o){const a=o.filter(l=>l instanceof jM).length,s=o.filter(l=>l instanceof kM).length;if(a>1||a>0&&s>0)throw new He(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class kM extends LM{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new kM(e,n,r)}_apply(e){const n=this._parse(e);return mz(e._query,n),new Vs(e.firestore,e.converter,eE(e._query,n))}_parse(e){const n=cz(e.firestore);return function(o,a,s,l,c,u,f){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new He(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){yk(f,u);const d=[];for(const y of f)d.push(vk(l,o,y));h={arrayValue:{values:d}}}else h=vk(l,o,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||yk(f,u),h=$Re(s,a,f,u==="in"||u==="not-in");return On.create(c,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class jM extends DM{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new jM(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:fo.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let a=i;const s=o.getFlattenedFilters();for(const l of s)mz(a,l),a=eE(a,l)}(e._query,n),new Vs(e.firestore,e.converter,eE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class UM extends LM{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new UM(e,n)}_apply(e){const n=function(i,o,a){if(i.startAt!==null)throw new He(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new He(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dp(o,a)}(e._query,this._field,this._direction);return new Vs(e.firestore,e.converter,function(i,o){const a=i.explicitOrderBy.concat([o]);return new Jf(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function KRe(t,e="asc"){const n=e,r=NM("orderBy",t);return UM._create(r,n)}class FM extends LM{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new FM(e,n,r)}_apply(e){return new Vs(e.firestore,e.converter,Xy(e._query,this._limit,this._limitType))}}function YRe(t){return FM._create("limit",t,"F")}function vk(t,e,n){if(typeof(n=_f(n))=="string"){if(n==="")throw new He(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d$(e)&&n.indexOf("/")!==-1)throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(an.fromString(n));if(!Je.isDocumentKey(r))throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return UL(t,new Je(r))}if(n instanceof ki)return UL(t,n._key);throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${D_(n)}.`)}function yk(t,e){if(!Array.isArray(t)||t.length===0)throw new He(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mz(t,e){const n=function(i,o){for(const a of i)for(const s of a.getFlattenedFilters())if(o.indexOf(s.op)>=0)return s.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new He(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new He(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class QRe{convertValue(e,n="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw st()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ic(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>bn(a.doubleValue));return new RM(o)}convertGeoPoint(e){return new CM(bn(e.latitude),bn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=T_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Op(e));default:return null}}convertTimestamp(e){const n=Ps(e);return new Bn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=an.fromString(e);Ut(k$(r));const i=new Ip(r.get(1),r.get(3)),o=new Je(r.popFirst(5));return i.isEqual(n)||Aa(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZRe(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class JRe extends pz{constructor(e,n,r,i,o,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new tv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(NM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class tv extends JRe{data(e={}){return super.data(e)}}class eOe{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Rg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new tv(this._firestore,this._userDataWriter,r.key,r,new Rg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new He(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(s=>{const l=new tv(i._firestore,i._userDataWriter,s.doc.key,s.doc,new Rg(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>o||s.type!==3).map(s=>{const l=new tv(i._firestore,i._userDataWriter,s.doc.key,s.doc,new Rg(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return s.type!==0&&(c=a.indexOf(s.doc.key),a=a.delete(s.doc.key)),s.type!==1&&(a=a.add(s.doc),u=a.indexOf(s.doc.key)),{type:tOe(s.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function tOe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}class nOe extends QRe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Af(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ki(this.firestore,null,n)}}function rOe(t){t=t0(t,Vs);const e=t0(t.firestore,MM),n=az(e),r=new nOe(e);return qRe(t._query),IRe(n,t._query).then(i=>new eOe(e,r,t,i))}function iOe(t,e){const n=t0(t.firestore,MM),r=LRe(t),i=ZRe(t.converter,e);return oOe(n,[BRe(cz(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ma.exists(!1))]).then(()=>r)}function oOe(t,e){return function(r,i){const o=new ys;return r.asyncQueue.enqueueAndForget(async()=>yRe(await RRe(r),i,o)),o.promise}(az(t),e)}(function(e,n=!0){(function(i){Yf=i})(PPe),Gy(new Pp("firestore",(r,{instanceIdentifier:i,options:o})=>{const a=r.getProvider("app").getImmediate(),s=new MM(new zPe(r.getProvider("auth-internal")),new qPe(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new He(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ip(c.options.projectId,u)}(a,i),a);return o=Object.assign({useFetchStreams:n},o),s._setSettings(o),s},"PUBLIC").setMultipleInstances(!0)),Cu(IL,"4.7.5",e),Cu(IL,"4.7.5","esm2017")})();const aOe={apiKey:"AIzaSyBQa_lv8rGDt-zK8EbazhZu3KdoK-FmQgE",authDomain:"globe-rating-system.firebaseapp.com",projectId:"globe-rating-system",storageBucket:"globe-rating-system.firebasestorage.app",messagingSenderId:"213598069837",appId:"1:213598069837:web:b59d5d3c5a79d0640aa804"},sOe=WB(aOe),gz=kRe(sOe),lOe=({isOpen:t,onClose:e})=>{const[n,r]=V.useState(0),[i,o]=V.useState(0),[a,s]=V.useState(""),[l,c]=V.useState(""),[u,f]=V.useState(!1),h=async d=>{if(d.preventDefault(),!n||n<1||n>5){alert("Por favor selecciona una calificación válida");return}if(!a.trim()||a.length<2){alert("Por favor ingresa un nombre válido");return}if(!l.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)){alert("Por favor ingresa un email válido");return}const y=localStorage.getItem("lastRating");if(y&&Date.now()-parseInt(y)<24*60*60*1e3){alert("Solo puedes enviar una valoración por día");return}try{await iOe(oz(gz,"ratings"),{name:a,email:l,rating:n,timestamp:new Date,url:window.location.href}),localStorage.setItem("lastRating",Date.now().toString()),f(!0),setTimeout(()=>{f(!1),e(),r(0),s(""),c("")},2e3)}catch(v){console.error("Error:",v),alert("Hubo un error al enviar tu valoración")}};return t?S.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:S.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-black w-full max-w-md m-4 rounded-xl shadow-2xl relative border border-gray-800",children:[S.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:S.jsx(ho,{size:24})}),u?S.jsxs("div",{className:"p-6 text-center",children:[S.jsx("div",{className:"text-6xl mb-4",children:"⭐"}),S.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"¡Gracias por tu valoración!"}),S.jsx("p",{className:"text-gray-400",children:"Tu opinión nos ayuda a mejorar"})]}):S.jsxs("div",{className:"p-6",children:[S.jsx("h2",{className:"text-2xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Valora tu Experiencia"}),S.jsxs("form",{onSubmit:h,className:"space-y-6",children:[S.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(d=>S.jsx("button",{type:"button",className:"transform transition-all duration-300 hover:scale-110",onMouseEnter:()=>o(d),onMouseLeave:()=>o(0),onClick:()=>r(d),children:S.jsx(vl,{size:32,className:`${d<=(i||n)?"fill-yellow-400 text-yellow-400":"text-gray-600"} transition-colors duration-300`})},d))}),S.jsxs("div",{className:"space-y-4",children:[S.jsx("input",{type:"text",placeholder:"Tu nombre",value:a,onChange:d=>s(d.target.value),className:"w-full px-4 py-2 bg-black/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-white"}),S.jsx("input",{type:"email",placeholder:"Tu correo electrónico",value:l,onChange:d=>c(d.target.value),className:"w-full px-4 py-2 bg-black/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-white"})]}),S.jsx("button",{type:"submit",className:"w-full py-3 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg font-semibold hover:opacity-90 transition-opacity text-white",children:"Enviar Valoración"})]})]})]})}):null},cOe=({isVisible:t,onClose:e})=>{const[n,r]=V.useState([]),[i,o]=V.useState({totalVotes:0,averageRating:0,lastWeekVotes:0,distribution:{1:0,2:0,3:0,4:0,5:0}});V.useEffect(()=>{t&&a()},[t]);const a=async()=>{try{const s=oz(gz,"ratings"),l=XRe(s,KRe("timestamp","desc"),YRe(100)),c=await rOe(l),u=[];let f=0,h=0;const d={1:0,2:0,3:0,4:0,5:0},y=new Date(Date.now()-7*24*60*60*1e3);let v=0;c.forEach(g=>{var _,T;const p=g.data(),x=Number(p.rating);!isNaN(x)&&x>=1&&x<=5&&(f+=x,h++,d[x]++,(((_=p.timestamp)==null?void 0:_.toDate())||new Date)>y&&v++),u.push({id:g.id,...p,timestamp:((T=p.timestamp)==null?void 0:T.toDate())||new Date,rating:x})}),r(u),o({totalVotes:h,averageRating:h>0?f/h:0,lastWeekVotes:v,distribution:d})}catch(s){console.error("Error fetching ratings:",s),o({totalVotes:0,averageRating:0,lastWeekVotes:0,distribution:{1:0,2:0,3:0,4:0,5:0}})}};return t?S.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:S.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-black w-full max-w-6xl m-4 rounded-xl shadow-2xl relative border border-gray-800 max-h-[90vh] overflow-hidden",children:[S.jsx("div",{className:"sticky top-0 z-10 bg-gradient-to-br from-gray-900 to-black p-6 border-b border-gray-800",children:S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx(vl,{className:"w-8 h-8 text-yellow-400"}),S.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Valoraciones y Opiniones"})]}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-800 rounded-lg transition-colors",children:S.jsx(ho,{size:24,className:"text-gray-400"})})]})}),S.jsxs("div",{className:"p-6 space-y-8 overflow-y-auto max-h-[calc(90vh-80px)]",children:[S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[S.jsx("div",{className:"bg-black/40 p-6 rounded-xl border border-blue-500/30",children:S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx(dw,{className:"w-8 h-8 text-blue-400"}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-gray-400",children:"Total Valoraciones"}),S.jsx("p",{className:"text-3xl font-bold text-white",children:i.totalVotes})]})]})}),S.jsx("div",{className:"bg-black/40 p-6 rounded-xl border border-yellow-500/30",children:S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx(vl,{className:"w-8 h-8 text-yellow-400"}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-gray-400",children:"Calificación Promedio"}),S.jsx("p",{className:"text-3xl font-bold text-white",children:i.averageRating?i.averageRating.toFixed(1):"0.0"})]})]})}),S.jsx("div",{className:"bg-black/40 p-6 rounded-xl border border-green-500/30",children:S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx(GJ,{className:"w-8 h-8 text-green-400"}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-gray-400",children:"Última Semana"}),S.jsx("p",{className:"text-3xl font-bold text-white",children:i.lastWeekVotes})]})]})})]}),S.jsxs("div",{className:"bg-black/40 p-6 rounded-xl border border-gray-800",children:[S.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Distribución de Estrellas"}),S.jsx("div",{className:"space-y-3",children:[5,4,3,2,1].map(s=>{const l=i.distribution[s]||0,c=i.totalVotes>0?l/i.totalVotes*100:0;return S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsxs("div",{className:"flex items-center gap-1 w-20",children:[S.jsx(vl,{className:"w-4 h-4 text-yellow-400",fill:"currentColor"}),S.jsx("span",{className:"text-gray-400",children:s})]}),S.jsx("div",{className:"flex-1 h-4 bg-gray-800 rounded-full overflow-hidden",children:S.jsx("div",{className:"h-full bg-yellow-400/50 transition-all duration-500",style:{width:`${c}%`}})}),S.jsx("div",{className:"w-32 text-right",children:S.jsxs("span",{className:"text-gray-400",children:[l," (",c.toFixed(1),"%)"]})})]},s)})})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx("h3",{className:"text-xl font-bold text-white",children:"Valoraciones Recientes"}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(s=>S.jsx("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800",children:S.jsx("div",{className:"flex justify-between items-start",children:S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[S.jsx("span",{className:"font-medium text-white",children:s.name}),S.jsx("span",{className:"text-sm text-gray-500",children:s.timestamp.toLocaleDateString()})]}),S.jsx("div",{className:"flex gap-1 mb-2",children:[...Array(5)].map((l,c)=>S.jsx(vl,{size:16,className:c<s.rating?"text-yellow-400 fill-yellow-400":"text-gray-600"},c))}),S.jsx("p",{className:"text-sm text-gray-400",children:s.email})]})})},s.id))})]})]})]})}):null},uOe=({isMobile:t,onToggleMenu:e,setShowGlobal:n,setShowSimulation:r,setShowPredictions:i,setShowGlobalPredictions:o,setShowDictionary:a,setShowEducational:s,setIsRatingModalOpen:l,setShowRatingsDashboard:c})=>{const[u,f]=V.useState(!1),[h,d]=V.useState(!1);V.useEffect(()=>{const g=setInterval(()=>{u||(d(!0),setTimeout(()=>d(!1),1e3))},5e3);return()=>clearInterval(g)},[u]);const y=()=>{f(!u),e&&e(!u)},v=g=>{g(!0),f(!1)};return S.jsxs("div",{className:"fixed z-50 left-4 bottom-4",children:[S.jsxs("button",{onClick:y,className:`
                    relative flex items-center justify-center 
                    w-16 h-16 rounded-full 
                    bg-gradient-to-r from-blue-500 to-purple-600
                    text-white shadow-lg 
                    hover:from-blue-600 hover:to-purple-700
                    transition-all duration-300
                    ${h?"animate-pulse scale-110":""}
                    group
                `,"aria-label":"Menú de opciones",children:[u?S.jsx(ho,{size:28}):S.jsx(HF,{size:28}),!u&&S.jsx("div",{className:"absolute left-20 hidden group-hover:flex items-center",children:S.jsx("div",{className:"bg-black/90 text-white px-3 py-2 rounded-lg whitespace-nowrap text-sm",children:"Click para ver opciones"})}),!u&&S.jsx("div",{className:"absolute inset-0 rounded-full",children:S.jsx("div",{className:"absolute inset-0 rounded-full bg-white/30 animate-ping"})})]}),u&&S.jsxs("div",{className:`
                    absolute left-0 bottom-20 py-2 w-72
                    bg-gradient-to-br from-black/95 to-gray-900/95
                    backdrop-blur-lg rounded-2xl shadow-2xl
                    border border-gray-700/50
                    transform transition-all duration-300 ease-in-out
                `,children:[S.jsx("div",{className:"absolute -bottom-2 left-6 w-4 h-4 bg-gray-900 transform rotate-45"}),S.jsxs("button",{onClick:()=>v(n),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[S.jsx(Gd,{size:20,className:"text-blue-400"}),S.jsx("span",{children:"Estadísticas Globales"})]}),S.jsxs("button",{onClick:()=>v(r),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[S.jsx(Bl,{size:20,className:"text-green-400"}),S.jsx("span",{children:"Simulador"})]}),S.jsxs("button",{onClick:()=>v(i),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[S.jsx(qJ,{size:20,className:"text-purple-400"}),S.jsx("span",{children:"Predicciones"})]}),S.jsxs("button",{onClick:()=>v(o),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[S.jsx(Gd,{size:20,className:"text-cyan-400"}),S.jsx("span",{children:"Predicciones Globales"})]}),S.jsxs("button",{onClick:()=>v(a),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[S.jsx(YT,{size:20,className:"text-indigo-400"}),S.jsx("span",{children:"Fuente de datos"})]}),S.jsxs("button",{onClick:()=>v(s),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[S.jsx(WF,{size:20,className:"text-green-500"}),S.jsx("span",{children:"Guía del Proyecto"})]}),S.jsxs("button",{onClick:()=>v(c),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[S.jsx(vl,{size:20,className:"text-yellow-400"}),S.jsx("span",{children:"Dashboard de Valoraciones"})]}),S.jsxs("button",{onClick:()=>v(l),className:"w-full px-4 py-3 flex items-center gap-3 text-white hover:bg-white/10 transition-colors",children:[S.jsx(vl,{size:20,className:"text-orange-400"}),S.jsx("span",{children:"Valorar Experiencia"})]})]})]})},fOe=({country:t,isMobile:e})=>S.jsxs("div",{className:`fixed ${e?"top-16 left-2":"top-24 left-4"} z-50`,children:[S.jsxs("div",{className:"flex flex-col items-center gap-2",children:[S.jsx("div",{className:`flag-container ${e?"w-32 h-20":"w-40 h-24"} relative overflow-hidden rounded-lg shadow-lg`,children:S.jsx("div",{className:"flag-static w-full h-full",style:{background:`url(https://flagcdn.com/w160/${t.code.toLowerCase()}.png) no-repeat center center`,backgroundSize:"contain",backgroundColor:"#f0f0f0"}})}),S.jsx("div",{className:"text-content",children:S.jsx("h1",{className:`text-white ${e?"text-2xl":"text-3xl"} font-bold tracking-wider bg-black bg-opacity-50 px-4 py-2 rounded text-center`,children:t.name})})]}),S.jsx("style",{children:`
                .flag-container {
                    transform-style: preserve-3d;
                    perspective: 1000px;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                }

                .flag-container::after {
                    content: '';
                    position: absolute;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    background: linear-gradient(
                        45deg,
                        rgba(0,0,0,0.2) 0%,
                        rgba(0,0,0,0) 70%
                    );
                    pointer-events: none;
                    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
                }
            `})]}),hOe=()=>{const t=V.useRef(null),[e,n]=V.useState(null),r=V.useRef(null),i=V.useRef(null),o=V.useRef([]),[a,s]=V.useState(1e-4),[l,c]=V.useState(!0),[u,f]=V.useState(!1),[h,d]=V.useState(!1),[y,v]=V.useState(!1),[g,p]=V.useState(!1),[x,_]=V.useState(!1),[T,w]=V.useState(!1),[M,b]=V.useState(!0),[A,E]=V.useState(!1),[P,R]=V.useState(!1),N=V.useRef({x:0,y:0}),O=V.useRef(!1),D=V.useRef(null),k=Li({maxWidth:768}),H=Li({minWidth:769,maxWidth:1024}),B=V.useCallback(()=>k?{earthRadius:3,cameraDistance:10,markerSize:.05,minDistance:5,maxDistance:15,starCount:5e3,starSize:.08}:H?{earthRadius:4,cameraDistance:12,markerSize:.08,minDistance:6,maxDistance:20,starCount:7500,starSize:.09}:{earthRadius:5,cameraDistance:15,markerSize:.1,minDistance:7,maxDistance:25,starCount:1e4,starSize:.1},[k,H]);V.useEffect(()=>{var Q;const K=B(),z=new iU;z.background=new Ot(0);const X=new si(k?60:75,window.innerWidth/window.innerHeight,.1,1e3),ee=new dT({antialias:!k,alpha:!0,powerPreference:"high-performance"});ee.setSize(window.innerWidth,window.innerHeight),ee.setPixelRatio(k?1:window.devicePixelRatio),(Q=t.current)==null||Q.appendChild(ee.domElement);const me=new jo,_e=new oU({color:16777215,size:K.starSize,transparent:!0,opacity:1,sizeAttenuation:!0}),Ne=[];for(let le=0;le<K.starCount;le++){const ue=(Math.random()-.5)*2e3,ne=(Math.random()-.5)*2e3,ge=(Math.random()-.5)*2e3;Ne.push(ue,ne,ge)}me.setAttribute("position",new Di(Ne,3));const We=new Float32Array(Ne.length/3);for(let le=0;le<We.length;le++)We[le]=Math.random()*Math.PI*2;me.setAttribute("blinkOffset",new Di(We,1));const Ue=new bX(me,_e);z.add(Ue);const fe=new aU,Re=new EX(fe),Ee=k?"2k":"8k",G=Re.load(`textures/${Ee}_earth_daymap.jpg`),lt=Re.load(`textures/${Ee}_earth_nightmap.jpg`),be=Re.load(`textures/${Ee}_earth_normal_map.jpg`),Le=Re.load(`textures/${Ee}_earth_clouds.jpg`);G.colorSpace=jn,lt.colorSpace=jn;const ke=new ba({uniforms:{dayTexture:{value:G},nightTexture:{value:lt},normalMap:{value:be},sunDirection:{value:new te(1,0,0)},normalScale:{value:new gt(.5,.5)}},vertexShader:`
                varying vec2 vUv;
                varying vec3 vNormal;
                varying vec3 vPosition;

                void main() {
                    vUv = uv;
                    vNormal = normalize(normalMatrix * normal);
                    vPosition = position;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                }
            `,fragmentShader:`
                uniform sampler2D dayTexture;
                uniform sampler2D nightTexture;
                uniform sampler2D normalMap;
                uniform vec3 sunDirection;
                uniform vec2 normalScale;

                varying vec2 vUv;
                varying vec3 vNormal;

                void main() {
                    vec3 normalMap = texture2D(normalMap, vUv).xyz * 2.0 - 1.0;
                    vec3 mixNormal = normalize(vNormal + normalMap.xyz * vec3(normalScale, 1.0));

                    float sunDot = dot(mixNormal, sunDirection);
                    float dayMix = smoothstep(-0.2, 0.2, sunDot);

                    vec4 dayColor = texture2D(dayTexture, vUv);
                    vec4 nightColor = texture2D(nightTexture, vUv);

                    gl_FragColor = mix(nightColor, dayColor, dayMix);
                }
            `}),mt=new ml(K.earthRadius,k?64:128,k?64:128),Ye=new Gr(mt,ke);i.current=Ye,z.add(Ye);const Ze=new ml(K.earthRadius*1.006,k?64:128,k?64:128),ht=new $2({map:Le,transparent:!0,opacity:.4,depthWrite:!1,blending:j1}),Pt=new Gr(Ze,ht);z.add(Pt);const kt=new ml(K.earthRadius*1.03,k?64:128,k?64:128),$=new $2({color:9681119,transparent:!0,opacity:.15,side:Vr}),L=new Gr(kt,$);z.add(L);const re=new Vh;z.add(re),o.current=[];function ye(le,ue,ne){const ge=(90-le)*(Math.PI/180),Ie=(ue+180)*(Math.PI/180);return new te(-ne*Math.sin(ge)*Math.cos(Ie),ne*Math.cos(ge),ne*Math.sin(ge)*Math.sin(Ie))}mK.countries.forEach(le=>{const ue=new ml(K.markerSize,k?8:16,k?8:16),ne=new cT({color:65280,transparent:!0,opacity:.6}),ge=new Gr(ue,ne),Ie=ye(le.lat,le.lng,K.earthRadius*1.02);ge.position.copy(Ie),ge.userData.countryData=le,re.add(ge),o.current.push(ge)});const he=new PX(4210752,k?.7:.6);z.add(he);const xe=new MX(16777215,k?1:1.2);xe.position.set(5,3,5),z.add(xe),X.position.z=K.cameraDistance;const Ce=new lU(X,ee.domElement);r.current=Ce,Ce.enableDamping=!0,Ce.dampingFactor=k?.07:.05,Ce.rotateSpeed=k?.5:.3,Ce.enableZoom=!0,Ce.minDistance=K.minDistance,Ce.maxDistance=K.maxDistance,Ce.autoRotate=l,Ce.autoRotateSpeed=k?.3:.5,Ce.enablePan=!1,Ce.minPolarAngle=Math.PI*.2,Ce.maxPolarAngle=Math.PI*.8,Ce.touches={ONE:Ga.ROTATE,TWO:Ga.DOLLY_ROTATE};const Te=new CX,Pe=new gt,Y=le=>{le.preventDefault(),O.current=!0;const ue=le.touches[0];N.current={x:ue.clientX,y:ue.clientY,time:Date.now()},D.current&&clearTimeout(D.current)},Se=le=>{O.current&&(le.preventDefault(),r.current&&(r.current.autoRotate=!1))},de=le=>{le.preventDefault();const ue=le.changedTouches[0],ne=N.current.time,Ie=Date.now()-ne,rt=Math.abs(ue.clientX-N.current.x),It=Math.abs(ue.clientY-N.current.y),En=Math.sqrt(rt*rt+It*It);if(Ie<200&&En<10){const dt=ue.clientX,Tn=ue.clientY;Pe.x=dt/window.innerWidth*2-1,Pe.y=-(Tn/window.innerHeight)*2+1,Te.setFromCamera(Pe,X);const Dn=Te.intersectObjects(o.current,!0);if(Dn.length>0){const vi=Dn[0].object.userData.countryData;vi&&(n(vi),Ge(vi,X,Ce))}}D.current=setTimeout(()=>{r.current&&l&&(r.current.autoRotate=!0)},1500),O.current=!1},Qe=le=>{le.preventDefault();const ue=le.clientX,ne=le.clientY;Pe.x=ue/window.innerWidth*2-1,Pe.y=-(ne/window.innerHeight)*2+1,Te.setFromCamera(Pe,X);const ge=Te.intersectObjects(o.current,!0);if(ge.length>0){const Ie=ge[0].object.userData.countryData;Ie&&(n(Ie),Ge(Ie,X,Ce))}},Ge=(le,ue,ne)=>{ne.autoRotate=!1;const ge=ye(le.lat,le.lng,K.earthRadius),Ie=k?K.earthRadius+2:K.earthRadius+4,rt=ye(le.lat,le.lng,Ie);new NX(ue.position).to({x:rt.x,y:rt.y,z:rt.z},k?1e3:1500).easing(Tu.Cubic.InOut).onUpdate(()=>{ue.lookAt(ge),ne.target.copy(ge)}).start(),o.current.forEach(It=>{const En=It.userData.countryData.code===le.code;It.material.color.setHex(En?16711680:65280),It.material.opacity=En?1:.6})},qe=()=>{const le=window.innerWidth,ue=window.innerHeight;X.aspect=le/ue,X.updateProjectionMatrix(),ee.setSize(le,ue);const ne=B();X.position.z=ne.cameraDistance,Ce.minDistance=ne.minDistance,Ce.maxDistance=ne.maxDistance};k?(ee.domElement.addEventListener("touchstart",Y,{passive:!1}),ee.domElement.addEventListener("touchmove",Se,{passive:!1}),ee.domElement.addEventListener("touchend",de,{passive:!1}),ee.domElement.style.touchAction="none"):window.addEventListener("click",Qe),window.addEventListener("resize",qe,{passive:!0}),window.addEventListener("orientationchange",qe);let Ve=0,De=null;const vt=()=>{if(De=requestAnimationFrame(vt),Ve+=k?8e-4:.001,!k||Ve%2===0){const ne=Ue.geometry.attributes.position,ge=Ue.geometry.attributes.blinkOffset;for(let Ie=0;Ie<ne.count;Ie++){const rt=Math.sin(Ve*3+ge.array[Ie])*.3+.7;Ue.material.opacity=rt}}Ue.rotation.y+=k?5e-5:1e-4,Ue.rotation.x+=k?5e-5:1e-4;const le=Math.cos(Ve),ue=Math.sin(Ve);if(ke.uniforms.sunDirection.value.set(le,0,ue),xe.position.set(le*5,3,ue*5),l){const ne=k?a*.75:a;Ye.rotation.y+=ne,Pt.rotation.y+=ne*1.1,L.rotation.y+=ne,re.rotation.y+=ne}DX(),Ce.update(),ee.render(z,X)};return vt(),()=>{De&&cancelAnimationFrame(De),k?(ee.domElement.removeEventListener("touchstart",Y),ee.domElement.removeEventListener("touchmove",Se),ee.domElement.removeEventListener("touchend",de),D.current&&clearTimeout(D.current)):window.removeEventListener("click",Qe),window.removeEventListener("resize",qe),window.removeEventListener("orientationchange",qe),z.traverse(le=>{le instanceof Gr&&(le.geometry.dispose(),le.material.map&&le.material.map.dispose(),le.material.dispose())}),ee.dispose(),t.current&&t.current.contains(ee.domElement)&&t.current.removeChild(ee.domElement)}},[k,H,l,a,B]);const F=K=>{const z=k?5e-5:1e-4;s(X=>X+K*z)},q=()=>{c(K=>!K)};return S.jsxs("div",{className:"relative w-full h-screen overflow-hidden select-none",children:[S.jsx("div",{ref:t,className:"w-full h-screen bg-black touch-manipulation",style:{cursor:k?"default":"grab",overscrollBehavior:"none",WebkitTapHighlightColor:"transparent"}}),S.jsx(cee,{isMobile:k}),e&&S.jsx(fOe,{country:e,isMobile:k}),S.jsx(see,{onPause:q,isPlaying:l,isMobile:k,onSpeedChange:F}),S.jsx(uee,{isMobile:k}),S.jsx(uOe,{isMobile:k,setShowGlobal:f,setShowSimulation:d,setShowPredictions:v,setShowGlobalPredictions:p,setShowDictionary:w,setShowEducational:_,setShowRatingsDashboard:E,setIsRatingModalOpen:R}),S.jsx(UAe,{isVisible:u,onClose:()=>f(!1),isMobile:k,className:`fixed transition-all duration-300 ease-in-out ${k?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),S.jsx(FAe,{isVisible:h,onClose:()=>d(!1),isMobile:k,className:`fixed transition-all duration-300 ease-in-out ${k?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),S.jsx(VAe,{isVisible:y,onClose:()=>v(!1),isMobile:k,className:`fixed transition-all duration-300 ease-in-out ${k?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),S.jsx($Ae,{isVisible:g,onClose:()=>p(!1),isMobile:k,className:`fixed transition-all duration-300 ease-in-out ${k?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),S.jsx(KAe,{isVisible:x,onClose:()=>_(!1),isMobile:k,className:`fixed transition-all duration-300 ease-in-out ${k?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),S.jsx(aMe,{isVisible:T,onClose:()=>w(!1),isMobile:k,className:`fixed transition-all duration-300 ease-in-out ${k?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),S.jsx(lOe,{isOpen:P,onClose:()=>R(!1),isMobile:k,className:k?"w-[90vw] max-w-sm mx-auto":"w-96"}),A&&S.jsx(cOe,{isVisible:A,onClose:()=>E(!1),isMobile:k,className:`fixed transition-all duration-300 ease-in-out ${k?"inset-x-0 bottom-0 h-[80vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`}),M&&S.jsx(lMe,{onComplete:()=>b(!1),isMobile:k}),e&&S.jsx(jAe,{country:e,controlsRef:r,onClose:()=>{n(null),r.current&&(r.current.autoRotate=!0)},isMobile:k,className:`fixed transition-all duration-300 ease-in-out ${k?"inset-x-0 bottom-0 h-[70vh] rounded-t-2xl":"right-8 bottom-8 w-96 rounded-xl"}`})]})};function dOe(){return S.jsx("div",{className:"App",children:S.jsx(hOe,{})})}Hb.createRoot(document.getElementById("root")).render(S.jsx(W.StrictMode,{children:S.jsx(dOe,{})}));
